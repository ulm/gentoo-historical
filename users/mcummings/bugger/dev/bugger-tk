#!/usr/bin/perl

# WARNING
#
# THIS IS A WORK IN PROGRESS. ALL CODE IS SUBJECT TO CHANGE.
# And cleaning ;0
#
# This is a test framework for a graphical version of bugger
#
# mcummings@gentoo.org
#

use Tk;
use Tk::ToolBar;
use Tk::HList;
   use Tk::ItemStyle;

use vars qw/$TOP/;

my $mw = new MainWindow;
my $tb = $mw->ToolBar(
    qw/-movable 1 -side top
      -indicatorcolor blue /
);

#$TOP= $mw->BuggerWidgets(
	#-name	=>	'Bugger-TK',
	#-text	=>	"bugger-tk is a tk interface to bugzilla, currently supporting only Gentoo's implimentation of bugzilla but theoretically capable of supporting other bugzilla sites.",
	#-title	=>	'Bugger-TK',
	#-iconname	=>	'bugger-tk',
#);

#my $panels = $mw->Panedwindow;
#$panels->pack(qw/-side top -expand yes -fill both -pady 2 -padx 2m/);
#
#my $bugidpane = $panels->Label(-text =>"BugID", -background => '#f603f603f603');
#my $priopane = $panels->Label(-text => "Priority", -background => '#f603f603f603');
#my $assignpane =$panels->Label(-text => "Assigned to", -background => '#f603f603f603'); 
#my $titlepane = $panels->Label(-text => "Bug Title", -background => '#fffffae0cdd2');
#$panels->add($bugidpane,$priopane,$assignpane,$titlepane);

$tb->ToolButton(
    -text    => 'Button',
    -tip     => 'tool tip',
    -command => sub { print "hi\n" }
);
# MPC $tb->ToolLabel( -text => 'A Label' );
# MPC $tb->Label( -text => 'Another Label' );
$tb->ToolLabEntry(
    -label     => 'Search Bugs',
    -labelPack => [
        -side   => "left",
        -anchor => "w"
    ],
    -width => 20,
);

my $tb2 = $mw->ToolBar;
# MPC $tb2->ToolButton(
# MPC     -image   => 'navback22',
# MPC     -tip     => 'back',
# MPC     -command => \&back
# MPC );
$tb2->ToolButton(
    -image   => 'navforward22',
    -tip     => 'forward',
    -command => \&forward
);
$tb2->separator;
$tb2->ToolButton(
    -image   => 'navhome22',
    -tip     => 'home',
    -command => \&home
);
$tb2->ToolButton(
    -image   => 'actreload22',
    -tip     => 'reload',
    -command => \&reload
);
$tb2->ToolButton(
   -image    => 'actexit22',
   -tip      => 'quit',
   -command  => \&quit
);

my $hlist = $mw->HList(-columns=>4, -width=>70, -background=>'#ffffffffffff', -command=>\&launch_win,)->pack;

   my $red1  = $hlist->ItemStyle('text', -foreground=>'#800000');
   my $blue = $hlist->ItemStyle('text', -foreground=>'#000080', -anchor=>'w');

   my $red2  = $hlist->ItemStyle('text', -foreground=>'#800000', -background=>'#fbdaffffb603');
   my $blue1 = $hlist->ItemStyle('text', -foreground=>'#000080', anchor=>'e');
   my $black1 = $hlist->ItemStyle('text', -foreground=>'#000000000000', -background=>'#ffffffffffff');
   my $blue2 = $hlist->ItemStyle('text', -foreground=>'#000080', -background=>'#fbdaffffb603', -anchor=>'e');
   my $black2 = $hlist->ItemStyle('text', -foreground=>'#000000000000', -background=>'#fbdaffffb603');
   my $header;
   #foreach ([Joe => '$10,000']) {
   $header = $hlist->addchild("");
   $hlist->itemCreate($header, 0, -itemtype=>'text', -text=>"BugID", -style=>$black1);
   $hlist->itemCreate($header, 1, -itemtype=>'text', -text=>"Priority", -style=>$black1);
   $hlist->itemCreate($header, 2, -itemtype=>'text', -text=>"Assigned To", -style=>$black1);
   $hlist->itemCreate($header, 3, -itemtype=>'text', -text=>"Description", -style=>$black1);

   
   my $entry;
       $entry = $hlist->addchild("");
       $hlist->itemCreate($entry, 0, -itemtype=>'text',
                -text=>"32123", -style=>$red2 );
       $hlist->itemCreate($entry, 1, -itemtype=>'text',
                -text=>"high", -style=>$blue2);
       $hlist->itemCreate($entry, 2, -itemtype=>'text',
                -text=>"mcummings\@gentoo.org", -style=>$blue2);
       $hlist->itemCreate($entry, 3, -itemtype=>'text',
                -text=>"Unable to compile dog crap ", -style=>$blue2);
	
       $entry = $hlist->addchild("");
       $hlist->itemCreate($entry, 0, -itemtype=>'text',
                -text=>"55454",  -style=>$red1, );
       $hlist->itemCreate($entry, 1, -itemtype=>'text',
                -text=>"low", -style=>$blue1);
       $hlist->itemCreate($entry, 2, -itemtype=>'text',
                -text=>"zhen\@gentoo.org", -style=>$blue1);
       $hlist->itemCreate($entry, 3, -itemtype=>'text',
                -text=>"GCC breaks", -style=>$blue1);
	
       $entry = $hlist->addchild("");
       $hlist->itemCreate($entry, 0, -itemtype=>'text',
                -text=>"32123", -style=>$red2 );
       $hlist->itemCreate($entry, 1, -itemtype=>'text',
                -text=>"high", -style=>$blue2);
       $hlist->itemCreate($entry, 2, -itemtype=>'text',
                -text=>"mcummings\@gentoo.org", -style=>$blue2);
       $hlist->itemCreate($entry, 3, -itemtype=>'text',
                -text=>"Unable to compile dog crap ", -style=>$blue2);
	
       $entry = $hlist->addchild("");
       $hlist->itemCreate($entry, 0, -itemtype=>'text',
                -text=>"55454",  -style=>$red1, );
       $hlist->itemCreate($entry, 1, -itemtype=>'text',
                -text=>"low", -style=>$blue1);
       $hlist->itemCreate($entry, 2, -itemtype=>'text',
                -text=>"zhen\@gentoo.org", -style=>$blue1);
       $hlist->itemCreate($entry, 3, -itemtype=>'text',
                -text=>"GCC breaks", -style=>$blue1);
	
   #}
MainLoop;

sub forward { print "going totally forward\n" }

sub launch_win {
use Data::Dumper;
my @incoming = @_;
foreach my $key (@incoming)
{print Dumper($key)}
print "all done\n";

}

sub quit { print "Thank you for using bugger-tk\n\n";  exit() }
