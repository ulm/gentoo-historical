<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet href="../../xsl/guide.xsl" type="text/xsl"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/tw/gnupg-user.xml">
<title>GnuPG Gentoo 使用者指南</title>
<author title="Author"><mail link="gustavo@felisberto.net">Gustavo Felisberto</mail></author>
<author title="Editor"><mail link="zhen@gentoo.org">John P. Davis</mail></author>
<author title="Translator"><mail link="palatis@gentoo.org.tw">【Palatis】</mail></author>
<author title="Reviewer"><mail link="bennyc@gentoo.org">BennyC</mail></author>

<abstract>這篇指南教您怎麼使用 GnuPG - 一個安全的加密工具。</abstract>

<version>1.0</version>
<date>17 December 2002</date>
<!-- Translate date : 19 April 2003 -->

<chapter>
	<title>介紹</title>
	<section>
		<title>您可以在這篇指南中得到什麼？</title>
		<body>
		<p>這篇指南假設您對公開金鑰密碼、加密、以及數位簽章很熟悉。如果不是，請先閱讀 <uri link="http://www.gnupg.org/(en)/documentation/guides.html"> GnuPG handbook</uri> 的第二章。</p>
		<p>這篇指南將教導您如何安裝 GnuPG、如何建立自己的鑰匙對、如何將鑰匙加入鑰匙鍊、如何將公開金鑰放至金鑰伺服器，以及如何 (簽章/加密)/(驗證/解密) 您傳送/收到的訊息。您也會學到如何將本機電腦的檔案加密，讓別人不能隨意閱讀它們的內容。</p>
		</body>
	</section>

	<section>
		<title>安裝需要的軟體</title>
		<body>
		<p>最基本的，您必須先 <c>emerge gnupg</c>，如果您需要有個可以用 GnuPG 的郵件用戶端，您可以使用 pine (<c>emerge pinepgp</c>)、mutt (<c>emerge mutt</c>)、Mozilla/Netscape Mail、evolution (evolution 是以 GNOME 來模仿 Microsoft Outlook 的 MUA)、和 KDE 自己的 KMail (KMail 是 kdenetwork 套件的一部份)。</p>
		<p>如果您使用 KDE，那麼 Kgpg 應該會很討人喜愛。這個小程式讓您建立鑰匙對、匯入 ASCII 鑰匙、對匯入的鑰匙簽名、匯出鑰匙、以及其他一些功能 (它沒有將鑰匙匯入金鑰伺服器的功能，不過您會學到怎樣從指令模式做這個動作)。</p>
		</body>
	</section>
</chapter>

<chapter>
	<title>產生您的金鑰並且將它加入公開鑰匙鍊</title>
	<section>
		<title>建立您的金鑰</title>
		<body>
		<p>要建立您的金鑰，請執行 <c>gpg --gen-key</c>。您第一次執行的時候，它會建立幾個目錄；再執行一次即可建立鑰匙：</p>
<pre caption = "鑰匙產生的過程">
#<i>gpg --gen-key</i>
gpg (GnuPG) 1.0.7; Copyright (C) 2002 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.

Please select what kind of key you want:
   (1) DSA and ElGamal (default)
   (2) DSA (sign only)
   (4) ElGamal (sign and encrypt)
   (5) RSA (sign only)
   Your selection? <i>1</i>
</pre>
		<p>您可以在這裡選擇金鑰的種類。大部份的使用者會選預設的 DSA 和 ElGamal。然後是金鑰的長度，記得數字越大越好，但是不要用超過 2048 bit 的 DSA/ElGamal 金鑰。一般來說，1024 對加簽/加密 e-mail 已經很夠用了。</p>
		<p>在長度之後，您要選金鑰的保存期限。在這裡越小越好，但是一般使用者可以選永不過期或一至二年的期限。</p>
<pre caption = "選擇金鑰長度" >
DSA keypair will have 1024 bits.
About to generate a new ELG-E keypair.
              minimum keysize is  768 bits
              default keysize is 1024 bits
    highest suggested keysize is 2048 bits
    What keysize do you want? (1024) <i>2048</i>
Requested keysize is 2048 bits
Please specify how long the key should be valid.
         0 = key does not expire
	 &lt;n&gt;= key expires in n days
	 &lt;n&gt;w = key expires in n weeks
	 &lt;n&gt;m = key expires in n months
	 &lt;n&gt;y = key expires in n years
	 Key is valid for? (0) <i>0</i>
Key does not expire at all
</pre>
		<p>現在您可以輸入一些有關個人的資訊。如果您想將公開金鑰傳送給別人，則您可以在這裡使用真正的郵件位置。</p>
<pre caption = "輸入個人資訊">
					Is this correct (y/n)? <i>y</i>

You need a User-ID to identify your key; the software constructs the user id
from Real Name, Comment and Email Address in this form:
"Heinrich Heine (Der Dichter) &lt;heinrichh@duesseldorf.de&gt;"

Real name: <i>John Doe</i>
Email address: <i>john@nowhere.someplace.flick</i>
Comment: <i>The Real John Doe</i>
You selected this USER-ID:
"John Doe (The Real John Doe) &lt;john@nowhere.someplace.flick&gt;"

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? <i>O</i>
You need a Passphrase to protect your secret key.

Enter passphrase:
</pre>
		<p>現在輸入兩次您的鑰匙密碼。用個難被破解的密碼是個好主意。如果某個人得到了您的私密金鑰並且破解了您的密碼，他就可以用您的名義簽章，而且大家都會認為那真的是您簽的名。</p>
		<p>然後，GnuPG 會產生您的密碼。移動滑鼠或在背景撥放 mp3 可以加速處理過程，因為它們可以製造隨機的資料。</p>
		</body>
	</section>

	<section>
		<title>產生撤回的認證</title>
		<body>
		<impo>這個步驟非常重要，而且您應該馬上做。</impo>
		<p>在您建立一組鑰匙之後應該馬上建立撤回認證。這允許您在某些麻煩事 (某人取得了您的私密金鑰/密碼) 發生的時候撤回這付鑰匙。</p>
<pre caption = "產生撤回認證">
#<i>gpg --list-keys</i>
/home/humpback/.gnupg/pubring.gpg
---------------------------------
pub  1024D/75447B14 2002-12-08 John Doe (The Real John Doe) &lt;john@nowhere.someplace.flick&gt;
sub  2048g/96D6CDAD 2002-12-08

bash-2.05a$ gpg --output revoke.asc --gen-revoke <i>75447B14</i>

sec  1024D/75447B14 2002-12-08   John Doe (The Real John Doe) &lt;john@nowhere.someplace.flick&gt;

Create a revocation certificate for this key? <i>y</i>
Please select the reason for the revocation:
  0 = No reason specified
  1 = Key has been compromised
  2 = Key is superseded
  3 = Key is no longer used
  Q = Cancel
(Probably you want to select 1 here)
Your decision?<i> 1 </i>
Enter an optional description; end it with an empty line:
> <i>Someone cracked me and got my key and passphrase</i>
>
Reason for revocation: Key has been compromised
Someone cracked me and got my key and passphrase
Is this okay? <i>y</i>

You need a passphrase to unlock the secret key for
user: "John Doe (The Real John Doe) &lt;john@nowhere.someplace.flick&gt;"
1024-bit DSA key, ID 75447B14, created 2002-12-08

ASCII armored output forced.
Revocation certificate created.

Please move it to a medium which you can hide away; if Mallory gets
access to this certificate he can use it to make your key unusable.
It is smart to print this certificate and store it away, just in case
your media become unreadable.  But have some caution:  The print system of
your machine might store the data and make it available to others!
</pre>
		<p><c>gpg --list-keys</c> 指令會列出您的公開鑰匙鍊。您可以使用它來查看您可以建立撤回認證的鑰匙 ID。現在是個把所有 .gnupg 目錄以及它們的 ASCII 鎧甲 (revoke.asc) 複製到其他安全的媒體 (您放在保險櫃的磁碟片或光碟片上) 的好機會。注意 revoke.asc 可以撤銷您的金鑰並且讓它們以後不能再被使用。</p>
		<note>如果您有數個 e-mail 地址而您想要使用同一把鑰匙，您可以執行 <c>gpg --edit-key YOUR_ID</c> 然後使用 <c>adduid</c> 指令。它會問您的名稱、電子郵件以及您會使用的第二個 ID 的註解。</note>
		</body>
	</section>

	<section>
		<title>匯出金鑰</title>
		<body>
		<p>想匯出您的鑰匙，您可以輸入 <c>gpg --armor --output john.asc --export john@nowhere.someplace.flick</c>。您幾乎總是可以使用鑰匙的 ID 或某些可以指出鑰匙的資訊 (在這裡我們使用電子郵件地址)。現在他可以把 john.asc 這把公開金鑰傳送給他的朋友，或是放在某個大家都可以安全拿到的地方。</p>
		</body>
	</section>

	<section>
		<title>匯入金鑰</title>
		<body>
		<p>想在公開鑰匙鍊中加入檔案，您必須先匯入它，然後檢查金鑰的指紋。在您確認了指紋之後您應該核對它。</p>
		<note>您應該小心的核對這些金鑰。這是公開金鑰編碼的弱點之一。</note>
		<p>現在我們會加入 Luis Pinto (我一個朋友) 的公開金鑰到我們的公開鑰匙鍊。在打電話問到她的金鑰指紋以後，我將把指紋根和使用 <c>fpr</c> 指令產生的指紋比對。因為這個金鑰是可靠的，所以我將它加入公開鑰匙鍊。同時，Lius 的鑰匙會在 2003-12-01 過期，所以他問我要不要在過期的同時讓我的加簽過期。</p>
<pre caption = "Importing and signing keys">
#<i>gpg --import luis.asc</i>
gpg: key 462405BB: public key imported
gpg: Total number processed: 1
gpg:               imported: 1
humpback@sam humpback $ <i>gpg --list-keys </i>
/home/humpback/.gnupg/pubring.gpg
---------------------------------
pub  1024D/75447B14 2002-12-08 John Doe (The Real John Doe) &lt;john@nowhere.someplace.flick&gt;
sub  2048g/96D6CDAD 2002-12-08

pub  1024D/462405BB 2002-12-01 Luis Pinto &lt;lmpinto@student.dei.uc.pt&gt;
	uid                            Luis Pinto &lt;lmpinto@dei.uc.pt&gt;
sub  4096g/922175B3 2002-12-01 [expires: 2003-12-01]

humpback@sam humpback $ <i>gpg --edit-key lmpinto@dei.uc.pt</i>
gpg (GnuPG) 1.0.7; Copyright (C) 2002 Free Software Foundation, Inc.
This program comes with ABSOLUTELY NO WARRANTY.
This is free software, and you are welcome to redistribute it
under certain conditions. See the file COPYING for details.


gpg: checking the trustdb
gpg: checking at depth 0 signed=0 ot(-/q/n/m/f/u)=0/0/0/0/0/1
pub  1024D/462405BB  created: 2002-12-01 expires: 2003-12-01 trust: -/-
sub  4096g/922175B3  created: 2002-12-01 expires: 2003-12-01
(1)  Luis Pinto &lt;lmpinto@dei.uc.pt&gt;
(2). Luis Pinto &lt;lmpinto@student.dei.uc.pt&gt;

Command> <i>fpr</i>
pub  1024D/462405BB 2002-12-01 Luis Pinto &lt;lmpinto@dei.uc.pt&gt;
             Fingerprint: F056 3697 ADE3 CF98 B80B  8494 0AD3 E57B 4624 05BB

Command> <i>sign</i>
Really sign all user IDs? <i>y</i>

pub  1024D/462405BB  created: 2002-12-01 expires: 2003-12-01 trust: -/-
             Fingerprint: F056 3697 ADE3 CF98 B80B  8494 0AD3 E57B 4624 05BB

	     Luis Pinto &lt;lmpinto@dei.uc.pt&gt;
	     Luis Pinto &lt;lmpinto@student.dei.uc.pt&gt;

This key is due to expire on 2003-12-01.
Do you want your signature to expire at the same time? (Y/n) <i>Y</i>
How carefully have you verified the key you are about to sign actually belongs
to the person named above?  If you don't know what to answer, enter "0".

   (0) I will not answer. (default)
   (1) I have not checked at all.
   (2) I have done casual checking.
   (3) I have done very careful checking.

   Your selection? <i>3</i>
Are you really sure that you want to sign this key
with your key: "John Doe (The Real John Doe) &lt;john@nowhere.someplace.flick&gt;"

I have checked this key very carefully.

Really sign? <i>y</i>

You need a passphrase to unlock the secret key for
user: "John Doe (The Real John Doe) &lt;john@nowhere.someplace.flick&gt;"
1024-bit DSA key, ID 75447B14, created 2002-12-08

Command> <i>check</i>
uid  Luis Pinto &lt;lmpinto@dei.uc.pt&gt;
sig!3       462405BB 2002-12-01   [self-signature]
sig!3       75447B14 2002-12-08   John Doe (The Real John Doe) &lt;john@nowhe
uid  Luis Pinto &lt;lmpinto@student.dei.uc.pt&gt;
sig!3       462405BB 2002-12-01   [self-signature]
sig!3       75447B14 2002-12-08   John Doe (The Real John Doe) &lt;john@nowhe

</pre>
		</body>
	</section>
</chapter>

<chapter>
	<title>與金鑰伺服器交換鑰匙</title>
	<section>
		<title>傳送鑰匙至金鑰伺服器</title>
		<body>
		<p>現在您有了自己的鑰匙，將它傳送到世界性的金鑰伺服器大概是個好主意。世界上有很多金鑰伺服器並且會自動在它們之間交換金鑰。在這裡我們將把 Luis 的鑰匙送到 pgp.mit.edu 伺服器。這使用 HTTP，所以如果您需要使用 HTTP 代理伺服器別忘了先設定它 (<c>export http_proxy=http://proxy_host:port/</c>)。傳送金鑰的指令是：<c>gpg --keyserver pgp.mit.edu --keyserver-options honor-http-proxy --send-key john@nowhere.someplace.flick</c>。如果您不需要使用 HTTP 代理伺服器，則您可以拿掉 <e>--keyserver-options honor-http-proxy</e> 的部份。</p>
		<p>您也可以傳送其他您簽過名的鑰匙到金鑰伺服器。我們可以將 Luis Pinto's 的鑰匙送至金鑰伺服器。這樣的話，某個信任您金鑰的人可以使用您信任 Luis 的鑰匙的簽章。</p>
		</body>
	</section>

	<section>
		<title>從金鑰伺服器取得鑰匙</title>
		<body>
		<p>現在我們將找尋 Gustavo Felisberto 的金鑰並將它加入 John Doe 的鑰匙鍊 (只是為了確定您有注意到 Gustavo Felisberto 是寫了這篇指南的人 :) )。</p>
<pre caption = "Searching keys from keyservers">
#<i>gpg --keyserver pgp.mit.edu --keyserver-options honor-http-proxy \
	--search-keys humpback@felisberto.net</i>
gpg: searching for "humpback@felisberto.net" from HKP server pgp.mit.edu
Keys 1-5 of 5 for "humpback@felisberto.net"
(1)	Gustavo Felisberto (apt-get install anarchy) &lt;humpback@felisberto.net&gt; 1024
	  created 2002-12-06, key B9F2D52A
(2)	Gustavo Felisberto &lt;humpback@altavista.net&gt; 1024
	  created 1999-08-03, key E97E0B46
(3)	Gustavo A.S.R. Felisberto &lt;humpback@altavista.net&gt; 1024
	  created 1998-12-10, key B59AB043
(4)	Gustavo Adolfo Silva Ribeiro Felisberto &lt;humpback@altavista.net&gt; 1024
	  created 1998-08-26, key 39EB133D
(5)	Gustavo Adolfo Silva Ribeiro Felisberto &lt;humpback@altavista.net&gt; 1024
	  created 1998-06-14, key AE02AF87
	  Enter number(s), N)ext, or Q)uit &gt;<i>1</i>
gpg: requesting key B9F2D52A from HKP keyserver pgp.mit.edu
gpg: key B9F2D52A: public key imported
gpg: Total number processed: 1
gpg:               imported: 1
</pre>
		<p>如您從伺服器回應看到的，我傳送了好些個金鑰到伺服器。可是我目前只使用 B9F2D52A。現在 John Doe 可以取得這把鑰匙並且信任地將它簽章。</p>
		</body>
	</section>
</chapter>

<chapter>
	<title>和文件一起使用</title>
	<section>
		<title>加密以及簽名</title>
		<body>
		<p>讓我們假設您現在想送份檔案給 Lius。您可以將它加密、簽名、或又加密又簽名。加密表示只有 Luis 能夠開啟它。而簽章表示這份檔案真的是您建立的。</p>
		<p>接下了的三個命令會幫您做這些事，加密、簽名、和又加密又簽名。</p>
<pre caption = "檢查檔案中的金鑰並將它解碼">
#<i>gpg --output doc.gpg --encrypt --recipient lmpinto@dei.uc.pt doc_to_encrypt</i>
#<i>gpg --output doc.gpg --sign --recipient lmpinto@dei.uc.pt doc_to_sign</i>
#<i>gpg --output doc.gpg --encrypt --sign --recipient \
		lmpinto@dei.uc.pt doc_to_encrypt_and_sign</i>
</pre>
		<p>這會建立二進位的加密檔。如果您想要建立 ASCII 檔案，請在命令前面加上 <c>--clearsign</c> 選項。</p>
		</body>
	</section>

	<section>
		<title>解密以及驗證簽名</title>
		<body>
		<p>設想您取得了一篇給您的加密文件，將它解密的指令是 <c>gpg --output document --decrypt encrypted_doc.gpg</c>。這會將文件解密並且檢查簽章 (如果有的話)。</p>
		</body>
	</section>
</chapter>

<chapter>
	<title>GnuPG 介面</title>
	<section>
		<title>kgpg</title>
		<body>
		<p>kgpg 是個很好的 GNUPG 圖形畫界面。在主主視窗中，您可以直接貼上您想要簽名或加密的文字，而您可以直接貼上想要解密的 ASCII 格式加密文字。</p>
		<figure link="http://www.ibiblio.org/pub/linux/distributions/gentoo/images/kgpg1.png" short="kgpg main window"/>
		<p>在這個 kgpg 主視窗中您可以看見一個貼滿了 ASCII 格式的加密檔案。您可以在這裡將它解密 (您必須提供您的密碼)，將其他檔案加密，貼上要簽名的文字...</p>
		<figure link="http://www.ibiblio.org/pub/linux/distributions/gentoo/images/kgpg2.png" short="kgpg key manage window"/>
		<p>現在您可以看到金鑰管理視窗。從這裡我們看到了 John Doe 的好鑰匙。兩把從 Gustavo 和 Luis 來的認證的鑰匙，以及從 Daniel Robbins 得到尚未信任的鑰匙 (我還沒打電話給他確認指紋 :) )。</p>
		<figure link="http://www.ibiblio.org/pub/linux/distributions/gentoo/images/kmail_security.png" short="kmail security options OpenGPG"/>
		<figure link="http://www.ibiblio.org/pub/linux/distributions/gentoo/images/kmail_identity.png" short="kmail identity options OpenGPG key"/>
		</body>
	</section>

	<section>
		<title>Mozilla Enigmail</title>
		<body>
		<p>Mozilla 從 1.0 版以後有附上 Enigmail，一個設定簡單的郵件用戶端插件。您只要去 Preferences -&gt; Privacy &amp; Security -&gt; Enigmail，並且在那裡輸入您金鑰的 e-mail 位置就可以了。</p>
		<p>附上沒有認證的 pgp 或 gpg 簽章的郵件會以一支斷掉的筆標註，其他有優良簽章的會看起來像一支完好無缺的筆。Enigmail 還有從金鑰伺服器取得鑰匙的功能，不過如果有發生問題它會秀出一則非常詭異的訊息 (您應該還記得怎麼使用文字指令吧？)。</p>
		</body>
	</section>

	<section>
		<title>KMail</title>
		<body>
		<p>Kmail 也很好設定。我將會貼上幾張表示該怎樣設定它的圖。基本上您必須告訴 KMail 要使用 GPG 以及要用那把金鑰簽名。</p>
		</body>
	</section>
</chapter>

<chapter>
	<title>最後的想法、榮譽榜、以及版權聲明</title>
	<section>
		<title>一些問題</title>
		<body>
		<p>我有些把照片放進金鑰的問題。檢查您使用的版本，如果您使用 GnuPG 1.2.1-r1 或以上，您應該沒什麼問題。比較舊的版本也許有問題，而且大部份的伺服器不喜歡有附照片的鑰匙。</p>
		</body>
	</section>

	<section>
		<title>這篇文章還缺什麼？</title>
		<body>
		<p>Gpg 是個非常複雜的工具，它可以讓您做到許多這裡沒有提到的事情。這篇文件是否為了那些 GnuPG 新手寫的。要得到更多資訊，您應該查閱 <uri link="http://www.gnupg.org">GnuPG 網站</uri>。</p>
		<p>我沒有介紹例如 pgp4pine、gpgpine、evolution 以及也許 Windows 工具之類的東西，也許以後會再陸續添增。</p>
		</body>
	</section>

	<section>
		<title>榮譽榜</title>
		<body>
			<p>John Michael Ashley 的 <uri link="http://www.gnupg.org">GnuPG Handbook</uri> 寫的非常美妙。對新手來說是很好的參考書。</p>
			<p>所有 #gentoo-doc 團隊中的人。</p>
			<p>追蹤我隱私的 Tiago Serra。</p>
		</body>
	</section>

	<section>
		<title>版權聲明</title>
		<body>
		<p>Copyright by Gustavo Felisberto. Gentoo Technologies Inc. is allowed to publish this document as it sees fit.</p>
		<note>(譯註：此段不譯。)</note>
		</body>
	</section>
</chapter>

</guide>
