<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/tw/handbook/Attic/hb-install-finalise.xml,v 1.3 2004/03/01 08:51:10 bennyc Exp $ -->

<!-- en rev 1.19 by Benny -->

<sections>
<section>
<title>使用者管理</title>
<subsection>
<title>設定 root 密碼</title>
<body>

<p>
在你忘記之前，請先輸入下面的指令來設定你的 root 密碼：
</p>

<pre caption="設定 root 密碼">
# <i>passwd</i>
</pre>

<p>
如果你想要從序列介面 (serial console) 登入 root，請加入 <c>ttyS0</c>
至 <path>/etc/securetty</path>。
</p>

<pre caption="加入 ttyS0 至 /etc/securetty">
# <i>echo "ttyS0" &gt;&gt; /etc/securetty</i>
</pre>

</body>
</subsection>
<subsection>
<title>加入一個每天使用的使用者</title>
<body>

<p>
在 Unix/Linux 系統下登入成 root 工作是<e>危險</e>的，並應該盡量的避免。所以我們
<e>強烈</e>的建議你新增另一個使用者來應付日常的使用。
</p>

<p>
例如，建立一個叫做 <c>john</c> 的使用者，他是 <c>wheel</c> (可以用 <c>su</c>
指令登入成 root)、<c>users</c> (預設給所有的使用者)、以及 <c>audio</c> 群組 (
可以使用音效裝置) 的一員：
</p>

<pre caption="加入一個每天使用的使用者">
# <i>useradd john -m -G users,wheel,audio -s /bin/bash</i>
# <i>passwd john</i>
Password: <comment>(輸入 john 使用者的密碼)</comment>
Re-enter password: <comment>(再次輸入密碼確認)</comment>
</pre>

<p>
如果這個使用者需要在 root 下執行一些任務，他可以使用 <c>su -</c> 暫時取得
root 的權限。另一個方法則是使用 <c>sudo</c> 套件，若是正確的設置該套件，
它將是非常安全的。
</p>

</body>
</subsection>
</section>
<section>
<title>重新開機並開始享受</title>
<subsection>
<title>重新開機</title>
<body>

<p>
恭喜！你的 Gentoo 系統已經準備完成了。離開 chroot 環境並卸載所有掛載的分割區，萬
一你有 bind-mount <path>/mnt/gentoo/dev</path>，也請別忘了卸載它。然後再輸入那個
你期待以久的指令：<c>reboot</c>。
</p>

<pre caption="重新開機">
# <i>exit</i>
# <i>cd /</i>
# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
# <i>reboot</i>
</pre>

<p>
當然，別忘了拿走可開機光碟，不然將會再次從 CD 開機，而不是從你的新 Gentoo 系統。
</p>

<p>
PPC 使用者將會開機至 MacOS ，這是因為他們的 bootloader 尚未安裝。請這
些使用者閱讀 <uri link="#doc_chap2_sect2">非必要：設定 BootX</uri>。MIPS 使用者
將需要在他們的 MIPS PROM 裡做一些額外的微調動作來使 Gentoo 運作。請這些使用者閱
讀 <uri link="#doc_chap2_sect3">非必要：使 Gentoo/MIPS 運作</uri>。
</p>

<p>
GRP 使用者
可以繼續閱讀 <uri link="#doc_chap2_sect4">非必要：安裝額外的套件</uri>，其他的
使用者則可以到 <uri link="?part=1&amp;chap=12">該何去何從？</uri> 這篇
</p>

</body>
</subsection>
<subsection>
<title>非必要：設定 BootX</title>
<body>

<impo>
這個部分是給想要安裝 BootX 為 bootloader 的 PPC 使用者們。其他的使用者請略過
這一部分。
</impo>

<p>
現在，你的機器已經開機至 MacOS，打開 BootX 控制台。選擇 <c>Options</c>，並取消
選取 <c>Used specified RAM disk</c> 項目。當你回到 BootX 的主畫面後，你將會看到
一個讓你自行指定機器的主磁碟和分割區的選項。請填入適當的值。
</p>

<p>
BootX 可以設定為開機直接啟動 Linux。如果你想要這樣做，你將會先看到你的機器
先開機至 MacOS，在啟動時，BootX 將會載入並啟動 Linux。請參考 <uri
link="http://penguinppc.org/projects/bootx/">BootX 首頁</uri> 來察看更多的訊
息。
</p>

<p>
如果你是一個 GRP 使用者，你可以繼續閱讀 
<uri link="#doc_chap2_sect4">非必要：安裝 GRP 套件</uri>，不然請閱讀
<uri link="?part=1&amp;chap=12">該何去何從？</uri> 一文。
</p>

</body>
</subsection>
<subsection>
<title>非必要：使 Gentoo/MIPS 運作</title>
<body>

<p>
當你重新開機後，進入 <e>System Maintenance Menu</e> 並選取 <e>
Enter Command Monitor</e> (<c>5</c>)。如果你要測試你新的 Gentoo 安裝，你可以
直接執行 <c>boot -f &lt;kernel name&gt;</c>。為了要讓你的系統永遠的開機至
Gentoo，你將需要設定一些參數至 MIPS PROM：
</p>

<pre caption="設定 PROM 開機至 Gentoo">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;root device&gt; = Gentoo 的主分割區，如：/dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;root device&gt;</i>

<comment>(若要列出所有可供選擇的核心，輸入“ls”)</comment>
&gt;&gt; <i>setenv OSLoader &lt;kernel name&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;kernel name&gt;</i>

<comment>(宣告你要使用的核心參數)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;kernel parameters&gt;</i>

<comment>(提供 Volume Header 的位置)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(自動開機至 Gentoo)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(設定時區)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(使用序列介面 - 圖形介面使用者應該用 “g” 而不是 “d1”)</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
現在，你已經可以開始享受 Gentoo 了！
</p>

</body>
</subsection>
<subsection>
<title>非必要：安裝 GRP 套件</title>
<body>

<impo>
這個部分是給 GRP 使用者。其他的使用者應該略過這個部分並繼續閱讀
<uri link="?part=1&amp;chap=12">該何去何從？</uri>.
</impo>

<p>
現在你的系統已經開機，登入一個你建立的使用者 (例如：<c>john</c>) 並使用
<c>su -</c> 來取得 root 權限：
</p>

<pre caption="取得 root 權限">
$ <i>su -</i>
Password: <comment>(輸入你的 root 密碼)</comment>
</pre>

<p>
現在，我們需要從 CD 2 拷貝已經預先編譯好的檔案 (若是你有這片 CD)。首先，
請先掛載這片 CD：
</p>

<pre caption="掛載 CD 2">
# <i>mkdir /mnt/cdrom</i>
<comment>(將 CD 2 放到光碟機托盤)</comment>
# <i>mount /mnt/cdrom</i>
</pre>

<p>
拷貝 CD 裡所有預先編譯好的檔案到 <path>/usr/portage/packages</path>。
請確定你是使用相同的拷貝指令！
</p>

<pre caption="拷貝所有預先編譯好的檔案">
# <i>cp /mnt/cdrom/packages/All/* /usr/portage/packages/All/</i>
</pre>

<p>
接下來，安裝你要的套件。CD 2 包含了許多頸先編譯好的檔案，如 KDE：
</p>

<pre caption="安裝 KDE">
# <i>USE="bindist" emerge --usepkg kde</i>
</pre>

<p>
你將需要在安裝 XFree 時，在前面加上 <c>USE="bindist"</c> （直接的或是依賴的）。
它將會阻止下載微軟的核心自行（因為我們無法在我們的 LiveCD 上散佈）。
</p>

<p>
請務必現在安裝編譯好的檔案。當你使用 <c>emerge sync</c> 來更新 Portage
(晚點將會學到) 時，那些編譯好的檔案可能不會相容於在你已更新過的 Portage
ebuilds。你可以試著用 <c>emerge --usepkgonly</c> 代替 <c>emerge --usepkg</c>
來迴避這個問題。
</p>

<p>
恭喜，你的系統現在已經裝備完成！請繼續閱讀 <uri
link="?part=1&amp;chap=12">該何去何從？</uri> 一文學習更多關於 Gentoo 的東西。
</p>

</body>
</subsection>
</section>
</sections>
