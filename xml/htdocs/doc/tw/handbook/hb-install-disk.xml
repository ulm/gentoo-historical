<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/tw/handbook/Attic/hb-install-disk.xml,v 1.1 2004/02/19 10:13:13 bennyc Exp $ -->

<!-- rev 1.35 by Benny -->

<sections>
<section>
<title>介紹區塊裝置</title>
<subsection>
<title>區塊裝置（Block Devices）</title>
<body>

<p>
我們將仔細的介紹 Gentoo Linux 和 整體的Linux 的磁碟方式，包括 Linux 檔案系統，
分割區，和區塊裝置。然後，當你了解磁碟和檔案系統，你將會學到如何為你的 Gentoo 
Linux 安裝設定分割區和檔案系統。
</p>

<p>
首先，我們將要介紹 <e>區塊裝置</e>。最有名的區塊裝置大概就是代表 Linux 系統上的
第一個 IDE 磁碟，<path>/dev/hda</path> 如果你的系統使用 SCSI 磁碟，那你的第一個
磁碟將會是 <path>/dev/sda</path>。
</p>

<p>
以上的區塊裝置代表著磁碟的介面。使用者可以不用擔心你的磁碟是否為 IDE，SCSI
或是其他，並且使用程式來使用這些區塊裝置。這個程式可以在磁碟上寫入多個隨機的 
512 byte 區塊。
</p>

</body>
</subsection>
<subsection>
<title>分割區和 Slices</title>
<body>

<p>
理論上雖然你可以使用整個磁碟放置你的 Linux 系統，但是實務上幾乎沒有人這麼做。
整個磁碟將會被分為其他小一點的大小，並可以更好的管理。大部份的系統將叫他 
<e>分割區（partitions）</e>。其他架構使用類似的技術，叫做 <e>slices</e>。
</p>

</body>
</subsection>
<subsection>
<title>分割區</title>
<body>

<p>
分割區總共有三類：<e>primary</e>，<e>extended</e> 和 <e>logical</e>。
</p>

<p>
一個 <e>primary</e> 分割區是一個包含 MBR（Master Boot Record）的分割區。一個 
MBR 非常小（512 byte）只能定義成四個分割區（從 <path>/dev/hda1</path> 到
<path>/dev/hda4</path>）。
</p>

<p>
一個 <e>extended</e> 分割區是一個特別的 primary 分割區（意思是說 extended 分割區
一定要從四個可用的 primary 分割區內擴展）而可以建立更多的分割區。這種分割區原本
是不存在的，但是四個分割區太少了，它會誕生是因為要擴展而不會遺失反向相容。
</p>

<p>
一個 <e>logical</e> 分割區是在 extended 分割區內。他們的定義不是放在 MBR，
但是是放在 extended 分割區。
</p>

</body>
</subsection>
<!-- TODO rewrite with LVM2 instructions when appropriate
<subsection>
<title>Logical Volumes</title>
<body>

<p>
Some people might find partitions and slices too restrictive. If you feel the
same way, you should take a look at LVM - - the <e>Logical Volume Manager</e>.
</p>

<p>
With LVM, you create partitions (or slices) the normal way, but you won't use
them to house your Linux system. Instead, you add another layer of storage
(namely the LVM layer) on which you install Gentoo. But what are the benefits of
LVM?
</p>

<p>
With LVM you can easily resize the volumes on which you have installed Gentoo.
You can also take a snapshot of a volume without freezing the system, making
your backup strategy more transparent for the users (and less troublesome).
Another advantage is that you can add several disks to a single volume (meaning
if one of your volumes is low on free space, you can extend it without having to
copy over files). 
</p>

<p>
An LVM is structured in three abstract items. You have a <e>physical volume</e>,
which is a partition, slice or disk you want to use to store the LVM layer on.
Then you have a <e>volume group</e> to which you assign certain physical
volumes. This volume group contains several <e>logical volumes</e> which are 
some sort of virtual partitions.
</p>

<p>
These logical volumes are used as regular partitions; however, if a logical
volume requires more space, it can use the available space in the volume group
to extend itself. If the volume group doesn't have sufficient available space,
you can add more physical volumes to it, fully transparent to the user (i.e. no
need to copy over data, freeze the system etc.). This makes LVM very flexible.
</p>

<p>
If you want to use LVM, you are advised to keep your root filesystem
(<path>/</path>) and your boot filesystem (<path>/boot</path>) outside the LVM.
If you want to place most of your files in a logical volume (<path>/home</path>,
<path>/usr</path>, <path>/tmp</path>, <path>/opt</path> and <path>/var</path> 
are used in this handbook) your root filesystem doesn't need to be very big 
(a mere 150 Mb will do just fine).
</p>

</body>
</subsection>
-->
</section>
<section>
<title>策劃一個分割區計畫</title>
<subsection>
<title>預設的分割區策劃</title>
<body>

<p>
如果你不打算策劃一個分割計畫，你可以使用我們手冊內的分割區策劃（非 LVM）：
</p>

<p>
給 x86 和 amd64：
</p>

<table>
<tr>
  <th>分割區</th>
  <th>檔案系統</th>
  <th>大小</th>
  <th>說明</th>
</tr>
<tr>
  <ti><path>/dev/hda1</path></ti>
  <ti>ext2</ti>
  <ti>32M</ti>
  <ti>開機分割區（Boot partition）</ti>
</tr>
<tr>
  <ti><path>/dev/hda2</path></ti>
  <ti>(swap)</ti>
  <ti>512M</ti>
  <ti>Swap 分割區</ti>
</tr>
<tr>
  <ti><path>/dev/hda3</path></ti>
  <ti>ext3</ti>
  <ti>磁碟剩下的空間</ti>
  <ti>根 或是 主分割區（Root partition）</ti>
</tr>
</table>

<p>
給 ppc：
</p>

<table>
<tr>
  <th>NewWorld 分割區</th>
  <th>OldWorld 分割區</th>
  <th>檔案系統</th>
  <th>大小</th>
  <th>說明</th>
</tr>
<tr>
  <ti><path>/dev/hda1</path></ti>
  <ti>不需要</ti>
  <ti>(bootstrap)</ti>
  <ti>800k</ti>
  <ti>Apple_Bootstrap</ti>
</tr>
<tr>
  <ti><path>/dev/hda2</path></ti>
  <ti><path>/dev/hda1</path></ti>
  <ti>(swap)</ti>
  <ti>512M</ti>
  <ti>Swap 分割區</ti>
</tr>
<tr>
  <ti><path>/dev/hda3</path></ti>
  <ti><path>/dev/hda2</path></ti>
  <ti>ext3</ti>
  <ti>磁碟剩下的空間</ti>
  <ti>根 或是 主分割區（Root partition）</ti>
</tr>
</table>

<p>
給 Sparc：
</p>

<table>
<tr>
  <th>Sun 磁碟標示（Disklabel）</th>
  <th>檔案系統</th>
  <th>大小</th>
  <th>說明</th>
</tr>
<tr>
  <ti><path>/dev/hda1</path></ti>
  <ti>ext2</ti>
  <ti>32M</ti>
  <ti>開機分割區（Boot partition）</ti>
</tr>
<tr>
  <ti><path>/dev/hda2</path></ti>
  <ti>(swap)</ti>
  <ti>512M</ti>
  <ti>Swap 分割區</ti>
</tr>
<tr>
  <ti><path>/dev/hda3</path></ti>
  <ti>(none)</ti>
  <ti>整個磁碟</ti>
  <ti>Sun Disk Label （需要）</ti>
</tr>
<tr>
  <ti><path>/dev/hda4</path></ti>
  <ti>ext3</ti>
  <ti>剩下的磁碟空間</ti>
  <ti>根 或 主分割區（Root partition）</ti>
</tr>
</table>

<!-- TODO rewrite with LVM2 instructions when appropriate 
<p>
If you want to use LVM, you should create a small root partition instead of a
big one, ignore the swap partition and create a big partition as you will make 
the individual separation later when you define the logical volumes). Then mark 
this big partition of type "Linux LVM" or "LVM" (8e).
</p>
-->

<p>
如果你從其他已經存在的的版本安裝，你將需要先重新設定已存在的分割區大小（如果你
沒有任何多餘的空間）來安張 Gentoo。你可以使用 <uri 
link="http://www.gnu.org/software/parted">GNU/Parted</uri> 來重新調整分割區大小。
</p>

<p>
如果你有興趣多了解一個分割區（或是 logical 容量）應該多大，或是你需要幾個分割區
（或是容量），請繼續讀下去。不然請按照以下選項選擇你需要的分割指南：
</p>

<ul>
<li>
  <uri link="#doc_chap3">在 x86 或是 amd64 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap4">在 Alpha 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap5">在 SPARC 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap6">在 PPC 上使用 mac-fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap7">在 HPPA 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap8">在 MIPS 上使用 fdisk 分割你的磁碟</uri>
</li>
</ul>

</body>
</subsection>
<subsection>
<title>多少和多大？</title>
<body>

<p>
多少分割區通常是按照你的使用環境。舉例來說，如果你有很多個使用者，你就會因為安全
問題和能夠簡易備份將你的 <path>/home</path> 分開。如果你將 Gentoo 安裝為郵件伺服
器那你的 <path>/var</path>應該分開，因為郵件通常釋放在 <path>/var</path>。選擇好
的檔案系統將會提昇你的效能。遊戲伺服器因為大多數的遊戲伺服器都是安裝在 
<path>/opt</path> 所以通常會將 <path>/opt</path> 分開。原因很和 
<path>/home</path> 類似：安全問題和備份。
</p>

<p>
如你所見，不同的方式是彼此相依的。不同的分割區或是容量將會有以下優點：
</p>

<ul>
<li>
  你可以選擇適合個別分割區的檔案系統提高效能
</li>
<li>
  你的系統部會因為一個分割區或是容量失效而完全終止
</li>
<li>
  如果必要，檔案系統檢查所費的時間將會減少，並且可以以平行方式進行（雖然這個優點
  比較適合多分割區）
</li>
<li>
  安全性可以因為某些分割區以分割成唯讀而加強，nosuid（setuid機會被略過），
  noexec（執行檔將會被掠過）等等。
</li>
</ul>

<p>
但是，多個分割區也有一個很大的缺點：如果沒有完好的設定，你將會看到一個分割區上的
空間不夠或是一個分割區上的空間太多。
</p>

<p>
以範例來分割，我們將使用一個 20Gb 的硬碟，為手提電腦的示範（包含著網頁伺服器，
郵件伺服器，gnome，﹍）：
</p>

<pre caption="檔案系統使用範例">
Filesystem    Type    Size  Used Avail Use% Mounted on
/dev/hda5     ext3    509M  132M  351M  28% /
/dev/hda2     ext3    5.0G  3.0G  1.8G  63% /home
/dev/hda7     ext3    7.9G  6.2G  1.3G  83% /usr
/dev/hda8     ext3   1011M  483M  477M  51% /opt
/dev/hda9     ext3    2.0G  607M  1.3G  32% /var
/dev/hda1     ext2     51M   17M   31M  36% /boot
/dev/hda6     swap    516M   12M  504M   2% &lt;not mounted&gt;
<comment>（預留 2Gb 空間）</comment>
</pre>

<p>
這邊的 <path>/usr</path> 的分割區是比較到的（佔用83%），但是當所有的軟體已經安裝
完畢後，<path>/usr</path>就不會再急速的增加。關於<path>/var</path>，大部份的使用
者會任何太多。但是，Gentoo 將會在 <path>/var/tmp/portage</path> 內進行所有檔案的
編譯，所以你的<path>/var</path>最好是有 1Gb 以上的剩餘空間，如果你打算要同時編譯
大的程式，如 KDE 和 OpenOffice.org，那這就沒關係。
</p>

<p>
現在請按照你的架構輸入指令來分割你的磁碟的分割區：
</p>

<ul>
<li>
  <uri link="#doc_chap3">在 x86 或是 amd64 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap4">在 Alpha 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap5">在 SPARC 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap6">在 PPC 上使用 mac-fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap7">在 HPPA 上使用 fdisk 分割你的磁碟</uri>
</li>
<li>
  <uri link="#doc_chap8">在 MIPS 上使用 fdisk 分割你的磁碟</uri>
</li>
</ul>

</body>
</subsection>
</section>
<section>
<title>在 x86 或是 amd64 上使用 fdisk 分割你的磁碟</title>
<subsection>
<body>

<impo>
這個部份只適合 <e>x86</e> 或是 <e>amd64</e> 系統。
</impo>

<p>
以下部份將解釋如何使用之前所策劃的進行分割：
</p>

<table>
<tr>
  <th>分割區</th>
  <th>說明</th>
</tr>
<tr>
  <ti><path>/dev/hda1</path></ti>
  <ti>開機分割區</ti>
</tr>
<tr>
  <ti><path>/dev/hda2</path></ti>
  <ti>Swap 分割區</ti>
</tr>
<tr>
  <ti><path>/dev/hda3</path></ti>
  <ti>主分割區（Root）</ti>
</tr>
</table>

<p>
請按照個人所需更改你的分割架構。
</p>

</body>
</subsection>
<subsection>
<title>查看目前的規劃的分割區</title>
<body>

<p>
<c>fdisk</c> 是一個強大並且受歡迎的磁碟分割工具。使用你的磁碟上的 <c>fdisk</c>
（按照我們的範例，我們將使用<path>/dev/hda</path>）：
</p>

<pre caption="開始 fdisk">
# <i>fdisk /dev/hda</i>
</pre>

<p>
當 <c>fdisk</c> 開始後，你將會看到以下的畫面：
</p>

<pre caption="fdisk 介面">
Command (m for help): 
</pre>

<p>
按下 <c>p</c> 顯示你得磁碟目前的分割區設定：
</p>

<pre caption="範例分割區設定">
Command (m for help): <i>p</i>

Disk /dev/hda: 240 heads, 63 sectors, 2184 cylinders
Units = cylinders of 15120 * 512 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux
/dev/hda2            15        49    264600   82  Linux swap
/dev/hda3            50        70    158760   83  Linux
/dev/hda4            71      2184  15981840    5  Extended
/dev/hda5            71       209   1050808+  83  Linux
/dev/hda6           210       348   1050808+  83  Linux
/dev/hda7           349       626   2101648+  83  Linux
/dev/hda8           627       904   2101648+  83  Linux
/dev/hda9           905      2184   9676768+  83  Linux

Command (m for help): 
</pre>

<p>
這個磁碟包含著七個 Linux 檔案系統（顯示為 "Linux"）和一個 swap 分割區（顯示為
"Linux Swap"）。
</p>

</body>
</subsection>
<subsection>
<title>移除所有分割區</title>
<body>

<p>
我們將要先把已經存在的分割區一除掉。按下 <c>d</c> 刪除。舉例來說要刪除已經存在的
<path>/dev/hda1</path>：
</p>

<pre caption="刪除一個分割區">
Command (m for help): <i>d</i>
Partition number (1-4): <i>1</i>
</pre>

<p>
這個分割區將會被顯示為刪除。當你輸入 <c>p</c> 的時候你將會看不到所刪除的分割區，
但是只會在你儲存後發揮功效。如果誤殺了某個分割區然後想要重來，按下<c>q</c>
然後 enter 你的分割區將不會被刪除。
</p>

<p>
現在，假設你想要刪除所有系統上的分割區，請先按 <c>d</c> 然後要刪除的分割區編號
再按下 <c>p</c> 刷新分割區列表。最後你將會將所有的分割區刪除：
</p>

<pre caption="空的分割區列表">
Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System

Command (m for help):
</pre>

<p>
現在你的分割區列表已經空了，我們可以開始建立分割區了。我們將會使用之前所討論到的
預設的分割計畫。當然，如果你有自己的分割計畫，請按照我們的方式以此類推！
</p>

</body>
</subsection>
<subsection>
<title>建立開機分割區</title>
<body>

<p>
我們將要先建立一個小的開機分割區。按下 <c>n</c> 建立一個分割區然後按下 <c>p</c>
選擇 primary partition，再按下 <c>1</c> 選擇第一個 primary 分割區。當你看到
first cylinder 時，按下 enter，然後看到 last cylinder 輸入 <c>+32M</c> 來建立一
個 32 Mbyte 大小的分割區：
</p>

<pre caption="建立開機分割區">
Command (m for help): <i>n</i>
Command action
  e   extended
  p   primary partition (1-4)
<i>p</i>
Partition number (1-4): <i>1</i>
First cylinder (1-3876, default 1): <comment>（按下 Enter）</comment>
Using default value 1
Last cylinder or +size or +sizeM or +sizeK (1-3876, default 3876): <i>+32M</i>
</pre>

<p>
現在，當你按下 <c>p</c> 時，你將會看到以下的顯示：
</p>

<pre caption="已建立的開機分割區">
Command (m for help): <i>p</i>

Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1          1        14    105808+  83  Linux
</pre>

<p>
我們將需要將這個分割區設定為可開機。按下 <c>a</c> 的開關讓可開機旗標放在這個分割
區上。如果你再按一次 <c>p</c>，你將會看到 "Boot" 欄位有一個 <path>*</path>。
</p>

</body>
</subsection>
<subsection>
<title>建立 Swap 分割區</title>
<body>

<p>
現在我們需要建立 swap 分割區。按下 <c>n</c> 建立一個新的分割區，然後 <c>p</c>
告訴 fdisk 你要一個 primary 分割區。然後按下 <c>2</c> 建立第二個 primary 分割區
。當你看到 first cylinder，按下 enter。然後當你看到 last cylinder，輸入
<c>+512M</c> 來建立一個 512MB 大小的分割區。當你完成的時候，按下 <c>t</c> 來選
擇分割區類別。接著輸入 <c>82</c> 將分割區類別選為 "Linux Swap"。當你完成的時候
，按下<c>p</c> 應該會看到類似以下的畫面：
</p>

<pre caption="建立 swap 分割區後的列表">
Command (m for help): <i>p</i>

Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1 *        1        14    105808+  83  Linux
/dev/hda2         15        81    506520   82  Linux swap
</pre>

</body>
</subsection>
<subsection>
<title>建立主分割區（Root）</title>
<body>

<p>
最後，我們需要建立主分割區。按下 <c>n</c> 建立一個新的分割區，然後 <c>p</c> 告訴
fdisk 你要一個 primary 分割區。然後輸入 <c>3</c> 建立第三個 primary 分割區，
在我們的例子為 <path>/dev/hda3</path>。當你看到 first cylinder，按下 enter。當你
看到 last cylinder，按下 enter 來使用剩餘的空間。完成這些步驟後，按下 <c>p</c>
你應該會看到類似以下的列表：
</p>

<pre caption="建立主分割區後的列表">
Command (m for help): <i>p</i>

Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1 *        1        14    105808+  83  Linux
/dev/hda2         15        81    506520   82  Linux swap
/dev/hda3         82      3876  28690200   83  Linux
</pre>


</body>
</subsection>
<subsection>
<title>儲存分割區規劃</title>
<body>

<p>
要儲存然後離開 <c>fdisk</c>，按下 <c>w</c>。
</p>

<pre caption="儲存然後離開 fdisk">
Command (m for help): <i>w</i>
</pre>

<p>
現在你的分割區已經建立完成了，你可以從 <uri link="#filesystems">
建立檔案系統</uri> 繼續。
<!-- TODO reactivate when LVM2 instructions are boarded 
, unless you have chosen to use LVM
in which case you should first read <uri link="#lvm">Optional: Using
LVM</uri>.
-->
</p>

</body>
</subsection>
</section>
<section>
<title>在 Alpha 上使用 fdisk 分割你的磁碟</title>
<subsection>
<body>

<impo>
這個部份只適用於 <e>Alpha</e> 的使用者。
</impo>

<p>
以下的部份將使用範例講解如何進行分割：
</p>

<table>
<tr>
  <th>分割（Slice）</th>
  <th>說明</th>
</tr>
<tr>
  <ti><path>/dev/sdaa</path></ti>
  <ti>Swap 分割</ti>
</tr>
<tr>
  <ti><path>/dev/sdab</path></ti>
  <ti>主分割 （Root slice）</ti>
</tr>
<tr>
  <ti><path>/dev/sdac</path></ti>
  <ti>整個磁碟（必需）</ti>
</tr>
</table>

<p>
請按照個人所需更改分割規劃。
</p>


</body>
</subsection>
<subsection>
<title>辨別可用磁碟</title>
<body>

<p>
要辨別你所有的磁碟，請按照以下指令進行：
</p>

<pre caption="辨別可用的磁碟">
<comment>（適用於 IDE 磁碟）</comment>      # <i>dmesg | grep 'drive$'</i>
<comment>（適用於 SCSI 磁碟）</comment>     # <i>dmesg | grep 'scsi'</i>
</pre>

<p>
從以上的列表你將會看到所偵測到的磁碟和他們代表的 <path>/dev</path> 路徑。以下
我們將假設我們的磁碟為 SCSI 在 <path>/dev/sda</path>。
</p>

<p>
現在執行 <c>fdisk</c>：
</p>

<pre caption="開始 fdisk">
# <i>fdisk /dev/sda</i>
</pre>

</body>
</subsection>
<subsection>
<title>刪除所有分割</title>
<body>

<p>
<e>除了</e> 'c' 分割外，我們將刪除所有的分割。以下將顯示如何刪除所有的分割（在
我們的例子我們使用'a'）。請重複執行直到所有的分割都被刪除（除了'c'分割）。
</p>

<p>
使用 <c>p</c> 查看所有已經存在的分割。<c>d</c> 是用來刪除一個分割。
</p>

<pre caption="刪除一個分割">
BSD disklabel command (m for help): <i>p</i>

8 partitions:
#       start       end      size     fstype   [fsize bsize   cpg]                                    
  a:        1       235*      234*    4.2BSD     1024  8192    16
  b:      235*      469*      234*      swap
  c:        1      5290*     5289*    unused        0     0
  d:      469*     2076*     1607*    unused        0     0
  e:     2076*     3683*     1607*    unused        0     0
  f:     3683*     5290*     1607*    unused        0     0
  g:      469*     1749*     1280     4.2BSD     1024  8192    16
  h:     1749*     5290*     3541*    unused        0     0

BSD disklabel command (m for help): <i>d</i>
Partition (a-h): <i>a</i>
</pre>

<p>
完成所有刪除的步驟後，你的列表將會和以下類似：
</p>

<pre caption="一個空的分割表">
BSD disklabel command (m for help): <i>p</i>

3 partitions:
#       start       end      size     fstype   [fsize bsize   cpg]                                    
  c:        1      5290*     5289*    unused        0     0
</pre>

</body>
</subsection>
<subsection>
<title>建立 Swap 分割</title>
<body>

<p>
在 Alpha 系統上，你不需要將開機分割區分開。但是，first cylinder 將無法被使用，
原因事 <c>aboot</c> 映像檔將會被放在那邊。
</p>

<p>
我們將會從第三個 cylinder 開始建立 swap 分割，大小為 1Gbyte。輸入 <c>n</c>
建立一個新的分割。之後將他的類別更改為 <c>1</c>，代表著 <e>swap</e>。
</p>

<pre caption="建立 swap 分割">
BSD disklabel command (m for help): <i>n</i>
Partition (a-p): <i>a</i>
First cylinder (1-5290, default 1): <i>3</i>
Last cylinder or +size or +sizeM or +sizeK (3-5290, default 5290): <i>+1024M</i>

BSD disklabel command (m for help): <i>t</i>
Partition (a-c): <i>a</i>
Hex code (type L to list codes): <i>1</i>
</pre>

<p>
當你完成以上步驟時你將會看到類似以下的畫面：
</p>

<pre caption="建立 swap 分割後的列表">
BSD disklabel command (m for help): <i>p</i>

3 partitions:
#       start       end      size     fstype   [fsize bsize   cpg]                                    
  a:        3      1003      1001       swap
  c:        1      5290*     5289*    unused        0     0
</pre>

</body>
</subsection>
<subsection>
<title>建立主分割（Root Slice）</title>
<body>

<p>
我們將要建立主分割，從 swap <e>後</e>的第一個 cylinder。輸入 <c>p</c> 指令查看
swap 分割的結束點。在我們的例子李，這將會在 1003，而主分割區將從 1004 開始。
</p>

<p>
另一個是，目前 <c>fdisk</c> 有個臭蟲將會在所有可用的 cylinder 數值加一。換句話說
，當你要輸入 last cylinder 時，將 cylinder 的號碼減一（在我們的範例：5290）。
</p>

<p>
當分割區建立完成時，我們將類別改成 <c>8</c>，為 <e>ext2</e>。
</p>

<pre caption="建立主分割">
D disklabel command (m for help): <i>n</i>
Partition (a-p): <i>b</i>
First cylinder (1-5290, default 1): <i>1004</i>
Last cylinder or +size or +sizeM or +sizeK (1004-5290, default 5290): <i>5289</i>

BSD disklabel command (m for help): <i>t</i>
Partition (a-c): <i>b</i>
Hex code (type L to list codes): <i>8</i>
</pre>

<p>
你的分割列表將會合以下類似：
</p>

<pre caption="觀看分割規劃">
BSD disklabel command (m for help): <i>p</i>

3 partitions:
#       start       end      size     fstype   [fsize bsize   cpg]                                    
  a:        3      1003      1001       swap
  b:     1004      5289      4286       ext2
  c:        1      5290*     5289*    unused        0     0
</pre>

</body>
</subsection>
<subsection>
<title>儲存分割規劃然後離開</title>
<body>

<p>
使用 <c>w</c> 儲存 <c>fdisk</c>。這將會儲存你的分割規劃。
</p>

<pre caption="儲存然後離開 fdisk">
Command (m for help): <i>w</i>
</pre>

<p>
現在你的分割已建立完成，你可以從 <uri link="#filesystems">建立檔案系統</uri>
繼續。
<!-- TODO reactivate when LVM2 instructions are boarded
, unless you have chosen to use LVM
in which case you should first read <uri link="#lvm">Optional: Using
LVM</uri>.
-->
</p>

</body>
</subsection>
</section>
<section>
<title>使用 fdisk 在 SPARC 上分割磁碟</title>
<subsection>
<body>

<impo>
這個部份只適合 <e>SPARC</e> 的使用者。
</impo>

<p>
以下將使用範例分割規劃解釋如何建立分割區：
</p>

<table>
<tr>
  <th>分割區</th>
  <th>說明</th>
</tr>
<tr>
  <ti><path>/dev/hda1</path></ti>
  <ti>開機分割區</ti>
</tr>
<tr>
  <ti><path>/dev/hda2</path></ti>
  <ti>Swap 分割區</ti>
</tr>
<tr>
  <ti><path>/dev/hda3</path></ti>
  <ti>Sun Disk Label （必需）</ti>
</tr>
<tr>
  <ti><path>/dev/hda4</path></ti>
  <ti>主分割區（Root）</ti>
</tr>
</table>

<p>
你按照你的分割規劃以此類推。
</p>


</body>
</subsection>
<subsection>
<title>開始 fdisk</title>
<body>

<p>
請按照以下參數開始使用 <c>fdisk</c>：
</p>

<pre caption="開始 fdisk">
# <i>fdisk /dev/hda</i>
</pre>

<p>
你將會看到以下畫面：
</p>

<pre caption="fdisk 畫面">
Command (m for help):
</pre>

<p>
要查看可用的分割區，輸入 <c>p</c>：
</p>

<pre caption="可用分割區列表">
Command (m for help): <i>p</i>

Disk /dev/hda (Sun disk label): 240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 bytes

Device Flag    Start       End    Blocks   Id  System
/dev/hda1   *         1        14    105808+  83  Linux
/dev/hda2            15        81    506520   82  Linux swap
/dev/hda3             0      3876  29302528    5  Whole Disk
/dev/hda4            82      3876  28690200   83  Linux
</pre>

<p>
請注意 <c>Sun disk label</c> 的輸出。如果沒有，你的磁碟正在使用 DOS 的分割區，而
不是 Sun 分割區。在這個情況下，按下 <c>s</c> 確保磁碟有一個 sun 分割區列表。
</p>

</body>
</subsection>
<subsection>
<title>刪除已存在的分割區</title>
<body>

<p>
現在我們將要刪除已存在的分割區。按下 <c>d</c> 然後 enter。你將會看到分割要刪除
分割區號碼的畫面。如要刪除已存在的 <path>/dev/hda1</path>，你將要輸入：
</p>

<pre caption="刪除一個分割區">
Command (m for help): <i>d</i>
Partition number (1-4): <i>1</i>
</pre>

<p>
假設你已經刪除了所有已存在的分割區，按下 <c>p</c> 查看可用的分割區，然後 <c>d</c>
一個一個的刪除。如果你操作出現了錯誤，馬上按下 <c>q</c> -- <c>fdisk</c> 將不會
儲存，只有在你按下 <c>w</c> 的時候，所有的更改將會被儲存。
</p>

<p>
刪除所有的分割區後，你將會看到類似以下的分割區規劃列表：
</p>

<pre caption="空的分割區規劃">
Command (m for help): <i>p</i>

Disk /dev/hda (Sun disk label): 240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 bytes

Device Flag    Start       End    Blocks   Id  System
</pre>


</body>
</subsection>
<subsection>
<title>建立 Sun Disk Label</title>
<body>

<p>
現在分割表內已經空了，我們可以開始建立 Sun Disk Label 分割區。輸入 <c>n</c> 來
建立新的分割區，然後輸入 <c>3</c> 建立分割區。當你看到 first cylinder，按下
enter。當你看到 last cylinder，按下 enter。當你完成後，按下 <c>t</c> 設定分割
類別，然後輸入 <c>5</c> 將分割區設為"整個磁碟"。
</p>

<pre caption="建立 Sun Disk Label 步驟">
Command (m for help): <i>n</i>
Partition number (1-4): <i>3</i>
First cylinder (1-3876, default 0): <i>0</i>
Last cylinder or +size or +sizeM or +sizeK (1-3876, default 3876): <comment>（按下 Enter）</comment>
Using default value 3876

Command (m for help): <i>t</i>
Partition number (1-8): <i>3</i>
Hex code (type L to list codes): <i>5</i>
</pre>

<p>
當你完成這些步驟時，輸入 <c>p</c> 你就應該可以看到類似以下的分割區列表：
</p>

<pre caption="觀看分割區規劃">
Command (m for help): <i>p</i>

Disk /dev/hda (Sun disk lable): 240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 bytes

Device Flag    Start       End    Blocks   Id  System
/dev/hda3             0      3876  29302528    5  Whole disk
</pre>

</body>
</subsection>
<subsection>
<title>建立開機分割區</title>
<body>

<p>
我們現在可以開始建立開機分割區了。輸入 <c>n</c> 建立一個新的分割區，然後輸入
<c>1</c> 建立分割區。當你看到 first cylinder 的畫面，按下 enter。當你看到 last
cylinder，輸入 <c>+32M</c> 建立一個 <c>32MB</c> 大小的分割區。請確定整個開機
分割區一定要佔用到第一個分割區的 2GB 空間。請參靠下面輸出：
</p>

<pre caption="建立開機分割區">
Command (m for help): <i>n</i>
Partition number (1-4): <i>1</i>
First cylinder (1-3876, default 1): <comment>（按下 Enter）</comment>
Using default value 1
Last cylinder or +size or +sizeM or +sizeK (1-3876, default 3876): <i>+32M</i>
</pre>

<p>
現在，當你按下 <c>p</c> 時，你應該會看到類似以下的分割區輸出：
</p>

<pre caption="列出分割區規劃">
Command (m for help): <i>p</i>

Disk /dev/hda (Sun disk label): 240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 bytes

Device Flag    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux
/dev/hda3             0      3876  29302528    5  Whole disk
</pre>
</body>
</subsection>
<subsection>
<title>建立 swap 分割區</title>
<body>

<p>
接著，來建立 swap 分割區。輸入 <c>n</c> 來建立新的分割區，然後 <c>2</c> 建立
第二個分割區，在我們的例子為 <path>/dev/hda2</path>。當你看到 first cylinder，
按下 enter。當你看到 last cylinder 輸入 <c>+512M</c> 來建立一個 512MB 大小的
分割區。當你完成的時候按下 <c>t</c> 來設定分割區類別，然後輸入 <c>82</c> 將
分割區設定為 "Linux Swap"。完成這些步驟時輸入 <c>p</c> 就會看到類似以下的輸出：
</p>

<pre caption="顯示所有可用分割區">
Command (m for help): <i>p</i>

Disk /dev/hda (Sun disk label): 240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 bytes

Device Flag    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux
/dev/hda2            15        81    506520   82  Linux swap
/dev/hda3             0      3876  29302528    5  Whole disk
</pre>

</body>
</subsection>
<subsection>
<title>建立主分割區（Root）</title>
<body>

<p>
最後，建立主分割區。輸入 <c>n</c> 建立一個新的分割區，然後輸入 <c>4</c> 來建立
第三個分割區，在我們的例子為 <path>/dev/hda4</path>。當你看到 first cylinder，
按下 enter。當你看到 last cylinder，按下 Enter 來使用剩餘的空間。完成後輸入
<c>p</c> 應該會顯示出類似以下的分割區列表：
</p>

<pre caption="顯示完整的分割區列表">
Command (m for help): <i>p</i>

Disk /dev/hda (Sun disk label): 240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 bytes

Device Flag    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux
/dev/hda2            15        81    506520   82  Linux swap
/dev/hda3             0      3876  29302528    5  Whole disk
/dev/hda4            82      3876  28690200   83  Linux
</pre>

</body>
</subsection>
<subsection>
<title>儲存然後離開</title>
<body>

<p>
要儲存你的分割區規劃然後離開 <c>fdisk</c>，輸入 <c>w</c>：
</p>

<pre caption="儲存然後離開 fdisk">
Command (m for help): <i>w</i>
</pre>

<p>
現在你的分割區已經建立完成，你現在可以從 <uri link="#filesystems">
建立檔案系統</uri> 繼續。
<!-- TODO reactivate when LVM2 instructions are boarded
, unless you have chosen to use LVM
in which case you should first read <uri link="#lvm">Optional: Using
LVM</uri>.
-->
</p>

</body>
</subsection>
</section>
<section>
<title>使用 mac-fdisk 在 PPC 上分割你的磁碟</title>
<body>

<p>
使用 <c>mac-fdisk</c> 建立你的分割區：
</p>

<pre caption="開始 mac-fdisk">
# <i>mac-fdisk /dev/hda</i>
</pre>

<p>
首先，先清除掉你為了 Linux 分割區預留的空間。使用 <c>mac-fdisk</c> 裡面的
<c>d</c> 刪除這些分割區。它將會問你要刪除的分割區號碼。
</p>

<p>
然後，使用 <c>b</c> 建立一個 <e>Apple_Bootstrap</e> 分割區。這將會問你要從那一個
區塊開始。如果你之前選 <c>3</c> 為分割區號碼，輸入 <c>3p</c>。
</p>

<p>
現在輸入 <c>c</c> 建立 swap 分割區。<c>mac-fdisk</c> 將會問你要從那個區塊開始。
以我們的範例，我們之前使用 <c>3</c> 來建立 Apple_Bootstrap 分割區，你現在將需要
輸入 <c>4p</c>。當你被問到 size，輸入 <c>512M</c> （或是其他你想要的大小 -- 我們
建議 512）。當你被問到 name，輸入 <c>swap</c>（必需）。
</p>

<p>
要建立主分割區，按下 <c>c</c>，然後 <c>5p</c> 選擇要開始的主分割區區塊。當你被問
到 size，輸入 <c>5p</c>。<c>mac-fdisk</c> 將會使用整個剩餘空間。當你被問到 name
，輸入 <c>root</c>（必需）。
</p>

<p>
要結束，使用 <c>w</c> 將分割區寫入然後 <c>q</c> 離開 <c>mac-fdisk</c>。
</p>

<p>
現在你的分割區已經建立完成，你可以從 <uri link="#filesystems">建立檔案系統</uri>
繼續。
<!-- TODO reactivate when LVM2 instructions are boarded 
, unless you have chosen to use LVM
in which case you should first read <uri link="#lvm">Optional: Using
LVM</uri>.
-->
</p>

</body>
</section>
<section>
<title>在 HPPA 上使用 fdisk 分割你的磁碟</title>
<body>

<p>
使用 <c>fdisk</c> 建立你所要的分割區：
</p>

<pre caption="分割磁碟">
# <i>fdisk /dev/sda</i>
</pre>

<p>
PALO needs a special partition to work. You have to create a partition of at
least 16Mb at the beginning of your disk. The partition type must be of type
<e>f0</e> (Linux/PA-RISC boot).
PALO 需要一個特別的分割區。你將需要建立一個最少 16Mb 在磁碟的首端。分割區類別
一定要是 <e>f0</e> （Linux/PA-RISC boot）。
</p>

<impo>
如果你略過這個步驟，你的系統將會停止愛你，並且無法開機。
</impo>

<p>
另外，如果你的磁碟大於 2Gb，請確定你的開機分割區是在磁碟的 2Gb 裡面。PALO 無法
在 2Gb 後讀取核心。
</p>

<p>
現在你的分割區已經建立完成，你可以從 <uri link="#filesystems">建立檔案系統</uri>
繼續。
<!-- TODO reactivate when LVM2 instructions are boarded
, unless you have chosen to use LVM
in which case you should first read <uri link="#lvm">Optional: Using
LVM</uri>.
-->
</p>

</body>
</section>
<section>
<title>在 MIPS 上使用 fdisk 分割你的磁碟</title>
<!-- This entire section is copy/pasted from Kumba's original text. It should
     probably be rewritten, but it seems a bit complicated.
     Someone donate me a MIPS? :) 

       ~SwifT
-->
<subsection>
<title>建立 SGI Disk Label</title>
<body>

<p>
所有的 SGI 系統都需要一個 <e>SGI Disk Label</e>，這是和 Sun &amp; MS-DOS
disklabels 一樣 -- 它將儲存磁碟分割區的資訊。建立一個新的 SGI Disk Label
將會建立兩個特別的分割區到磁碟上：
</p>

<ul>
  <li>
    <e>SGI Volume Header</e> （第九版）：這個分割區很重要。他將會是用來存放核心
    映像檔的地方。為了要可以儲存核心映像檔，你將需要使用 <c>dvhtool</c> 將核心
    映像檔複製到這邊。你才可以從 SGI PROM Monitor 從這個分割區起始核心。
  </li>
  <li>
    <e>SGI Volume</e>（第十一版）：這個分割區和 Sun Disklabel 的第三個
    "整個磁碟"分割區類似。這個分割區將佔住整個磁碟，和不應該被更動。他沒有特別的
    意思只是為了要幫助並未寫成原因的 PROM （或是用在 IRIX）。
  </li>
</ul>

<warn>
SGI Volume Header <e>一定</e> 要從 cylinder 0 開始。如果沒從 0 開始，你將無法
從磁碟開機。
</warn>

<p>
以下為 <c>fdisk</c> 的範例﹍
</p>

<pre caption="建立一個 SGI Disklabel">
# <i>fdisk /dev/sda</i>

Command (m for help): <i>x</i>

Expert command (m for help): <i>m</i>
Command action
   b   move beginning of data in a partition
   c   change number of cylinders
   d   print the raw data in the partition table
   e   list extended partitions
   f   fix partition order
   g   create an IRIX (SGI) partition table
   h   change number of heads
   m   print this menu
   p   print the partition table
   q   quit without saving changes
   r   return to main menu
   s   change number of sectors/track
   v   verify the partition table
   w   write table to disk and exit

Expert command (m for help): <i>g</i>
Building a new SGI disklabel. Changes will remain in memory only,
until you decide to write them. After that, of course, the previous
content will be unrecoverably lost.

Expert command (m for help): <i>r</i>

Command (m for help): <i>p</i>

Disk /dev/sda (SGI disk label): 64 heads, 32 sectors, 17482 cylinders
Units = cylinders of 2048 * 512 bytes

----- partitions -----
Pt#     Device  Info     Start       End   Sectors  Id  System
 9:  /dev/sda1               0         4     10240   0  SGI volhdr
11:  /dev/sda2               0     17481  35803136   6  SGI volume
----- Bootinfo -----
Bootfile: /unix
----- Directory Entries -----

Command (m for help):
</pre>

<note>
如果你的磁碟已經有了 SGI Disklabel，那麼 fdisk 將不會讓你建立一個新的。總共有兩
個方法可以解決。一個是建立 Sun 或是 MS-DOS disklable，將更動寫入磁碟，然後重新
啟動磁碟。第二個方法則是使用空的資料覆蓋它：<c>dd if=/dev/zero of=/dev/sda
bs=512 count=1</c>。
</note>

</body>
</subsection>
<subsection>
<title>設定 SGI Volume Header 到正確的大小</title>
<body>

<p>
現在 SGI Disklabel 已經建立完成，可以開始定義分割區了。在上面的範例，已經有兩個
已經定義完成的分割區了。這些是之前所討論到的特別分割區。但是，為了要安裝 Gentoo
，我們將需要直接載入多個核心到 volume header，因為沒有支援 SGI Bootloader 可以
放在 Portage 內提供使用。Volume header 可以放置 <e>八</e> 個任何大小的核心映像檔
但是每個映像檔名最常為八個英文字母。
</p>

<p>
建立 volume header 的步驟不是很直接 -- 需要一點技巧。一個因為 fdisk 奇怪的原因無
法刪除和重新加入 volume header。在以下的範例，我們將建立一個 50MB 的 volume
header 和衣個 50MB 的 /boot 分割區。真正的結果不一養，但是這只是為了解釋用途。
</p>

<pre caption="正確的更改 SGI Volume Header 大小">
Command (m for help): <i>n</i>
Partition number (1-16): <i>1</i>
First cylinder (5-8682, default 5): <i>51</i>
 Last cylinder (51-8682, default 8682): <i>101</i>
<comment>（fdisk 只允許第一個分割區在重新建立後在 cylinder 5）</comment>
<comment>（如果你嘗試過這個方法，刪除然後重新建立 SGI Volume Header 這將會是你會碰到的強況。）</comment>
<comment>（在我們的範例裡，我們將 /boot 設定為 50MB，所以我們要從 cylinder 51（還記得 Volume Header 需要在 cylinder 0 嗎？）然後將他的尾端設定在 101，代表著大約是 50MB（+/- 1-5MB））</comment>

Command (m for help): <i>d</i>
Partition number (1-16): <i>9</i>
<comment>（刪除第九個分割區（SGI Volume Header））</comment>

Command (m for help): <i>n</i>
Partition number (1-16): <i>9</i>
First cylinder (0-50, default 0): <i>0</i>
 Last cylinder (0-50, default 50): <i>50</i>
<comment>（重新建立第九個分割區，在第一個分割後面）</comment>
</pre>

</body>
</subsection>
<subsection>
<title>最後的分割區規劃</title>
<body>

<p>
當完成時，你將可以安全的建立你剩下的分割區了。當你所有的分割區已經完成建立時，
確認你的 swap 分割區的類別為 <c>82</c>，Linux Swap。預設它將會是 <c>83</c>，
Linux Native。
</p>

<p>
現在你的分割區已經建立完成，你可以從 <uri link="#filesystems">建立檔案系統</uri>
繼續。
<!-- TODO reactivate when LVM2 instructions are boarded
, unless you have chosen to use 
LVM in which case you should first read <uri link="#lvm">Optional: Using
LVM</uri>.
-->
</p>

</body>
</subsection>
</section>
<!-- TODO rewrite with LVM2 instructions when appropriate
<section id="lvm">
<title>Optional: Using LVM</title>
<subsection>
<title>Initialising the Partitions</title>
<body>

<p>
To use LVM, you first need to activate LVM and initialize your created 
partitions. To do so, use <c>vgscan</c> (activate LVM) and <c>pvcreate</c> 
(initialize partitions). In this example, we assume that <path>/dev/hda1</path> 
is a regular boot partition, <path>/dev/hda2</path> a regular (but small) root 
partition and <path>/dev/hda3</path> a big partition for the LVM.
</p>

<pre caption="Activating and Initialising LVM partitions">
# <i>vgscan</i>
# <i>pvcreate /dev/hda3</i>
</pre>

</body>
</subsection>
<subsection>
<title>Set up the Volume Group</title>
<body>

<p>
Now we need to setup the volume group. We will use <c>vgcreate</c> to do so, but
<c>vgcreate</c> needs the full (DevFS-style) path to the device file. So we
first find out where these device files are located:
</p>

<pre caption="Getting to know the full location">
# <i>ls -l /dev/hda3</i>
lr-xr-xr-x    1 root     root           33 Oct 21  2003 /dev/hda3 -&gt; ide/host0/bus0/target0/lun0/part3
</pre>

<p>
Now we create the volume group called "vg":
</p>

<pre caption="Create the VG group">
# <i>vgcreate vg /dev/ide/host0/bus0/target0/lun0/part3</i>
</pre>

</body>
</subsection>
<subsection>
<title>Creating the Logical Volumes</title>
<body>

<p>
Now we create the logical volumes. In this example, we create a separate
<path>usr/</path> (10 Gb), <path>home/</path> (5 Gb), <path>opt/</path> (2 Gb),
<path>tmp/</path> (2 Gb), <path>var/</path> (5 Gb) and a swap of 512 Mb.
</p>

<pre caption="Creating the logical volumes">
# <i>lvcreate -L10G -nusr vg</i>
# <i>lvcreate -L5G -nhome vg</i>
# <i>lvcreate -L2G -nopt vg</i>
# <i>lvcreate -L2G -ntmp vg</i>
# <i>lvcreate -L5G -nvar vg</i>
# <i>lvcreate -L512M -nswap vg</i>
</pre>

<p>
As of now, the logical volumes are created and usable as they were regular
partitions:
</p>

<pre caption="Listing the logical volumes">
# <i>ls /dev/vg</i>
home     opt      swap     tmp     usr      var
</pre>

<p>
<e>These</e> files are now your "partitions" (logical volumes).
</p>

</body>
</subsection>
</section>
-->
<section id="filesystems">
<title>建立檔案系統</title>
<subsection>
<title>介紹</title>
<body>

<p>
現在你的分割區已經建立完成了，接下來我們該把檔案系統放上去。如果你不在乎使用哪一
種檔案系統，喜歡我們的決定，請從 <uri link="#filesystems-apply">套用檔案系統到分
割區上</uri> 繼續。不然的話請繼續往下閱讀關於檔案可用的檔案系統﹍
</p>

</body>
</subsection>
<subsection>
<title>檔案系統？</title>
<body>

<p>
有多種檔案系統提供我們使用。有些是在所有架構上都穩定，有些則是只在某些架構上穩定
。以下的列表將列出一些可用的檔案系統和適用的架構。如果一個架構包含在 "（﹍）"
裡面，則代表著這個檔案系統在那個架構上應該可用，但是未測試過。
</p>

<table>
<tr>
  <th>檔案系統</th>
  <th>日誌式</th>
  <th>架構</th>
</tr>
<tr>
  <ti>ext2</ti>
  <ti>否</ti>
  <ti>全部架構</ti>
</tr>
<tr>
  <ti>ext3</ti>
  <ti>是</ti>
  <ti>全部架構</ti>
</tr>
<tr>
  <ti>reiserfs</ti>
  <ti>是</ti>
  <ti>x86, hppa, alpha, (mips), (pcc), (amd64)</ti>
</tr>
<tr>
  <ti>xfs</ti>
  <ti>yes</ti>
  <ti>x86, alpha, amd64, (ppc)</ti> <!-- TODO when xfs is in mips-sources, add "(mips)" -->
</tr>
<tr>
  <ti>jfs</ti>
  <ti>yes</ti>
  <ti>x86, alpha, (mips), (amd64)</ti>
</tr>
</table>

<p>
<b>ext2</b> 是一個舊的 Linux 檔案系統，沒有日誌功能. 啟用的時間通常需要很久。目前有許多 <e>日誌型態</e> 的檔案系統可以以更快的速度及更好的效率完成系統啟用和檢查。
</p>

<p>
<b>ext3</b> 為 ext2 的日誌版，提供了 metadata 日誌系統 並且可以快速地使用日誌系
統復原。ext3 是個相當不錯並且可靠的檔案系統. 在大部分的情況下，他都可以表現的很
好。唯一的壞處是，他不使用 Tree 為內部設計 所以無法很有效率的處理過大的檔案。但
是他的參數卻設計的很好。是個很不錯的檔案系統。
</p>

<p>
<b>ReiserFS</b> 整體來說是個相當不錯的系統，它處理小型檔案(少於4kb)時效能會比 
ext2 和 ext3 來的好。他使用的是 B*-tree 為基礎的檔案系統. 另外也能很有效率地處理
大型檔案。Linux 核心版本 2.4.18+ 後，ReiserFS 是一個相當有值得推薦的系統, 從很少
，到很多檔案。ReiserFS 都可以處理的非常好。開機分割區並不建議使用此檔案系統。
</p>

<p>
<b>XFS</b> 是一個 metadata 日誌系統。 Gentoo Linux 也完全支援此項檔案系統。你可以
使用 <path>xfs-sources</path> 核心搭配 XFS。如果你使用高速 SCSI或是纖維的儲存裝置
，我們才推薦你使用 XFS。 如果沒有，請使用其他檔案系統。
</p>

<p>
JFS 是 IBM 發展的高效能日誌系統。目前雖然已經可以算是個完成品，關於他的穩地度並
沒有太多的優點及缺點。
</p>

</body>
</subsection>
<subsection id="filesystems-apply">
<title>Applying a Filesystem to a Partition</title>
<body>

<p>
要把檔案系統建立到一個分割區或是容量上可使用一些為個別檔案系統所設計的工具：
</p>

<table>
<tr>
  <th>檔案系統</th>
  <th>建立指令</th>
</tr>
<tr>
  <ti>ext2</ti>
  <ti><c>mke2fs</c></ti>
</tr>
<tr>
  <ti>ext3</ti>
  <ti><c>mke2fs -j</c></ti>
</tr>
<tr>
  <ti>reiserfs</ti>
  <ti><c>mkreiserfs</c></ti>
</tr>
<tr>
  <ti>xfs</ti>
  <ti><c>mkfs.xfs</c></ti>
</tr>
<tr>
  <ti>jfs</ti>
  <ti><c>mkfs.jfs</c></ti>
</tr>
</table>

<p>
以我們的範例來說，開機分割區（在我們的例子裡為 <path>/dev/hda1</path>）為 ext2 和
主分割區（在我們的例子為 <path>/dev/hda3</path>）為 ext3，你將要使用：
</p>

<pre caption="將檔案系統套用到分割區上">
# <i>mke2fs /dev/hda1</i>
# <i>mke2fs -j /dev/hda3</i>
</pre>

<p>
現在檔案系統已經建立到我們剛建立完成的分割區上了（或是logical 容量）。
</p>

</body>
</subsection>
<subsection>
<title>啟用 Swap 分割區</title>
<body>

<p>
<c>mkswap</c> 是用來起始 swap 分割區的指令：
</p>

<pre caption="建立 swap 簽名">
# <i>mkswap /dev/hda2</i>
</pre>

<p>
要啟用 swap，使用 <c>swapon</c> 指令：
</p>

<note>
Knoppix 會自動啟動 swap，所以 Knoppix 的使用者已經啟動 swap 了，可以跳過起始的動
作。
</note>

<pre caption="啟動 swap">
# <i>swapon /dev/hda2</i>
</pre>

<p>
現在建立然後啟動 swap。
</p>

</body>
</subsection>
</section>
<section>
<title>掛載</title>
<body>

<p>
現在你的分割區已經起始和放置檔案系統了，接下來我們該把這些分割區掛載起來。使用
<c>mount</c> 的指令。不要忘了建立相關的掛載目錄：
</p>

<pre caption="掛載分割區">
# <i>mount /dev/hda3 /mnt/gentoo</i>
# <i>mkdir /mnt/gentoo/boot</i>
# <i>mount /dev/hda1 /mnt/gentoo/boot</i>
</pre>

<note>
如果你要將 <path>/tmp</path> 放在不同的分割區，記得掛載後將它的權限更改為：
<c>chmod 1777 /mnt/gentoo/tmp</c>。這也適用於 <path>/var/tmp</path>。
</note>

<p>
我們將需要掛載 proc 檔案系統（一個核心的虛擬介面）並且把它放在 <path>/proc</path>
。我們將要建立 <path>/mnt/gentoo/proc</path> 掛載點：
</p>

<pre caption="建立 /mnt/gentoo/proc 掛載點">
# <i>mkdir /mnt/gentoo/proc</i>
</pre>

<p>
如果你是從 LiveCD 安裝 Gentoo，你只需要掛載 <path>proc</path>：
</p>

<pre caption="掛載 proc">
# <i>mount -t proc none /mnt/gentoo/proc</i>
</pre>

<p>
如果你不是從 LiveCD 安裝 Gentoo，你將需要 bindmount <path>/proc</path>：
</p>

<pre caption="Bind-mount proc">
# <i>mount -o bind /proc /mnt/gentoo/proc</i>
</pre>

<p>
現在從 <uri link="?part=1&amp;chap=5">使用安裝檔安裝 Gentoo</uri> 繼續。
</p>

</body>
</section>
</sections>
