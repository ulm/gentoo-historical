<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/en/gentoo-kernel.xml">
<title>Gentoo Linux Kernel Guide</title>
<author title="Author">
    <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Contributor">
    <mail link="lostlogic@gentoo.org">Brandon Low</mail>
</author>
<author title="Editor">
    <mail link="carl@gentoo.org">Carl Anderson</mail>
</author>
<author title="Editor">
    <mail link="peesh@gentoo.org">Jorge Paulo</mail>
</author>

<abstract>
This document gives you an overview on all kernelsources that Gentoo
provides through Portage.
</abstract>

<version>0.1</version>
<date>16 May 2003</date>

<chapter>
<title>Introduction</title>
<section>
<body>

<p>
As with everything else in Gentoo Linux, the philosophy of the Gentoo 
Kernel team is to give you, the user, as much freedom of choice as 
possible.  If you take a look at the output of <c>emerge -s sources</c> 
you see a large variety of kernels to choose from.  In this document, 
I will attempt to give you a brief rundown of the goals of each of the 
patch sets, which we at Gentoo design, and also explain the other kernel
sources we make available to you.
</p>

</body>
</section>
</chapter>

<chapter>
<title>The Choices, Part I</title>
<section>
<title>gentoo-sources</title>
<body>

<p>
For most users, the recommended kernel sources are the 
<c>gentoo-sources</c>.  The <c>gentoo-sources</c> package contains 
specially tuned performance kernel patches designed to optimize tasks 
such as compiling while listening to music and browsing the web.  Most 
of you who are new to Gentoo have probably never run a system where you 
are regularly compiling many packages from source while you are doing your
normal everyday tasks on your computer. 
You may find that if you use the <c>vanilla-sources</c> (the official 
kernel sources released from <uri>http://www.kernel.org</uri>) normal tasks -- 
such as listening to music, moving your mouse and the like  -- may appear
jumpy when you are compiling packages.
</p>

<p>
The <c>gentoo-sources</c> contain an updated ACPI subsystem and are based 
on Con Kolivas' high-performance kernel patches (<c>ck-sources</c>). We also
support grSecurity (a set of security-related patches with support for
ACLs), EVMS(2) (a highly flexible storage management filesystem with easy 
partition resizing), JFS (IBM's high-performance filesystem), the latest
NTFS drivers, and more.
</p>

<p>
Because the <c>gentoo-sources</c> are targeted at full performance, they are
also very good for gaming purposes.
</p>

<p>
The following USE-flags can be set to select optional patches:
</p>

<table>
<tr><th>Flag</th><th>Description</th></tr>
<tr><ti>aavm</ti><ti>Use Andrea Arcangeli's memory management</ti></tr>
<tr><ti>evms2</ti><ti>Use EVMS 2.0.1 instead of EVMS 1.2.1</ti></tr>
<tr><ti>crypt</ti><ti>Apply Cryptographic patches</ti></tr>
<tr><ti>usagi</ti><ti>Keep USAGI, drop superfreeswan, patch-int, loop-jari</ti></tr>
</table>


</body>
</section>
<section>
<title>vanilla-sources</title>
<body>

<p>
The next kernel sources that many of you will probably be familiar with 
as Linux users are the <c>vanilla-sources</c>.  As I mentioned briefly 
above, these are the official kernel sources released on 
<uri>http://www.kernel.org/</uri>. These sources are maintained (contrary 
to popular belief) not by Linus Torvalds himself, but by Marcelo 
Tosatti. Linus is the leader of active kernel development, but as he is 
only one man, he passes off the maintenance of the stable kernel branch
to someone he can trust to handle it once it has stabilized.  Thus, Alan
Cox became the maintainer of the Linux-2.2 kernel series and Marcelo 
Tosatti became the maintainer of the Linux-2.4 kernel series. This is 
what all the other patch sets in the 2.4 series are based on. Marcelo has
been doing an outstanding job with its maintenance and it can be 
counted on for stability and up-to-date (if not bleeding edge) hardware
support.
</p>

<p>
<c>vanilla-sources</c> are probably the most stable sources available
since they are the most tested and all possible kernel sources are based 
on them. If you don't need any of the extras that the other kernels supply 
then the <c>vanilla-sources</c> are your thing.
</p>

</body>
</section>
<section>
<title>gs-sources</title>
<body>

<p>
For users to whom desktop interactive performance comes as a secondary 
priority to reliability and hardware support, we have the 
<c>gs-sources</c>.  GS stands for Gentoo Stable (creative, aren't we?).  
This patch set is tuned and tested to provide the best support for the 
latest hardware and ensures that your mission critical servers will be 
up when you need them.  This kernel doesn't have some of the most 
aggressive performance tuning patches from the <c>gentoo-sources</c>, 
but rest assured, the great performance that you know and love from the
vanilla kernels are alive and well. Where possible and without 
compromising stability we add server related performance patches.
</p>

<p>
This kernel provides support for the latest ACPI subsystem, EVMS, ECC
(required for HA Linux systems), Encrypted Loopback devices, NTFS, Win4Lin
and XFS. It also contains updates for IDE, ext3 and several network cards
amongst other patches.
</p>

<p>
In other words, these sources are perfect for servers and
High-Availability systems.
</p>

<p>
The following USE-flags can be set to select optional patches:
</p>

<table>
<tr><th>Flags</th><th>Description</th></tr>
<tr><ti>crypt</ti><ti>Apply cryptographic patches</ti></tr>
</table>

</body>
</section>
<section>
<title>pfeifer-sources</title>
<body>

<p>
<c>pfeifer-sources</c> are what will become <c>gentoo-sources</c> after 
lots of testing and QA. Patches to the <c>gentoo-sources</c> are first
added to <c>pfeifer-sources</c> for testing. So if you want the
performance of <c>gentoo-sources</c> with the most recent possible
patches, use <c>pfeifer-sources</c>.
</p>

<p>
The following USE-flags can be set to select optional patches:
</p>

<table>
<tr><th>Flag</th><th>Description</th></tr>
<tr><ti>aavm</ti><ti>Use Andrea Arcangeli's memory management</ti></tr>
<tr><ti>evms2</ti><ti>Use EVMS 2.0.1 instead of EVMS 1.2.1</ti></tr>
<tr><ti>crypt</ti><ti>Apply Cryptographic patches</ti></tr>
<tr><ti>usagi</ti><ti>Keep USAGI, drop superfreeswan, patch-int, loop-jari</ti></tr>
</table>

</body>
</section>
<section>
<title>hardened-sources</title>
<body>

<p>
<c>hardened-sources</c> provides patches for the various subprojects of
Gentoo Hardened, together with stability/security-enhancements. Check
<uri>http://www.gentoo.org/proj/en/hardened/</uri> for more information.
</p>

<p>
The following USE-flags can be set to select optional patches:
</p>

<table>
<tr><th>Flags</th><th>Description</th></tr>
<tr><ti>selinux</ti><ti>Substitute grSecurity with SELinux support</ti></tr>
</table>

</body>
</section>
<section>
<title>xfs-sources</title>
<body>

<p>
<c>xfs-sources</c> contains support for EVMS, ACPI, grSecurity and, what
you probably already figured out by now, the latest XFS support patches
from the XFS Development. The Gentoo LiveCD uses <c>xfs-sources</c>, if 
you must know :-)
</p>

<p>
More information about XFS on <uri>http://oss.sgi.com/projects/xfs/</uri>.
</p>

<p>
You can select the following USE-flags to select optional patches:
</p>

<table>
<tr><th>Flags</th><th>Description</th></tr>
<tr><ti>crypt</ti><ti>Apply cryptographic patches</ti></tr>
</table>

</body>
</section>
<section>
<title>Architecture dependent kernels</title>
<body>

<p>
<c>alpha-sources</c>, <c>arm-sources</c>, <c>hppa-sources</c>, 
<c>mips-sources</c>, <c>ppc-sources</c> and <c>sparc-sources</c> are, as
their names suggest, patched to run best on specific architectures.  They
also contain some of the patches for hardware and features support from 
the other patch sets mentioned above and below.
</p>

</body>
</section>
<section>
<title>ppc-sources-benh</title>
<body>

<p>
The <c>ppc-sources-benh</c> ebuilds provide additional hardware
support for the <c>ppc-sources</c> kernel. It is slightly more 
experimental than the <c>ppc-sources</c>.
</p>

</body>
</section>
<section>
<title>ppc-sources-crypto</title>
<body>

<p>
The <c>ppc-sources-crypto</c> ebuilds provide CryptoAPI
support for the Gentoo Linux PPC Kernel. More information about
CryptoAPI can be found on <uri>http://www.kerneli.org/about/</uri>.
</p>

</body>
</section>
<section>
<title>ppc-sources-dev</title>
<body>

<p>
The <c>ppc-sources-dev</c> packages provide the development sources for
<c>ppc-sources</c>. Every patch which should become part of
<c>ppc-sources</c> has to go through <c>ppc-sources-dev</c> first.
</p>

</body>
</section>
<section>
<title>compaq-sources</title>
<body>

<p>
The <c>compaq-sources</c> provide RedHat's kernel sources for Alpha, 
maintained by Compaq.
</p>

</body>
</section>
</chapter>

<chapter>
<title>The Choices, Part II</title>
<section>
<body>

<p>
Now I'm going to try to briefly describe some of the other 
<path>sys-kernel/*-sources</path> which you saw scroll by when you ran 
<c>emerge -s sources</c>. Lets take them in alphabetical order.  
</p>

</body>
</section>
<section>
<title>aa-sources</title>
<body>

<p>
First we have <c>aa-sources</c>. This is Andrea Arcangeli's patch set.  
Andrea is known as an amazing coder by many other kernel hackers.  His 
kernel patch set has some of the most aggressively tuned VM (Virtual 
Memory) patches known to mankind. When I last looked, it also contained 
SGI's XFS filesystem and the O(1) scheduler by Ingo Molar (which will 
become the default scheduler for Linux 2.6).  
</p>

<p>
It also provides User Mode Linux support (check out our 
<uri link="/doc/en/uml.xml">UML Guide</uri> for more information) and 
the latest TUX Webserver (an in-kernel webserver).
</p>

<p>
If you have Memory Management troubles with other kernels, 
<c>aa-sources</c> can be your solution. If you want to optimize Linux's
Memory Management for your system, <c>aa-sources</c> is <e>definitely</e>
what you need.
</p>

<p>
Visit 
<uri>http://www.kernel.org/pub/linux/kernel/people/andrea/kernels/v2.4</uri>
for more information about all the patches in these kernel sources.
</p>

</body>
</section>
<section>
<title>ac-sources</title>
<body>

<p>
Next we have the <c>ac-sources</c>. This is Alan Cox's patch set against 
the 2.4 kernel series.  In this patch set you will find the O(1) 
scheduler, the latest updates to the 2.4 IDE system and many other 
patches that are waiting for possible inclusion in the 2.4 kernel 
series.  
</p>

<p>
This kernel is known to have very decent support for several additional
hardware and may be a candidate for you if you need a stable but less
conservative kernel than the <c>vanilla-sources</c>. 
</p>

<p>
Check out 
<uri>http://www.kernel.org/pub/linux/kernel/people/alan/linux-2.4/</uri>
to get a look at what Alan is working on.
</p>

</body>
</section>
<section>
<title>ck-sources</title>
<body>

<p>
<c>ck-sources</c> is Con Kolivas's kernel patch set.  This kernel is 
<e>HIGHLY</e> tuned for desktop performance at the expense of 
throughput and some of the scheduler's ability to prioritize 
applications.  Con Kolivas benchmarks kernels to find the best 
combination of features for desktop use.  See 
<uri>http://kernel.kolivas.org</uri> for more information on Con and his
patches.
</p>

</body>
</section>
<section>
<title>development-sources</title>
<body>

<p>
<c>development-sources</c> is the current unstable kernel branch.  This
is the branch of the Linux kernel that Linus himself maintains.  This
rapidly changing playground is where the features for the next stable 
branch are implemented, enhanced and tested before they are released 
to the vast majority of Linux users.
</p>

<p>
If you want the latest, bleeding edge support and experimental core-system 
changes, this is what you want. Note however that these are <e>highly</e>
experimental kernel sources and it is advised <e>not</e> to use them on mission 
critical or production systems.
</p>

<warn>
Do note that Gentoo Linux does not support issues with or related
to the <c>development-sources</c> or derivatives as it changes too often 
and is known to break things occasionally.
</warn>

</body>
</section>
<section>
<title>gaming-sources</title>
<body>

<p>
<c>gaming-sources</c> are based on <c>ck-sources</c> and are therefore 
tuned for high performance. They also contain patches for the latest 
game-related hardware (graphic cards, sound cards, and such). 
</p>

<p>
If you are a hardcore gamer, this is your choice.
</p>

</body>
</section>
<section>
<title>mm-sources</title>
<body>

<p>
The <c>mm-sources</c> are based on the <c>development-sources</c> and
contain Andrew Morton's patch set. It assembles several other patches,
like ext2/3 Extended Attributes and Access Control Lists, Page Table
Sharing, the Orlov Allocator, non-linear mapping behaviour, etc into one
patch set.
</p>

<p>
If you really want to live on the edge and you think 
<c>development-sources</c> are for wussies, then try out
<c>mm-sources</c>.
</p>

</body>
</section>
<section>
<title>mosix-sources</title>
<body>

<p>
The <c>mosix-sources</c> are patched to support MOSIX operation for 
clustered computing. A cluster is a set of nodes (PCs) with software 
that enables them to handle tasks in a distributed manner. With 
clusters, you don't need high-profile supercomputers to do lengthy 
tasks. For more information see <uri>http://www.mosix.org</uri>.
</p>

</body>
</section>
<section>
<title>openmosix-sources</title>
<body>

<p>
The <c>openmosix-sources</c> are patched to support the openMosix system 
(like MOSIX but Open Source).  For more information see 
<uri>http://www.openmosix.org</uri>.
</p>

</body>
</section>

<!--
    TODO:   Add descriptions of the other ppc-sources here
-->

<section>
<title>redhat-sources</title>
<body>

<p>
The <c>redhat-sources</c> are, as the name suggests, the sources for the 
RedHat Linux kernel.  Thanks to the wonders of Open Source, anyone can 
take advantage of the work the RedHat engineers put into making their 
kernels. We at Gentoo have provided an ebuild so that you can easily
use this kernel with Gentoo.
</p>

</body>
</section>
<section>
<title>rsbac-sources</title>
<body>

<p>
<c>rsbac-sources</c> contain the patches from 
<uri>http://www.rsbac.org</uri>.  RSBAC stands for <e>Rule Set Based 
Access Control</e>. These kernel patches allow you to authorize users 
based on rules instead of normal uid/gid permissions.
</p>

</body>
</section>
<section>
<title>selinux-sources</title>
<body>

<p>
<c>selinux-sources</c> from <uri>http://www.nsa.gov/selinux</uri> are 
patches for the security conscious to support the LSM (Linux Security 
Modules) and the Flask Security Architecture.
</p>

</body>
</section>
<section>
<title>usermode-sources</title>
<body>

<p>
<c>usermode-sources</c> are the User Mode Linux kernel patches.  This 
kernel is designed to allow Linux to run within Linux to run within Linux
to ... User Mode Linux is intended for testing and virtual server support.
For more information about this amazing tribute to the stability and 
scalability of Linux, see <uri>http://user-mode-linux.sourceforge.net</uri>. 
</p>

<p>
For more information on UML and Gentoo, read the 
<uri link="/doc/en/uml.xml">Gentoo UML Guide</uri>.
</p>

</body>
</section>
<section>
<title>win4lin-sources</title>
<body>

<p>
<c>win4lin-sources</c> are patched to support the userland win4lin tools 
that allow Linux users to run many Microsoft Windows (TM) applications
at almost native speeds.  See <uri>http://www.netraverse.com/</uri> for more 
information.
</p>

</body>
</section>
<section>
<title>wolk-sources</title>
<body>

<p>
<c>wolk-sources</c> contains the <e>Working Overloaded Linux Kernel</e> from 
<uri>http://sourceforge.net/projects/wolk</uri>. This kernel contains
many patches of a wide variety, all combined into the kernel with
extreme care. This allows you to configure nearly every one into and out
of the kernel at compile time -- so the kernel will work with nearly any
combination of the patches.
</p>

<p>
If you need a certain combination of patches that you cannot find in other
kernel sources, WOLK is definitely worth a shot.
</p>

</body>
</section>
</chapter>
</guide>
