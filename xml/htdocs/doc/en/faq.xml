<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/faq.xml,v 1.53 2004/02/19 14:49:28 swift Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/en/faq.xml">
<title>Gentoo Linux Frequently Asked Questions</title>
<author title="Chief Architect"><mail link="drobbins@gentoo.org">Daniel Robbins</mail></author>
<author title="Reviewer">Colin Morey</author>
<author title="Editor"><!-- zhen@gentoo.org -->John P. Davis</author>
<author title="Editor"><mail link="stocke2@gentoo.org">Eric Stockbridge</mail></author>
<author title="Editor"><mail link="zhware@gentoo.org">Stoyan Zhekov</mail></author>
<author title="Editor"><mail link="carl@gentoo.org">Carl Anderson</mail></author>
<author title="Editor"><mail link="peesh@gentoo.org">Jorge Paulo</mail></author>
<author title="Editor"><mail link="swift@gentoo.org">Sven Vermeulen</mail></author>
<abstract>
This FAQ is a collection of questions and answers collected from the gentoo-dev mailing list 
and from IRC -- if you have any questions (or answers!) to add, please contact either an author 
or a member of the documentation team.
</abstract>

<license/>

<version>1.1.12</version>
<date>January 27, 2004</date>

<chapter>
<title>Featured Questions</title>
<section>
<title>Getting Started</title>
<body>
<ul>
<li><uri link="#doc_chap2_sect1">How is Gentoo pronounced, and what does it mean?</uri></li>
<li><uri link="#doc_chap2_sect2">What makes Gentoo different?</uri></li>
</ul>
</body>
</section>
<section>
<title>Installation</title>
<body>
<ul>
<li><uri link="#doc_chap3_sect1">What is the difference between the .iso and .tbz2 files?</uri></li>
<li><uri link="#doc_chap3_sect2">Why do the build .iso and .tbz2 files sometimes have different -r (revision) numbers?</uri></li>
<li><uri link="#doc_chap3_sect3">I'm finding things to be really unstable and I'm using "-O9 -ffast-math -fomit-frame-pointer" optimizations. What gives?</uri></li>
<li><uri link="#doc_chap3_sect4">What's the default root password after installation?</uri></li>
<li><uri link="#doc_chap3_sect5">How can I change the root (or indeed any other user's) password?</uri></li>
<li><uri link="#doc_chap3_sect6">How do I add a normal user?</uri></li>
<li><uri link="#doc_chap3_sect7">Why can't a user su to root?</uri></li>
<li><uri link="#doc_chap3_sect8">How do I enable devfs?</uri></li>
<li><uri link="#doc_chap3_sect9">How to I disable devfs?</uri></li>
<li><uri link="#doc_chap3_sect10">How do I get a /dev/mouse that doesn't go away when I reboot (when using devfs)?</uri></li>
<li><uri link="#doc_chap3_sect11">Grub can't find stage x.y?</uri></li>
<li><uri link="#doc_chap3_sect12">My ASUS CUV4X-D won't boot and it freezes during various stages of kernel loading and hardware detection.</uri></li>
<li><uri link="#doc_chap3_sect13">If I have Gentoo 1.4_rc1 can I upgrade to 1.4_rc2/rc3/final without reinstalling?</uri></li>
<li><uri link="#doc_chap3_sect14">My kernel doesn't boot (properly), what should I do now?</uri></li>
<li><uri link="#doc_chap3_sect15">My proxy requires authentication, what do I have to do?</uri></li>
</ul>
</body>
</section>
<section>
<title>Package Management</title>
<body>
<ul>
<li><uri link="#doc_chap4_sect1">In what format are the packages stored?</uri></li>
<li><uri link="#doc_chap4_sect2">Why write a new port system (Portage) instead of using BSD's version?</uri></li>
<li><uri link="#doc_chap4_sect3">How does this differ from Debian's apt or BSD's ports?</uri></li>
<li><uri link="#doc_chap4_sect4">How do I install and uninstall packages?</uri></li>
<li><uri link="#doc_chap4_sect5">How can I set a global configuration for compiling packages?</uri></li>
<li><uri link="#doc_chap4_sect6">What happened to /etc/make.defaults?</uri></li>
<li><uri link="#doc_chap4_sect7">Is there a way to upgrade all installed packages e.g. apt-get upgrade or make World?</uri></li>
<li><uri link="#doc_chap4_sect8">When updating a package using emerge or ebuild, how do I avoid clobbering my config files?</uri></li>
<li><uri link="#doc_chap4_sect9">I want to perform the ./configure step myself.  Can I?</uri></li>
<li><uri link="#doc_chap4_sect10">What if rsync doesn't work for me?</uri></li>
<li><uri link="#doc_chap4_sect11">How do I use emerge from behind a firewall?</uri></li>
<li><uri link="#doc_chap4_sect12">Can I rsync from another operating system?</uri></li>
<li><uri link="#doc_chap4_sect13">I have only slow modem connection at home.  Can I download sources somewhere else and add them to my system?</uri></li>
<li><uri link="#doc_chap4_sect14">.tar.gz sources for installed software are piling up in /usr/portage/distfiles/ using valuable space.  Is it safe to delete these files?</uri></li>
<li><uri link="#doc_chap4_sect15">I went to emerge blackdown-jdk and blackdown-jre, and afterwards java-config --list-available-vms would only list blackdown-jre.  Openoffice then refuses to emerge.  What do I do?</uri></li>
<li><uri link="#doc_chap4_sect16">What's in /var/tmp/portage?  Is it safe to delete the files and directories in /var/tmp/portage?</uri></li>
</ul>
</body>
</section>
<section>
<title>Usage</title>
<body>
<ul>
<li><uri link="#doc_chap5_sect1">I have installed openssh on my box, but can only log in as root - my normal user account doesn't work.</uri></li>
<li><uri link="#doc_chap5_sect2">I can start X applications as root only.</uri></li>
<li><uri link="#doc_chap5_sect3">How do I set up an International Keyboard Layout?</uri></li>
<li><uri link="#doc_chap5_sect4">DNS name resolution works for root only.</uri></li>
<li><uri link="#doc_chap5_sect5">Why is KDE not reading /etc/profile?</uri></li>
<li><uri link="#doc_chap5_sect6">Why can't my user use their own crontab?</uri></li>
<li><uri link="#doc_chap5_sect7">How do I get numlock to start on boot?</uri></li>
<li><uri link="#doc_chap5_sect8">How do I have my terminal cleared when I log out?</uri></li>
</ul>
</body>
</section>
<section>
<title>Maintenance</title>
<body>
<ul>
<li><uri link="#doc_chap6_sect1">ReiserFS and filesystem corruption issues -- how to fix'em, etc...</uri></li>
<li><uri link="#doc_chap6_sect2">How to I view the timestamps in /var/log/syslog.d, etc. on a pre-1.0_rc5 Gentoo system?</uri></li>
<li><uri link="#doc_chap6_sect3">Metalogd doesn't log in real time!</uri></li>
</ul>
</body>
</section>
<section>
<title>Development</title>
<body>
<ul>
<li><uri link="#doc_chap7_sect1">Where can I report bugs?</uri></li>
<li><uri link="#doc_chap7_sect2">How often are new releases made?</uri></li>
<li><uri link="#doc_chap7_sect3">I would like a package to be added to Portage; how would I go about this?</uri></li>
<li><uri link="#doc_chap7_sect4">How can I add a question or answer to this FAQ?</uri></li>
<li><uri link="#doc_chap7_sect5">make -f Makefile.cvs on a KDE app produces "invalid unused variable" errors.  What gives?</uri></li>
<li><uri link="#doc_chap7_sect6">My speaker beeps like crazy while compiling Mozilla.  How do I disable console beeps?</uri></li>
</ul>
</body>
</section>
<section>
<title>Resources</title>
<body>
<ul>
<li><uri link="#doc_chap8_sect1">Where can I find more about supervise used by default in Gentoo Linux 1.0_rc5 and earlier?</uri></li>
<li><uri link="#doc_chap8_sect2">Where can I find more information about Gentoo Linux?</uri></li>
<li><uri link="#doc_chap8_sect3">Can I buy a CD of Gentoo Linux?</uri></li>
<li><uri link="#doc_chap8_sect4">Why, when I hit reply to a post on a Gentoo mailing list, does my answer only go to the original poster and not the entire list?</uri></li>
<li><uri link="#doc_chap8_sect5">This FAQ hasn't answered my question.  What do I do now?</uri></li>
</ul>
</body>
</section>
</chapter>


<chapter>
	<title>Getting Started</title>

	<section>
		<title>How is Gentoo pronounced, and what does it mean?</title>
		<body><p>Gentoo is a species of small fast penguin, pronounced "gen-too" (The "g" in "gentoo" is a soft "g", as in "gentle").</p></body>
	</section>

	<section>
		<title>What makes Gentoo different?</title>
		<body>
		<p>
			Gentoo Linux is a fast, modern distribution with a clean and flexible
			design -- in this respect, Gentoo may appeal to
			<uri link="http://www.slackware.com/">Slackware</uri>,
			<uri link="http://www.linuxfromscratch.org/">Linux From Scratch</uri> or
			<uri link="http://www.bsd.org/">BSD</uri> users.  Unlike most Linux
			distros, Gentoo has a package system reminiscent of BSD's ports,
			meaning the packages are continually updated to the latest
			versions.
		</p>
		</body>
	</section>
</chapter>

<chapter>
	<title>Installation</title>
	
		<section>
		<title>What is the difference between the .iso and .tbz2 files?</title>
		<body><p>The build <e>.tbz2</e> file is a minimal set of system files
		that is necessary for allowing a user to bootstrap and install
		Gentoo Linux.  The build <e>.iso</e> is a complete, bootable CD image that
		contains a system kernel, a reasonably complete set of kernel modules,
		necessary system tools such as <c>mkfs</c> and networking support,
		as well as the <e>.tbz2</e> minimal-system tarball.  Most users will install
		Gentoo Linux by burning the .iso file onto a CD, booting off of the CD,
		and installing from within the minimal linux environment provided by
		the Gentoo boot CD.  It is possible, however, for users to install
		Gentoo Linux directly from an already-existing Linux distribution.
		Such users need only download the .tbz2 file, install the contents
		on a spare partition (making sure to use the <c>p</c> flag when
		untarring the tarball!), chroot, and install in the usual fashion.</p>
        </body>
	</section>

	<section>
		<title>Why do the build .iso and .tbz2 files sometimes have different -r (revision) numbers?</title>
		<body><p>
		The .tbz2 minimal-system tarball only needs to be revised when there have
		been significant changes to the core Gentoo Linux system (such as baselayout
		changes, or a new profile), and as such .tbz2 updates are relatively rare.
		The .iso file tends to get updated whenever we discover that somebody has
		hardware that won't boot from our .iso.  Since new kernel modules and
		patches are constantly being generated, this situation probably won't
		stabilise anytime soon.
		</p>
	</body>
	</section>

	<section>
		<title>I'm finding things to be really unstable and I'm using "-O9 -ffast-math 
		-fomit-frame-pointer" optimizations.  What gives?</title>
		<body>
		<p>Don't bother using anything higher than <c>-O3</c> since it isn't support by current versions
		of gcc.  Very aggressive optimizations sometimes cause the compiler to streamline the assembly code 
		to the point where it doesn't quite do the same thing anymore. A possible setting based on <e>Loc-Dog</e> (on IRC)'s CFLAGS
		is <c>-O3 -mcpu=i686 -march=i686 -fforce-addr -fomit-frame-pointer -funroll-loops 
		-frerun-cse-after-loop -frerun-loop-opt -falign-functions=4</c>, which is about
		as much as I'd want to push global optimization settings.  Beyond this, it's best to use
		ultra-high optimizations only with specific packages where you really need that extra 2%,
		(eg graphics and various multimedia programs), and where you can easily test the package 
		to ensure that it hasn't been optimized into oblivion.</p>
		<p>Please try first to compile with CFLAGS <c>-march= -O2</c> before reporting a bug</p>
		</body>
	</section>

	<section>
		<title>What's the default root password after installation?</title>
		<body><p>The default password is blank; hit enter.</p></body>
	</section>

	<section>
		<title>How can i change the root (or indeed any other user's) password?</title>
		<body><p>You can use <c>passwd</c> to change the password for the user you are logged into.
		for extra options and setting, please see <c>man passwd</c> once you've completed the install.
		</p></body>
	</section>
	<section>
		<title>How do i add a normal user?</title>
		<body>
		<p>The command <c>adduser gentoo</c> will add a user called gentoo. The next step is to give
		this user a password and <c>passwd</c> will do exactly that.</p>
		<p>Instead of <c>adduser</c> you can also use:
		<pre># <i>useradd gentoo -m -G users,audio,wheel -s /bin/bash</i></pre>
		This will add a user gentoo, will make possible for him to use sound-related devices (<path>/dev/sound/*</path>), will make possible for him to switch to root (using <c>su</c>) and will make <path>/bin/bash</path> his login shell.
		</p>
		<p>You can also install <c>superadduser</c> using <c>emerge superadduser</c> and then issue <c>superadduser gentoo</c> to add a user called gentoo. Just follow the instructions given to you by <c>superadduser</c>.</p>
		</body>
	</section>
	<section>
		<title>Why can't a user su to root?</title>
		<body><p>For security reasons, users may only <c>su</c> to root if they belong to the 
		<e>wheel</e> group. To add a <i>username</i> to the <e>wheel</e> group, issue the following 
		command as root:</p>
		<pre># <i>usermod -G users,wheel username</i></pre>
		</body>
	</section>
	<section>
		<title>How do I enable devfs?</title>
		<body>
		<p>
		If you're using 1.0_rc5 or greater, you don't need to do anything special to get 
		devfs working; it's already active (you did make sure that devfs was built into the
		kernel, didn't you?).  
		However, if you are using a version of Gentoo Linux <e>prior</e> to version 1.0_rc5, add 
		<c>devfs=mount</c> to your <c>GRUB</c> kernel boot options so that the line looks something 
		like <c>kernel /boot/boot/bzImage devfs=mount foo=bar</c>  The kernel will then mount the 
		<path>/dev</path> <e>devfs</e> filesystem automatically at boot-time.
		</p>
		</body>
	</section>
	<section>
		<title>How to I disable devfs?</title>
		<body>
		<p>Under Gentoo Linux 1.0_rc6 and later, you can disable devfs by passing the 
		<c>gentoo=nodevfs</c> to the kernel.</p>
		</body>
	</section>
	<section>
		<title>How do I get a <path>/dev/mouse </path> that
		doesn't go away when I reboot (when using devfs)?</title>
		<body>
		<p>
		If you are using 1.0_rc6 or later, then you can just use <c>ln -s</c>
		to make the usual symbolic link from <path>/dev/mouse</path>, and
		it will be preserved between reboots.
		</p>
		<p>All other users need to edit <path>/etc/devfsd.conf</path>
		and add these lines:</p>
<pre>
REGISTER        ^misc/psaux$    CFUNCTION GLOBAL symlink misc/psaux mouse
UNREGISTER      ^misc/psaux$    CFUNCTION GLOBAL unlink mouse
</pre>
		<p>If you are not using the devfs PS/2 mouse <path>/dev/misc/psaux</path> device,
		adjust the <c>misc/psaux</c> strings above accoringly.  You'll then want to 
		<c>killall -HUP devfsd</c>
		to get devfsd to reread <path>/etc/devfsd.conf</path>.</p>
		</body>
	</section>
	<section>
		<title>Grub can't find stage x.y?</title>
		<body><p>
		During installation the grub boot files are copied
		to <path>/boot/grub</path> (<path>/boot/boot/grub</path> in Gentoo Linux 1.0_rc5 and 
		earlier.) Grub automatically looks in the <path>/boot/grub</path> directory on the boot 
		partition.  (We strongly recommend having a separate no-auto boot partition mounted at 
		<path>/boot</path>, since that way it is much more difficult to clobber your kernel and boot
		info by accident.)  The above error generally arises from (a) not using a separate boot 
		partition, (b) forgetting to mount the boot partition at <path>/boot</path> before either 
		unpacking the build snapshot or running
		<c>emerge --usepkg system</c>, or (c) forgetting the
		<c>notail</c> option when mounting a ReiserFS <path>/boot</path> partition.
		You can get more information on grub, including how to
		debug grub from the grub prompt, by reading the 
		<uri link="http://www-105.ibm.com/developerworks/education.nsf/linux-onlinecourse-bytitle/0F1731DC664023B7862569D0005C44AF?OpenDocument">IBM developerWorks Grub tutorial</uri>.
		</p>
		</body>
	</section>

	<section>
	<title>My ASUS CUV4X-D won't boot and it freezes during various stages of kernel loading and hardware 
	detection. </title>
	<body>
	<p>Disable MPS 1.4 (multi-processor-system) in the BIOS or switch this 
	function to 1.1. By using this option you just switch the MPS version. The Multi-Processor-System
	will still work properly. Make sure to boot Gentoo Linux with the following boot option, noapic. </p>
	</body>
	</section>
	
	<section>
	<title>If I have Gentoo 1.4_rc1 can I upgrade to 1.4_rc2, 1.4_final/_rc3 without reinstalling?</title>
	<body>
  <p>
	In fact there is no difference between the 1.4 releases <b>after they&apos;ve installed</b>. Gentoo 1.4 and later are <c>glibc-2.3.x</c> based.
	As such 1.4rc1 machine for example, that does <c>emerge sync; emerge -u world</c> is <b>exactly the same</b> as a machine with 1.4rc2 installed, after it does <c>emerge sync; emerge -u world</c>. The true differences lie in the installer.
  </p>
	</body>
	</section>

	<section>
	<title>My kernel doesn't boot (properly), what should I do now?</title>
	<body>
	<p>
	You don't need to redo every step of the installation, but only the
	kernel-stuff and all associated steps. Suppose you have installed Gentoo
	on <path>/dev/hda1</path> (/boot) and <path>/dev/hda3</path> (/) with
	<path>/dev/hda2</path> being the swap space:
	</p>
	<pre caption = "Reconfiguring the kernel">
<comment>Boot from the LiveCD and wait until you receive a prompt</comment>
<comment>We first mount all partitions:</comment>
# <i>mount /dev/hda3 /mnt/gentoo</i>
# <i>mount /dev/hda1 /mnt/gentoo/boot</i>
# <i>swapon /dev/hda2</i>
# <i>mount -t proc none /mnt/gentoo/proc</i>
<comment>Then we chroot into our Gentoo environment and configure the kernel:</comment>
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>env-update &amp;&amp; source /etc/profile</i>
# <i>cd /usr/src/linux</i>
# <i>make menuconfig</i>
<comment>Now (de)select anything you have (de)selected wrongly at your</comment>
<comment>previous attempt. Then quit and compile your kernel:</comment>
# <i>make dep &amp;&amp; make bzImage modules modules_install</i>
<comment>Now copy over your bzImage file, overwriting your previous one:</comment>
# <i>cp arch/i386/boot/bzImage /boot</i>
<comment>If you use LILO, rerun lilo -- GRUB users should skip this:</comment>
# <i>/sbin/lilo</i>
<comment>Now exit the chroot and reboot.</comment>
# <i>exit</i>
# <i>umount /mnt/gentoo/proc /mnt/gentoo/boot /mnt/gentoo</i>
# <i>reboot</i>
    </pre>
    <p>
    If on the other hand the problem lays with your bootloader configuration,
    follow the same steps, but instead of configuring/compiling your kernel you
    should reconfigure your bootloader (recompilation isn't necessary).
    </p>
    </body>
    </section>
    <section>
        <title>My proxy requires authentication, what do I have to do?</title>
        <body>

        <p>
        When you have to download something using <c>wget</c>, use the 
        following syntax to authenticate yourself:
        </p>
<pre caption = "Proxy-authentication using wget">
# <i>wget --proxy-user=</i><comment>username</comment><i> --proxy-passwd=</i><comment>password</comment><i> &lt;url&gt;</i>
</pre>
        <p>
        To have Portage automatically use this scheme, define it in 
        <path>/etc/make.conf</path>:
        </p>
<pre caption = "/etc/make.conf">
FETCHCOMMAND="wget --proxy-user=<comment>username</comment> --proxy-passwd=<comment>password</comment> -t 5 --passive-ftp -P \${DISTDIR} \${URI}"
RESUMECOMMAND="/usr/bin/wget --proxy-user=<comment>username</comment> --proxy-passwd=<comment>password</comment> -c -t 5 --passive-ftp -P \${DISTDIR} \${URI}"
</pre>
        <p>
        Sadly, <c>rsync</c> doesn't seem to support username/password 
        authentication for proxies. See <uri link="#doc_chap4_sect10">What 
        if rsync doesn't work for me?</uri> for more information on how to 
        handle this situation.
        </p>
        
        </body>
    </section>
 
</chapter>

<chapter>
	<title>Package Management</title>
	<section>
		<title>In what format are the packages stored?</title>
		<body><p>They exist in our portage tree as <e>ebuild</e> autobuild scripts; we are primarily 
		a ports-based distribution, meaning that we provide scripts (<c>.ebuild</c> files) and a 
		special system (Portage) so that you can build apps from sources. We generally only build 
		binaries for releases and snapshots. The <uri link="/doc/en/gentoo-howto.xml">Development HOWTO
		</uri> covers the contents of an ebuild script in detail.  For full binary ISO releases, we 
		create a full suite of binary packages in an enhanced <c>.tbz2</c> format (<c>.tar.bz2</c> 
		compatible with meta-information attached to the end of the file.)</p>
		</body>
	</section>

	<section>
		<title>Why write a new port system (Portage) instead of using BSD's version?</title>
		<body>
		<p>In one sentence, because Portage is much better in so many ways.  One of the design
		philosophies of the <c>.ebuild</c> syntax was to make it an analog of what you'd type to 
		install the program manually, thus making Portage very easy to learn and modify to your 
		needs.  We also have OpenBSD-style "fake" installs, safe unmerging, system profiles, 
		package masking, a real dependency system, and lots of other good stuff.</p>
		</body>
	</section>

	<section>
		<title>How does this differ from Debian's apt or BSD's ports?</title>
		<body><p>Portage features the best of apt and ports; for example, USE options, a full
		dependency system, safe installs and uninstalls, and a true package database.  Think of
		Portage as the best of both worlds; a ports system with the sensibilities and safety of a
		Linux package management system built-in.</p></body>
	</section>

	<section>
	        <title>How do I install and uninstall packages?</title>
	        <body>
		<p>The <uri link="/doc/en/portage-user.xml">Portage User Guide</uri> details how to install
		and uninstall packages, and update Portage.</p>
	        </body>
	</section>

	<section>
		<title>How can I set a global configuration for compiling packages?</title>
		<body><p><path>/etc/make.conf</path> should be modified to override global and
		profile-specific default options used to compile and merge packages. The most common options 
		are as follows:</p>
		<table>
		<tr>
			<th>Flag</th>
			<th>Description</th>
		</tr>
		<tr>
			<ti>CHOST</ti>
			<ti>This sets the HOST variable for compiles, e.g. <c>i686-pc-linux-gnu</c></ti>
		</tr>
		<tr>
			<ti>CFLAGS</ti>
			<ti>The options for <c>gcc</c> when compiling programs written in C (*.c files)</ti>
		</tr>
		<tr>
			<ti>CXXFLAGS</ti>
			<ti>The options for <c>gcc</c> when compiling programs written in C++ (*.c,*.cpp etc.
			files)</ti>
		</tr>
		<tr>
			<ti>USE</ti>
			<ti>This allows you to set what optional components you'd like compiled-in, if
			available.  For example, if you have <c>gnome</c> inside the USE string, then when
			you compile <c>xchat</c>, it will include GNOME support.  All our dependencies are
			also USE-aware.</ti>
		</tr>
		<tr>
			<ti>GENTOO_MIRRORS</ti>
			<ti>A space separated list of URIs currently mirroring the Gentoo packages.  Portage 
			will attempt download from a <c>GENTOO_MIRROR</c> first before trying the official
			<c>SRC_URI</c>.  To force Portage to skip mirrors, set this variable to "".</ti>
		</tr>
		</table>
		</body>
	</section>

	<section>
		<title>What happened to <path>/etc/make.defaults</path>?</title>
		<body>
		<p>As of Portage 1.5 onwards, <path>/etc/make.defaults</path> is antiquated; 
		if you have portage-1.5-r1 or above installed then you can safely delete it.
		This file has been replaced by <path>/etc/make.profile/make.defaults</path>
		(<path>/etc/make.profile</path> should actually be a symlink to, 
		<path>/usr/portage/profiles/default</path>),
		which contains system profile-specific default settings. The priority order of
		the various configuration files is as follows (highest first):
		<ol>
			<li>Environment variables</li>
			<li><path>/etc/make.conf</path>, for your use</li>
			<li><path>/etc/make.profile/make.defaults</path>, for profile-specific defaults</li>
			<li><path>/etc/make.globals</path>, for global defaults (settings not specified in
			any other place come from here)</li>
		</ol></p></body>
	</section>
	
	<section>
		<title>Is there a way to upgrade all installed packages
		e.g. <e>apt-get upgrade</e> or <e>make World</e>?</title>
		<body><p><b>YES!</b>  Type <c>emerge --update system</c> (use it with <c>--pretend</c> first) to
		update all core system packages, and use <c>emerge --update world</c> (again, use it with 
		<c>--pretend</c> first) to do a complete system upgrade of all installed packages.


		</p></body>
	</section>

	<section> 
		<title>When updating a package using <c>emerge</c> or <c>ebuild</c>, how do I avoid 
		clobbering my config files?</title>
		<body><p>
		Portage now includes config file management support by default.  Type 
		<c>emerge --help config</c> for more details.  The (overly) simple answer is that if
		a package installs <path>foo</path> somewhere under <path>/etc</path>, and
		another <path>foo</path> already exists there, then the new <path>foo</path> will
		instead be renamed to <path>._cfgxxxx_foo</path> in that directory.  A useful
		tool for examining and updating any protected config files is <c>etc-update</c>,
		which is now part of Portage.
		</p></body>
	</section>

	<section>
		<title>I want to perform the <c>./configure</c> step myself.  Can I?</title>
                <body>
<p>
Yes, but it is not trivial, and the next method only works when it is a simple
ebuild (i.e. just <c>./configure</c> and <c>make &amp;&amp; make install</c>).
Be sure to read the ebuild itself to see how Gentoo handles it.
</p>

<p>
Start with unpacking the ebuild: <c>ebuild
/usr/portage/&lt;category&gt;/&lt;package&gt;/&lt;ebuild&gt; unpack</c>.
</p>

<p>
Next, go to <path>/var/tmp/portage/&lt;package&gt;-&lt;version&gt;/work</path>.
Inside it you'll find the unpacked sources. Execute the steps you need to
perform to configure and compile the package.
</p>

<p>
When finished, execute <c>touch
/var/tmp/portage/&lt;package&gt;-&lt;version&gt;/.compiled</c> to trick Portage
into thinking it configured and compiled the package. Then finish up with
<c>ebuild /usr/portage/&lt;category&gt;/&lt;package&gt;/&lt;ebuild&gt;
merge</c>.
</p>

    </body>
	</section>

	<section>
		<title>What if rsync doesn't work for me?</title>
		<body><p>
		If you're behind a firewall that doesn't permit
		rsync traffic, then you can use <c>emerge-webrsync</c> which will fetch 
        and install a Portage snapshot for you through regular HTTP. 
        <c>emerge-webrsync</c> uses <c>wget</c> to download, so proxy is fully 
        supported.
        <pre caption="Using emerge-webrsync">
~# <c>emerge-webrsync</c></pre>
        If you cannot do this either, you can manually download a snapshot
        from <uri>http://distro.ibiblio.org/pub/linux/distributions/gentoo/snapshots/</uri>.
        In order to install the snapshot correctly, you first need to remove 
        your current <path>/usr/portage</path> so that outdated ebuilds don't 
        stay available on your system. However, you might want to put 
        <path>/usr/portage/distfiles</path> somewhere safe if you don't want to 
        lose all your sourcecode.
        <pre caption="Manually installing the snapshots">
<codenote>(First download the snapshot and place it in /usr)</codenote>
~# <c>cd /usr</c>
~# <c>mv /usr/portage/distfiles /usr/distfiles-temp</c>
~# <c>rm -rf /usr/portage</c>
~# <c>tar xvjf portage-foo.tbz2</c>
~# <c>mv /usr/distfiles-temp /usr/portage/distfiles</c></pre>
		</p></body>
	</section>

	<section>
		<title>How do I use <i>emerge</i> from behind a firewall?</title>
		<body><p>
		Edit the PROXY settings in <path>/etc/make.conf</path>.  If that doesn't work,
		edit <path>/etc/wget/wgetrc</path> and edit http_proxy and ftp_proxy
		appropriately.
		</p></body>
	</section>

	<section>
		<title>Can I rsync from another operating system?</title>
		<body><p>There's a program called unison that works under both UNIX and Win32, available from
		<uri>http://www.cis.upenn.edu/~bcpierce/unison/</uri>.</p></body>
	</section>

	<section>
		<title>I have only slow modem connection at home. Can I download sources somewhere else and
		add them to my system?</title>
		<body><p>
		Definitely. You can run <c>emerge --pretend package</c> to see what programs
		are going to be installed. To find out the sources for those packages and where to 
		download the sources from, you can run <c>emerge -fp package</c>.  
		Download sources and bring them on any media
		home. Put the sources into <path>/usr/portage/distfiles</path> and run
		<c>emerge package</c> to see it picking up the sources you just brought in!
		</p></body>
	</section>

	<section>
		<title>.tar.gz sources for installed software are piling up in /usr/portage/distfiles/ using 
		valuable space. Is it safe to delete these files?</title>
		<body><p>
		Yes, you can safely delete these files. But if you are on a slow
		connection, such as a modem, you might want to keep the archives if
		possible; often several ebuilds will be released for the same version of
		a specific piece of software  - if you have deleted the archive and you
		upgrade the software it will have to be downloaded from the internet
		again.
		</p></body>
	</section>

	<section>
		<title>I went to emerge blackdown-jdk and blackdown-jre, and afterwards
		<c>java-config --list-available-vms</c> would only list blackdown-jre.
		Openoffice would then refuse to emerge. What do I do? </title>

		<body>
		<p>Solution: </p>
		<pre caption = "Solution">
# <c>emerge unmerge blackdown-jre blackdown-jdk </c>  
# <c>CONFIG_PROTECT="" emerge blackdown-jdk </c>
		</pre>
		
		</body>
	</section>
	<section>
		<title>What's in <path>/var/tmp/portage</path>? Is it safe to delete the files and directories in <path>/var/tmp/portage</path>?</title>
		<body>
    <p>
		During compilation, Gentoo saves the sources of the package in <path>/var/tmp/portage</path>. It is safe to clean out all contents of this directory.
    </p>
		</body>
	</section>
</chapter>

<chapter>
	<title>Usage</title>
	<section>
    		<title>I have installed openssh on my box, but can only log in as root - my normal user
		account doesn't work. </title>
    		<body>
		<p>
		This is most probably because your user account doesn't have a valid shell specified. Check
		for your user entry in 
		<path>/etc/passwd</path> and see if it ends in /bin/bash (or any other shell). If it doesn't,
		you must set a shell for the user. This is done using the usermod command, like this ;
		</p>
		<pre># <i>usermod -s /bin/bash myuser</i></pre>
		</body>
	</section>
	
	<section>
		<title>I can start X applications as root only.</title>
		<body><p>Your <path>/tmp</path> directory has the wrong permissions (it needs the sticky bit 
		set). Type the following as root:</p>
		<pre># <i>chmod 1777 /tmp</i></pre>
		</body>
	</section>

	<section>
		<title>How do I set up an International Keyboard Layout?</title>
		<body><p>Edit the <c>KEYMAP</c> variable in <path>/etc/rc.conf</path>.
		Then either reboot or restart the keymaps script:
		<c>/etc/init.d/keymaps restart</c>.</p>
		</body>
	</section>

	<section>
		<title>DNS name resolution works for root only.</title>
		<body><p><path>/etc/resolv.conf</path> has the wrong permissions; <c>chmod</c> it as follows:
		</p>
		<pre># <i>chmod 0644 /etc/resolv.conf</i></pre>
		</body>
	</section>

	<section>
		<title>Why is KDE not reading <path>/etc/profile</path>?</title>
		<body><p>You need to add <c>--login</c> to the first line in <path>/opt/kde2.1/bin/startkde
		</path>, so that it reads as follows:</p>
		<pre>#!/bin/sh --login</pre>
		<p>This fix has been added to recent versions of KDE.</p>
		</body>
	</section>

	<section>
		<title>Why can't my user use their own crontab?</title>
		<body><p>You need to add that user to the <i>cron</i> group.
		</p>
		</body>
	</section>

    <section>
        <title>How do I get numlock to start on boot?</title>
        <body>
        <p>
        If you log on graphically, or want numlock to be activated when 
        you issue <c>startx</c>, then you must <c>emerge numlockx</c> and
        add <c>/usr/X11R6/bin/numlockx</c> to 
        <path>/etc/X11/xinit/xinitrc</path> (for <c>startx</c>) or 
        <path>/etc/X11/Sessions/</path> (for any graphical login manager) such
        as <path>/etc/X11/Sessions/Gnome</path> for GDM.
        </p>
        <p>
        If you work in commandline, you only need to <c>rc-update add 
        numlock default</c> and numlock will be activated on the next
        reboot.
        </p>
        </body>
    </section>
    <section>
        <title>How do I have my terminal cleared when I log out?</title>
        <body>
        <p>
        To have your terminal cleared, add <c>clear</c> to your
        <path>~/.bash_logout</path> script:
        </p>
        <pre caption = "Clearing the terminal during logout">
$ <i>echo clear &gt;&gt; ~/.bash_logout</i></pre>
        <p>
        If you want this to happen automatically when you add a new
        user, do the same for the <path>/etc/skel/.bash_logout</path>:
        </p>
        <pre caption = "Making new users their terminal clear on logout">
# <i>echo clear &gt;&gt; /etc/skel/.bash_logout</i></pre>
        </body>
    </section>
   

</chapter>

<chapter>
	<title>Maintenance</title>
	<section>
		<title>ReiserFS and filesystem corruption issues -- how to fix'em, etc</title>
		<body>
		<p>
		If your
		ReiserFS partition is corrupt, try booting the Gentoo 
		Linux boot CD and run <c>reiserfsck --rebuild-tree</c> on
		the corrupted filesystem.  This should make the filesystem consistent
		again, although you may have lost some files or directories due
		to the corruption.
		</p>
		</body>
	</section>
<!-- is this still relevant? -cpm -->
	<section>
		<title>How to I view the timestamps in /var/log/syslog.d, etc. on a pre-1.0_rc5 Gentoo 
		system?</title>
		<body>
		<p>To view multilog (Gentoo Linux 1.0_rc5 and earlier) timestamps, you need to pipe the 
		current log through the <c>tai64nlocal</c>command:</p>

<pre>
# <i>tai64nlocal &lt; /var/log/syslog.d/current | less</i>
</pre>

<p>Or, alternatively, if you want to "tail" the log:</p>

<pre>
# <i>tail -f /var/log/syslog.d/current | tai64nlocal</i>
</pre>

</body>
	</section>
  <section>
  <title>Metalogd doesn't log in real time!</title>
  <body>
  
<p>
Metalog flushes output to the disk in blocks, so messages aren't immediately 
recorded into the system logs.  If you are trying to debug a daemon, this 
performance-enhancing behavior is less than helpful.  When your Gentoo Linux 
system is up and running, you can send metalog a USR1 signal to temporarily 
turn off this message buffering (meaning that <c>tail -f 
<path>/var/log/everything/current</path></c> will now work in real time, as 
expected) and a USR2 signal to turn buffering back on again. If you want to 
disable buffering permanently, you can change METALOG_OPTS="-B" to 
METALOG_OPTS="-B -s" in <path>/etc/conf.d/metalog</path>. 
</p>

<pre caption="Turning metalog buffering on/off">
<codenote>To turn the buffering off:</codenote>
# <i>killall -USR1 metalog</i>
<codenote>To turn the buffering back on:</codenote>
# <i>killall -USR2 metalog</i>
</pre>

  </body>
  </section>
</chapter>

<chapter>
	<title>Development</title>
	<section>
		<title>Where can I report bugs?</title>
		<body><p>For bugs within a specific program, contact the program's author. Otherwise, use our
		Bugzilla bug tracker at <uri>http://bugs.gentoo.org</uri>.  You can also visit us in
		<c>#gentoo</c> on the <uri link="http://www.freenode.net">FreeNode</uri> IRC network.
		</p></body>
	</section>

	<section>
		<title>How often are new releases made?</title>
		<body><p>New releases are announced on the <uri link="http://www.gentoo.org/main/en/lists.xml">gentoo-announce</uri> 
		mailing list<!-- TODO: approximatley every X months -->, In reality the packages themselves 
		are updated shortly after the main authors release new code. As for when new Cd images etc
		are released, that tends to be whenever there are any major updates to the base code, or when
		new modules get added.</p></body>
	</section>

	<section>
		<title>I would like a package to be added to Portage; how would I go about this?</title>
		<body><p>Head over to <uri>http://bugs.gentoo.org</uri> and submit a new bug of the type
		"ebuild".  Attach your ebuild to the bug report.</p></body>
	</section>

	<section>
		<title>How can I add a question or answer to this FAQ?</title>
		<body><p>Submit a new bug over at <uri>http://bugs.gentoo.org</uri> and add it to the
		"Docs-user" product, "Gentoo Linux FAQ" component.</p></body>
	</section>

	<section>
		<title>make -f Makefile.cvs on a KDE app produces "invalid unused variable" errors</title>
		<body><p>
		Export <c>WANT_AUTOMAKE_1_4=1</c> for all KDE projects before running 
		<c>make -f Makefile.cvs</c>. Also, for KDE2 apps export <c>WANT_AUTOCONF_2_1=1</c>, 
		and for KDE3 apps export <c>WANT_AUTOCONF_2_5=1</c>.
		</p></body>
	</section>


	<section>
   		<title>My speaker beeps like crazy while compiling Mozilla. How do I disable console beeps?
    		</title>
    	<body>
        <p>
            Console beeps can be turned off using setterm, like this ;

        <pre># <i>setterm -blength 0</i></pre>

            If you would like to turn off the console beeps on boot
            you need to put this command in  
            <path>/etc/conf.d/local.start</path>. However, this only
            disables beeps for the current terminal. To disable
            beeps for other terminals, pipe the command output to the 
            target terminal, like this ;

        <pre># <i>setterm -blength 0 >/dev/vc/1</i></pre>

            You need to replace /dev/vc/1 with the terminal
            you would like to disable console beeps for.
        </p>
    	</body>
	</section>
</chapter>

<chapter>
<title>Resources</title>
	<section>
		<title>Where can I find more about supervise used by default in Gentoo Linux 1.0_rc5 and earlier?</title>
		<body><p><!-- TODO: --><uri>http://cr.yp.to/daemontools.html</uri></p></body>
	</section>

	<section>
		<title>Where can I find more information about Gentoo Linux?</title>
		<body><p>The official Gentoo documentation can be found on <uri>http://www.gentoo.org</uri>; general Linux information is at <uri>http://www.tldp.org</uri>.</p></body>
	</section>

<section>
<title>Can I buy a CD of Gentoo Linux?</title>
<body>

<p>Yes! LiveCDs for all supported architecture are available on
our <uri link="http://store.gentoo.org/">Gentoo Store</uri>. When you
purchase a CD from our store, you are also supporting our development.
So, please consider buying from our store if possible :-)
</p>

<p>
You can also find fresh CDs from
<uri link = "http://cart.cheapbytes.com/cgi-bin/cart/0070010933">Cheapbytes
</uri> and <uri link = "http://www.tuxcds.com/section.php?section=42">
tuxcds</uri> for a very good price. These people also bounce back a
portion of the profits to the Gentoo project, so buy them while they are hot!
</p>

</body>
</section>

	<section>
		<title>Why, when I hit reply to a post on a Gentoo mailing list, does my answer 
		only go to the original poster and not the entire list?</title>
		<body>
		<p>The mailing list administrators have decided to go with minimal munging 
		(altering of mail headers), which means that they have decided against  
		altering headers to have replies go to the mailing list.  There are various 
		reasons for this. For example, if a subscriber has a full mailbox, the 
		entire list receives notice of this every time that something is posted.  

		Most GUI based mailers have a "reply to all" function. This will ensure that 
		your reply goes to the mailing list as well as the original poster. Most 
		users of text based emailers already know the methods to use, but if you 
		don't, in Pine, there is a "reply to group" option.  Setting Mutt to reply to 
		the list is covered in the unofficial documentation at
		<uri link="http://forums.gentoo.org/viewtopic.php?t=1085">forums.gentoo.org</uri>.

		Some list members do not like this method, but it was very heavily 
		discussed when it went into effect, with arguments on both sides.  
		Eventually the list administrators decided to keep it this way. Discussing 
		it on the mailing list will sometimes bring a polite explanation and other 
		times a rather brusque comment to check the archives. Although the 
		administrators regret the inconvenience that it may cause some users, it is 
		felt that at present it is preferable to the alternative for several 
		reasons, many of these covered
		<uri link="http://www.unicom.com/pw/reply-to-harmful.html">here</uri>.  

		 (There are other eloquent arguments in favor of munging, and yes, the list 
		 administrators have seen them.) </p>
		 </body>
		 </section>

	<section>
		<title>This FAQ hasn't answered my question.  What do I do now?</title>
		<body>
		<p>A good first step is to browse through the relevant <uri link="http://www.gentoo.org/doc/en/index.xml">documentation</uri>, 
		failing that, the various Gentoo Linux mailing
		lists listed on <uri link="http://www.google.com">Google</uri>.  To search through the Gentoo mailling lists, 
		just enter "lists.gentoo.org foo" to search for "foo".  If all else fails, or you just want
		to hang out with Gentoo folks, visit us on irc: <i>#gentoo</i>
		on <i>irc.freenode.net</i>.
		</p>
		</body>
	</section>
</chapter>
</guide>
