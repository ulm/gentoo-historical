<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/draft/Attic/pda-guide.xml,v 1.1 2007/10/06 15:49:54 swift Exp $ -->

<guide link="/doc/en/draft/pda-guide.xml" lang="en">
<title>Gentoo PDA Guide</title>

<author title="Author">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Author">
  <mail link="chriswhite@gentoo.org">Chris White</mail>
</author>

<abstract>
Nowadays, personal digital assistants, or PDAs, are quite popular. Not only do
they provide more features than before, they are also easy to handle, even by
people who aren't that computer literate. But how can you synchronise these PDAs
with your Gentoo Linux installation if they are almost all running Windows
Mobile?
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->
<license/>

<version>1.0</version>
<date>2007-09-27</date>

<chapter>
<title>Setting up PDA Support</title>
<section>
<title>Introduction</title>
<body>

<p>
PDAs are everywhere. They are an evolution of the paper journals and address
books and have become very feature-rich: addresses and telephone numbers,
pictures and movies, small spreadsheets or documents, calender entries, ...
anything is possible with PDAs. And thanks to wireless technology, PDAs can
manipulate or receive data from various devices (like GPS devices or other PDAs)
or join the world-wide Internet.
</p>

<p>
However, most PDAs run a propriatary operating system and might not be easy to
synchronise with your computer if you are not running software of the same
vendor. Luckily, the free software community has made serious efforts in reverse
engineering access to the PDAs and some companies have even opened their
specification to connect with the PDA. This guide will cover accessing and
synchronizing PDAs with your system.
</p>

</body>
</section>
<section>
<title>Kernel Setup</title>
<body>

<p>
The first thing we need to do is get the kernel to recognize our device. Open up
the kernel configuration (for instance, through <c>make menuconfig</c>) and add
support for your PDA. If your device uses USB to connect to a computer you will
most likely find support for it under <e>Device Drivers -&gt; USB support -&gt;
USB Serial Converter support</e>. For instance, iPAQ users (and many others) can
use the <e>USB PocketPC PDA Driver</e>.
</p>

<pre caption="Kernel Driver Setup">
&lt;M&gt; USB Serial Converter support
[ ]   USB Serial Console device support (EXPERIMENTAL)
[ ]   USB Generic Serial Driver
&lt; &gt;   USB Belkin and Peracom Single Port Serial Driver
&lt; &gt;   USB ConnectTech WhiteHEAT Serial Driver
&lt; &gt;   USB Digi International AccelePort USB Serial Driver
&lt; &gt;   USB Cypress M8 USB Serial Driver
&lt; &gt;   USB Empeg empeg-car Mark I/II Driver
&lt; &gt;   USB FTDI Single Port Serial Driver (EXPERIMENTAL)
&lt; &gt;   USB Handspring Visor / Palm m50x / Sony Clie Driver
&lt;M&gt;   USB PocketPC PDA Driver
</pre>

<p>
You might wonder why it is called a <e>Serial Converter</e>. This is because you
are going to use USB (technology) to talk with your device, even though the
device itself is accessed using a serial protocol.
</p>

<p>
You will also need asynchronous PPP support:
</p>

<pre caption="Kernel Driver Setup for Async PPP">
Device Drivers ---&gt;
  Network device support ---&gt;
    &lt;M&gt; PPP (point-to-point protocol) support
      &lt;M&gt; PPP support for async serial ports
</pre>

<p>
Rebuild the kernel and its modules. If you only had to modify a module, you can
install the modules and continue. Otherwise, set up the new kernel in your boot
loader and reboot.
</p>

</body>
</section>
<section>
<title>Detecting Your PDA</title>
<body>

<p>
Ok, now that we have the kernel module setup, let's go ahead and get some
information.  Plug in your device and take a look at your modules list if
you have build support for the device as a kernel module:
</p>

<pre caption="Checking if your PDA is detected">
# <i>lsmod</i>
Module                  Size  Used by
ipaq                   30736  0
usbserial              25120  1 ipaq
<comment>(...)</comment>

# <i>dmesg | grep Pocket</i>
drivers/usb/serial/usb-serial.c: USB Serial support registered for PocketPC PDA
drivers/usb/serial/ipaq.c: USB PocketPC PDA driver v0.5
ipaq 3-2:1.0: PocketPC PDA converter detected
usb 3-2: PocketPC PDA converter now attached to ttyUSB0

# <i>ls -la /dev/ttyUSB0</i>
crw-rw---- 1 root uucp 188, 0 Sep 27 19:21 /dev/ttyUSB0
</pre>

<p>
As we can see, the device has been detected and is now accessible through
<path>/dev/ttyUSB0</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Setting Up SynCE</title>
<section>
<title>Introduction</title>
<body>

<p>
<uri link="http://www.synce.org">SynCE</uri> is the tool you can use to connect
to and work with Windows Mobile and Windows CE powered devices. The tool
connects, through the device set up earlier, to the device and allows
applications to synchronise appointments, addresses and more.
</p>

<p>
A list of devices supported through SynCE can be found on the
<uri link="http://www.synce.org">SynCE website</uri>.
</p>

<p>
SynCE is not available through a stable ebuild though, so before installing it,
you will first need to mark them in <path>/etc/portage/package.keywords</path>.
</p>

<pre caption="List of packages to list in package.keywords">
app-pda/synce
app-pda/synce-software-manager
app-pda/synce-librapi2
app-pda/synce-libsynce
app-pda/synce-multisync_plugin
app-pda/synce-rra
dev-libs/libmimedir
app-pda/synce-dccm
app-pda/synce-trayicon
app-pda/orange
app-pda/dynamite
app-pda/synce-kde
app-pda/synce-gnomevfs
app-pda/synce-serial
</pre>

<p>
Then, install the <c>app-pda/synce</c> package to obtain the necessary tools.
</p>

</body>
</section>
<section>
<title>Configuring the PDA</title>
<body>

<p>
The next task is to configure the serial device we found earlier
(<path>/dev/ttyUSB0</path> in our example) to be used with SynCE:
</p>

<pre caption="Configuring the serial device for SynCE">
~# <i>synce-serial-config ttyUSB0</i>

You can now run synce-serial-start to start a serial connection.
</pre>

<p>
Now, log on as the user who will be using the PDA and run the <c>dccm</c>
command. This tool is the connection manager for SynCE through which programs
connect to the device.
</p>

<pre caption="Launching the connection manager">
~$ <i>dccm</i>
</pre>

<p>
As root again, run <c>synce-serial-start</c> which will connect to the device.
With some PDAs, you will notice this on the PDA itself through a synchronisation
symbol or any other event.
</p>

<pre caption="Running synce-serial-start">
~# <i>synce-serial-start</i>
</pre>

<p>
TOD In some cases, the first attempts fail but this isn't shown immediately. You
can rerun the command a few times until the command replies that a serial
connection is already started. To verify that the connection is done, check if a
ppp interface (like ppp0) is created and has an IP address attached to it.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Working With Your PDA</title>
<section>
<title>File Navigation and Manipulation</title>
<body>

<p>
The SynCE project provides a number of programs to communicate with the PDA and
exchange files. The tools have similar namings as on a regular Unix system but
with a <c>p</c> prepended to it: <c>pcp</c>, <c>pls</c>, <c>pmv</c>, <c>prm</c>,
<c>pmkdir</c>, <c>prmdir</c>. Other tools are specific for PDAs, like
<c>prun</c> to launch a program, <c>synce-install-cab</c> to install a CAB file
or <c>pstatus</c> to display information about the device.
</p>

</body>
</section>
</chapter>

</guide>
