<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/handbook/Attic/hb-working-othertools.xml,v 1.2 2003/12/14 14:13:00 swift Exp $ -->

<sections>
<section>
<title>Gentoolkit</title>
<subsection>
<title>Introduction</title>
<body>

<p>
The <c>gentoolkit</c> package is a collection of unofficial yet very handy
administration scripts for Gentoo. The collection contains the following tools:
</p>

<ul>
  <li><c>qpkg</c> to ease querying the package database</li>
  <li>
    <c>dep-clean</c> to manage orphaned packages or non-existing dependencies
  </li>
  <li>
    <c>revdep-rebuild</c> rebuilds dependencies in case a global change has been
    made
  </li>
  <li>
    <c>etcat</c> provides much more information about the package, including
    a description about the used USE-flags, dependencies, etc.
  </li>
  <li><c>euse</c> to manage your USE-flag settings</li>
</ul>

<p>
Most of these tools have a nice manual page; please use it to understand the
full potential of the tool. In the next sections we will briefly discuss some of
the features of the tools.
</p>

<p>
To install <c>gentoolkit</c>, simply emerge it:
</p>

<pre caption="Installing gentoolkit">
# <i>emerge gentoolkit</i>
</pre>

</body>
</subsection>
<subsection>
<title>qpkg - Query Packages</title>
<body>

<p>
<c>qpkg</c> has many query features. You can search for the package that owns a
certain file, list the content of a package, verify the files owned by that
package, list the installed packages depending on a given package and more.
</p>

<p>
Let us give you a couple of examples. First, we search for the package that owns
the file <path>/usr/lib/libbonobo-2.so</path>.
</p>

<pre caption="Searching for a package that owns a certain file">
$ <i>qpkg --find-file /usr/lib/libbonobo-2.so</i>
gnome-base/libbonobo *
</pre>

<p>
Now that we know the owner, let us take a look at the files the package
provides:
</p>

<pre caption="Viewing the contents of a package">
$ <i>qpkg --list libbonobo</i>
gnome-base/libbonoboui-2.4.0 *
CONTENTS:
/var
/var/lib
/usr
/usr/lib
/usr/lib/libbonoboui-2.so.0.0.0
/usr/lib/libbonoboui-2.so.0 -> libbonoboui-2.so.0.0.0
/usr/lib/libbonoboui-2.so -> libbonoboui-2.so.0.0.0
<comment>(Remaining output removed to improve readability)</comment>
</pre>

<p>
To verify the files provided by the <c>libbonobo</c> package (i.e. check the
modification time and checksums) we use the <c>--check</c> argument:
</p>

<pre caption="Verify the libbonobo package">
# <i>qpkg --check libbonobo</i>
gnome-base/libbonobo-2.4.0 *
0/402
</pre>

<p>
In the previous example, <c>libbonobo</c> has 402 files of which none have been
changed since the installation. Now let us take a look at what installed
packages depend on <c>libbonobo</c>:
</p>

<pre caption="Checking the dependencies">
$ <i>qpkg --query-deps libbonobo</i>
gnome-base/libbonobo-2.4.0 *
DEPENDED ON BY:
        gedit-2.4.0
        gnome-panel-2.4.0-r1
        gnome-vfs-2.4.0
        libbonoboui-2.4.0
        libgnome-2.4.0
        libgnomeprint-1.116.1
        libgnomeui-2.4.0.1
        at-spi-1.1.8
        bug-buddy-2.4.0
        gnome-media-2.4.0
        gnome-utils-2.4.0
        libgsf-1.8.2
        yelp-2.4.0
        eog-2.4.0
        evolution-1.4.5
        gnome-cups-manager-0.17
        epiphany-1.0
</pre>

<p>
More information on <c>qpkg</c> is available in the man page:
</p>

<pre caption="Viewing qpkg's man page">
$ <i>man qpkg</i>
</pre>

</body>
</subsection>
<subsection>
<title>dep-clean</title>
<body>

<p>
With <c>dep-clean</c> you can view the dependencies that aren't
right. By default, <c>dep-clean</c> shows you:
</p>

<ul>
  <li>(in red): missing dependencies</li>
  <li>(in yellow): installed packages that have been removed from Portage</li>
  <li>
    (in green): installed packages that you haven't installed manually and
    that aren't depended on by other packages
  </li>
</ul>

<pre caption="Running dep-clean">
$ <i>dep-clean</i>
</pre>

<p>
More information on <c>dep-clean</c> can be found in the man page:
</p>

<pre caption="Viewing the dep-clean man page">
$ <i>man dep-clean</i>
</pre>

</body>
</subsection>
<subsection>
<title>revdep-rebuild</title>
<body>

<p>
With <c>revdep-rebuild</c> you can rebuild packages that broke when you updated
a library that had incompatible ABIs with its previous version. 
</p>

<p>
<brite>TODO: Add more information -- I don't know anything about this.</brite>
</p>

</body>
</subsection>
</section>
</sections>
