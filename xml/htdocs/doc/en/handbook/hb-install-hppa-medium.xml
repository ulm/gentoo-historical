<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/handbook/hb-install-hppa-medium.xml,v 1.10 2004/06/16 15:39:37 neysx Exp $ -->

<sections>
<section>
<title>Hardware Requirements</title>
<subsection>
<title>Introduction</title>
<body>

<p>
Before we start, we first list what hardware requirements you need to
successfully install Gentoo on your box. This of course depends on your
architecture.
</p>

</body>
</subsection>
<subsection>
<title>The HPPA Architecture</title>
<body>

<p>
Check the following requirements before you
continue with the Gentoo installation:
</p>

<ul>
<li>
  You need at least 1 Gb of free disk space
</li>
<li>
  For the <e>hppa architecture</e>, you should check with the <uri 
  link="http://www.pateam.org">PA Team website</uri>
</li>
</ul>

</body>
</subsection>
</section>
<section>
<title>Make your Choice</title>
<subsection>
<title>Introduction</title>
<body>

<p>
Still interested in trying out Gentoo? Well, then it is now time to
choose the installation medium you want to use. Yes, you have the
choice, no, they are not all equal, and yes, the result is always the same: a
Gentoo base system.
</p>

<p>
The installation media we will describe are:
</p>

<ul>
<li>The Gentoo HPPA LiveCD</li>
</ul>

<p>
Before we continue, let's explain our three-stage installation.
</p>

</body>
</subsection>
<subsection>
<title>The Three Stages</title>
<body>

<p>
Gentoo Linux can be installed using one of three <e>stage</e> tarball files.
The one you choose depends on how much of the system you want to compile
yourself. The <e>stage1</e> tarball is used when you want to bootstrap and
build the entire system from scratch. The <e>stage2</e> tarball is used for
building the entire system from a bootstrapped &quot;semi-compiled&quot; state.
The <e>stage3</e> tarball already contains a basic Gentoo Linux system that has
been built for you. As we will explain later, you can also install
Gentoo without compiling anything (except your kernel and some optional 
packages). If you want this, you have to use a <e>stage3</e> tarball.
</p>

<p>
Now what stage do you have to choose?
</p>

<p>
Starting from a <e>stage1</e> allows you to have total control over the
optimization settings and optional build-time functionality that is
initially enabled on your system. This makes <e>stage1</e> installs good for
power users who know what they are doing. It is also a great
installation method for those who would like to know more about the
inner workings of Gentoo Linux.
</p>

<p>
A <e>stage1</e> installation can only be performed when you have a working
Internet connection.
</p>

<table>
<tr>
  <th>Stage1</th>
  <th>Pros and Cons</th>
</tr>
<tr>
  <th>+</th>
  <ti>
    Allows you to have total control over the optimization settings and optional
    build-time functionality that is initially enabled on your system
  </ti>
</tr>
<tr>
  <th>+</th>
  <ti>Suitable for powerusers that know what they are doing</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Allows you to learn more about the inner workings of Gentoo</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Takes a long time to finish the installation</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    If you don't intend to tweak the settings, it is probably a waste of time
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Not suitable for networkless installations
  </ti>
</tr>
</table>

<p>
<e>Stage2</e> installs allow you to skip the bootstrap process and doing this
is fine if you are happy with the optimization settings that we chose
for your particular <e>stage2</e> tarball.
</p>

<p>
A <e>stage2</e> installation can only be performed when you have a working
Internet connection.
</p>

<table>
<tr>
  <th>Stage2</th>
  <th>Pros and Cons</th>
</tr>
<tr>
  <th>+</th>
  <ti>You don't need to bootstrap</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Faster than starting with stage1</ti>
</tr>
<tr>
  <th>+</th>
  <ti>You can still tweak your settings</ti>
</tr>
<tr>
  <th>-</th>
  <ti>You cannot tweak as much as with a stage1</ti>
</tr>
<tr>
  <th>-</th>
  <ti>It's not the fastest way to install Gentoo</ti>
</tr>
<tr>
  <th>-</th>
  <ti>You have to accept the optimizations we chose for the bootstrap</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Not suitable for networkless installations
  </ti>
</tr>
</table>

<p>
Choosing to go with a <e>stage3</e> allows for the fastest install of Gentoo
Linux, but also means that your base system will have the optimization
settings that we chose for you (which to be honest, are good settings
and were carefully chosen to enhance performance while maintaining
stability). <e>stage3</e> is also required if you want to install Gentoo using
prebuilt packages or without a network connection.
</p>

<table>
<tr>
  <th>Stage3</th>
  <th>Pros and Cons</th>
</tr>
<tr>
  <th>+</th>
  <ti>Fastest way to get a Gentoo base system</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Suitable for networkless installations</ti>
</tr>
<tr>
  <th>-</th>
  <ti>You cannot tweak the base system - it's built already</ti>
</tr>
<tr>
  <th>-</th>
  <ti>You cannot brag about having used stage1 or stage2</ti>
</tr>
</table>

<p>
Write down (or remember) what stage you want to use. You need this later when
you decide what LiveCD (or other installation medium) you want to use. You might
be interested to know that, if you decide to use different optimization settings
after having installed Gentoo, you will be able to recompile your entire system
with the new optimization settings.
</p>

<p>
Now take a look at the available installation media.
</p>

</body>
</subsection>
<subsection>
<title>Gentoo LiveCDs</title>
<body>

<p>
The <e>Gentoo LiveCDs</e> are bootable CDs which contain a
self-sustained Gentoo environment. They allow you to boot Linux from the CD.
During the boot process your hardware is detected and the appropriate drivers
are loaded. They are maintained by Gentoo developers.
</p>

<p>
All LiveCDs allow you to boot, setup networking, initialize your
partitions and start installing Gentoo from the Internet. However, some
LiveCDs also contain all necessary source code so you are able to install 
Gentoo without a working network configuration.
</p>

<p>
Now what does this LiveCD contain?
</p>

</body>
</subsection>
<subsection>
<title>The Gentoo HPPA LiveCD</title>
<body>

<p>
This is a small, no-nonsense, bootable CD which sole purpose is to boot the 
system, prepare the networking and continue with the Gentoo installation. It 
does not contain any stages (or, in some cases, a single stage1 file), 
source code or precompiled packages. For example the hppa variant of this 
LiveCD can be found in the <path>experimental/hppa/livecd</path> subdirectory 
and is called <c>livecd-hppa-beta_04.iso</c>.
</p>

</body>
</subsection>
</section>
<section>
<title>Download, Burn and Boot a Gentoo LiveCD</title>
<subsection>
<title>Downloading and Burning the LiveCDs</title>
<body>

<p>
You have chosen to use a Gentoo LiveCD (if not, then you are reading the
wrong section). We'll first start by downloading and burning the chosen
LiveCD. We previously discussed the several available LiveCDs, but where can you
find them? 
</p>

<p>
Visit one of our <uri
link="/main/en/mirrors.xml">mirrors</uri> and go to
<path>experimental/hppa/livecd</path> which is
the path where the LiveCD(s) of your choice are located. Inside that
directory you'll find so-called ISO-files. Those are full CD images
which you can write on a CD-R.
</p>

<p>
In case you wonder if your downloaded file is corrupted or not, you can
check its MD5 checksum and compare it with the MD5 checksum we provide (such as
<path>install-x86-minimal-2004.0.iso.md5</path>). You can check the MD5 checksum
with the <c>md5sum</c> tool under Linux/Unix or <uri
link="http://www.md5summer.org">md5summer</uri> for Windows.
</p>

<p>
Another way to check the validity of the downloaded file is to use GnuPG to
verify the cryptographic signature that we provide (the file ending with
<path>.asc</path>). Download the signature file and obtain the public key:
</p>

<pre caption="Obtaining the public key">
$ <i>gpg --keyserver pgp.mit.edu --recv-keys 19462D47</i>
</pre>

<p>
Now verify the signature:
</p>

<pre caption="Verify the cryptographic signature">
$ <i>gpg --verify &lt;signature file&gt; &lt;downloaded iso&gt;</i>
<comment>(If everything goes well, you should see something like this:)</comment>
gpg: Signature made Mon Apr 19 18:54:40 2004 EDT using DSA key ID 19462D47
gpg: Good signature from "John Davis (Gentoo Linux Developer) &lt;zhen@gentoo.org&gt;"
gpg:                 aka "Gentoo Linux Release Engineering &lt;releng@gentoo.org&gt;"
</pre>

<p>
To burn the downloaded ISO(s), you have to select raw-burning. How you
do this is highly program-dependent. We will discuss a couple of popular
tools on how to do this.
</p>

<ul>
  <li>
    With EasyCD Creator you select <c>File</c>, <c>Record CD
    from CD image</c>. Then you change the <c>Files of type</c> to <c>ISO image
    file</c>. Then locate the ISO file and click <c>Open</c>. When you click on
    <c>Start recording</c> the ISO image will be burned correctly onto the CD-R.
  </li>
  <li>
    With Nero Burning ROM, select <c>File</c>, <c>Burn CD image</c>. Set the
    type of file to <c>*.*</c> and select the ISO file. Older versions of Nero
    will tell you they don't recognize the format -- confirm here, it does
    recognize it but doesn't know it yet :) In the next dialog, set the
    following parameters:
    <ul>
      <li>Type of image: <c>Data Mode 1</c></li>
      <li>Block size: <c>2048 bytes</c></li>
      <li>File precursor and length of the image trailer: <c>0 bytes</c></li>
      <li>Scrambled: <c>no</c></li>
      <li>Swapped: <c>no</c></li>
    </ul>
    Now click on <c>OK</c> and then <c>Burn</c> (the CD-R)
  </li>
  <li>
    With cdrecord, you simply type <c>cdrecord dev=/dev/hdc</c> (replace
    <path>/dev/hdc</path> with your CD-RW drive's device path) followed
    by the path to the ISO file :)
  </li>
  <li>
    With K3B, select <c>Tools</c> &gt; <c>CD</c> &gt; <c>Burn Image</c>. Then
    you can locate your ISO file within the 'Image to Burn' area. Finally click
    <c>Start</c>.
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>Booting the HPPA LiveCD(s)</title>
<body>

<p>
Boot your HPPA system. During the boot process, you will see a message similar
to the following:
</p>

<pre caption="HPPA boot message">
Searching for Potential Boot Devices.
To terminate search, press and hold the ESCAPE key.
</pre>

<p>
When this message appears, press and hold the Esc-key until an option menu
appears. This can take a while, be patient. By default, you should enter the
BOOT_ADMIN console. If you receive an option menu, choose <c>Enter Boot
Administration mode</c> to enter the BOOT_ADMIN console. You should now have an
'&gt;' prompt.
</p>

<p>
Put the Gentoo LiveCD in the CD-ROM. If you do not know the SCSI ID of your
CD-ROM drive, your PA-RISC station will search for it when you issue the 
<c>search</c> command.
</p>

<pre caption="Searching for SCSI ID">
&gt; <i>search</i>
Searching for Devices with Bootable Media.
To terminate search, please press and hold the ESCAPE key.
</pre>

<p>
Your PA-RISC station will now display all the available boot media. This is an
example result of this command:
</p>

<pre caption="Available boot media">
Device Selection      Device Path             Device Type and Utilities
---------------------------------------------------------------------------

P0                    scsi.5.0                TOSHIBA CD-ROM XM-3301TA
                                                  IPL
P1                    scsi.2.0                COMPAQ ST32550N
                                                  IPL
P2                    lan.0010a7-06d1b6.3.6   server
                                                  IPL
</pre>

<p>
To boot from a CD-ROM you need the accompanying Device Path. For instance, if we
want to boot from the TOSHIBA CD-ROM in the above example, we would need to type
the following command:
</p>

<pre caption="Booting from a CD-ROM">
&gt; <i>boot scsi.5.0 ipl</i>

Trying scsi.5.0
</pre>

<p>
The <c>ipl</c> keyword (Initial Program Loader) tells palo (the PA-RISC boot
LOader) to enter interactive mode. This will allow you to change, for example,
the kernel boot parameters.
</p>

<p>
When the boot is successful, palo will start in interactive mode:
</p>

<pre caption="PALO Interactive Mode">
Boot path initialized.
Attempting to load IPL.


Hard booted.
palo ipl 1.2 root@b180l.da-kot Tue Apr  8 12:43:07 CEST 2003

Boot image contains:
    0/vmlinux32 4028015 bytes @ 0x1520000
    0/ramdisk 834748 bytes @ 0xf800
Current command line:
0/vmlinux initrd=initrd.gz TERM=linux console=tty root=/dev/ram0 init=/linuxrc
  0: 0/vmlinux
  1: initrd=initrd.gz
  2: TERM=linux
  3: console=tty
  4: root=/dev/ram0
  5: init=/linuxrc

Edit which field?
(or 'b' to boot with this command line)? 
</pre>

<p>
These parameters are suitable for most situations.
</p>

<p>
If you need extra features you must add the appropriate keyword(s) to the end of
the command line. To add a keyword, edit the last field, add a space and type 
your keyword. The only implemented keyword as of now is <c>cdcache</c> which 
tells the LiveCD to load itself into RAM, allowing you to unmount the CD.
</p>

<pre caption="Adding cdcache as boot option">
(or 'b' to boot with this command line)? <i>5</i>
init=/linuxrc <i>cdcache</i>
</pre>

<p>
Now that you have tweaked your kernel boot params, boot it.
</p>

<pre caption="Booting the kernel">
(or 'b' to boot with this command line)? <i>b</i>
</pre>

<p>
You should have a root ("#") prompt on the current console and can also switch
to other consoles by pressing Alt-F2, Alt-F3 and Alt-F4. Get back to the one you
started on by pressing Alt-F1.
</p>

<p>
Now continue with <uri link="#hardware">Extra Hardware 
Configuration</uri>.
</p>

</body>
</subsection>
<subsection id="hardware">
<title>Extra Hardware Configuration</title>
<body>

<p>
Most hppa machines have an onboard ethernet card. Old ones use use the lasi
driver which is compiled in the kernel. Newer ones need the tulip driver which
is compiled as a module. To use the latter, you need to load its driver.
</p>

<p>
In the next example, we try to load the <c>tulip</c> module (support for 
certain kinds of network interfaces):
</p>

<pre caption="Loading kernel modules">
# <i>modprobe tulip</i>
</pre>

</body>
</subsection>

<subsection>
<title>Optional: User Accounts</title>
<body>

<p>
If you plan on giving other people access to your installation
environment or you want to chat using <c>irssi</c> without root privileges (for
security reasons), you need to create the necessary user accounts and change 
the root password.
</p>

<p>
To change the root password, use the <c>passwd</c> utility:
</p>

<pre caption="Changing the root password">
# <i>passwd</i>
New password: <comment>(Enter your new password)</comment>
Re-enter password: <comment>(Re-enter your password)</comment>
</pre>

<p>
To create a user account, we first enter their credentials, followed by
its password. We use <c>useradd</c> and <c>passwd</c> for these tasks.
In the next example, we create a user called &quot;john&quot;.
</p>

<pre caption="Creating a user account">
# <i>useradd john</i>
# <i>passwd john</i>
New password: <comment>(Enter john's password)</comment>
Re-enter password: <comment>(Re-enter john's password)</comment>
</pre>

<p>
You can change your user id from root to the newly created user by using
<c>su</c>:
</p>

<pre caption="Changing user id">
# <i>su john -</i>
</pre>

</body>
</subsection>
<subsection>
<title>Optional: Starting the SSH Daemon</title>
<body>

<p>
If you want to allow other users to access your computer during the
Gentoo installation (perhaps because those users are going to help you
install Gentoo, or even do it for you), you need to create a user
account for them and perhaps even provide them with your root password 
(<e>only</e> do that <e>if</e> you <b>fully trust</b> that user).
</p>

<p>
To fire up the SSH daemon, execute the following command:
</p>

<pre caption="Starting the SSH daemon">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
To be able to use sshd, you first need to setup your networking. Continue with
the chapter on <uri link="?part=1&amp;chap=3">Configuring your Network</uri>.
</p>

</body>
</subsection>
</section>
</sections>
