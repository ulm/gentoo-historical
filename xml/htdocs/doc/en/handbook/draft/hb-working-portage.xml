<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/handbook/draft/Attic/hb-working-portage.xml,v 1.9 2004/09/24 14:36:05 swift Exp $ -->

<sections>
<section>
<title>Welcome to Portage</title>
<body>

<p>
Portage is probably Gentoo's most notable innovation in software management.
With its high flexibility and enormous amount of features it is frequently seen
as the best software management tool available for Linux.
</p>

<p>
Portage is completely written in <uri link="http://www.python.org">Python</uri>
and <uri link="http://www.gnu.org/software/bash">Bash</uri> and therefore fully
visible to the users as both are scripting languages.
</p>

<p>
Most users will work with Portage through the <c>emerge</c> tool. This chapter
is not meant to duplicate the information available from the emerge man page. 
For a complete rundown of emerge's options, please consult the man page:
</p>

<pre caption="Reading the emerge man page">
$ <i>man emerge</i>
</pre>

</body>
</section>
<section>
<title>The Portage Tree</title>
<subsection>
<title>Ebuilds</title>
<body>

<p>
When we talk about packages, we often mean software titles that are available to
the Gentoo users through the Portage tree. The Portage tree is a collection of
<e>ebuilds</e>, files that contain all information Portage needs to maintain
software (install, search, query, ...). These ebuilds reside in
<path>/usr/portage</path> by default.
</p>

<p>
Whenever you ask Portage to perform some action regarding software titles, it
will use the ebuilds on your system as a base. It is therefore important that
you regularly update the ebuilds on your system so Portage knows about new
software, security updates, etc.
</p>

</body>
</subsection>
<subsection>
<title>Updating the Portage Tree</title>
<body>

<p>
The Portage tree is usually updated with <uri
link="http://rsync.gentoo.org">rsync</uri>, a fast incremental file transfer
utility. Updating is fairly simple as the <c>emerge</c> command provides a
front-end for rsync:
</p>

<pre caption="Updating the Portage tree">
# <i>emerge sync</i>
</pre>

<p>
If you are unable to rsync due to firewall restrictions you can still update
your Portage tree by using our daily generated portage tree snapshots. The
<c>emerge-webrsync</c> tool automatically fetches and installs the latest
snapshot on your system:
</p>

<pre caption="Running emerge-webrsync">
# <i>emerge-webrsync</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Maintaining Software</title>
<subsection>
<title>Searching for Software</title>
<body>

<p>
To search through the Portage tree after software titles, you can use
<c>emerge</c> built-in search capabilities. By default, <c>emerge search</c>
returns package names whos title corresponds with (either fully or partially)
the given search term.
</p>

<p>
For instance, to search for all packages who have "pdf" in their name:
</p>

<pre caption="Searching for pdf-named packages">
$ <i>emerge search pdf</i>
</pre>

<p>
If you want to search through the descriptions as well you can use the
<c>--searchdesc</c> (or <c>-S</c>) switch:
</p>

<pre caption="Searching for pdf-related packages">
$ <i>emerge --searchdesc pdf</i>
</pre>

<p>
When you take a look at the output, you'll notice that it gives you a lot of
information. The fields are clearly labelled so we won't go further into their
meanings:
</p>

<pre caption="Example emerge search output">
*  net-print/cups-pdf
      Latest version available: 1.5.2
      Latest version installed: [ Not Installed ]
      Size of downloaded files: 15 kB
      Homepage:    http://cip.physik.uni-wuerzburg.de/~vrbehr/cups-pdf/
      Description: Provides a virtual printer for CUPS to produce PDF files.
      License:     GPL-2
</pre>

</body>
</subsection>
<subsection>
<title>Installing Software</title>
<body>

<p>
emerge package
</p>

</body>
</subsection>
<subsection>
<title>Removing Software</title>
<body>

<p>
emerge unmerge
</p>

</body>
</subsection>
<subsection>
<title>Updating your System</title>
<body>

<p>
emerge world
</p>

</body>
</subsection>
<subsection>
<title>Stub Packages</title>
<body>

<p>
Packages like kde and using depclean
</p>

</body>
</subsection>
</section>
<section>
<title>When Portage is Complaining...</title>
<subsection>
<title>About SLOTs, Virtuals, Branches and Architectures</title>
<body>

<p>
Introduction to these aspects (usertalk).
</p>

</body>
</subsection>
<subsection>
<title>Blocked Packages</title>
<body>

<p>
unblocking blocked packages
</p>

</body>
</subsection>
<subsection>
<title>Masked Packages</title>
<body>

<p>
Explain what the Portage "all instances of ... have been masked" means.
<e>No</e> solution!
</p>

</body>
</subsection>
</section>
</sections>
