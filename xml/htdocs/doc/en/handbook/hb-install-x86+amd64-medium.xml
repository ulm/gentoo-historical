<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/handbook/hb-install-x86+amd64-medium.xml,v 1.8 2007/05/18 09:49:47 neysx Exp $ -->

<sections>

<abstract>
You can install Gentoo in many ways. This chapter explains how to install
Gentoo using the minimal Installation CD although installation through the
Installer LiveCD is possible as well.
</abstract>

<version>5.1</version>
<date>2007-05-18</date>

<section>
<title>Hardware Requirements</title>
<subsection>
<title>Introduction</title>
<body>

<p>
Before we start, we first list what hardware requirements you need to
successfully install Gentoo on your box. 
</p>

</body>
</subsection>
<subsection>
<title>Hardware Requirements</title>
<body test="func:keyval('arch')='x86'">

<table>
<tr>
 <ti/>
 <th>Minimal CD</th>
 <th>LiveCD</th>
</tr>
<tr>
  <th>CPU</th>
  <ti>i486 or later</ti>
  <ti><b>i686</b> or later</ti>
</tr>
<tr>
  <th>Memory</th>
  <ti>64 MB</ti>
  <ti>256 MB</ti>
</tr>
<tr>
  <th>Diskspace</th>
  <ti colspan="2">1.5 GB (excluding swap space)</ti>
</tr>
<tr>
  <th>Swap space</th>
  <ti colspan="2">At least 256 MB</ti>
</tr>
</table>

</body>
<body test="func:keyval('arch')='AMD64'">

<table>
<tr>
 <ti/>
 <th>Minimal CD</th>
 <th>LiveCD</th>
</tr>
<tr>
  <th>CPU</th>
  <ti colspan="2">Any AMD64 CPU or EM64T CPU</ti>
</tr>
<tr>
  <th>Memory</th>
  <ti>64 MB</ti>
  <ti>256 MB</ti>
</tr>
<tr>
  <th>Diskspace</th>
  <ti colspan="2">1.5 GB (excluding swap space)</ti>
</tr>
<tr>
  <th>Swap space</th>
  <ti colspan="2">At least 256 MB</ti>
</tr>
</table>

<p>
You should check the <uri link="/proj/en/base/amd64/">Gentoo
AMD64 Project Page</uri> before proceeding.
</p>

</body>
</subsection>
</section>
<!-- This part can be propagated to the other architectures as well. -->
<!-- START -->
<section>
<title>The Gentoo Installation CDs</title>
<subsection>
<title>Introduction</title>
<body>

<p>
The <e>Gentoo Installation CDs</e> are bootable CDs which contain a
self-sustained Gentoo environment. They allow you to boot Linux from the CD.
During the boot process your hardware is detected and the appropriate drivers
are loaded. They are maintained by Gentoo developers.
</p>

<p>
All Installation CDs allow you to boot, set up networking, initialize your
partitions and start installing Gentoo from the Internet. We currently provide
two Installation CDs which are equally suitable to install Gentoo from, as long
as you're planning on performing an Internet-based installation using the 
latest version of the available packages.
</p>

<impo>
If you wish to install Gentoo without a working Internet connection, or would
like to use one of the provided installers, please use the installation
instructions described in the <uri link="2007.0/">Gentoo 2007.0
Handbooks</uri>.
</impo>

<p>
The Installation CDs that we currently provide are:
</p>

<ul>
  <li>
    The Gentoo <e>Minimal</e> Installation CD, a small, no-nonsense, bootable 
    CD which sole purpose is to boot the system, prepare the networking and 
    continue with the Gentoo installation.
  </li>
  <li>
    The Gentoo <e>Installer LiveCD</e> contains everything you need to install
    Gentoo. It provides a graphical environment, a graphical as well as console
    based installer which automatically carries out the installation for you,
    and of course, the installation instructions for your architecture.
  </li>
</ul>

<p>
To help you decide which Installation CD you need, we have written down the
major advantages and disadvantages of each Installation CD.
</p>

</body>
</subsection>
<subsection>
<title>Gentoo Minimal Installation CD</title>
<body>

<p>
The Minimal Installation CD is called <c><keyval id="min-cd-name"/></c> and
takes up only <keyval id="min-cd-size"/> MB of diskspace. You can use this
Installation CD to install Gentoo, but <e>only</e> with a working Internet
connection.
</p>

<table>
<tr>
  <th>Minimal Installation CD</th>
  <th>Pros and Cons</th>
</tr>
<tr>
  <th>+</th>
  <ti>Smallest download</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Contains no stage3 tarball, no Portage snapshot, no prebuilt packages and
    is therefore not suitable for networkless installation
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>Gentoo Installer LiveCD</title>
<body>

<p>
The Installer LiveCD is called <c><keyval id="live-cd-name"/></c> and takes up
<keyval id="live-cd-size"/> MB. You can use this Installation CD to install
Gentoo, and you can even use it to install Gentoo without a working internet
connection, just in case you want to bring Gentoo to another PC than the one
you are currently installing Gentoo on.
</p>

<table>
<tr>
  <th>Installer LiveCD</th>
  <th>Pros and Cons</th>
</tr>
<tr>
  <th>+</th>
  <ti>
    Contains everything you need. You can even install without a network
    connection.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>Huge download</ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>The Stage3 Tarball</title>
<body>

<p>
A stage3 tarball is an archive containing a minimal Gentoo environment,
suitable to continue the Gentoo installation using the instructions in this
manual. Previously, the Gentoo Handbook described the installation using one of
three stage tarballs. While Gentoo still offers stage1 and stage2 tarballs, the
official installation method uses the stage3 tarball. If you are interested in
performing a Gentoo installation using a stage1 or stage2 tarball, please read
the Gentoo FAQ on <uri link="/doc/en/faq.xml#stage12">How do I Install Gentoo
Using a Stage1 or Stage2 Tarball?</uri>
</p>

<p>
Stage3 tarballs can be downloaded from <path><keyval
id="release-dir"/>stages/</path> on any of the <uri
link="/main/en/mirrors.xml">Official Gentoo Mirrors</uri> and are not provided
on the LiveCD.
</p>

</body>
</subsection>
</section>
<!-- STOP -->
<section>
<title>Download, Burn and Boot a Gentoo Installation CD</title>
<subsection>
<title>Downloading and Burning the Installation CDs</title>
<body>

<p>
You have chosen to use a Gentoo Installation CD. We'll first start by 
downloading and burning the chosen Installation CD. We previously discussed 
the several available Installation CDs, but where can you find them? 
</p>

<p>
You can download any of the Installation CDs from one of our <uri
link="/main/en/mirrors.xml">mirrors</uri>. The Installation CDs are located in
the <path><keyval id="release-dir"/>installcd/</path> directory.
</p>

<p>
Inside that directory you'll find ISO-files. Those are full CD images which you
can write on a CD-R.
</p>

<p>
In case you wonder if your downloaded file is corrupted or not, you can check
its MD5 checksum and compare it with the MD5 checksum we provide (such as
<path><keyval id="min-cd-name"/>.DIGESTS</path>). You can check the MD5
checksum with the <c>md5sum</c> tool under Linux/Unix or <uri
link="http://www.etree.org/md5com.html">md5sum</uri> for Windows.
</p>

<p>
Another way to check the validity of the downloaded file is to use GnuPG to
verify the cryptographic signature that we provide (the file ending with
<path>.asc</path>). Download the signature file and obtain the public key:
</p>

<pre caption="Obtaining the public key">
$ <i>gpg --keyserver subkeys.pgp.net --recv-keys 17072058</i>
</pre>

<p>
Now verify the signature:
</p>

<pre caption="Verify the cryptographic signature">
$ <i>gpg --verify &lt;signature file&gt; &lt;downloaded iso&gt;</i>
</pre>

<p>
To burn the downloaded ISO(s), you have to select raw-burning. How you
do this is highly program-dependent. We will discuss <c>cdrecord</c> and
<c>K3B</c> here; more information can be found in our <uri
link="/doc/en/faq.xml#isoburning">Gentoo FAQ</uri>.
</p>

<ul>
  <li>
    With cdrecord, you simply type <c>cdrecord dev=/dev/hdc &lt;downloaded iso 
    file&gt;</c> (replace <path>/dev/hdc</path> with your CD-RW drive's 
    device path).
  </li>
  <li>
    With K3B, select <c>Tools</c> &gt; <c>CD</c> &gt; <c>Burn Image</c>. Then
    you can locate your ISO file within the 'Image to Burn' area. Finally click
    <c>Start</c>.
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>Booting the Installation CD</title>
<body>

<p>
Once you have burnt your installation CD, it is time to boot it.
Remove all CDs from your CD drives, reboot your system and enter the BIOS. 
This is usually done by hitting DEL, F1 or ESC, depending on your BIOS. Inside 
the BIOS, change the boot order so that the CD-ROM is tried before the hard 
disk. This is often found under "CMOS Setup". If you don't do this, your system 
will just reboot from the hard disk, ignoring the CD-ROM.
</p>

<p>
Now place the installation CD in the CD-ROM drive and reboot. You should see a
boot prompt. At this screen, you can hit Enter to begin the boot process with
the default boot options, or boot the Installation CD with custom boot options
by specifying a kernel followed by boot options and then hitting Enter.
</p>

<p>
Specifying a kernel? Yes, we provide several kernels on our Installation CDs. 
The default one is <c>gentoo</c>. Other kernels are for specific hardware needs
and the <c>-nofb</c> variants which disable framebuffer.
</p>

<p>
Below you'll find a short overview on the available kernels:
</p>

</body>
<body test="func:keyval('arch')='x86'">

<table>
<tr>
  <th>Kernel</th>
  <th>Description</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>Default 2.6 kernel with support for multiple CPUs</ti>
</tr>
<tr>
  <ti>gentoo-nofb</ti>
  <ti>Same as <c>gentoo</c> but without framebuffer support</ti>
</tr>
<tr>
  <ti>memtest86</ti>
  <ti>Test your local RAM for errors</ti>
</tr>
</table>

</body>
<body test="func:keyval('arch')='AMD64'">
<table>
<tr>
  <th>Kernel</th>
  <th>Description</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>
    Default kernel with support for K8 CPUs (including NUMA support) and EM64T
    CPUs
  </ti>
</tr>
<tr>
  <ti>memtest86</ti>
  <ti>Test your local RAM for errors</ti>
</tr>
</table>

</body>
<body>

<p>
You can also provide kernel options. They represent optional settings you can
(de)activate at will. The following list is the same as the one you receive
when you press F2 at the bootscreen.
</p>

<pre caption="Options available to pass to your kernel of choice">
- agpgart       loads agpgart (use if you have graphic problems,lockups)
- acpi=on       loads support for ACPI firmware
- ide=nodma     force disabling of DMA for malfunctioning IDE devices
- doscsi        scan for scsi devices (breaks some ethernet cards)
- dopcmcia      starts pcmcia service for PCMCIA cdroms
- nofirewire    disables firewire modules in initrd (for firewire cdroms,etc)
- nokeymap      disables keymap selection for non-us keyboard layouts
- docache       cache the entire runtime portion of cd in RAM, allows you
                to umount /mnt/cdrom to mount another cdrom.
- nodetect      causes hwsetup/kudzu and hotplug not to run
- nousb         disables usb module load from initrd, disables hotplug
- nodhcp        dhcp does not automatically start if nic detected
- nohotplug     disables loading hotplug service
- noapic        disable apic (try if having hardware problems nics,scsi,etc)
- noevms        disable loading of EVMS2 modules
- nolvm2        disable loading of LVM2 modules
- hdx=stroke    allows you to partition the whole harddrive even when your BIOS
                can't handle large harddrives
- noload=module1,[module2,[...]]
                disable loading of specific kernel modules
</pre>

<p>
Now boot your CD, select a kernel (if you are not happy with the default
<c>gentoo</c> kernel) and boot options. As an example, we show you how
to boot the <c>gentoo</c> kernel, with <c>dopcmcia</c> as kernel
parameters:
</p>

<pre caption="Booting an Installation CD">
boot: <i>gentoo dopcmcia</i>
</pre>

<p>
You will then be greeted with a boot screen and progress bar. If you are
installing Gentoo on a system with a non-US keyboard, make sure you immediately
press Alt-F1 to switch to verbose mode and follow the prompt. If no selection
is made in 10 seconds the default (US keyboard) will be accepted and the boot
process will continue. Once the boot process completes, you will be
automatically logged in to the "Live" Gentoo Linux as "root", the super user.
You should have a root ("#") prompt on the current console and can also switch
to other consoles by pressing Alt-F2, Alt-F3 and Alt-F4. Get back to the one
you started on by pressing Alt-F1.
</p>

<p>
Now continue with <uri link="#hardware">Extra Hardware Configuration</uri>.
</p>

</body>
</subsection>
<subsection id="hardware">
<title>Extra Hardware Configuration</title>
<body>

<p>
When the Installation CD boots, it tries to detect all your hardware devices
and loads the appropriate kernel modules to support your hardware. In the vast
majority of cases, it does a very good job. However, in some cases it may not
auto-load the kernel modules you need. If the PCI auto-detection missed some of
your system's hardware, you will have to load the appropriate kernel modules
manually. 
</p>

<p>
In the next example we try to load the <c>8139too</c> module (support for 
certain kinds of network interfaces):
</p>

<pre caption="Loading kernel modules">
# <i>modprobe 8139too</i>
</pre>

</body>
</subsection>
<subsection>
<title>Optional: Tweaking Hard Disk Performance</title>
<body>

<p>
If you are an advanced user, you might want to tweak the IDE hard disk
performance using <c>hdparm</c>. With the <c>-tT</c> options you can
test the performance of your disk (execute it several times to get a
more precise impression):
</p>

<pre caption="Testing disk performance">
# <i>hdparm -tT /dev/hda</i>
</pre>

<p>
To tweak, you can use any of the following examples (or experiment
yourself) which use <path>/dev/hda</path> as disk (substitute with your
disk):
</p>

<pre caption="Tweaking hard disk performance">
<comment>(Activate DMA:)</comment>
# <i>hdparm -d 1 /dev/hda</i>

<comment>(Activate Safe Performance Options:)</comment>
# <i>hdparm -d 1 -A 1 -m 16 -u 1 -a 64 /dev/hda</i>
</pre>

</body>
</subsection>
<subsection id="useraccounts">
<title>Optional: User Accounts</title>
<body>

<p>
If you plan on giving other people access to your installation
environment or you want to chat using <c>irssi</c> without root privileges (for
security reasons), you need to create the necessary user accounts and change 
the root password.
</p>

<p>
To change the root password, use the <c>passwd</c> utility:
</p>

<pre caption="Changing the root password">
# <i>passwd</i>
New password: <comment>(Enter your new password)</comment>
Re-enter password: <comment>(Re-enter your password)</comment>
</pre>

<p>
To create a user account, we first enter their credentials, followed by
its password. We use <c>useradd</c> and <c>passwd</c> for these tasks.
In the next example, we create a user called "john".
</p>

<pre caption="Creating a user account">
# <i>useradd -m -G users john</i>
# <i>passwd john</i>
New password: <comment>(Enter john's password)</comment>
Re-enter password: <comment>(Re-enter john's password)</comment>
</pre>

<p>
You can change your user id from root to the newly created user by using
<c>su</c>:
</p>

<pre caption="Changing user id">
# <i>su - john</i>
</pre>

</body>
</subsection>
<subsection>
<title>Optional: Viewing Documentation while Installing</title>
<body>

<p>
If you want to view the Gentoo Handbook (either from-CD or online) during the
installation, make sure you have created a user account (see <uri
link="#useraccounts">Optional: User Accounts</uri>). Then press <c>Alt-F2</c> to
go to a new terminal and log in.
</p>

<p>
If you want to view the documentation on the CD you can immediately run
<c>links</c> to read it:
</p>

<pre caption="Viewing the on-CD documentation">
# <i>links /mnt/cdrom/docs/html/index.html</i>
</pre>

<p>
However, it is preferred that you use the online Gentoo Handbook as it will be
more recent than the one provided on the CD. You can view it using <c>links</c>
as well, but only after having completed the <e>Configuring your Network</e>
chapter (otherwise you won't be able to go on the Internet to view the
document):
</p>

<pre caption="Viewing the Online Documentation">
# <i>links http://www.gentoo.org/doc/en/handbook/<keyval id="online-book"/></i>
</pre>

<p>
You can go back to your original terminal by pressing <c>Alt-F1</c>.
</p>

</body>
</subsection>
<subsection>
<title>Optional: Starting the SSH Daemon</title>
<body>

<p>
If you want to allow other users to access your computer during the
Gentoo installation (perhaps because those users are going to help you
install Gentoo, or even do it for you), you need to create a user
account for them and perhaps even provide them with your root password 
(<e>only</e> do that <e>if</e> you <b>fully trust</b> that user).
</p>

<p>
To fire up the SSH daemon, execute the following command:
</p>

<pre caption="Starting the SSH daemon">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
To be able to use sshd, you first need to set up your networking. Continue with
the chapter on <uri link="?part=1&amp;chap=3">Configuring your Network</uri>.
</p>

</body>
</subsection>
</section>
</sections>
