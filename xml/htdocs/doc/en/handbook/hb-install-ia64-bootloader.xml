<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/handbook/Attic/hb-install-ia64-bootloader.xml,v 1.1 2006/09/03 05:02:44 vapier Exp $ -->

<sections>

<version>7.1</version>
<date>2006-08-30</date>

<section>
<title>Installing elilo</title>
<body>

<p>
On the IA64 platform, the boot loader is called elilo.  You may need to 
emerge it on your machine first.
</p>

<pre caption="Installing elilo">
# <i>emerge elilo</i>
</pre>

<p>
You can find the configuration file at <path>/etc/elilo.conf</path> and a
sample file in the typical docs dir <path>/usr/share/doc/elilo-&lt;ver&gt;/</path>.
Here is another sample configuration:
</p>

<pre caption = "/etc/elilo.conf example">
boot=/dev/sda1
delay=30
timeout=50
default=Gentoo
append="console=ttyS0,9600"
prompt

image=/vmlinuz
	label=Gentoo
	root=/dev/sda2
	read-only

image=/vmlinuz.old
	label=Gentoo.old
	root=/dev/sda2
	read-only
</pre>

<p>
The <c>boot</c> line tells elilo the location of the boot partition (in this
case, <path>/dev/sda1</path>).  The <c>delay</c> line sets the number of 10th
of seconds before automatically booting the default when in non-interactive
mode.  The <c>timeout</c> line is just like the delay line but for interactive
mode.  The <c>default</c> line sets the default kernel entry (which is defined
below).  The <c>append</c> line adds extra options to the kernel cmdline.  The
<c>prompt</c> sets the default elilo behavior to interactive.
</p>

<p>
The sections that start with <c>image</c> defines different bootable images.
Each image has a nice <c>label</c>, a <c>root</c> filesystem, and will only
mount the root filesystem <c>read-only</c>.
</p>

<p>
When configuration is done, just run <c>elilo --efiboot</c>. The <c>--efiboot
</c> option adds a menu entry for Gentoo Linux to the EFI Boot Manager.
</p>

<pre caption = "Applying the elilo configuration">
# <i>elilo --efiboot</i>
</pre>

<p>
Now continue with <uri link="#reboot">Rebooting the System</uri>.
</p>

</body>
</section>
<section id="reboot">
<title>Rebooting the System</title>
<subsection>
<body>

<p>
Exit the chrooted environment and unmount all mounted partitions. Then type in 
that one magical command you have been waiting for: <c>reboot</c>.
</p>

<pre caption="Exiting the chroot, unmounting all partitions and rebooting">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/dev /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

<p>
When you reboot you should see a new Gentoo Linux menu option in the
EFI Boot Manager which will boot Gentoo.  Once rebooted in your Gentoo
installation, finish up with <uri link="?part=1&amp;chap=11">Finalizing
your Gentoo Installation</uri>.
</p>

</body>
</subsection>
</section>
</sections>
