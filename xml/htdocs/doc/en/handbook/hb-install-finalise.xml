<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/handbook/hb-install-finalise.xml,v 1.29 2004/07/26 09:04:42 dertobi123 Exp $ -->

<sections>
<section>
<title>User Administration</title>
<subsection>
<title>Setting a root Password</title>
<body>

<p>
Before you forget, set the root password by typing:
</p>

<pre caption="Setting the root password">
# <i>passwd</i>
</pre>

<p>
If you want root to be able to log on through the serial console, add
<c>tts/0</c> to <path>/etc/securetty</path>:
</p>

<pre caption="Adding tts/0 to /etc/securetty">
# <i>echo "tts/0" &gt;&gt; /etc/securetty</i>
</pre>

</body>
</subsection>
<subsection>
<title>Adding a User for Daily Use</title>
<body>

<p>
Working as root on a Unix/Linux system is <e>dangerous</e> and should be avoided
as much as possible. Therefore it is <e>strongly</e> recommended to add a user 
for day-to-day use.
</p>

<p>
For instance, to create a user called <c>john</c> who is member of the
<c>wheel</c> group (be able to change to root using <c>su</c>), <c>users</c>
group (default for all users) and <c>audio</c> group (be able to use audio
devices):
</p>

<pre caption="Adding a user for day-to-day use">
# <i>useradd john -m -G users,wheel,audio,tty -s /bin/bash</i>
# <i>passwd john</i>
Password: <comment>(Enter the password for john)</comment>
Re-enter password: <comment>(Re-enter the password to verify)</comment>
</pre>

<p>
If a user ever needs to perform some task as root, they can use <c>su -</c>
to temporarily receive root privileges. Another way is to use the <c>sudo</c> 
package which is, if correctly configured, very secure.
</p>

</body>
</subsection>
</section>
<section>
<title>Reboot and Enjoy</title>
<subsection>
<title>Rebooting</title>
<body>

<p>
Congratulations! Your Gentoo system is now ready. Exit the chrooted environment 
and unmount all mounted partitions. Then type in that 
one magical command you have been waiting for: <c>reboot</c>.
</p>

<pre caption="Rebooting the system">
# <i>exit</i>
# <i>cd /</i>
# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
# <i>reboot</i>
</pre>

<p>
Of course, don't forget to remove the bootable CD, otherwise the CD will be
booted again instead of your new Gentoo system.
</p>

<p>
OldWorld <b>PPC</b> users will boot in MacOS since their bootloader
isn't installed yet. Those users should read <uri
link="#doc_chap2_sect2">Optional: Configuring BootX</uri>. <b>MIPS</b> users 
will have to do some more tweaking in their MIPS PROM to get Gentoo to work. 
Those users should read <uri link="#doc_chap2_sect3">Optional: Getting 
Gentoo/MIPS to Work</uri>. 
</p>

<p>
GRP users can continue with <uri link="#doc_chap2_sect4">Optional: 
Install GRP Packages</uri>, all the rest can finish up with <uri 
link="?part=1&amp;chap=12">Where to go from here?</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Optional: Configuring BootX</title>
<body>

<impo>
This subsection is <e>only</e> for <b>PPC</b> users who want to use BootX as
bootloader. All other readers should skip this subsection.
</impo>

<p>
Now your machine is booted in MacOS, open the BootX control panel.
Select <c>Options</c>, and uncheck <c>Used specified RAM disk</c>. When you 
return to the BootX main screen, you will now find an option to specify your
machine's root disk and partition. Fill these in with the appropriate
values.
</p>

<p>
BootX can be configured to start Linux upon boot. If you do this, you will
first see your machine boot into MacOS then, during startup, BootX will
load and start Linux. See the <uri
link="http://penguinppc.org/projects/bootx/">BootX home page</uri> for more 
information.
</p>

<p>
If you are a GRP users you can continue with <uri
link="#doc_chap2_sect4">Optional: Install GRP Packages</uri>, otherwise go to
<uri link="?part=1&amp;chap=12">Where to go from here?</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Optional: Getting Gentoo/MIPS to Work</title>
<body>

<impo>
This subsection is <e>only</e> for <b>MIPS</b> users! All other readers should 
skip this subsection.
</impo>

<p>
When you are rebooted, go to the <e>System Maintenance Menu</e> and select
<e>Enter Command Monitor</e> (<c>5</c>). If you want to test your new Gentoo
installation, you can just run <c>boot -f &lt;kernel name&gt;</c>. To have your
system permanently boot into the Gentoo installation, you need to set some
variables in the MIPS PROM:
</p>

<pre caption="Configuring the PROM to Boot Gentoo">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;root device&gt; = Gentoo's root partition, e.g. /dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;root device&gt;</i>

<comment>(To list the available kernels, type "ls")</comment>
&gt;&gt; <i>setenv OSLoader &lt;kernel name&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;kernel name&gt;</i>

<comment>(Declare the kernel parameters you want to pass)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;kernel parameters&gt;</i>

<comment>(Provide the location of the Volume Header)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(Automatically boot Gentoo)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(Set the timezone)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(Use the serial console - graphic adapter users should have "g" instead of "d1" (one))</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
Now you're ready to enjoy Gentoo!
</p>

</body>
</subsection>
<subsection>
<title>Optional: Install GRP Packages</title>
<body>

<impo>
This part is for GRP users only. Other users should skip this part and continue
with <uri link="?part=1&amp;chap=12">Where to go from here?</uri>.
</impo>

<p>
Now that your system is booted, log on as the user you created (for instance,
<c>john</c>) and use <c>su -</c> to gain root privileges:
</p>

<pre caption="Gaining root privileges">
$ <i>su -</i>
Password: <comment>(Enter your root password)</comment>
</pre>

<p>
Now we need to change the Portage configuration to look for the prebuilt 
binaries from the second CD (Gentoo Packages CD). First mount this CD:
</p>

<pre caption="Mount the Packages CD">
<comment>(Put the Gentoo Packages CD in the CD tray)</comment>
# <i>mount /mnt/cdrom</i>
</pre>

<p>
Now configure Portage to use <path>/mnt/cdrom</path> for its prebuilt packages:
</p>

<pre caption="Configuring Portage to use /mnt/cdrom">
# <i>ls /mnt/cdrom</i>

<comment>(If there is a /mnt/cdrom/packages directory:)</comment>
# <i>export PKGDIR="/mnt/cdrom/packages"</i>

<comment>(Otherwise:)</comment>
# <i>export PKGDIR="/mnt/cdrom"</i>
</pre>

<p>
Now install the packages you want. The Packages CD contains several prebuilt 
binaries, for instance KDE:
</p>

<pre caption="Installing KDE">
# <i>emerge --usepkg kde</i>
</pre>

<p>
Be sure to install the binaries now. When you do an <c>emerge sync</c> to update
Portage (as you will learn later), the prebuilt binaries might not match against
the ebuilds in your updated Portage. You can try to circumvent this by using
<c>emerge --usepkgonly</c> instead of <c>emerge --usepkg</c>.
</p>

<p>
Congratulations, your system is now fully equiped! Continue with <uri
link="?part=1&amp;chap=12">Where to go from here?</uri> to learn more about
Gentoo.
</p>

</body>
</subsection>
</section>
</sections>
