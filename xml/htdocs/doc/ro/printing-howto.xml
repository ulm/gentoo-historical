<?xml version='1.0' encoding="UTF-8"?> 
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ro/printing-howto.xml,v 1.1 2004/12/21 17:47:19 neysx Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ro/printing-howto.xml" lang="ro"> 

<title>Ghid pentru Imprimare în Gentoo</title> 

<author title="Autor"><!-- zhen@gentoo.org -->
  John P. Davis
</author>
<author title="Editor">
  <mail link="wleggette@gate.net">Wesley Leggette</mail>
</author>
<author title="Editor">
  <mail link="carl@gentoo.org">Carl Anderson</mail>
</author>
<author title="Editor">
  <mail link="lanius@gentoo.org">Heinrich Wendel</mail>
</author>
<author title="Editor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Corector">
  <mail link="phil@thenexusproject.org">Phil Bordelon</mail>
</author> 
<author title="Translator">
  <mail link="perpendiqular@rdslink.ro">Robert Datcu</mail>
</author>

<abstract>
Un ghid cuprinzător de imprimare pentru Gentoo Linux. Acest document acoperă
imprimarea atât la nivel local cât şi prin reţea.
</abstract> 

<license/>

<version>1.20</version>
<date>2004-10-25</date>

<chapter> 
<title>Instalarea CUPS şi foomatic</title> 
<section>
<body> 

<p>
Configurarea imprimării în Gentoo Linux este o sarcină relativ fără dureri,
mulţumită unor minunate programe cum sunt CUPS (Sistemul Comun de Imprimare în
Unix) şi foomatic. Cele două programe sunt în acest moment în structura
Portage, şi sunt foarte uşor de de instalat de către utilizatorul obişnuit.
</p> 

<p>
CUPS nu depinde de mediul desktop folosit (cross-desktop), fiţi conştienţi de
acest lucru; puteţi urma aceste instrucţiuni pentru a configura şi instala
imprimarea sub GNOME sau KDE. Există şi alte opţiuni, cum ar fi configurarea
imprimării în KDE, dar cred că CUPS este cel mai uşor de instalat, şi cel mai
scalabil.  
</p>

<p>
Înainte de a instala CUPS, este o bună idee să adaugăm indicatorii USE necesari
în <path>/etc/make.conf</path>.
</p>

<pre caption="Editarea /etc/make.conf">
<comment>adăugaţi cups, foomaticdb, ppds şi usb (dacă folosim o conexiune USB pentru imprimantă)
în lista noastră existentă de indicatori USE.</comment>
USE="cups foomaticdb ppds usb alta_var1 alta_var2"
</pre>

<p>
Pentru mai multe informaţii despre indicatorii USE, consultaţi <uri
link="/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=2">Indicatori
USE</uri>, capitol din Manualul Gentoo.
</p>

<pre caption="Instalarea pachetelor necesare">
# <i>emerge cups</i>
# <i>emerge foomatic </i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Instalarea Modulelor de Kernel</title> 
<section>
<title>Generalităţi</title>
<body>

<p>
Acum, că pachetele necesare sunt instalate, este timpul să instalăm imprimanta.
</p>

<p>
Corespunzător tipului de conexiune al imprimantei folosit, va fi necesar să
activăm fie portul paralel, fie portul USB de conexiune al imprimantei, în
kernel. 
</p>

<note>
Aceasta este cerută doar pentru imprimarea locală, dacă doriţi să imprimaţi via
samba, săriţi această secţiune.
</note>

<note>
Dacă nu sunteţi siguri cum să compilaţi kernel-ul, instrucţiuni specifice pot
fi găsite la <uri link="http://www.tldp.org/HOWTO/Kernel-HOWTO.html">Ghid
pentru Kernel</uri> (site inaccesibil acum, pentru trecere în revistă).
Asiguraţi-vă că veţi găsi cum să compilaţi şi instalaţi noi module, făra a fi
nevoiţi să recompilaţi kernel-ul sau
să reporniţi sistemul dvs. Este o adevărată salvare de timp.  
</note>

</body>
</section>
<section>
<title>Modulele USB</title>
<body>

<p>
Pentru activarea suportului USB pentru imprimare, mergeţi la <c>USB support</c>
şi selectaţi <c>Support for USB</c> şi <c>USB Printer support</c>. Selectarea
amândoura ca module va instala usbcore.o şi printer.o în directorul de module
al dvs. Sugerăm folosirea modulelor deoarece nu va trebui să reporniţi
computer-ul. Utilizatorii unui kernel 2.6 vor găsi aceste opţiuni sub <c>Device
Drivers</c>.
</p>

<p>
După ce este instalat kernel-ul şi computer-ul dvs. repornit, este timpul să
încărcăm modulele necesare:
</p>

<pre caption="Încărcarea modulelor USB">
# <i>modprobe usbcore</i> 

<comment>(pentru utilizatorii unui kernel 2.4:)</comment>
# <i>modprobe printer</i>
<comment>(pentru utilizatorii unui kernel 2.6:)</comment>
# <i>modprobe usblp</i>
</pre> 

<p>
După ce modulele au fost încărcate corespunzător, conectaţi şi porniţi
imprimanta, şi verificaţi <c>dmesg</c> pentru a vedea dacă a fost detectată.
</p> 

<pre caption="Verificarea Mesajelor Kernel-ului">
# <i>dmesg | tail</i>
</pre> 

<p>
Ar trebui să vedeţi ceva de genul:
</p>

<pre caption="Rezultat dmesg">
hub.c: USB new device connect on bus2/2, assigned device number 2 
printer.c: usblp0: USB bidirectional printer dev 2 if 0 alt 1 proto 2 vid 0x03F0 pid 0x1104
</pre>

</body>
</section> 
<section>
<title>Modulele pentru Portul Paralel</title>
<body>

<p>
Pentru activarea suportului prin portul paralel entru imprimare, mergeţi la
<c>Parallel port support</c> şi selectaţi <c>Parallel port support</c> şi
<c>PC-style hardware</c>. În funcţie de imprimanta dvs. trebuie de asemenea să
selectaţi <c>Multi-IO cards (parallel and serial)</c>, <c>Support for foreign
hardware</c> şi <c>IEEE 1284 transfer mode</c>. Apoi mergeţi la <c>Character
devices</c> şi selectaţi <c>Parallel Printer Support</c>. Utilizatorii unui
kernel 2.6 vor găsi aceste opţiuni sub <c>Device Drivers</c>.
</p>

<p>
După ce kernel-ul este instalat, asiguraţi-vă că imprimanta este conectată şi
pornită şi apoi reporniţi sistemul. Acum este timpul să incărcăm modulele
necesare: 
</p>

<pre caption="Încărcarea modulelor corespunzătoare portului paralel">
# <i>modprobe lp</i> <comment>(Doar pentru utilizatorii unui kernel 2.6)</comment>
# <i>modprobe parport</i> 
# <i>modprobe parport_pc</i>
</pre> 

<p>
După ce modulele au fost încărcate corespunzător, verificaţi
<path>/var/log/messages</path> pentru a vedea dacă imprimanta a fost detectată.
</p> 

<note>
Dacă folosiţi altceva decât sysklogd, fişierul log pentru kernel va fi diferit.
</note>

<pre caption="verificarea Mesajelor Kernel-ului">
# <i>tail /var/log/messages</i>
</pre> 

<p>
Ar trebui să vedeţi ceva de genul:
</p>

<pre caption="Rezultat /var/log/messages">
lp0: using parport0 (polling).
</pre>

</body>
</section>
<section>
<title>Testarea La Nivel Primar</title>
<body>

<p>
Înainte de configurarea imprimantei cu ajutorul CUPS, o putem testa cu ajutorul
câtorva comenzi la nivel primar.
</p>

<note>
Unele imprimante (în special <uri link="http://pnm2ppa.sourceforge.net">cele
PPA-based</uri>, cum sunt seriile HP 720, 820 şi 1000) care nu acceptă
alimentare ASCII. Dacă aveţi o astfel de imprimantă, amintiţi-vă că este o
imprimantă PPA-based şi că acest test va eşua chiar şi dacă imprimanta
funcţionează.
</note> 

<note>
Unele imprimante (de ex. o serie de modele HP LaserJet) cer un ^L (Control-L)
la sfârşitul fişierului pentru a porni imprimarea. Fără ^L 'cat' reuşeşte,
imprimanta primeşte datele, apoi se opreşte nemaifăcând nimic. 
</note>

<pre caption="Testatea imprimantei folosind cat">
# <i>touch test.txt</i>
# <i>echo "Hello World" > test.txt</i>
# <i>cat test.txt > /dev/usb/lp0 </i>

<comment> Alternativ, pentru  imprimantele pe port paralel: </comment>
# <i>cat test.txt > /dev/lp0 </i>
</pre>

</body>
</section>
</chapter>			

<chapter>
<title>Driver-e Speciale pentru Imprimantă</title> 
<section>
<body> 

<p>
Înainte de folosirea foomatic pentru a genera un fişier PPD, ar putea fi
necesar să găsiţi driver-e de terţă parte pentru imprimanta dvs. De exemplu,
Epson oferă <uri link="http://www.epkowa.co.jp/english/linux_e/linux.html">
driver-e ale mai multor imprimante</uri> pentru sisteme de operare open-source.
Totuşi, ca şi cele Epson, multe din aceste driver-e speciale nu sunt
open-source. 
</p>

<p>
Următoarele driver-e pentru imprimare sunt disponibile ca fişiere ebuild în
Portage: gimp-print, omni, hpijs, pnm2ppa.
</p>

<p>
Pentru multe imprimante pe lângă cele HP InkJet, veţi putea folosi driver-ele
de imprimantă standard din Linux. Vizitaţi <uri
link="http://www.linuxprinting.org/printer_list.cgi">baza de date suport
imprimare de la linuxprinting.org</uri> pentru a găsi informaţii despre un
model anume de imprimantă. Asiguraţi-vă de citirea documentaţiei oferită cu
orice driver pe care l-aţi descărcat pentru instalare şi a informaţiilor
privind licenţierea.
</p> 

<p>
Dacă folosiţi o imprimantă HP Inkjet, este necesar să instalaţi driver-ul de
imprimare <c>hpijs</c>. Acest driver se descurcă cu toate dialectele Postscript
necesare pentru funcţionarea imprimantei HP InkJet. Driver-ul <c>hpijs</c> este
valabil doar pentru imprimantele HP Inkjet, dar este disponibil în Portage,
pentru uşurinţa utilizării. Documentaţia de la HP pentru driver-ul <c>hpijs</c>
va fi stocată în <path>/usr/share/doc/hpijs-&lt;versiune&gt;</path>. Autorul
recomandă <e>foarte mult</e> consultarea acestei documentaţii.
</p>

<p>
Dacă folosiţi o imprimantă PPA-based este necesar să instalaţi driver-ul de
imprimare <c>pnm2ppa</c>.
</p>

<pre caption="Instalarea hpijs">
# <i>emerge hpijs</i>
</pre>

<note>
Dacă folosiţi o imprimantă HP Laserjet, suportul pentru aceasta ar putea fi
deja valabil prin sistemul de printare din Gnome. Dacă folosiţi o imprimantă
diferită de HP InkJet, nu trebuie să instalaţi acest driver special de
imprimare.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Configurarea Fişierului PPD</title>
<section>
<body>

<p>
Acum este timpul să configurăm imprimanta şi CUPS. Pentru ca imprimanta dvs. să
înţeleagă limbajul Postscript corect, CUPS are nevoie de un fişier PPD (Printer
Postscript Definition - Definiţie Postscript pentru Imprimantă). Cea mai simplă
cale de a genera un fişier PPD este prin intermediul foomatic.
</p>

<note>
O altă posibilitate este să descărcăm un fişier PPD de la <uri
link="http://www.linuxprinting.org">LinuxPrinting.org</uri> şi să îl stocăm în
<path>/usr/share/cups/model</path>. Dacă folosiţi această metodă, puteţi sări
restul acestei secţiuni şi să continuaţi cu <uri link="#doc_chap5">configurarea
CUPS</uri>.
</note>

<p>
Trei elemente sunt necesare pentru a face funcţională comanda de mai jos; aveţi
nevoie de identificatorul imprimantei, dispozitivul folosit şi driver-ul de
imprimare (acesta ar fi hpijs dacă trebuie să instalaţi driver-ul special de
mai sus). Identificatorul imprimantei şi driver-ul pot fi extrase cu ajutorul
comenzii <c>grep</c> din baza de date foomatic, iar dispozitivul de imprimare
este cel la care este conectată imprimanta dvs. (de ex.
<path>file:/dev/lp0</path>, <path>file:/dev/usb/lp0</path> iar pentru
imprimante samba <path>smb://user:parola@server/share</path>). 
</p>

<p>
Înainte de a folosi <c>foomatic-configure</c>, nu uitaţi să porniţi
<c>cupsd</c>.
</p>

<pre caption="Pornirea cupsd">
# <i>/etc/init.d/cupsd start</i>
</pre>

<pre caption="Folosirea în mod general a foomatic">
<comment>(Completaţi cu modelul dvs. în $printer_model şi
identificatorul imprimantei în $printer_ID.
Folosiţi rezultatul primelor două comenzi grep pentru a
completa ultima comandă foomatic-configure)</comment>
# <i>grep $printer_model /usr/share/foomatic/db/source/printer/* </i>
# <i>grep $printer_ID /usr/share/foomatic/db/source/driver/* </i>
# <i>foomatic-configure -s cups -p $printer_model_number -c file:$print_device_path -n queue name -d driver </i>
</pre>

<p>
În cazul în care căutarea driver-ului nu funcţionează, puteţi căuta pentru
imprimanta dvs. la <uri
link="http://www.linuxprinting.org">LinuxPrinting.org</uri> şi verifica ce
driver-e sunt cunoscute a funcţiona cu aceasta. Alegeţi unul din aceste
driver-e şi instalaţi-l:
</p>

<pre caption="Instalarea unui driver PPD">
<comment>(Pentru mai multe imprimante, folosiţi nume de cozi separate.
Altfel, o denumire uşor de ţinut minte, ca "implicit", este suficientă)</comment>
# <i>foomatic-configure -s cups -p &lt;printer model&gt; -c file:&lt;printer device&gt; -n &lt;queue name&gt; -d &lt;driver&gt;</i>
</pre>

<p>
Acum, iată un exemplu mai specific. Codul următor asumă că aveţi un model Epson
Stylus Color 980. Desigur, îl veţi înlocui cu modelul efectiv al imprimantei
dvs.
</p>

<pre caption="Utilizarea specifică a foomatic cu Stylus Color 980">
# <i>grep "Stylus Color 980" /usr/share/foomatic/db/source/printer/* </i>
<comment>Acum uitaţi-vă după linia care citeşte modelul:</comment>
/usr/share/foomatic/db/source/printer/Epson-Stylus_Color_980.xml:   &lt;model>Stylus Color 980&lt;/model>
<comment>Epson-Stylus_Color_980 este numele imprimnatei dvs.</comment>

# <i>grep Epson-Stylus_Color_980 /usr/share/foomatic/db/source/driver/* </i>
/usr/share/foomatic/db/source/driver/gimp-print-ijs.xml:  &lt;printer>&lt;id>printer/Epson-Stylus_Color_980&lt;/id>&lt;/printer>
<comment>Uitaţi, driver-ul dvs. pentru imprimare este gimp-print-ijs.</comment>

# <i>foomatic-configure -s cups -p Epson-Stylus_Color_980 -c file:/dev/lp0 -n Epson -d gimp-print-ijs </i>
</pre>

</body> 
</section>
</chapter> 

<chapter> 
<title>Configurarea CUPS</title> 
<section>
<body> 

<p>
Întrucât imprimanta propriu-zisă este configurată, acum CUPS trebuie instalat
pentru a trata coada de imprimare. CUPS poate fi accesat via browser web, la
portul 631 al server-ului de imprimare.
</p>

<p>
CUPS conţine un fişier de configurare pentru daemon-ul care trebuie cel puţin
modificat pentru a permite denumirea dispozitivelor în stilul componentelor
URI. Deschideţi <path>/etc/cups/cupsd.conf</path> cu editorul dvs. favorit şi
modificaţi <c>FileDevice</c> în <c>Yes</c>:
</p>

<pre caption="Modificarea FileDevice în Yes">
# <i>nano -w /etc/cups/cupsd.conf</i>
<comment>(Modificaţi FileDevice în Yes)</comment>
</pre>

<p>
Pentru cei ce doresc configurarea clienţilor folosind noul server de imprimare
uitaţi-vă în <path>/etc/cupsd/client.conf</path> la maşină client (client
machine) şi indicaţi pentru parametrul <c>ServerName</c> numele reţelei
server-ului de imprimare.
</p>

<pre caption="Adăugarea CUPS la nivelul de execuţie default, şi repornirea CUPS">
# <i>rc-update add cupsd default</i>
# <i>/etc/init.d/cupsd restart</i>
</pre>

<p>
Daemon-ul CUPS ar trebui acum să ruleze, deci deschideţi browser-ul dvs.
favorit, introduceţi <uri>http://localhost:631</uri> şi efectuaţi click pe
<c>Manage Printer</c>. Aici puteţi găsi noua imprimantă instalată de dvs.,
configuraţi-o sau imprimaţi o pagină test. Asiguraţi-vă că aţi stabilit
dimensiunea implicită a paginii la dimensiunea paginii pe care o folosiţi dvs.
(de ex. A4 în loc de Letter).
</p> 

<note>
Dacă imprimanta nu funcţionează din diferite motive, mergeţi la directorul pe
care l-aţi precizat pentru log-urile CUPS, şi uitaţi-vă în <c>error_log</c>.
</note>

</body> 
</section>
</chapter>

<chapter>
<title>Configurarea Programelor pentru a Imprima Utilizând CUPS</title>
<section>
<title>Generalităţi</title>
<body>

<p>
Multe programe au astăzi o interfaţă nativă cups, deci nu trebuie să schimbaţi
ceva, doar încercaţi să imprimaţi din program.
</p>

</body>
</section>
<section>
<title>Aplicaţia The GIMP</title>
<body>

<p>
Pentru a putea imprima documente folosind Gimp, trebuie să (re)instalaţi
pachetul <c>gimp</c> cu indicatorul USE "gimpprint" activat. Acesta va instala
<c>gimp-print</c> dacă nu este deja instalat.
</p>

<pre caption="Instalarea gimp cu posibilităţi de imprimare">
<comment>(Asiguraţi-vă că aveţi activat USE="gimpprint")</comment>
# <i>emerge gimp</i>
</pre>

<p>
Acum, deschideţi Gimp, şi deschideţi o imagine existentă, sau o imagine goală,
chiar nu contează deoarece tot ceea ce urmărim noi este meniul <c>File</c>.
Efectuaţi click-dreapta pe imagine şi mergeţi la <c>File/Print</c>. Dialogul
pentru imprimare ar trebui să apară, şi când se întâmplă, efectuaţi click pe
noua imprimantă. Dacă imprimanta dvs. nu este deja afişată, introduceţi numele
imprimantei dvs., apoi selectaţi tipul acesteia. Ok, acum aţi configurat
imprimarea din Gimp. Jucaţi-vă cu setările şi distraţi-vă un pic.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Utilizarea Linux ca un Server de Imprimare Compatibil Windows</title>
<section>
<body>

<p>
Linux este un minunat server de imprimare, şi apoi, este minunat server pentru
orice. Primul lucru de făcut este editarea <path>/etc/samba/smb.conf</path>
pentru a se potrivi cu setările dvs. Fişierul <path>smb.conf</path> conţine
toate setările care vor face sistemul dvs. Linux să arate ca un server Windows
NT, pentru oricare maşină Windows. Am inclus un exemplu foarte util al
<path>smb.conf</path> mai jos. Modificaţi-l după nevoi pentru a se potrivi cu
reţeaua dvs.
</p>

<pre caption="Exemplu smb.conf">
[global]

workgroup = GRUPUL_DVS_DE_LUCRU
server string = Gentoo Linux Server
encrypt passwords = True
security = user
smb passwd file = /etc/samba/private/smbpasswd
log file = /var/log/samba/log.%m
socket options = IPTOS_LOWDELAY TCP_NODELAY
domain master = Yes
local master = Yes
preferred master = Yes
os level = 65
dns proxy = No
name resolve order = lmhosts host bcast
bind interfaces only = True
interfaces = eth0
hosts deny = ALL
hosts allow = 192.168.1.4 127.0.0.1 (treceţi numele/adresele host-urilor permise) 
debug level = 1
create mask = 0644
directory mask = 0755
level2 oplocks = True
read raw = no
write cache size = 262144

[printers]
comment = Imprimantă Partajată
path = /var/spool/samba
browseable = no
</pre>

<p>
Multe driver-e Windows sunt driver-e PCL. Sarcinile trimise din Windows ar
trebui interpretate de CUPS ca <c>application/octet-stream</c> şi imprimate ca
fişier neprelucrat. Deci dacă folosiţi CUPS, deschideţi
<path>/etc/cups/mime.types</path> şi decomentaţi următoarea linie:
</p>

<pre caption="Decomentaţi următoarea linie din /etc/cups/mime.types">
application/octet-stream
</pre>

<p>
Faceţi la fel pentru următoarea linie din <path>/etc/cups/mime.convs</path>:
</p>

<pre caption="Decomentaţi următoarea linie din /etc/cups/mime.convs">
application/octet-stream application/vnd.cups-raw   0 -
</pre>

<p>
Acum că Samba este configurată, reponiţi-o, mergeţi la maşina dvs. Windows şi
instalaţi o imprimantă de reţea. Uşor, nu?
</p>

</body>
</section>
</chapter>
</guide>
