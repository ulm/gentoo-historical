<?xml version='1.0' encoding="UTF-8"?>
<!--
       Translation based on /doc/en/alsa-guide.xml rev. 1.11
   -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ro/alsa-guide.xml" lang="ro">
<title>Ghidul ALSA pentru Gentoo Linux</title>
<author title="Author"><mail link="zu@pandora.be">
	Vincent Verleye</mail>
</author>
<author title="Author"><mail link="g2boojum@gentoo.org">
	Grant Goodyear</mail>
</author>
<author title="Author"><mail link="agenkin@gentoo.org">
	Arcady Genkin</mail>
</author>
<author title="Editor"><mail link="zhen@gentoo.org">
	John P. Davis</mail>
</author>
<author title="Translator"><mail link="diaboliq@petar.ro">
	Ciortea Cristian</mail>
</author>

<abstract>
Acest ghid va va arata cum sa configurati Arhitectura Avansata de Sunet sub Linux ( ALSA ) pentru Gentoo Linux.
In plus fata de Ghidul Gentoo Linux de Configurare Desktop, aces ghid este menit sa va ofere mai multe informatii asupra 
acestui subiect. Pentru a mentine compatibilitatea vom folosi acronimul ALSA in loc de AASL.</abstract>

<license/>

<version>1.2</version>
<date>2003-06-05</date>

<chapter>
<title>Introducere</title>
<section>
	<title>Ce este ALSA?</title>
<body>
<p>
Arhitectura Avansata de Sunet sub Linux (ALSA) este un proiect menit sa imbunatateasca subsistemul de sunet sub Linux 
prin rescrierea unor portiuni mari din el. 
Se anticipeaza ca ALSA isi va face prezenta in kernelul 2.6.x (sau 3.x.x -- depinde care va apare primul) Linux cand 
acesta va fi gata. </p> 
<p>
ALSA ofera suport audio si MIDI pentru Linux.
</p>
 
<p>
Citat din <uri>http://www.alsa-project.org</uri>, ALSA ofera urmatoarele avantaje:
</p>
<ul><li> Suport eficient pentru toate tipurile de interfete audio, de la placi de sunet pentru consumatori pana la interfete audio profesionale multichannel.</li>
    <li> Drivere de sunet complet modularizate.</li>
    <li> Design SMP si thread-safe.</li>
    <li> Librarii pentru useri (alsa-lib) pentru a usura programarea de software si pentru a oferi functionalitate la nivelurile cele mai inalte..</li>
    <li> Suport pentru mai vechiul OSS API, oferind compatibilitate binara cu cele mai multe programe bazate pe OSS.</li> 
</ul>
<p>
Mai sunt multe lucruri de spus despre ALSA, cum ar fi suportul pentru playback Full Duplex si inregistrare, suport 
pentru mai multe placi audio, mixare hardware de streamuri, capacitati extinse de mixare (pentru a intrebuinta functii 
ale placilor de sunet noi), ...	</p>
</body>
</section>
<section>
	<title>De ce ALSA?</title>
<body>
<p>
Daca placa dvs de sunet este suportata de kernelul Linux sau de driverul de sunet OSS/4Front, care poate fi gasit 
in toate kernelurile 2.4.x Linux, ati putea de asemenea adauga <e>acele module</e> pentru a le folosi cu placa dvs de 
sunet. 
Daca asta doriti, trebuie doar sa cititi <uri link="http://www.tldp.org/HOWTO/Sound-HOWTO/index.html">Ghidul de Sunet in Linux</uri>. </p> 
<p>
Din pacate, acele drivere OSS/4Front cunosc unele limitari -- faptul ca sunt comerciale este unul dintre ele. 
ALSA este o incercare de a trece peste aceste limitari si sa facem asta intr-un mod open-source. 
ALSA este un driver de sunet cu licienta complet GPL si LGPL, care ofera calitate profesionala pentru inregistrari, 
playback si secvente MIDI.
</p> 
</body>
</section>
<section>
	<title>Ce placi de sunet suporta ALSA?</title>
<body>
<p>
ALSA incearca sa ofere suport pentru cat de multe (si noi) placi de sunet este posibil prin oferirea driverelor 
open-source. Totusi, unii distribuitori vor oferi doar pachetele binare. 
</p>
<p>Pentru a afla daca placa dvs de sunet este suportata, vizitati tabelul placilor de sunet cu suport sau fara suport 
ALSA aici: 
<uri>http://www.alsa-project.org/alsa-doc/</uri>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Instalarea</title>
<section>
	<title>Module pentru Kernel</title>
<body>
<p>
Avand in vedere ca inca folosim sursele kernelului 2.4.x, va trebui sa compilam modulele kernelului si modulele ALSA 
separat. Cei care folosesc kernelul 2.5.x pot face asta din configuratia kernelului, avand in vedere ca modulele 
ALSA sunt incluse in kernel si ar trebui compilate acolo.
</p>
<p>
Mai intai trebuie sa fim siguri ca prezenta configuratie a kernelului este gata pentru a fi folosita cu ALSA. 
Tot ce trebuie sa aveti in configuratia kernelului este Suport-ul pentru Placa de Sunet programat sa fie construit ca modul (M).
Acesta va compila <c>soundcore.o</c>.
</p>
<note>
De asemenea, acesta va functiona chiar daca ati inclus Suport-ul pentru Placa de Sunet in kernel (Y) in loc de a-l face modul (M).
Totusi, documentatia oficial ALSA sugereaza construirea lui ca modul, deoarece ALSA va incerca sa il incarce.
</note>
<p>Daca aveti deja o configuratie a kernelului care este buna, asigurati-va ca dezactivati toate driverele de sunet (inafara de Suport-ul pentru Placa de Sunet).
Daca vreti sa faceti asta fara a fi nevoit sa rebootati, ati putea folosi urmatoarele comenzi:
</p>
<pre>
# <i>cd /usr/src/linux</i>
# <i>cp .config ~/</i>
# <i>make mrproper</i>
# <i>cp ~/.config .</i>
# <i>make menuconfig</i>
</pre>
<p>
Acum selectati <e>Sound Card Support</e> ca Modul (M) si debifati toate celelalte drivere de sunet.
Apasati Exit si raspundeti cu Y ca sa salvati configuratia kernelului.
Dupa acestea, construiti modulele:
</p>
<pre>
# <i>make dep clean</i>
# <i>make modules modules_install</i>
</pre>
<p>
Inainte de a instala noile module, aceasta comanda va sterge toate modulele antecedente, chiar si cele de la o 
instalare antecedenta a ALSA. </p>
<impo>
Asta inseamna ca atunci cand veti recompila kernelul, TREBUIE sa recompilati <c>driverul-alsa</c>.
</impo>
<note>Dar, nu e nevoie sa reinstalati <c>nvidia-kernel</c>, driverele Nvidia aflandu-se intr-un alt director
in <path>/lib/modules/*/video</path> si nu vor fi sterse de un <c>make modules modules_install</c>
</note>
</body>
</section>

<section>
	<title>Module ALSA</title>
<body>

<p>
Acum este timpul sa instalam driverele ALSA pentru placa(cile) dvs de sunet. Daca placa dvs de sunet este de tip PCI, 
puteti afla numele si modelul ei uitandu-va la continutul lui /proc/pci
</p>
<pre># <i>grep audio /proc/pci</i></pre>

<warn>
Daca ati configurat anterior sunetul si mai exista inca module non-ALSA incarcate, descarcati-le <e>acum</e>.
Verificati cu <c>lsmod</c> si folositi <c>rmmod</c> pentru a descarca toate modulele avand legatura cu sunetul din sistem.
</warn>

<p>
Vom folosi pur si simplu <c>emerge alsa-driver</c> acum, ceea ce va compila si instala <e>toate</e> driverele ALSA. </p>
<p>
Totusi, pentru a va scuti de ceva timp, cautati <e>Numele Modulului</e> placii(lor) dvs de sunet in 
<uri link="http://www.alsa-project.org/alsa-doc">Tabelul cu placi de sunet ALSA</uri> urmarind linkul cu <e>Detalii</e> 
in coloana <e>Driver and Docs</e> din randul continand chipsetul placii dvs de sunet. 
Al meu este <c>snd-emu10k1</c>, deoarece am o placa de sunet Slive!, avand chipsetul <e>EMU10K1</e>.
Vom seta variabila ALSA_CARDS la valoarea modului respectiv (dar fara prefixul snd) inainte de a folosi emerge, astfel 
emerge va compila doar driverele de care avem nevoie. </p>

<pre>
# <i>env ALSA_CARDS='emu10k1' emerge alsa-driver</i> 
</pre>
<note>
Puteti de asemenea sa adaugati aceasta variabila in <path>/etc/make.conf</path>, astfel atunci cand aveti nevoie de 
alsa-driver trebuie doar sa rulati <c>emerge alsa-driver</c>.
De exemplu : <c>echo 'ALSA_CARDS="emu10k1"' >> /etc/make.conf</c>
</note>

<note>
Cand veti dori driverele ALSA pentru mai mult de o placa de sunet puteti retine in variabila ALSA-CARDS o lista avand 
separator caracterul spatiu de drivere, astfel: <c>env ALSA_CARDS='emu10k1 intel8x0 ens1370' emerge alsa-driver</c>
</note>

<note>Daca doriti compatibilitate OSS, asigurativa ca veti folosi emerge pe packetul <c>alsa-oss</c>.</note>

<p>
Dupa acesti pasi, modulele ALSA ar trebui sa fie prezente pe sistem dvs.
</p>
</body>
</section>
<section>
	<title>Configurarea ALSA</title>
<body>
<p>
Acum vom configura ALSA pentru ca acesta sa functioneze intr-un mod corespunzator.
Va trebui sa editam anumite fisiere, pentru ca sistemul nostru sa recunoasca proaspat instalatele module ALSA.
</p>
<p>
Primul fisier care trebuie editat este <path>/etc/modules.d/alsa</path>.
</p>
<warn>
Nu este nevoie sa editam <path>/etc/modules.conf</path>. In schimb intotdeauna sa editati fisierele din <path>/etc/modules.d</path>.
</warn>
<p>
Uitati-va in portiunea dedicata pentru ALSA <e>de la sfarsitul fisierului</e>. 
Modificand aceasta linie puteti specifica numarul maxim de placi de sunet pe care il aveti (in general, doar una).
</p>
<pre caption="La sfarsitul fisierului /etc/modules.d/alsa">
# Setati aici numarul corect de placi de sunet.
<i>options snd cards_limit=1</i>
</pre>
<p>
Acum vom specifica ce driver(e) va trebui ALSA sa foloseasca. In acelasi fisier, editati astfel:
</p>
<pre caption="In /etc/modules.d/alsa">
## si apoi rulati `update-modules'.
## Cititi fisierul INSTALL al driverului alsa din /usr/share/doc pentru mai multe informatii.
##
##  ALSA portion
<i>alias snd-card-0 snd-emu10k1</i>
<i>## Daca aveti mai mult de o placa de sunet, adaugati:
## alias snd-card-1 snd-intel8x0
## alias snd-card-2 snd-ens1370</i>
##  OSS/Free portion
## alias sound-slot-0 snd-card-0
## alias sound-slot-1 snd-card-1
##
</pre>
<note>
Daca aveti mai mult de o placa de sunet, ajustati valoarea <c>cards_limit</c> si adaugati mai multi aliasuri snd-card 
in fisier. Nu am experienta in acest domeniu dar puteti gasi mai multe exemple de configuratii pentru multiple placi 
de sunet aici : <uri link="http://www.alsa-project.org/alsa-doc/alsa-howto/c1660.htm">Capitolul 6</uri>
din <uri link="http://www.alsa-project.org/alsa-doc/alsa-howto/alsa-howto.html">Ghidul ALSA</uri>.
</note>
<p>
Ultimul lucru care trebuie sa il faceti in acest fisier, aproape de sfarsitul lui, este sa verificati daca aceste 
linii nu sunt trecute ca si comentariu :
</p>
<pre caption="Near the end of /etc/modules.d/alsa">
alias /dev/mixer snd-mixer-oss
alias /dev/dsp snd-pcm-oss
alias /dev/midi snd-seq-oss
</pre>
<p>
Acum faceti dublu-click pe <path>/etc/modules.d/alsa</path> si cand sunteti siguri ca totul este bine, rulati <c>update-modules</c>.
</p>
<pre>
# <i>update-modules</i>
</pre>
<note>
Ruland <c>update-modules</c> acum va insera datele din <path>/etc/modules.d/alsa</path> in 
<path>/etc/modules.conf</path> </note>
<p>
Puteti de asemenea verifica daca /etc/devfsd.conf cuprinde driverele alsa si daca permisiunile sunt inregistrate corect.
</p>
<pre caption="/etc/devfsd.conf">
# ALSA/OSS stuff
# Comment/change these if you want to change the permissions on
# the audio devices
LOOKUP          snd          MODLOAD ACTION snd
LOOKUP          dsp          MODLOAD
LOOKUP          mixer        MODLOAD
LOOKUP          midi         MODLOAD
REGISTER        sound/.*     PERMISSIONS root.audio 660
REGISTER        snd/.*       PERMISSIONS root.audio 660
</pre>
<note>
Luati aminte devfsd.conf seteaza permsiunile lui /dev/sound ca root.audio. Astfel, pentru ca userii non-root sa poata 
folosi interfata audio vor trebui sa faca parte din grupul audio. </note>
</body>
</section>
</chapter>
<chapter>
<title>Pornirea lui ALSA</title>
<section>
	<title>Adaugarea lui alsasound la un nivel de rulare (runlevel)</title>
<body>
<p>
Primul lucru care il facem acum este adaugarea lui ALSA in procedura de startup din timpul bootarii. Astfel:
</p>
<pre>
# <i>rc-update add alsasound boot</i>
</pre>
<warn>Atentie, scriptul alsasound trebuie adaugat la nivelul "boot" si nu la nivelul "default".</warn>
</body>
</section>
<section>
	<title>Rulare si marirea volumului</title>
<body>
<p>
Avand in vedere ca suntem utilizatori Linux, nu vom dori sa restartam. Deci vom porni scriptul alsasound manual. </p>
<pre>
# <i>/etc/init.d/alsasound start</i>
</pre>
<p>
ALSA va rula acum. Daca totul este ok, ar trebui sa vedeti modulele ALSA ca fiind incarcate cand rulati <c>lsmod</c>.
Totusi, sunetul nu va functiona inca, deoarece canalele au sunetul inchis si trebuiesc deschise. Avem nevoie de 
<c>alsa-utils</c> pentru aceasta. </p>
<pre>
# <i>emerge alsa-utils</i>
# <i>amixer</i>
</pre>
<warn>
Nu ar trebui sa va apara mesajul urmator, dar <e>daca</e> apare o eroare de genul "amixer: Mixer attach default error: 
No such file or directory", ar trebui sa rulati folositi insmod pentru incarca manual <c>snd-mixer-oss</c> si 
<c>snd-pcm-oss</c>. Dupa aceasta rulati amixer din nou. </warn>
<pre caption="Doar daca va apare o eroare in timp ce rulati amixer">
# <i>insmod snd-mixer-oss</i>
# <i>insmod snd-pcm-oss</i>
# <i>amixer</i>
</pre>
<p>
Daca ati ajuns pana aici, ajustati volumul pentru canalele Master si PCM.
</p>
<pre>
# <i>amixer set Master 100 unmute</i>
# <i>amixer set PCM 100 unmute</i>
# <i>aplay $KDEDIR/share/sounds/pop.wav</i> <codenote>(pop.wav face parte din KDE)</codenote>
</pre>
<p>
Verificam daca sunetul functioneaza folosind comanda aplay (alsa play).
 Daca auziti un sunet de genul unui balon spart, atunci sunetul functioneaza. 
Acum, ajustati volumul dupa gustul dvs; <c>alsamixer</c> bazat pe ncurses este o metoda buna pentru a il regla. 
</p>
<p>
E posibil sa doriti sa folositi emerge <c>alsa-xmms</c> deoarece acesta va oferi suport ALSA pentru XMMS.
</p>
<p>
Cand restartati sistemul, scriptul de initializare <e>alsasound</e> va salva si restaura setarile dvs de sunet. 
</p>
</body>
</section>
</chapter>
<chapter>
<title>Note Finale</title>
<section>
	<title>Dupa upgradeuri asupra kernelului..</title>
<body>
<p>Daca veti reconstrui vreodata kernelul dvs, sau veti executa un upgrade catre un alt kernel, va trebui sa 
reconstruiti modulele ALSA.</p>
<p>Chiar daca probabil ati instalat <c>alsa-driver</c>, <c>alsa-libs</c> si <c>alsa-utils</c>, doar primul dintre 
ele va trebui reinstalat doarece va pune modulele in <path>/lib/modules/*/kernel/sound/pci/</path>.</p>
<pre caption="necesar dupa fiecare compilare de kernel">
# <i>emerge alsa-driver</i>
</pre>
</body>
</section>
<section>
	<title>/etc/modules.autoload</title>
<body>
<p>Nu trebuie sa editati acest fisier pentru a il folosi cu ALSA. Dupa ce rulam <c>rc-update add alsasound 
boot</c>, sistemul nostru va incarca modulele corecte in timpul startupului.</p>
<p>Nu este necesar sa adaugati <c>snd-pcm-oss</c> si/sau <c>snd-mixer-oss</c> in acest fisier. 
Uitati-va la <uri link="http://www.djcj.org/LAU/guide/alsbook/faq1.html">acest FAQ</uri> pentru mai multe 
informatii.</p>
</body>
</section>
<section>
	<title>Mai multe legaturi..</title>
<body>
<p>
Ati putea vizita urmatoarele adrese pentru informatii suplimentare:
</p>
<ul>
<li><uri link="http://www.gentoo.org/doc/en/desktop.xml">Ghidul Gentoo de configurare Desktop</uri></li>
<li><uri link="http://www.alsa-project.org">Pagina principala a proiectului ALSA</uri></li>
<li><uri link="http://www.alsa-project.org/documentation.php3">Documentatia pentru userii ALSA</uri></li>
<li><uri link="http://www.djcj.org">Ghidul How-to si FAQ ALSA</uri></li>
<li><uri link="http://tldp.org/HOWTO/Sound-HOWTO/index.html">Ghidul Sunet in Linux</uri></li>
<li><uri link="http://linux-sound.org/">Software pentru Sunet si MIDI in Linux</uri></li>
</ul>
</body>
</section>
</chapter>
</guide>
