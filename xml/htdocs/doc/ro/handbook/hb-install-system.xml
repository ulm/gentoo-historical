<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ro/handbook/hb-install-system.xml,v 1.7 2005/02/27 16:16:24 alin Exp $ -->

<sections>

<version>1.66</version>
<date>2005-02-25</date>

<section>
<title>Utilizarea mediului Chroot</title>
<subsection>
<title>Opţional: Alegerea Mirror-urilor</title>
<body>

<p>
Pentru a descărca sursele mai rapid, este recomandat să selectaţi un server
mirror rapid. Portage va căuta în fişierul dvs. <path>make.conf</path>
definiţia variabilei GENTOO_MIRRORS şi va utiliza server-ele mirror afişate
acolo. Puteţi naviga în documentul nostru ce conţine <uri
link="/main/en/mirrors.xml">lista cu servere mirror</uri> şi va căuta un server
mirror (sau mai multe) mai apropiate de dvs. (deoarece, în cele mai multe
cazuri, acestea sunt şi cele mai rapide), sau puteţi utiliza utilitarul
<c>mirrorselect</c> oferit de noi, cu care puteţi printr-o interfaţă
prietenoasă, să selectaţi server-ele mirror pe care le doriţi.
</p>
  
<pre caption="Utilizarea mirrorselect pentru variabila GENTOO_MIRRORS">
# <i>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<warn>
Nu selectaţi nici un server mirror IPv6. Arhivele noastre stage nu suportă
IPv6.
</warn>

<p>
O altă setare importantă este variabila SYNC din <path>make.conf</path>.
Această variabilă conţine server-ul rsync pe care doriţi să-l utilizaţi când vă
actualizaţi structura Portage (colecţia de fişiere ebuild, script-urile ce
conţin toate informaţiile de care Portage are nevoie pentru a descărca şi a
instala aplicaţiile). Deşi puteţi introduce manual un server SYNC,
<c>mirrorselect</c> vă poate uşura această operaţie:
</p>

<pre caption="Selectarea unui server mirror rsync utilizând mirrorselect">
# <i>mirrorselect -i -r -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<p>
După rularea <c>mirrorselect</c> este recomandat să verificaţi încă o dată
setările din <path>/mnt/gentoo/etc/make.conf</path> !
</p>
 
</body>
</subsection>
<subsection>
<title>Precizarea Informaţiilor despre DNS</title>

<body>

<p>
A rămas un singur lucru de făcut, înainte să putem intra noul mediu şi
anume trebuie să copiem informaţiile despre DNS în
<path>/etc/resolv.conf</path>. Trebuie să facem asta, pentru a fi siguri că
reţeaua funcţionează, chiar şi după ce intrăm în noul mediu.
<path>/etc/resolv.conf</path> conţine serverele DNS pentru reţeaua noastră.
</p>

<pre caption="Copierea informaţiilor despre DNS">
<comment>(Opţiunea "-L" ne asigură că nu copiem un link simbolic)</comment>
# <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
</pre>

</body>
</subsection>
<subsection>
<title>Mount-area Sistemului de Fişiere proc</title>
<body>

<p>
Mount-aţi sistemul de fişiere <path>/proc</path> în
<path>/mnt/gentoo/proc</path> pentru a permite instalării să utilizeze
informaţia oferită de kernel, chiar şi în mediul chroot.
</p>

<pre caption="Mount-area /proc">
# <i>mount -t proc none /mnt/gentoo/proc</i>
</pre>

</body>
</subsection>
<subsection>
<title>Intrarea în noul Mediu</title>
<body>

<p>
Acum, că toate partiţiile sunt iniţializate şi mediul de bază instalat,
a venit momentul să intrăm în noul mediu prin acţiunea de
<e>chrooting</e> în acesta. Aceasta înseamnă că ne mutăm din mediul în
care a decurs instalarea (LiveCD sau alt mediu de instalare), în sistemul
instalat (adică în partiţia iniţializată)
</p>

<p>
Acţiunea de chrooting, se face in trei etape. Mai întâi, vom muta
rădăcina, din <path>/</path> (de pe discul de instalare), către
<path>/mnt/gentoo</path> (de pe partiţia aleasa pentru instalare), folosind
comanda <c>chroot</c>. Apoi, vom creea un nou mediu, folosind comanda
<c>env-update</c>, care, în esenţă, creează variabile ale mediului. În
final, încărcăm aceste variabile în memorie, folosind comanda
<c>source</c>.
</p>

<pre caption="Chroot în noul mediu">
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>env-update</i>
 * Caching service dependencies...
# <i>source /etc/profile</i>
</pre>

<p>
Felicitări! Sunteţi acum în propriul mediu Gentoo Linux. Desigur, suntem
departe de a fi terminat, motiv pentru care procesul de instalare mai are
câteva secţiuni de parcurs :-)
</p>


</body>
</subsection>
<subsection>
<title>Actualizarea Structurii Portage</title>

<body>

<p>
Acum, trebuie să vă actualizaţi structura Portage la ultima versiune. <c>emerge
--sync</c> efectuează această acţiune pentru dvs.
</p>

<pre caption="Actualizarea structurii Portage">
# <i>emerge --sync</i>
</pre>

<p>
Dacă sunteţi anunţat că o versiune mai nouă a Portage este
disponibilă şi că ar trebui să o actualizaţi, puteţi, fară grijă,
să ignoraţi acest mesaj. Portage va fi actualizat pentru dumneavoastră,
mai târziu, pe parcursul instalării.
</p>

</body>
</subsection>
<subsection id="configure_USE">
<title>Configurarea variabilei USE</title>
<body>

<p>
<c>USE</c> este una dintre cele mai puternice variabile, pe care Gentoo o pune
la dizpoziţia utilizatorilor. Multe dintre programe pot fi compilate, cu sau
fără suport opţional pentru diferite pachete. De exemplu, unele programe
pot fi compilate cu suport gtk sau cu suport qt. Altele pot fi compilate cu sau
fără suport SSL. Unele programe pot fi chiar compilate cu suport
framebuffer (svgalib), în loc de suport X11 (X-server).
</p>

<p>
Majoritatea distribuţiilor îşi compilează propriile pachete, folosind
suport pentru cât mai multe lucruri posibile, crescând astfel dimeniunea
programelor şi totodată a timpului de pornire, fără a menţiona enorma
cantitate de dependenţe. Folosind Gentoo, puteţi defini cu ce opţiuni să
fie compilat un pachet. Aici intră in joc, variabila <c>USE</c>
</p>

<p>
În cadrul variabilei <c>USE</c>, definiţi cuvinte cheie care sunt folosite
în opţiunile compilării. De exemplu, opţiunea <e>ssl</e> va compila
suportul pentru ssl, în cadrul programelor care îl suportă. <e>-X</e> va
elimina suportul pentru X-server (observaţi semnul minus din faţă).
<e>gnome gtk -kde -qt</e> va compila programele cu suport gnome (gtk) dar
fără suport kde (şi qt), făcându-vă sistemul, pe deplin optimizat
pentru GNOME.
</p>

<p>
Setările <c>USE</c> implicite se află în fişierele
<path>make.defaults</path> din profilul dvs. Veţi putea regăsi fişierele
<path>make.defaults</path> în directorul spre care indică
<path>/etc/make.profile</path> şi în toate directoarele ascendente. Setarea
<c>USE</c> reprezintă suma tuturor setărilor <c>USE</c> din toate
fişierele <path>make.defaults</path>. Setările <c>USE</c> implicite, se
află în fişierele <path>/etc/make.profile/make.defaults</path>. Ceea ce
adăugaţi în <path>/etc/make.conf</path> este calculat în concordanţă cu
aceste setări implicite. Dacă adăugaţi ceva setărilor <c>USE</c>, este
adăugat listei implicite. Dacă ştergeţi ceva din setările <c>USE</c>
(prin scrierea semnului minus in faţa sa), atunci este şters din lista
implicită (în cazul in care ar fi fost in listă). <e>Niciodată</e> nu
faceţi schimbări în interiorul directorului <path>/etc/make.profile</path>;
va fi rescris când actualizaţi Portage!
</p>

<p>
O descriere completă, a variabilei <c>USE</c>, poate fi găsită în cea de
a doua parte a Gentoo Handbook, <uri link="?part=2&amp;chap=1">Indicatori
USE</uri>. O descriere completă a variabilelor <c>USE</c> existente, poate fi
găsită în <path>/usr/portage/profiles/use.desc</path>.
</p>

<pre caption="Vizualizarea indicatorilor USE existenţi">
# <i>less /usr/portage/profiles/use.desc</i>
<comment>(Puteţi derula utilizând tastele săgeţi şi să ieşiţi prin apăsarea 'q')</comment>
</pre>

<p>
Drept exemplu, vă prezentăm setările unui sistem bazat pe KDE, cu suport
DVD, ALSA si CD-Recording.
</p>

<pre caption="Deschidem /etc/make.conf">
# <i>nano -w /etc/make.conf</i>
</pre>

<pre caption="Setările USE">
USE="-gtk -gnome qt kde dvd alsa cdr"
</pre>

</body>
</subsection>
<subsection>
<title>Opţional: Localizările GLIBC</title>
<body>

<p>
Probabil că veţi utiliza una sau poate două locaizări pe sistemul dvs.
Până acum, după compilarea <c>glibc</c> un set complet de localizări
este creat. Începând de acum, activaţi indicatorul USE <c>userlocales</c>
şi specificaţi doar localizările necesare în
<path>/etc/locales.build</path>. Această acţiune trebuie efectuată doar
în cazul în care cunoaşteţi ce localizări să utilizaţi.
</p>

<pre caption="Activaţi indicatorul USE userlocales special pentru glibc">
# <i>mkdir /etc/portage</i>
# <i>echo "sys-libs/glibc userlocales" >> /etc/portage/package.use</i>
</pre>

<p>
Acum specificaţi ce localizări doriţi să utilizaţi:
</p>

<pre caption="Deschiderea /etc/locales.build">
# <i>nano -w /etc/locales.build</i>
</pre>

<p>
Următoarele localizări sunt un exemplu de a activa atât limba engleză
(Statele Unite) cât şi limba germană (Germania) cu formatele de caractere
specifice (cum ar fi UTF-8).
</p>

<pre caption="Specificarea localizărilor dvs.">
en_US/ISO-8859-1
en_US.UTF-8/UTF-8
de_DE/ISO-8859-1
de_DE@euro/ISO-8859-15
</pre>

</body>
</subsection>
</section>
<section>
<title>Diferenţele între Stage1, Stage2 şi Stage3</title>
<body>

<p>
Acum luaţi loc şi gândiţi-vă la paşii precedenţi. V-am cerut să
selectaţi unul dintre <e>stage1</e>, <e>stage2</e> sau <e>stage3</e> şi v-am
avertizat că alegerea facută are mare importanţă pentru paşii ce vor
urma. Ei bine, acesta este primul loc in care alegerea făcută defineşte
pasii ce vor urma.
</p>

<ul>
<li>
Dacă aţi ales <e>stage1</e>, atunci va trebui să urmaţi <e>ambii</e>
paşi din acest capitol (incepând cu <uri link="#doc_chap3">Parcurgerea de la
Stage1 la Stage2</uri>)
</li>
<li>
Dacă aţi ales <e>stage2</e> puteţi să treceţi doar peste primul pas şi
să incepeţi imediat cu cel de-al doilea <uri link="#doc_chap4">Parcurgerea
de la Stage2 la Stage3</uri>)
</li>
<li>
Dacă aţi ales<e>stage3</e>, atunci puteţi trece peste ambii paşi şi continua
cu <uri link="?part=1&amp;chap=7">Configurarea Kernel-ului</uri>
</li>
</ul>
  

</body>
</section>
<section>
<title>Parcurgerea de la Stage1 la Stage2</title>
<subsection>
<title>Introducere în Bootstrapping</title>
<body>

<p>
Aşadar, vreţi să compilaţi totul de la zero? Bine, atunci :-)
</p>

<p>
La acest pas, vom efectua operaţia de <e>bootstrap</e> sistemului
dumneavoastă Gentoo. Acest proces durează mult timp, dar rezultatul este un
sistem complet optimizat pentru nevoile caracteristice maşinii
dumneavoastră.
</p>

<p>
Operaţia de <e>Bootstrapping</e> înseamnă a construi GNU C Library, GNU C
Compiler Collection şi multe alte programe cheie ale sistemului.
</p>

<p>
Înainte de a începe acţiunea bootstrap asupra sistemului, poate veţi dori
să descărcaţi tot codul sursă necesar, mai întâi. Dacă vnu doriţi
acest lucru, continuaţi cu <uri link="#bootstrap">Procesul Bootstrap al
Sistemului</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Opţional: Descărcarea Surselor Mai Întâi</title>

<body>

<p>
Dacă nu aţi copiat, până acum, sursele, atunci scriptul de bootstrap va
descărca toate fişierele necesare. Dacă vreţi să descărcaţi sursele mai întâi
şi să continuaţi procesul bootstrap al sistemului ulterior (de exemplu pentru
că nu vreţi să aveţi o conexiune deschisă în timpul compilării), atunci
folosiţi opţiunea <e>-f</e> a scriptului bootstrap, care va descărca (fetch -
asocierea cu litera <e>f</e>) toate sursele pentru dumneavoastră.
</p>

<pre caption = "Descărcarea surselor necesare">
# <i>cd /usr/portage</i>
# <i>scripts/bootstrap.sh -f</i>
</pre>

</body>
</subsection>
<subsection id="bootstrap">
<title>Procesul Bootstrap al Sistemului</title>
<body>

<p>
Bine atunci, luaţi tastatura şi scrieţi următoarele comenzi pentru a
începe procesul bootstrap. Apoi mergeţi şi distraţi-vă cu altceva,
pentru că acest proces va dura ceva timp până se va sfârşi.
</p>

<pre caption = "Procesul Bootstrap al Sistemului">
# <i>cd /usr/portage</i>
# <i>scripts/bootstrap.sh</i>
</pre>

<p>
Dacă aveţi setat indicatorul USE <c>nptl</c>, rularea încă o dată a
<c>bootstrap.sh</c> ar putea să returneze o eroare în legatură cu blocarea
<c>linux26-headers</c> de către <c>linux-headers</c>. Dacă primiţi eroarea
aceasta, dezinstalaţi <c>linux-headers</c> şi încercaţi din nou:
</p>

<pre caption="Dezinstalarea linux-headers din sistemul dvs.">
# <i>emerge -C linux-headers</i>
# <i>emerge --oneshot --nodeps linux26-headers</i>
# <i>scripts/bootstrap.sh</i>
</pre>

<p>
Acum vom continua cu următoarea etapă, <uri link="#doc_chap4">Parcurgerea
de la Stage2 la Stage3</uri>
</p>

</body>
</subsection>
</section>
<section>
<title>Parcurgerea de la Stage2 la Stage3</title>

<subsection>
<title>Introducere</title>

<body>

<p>
Dacă citiţi această secţiune, înseamna că aţi implementat sistemul
(ori pentru că l-aţi implementat în prealabil, ori că folosiţi
<e>stage2</e>). Atunci este timpul să construim toate pachetele sistemului.
</p>

<p>
<e>Toate</e> pachele sistemului? Nu, nu chiar. În această etapă, veţi
construi acele pachete ale căror alternativă nu există. Unele pachete de
sistem au mai multe alternative (ca sistemele pentru log-uri) şi cum Gentoo
se bazează pe alternative, nu vrem să vă impunem unul.
 </p>

</body>
</subsection>
<subsection>
<title>Opţional: Vizualizarea a ceea ce se va întâmpla</title>

<body>

<p>
Dacă vreţi să ştiţi ce pachete vor fi instalate, executaţi <c>emerge
--pretend</c>. Această comandă va afişa o lista cu ceea ce va fi
construit. Pentru că această listă este destul de mare, ar trebui să
folositi un sistem de paginare ca <c>less</c> sau <c>more</c> pentru a naviga
în sus sau în jos prin listă.
</p>

<pre caption = "Vizualizarea a ceea ce 'emerge system' va face">
# <i>emerge --pretend system | less</i>
</pre>

</body>
</subsection>
<subsection>
<title>Opţional: Descărcarea surselor</title>

<body>

<p>
Dacă doriţi ca <c>emerge</c> să descarce sursele înainte să continuaţi
(de exemplu pentru că nu vreţi ca şi conexiunea să fie lăsată
deschisă pe parcursul construitii pachetelor), puteţi folosi opţiunea
<c>--fetchonly</c> a comenzii <c>emerge</c>, care va descărca sursele pentru
dumneavoastră.
</p>

<pre caption = "Descărcarea surselor în sistem">
# <i>emerge --fetchonly system</i>
</pre>

</body>
</subsection>
<subsection>
<title>Construirea sistemului</title>

<body>

<p>
Pentru a începe construirea sistemului, executaţi <c>emerge system</c>. Apoi
mergeţi şi găsiţi-vă de lucru, pentru că această etapa durează
foarte mult până la sfârşit.
</p>

<pre caption = "Construirea Sistemului">
# <i>emerge system</i>
</pre>

<p>
Puteţi, deocamdată, să ignoraţi orice avertisment în legătură cu
fişierele de configurare actualizate (şi execuţia <c>etc-update</c>).
Când sistemul dumneavoastră Gentoo este instalat în totalitate şi
boot-at, citiţi documentaţia noastră despre <uri
link="?part=3&amp;chap=2#doc_chap3">Configurarea Protecţiei
Fişierelor</uri>.
</p>

<p>
Când procesul de construire a sistemului a luat sfârşit, continuaţi cu
<uri link="?part=1&amp;chap=7">Configurarea Kernel-ului</uri>.
</p>
</body>
</subsection>
</section>
</sections>

