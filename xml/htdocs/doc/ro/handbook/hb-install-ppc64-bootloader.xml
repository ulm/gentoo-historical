<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ro/handbook/hb-install-ppc64-bootloader.xml,v 1.1 2004/12/02 14:47:50 neysx Exp $ -->

<sections>

<version>1.4</version>
<date>2004-10-23</date>

<section>
<title>Alegerea</title>
<subsection>
<title>Introducere</title>
<body>

<p>
Acum, că kernel-ul este configurat si compilat si fişierele de configurarea a sistemului sunt completate corect, este timpul să instalăm un program ce va încărca kernel-ul când porniţi sistemul. Un astfel de program se numeşte <e>bootloader</e>.
</p>

<p>
Pe Linux/PPC64 avem doar yaBoot ca aplicaţie bootloader până când grub2 va fi terminat.
</p>

</body>
</subsection>
</section>
<section id="yaboot">
<title>Utilizarea Yaboot</title>
<subsection>
<title>Introducere</title>
<body>

<impo>
Va trebui să utilizaţi yaboot-static în locul yaboot, pentru că yaboot nu se va compila pe PPC64.
</impo>

<p>
Există 2 moduri de configurare a Yaboot pentru sistemul dvs. Puteţi noua şi îmbunătăţita aplicaţie <c>yabootconfig</c> inclusă în <path>yaboot-1.3.8-r1</path> şi apoi să setaţi automat yaboot. Dacă, din anumite motive, nu doriţi să rulaţi <c>yabootconfig</c> pentru a seta automat <path>/etc/yaboot.conf</path> sau instalaţi Gentoo pe un G5 (pe care <c>yabootconfig</c> nu funcţionează întotdeauna), puteţi să editaţi exemplul de fişier deja instalat pe sistemul dvs.
</p>

<impo>
yabootconfig/ybin nu va funcţiona pe maşinile IBM. Va trebui să instalaţi yaboot altfel:
<uri link="#yaboot-ibm">Utilizarea yaboot pe IBM</uri>
</impo>

<ul>
  <li><uri link="#yabootconfig">Implicit: Utilizarea yabootconfig</uri></li>
  <li>
    <uri link="#manual_yaboot">Alternativ: Configurarea Manuală a yaBoot</uri>
  </li>
</ul>

</body>
</subsection>
<subsection id="yabootconfig">
<title>Implicit: Utilizarea yabootconfig</title>
<body>

<p>
<c>yabootconfig</c> va autodetecta partiţiile de pe maşina dvs. şi va seta combinaţii duble sau triple cu Linux, Mac OS şi Mac OS X.
</p>

<p>
Pentru a utiliza <c>yabootconfig</c>, drive-ul dvs. trebuie să conţină o partiţie bootstrap şi <path>/etc/fstab</path> trebuie să fie configurat conform partiţiilor Linux. Amândouă condiţiile trebuie să se fi îndeplinit deja în paşii anteriori. Pentru a începe, asiguraţi-vă că aveţi ultima versiune de yaboot instalată prin rularea <c>emerge --update
yaboot-static</c>. Aceasta este necesară, deoarece ultima versiune va fi disponibilă în Portage, dar este posibil să nu fi fost instalată în arhivele tar stage.
</p>

<pre caption = "Instalarea yaboot-static">
# <i>emerge --update yaboot-static</i>
</pre>

<p>
Acum, rulaţi <c>yabootconfig</c>. Programul va rula şi va confirma locaţia partiţiei bootstrap. Apăsaţi <c>Y</c> dacă aceasta este corectă. Dacă nu, verificaţi încă o dată <path>/etc/fstab</path>. Apoi, yabootconfig va scana setările sistemului, va crea <path>/etc/yaboot.conf</path> şi va rula <c>mkofboot</c>. <c>mkofboot</c> este utilizat pentru a formata partiţia bootstrap şi a instala fişierul de configurare yaboot în aceasta.
</p>

<p>
Puteţi verifica conţinutul fişierului <path>/etc/yaboot.conf</path>. Dacă modificaţi <path>/etc/yaboot.conf</path> (cum ar fi setarea sistemului de operare implicit), trebuie să rulaţi din nou <c>ybin -v</c> pentru a aplica modificările în partiţia bootstrap.
</p>

<p>
Acum, puteţi continua cu secţiunea <uri link="#reboot">Repornirea Sistemului</uri>.
</p>

</body>
</subsection>
<subsection id="manual_yaboot">
<title>Alternativ: Configurarea Manuală a yaBoot</title>
<body>

<p>
Mai întâi, asiguraţi-vă că aveţi ultima versiune <c>yaboot-static</c> instalată în sistemul dvs.:
</p>

<pre caption = "Instalarea yaboot">
# <i>emerge --update yaboot-static</i>
</pre>

<p>
Mai jos veţi găsi un fişier <path>yaboot.conf</path> complet. Modificaţi-l în voie.
</p>

<pre caption = "/etc/yaboot.conf">
<comment>## /etc/yaboot.conf
##
## rulaţi: "man yaboot.conf" for details. Nu modificaţi până nu aţi consultat manualul!!
## consultaţi de asemenea: /usr/share/doc/yaboot/examples pentru exemple de configuraţii.
##
## Pentru un meniu dual-boot, adăugaţi una sau mai multe intrări dintre următoarele:
## bsd=/dev/hdaX, macos=/dev/hdaY, macosx=/dev/hdaZ

## partiţia bootstrap:</comment>

boot=/dev/sda2

<comment>## ofboot este modul openfirmware de a specifica partiţia bootstrap.
## Dacă nu este definit, yaboot nu va funcţiona pe G5 (decât dacă introduceţi argumentele
## necesare programului mkofboot/ybin).
## hd:X înseamnă /dev/sdaX (sau /dev/hdaX).
## 
## Utilizatorii G5 ar trebui să decomenteze această linie!!</comment>

ofboot=hd:2

<comment>##hd: este reprezentarea open firmware pentru sda</comment>
device=hd:
partition=4

delay=5
defaultos=macosx
timeout=30
install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot

<comment>#################
## Această secţiune poate fi duplicat dacă aveţi mai mult de un kernel sau
## opţiuni de boot
#################</comment>
image=/boot/kernel-2.6.7-gentoo-r8
  label=Linux
  root=/dev/sda4
  sysmap=/boot/System.map-2.6.7
  read-only
<comment>##################</comment>

macos=hd:5
macosx=hd:6
enablecdboot
enableofboot
</pre>

<p>
Odată setat <path>yaboot.conf</path> corect, rulaţi <c>mkofboot -v</c> pentru a instala setările în partiţia bootstrap. <e>Nu uitaţi acest lucru!</e> Dacă totul se desfăşoară corect, şi aveţi aceleaşi opţiuni ca în exemplul de mai sus, urmatoarea acţiune de restart vă va afişa un meniu simplu, format din 5 intrări. Dacă modificaţi configurarea yaboot ulterior, va trebui să rulaţi doar <c>ybin -v</c> pentru a actualiza partiţia bootstrap - <c>mkofboot</c> este utilizat doar pentru setarea iniţială.
</p>

<p>
Pentru mai multe informaţii despre yaBoot, vizitaţi <uri link="http://penguinppc.org/projects/yaboot">proiectul yaboot</uri>. Deocamdată, continuaţi cu secţiunea <uri link="#reboot">Repornirea Sistemului</uri>.
</p>

</body>
</subsection>
</section>
<section id="yaboot-ibm">
<title>Utilizarea yaboot pe IBM</title>
<body>

<p>
Pe maşinile IBM nu puteţi rula yabootconfig sau ybin. Trebuie să efectuaţi următorii paşi:
</p>

<ul>
  <li>Instalaţi yaboot-static</li>
  <li>Rulaţi 'dd if=/usr/lib/yaboot/yaboot.chrp of=/dev/sdXX' (completaţi XX cu discul şi partiţia pentru partiţia RPeP; aceasta era în exemplul nostru, /dev/sda1)</li>
  <li>Apoi, construiţi-vă fişierul propriu yaboot.conf şi copiaţi-l în /etc. Analizaţi fişierul de configurare exemplificat anterior sau citiţi pagina de manual pentru yaboot.conf)</li>
  <li>Presupunând că dispozitivul dvs. de boot în OF indică discul pe care lucraţi curent şi partiţia de boot este activă, atunci va funcţiona, altfel, în momenul IPL, intraţi în meniul multiboot şi setaţi dispozitivul de boot cu cel căruia îi aparţine partiţia de boot, dorită.</li>
  <li>Asta este tot!</li>
</ul>

</body>
</section>
<section id="reboot">
<title>Repornirea Sistemului</title>
<subsection>
<body>

<p>
Ieşiţi din mediul chroot şi demount-aţi toate partiţiile mount-ate. Apoi tastaţi comanda magică pe care aţi aşteptat-o: <c>reboot</c>.
</p>

<pre caption="Ieşirea din chroot, demount-area tuturor partiţiilor şi repornirea">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

<p>
Desigur, nu uitaţi să îndepărtaţi CD-ul boot-abil, altfel CD-ul va boot-a din nou în locul noului sistem Gentoo.
</p>

<p>
Odată repornită instalarea Gentoo, terminaţi-o cu <uri link="?part=1&amp;chap=11">Finalizarea Instalării Gentoo</uri>.
</p>

</body>
</subsection>
</section>
</sections>
