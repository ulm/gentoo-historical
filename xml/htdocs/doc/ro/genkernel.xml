<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ro/genkernel.xml,v 1.1 2004/12/22 22:30:18 swift Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ro/genkernel.xml" lang="ro">
<title>Ghid Genkernel pentru Gentoo Linux</title>

<author title="Autor">
  <mail link="plasmaroo@gentoo.org">Tim Yamin</mail>
</author>
<author title="Translator">
  <mail link="alin@gentoo.ro">Alin Dobre</mail>
</author>

<abstract>
Acest ghid intenţionează să reprezinte o referinţă pentru toate
funcţiile oferite de genkernel.
</abstract>

<license/>

<version>1.1.2</version>
<date>2004-11-05</date>

<chapter>
<title>Introducere</title>
<section>
<title>Introducere</title>
<body>

<p>
Genkernel este proiectat pentru a permite utilizatorilor ce nu au fost
obişnuiţi anterior să compileze un kernel, setări asemănătoare cu
cele utilizate pe mediile LiveCD Gentoo ce detectează automat componentele
dvs. hardware.
</p>

<p>
Unii utilizatori pot, de asemenea, să fie interesaţi în utilizarea
genkernel pentru componentele hardware ce necesită iniţializare şi un
kernel funcţional înainte de a fi utilizat în procesul de boot. Deoarece
genkernel compilează modulele dvs. de kernel, astfel permiţând utilizarea
componentelor hardware ce necesită parametri la încărcarea modulelor,
pentru a putea fi utilizate.
</p>

</body>
</section>
<section>
<title>Este genkernel pentru mine?</title>
<body>

<p>
Genkernel este adesea o alegere bună pentru cei care nu sunt obişnuiţi cu
procesul de compilare a propriului kernel sau acelora care nu sunt siguri
despre configuraţiile lor hardware.
</p>

<p>
Deoarece genkernel este proiectat pentru a utiliza o configuraţie generică,
ar trebui să poată suporta toate componentele dvs. hardware - oricum,
deoarece toate fişierele driver şi modulele trebuie compilate, de asemenea,
compilarea unui kernel singur este, de obicei, mai rapidă deoarece ştiţi
exact de ce aveţi nevoie.
</p>

<p>
Totuşi, Genkernel nu suportă procesul de boot decât de pe partiţii de tip
LVM2/EVMS2. Utilizatorilor li se recomandă să utilizeze un kernel compilat
manual, momentan.
</p>

</body>
</section>
<section>
<title>Obţinerea genkernel</title>
<body>

<p>
Puteţi obţine genkernel prin simpla rulare a comenzii <c>emerge
genkernel</c>. Nu uitaţi să utilizaţi parametrul <c>-k</c> pentru comanda
emerge, dacă utilizaţi pachete binare, cum ar fi GRP. Datorită faptului
că pachetele GRP conţin o versiune veche de genkernel, parametrii sunt
diferiţi. Deci, va trebui să consultaţi <uri
link="/doc/ro/handbook/handbook-x86.xml?part=1&amp;chap=10">Manualul
Gentoo</uri> şi <path>genkernel --help</path>.
</p>

</body>
</section>
<section>
<title>Plaforme suportate</title>
<body>

<p>
Începând cu genkernel 3.0.2, următoarele platforme ar trebui suportate:
alpha, amd64, parisc, parisc64, ppc, ppc64, sparc, sparc64 şi x86. În cazul
în care credeţi că există o eroare în codul de suportare şi nu în
genkernel, vă rugăm să raportaţi o eroare în <uri
link="http://bugs.gentoo.org">Gentoo Bugzilla.</uri>
</p>

</body>
</section>
</chapter>

<chapter>
<title>Utilizarea Genkernel</title>
<section>
<title>Introducere</title>
<body>

<p>
Genkernel este proiectat să funcţioneze în trei moduri:
</p>

<ul>
  <li>modul "all": acesta compilează imaginea de kernel şi cea initrd</li>
  <li>modul "kernel": acesta doar compilează imaginea de kernel</li>
  <li>modul "initrd": acesta doar compilează imaginea initrd</li>
</ul>

<p>
Cei mai mulţi utilizatori vor dori doar modul "all", ce rulează modul
"kernel" si modul "initrd" automat pentru dvs. <b>Notaţi</b> faptul că
modurile "kernel" şi "initrd" sunt doar aliasuri pentru modul "all", deci
momentan nu vor avea nici un efect special.
</p>

<p>
Deşi genkernel este în principal o comandă pentru a vă înlesni
compilarea de kernel, genkernel conţine, de asemenea, mulţi parametri
diferiţi ce vă permit să vă personalizaţi modul cum imaginea de kernel
va fi configurată sau compilată.
</p>

</body>
</section>
<section>
<title>Parametrii de compilare Genkernel</title>
<body>

<p>
Genkernel suportă următoarele argumente ce sunt transferate aplicaţiilor
corespunzătoare în momentul asamblării imaginii dvs. de kernel:
</p>

<ul>
  <li>
    <b>--kernel-as=<c>unAnumeAsamblor</c></b>: Aceasta specifică o aplicaţie
    pentru asamblare ce va fi utilizată pentru compilarea de kernel.
  </li>
  <li>
    <b>--kernel-cc=<c>unAnumeCompilator</c></b>: Aceasta specifică un
    compilatori ce ar fi utilizat pentru a vă compila imaginea de kernel.
  </li>
  <li>
    <b>--kernel-ld=<c>unAnumeEditorDeLegături</c></b>: Aceasta specifică un
    editor de legături ce va fi utilizat pentru a vă compila imaginea de
    kernel.
  </li>
  <li>
    <b>--kernel-make=<c>oAnumeAplicaţieMake</c></b>: Aceasta specifică o
    aplicaţie alternativă GNU make ce va fi utilizată pentru compilarea
    imaginii de kernel.
  </li>
</ul>

<ul>
  <li>
    <b>--utils-as=<c>unAnumeAsamblor</c></b>: Aceasta specifică o aplicaţie
    pentru asamblare ce va fi utilizată pentru compilarea utilitarelor
    suplimentare.
  </li>
  <li>
    <b>--utils-cc=<c>unAnumeCompilator</c></b>: Aceasta specifică un
    compilatori ce ar fi utilizat pentru a vă compila utilitarele
    suplimentare.
  </li>
  <li>
    <b>--utils-ld=<c>unAnumeEditorDeLegături</c></b>: Aceasta specifică un
    editor de legături ce va fi utilizat pentru a vă compila utilitarele
    suplimentare.
  </li>
  <li>
    <b>--utils-make=<c>oAnumeAplicaţieMake</c></b>: Aceasta specifică o
    aplicaţie alternativă GNU make ce va fi utilizată pentru compilarea
    utilitarelor suplimentare.
  </li>
</ul>

<ul>
  <li>
    <b>--makeopts=<c>-jJobs</c></b>: Aceasta specifică parametrii ce vor fi
    transferaţi aplicaţiei GNU make în momentul compilării imaginii de
    kernel sau a utilitarelor suplimentare.
  </li>
</ul>

</body>
</section>
<section>
<title>Parametrii Genkernel pentru kernel</title>
<body>

<p>
Genkernel suportă următorii parametri, unii dintre aceştia având
echivalente <c>--<b>no-</b>opţiune</c> ce influenţează compilarea de
kernel:
</p>

<ul>
  <li>
    <b>--callback="echo Hello"</b>: Această rutină invocă argumentele
    specificate după ce imaginea de kernel şi modulele corespunzătoare au
    fost compilate; dar înainte ca imaginea initrd să fie compilată.
    Această funcţionalitate este utilă când doriţi ca unele module
    externe să fie instalate în imaginea initrd prin instalarea pachetelor
    corespunzătoare şi redefinirea unui grup de module a genkernel.
  </li>
  <li>
    <b>--<c>no-</c>clean</b>: Această opţiune rulează <e>sau nu
    rulează</e> <c>make clean</c> înainte de compilarea imaginii dvs. de
    kernel. Aceasta cauzează ca toate fişierele obiect sau dependenţele
    să fie şterse.
  </li>
  <li>
    <b>--<c>no-</c>mrproper</b>: Aceasta rulează <e>sau nu rulează</e>
    <c>make mrproper</c> înainte de compilarea imaginii dvs. de kernel.
    Aceasta cauzează ca toate fişierele obiect, dependenţele <b>şi
    configuraţia dvs.</b> să fie şterse.
  </li>
</ul>

<ul>
  <li>
    <b>--kerneldir=<path>/cale/catre/surse</path></b>: Aceasta specifică o
    locaţie alternativă a surselor de kernel, în locul locaţiei implicite,
    <path>/usr/src/linux</path>.
  </li>
  <li>
    <b>--kernel-config=<path>/cate/catre/fisierul-de-configurare</path></b>:
    Aceasta specifică o configuraţie de kernel alternativă pentru
    utilizare, în locul <path>/path/to/sources/.config</path>, care este
    utilizată implicit.
  </li>
</ul>

<ul>
  <li>
    <b>--<c>no-</c>bootsplash</b>: Aceasta adaugă <e>sau nu adaugă</e>
    suport pentru bootsplash în imaginea initrd complilată de genkernel.
    Momentan, nu toate arhitecturile suportă bootsplash, dar este necesar
    şi un kernel care să suporte această facilitate.
  </li>
  <li>
    <b>--<c>no-</c>menuconfig</b>: Aceasta rulează <e>sau nu rulează</e>
    aplicaţia de configurare bazată pe meniuri înainte de a vă compila
    imaginea de kernel, dupa ce a fost rulat <c>make oldconfig</c>.
  </li>
</ul>

<ul>
  <li>
    <b>--no-initrdmodules</b>: Această opţiune nu copiază nici un modul
    în imaginea initrd creată de genkernel.
  </li>
  <li>
    <b>--<c>no-</c>install</b>: Aceasta instalează <e>sau nu instalează</e>
    imaginea de kernel, modulele şi imaginea initrd, după terminarea
    procesului de compilare.
  </li>
</ul>

</body>
</section>
<section>
<title>Alţi parametri Genkernel</title>
<body>

<p>
Genkernel suportă, de asemenea, alţi diverşi parametri ce nu se
incadrează in celelalte două categorii:
</p>

<ul>
  <li>
    <b>--arch-override=<c>altaArhitectura</c></b>: Acest parametru poate fi
    utilizat pentru a suprascrie arhitectura detectată automat de genkernel,
    dacă mecanismul de autodetecţie nu funcţionează (vă rugăm să
    raportaţi eroarea, dacă nu funcţionează!) sau dacă doriţi să
    compilaţi pentru mai multe arhitecturi.
  </li>
</ul>

<ul>
  <li>
    <b>--busybox-config=<path>/cale/catre/fisier-configurare-busybox</path></b>:
    Aceasta suprascrie fişierul de configurare implicit pentru busybox cu cel
    specificat
  </li>
  <li>
    <b>--busybox-bin=<path>/cale/catre/fisier-binar-busybox.tar.bz2</path></b>:
    Utilizarea acestei opţiuni specifică faptul că binarul busybox nu va
    fi compilat, iar arhiva tar specificată va fi utilizată în loc.
    Notaţi faptul că busybox <e>trebuie</e> compilat static!
  </li>
</ul>

<ul>
  <li>
    <b>--minkernpackage=<path>/iesire/pentru/kernel.tar.bz2</path></b>: Acest
    parametru compune o arhivă tar pentru kernel şi initrd denumită ca
    <path>initrd</path> pentru fişierul specificat. Nu vor fi incluse în
    arhivă nici o cale sau modul.
  </li>
</ul>

</body>
</section>
<section>
<title>Rularea genkernel</title>
<body>

<p>
Tot ce este necesar pentru a rula genkernel este doar genkernel cu parametrii
necesari, ca root. Spre exemplu:
</p>

<pre caption="Rularea genkernel">
# genkernel --menuconfig --no-clean --no-install --bootsplash all
<comment>(Va produce un kernel ce vă va indica să-l instalaţi cum
doriţi, nemodificând nici un fişier obiect, activând suportul pentru
bootsplash, dar neinstalând nimic.)</comment>
</pre>

<p>
Dacă doriţi ca genkernel să vă instaleze şi imaginea de kernel,
trebuie să vă asiguraţi că partiţia dvs. <path>/boot</path> este
mount-ată - versiunile recente de genkernel încearcă automat această
acţiune dacă specificaţi MOUNTBOOT cu valoarea "yes" în
<path>/etc/genkernel.conf</path>.
</p>

<pre caption="Mount-area partiţiei /boot manual">
<comment>(Dacă /boot este o intrare validă în /etc/fstab:)</comment>
# mount /boot
<comment>(... altfel, pentru discuri IDE:)</comment>
# mount /dev/hda1 /boot
<comment>(... şi pentru discuri SCSI:)</comment>
# mount /dev/sda1 /boot
</pre>

</body>
</section>
<section>
<title>Setarea genkernel pentru a funcţiona cu aplicaţia bootloader</title>
<body>

<p>
Pentru a seta genkernel să funcţioneze cu aplicaţia dvs. bootloader, trei
din patru modificări sunt necesare în configuraţia aplicaţiei bootloader.
</p>

<ol>
  <li>
    Adăugaţi <c>root=/dev/ram0</c> şi <c>init=/linuxrc</c> parametrilor
    de kernel transferaţi imagini de kernel.
  </li>
  <li>
    Adăugţi <c>real_root=/dev/hda3</c>, spre exemplu, parametrilor de kernel
    transferaţi imaginii de kernel, dacă <path>/dev/hda3</path> conţine
    partiţia dvs. rădăcină.
  </li>
  <li>
    Dacă utilizaţi bootsplash, adăugaţi un mod video potrivit, cum ar fi
    <c>vga=0x317</c> parametrilor transferaţi imaginii de kernel şi, de
    asemenea, adăugaţi <c>splash=verbose</c> sau <c>splash=silent</c>, în
    funcţie de multitudinea de informaţii necesară pentru bootsplash.
  </li>
  <li>
    Adăugaţi imaginea initrd, în funcţie de modul în care o necesită aplicaţia
    bootloader: consultaţi <uri link="/doc/ro/handbook/handbook-x86.xml?part=1&amp;chap=10">Manualul
    Gentoo</uri> pentru detalii despre configurarea aplicaţiei bootloader.
  </li>
</ol>

</body>
</section>
<section>
<title>Fişierele de Configurare pentru Kernel</title>
<body>

<p>
Genkernel va salva configuraţia pentru fiecare kernel în
<path>/etc/kernels</path> şi va utiliza acea configurare, de câte ori veţi
invoca, din nou, <c>genkernel</c>. Dacă doriţi să reporniţi cu setările
implicite, redenumiţi fişierul din <path>/etc/kernels</path>. Genkernel va
utiliza, atunci, fişierul de configurare pentru kernel stocat în
<path>/usr/share/genkernel/&lt;arhitectura&gt;</path> în loc.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Portarea genkernel</title>
<section>
<title>Introducere</title>
<body>

<p>
Dacă arhitectura dvs. oferă toate bibliotecile şi utilitarele necesare
aplicaţiei genkernel, ce includ, dar nu se limiteaza la un kernel funcţional
pentru arhitectura dvs., o suită de aplicaţii pentru compilare, aplicaţia
GNU make şi o distribuţie busybox funcţională, puteţi continua!
</p>

<p>
Pentru fiecare arhitectură, genkernel utilizează
<path>/usr/share/genkernel/$numeArhitectura</path> pentru fişierele de
configurare corespondente arhitecturii respective.
</p>

</body>
</section>
<section>
<title>Funcţionarea procesului de bootstrap pentru sistem</title>
<body>

<ol>
  <li>
    Aplicaţia bootloader încarcă imaginea genkernel, compilată după
    specificaţiile din fişierele de configurare din directoarele genkernel,
    precum şi imaginea initrd, ce este pregătită de genkernel.
  </li>
  <li>
    Kernel-ul boot-ează, alocă o mică parte din memoria RAM în care este
    iniţializată aplicaţia busybox, ce probează sistemul cu modulele din lista
    modules_load, pentru arhitectura dvs.
  </li>
  <li>
    Odată terminat procesul, şi transferat parametrul <c>real_root</c>, ce
    reprezintă partiţia de boot pentru rădăcină (după modul de
    interpretare al busybox) sistemul va porni de pe acea partiţie.
  </li>
</ol>

</body>
</section>
<section>
<title>Fişierele de configurare</title>
<body>

<ul>
  <li>
    <path>busy-config</path>: Aceasta este configuraţia utilizată pentru a
    compila busybox pentru arhitectura dvs.
  </li>
  <li>
    <path>config.sh</path>: Acesta este un script shell ce setează diverse
    variabile interne ale genkernel. Analizaţi unul din fişierele
    <path>config.sh</path> ca exemplu.
  </li>
  <li>
    <path>modules_load</path>: Acesta este un fişier ce conţine o listă
    delimitată prin spaţii cu modulele ce sunt încarcate pentru suportul SCSI,
    FireWire, ATARAID şi PCMCIA. Dacă nici unul nu este disponibil pentru
    arhitecura dvs., lăsaţi aceste câmpuri goale. Analizaţi unul din
    fişierele <path>modules_load</path> ca exemplu.
  </li>
</ul>

<ul>
  <li>
    <path>kernel-config</path>: O configuraţie implicită de kernel utilizată
    pentru orice versiune de kernel.
  </li>
  <li>
    <path>kernel-config-2.4</path>: O configuraţie de kernel implicită,
    utilizată pentru versiunile de kernel 2.4.
  </li>
  <li>
    <path>kernel-config-2.6</path>: O configuraţie de kernel implicită,
    utilizată pentru versiunile de kernel 2.6.
  </li>
</ul>

</body>
</section>
</chapter>
</guide>
