<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/el/handbook/hb-working-use.xml,v 1.1 2005/10/01 15:21:45 neysx Exp $ -->

<sections>

<version>1.30</version>
<date>2005-07-14</date>

<section>
<title>Τι είναι οι σημαίες USE;</title>
<subsection>
<title>Η ιδέα πίσω από τις σημαίες USE</title>
<body>

<p>
Όταν εγκαθιστάτε το Gentoo (ή οποιαδήποτε άλλη διανομή, ή ακόμη και λειτουργικό 
σύστημα όσον αφορά αυτό), κάνετε επιλογές ανάλογα με το περιβάλλον που θα 
δουλεύετε. Μια εγκατάσταση για ένα διακομιστή διαφέρει από μια εγκατάσταση για 
ένα σταθμό εργασίας. Ένας σταθμός εργασίας για παιχνίδια διαφέρει από ένα 
σταθμό εργασίας για φωτοαπόδοση 3D.
</p>

<p>
Αυτό δεν αληθεύει μόνο για την επιλογή των πακέτων που θα εγκαταστήσετε, αλλά 
επίσης και για χαρακτηριστικά γνωρίσματα που ένα ορισμένο πακέτο θα υποστηρίζει.
Αν δεν χρειάζεστε υποστήριξη για OpenGL, τότε γιατί να εγκαταστήσετε OpenGL και 
να συμπεριλάβετε υποστήριξη για OpenGL στα περισσότερα πακέτα; Αν δεν 
χρησιμοποιείτε KDE, γιατί να μεταγλωττίσετε τα πακέτα με υποστήριξη για KDE αν 
αυτά δουλεύουν απροβλημάτιστα χωρίς αυτή;
</p>

<p>
Για να βοηθηθούν οι χρήστες να αποφασίσουν τι θέλουν να 
εγκαταστήσουν/ενεργοποιήσουν και τι όχι, θέλαμε να επιτρέπουμε το χρήστη να 
καθορίζει με ευκολία το περιβάλλον του/της. Αυτό αναγκάζει το χρήστη να 
αποφασίσει τι ακριβώς θέλει και διευκολύνει το Portage, το εργαλείο διαχείρισης 
των πακέτων του συστήματος, στη διαδικασία λήψης χρήσιμων αποφάσεων.
</p>

</body>
</subsection>
<subsection>
<title>Ορισμός της σημαίας USE</title>
<body>

<p>
Εισάγετε τις σημαίες USE. Μια τέτοια σημαία είναι μια λέξη κλειδί που δίνει 
σάρκα και οστά στην υποστήριξη και τις πληροφορίες εξαρτήσεων για μια 
ορισμένη έννοια. Αν ορίσετε μια ορισμένη σημαία USE, το Portage θα ξέρει ότι 
επιθυμείτε υποστήριξη για την επιλεγμένη λέξη κλειδί. Αυτό φυσικά αλλάζει και 
τις πληροφορίες εξαρτήσεων για το πακέτο.
</p>

<p>
Ας δούμε ένα συγκεκριμένο παράδειγμα: τη λέξη κλειδί <c>kde</c>. Αν δεν 
συμπεριλάβετε αυτή τη λέξη κλειδί στη μεταβλητή <c>USE</c>, όλα τα πακέτα που 
έχουν <e>προαιρετική</e> υποστήριξη για KDE θα μεταγλωττιστούν <e>χωρίς</e> την 
υποστήριξη για KDE. Όλα τα πακέτα που έχουν <e>προαιρετική</e> εξάρτηση του KDE 
θα εγκατασταθούν <e>χωρίς</e> να εγκατασταθούν οι βιβλιοθήκες του KDE (ως 
εξάρτηση). Αν έχετε ορισμένη τη λέξη κλειδί <c>kde</c> τότε αυτά τα πακέτα 
<e>θα</e> μεταγλωττιστούν με υποστήριξη για KDE και οι βιβλιοθήκες του KDE θα 
εγκατασταθούν ως εξάρτηση.
</p>

<p>
Ορίζοντας σωστά τις λέξεις κλειδιά θα αποκτήσετε ένα σύστημα προσανατολισμένο 
ακριβώς στις ανάγκες σας.
</p>

</body>
</subsection>
<subsection>
<title>Ποιες σημαίες USE υπάρχουν;</title>
<body>

<p>
Υπάρχουν δύο ειδών σημαίες USE: οι <e>καθολικές</e> και οι <e>τοπικές</e> 
σημαίες USE.
</p>

<ul>
  <li>
    Μία <e>καθολική</e> σημαία USE χρησιμοποιείται από διάφορα πακέτα, σε όλο το
    σύστημα. Αυτό είναι που βλέπουν οι περισσότεροι ως σημαίες USE.
  </li>
  <li>
    Μία <e>τοπική</e> σημαία USE χρησιμοποιείται από ένα πακέτο για να παρθούν 
    ορισμένες αποφάσεις που σχετίζονται μόνο με το πακέτο.
  </li>
</ul>

<p>
Μια λίστα με τις διαθέσιμες καθολικές σημαίες USE υπάρχει <uri
link="/dyn/use-index.xml">απευθείας</uri> ή τοπικά στο αρχείο
<path>/usr/portage/profiles/use.desc</path>. Ένα σύντομο (μη ολοκληρωμένο 
<e>αρκετά</e>) τμήμα:
</p>

<pre caption="Ένα σύντομο τμήμα από τις διαθέσιμες σημαίες USE">
gtk     - Προσθέτει υποστήριξη για το x11-libs/gtk+ (The GIMP Toolkit)
gtk2    - Χρησιμοποίηση του gtk+-2.0.0 αντί του gtk+-1.2 σε περιπτώσεις που μια εφαρμογή υποστηρίζει και τα δύο.
gtkhtml - Προσθέτει υποστήριξη για το gnome-extra/gtkhtml
guile   - Προσθέτει υποστήριξη για το dev-util/guile (διερμηνέας για τη Scheme)
icc     - Χρησιμοποίηση του μεταγλωττιστή Intel C++ Compiler αν το πακέτο τον υποστηρίζει
icc-pgo - Ενεργοποίηση της δημιουργίας δεδομένων PGO ή χρησιμοποίησης όταν χρησιμοποιείται η icc.
imap    - Προσθέτει υποστήριξη για IMAP
</pre>

<p>
Μια λίστα με τις διαθέσιμες τοπικές σημαίες USE υπάρχει τοπικά στο αρχείο
<path>/usr/portage/profiles/use.local.desc</path>.
</p>

</body>
</subsection>
</section>
<section>
<title>Χρησιμοποίηση των σημαιών USE</title>
<subsection>
<title>Δήλωση μόνιμων σημαιών USE</title>
<body>

<p>
Με την ελπίδα ότι πειστήκατε για την σπουδαιότητα των σημαιών USE θα σας 
δείξουμε πως να τις δηλώνετε.
</p>

<p>
Όπως αναφέρθηκε προηγουμένως, όλες οι σημαίες USE δηλώνονται στη μεταβλητή 
<c>USE</c>. Για να είναι εύκολο οι χρήστες να αναζητούν και να επιλέγουν σημαίες
USE, προσφέρουμε ήδη μια <e>εξ' ορισμού</e> ρύθμιση USE. Αυτή η ρύθμιση είναι 
μια συλλογή από σημαίες USE που πιστεύουμε ότι χρησιμοποιούνται από τους 
χρήστες του Gentoo. Αυτή η εξ' ορισμού ρύθμιση δηλώνεται στα αρχεία 
<path>make.defaults</path> του προφίλ σας.
</p>

<p>
Το προφίλ στο οποίο δείχνει το σύστημά σας ορίζεται από το συμβολικό σύνδεσμο 
<path>/etc/make.profile</path>. Κάθε προφίλ βασίζεται πάνω σε ένα άλλο, 
μεγαλύτερο προφίλ και το τελικό αποτέλεσμα είναι έτσι το άθροισμα όλων των 
προφίλ. Το προφίλ κορυφή είναι το προφίλ <path>base</path> 
(<path>/usr/portage/profiles/base</path>).
</p>

<p>
Ας δούμε στην εξ' ορισμού ρύθμιση για το προφίλ 2004.3:
</p>

<pre caption="Αθροιστικές make.defaults μεταβλητές USE για το προφίλ 2004.3">
<comment>(Το παράδειγμα αυτό είναι το άθροισμα από το base, default-linux,
 default-linux/x86 και default-linux/x86/2004.3)</comment>
USE="x86 oss apm arts avi berkdb bitmap-fonts crypt cups encode fortran f77
     foomaticdb gdbm gif gpm gtk gtk2 imlib jpeg kde gnome libg++ libwww mad
     mikmod motif mpeg ncurses nls oggvorbis opengl pam pdflib png python qt
     quicktime readline sdl spell ssl svga tcpd truetype X xml2 xmms xv zlib"
</pre>

<p>
Όπως μπορείτε να δείτε, η μεταβλητή ήδη περιέχει αρκετές λέξεις κλειδιά. 
<b>Μην</b> αλλάζετε οποιοδήποτε αρχείο <path>make.defaults</path> για να 
προσανατολίσετε τη μεταβλητή <c>USE</c> στις ανάγκες σας: οι αλλαγές σε αυτό το 
αρχείο θα ακυρωθούν με την επόμενη αναβάθμιση του Portage!
</p>

<p>
Για να αλλάξετε αυτή την εξ' ορισμού ρύθμιση, πρέπει να προσθέσετε ή να 
αφαιρέσετε λέξεις κλειδιά στη μεταβλητή <c>USE</c>. Αυτό γίνεται καθολικά 
ορίζοντας τη μεταβλητή <c>USE</c> στο αρχείο <path>/etc/make.conf</path>. Στη 
μεταβλητή αυτή μπορείτε να προσθέσετε τις επιπλέον σημαίες USE που χρειάζεστε, 
ή να αφαιρέσετε τις σημαίες USE που δεν χρειάζεστε. Το τελευταίο μπορεί να 
επιτευχθεί εισάγοντας τη λέξη κλειδί με πρόθεμα το μείον ("-").
</p>

<p>
Για παράδειγμα, για να αφαιρέσετε την υποστήριξη για KDE και QT αλλά να 
προσθέσετε υποστήριξη για LDAP, η παρακάτω μεταβλητή <c>USE</c> θα οριστεί στο 
αρχείο <path>/etc/make.conf</path>:
</p>

<pre caption="Ένα παράδειγμα ρύθμισης USE στο αρχείο /etc/make.conf">
USE="-kde -qt ldap"
</pre>

</body>
</subsection>
<subsection>
<title>Ορισμός σημαιών USE για ορισμένα πακέτα</title>
<body>

<p>
Μερικές φορές, επιθυμείτε να δηλώσετε μια ορισμένη σημαία USE για μία (ή δύο)
εφαρμογές, αλλά όχι σε επίπεδο συστήματος. Για το πετύχετε αυτό, πρέπει να
δημιουργήσετε τον κατάλογο <path>/etc/portage</path> (αν δεν υπάρχει ήδη) και να
επεξεργαστείτε το αρχείο <path>/etc/portage/package.use</path>.
</p>

<p>
Για παράδειγμα, αν δεν θέλετε υποστήριξη για <c>berkdb</c> καθολικά, αλλά τη
θέλετε για τη <c>mysql</c>, θα προσθέσετε:
</p>

<pre caption="Παράδειγμα /etc/portage/package.use">
dev-db/mysql berkdb
</pre>

<p>
Μπορείτε φυσικά να <e>απενεργοποιήσετε</e> ρητά σημαίες USE για μια ορισμένη 
εφαρμογή. Για παράδειγμα, αν δεν θέλετε υποστήριξη <c>java</c> στην PHP:
</p>

<pre caption="2ο παράδειγμα /etc/portage/package.use">
dev-php/php -java
</pre>

</body>
</subsection>
<subsection>
<title>Ορισμός προσωρινών σημαιών USE</title>
<body>

<p>
Μερικές φορές, επιθυμείτε να ορίσετε μια ορισμένη σημαία USE μόνο μία φορά. 
Αντί να επεξεργαστείτε το αρχείο <path>/etc/make.conf</path> δύο φορές (για να 
ορίσετε και να αναιρέσετε τις αλλαγές στο USE), μπορείτε απλά να δηλώσετε τη 
μεταβλητή USE ως μεταβλητή περιβάλλοντος. Θυμηθείτε ότι, όταν ξανακάνετε emerge 
ή αναβαθμίσετε την εφαρμογή αυτή (είτε ρητά είτε ως μέρος αναβάθμισης του 
συστήματος), οι αλλαγές σας θα χαθούν!
</p>

<p>
Ως παράδειγμα, θα αφαιρέσουμε προσωρινά τη λέξη κλειδί java από τη ρύθμιση USE
κατά τη διάρκεια εγκατάστασης του mozilla.
</p>

<pre caption="Χρησιμοποίηση του USE ως μεταβλητή περιβάλλοντος">
# <i>USE="-java" emerge mozilla</i>
</pre>

</body>
</subsection>
<subsection>
<title>Αυτόματες σημαίες USE</title>
<body>

<p>
Αφού εγκατασταθούν ορισμένα πακέτα, επιπρόσθετες σημαίες USE θα ενεργοποιηθούν 
αυτόματα για εσάς αν δεν τις απενεργοποιήσετε ρητά. Για να δείτε τη λίστα με τα 
πακέτα που ενεργοποιούν αυτόματα σημαίες USE, κοιτάξτε τα  
<path>/etc/make.profile/use.defaults</path> και <path>use.defaults</path> 
αρχεία των γονικών προφίλ.
</p>

<pre caption="Ένα τμήμα από το /etc/make.profile/use.defaults">
gnome           gnome-base/gnome
gtk             x11-libs/gtk+
qt              x11-libs/qt
kde             kde-base/kdebase
motif           x11-libs/openmotif
</pre>

</body>
</subsection>
<subsection>
<title>Προτεραιότητα</title>
<body>

<p>
Φυσικά υπάρχει μια ορισμένη προτεραιότητα όσον αφορά στο ποια ρύθμιση έχει 
προτεραιότητα στη ρύθμιση USE. Σίγουρα δε θέλετε να δηλώσετε <c>USE="-java"</c> 
μόνο και μόνο για να ανακαλύψετε ότι η <c>java</c> χρησιμοποιείται ακόμη λόγω 
μιας ρύθμισης με υψηλότερη προτεραιότητα. Η προτεραιότητα για τη ρύθμιση USE 
είναι, κατά σειρά προτεραιότητας (το πρώτο έχει τη χαμηλότερη):
</p>

<ol>
  <li>
    Η εξ' ορισμού ρύθμιση USE που δηλώνεται στα <path>make.defaults</path> 
    αρχεία του προφίλ σας
  </li>
  <li>
    Η κληρονομημένη ρύθμιση USE αν ένα πακέτο από το
    <path>/etc/make.profile/use.defaults</path> είναι εγκατεστημένο
  </li>
  <li>
    Η ορισμένη από το χρήστη ρύθμιση USE στο αρχείο <path>/etc/make.conf</path>
  </li>
  <li>
    Η ορισμένη από το χρήστη ρύθμιση USE στο αρχείο 
    <path>/etc/portage/package.use</path>
  </li>
  <li>
    Η ορισμένη από το χρήστη ρύθμιση USE ως μεταβλητή περιβάλλοντος
  </li>
</ol>

<p>
Για να δείτε την τελική ρύθμιση <c>USE</c> όπως τη βλέπει το Portage, εκτελέστε 
<c>emerge --info</c>. Αυτό θα εμφανίσει όλες τις σχετιζόμενες μεταβλητές 
(συμπεριλαμβανομένης της μεταβλητής <c>USE</c>) με τις τιμές που 
χρησιμοποιούνται από το Portage.
</p>

<pre caption="Εκτέλεση του emerge --info">
# <i>emerge --info</i>
</pre>

</body>
</subsection>
<subsection>
<title>Προσαρμογή ολόκληρου του συστήματος για τη χρησιμοποίηση νέων σημαιών 
USE</title>
<body>

<p>
Αν έχετε αλλάξει τις σημαίες USE και επιθυμείτε το σύστημά σας να χρησιμοποιήσει
τις νέες σημαίες, χρησιμοποιήστε την επιλογή <c>--newuse</c> του 
<c>emerge</c>:
</p>

<pre caption="Ξανακτίσιμο ολόκληρου του συστήματος">
# <i>emerge --update --deep --newuse world</i>
</pre>

<p>
Στη συνέχεια, εκτελέστε το depclean του Portage για να αφαιρέσετε τις 
εξαρτήσεις που εγκαταστήθηκαν στο "παλιό" σύστημα αλλά τέθηκαν πλέον εκτός 
χρήσης από τις νέες σημαίες USE.
</p>

<warn>
Η εκτέλεση του <c>emerge --depclean</c> είναι μια επικίνδυνη διαδικασία και θα 
πρέπει να γίνεται με προσοχή. Διπλο-ελέγξτε την παρεχόμενη λίστα των "εκτός 
χρήσης" πακέτων για να σιγουρευτείτε ότι δε θα αφαιρεθούν πακέτα που χρειάζεστε. 
Στο επόμενο παράδειγμα, προσθέτουμε το διακόπτη <c>-p</c> ώστε το depclean να 
εμφανίσει μόνο τη λίστα των πακέτων χωρίς να τα αφαιρέσει.
</warn>

<pre caption="Αφαίρεση πακέτων εκτός χρήσης">
# <i>emerge -p --depclean</i>
</pre>

<p>
Όταν το depclean τελειώσει, εκτελέστε <c>revdep-rebuild</c> για να ξανακτίσετε 
τις εφαρμογές που είναι δυναμικά συνδεδεμένες με διαμοιραζόμενα αντικείμενα που 
πιθανόν να παρέχονταν από αφαιρεθέντα πακέτα. Το <c>revdep-rebuild</c> είναι 
τμήμα του πακέτου <c>gentoolkit</c>, μην παραλείψετε να το εγκαταστήσετε πρώτα.
</p>

<pre caption="Εκτέλεση του revdep-rebuild">
# <i>revdep-rebuild</i>
</pre>

<p>
Όταν αυτό ολοκληρωθεί, το σύστημά σας θα χρησιμοποιεί τις νέες σημαίες USE.
</p>

</body>
</subsection>
</section>
<section>
<title>Ειδικά ορισμένες για πακέτα σημαίες USE</title>
<subsection>
<title>Εμφάνιση των διαθέσιμων σημαιών USE</title>
<body>

<p>
Ας δούμε το παράδειγμα του <c>mozilla</c>: σε ποιες σημαίες USE ακούει; Για να 
το δείτε, χρησιμοποιήστε το <c>emerge</c> με τις παραμέτρους <c>--pretend</c> 
και <c>--verbose</c>:
</p>

<pre caption="Εμφάνιση των χρησιμοποιούμενων σημαιών USE">
# <i>emerge --pretend --verbose mozilla</i>
These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild  N    ] net-www/mozilla-1.5-r1 +java +crypt -ipv6 -gtk2 +ssl +ldap 
+gnome -debug +mozcalendar -mozaccess -mozxmlterm -moznoirc -moznomail
-moznocompose -moznoxft 
</pre>

<p>
Το <c>emerge</c> δεν είναι το μόνο εργαλείο για τη δουλειά αυτή. Πράγματι, 
έχουμε ένα εργαλείο αφιερωμένο για τις πληροφορίες των πακέτων που ονομάζεται 
<c>equery</c>, το οποίο υπάρχει στο πακέτο <c>gentoolkit</c>. Αρχικά, 
εγκαταστήστε το <c>gentoolkit</c>:
</p>

<pre caption="Εγκατάσταση του gentoolkit">
# <i>emerge gentoolkit</i>
</pre>

<p>
Εκτελέστε τώρα το <c>equery</c> με την παράμετρο <c>uses</c> για να δείτε τις 
σημαίες USE ενός συγκεκριμένου πακέτου. Για παράδειγμα, για το πακέτο 
<c>gnumeric</c>:
</p>

<pre caption="Χρησιμοποίηση του equery για την εμφάνιση των σημαιών USE">
# <i>equery uses gnumeric</i>
[ Colour Code : <i>set</i> <comment>unset</comment> ]
[ Legend      : (U) Col 1 - Current USE flags        ]
[             : (I) Col 2 - Installed With USE flags ]

 U I [ Found these USE variables in : app-office/gnumeric-1.2.0 ]
 - - <comment>libgda</comment>  : Adds GNU Data Access (CORBA wrapper) support for gnumeric
 - - <comment>gnomedb</comment> : unknown
 + + <i>python</i>  : Adds support/bindings for the Python language
 + + <i>bonobo</i>  : Adds support for gnome-base/bonobo (Gnome CORBA interfaces)
</pre>

</body>
</subsection>
</section>
</sections>
