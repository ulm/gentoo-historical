<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/el/handbook/hb-working-variables.xml,v 1.1 2005/10/01 15:21:45 neysx Exp $ -->

<sections>

<version>1.13</version>
<date>2005-09-28</date>

<section>
<title>Μεταβλητές περιβάλλοντος</title>
<subsection>
<title>Τι είναι</title>
<body>

<p>
Η μεταβλητή περιβάλλοντος είναι ένα ονοματιζόμενο αντικείμενο που περιέχει 
πληροφορίες που χρησιμοποιούνται από μία ή περισσότερες εφαρμογές. Πολλοί 
χρήστες (ειδικά αυτοί που είναι νέοι στο Linux) το βρίσκουν αυτό λίγο περίεργο ή
κάτι που δεν διαχειρίζεται. Ωστόσο, αυτό είναι λάθος: χρησιμοποιώντας τις 
μεταβλητές περιβάλλοντος μπορεί κανείς να αλλάξει εύκολα τις ρυθμίσεις για μία 
ή περισσότερες εφαρμογές.
</p>

</body>
</subsection>
<subsection>
<title>Σημαντικά παραδείγματα</title>
<body>

<p>
Ο παρακάτω πίνακας περιέχει ένα αριθμό μεταβλητών που χρησιμοποιούνται από το 
Linux και περιγράφει τη χρήση τους. Παραδείγματα τιμών παρέχονται μετά τον 
πίνακα.
</p>

<table>
<tr>
  <th>Μεταβλητή</th>
  <th>Περιγραφή</th>
</tr>
<tr>
  <ti>PATH</ti>
  <ti>
    Η μεταβλητή αυτή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με άνω 
    κάτω τελεία στους οποίους το σύστημα ψάχνει για εκτελέσιμα αρχεία. Αν 
    εισάγετε το όνομα ενός εκτελέσιμου (όπως το <c>ls</c>, <c>rc-update</c> ή 
    <c>emerge</c>) αλλά αυτό δεν υπάρχει σε ένα από τους καταλόγους στη λίστα, 
    το σύστημα δε θα το εκτελέσει (εκτός αν εισάγετε την πλήρη διαδρομή της 
    εντολής, όπως <c>/bin/ls</c>).
  </ti>
</tr>
<tr>
  <ti>ROOTPATH</ti>
  <ti>
    Η μεταβλητή αυτή έχει την ίδια λειτουργία με την <c>PATH</c>, αλλά αυτή 
    περιέχει τη λίστα των καταλόγων που ελέγχονται όταν ο χρήστης root εισάγει 
    μια εντολή.
  </ti>
</tr>
<tr>
  <ti>LDPATH</ti>
  <ti>
    Η μεταβλητή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με άνω κάτω 
    τελεία στους οποίους ψάχνει για τις βιβλιοθήκες ο δυναμικός συνδέτης.
  </ti>
</tr>
<tr>
  <ti>MANPATH</ti>
  <ti>
    Η μεταβλητή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με άνω κάτω
    τελεία στους οποίους η εντολή <c>man</c> ψάχνει για τις σελίδες man.
  </ti>
</tr>
<tr>
  <ti>INFODIR</ti>
  <ti>
    Η μεταβλητή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με άνω κάτω
    τελεία στους οποίους η εντολή <c>info</c> ψάχνει για τις σελίδες info.
  </ti>
</tr>
<tr>
  <ti>PAGER</ti>
  <ti>
    Η μεταβλητή περιέχει την πλήρη διαδρομή για το πρόγραμμα που χρησιμοποιείται
    για την εμφάνιση των περιεχόμενων των αρχείων (όπως το <c>less</c> ή το 
    <c>more</c>).
  </ti>
</tr>
<tr>
  <ti>EDITOR</ti>
  <ti>
    Η μεταβλητή περιέχει την πλήρη διαδρομή για το πρόγραμμα που χρησιμοποιείται
    για την αλλαγή των περιεχόμενων των αρχείων (όπως το <c>nano</c> ή το
    <c>vi</c>).
  </ti>
</tr>
<tr>
  <ti>KDEDIRS</ti>
  <ti>
    Η μεταβλητή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με άνω κάτω
    τελεία που περιέχουν υλικό σχετιζόμενο με το KDE.
  </ti>
</tr>
<tr>
  <ti>CLASSPATH</ti>
  <ti>
    Η μεταβλητή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με άνω κάτω
    τελεία που περιέχουν κλάσεις σε Java.
  </ti>
</tr>
<tr>
  <ti>CONFIG_PROTECT</ti>
  <ti>
    Η μεταβλητή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με το 
    <e>κενό</e> που προστατεύονται από το Portage κατά τη διάρκεια αναβαθμίσεων.
  </ti>
</tr>
<tr>
  <ti>CONFIG_PROTECT_MASK</ti>
  <ti>
    Η μεταβλητή περιέχει μια λίστα με ονόματα καταλόγων χωρισμένα με το 
    <e>κενό</e> που δεν προστατεύονται από το Portage κατά τη διάρκεια 
    αναβαθμίσεων.
  </ti>
</tr>
</table>

<p>
Παρακάτω θα βρείτε ένα παράδειγμα ορισμών για όλες αυτές τις μεταβλητές:
</p>

<pre caption="Παραδείγματα ορισμών">
PATH="/bin:/usr/bin:/usr/local/bin:/opt/bin:/usr/games/bin"
ROOTPATH="/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin"
LDPATH="/lib:/usr/lib:/usr/local/lib:/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.3"
MANPATH="/usr/share/man:/usr/local/share/man"
INFODIR="/usr/share/info:/usr/local/share/info"
PAGER="/usr/bin/less"
EDITOR="/usr/bin/vim"
KDEDIRS="/usr"
CLASSPATH="/opt/blackdown-jre-1.4.1/lib/rt.jar:."
CONFIG_PROTECT="/usr/X11R6/lib/X11/xkb /opt/tomcat/conf \
                /usr/kde/3.1/share/config /usr/share/texmf/tex/generic/config/ \
                /usr/share/texmf/tex/platex/config/ /usr/share/config"
CONFIG_PROTECT_MASK="/etc/gconf"
</pre>

</body>
</subsection>
</section>
<section>
<title>Καθολικός ορισμός μεταβλητών</title>
<subsection>
<title>Ο κατάλογος /etc/env.d</title>
<body>

<p>
Προκειμένου να είναι σε ένα κεντρικό σημείο οι ορισμοί όλων αυτών των 
μεταβλητών, το Gentoo εισήγαγε τον κατάλογο <path>/etc/env.d</path>. Μέσα στον 
κατάλογο θα βρείτε ένα αριθμό από αρχεία, όπως το <path>00basic</path>, 
<path>05gcc</path>, κτλ. που περιέχουν τις μεταβλητές που απαιτούνται από την 
εφαρμογή στην οποία αναφέρεται το όνομά τους.
</p>

<p>
Για παράδειγμα, όταν εγκαταστήσατε το <c>gcc</c>, δημιουργήθηκε ένα αρχείο με
όνομα <path>05gcc</path> από το ebuild, που περιέχει τους ορισμούς για τις
παρακάτω μεταβλητές:
</p>

<pre caption="/etc/env.d/05gcc">
PATH="/usr/i686-pc-linux-gnu/gcc-bin/3.2"
ROOTPATH="/usr/i686-pc-linux-gnu/gcc-bin/3.2"
MANPATH="/usr/share/gcc-data/i686-pc-linux-gnu/3.2/man"
INFOPATH="/usr/share/gcc-data/i686-pc-linux-gnu/3.2/info"
CC="gcc"
CXX="g++"
LDPATH="/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2.3"
</pre>

<p>
Άλλες διανομές σας πληροφορούν να αλλάξετε ή προσθέσετε τέτοιες μεταβλητές
περιβάλλοντος στο αρχείο <path>/etc/profile</path> ή σε άλλες τοποθεσίες. Το
Gentoo από την άλλη πλευρά το κάνει εύκολο για εσάς (και το Portage) να
συντηρείτε και να διαχειρίζεστε τις μεταβλητές περιβάλλοντος χωρίς να χρειάζεται
να δίνετε προσοχή σε πολυάριθμα αρχεία που μπορεί να περιέχουν μεταβλητές 
περιβάλλοντος.
</p>

<p>
Για παράδειγμα, όταν το <c>gcc</c> αναβαθμιστεί, το αρχείο 
<path>/etc/env.d/05gcc</path> επίσης θα αναβαθμιστεί χωρίς παρέμβαση του χρήστη.
</p>

<p>
Από αυτό δεν κερδίζει μόνο το Portage, αλλά και εσείς, ως χρήστης. Περιστασιακά,
μπορεί να σας ζητηθεί να θέσετε μια μεταβλητή περιβάλλοντος σε επίπεδο
συστήματος. Για παράδειγμα, θα δούμε τη μεταβλητή <c>http_proxy</c>. Αντί να
πειράζετε το αρχείο <path>/etc/profile</path>, μπορείτε απλά να δημιουργήσετε
ένα αρχείο (<path>/etc/env.d/99local</path>) και να εισάγετε τον(ους)
ορισμό(ούς) εκεί:
</p>

<pre caption="/etc/env.d/99local">
http_proxy="proxy.server.com:8080"
</pre>

<p>
Χρησιμοποιώντας το ίδιο αρχείο για όλες σας τις μεταβλητές, έχετε μια γρήγορη 
σύνοψη για ποιες μεταβλητές έχετε ορίσει εσείς.
</p>

</body>
</subsection>
<subsection>
<title>Το σενάριο (script) env-update</title>
<body>

<p>
Αρκετά αρχεία στον κατάλογο <path>/etc/env.d</path> ορίζουν τη μεταβλητή 
<c>PATH</c>. Αυτό δεν είναι λάθος: όταν εκτελείτε το <c>env-update</c>, θα 
προσθέσει τους διάφορους ορισμούς πριν ενημερώσει τις μεταβλητές περιβάλλοντος, 
κάνοντάς το έτσι εύκολο για τα πακέτα (ή τους χρήστες) να προσθέτουν τις δικές 
τους μεταβλητές περιβάλλοντος χωρίς να παρεμβαίνουν στις ήδη υπάρχουσες τιμές.
</p>

<p>
Το σενάριο <c>env-update</c> θα προσθέσει τις τιμές διαβάζοντας με αλφαβητική
σειρά τα αρχεία από τον κατάλογο <path>/etc/env.d</path>. Τα ονόματα των
αρχείων πρέπει να ξεκινούν με δύο δεκαδικά ψηφία.
</p>

<pre caption="Σειρά ενημέρωσης που χρησιμοποιείται από το env-update">
         00basic        99kde-env       99local
     +-------------+----------------+-------------+
PATH="/bin:/usr/bin:/usr/kde/3.2/bin:/usr/local/bin"
</pre>

<p>
Η αλληλουχία των μεταβλητών δε συμβαίνει πάντα, αλλά μόνο στις ακόλουθες
μεταβλητές: <c>KDEDIRS</c>, <c>PATH</c>, <c>CLASSPATH</c>, <c>LDPATH</c>,
<c>MANPATH</c>, <c>INFODIR</c>, <c>INFOPATH</c>, <c>ROOTPATH</c>,
<c>CONFIG_PROTECT</c>, <c>CONFIG_PROTECT_MASK</c>, <c>PRELINK_PATH</c> και
<c>PRELINK_PATH_MASK</c>. Για τις υπόλοιπες μεταβλητές, χρησιμοποιείται η 
τελευταία ορισμένη τιμή (με αλφαβητική σειρά των αρχείων στον κατάλογο 
<path>/etc/env.d</path>).
</p>

<p>
Όταν εκτελείτε το <c>env-update</c>, το σενάριο θα δημιουργήσει όλες τις 
μεταβλητές περιβάλλοντος και θα τις τοποθετήσει στο αρχείο 
<path>/etc/profile.env</path> (που χρησιμοποιείται από το 
<path>/etc/profile</path>). Θα εξάγει επίσης τις πληροφορίες από τη μεταβλητή 
<c>LDPATH</c> και θα τις χρησιμοποιήσει για να δημιουργήσει το αρχείο 
<path>/etc/ld.so.conf</path>. Στη συνέχεια, θα εκτελέσει το <c>ldconfig</c> για 
να επαναδημιουργήσει το αρχείο <path>/etc/ld.so.cache</path> που χρησιμοποιεί ο 
δυναμικός συνδέτης.
</p>

<p>
Αν θέλετε να παρατηρήσετε την επίδραση του <c>env-update</c> αμέσως αφού το 
εκτελέσετε, εκτελέστε την παρακάτω εντολή για να ενημερώσετε το περιβάλλον σας. 
Οι χρήστες που έχουν εγκαταστήσει το Gentoo από μόνοι τους πιθανόν να το 
θυμούνται από τις οδηγίες εγκατάστασης:
</p>

<pre caption="Ενημέρωση του περιβάλλοντος">
# <i>env-update &amp;&amp; source /etc/profile</i>
</pre>

<note>
Η παραπάνω εντολή ενημερώνει τις μεταβλητές μόνο στο τρέχον τερματικό, σε 
<e>νέες</e> κονσόλες και στα παιδιά αυτών. Έτσι, αν δουλεύετε σε X11, θα πρέπει 
να εισάγετε σε κάθε νέο τερματικό που ανοίγετε <c>source /etc/profile</c> ή να 
επανεκκινήσετε τα Χ ώστε όλα τα τερματικά να λάβουν υπόψη τις νέες μεταβλητές. 
Αν χρησιμοποιείτε ένα διαχειριστή εισόδου, συνδεθείτε ως root και εισάγετε 
<c>/etc/init.d/xdm restart</c>. Αν όχι, θα πρέπει να αποσυνδεθείτε και να 
ξανασυνδεθείτε προκειμένου τα X να δημιουργούν διεργασίες με τις νέες τιμές 
στις μεταβλητές.
</note>

</body>
</subsection>
</section>
<section>
<title>Ορισμός των μεταβλητών τοπικά</title>
<subsection>
<title>Καθορισμένες από το χρήστη</title>
<body>

<p>
Δεν είναι επιθυμητό πάντα να ορίζετε μια μεταβλητή καθολικά. Για παράδειγμα, 
πιθανόν να χρειαστεί να προσθέσετε τη διαδρομή <path>/home/my_user/bin</path> 
και τον τρέχον κατάλογο (τον κατάλογο στον οποίο βρίσκεστε) στη μεταβλητή 
<c>PATH</c>, αλλά δε θέλετε επίσης όλοι οι χρήστες του συστήματος να τα έχουν 
αυτά στις δικές τους <c>PATH</c>. Αν θέλετε να ορίσετε μια μεταβλητή τοπικά, θα 
πρέπει να χρησιμοποιήσετε τα αρχεία <path>~/.bashrc</path> ή 
<path>~/.bash_profile</path>:
</p>

<pre caption="Επέκταση του PATH για τοπική χρήση στο αρχείο ~/.bashrc">
<comment>(Μια άνω κάτω τελεία μη ακολουθούμενη από κατάλογο γίνεται αντιληπτό ως
ο τρέχων κατάλογος)</comment>
PATH="${PATH}:/home/my_user/bin:"
</pre>

<p>
Όταν ξανασυνδεθείτε, η μεταβλητή σας <c>PATH</c> θα έχει ενημερωθεί.
</p>

</body>
</subsection>
<subsection>
<title>Καθορισμένες για τη σύνοδο</title>
<body>

<p>
Μερικές φορές, ακόμα πιο αυστηροί ορισμοί είναι απαραίτητοι. Πιθανόν να 
χρειαστεί να χρησιμοποιήσετε εκτελέσιμα από ένα προσωρινό κατάλογο που 
δημιουργήσατε, χωρίς να χρησιμοποιείτε την πλήρη διαδρομή προς αυτά ή να
επεξεργαστείτε το <path>~/.bashrc</path> για το σύντομο διάστημα που θα τα 
χρειαστείτε.
</p>

<p>
Στην περίπτωση αυτή, μπορείτε να ορίσετε τη μεταβλητή <c>PATH</c> για την 
τρέχουσα σύνοδό σας χρησιμοποιώντας την εντολή <c>export</c>. Αν δεν 
αποσυνδεθείτε, η μεταβλητή <c>PATH</c> θα χρησιμοποιεί τις προσωρινές τιμές.
</p>

<pre caption="Ορισμός καθορισμένης για τη σύνοδο μεταβλητής περιβάλλοντος">
# <i>export PATH="${PATH}:/home/my_user/tmp/usr/bin"</i>
</pre>

</body>
</subsection>
</section>
</sections>
