<?xml version='1.0' encoding="UTF-8"?>
<!-- REV: 1.2 -->
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/nvidia-guide.xml,v 1.2 2004/09/21 13:04:37 neysx Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ru/nvidia-guide.xml">
<title>Гид по nVidia в Gentoo Linux</title>

<author title="Author">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Translator">
  <mail link="selecter@spray.se">Anton Kuzmin</mail>
</author>
<abstract>
Многие джентульмены являются владельцами чипсетов nVidia. nVidia предоставляет определённые linux драйвера для увеличения производительности вашей карты. Этот гид расскажет вам, как инсталлировать и настроить эти драйвера.
</abstract>

<license/>

<version>1.0</version>
<date>May 18, 2004</date>

<chapter>
<title>Настройка карты</title>
<section>
<title>Инсталяция соответствующих драйверов</title>
<body>

<p>
Драйвера nVidia содержат в себе модули ядра, которые должны быть интегрированы в установленное ядро. Для этого ваше ядро должно поддерживать загрузку модулей. Если вы использовали <c>genkernel</c> для конфигурации ядра, тогда за вас всё уже сделано. Если же нет, тогда дважды проверьте конфигурацию вашего ядра на наличие поддержки:
</p>

<pre caption="Включаем поддержку загрузки модулей ядра">
Loadable module support ---&gt;
  [*] Enable loadable module support
</pre>

<p>
Модули nVidia и библиотеки объединены в два пакета: <c>nvidia-glx</c> 
и <c>nvidia-kernel</c>. Первый содержит X11 GLX библиотеки, а второй - модули ядра. Вам нужны оба пакета, поэтому вам нужно их установить сейчас же.
</p>

<pre caption="Инсталируем модули nVidia">
# <i>emerge nvidia-glx nvidia-kernel</i>
</pre>

<p>
После установки запустите <c>modprobe nvidia</c> для загрузки модуля в память.
</p>

<pre caption="Загружаем модуль">
# <i>modprobe nvidia</i>
</pre>

<p>
Очевидно, что вы хотите, чтобы это делалось автоматически при каждой загрузке системы, поэтому откройте
<path>/etc/modules.autoload.d/kernel-2.6</path> (или <path>kernel-2.4</path>) и добавьте строчку <c>nvidia</c> в файл. После этого не забудьте запустить <c>modules-update</c>!
</p>

<pre caption="Запускаем modules-update">
# <i>modules-update</i>
</pre>

</body>
</section>
<section>
<title>Настройка X сервера</title>
<body>

<p>
Как только драйвера установлены, вам нужно настроить X сервер, 
(XFree86 or Xorg) чтобы использовать <c>nvidia</c> драйвер вместо
<c>nv</c>, который используется по умолчанию.
</p>

<p>
Откройте файл <path>/etc/X11/XF86Config</path> (или <path>/etc/X11/xorg.conf</path>) вашим любимым текстовым редактором (как <c>nano</c> или <c>vim</c>) и найдите раздел
<c>Device</c>. В этом разделе измените строчку <c>Driver</c>:
</p>

<pre caption="Меняем nv на nvidia">
Section "Device"
  Identifier "nVidia Inc. GeForce2"
  <i>Driver     "nvidia"</i>
  VideoRam   65536
EndSection
</pre>

<p>
Запустите <c>opengl-update</c> для того, чтобы X сервер использовал nVidia GLX библиотеки:
</p>

<pre caption="Запускаем opengl-update">
# <i>opengl-update nvidia</i>
</pre>

</body>
</section>
<section>
<title>Тестирование карты</title>
<body>

<p>
Для тестирования nVidia карты, стартуйте X-ы and запустите команду <c>glxinfo | grep direct</c>. После этого вы должны увидеть, что direct rendering активирован:
</p>

<pre caption="Проверяем статус direct rendering'а">
$ <i>glxinfo | grep direct</i>
direct rendering: Yes
</pre>

<p>
Для мониторинга FPS используйте утилиту <c>glxgears</c>. 
</p>

</body>
</section>
</chapter>
</guide>
