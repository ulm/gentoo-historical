<?xml version='1.0' encoding="UTF-8"?>
<!-- REV: 1.12 -->
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/gentoo-x86-quickinstall.xml,v 1.1 2004/06/25 09:32:07 sergey Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ru/quickinstall.xml">
<title>Gentoo Linux Install Reference</title>
<author title="Author">Steven Wagner</author>
<author title="Editor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Translator">
	<mail link="polachok@narod.ru">Alexander Polakov</mail>
</author>

<abstract>
Краткое руководство по установке охватывает все детали процесса установки в немногословной манере. Пользователи уже должны иметь опыт установки Gentoo Linux, если они используют это руководство.
</abstract>

<license/>

<version>1.9</version>
<date>5 июня, 2004</date> 

<chapter>
<title>Краткое руководство по установке</title>
<section>
<body>

<p>
Установочные ISO-образы находятся на<uri link=
"http://www.gentoo.org/main/en/mirrors.xml">зеркалах Gentoo
</uri>. Подробные описания различных компакт-дисков доступны в <uri link="http://store.gentoo.org">Магазине Gentoo</uri>. Первый компакт-диск содержит все, что нужно для установки  Gentoo Linux быстро и без доступа в Internet. Второй диск не обязателен и содержит прекомпилированные пакеты, такие как KDE, GNOME, OpenOffice, Mozilla, Evolution и другие.
</p>

<p>
Загрузитесь с первого диска Gentoo. Нажмите &lt;F1&gt; и/или &lt;F2&gt; чтобы увидеть список доступных загрузочных опций. Нажмите &lt;ENTER&gt; чтобы продолжить с обычным ядром. В конце концов вы получите приглашение командной строки.
</p>

<pre caption="Начальные настройки">
# <i>date</i>  (Проверьте, что время и дата настроены прaввильно. Если нет,
# установите их с помощью команды  <i>date MMDDhhmmCCYY</i> )
# <i>modprobe module_name</i>  (Необязательно - Загрузить необходимые модули)
# <i>net-setup eth0</i> (Настроить сеть)
# <i>fdisk /dev/hda</i> (Разбить ваш диск на разделы)
</pre>

<p>
Рекомендуемая настройка: загрузочный раздел размером в 64 мегабайта с ext2, раздел подкачки равный 
двойному размеру доступной RAM (оперативной памяти), и остальное для корневого раздела с ReiserFS.
</p>

<p>
Инициализируйте ваши разделы с помощью <c>mke2fs</c> (Ext2), <c>mke2fs
-j</c> (Ext3), <c>mkreiserfs</c> (ReiserFS), <c>mkfs.xfs</c> (XFS),
<c>mkfs.jfs</c> (JFS) and <c>mkswap</c> (swap partition). Например:
<c>mke2fs -j /dev/hda3</c>.
</p>

<p>
Далее, монтируйте разделы и распакуйте нужный stage файл 
</p>

<pre caption="Подготовка к установке">
(Активация раздела подкачки)                    	# <i>swapon /dev/hdax</i>
(Монтирование корневого раздела)                    # <i>mount /dev/hdax /mnt/gentoo</i>
(Создание точки монтирования /boot)                 # <i>mkdir /mnt/gentoo/boot</i>
(Монтирование загрузочного раздела)                 # <i>mount /dev/hdax /mnt/gentoo/boot</i>
(Переход в точку монтирования)                      # <i>cd /mnt/gentoo</i>
(Извлечение архива stage...)                        # <i>tar -xvjpf /mnt/cdrom/stages/stage?-*.tar.bz2</i>
(<comment>или</comment> загрузите последний архив...)                  # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(                  ... и извлеките)                 # <i>tar -xvjpf stage*</i>
(Необязательно: распаковка дерева портежей)         # <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 -C /mnt/gentoo/usr</i>
(Необязательно: копирование distfiles)              # <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
(Выбор зеркала)                                     # <i>mirrorselect -a -s4 -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Копирование информации о DNS-серверах)             # <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Монтирование файловой системы proc)                # <i>mount -t proc none /mnt/gentoo/proc</i>
(Смена корневого каталога)                          # <i>chroot /mnt/gentoo /bin/bash</i>
(Загрузка необходимых переменных)                   # <i>env-update; source /etc/profile</i>
(Сеть, не-GRP установка: обновление дерева портежей)# <i>emerge sync</i>
</pre>

<p>
Теперь устанавливаем Gentoo:
</p>

<pre caption = "Установка Gentoo">
(Измените переменные USE, CFLAGS и CXXFLAGS. Пользователи Stage1 могут изменить и CHOST)  
# <i>nano -w /etc/make.conf</i>
(Только пользователям Stage1: начальная инициализация системы)                  # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Только пользователям Stage1, Stage2: установка базовой системы)                # <i>emerge system</i>
</pre>

<p>
Теперь настраиваем необходимую информацию:
</p>

<pre caption = "Настройка конфигурационных файлов">
(Настройка информации о временной зоне)            # <i>ln -sf /usr/share/zoneinfo/<comment>&lt;путь к файлу временной зоны(?)&gt;</comment> /etc/localtime</i>
(Редактируем файл fstab)                           # <i>nano -w /etc/fstab</i>
</pre>

<p>
Используйте следующее как <e>образец</e> (не копируйте в точности) для
<path>/etc/fstab</path>:
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;                  &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/hdax               /boot           ext2            noauto,noatime          1 2
/dev/hdax               none            swap            sw                      0 0
/dev/hdax               /               reiserfs        noatime                 0 1
/dev/cdroms/cdrom0      /mnt/cdrom      auto            noauto,user             0 0
none                    /proc           proc            defaults                0 0
none                    /dev/shm        tmpfs           defaults                0 0
</pre>

<p>
Продолжим установкой ядра Linux:
</p>

<pre caption="Установка ядра">
(Установка исходников ядра)                                # <i>emerge <comment>&lt;kernel-package-here&gt;</comment></i>
(Настройте свое ядро используя genkernel...)               # <i>emerge genkernel; genkernel --menuconfig all</i>
(<comment>или</comment> (1) соберите свое ядро вручную)    # <i>cd /usr/src/linux; make menuconfig;</i>
(   (2) Включите файловые системы VM, /proc fs, /dev fs,  монтирование /dev fs автоматически при загрузке )
(   (3) Компиляция вашего ядра)                            # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
(   (4) Копирования ядра)                                  # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
Теперь установка других нужных вам утилит:
</p>

<pre caption = "Установка важных системных утилит">
(Установка системного логгера; на выбор: sysklogd, metalog, msyslog, syslog-ng) # <i>emerge syslog-ng </i>
(Автоматический запуск системного логгера при загрузке)                         # <i>rc-update add syslog-ng default</i>
(Установка демона cron; на выбор: vixie-cron, dcron, fcron)                     # <i>emerge vixie-cron</i>
(Автоматический запуск демона cron при загрузке)                                # <i>rc-update add vixie-cron default</i>   
(только пользователям genkernel : установка hotplug)                            # <i>emerge hotplug</i>
(только пользователям genkernel: автоматический запуск hotplug при загрузке)    # <i>rc-update add hotplug default</i>
(только пользователям файловых систем, отличных от ext2,ext3; на выбор: reiserfsprogs, xfsprogs, jfsutils)  # <i>emerge reiserfsprogs</i>
(init скрипт доменного имени)                                                   # <i>rc-update add domainname default</i>
</pre>

<p>
Если вам нужны специализированные ebuild ядер:
</p>

<pre caption = "Установка специализированных ebuild для ядер">
# <i>emerge pcmcia-cs</i> (или <i>nforce-net</i>, <i>nforce-audio</i>, <i>e100</i>, <i>e1000</i>, <i>ati-drivers</i>, <i>rp-pppoe</i>)
# <i>VIDEO_CARDS="ваша_карта" emerge xfree-drm</i> (для ATI Radeon до 9200, Rage128, Matrox, Voodoo и других)
</pre>

<p>
Завершение настроек вашей системы Gentoo:
</p>

<pre caption = "Завершение конфигурационных настроек">
(Установка пароля root)                                      # <i>passwd</i>
(Создание обычного пользователя)                             # <i>useradd ваш_пользователь -m -G users,wheel,audio -s /bin/bash</i>
(Установка для него пароля)                                  # <i>passwd ваш_пользователь</i>
(Установка имени системы)                                    # <i>echo моя_машина &gt; /etc/hostname</i>
(Установка доменного имени системы)                          # <i>echo мой_домен.com &gt; /etc/dnsdomainname</i>
(Настройка файла хостов, :"127.0.0.1 localhost моя_машина")  # <i>nano -w /etc/hosts</i>
(Настройка базовых системных настроек, следуйте коментариям) # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption = "Настройка сети">
(Настройка сети; пользователи dhcp должны установить iface_eth0="dhcp")       # <i>nano -w /etc/conf.d/net</i>
(Список модулей, загружаемых при старте системы)                              # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;version&gt;</comment></i>
(Только пользователям не-PCMCIA карт: запуск сети автоматически при загрузке) # <i>rc-update add net.eth0 default</i>
(Только при наличии нескольких сетевых интерфейсов:)
   (1) Создайте скрипт для каждого интерфейса)                                # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Автоматический запуск при старте при отсутствии PCMCIA)                # <i>rc-update add net.ethx default</i>
(Пользователям PCMCIA: проверьте /etc/conf.d/pcmcia и загружайте PCMCIA при загрузке) # <i>rc-update add pcmcia boot</i>
</pre>

<p>
Теперь установка загрузчика:
</p>

<pre caption="Установка и настройка GRUB">
# <i>emerge grub</i>
# <i>grub</i>
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup (hd0)</i>
grub&gt; <i>quit</i>
# <i>nano -w /boot/grub/grub.conf</i>
default 0
timeout 15
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux
  root (hd0,0)
  <comment># пользователям genkernel :</comment>
  kernel /kernel-<comment>&lt;версия ядра&gt;</comment> root=/dev/ram0 init=/linuxrc real_root=/dev/hda3
  initrd /initrd-<comment>&lt;версия ядра&gt;</comment>
  <comment># не использовавшим genkernel:</comment>
  kernel /kernel-<comment>&lt;версяи ядра&gt;</comment> root=/dev/hda3
</pre>

<pre caption="Установка и настройка LILO">
# <i>emerge lilo</i>
# <i>nano -w /etc/lilo.conf</i>
boot=/dev/hda
prompt
timeout=50
default=gentoo

image=/boot/kernel-<comment>&lt;kernel version&gt;</comment> 
  label=gentoo
  read-only
  <comment># пользователям genkernel:</comment>
  append="init=/linuxrc real_root=/dev/hda3"
  root=/dev/ram0
  initrd=/boot/initrd-<comment>&lt;версия ядра&gt;</comment>
  <comment># не использовавшим genkernel:</comment>
  root=/dev/hda3

# <i>/sbin/lilo</i>
</pre>

<p>
Теперь отмонтируем все разделы и перезагрузимся в вашу новую систему:
</p>

<pre caption="Заключение и установка GUI (графического интерфейса) (?)">
(Выход из chroot)                                # <i>exit; cd /</i>
(Размонтирование разделов )                      # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
(Перезагрузка; Вытащите установочный диск)       # <i>reboot</i>
(После загрузки:)
(Только пользователям ADSL)                      # <i>adsl-setup</i>
(Только пользователям GRP)
(  (1) Монтирование CD2)                         # <i>mount /dev/cdrom /mnt/cdrom</i>  
(  (2) Копированеие пакетов(?))                  # <i>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</i>
(  (3) Установка дополнительного ПО)             # <i>USE="bindist" emerge -k xfree gnome kde mozilla openoffice-bin</i>
(  (4) Настройка вашего Xserver'a)               # <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>
Вы можете получить больше информации по этой ссылке: <uri
link="http://www.gentoo.org/doc/en/index.xml">Документация Gentoo</uri>.
</p>
</body>
</section>
</chapter>
</guide>
