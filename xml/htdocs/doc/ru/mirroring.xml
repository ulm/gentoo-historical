<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/ru/mirroring.xml">

<title>Руководство по зеркалированию репозитария Gentoo Linux</title>

<author title="Chief Architect">
<mail link="drobbins@gentoo.org">Daniel Robbins</mail>
</author>
<author title="Editor">
<mail link="peitolm@gentoo.org">Colin Morey</mail>
</author>
<author title="Переводчик">
<mail link="pythoo@yandex.ru">Иван Зенков</mail>
</author>
<author title="Редактор">
<mail link="svyatogor@gentoo.org">Сергей Кулешов</mail>
</author>


<abstract>
Данное руководство содержит инструкции по настройке rsync зеркала, репозитария Gentoo Linux.
</abstract>

<version>1.0</version>
<date>04 May 2002</date>

<chapter>
<title>Настройка rsync зеркала</title>
<section>
<body>

<p>На данный момент для зеркалирования нашего Portage дерева,
потребуется около 130MB, поскольку свободное пространство интенсивно
уменьшается, рекомендуется выделять не меньше 200MB. Настройка зеркала
дерева портежей проста. Для начала, удостоверьтесь, что у вас
установлен rsync. После чего запишите в файл <path>rsyncd.conf</path>
что-то вроде этого:</p>

<pre>
pid file = /var/run/rsyncd.pid
motd file = /etc/rsync/rsyncd.motd
syslog facility = local3
timeout = 150
[gentoo-x86-portage]
        path = /space/gentoo/rsync
        comment = Gentoo Linux Portage tree
[gentoo-portage]
        path = /space/gentoo/rsync
        comment = Gentoo Linux Portage tree
</pre>

<p>Метки <c>gentoo-x86-portage</c> и <c>gentoo-portage</c> содержат
одну и ту же информацию. Несмотря на то, что последнее время мы
изменили официальное имя нашего зеркала на <c>gentoo-portage</c>,
<c>gentoo-x86-portage</c> по прежнему требуется для обратной
совместимости. Потому и требуется включить в файл сразу две
конфигурационные метки. Ну и, напоследок, ваш rsync также можно
настроить на вывод информационного сообщения (motd), например данных о
хостинг провайдере и контактные адреса администратора.</p>

<p>Теперь нужно создать само зеракало дерева Portage Gentoo Linux,
используя следующую команду:</p>

<pre>rsync -rlptDvz --delete rsync://rsync.gentoo.org/gentoo-portage/ /space/gentoo/rsync/</pre>

<p>Опция <c>--delete</c> удаляет устаревшие ebuild скрипты, из вашего
зеркала. Затем укажите cron запускать rsync каждые полчаса, на :00 и
:30. После чего отправьте письмо <mail link="admin_[at]_gentoo.org">Административной команде</mail>
и считайте, что зеркало уже готово. Мы настроим официальный
rsync[num].[countrycode].gentoo.org DNS и добавим вас к нашему DNS
кольцу для rsync.gentoo.org и rsync.[countrycode].gentoo.org.
Мы также установим cvs.gentoo.org QoS для получения вами "предпочтительного"
доступа к нашему rsync серверу. Конечно после того как вы будете добавлены в наш DNS,
вы начнете замечать rsync трафик. После чего вы возможно захотите поменять точку cron процесса
на главное зеркало - rsync://rsync1.us.gentoo.org (??или на то, что то, что содержит тоже самое).
-- спасибо за помощь всем пользователям и разработчикам Gentoo Linux! :)</p>

</body>
</section>
</chapter>
</guide>
