<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/handbook/hb-working-portage.xml,v 1.15 2013/08/06 16:31:47 blueboar Exp $ -->

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<sections>

<abstract>
Данная глава объясняет "простые" шаги, которые необходимо знать пользователю,
чтобы поддерживать приложения на его системе.
</abstract>

<version>4</version>
<date>2013-08-01</date>

<section>
<title>Добро пожаловать в Portage</title>
<body>

<p>
Система Portage &mdash; вероятно, самое известное нововведение Gentoo в 
управлении программным обеспечением. Благодаря высокой гибкости и чрезвычайно
богатым возможностям, она зачастую считается лучшим средством управления 
программным обеспечением из существующих в Linux.
</p>

<p>
Portage полностью написана на <uri link="http://www.python.org">Python</uri> и 
<uri link="http://www.gnu.org/software/bash">Bash</uri>, и в результате 
полностью прозрачна для пользователей, поскольку оба &mdash; языки сценариев.
</p>

<p>
Большинство пользователей взаимодействует с Portage с помощью команды 
<c>emerge</c>. Эта глава не призвана заменить страницу справки emerge. Для 
просмотра всех возможных параметров команды emerge, обращайтесь к странице
справки:
</p>

<pre caption="Чтение страницы справки emerge">
$ <i>man emerge</i>
</pre>

</body>
</section>
<section>
<title>Дерево Portage</title>
<subsection>
<title>Сборочные файлы ebuild</title>
<body>

<p>
Говоря о пакетах, мы часто имеем в виду программы, доступные пользователям
Gentoo через дерево Portage. Дерево Portage &mdash; это набор 
<e>сборочных файлов ebuild</e>, содержащих всю информацию, необходимую Portage 
для управления программным обеспечением (установки, поиска, извлечения и т.п.) 
По умолчанию сборочные файлы находятся в <path>/usr/portage</path>.
</p>

<p>
Когда Portage по вашему поручению выполняет любые действия над пакетами 
программ, эти действия опираются на сборочные файлы, имеющиеся в системе. 
Поэтому необходимо регулярно обновлять сборочные файлы, чтобы Portage знала
о новых программах, обновлениях, связанных с безопасностью и т.д.
</p>

</body>
</subsection>
<subsection>
<title>Обновление дерева Portage</title>
<body>

<p>
Дерево Portage обычно обновляется с помощью <uri 
link="http://rsync.samba.org/">rsync (англ.)</uri>, средства быстрой разностной 
передачи файлов. Обновление выполнить довольно просто, так как запуск rsync
обеспечивается командой <c>emerge</c> :
</p>

<pre caption="Обновление дерева Portage">
# <i>emerge --sync</i>
</pre>

<p>
Если rsync выполнить невозможно из-за ограничений межсетевого экрана, дерево 
Portage все-таки можно обновить из ежедневных &laquo;снимков&raquo;, 
создаваемых нами. Для автоматического извлечения и установки в системе 
новейшего снимка служит утилита <c>emerge-webrsync</c>:
</p>

<pre caption="Запуск emerge-webrsync">
# <i>emerge-webrsync</i>
</pre>

<p>
Дополнительным преимуществом использования <c>emerge-webrsync</c> является то, 
что эта утилита позволяет администратору загружать только те снимки дерева Portage, 
которые подписаны ключом GPG команды Gentoo. Более подробная информация по этому 
вопросу может быть найдена в разделе <uri link="?part=2&amp;chap=3">Возможности Portage</uri> 
в подразделе <uri link="?part=2&amp;chap=3#webrsync-gpg">Загрузка проверенных образов дерева Portage</uri>.

</p>

</body>
</subsection>
</section>
<section>
<title>Обслуживание программного обеспечения</title>
<subsection>
<title>Поиск программ</title>
<body>
<!-- (**) continue proofing here -->
<p>
Для поиска программ в дереве Portage по названию можно использовать встроенные 
возможности команды <c>emerge</c>. По умолчанию команда <c>emerge --search</c> 
выдает названия пакетов, соответствующих (как полностью, так и частично) 
заданному условию поиска.
</p>

<p>
Например, чтобы найти все пакеты, содержащие &laquo;pdf&raquo; в названии:
</p>

<pre caption="Поиск пакетов с pdf в названии">
$ <i>emerge --search pdf</i>
</pre>

<p>
Для поиска пакетов еще и по тексту описания можно использовать параметр
<c>--searchdesc</c> (или <c>-S</c>):
</p>

<pre caption="Поиск пакетов, связанных с pdf">
$ <i>emerge --searchdesc pdf</i>
</pre>

<p>
Посмотрев на сообщения команды, вы отметите, что вам дается множество 
информации. Поля четко обозначены, поэтому мы не будем вдаваться в подробности 
их значения:
</p>

<pre caption="Пример вывода emerge --search">
*  net-print/cups-pdf
      Latest version available: 1.5.2
      Latest version installed: [ Not Installed ]
      Size of downloaded files: 15 kB
      Homepage:    http://cip.physik.uni-wuerzburg.de/~vrbehr/cups-pdf/
      Description: Provides a virtual printer for CUPS to produce PDF files.
      License:     GPL-2

<comment>(
*  net-print/cups-pdf
      Последняя доступная версия: 1.5.2
      Последняя установленная версия: [ не установлен ]
      Размер загружаемых файлов: 15 kB
      Веб-страница:  http://cip.physik.uni-wuerzburg.de/~vrbehr/cups-pdf/
      Описание:      Снабжает CUPS виртуальным принтером для печати PDF-файлов.
      Лицензия:      GPL-2 )</comment>
</pre>

</body>
</subsection>
<subsection>
<title>Установка программ</title>
<body>

<p>
После того, как вы нашли нужное программное обеспечение, его можно легко
установить с помощью команды <c>emerge</c>. Вот пример установки пакета
<c>gnumeric</c>:
</p>

<pre caption="Установка gnumeric">
# <i>emerge gnumeric</i>
</pre>

<p>
Так как множество приложений зависит друг от друга, любая попытка установить
какой-либо пакет программ может повлечь за собой также установку дополнительных 
пакетов. Не беспокойтесь, Portage справится и с этим. Если вы захотите 
выяснить, что именно Portage собирается установить вместе с нужным вам пакетом,
добавьте параметр <c>--pretend</c>. Например:
</p>

<pre caption="Проверка зависимостей пакета gnumeric">
# <i>emerge --pretend gnumeric</i>
</pre>

<p>
После команды на установку пакета, Portage загружает из интернета необходимый 
исходный код (при необходимости), и по умолчанию сохраняет его в каталоге 
<path>/usr/portage/distfiles</path>. После этого пакет распаковывается, 
компилируется и устанавливается. Если вы хотите, чтобы Portage только загрузила
исходный код без его установки, добавьте к команде <c>emerge</c> параметр 
<c>--fetchonly</c>:
</p>

<pre caption="Загрузка исходного кода пакета gnumeric">
# <i>emerge --fetchonly gnumeric</i>
</pre>

</body>
</subsection>
<subsection>
<title>Обнаружение документации к пакету</title>
<body>

<p>
Многие пакеты содержат собственную документацию. Иногда USE-флаг <c>doc</c>
определяет, следует ли устанавливать документацию к пакету. Проверить наличие 
USE-флага <c>doc</c> можно командой <c>emerge -vp &lt;название пакета&gt;</c>.
</p>

<pre caption="Проверка наличия USE-флага doc">
<comment>(alsa-lib - это всего лишь пример)</comment>
# <i>emerge -vp alsa-lib</i>
[ebuild N ] media-libs/alsa-lib-1.0.14_rc1 -debug +doc 698 kB
</pre>

<p>
Лучшим способом включения USE-флага <c>doc</c> будет работа с ним для 
каждого пакета отдельно, через <path>/etc/portage/package.use</path>, так, 
что вы получите документацию только для интересующих вас пакетов. Включение 
этого флага глобально иногда вызывает проблемы с циклическими зависимостями. 
Для большего количества информации, пожалуйста, прочитайте главу 
<uri link="?part=2&amp;chap=2">USE-флаги</uri>.
</p>

<p>
Документация от вновь установленного пакета обычно находится в подкаталоге 
каталога <path>/usr/share/doc</path>, соответствующем названию пакета.
Кроме того, можно вывести список всех установленных файлов утилитой 
<c>equery</c>, которая входит в <uri link="/doc/en/gentoolkit.xml">пакет 
gentoolkit (англ.)</uri> &mdash; <c>app-portage/gentoolkit</c>.
</p>

<pre caption="Обнаружение документации пакета">
# <i>ls -l /usr/share/doc/alsa-lib-1.0.14_rc1</i>
total 28
-rw-r--r--  1 root root  669 May 17 21:54 ChangeLog.gz
-rw-r--r--  1 root root 9373 May 17 21:54 COPYING.gz
drwxr-xr-x  2 root root 8560 May 17 21:54 html
-rw-r--r--  1 root root  196 May 17 21:54 TODO.gz

<comment>(или используйте для поиска интересных файлов команду equery :)</comment>
# <i>equery files alsa-lib | less</i>
media-libs/alsa-lib-1.0.14_rc1
* Contents of media-libs/alsa-lib-1.0.14_rc1:
/usr
/usr/bin
/usr/bin/alsalisp
<comment>(выдача обрезана)</comment>
</pre>

</body>
</subsection>
<subsection>
<title>Удаление пакета</title>
<body>

<p>
Когда вы захотите удалить пакет из системы, используйте команду <c>emerge
--unmerge</c>. Это приведет к удалению из системы всех файлов, установленных 
пакетом, <e>кроме</e> конфигурационных файлов приложения, изменявшихся после 
установки. Сохранение конфигурационных файлов позволяет вернуться к работе с 
пакетом, если вы когда-нибудь решите снова его установить.
</p>

<p>
<brite>Внимание</brite>: Portage <e>не проверяет</e>, зависят ли другие пакеты
от удаляемого! Однако вы получите предупреждение, если удаление пакета приведет 
к неработоспособности системы.
</p>

<pre caption="Удаление пакета gnumeric из системы">
# <i>emerge --unmerge gnumeric</i>
</pre>

<p>
После удаления пакета из системы, пакеты, установленные автоматически, потому 
что от них зависел удаленный пакет, остаются. Чтобы Portage выявила все 
когда-то нужные пакеты, которые теперь можно удалить, используйте команду 
<c>emerge --depclean</c>. Мы вернемся к этому ниже.
</p>

</body>
</subsection>
<subsection>
<title>Обновление системы</title>
<body>

<p>
Чтобы система сохранялась в отличной форме (не говоря уже об установке 
свежайших обновлений, связанных с безопасностью), ее нужно регулярно обновлять.
Так как Portage просматривает сборочные файлы только в локальном дереве 
Portage, сперва потребуется обновить его. Обновив дерево Portage, вы
сможете обновить систему командой <c>emerge --update world</c>. В следующем 
примере мы также пользуемся параметром <c>--ask</c>, который поручает Portage 
вывести список пакетов, которые она собирается обновить, и спросить вас, можно
ли продолжать:</p> 

<pre caption="Обновление системы">
# <i>emerge --update --ask world</i>
</pre>

<p>
Portage будет искать более новые версии установленных приложений. Однако
проверяются только версии приложений, <e>явно</e> установленных вами (то есть,
тех, которые находятся в <path>/var/lib/portage/world</path> - Portage не будет
тщательно проверять их зависимости. Если вы хотите обновить и их зависимости
тоже, добавьте аргумент <c>--deep</c>:
</p>


<pre caption="Обновляем вашу систему с зависимостями">
# <i>emerge --update --deep world</i>
</pre>

<p>
Но это все еще не означает <e>все пакеты</e>. Некоторые пакеты на вашей системе 
были нужны в течении процесса компиляции и сборки пакетов, но как только пакет 
установлен, эти зависимости больше не нужны. Portage называет такие зависимости 
<e>build</e>-зависимости. Чтобы включить и их в цикл обновления, 
добавьте <c>--with-bdeps=y</c>: 
</p>

<pre caption="Обновление всей системы">
# <i>emerge --update --deep -with-bdeps=y world</i>
</pre>

<p>
Поскольку обновления, относящиеся к безопасности, случаются и в пакетах, 
явным образом не устанавливались (но были &laquo;подтянуты&raquo; из-за того, 
что он них зависят другие программы), рекомендуется изредка запускать эту 
команду.
</p>

<p>
Если вы меняли какие-либо из <uri link="?part=2&amp;chap=2">USE-флагов</uri>, 
возможно, потом вы также захотите добавить параметр <c>--newuse</c>. Тогда 
Portage проверит, требует ли изменение установки новых пакетов или 
перекомпиляции существующих:
</p>

<pre caption="Выполнение полного обновления">
# <i>emerge --update --deep --with-bdeps=y --newuse world</i>
</pre>

</body>
</subsection>
<subsection>
<title>Метапакеты</title>
<body>

<p>
У некоторых пакетов в дереве Portage нет содержимого как такового, и они
используются для установки набора других пакетов. Например, пакет <c>kde</c>
полностью устанавливает среду KDE в вашей системе, привлекая различные 
KDE-пакетов в качестве зависимостей.
</p>

<p>
Если вы когда-либо захотите удалить из системы такой пакет, запуск 
<c>emerge--unmerge</c> не возымеет должного эффекта, так как пакеты, от которых 
он зависит, останутся в системе. 
</p>

<p>
В Portage существует возможность удаления остаточных зависимосей, но так как
зависимости программ меняются со временем, доступность программного 
обеспечения, прежде всего требуется полностью обновить всю систему, включая 
реализацию изменений, произведенных путем модификации USE-флагов. После этого 
можно запустить <c>emerge --depclean</c>, чтобы удалить остаточные зависимости. 
Когда это сделано, вам потребуется пересобрать приложения, ранее динамически 
связанные с удаленными пакетами, в которых они теперь не нуждаются.
</p>

<p>
Со всем этим управляются следующие три команды:
</p>

<pre caption="Удаление ненужных зависимостей">
# <i>emerge --update --deep --newuse world</i>
# <i>emerge --depclean</i>
# <i>revdep-rebuild</i>
</pre>

<p>
<c>revdep-rebuild</c> входит в пакет <c>gentoolkit</c>; не забудьте сначала его 
установить:
</p>

<pre caption="Установка пакета gentoolkit">
# <i>emerge gentoolkit</i>
</pre>

</body>
</subsection>
</section>

<section id="license">
<title>Лицензии</title>
<subsection>
<body>

<p>
Начиная с Portage версии 2.1.7, вы можете принять или отклонить приложения, 
в зависимости от его лицензии. Все пакеты в дереве содержат запись 
<c>LICENSE</c> в своих файлах ebuild. Запуск команды <c>emerge --search имя_пакета</c> 
покажет вам лицензию пакета.
</p>

<p>
По умолчанию, Portage разрешает все лицензии, кроме Соглашения с Конечным 
Пользователем (EULA), потому что она требует прочтения и соглашения с ней.
</p>

<p>
Переменная, которая контролирует разрешенные лицензии, называется 
<c>ACCEPT_LICENSE</c>, и ее можно установить в <path>/etc/portage/make.conf</path>.
В следующем примере показано это значение по умолчанию:
</p>

<pre caption="Установка ACCEPT_LICENSE в /etc/portage/make.conf">
ACCEPT_LICENSE="* -@EULA"
</pre>

<p>
С данной конфигурацией пакеты, которые требуют взаимодействия в процессе 
установки, чтобы согласиться с их EULA, <e>не</e> будут устанавливаемыми.
Пакеты без EULA <e>будут</e> устанавливаемыми.
</p>

<p>
Вы можете установить <c>ACCEPT_LICENSE</c> глобально, в 
<path>/etc/portage/make.conf</path>, либо можете указать ее для каждого 
пакета в <path>/etc/portage/package.license</path>.
</p>

<p>
Например, если вы хотите позволить лицензию <c>truecrypt-2.7</c> для 
<c>app-crypt/truecrypt</c>, добавьте следующее в 
<path>/etc/portage/package.license</path>:
</p>

<pre caption="Определяем лицензию truecrypt в package.license">
app-crypt/truecrypt truecrypt-2.7
</pre>

<p>
Это разрешит установку версий truecrypt, имеющих лицензию <c>truecrypt-2.7</c>, 
но не версий с лицензией <c>truecrypt-2.8</c>.
</p>

<impo>
Лицензии сохраняются в <path>/usr/portage/licenses</path>, а группы лицензий 
находятся в <path>/usr/portage/profiles/license_groups</path>. Первая запись 
на каждой строке (ЗАГЛАВНЫМИ буквами) это имя группы лицензий, а затем каждая 
запись это индивидуальная лицензия.
</impo>

<p>
Группы лицензий, определенные в <c>ACCEPT_LICENSE</c>, предваряются знаком <b>@</b>. 
Часто требуемая настройка заключается в разрешении установки только свободного
программного обеспечения и документации. Чтобы достичь этого, мы можем удалить
все принимаемые в настоящий момент лицензии (используя <c>-*</c>) и, затем,
разрешить только лицензии в группе <c>FREE</c>, как показано ниже:
</p>

<pre caption="Разрешаем только свободные лицензии для программ и документации в /etc/portage/make.conf">
ACCEPT_LICENSE="-* @FREE"
</pre>

<p>
В данном случае "свободная" по определению <uri
link="http://www.gnu.org/philosophy/free-sw.html">FSF</uri> и <uri
link="http://www.opensource.org/docs/osd">OSI</uri>. Любой пакет, чья лицензия 
не отвечает этим требованиям, не будет устанавливаемой на вашей системе.
</p>

</body>
</subsection>
</section>

<section>
<title>Когда Portage жалуется...</title>
<subsection>
<title>Слоты, виртуалы, ветви, архитектуры и профили</title>
<body>

<p>
Как уже сказано, Portage &mdash; чрезвычайно мощная система, поддерживающая 
множество возможностей, не хватающих другим системам управления программами.
Чтобы это стало понятно, разберем несколько аспектов Portage, не вникая в 
подробности.
</p>

<p>
С помощью Portage разные версии отдельного пакета могут сосуществовать в одной
системе. В то время, как другие системы управления стремятся называть
пакеты в соответствии с версией (например <c>freetype</c> и <c>freetype2</c>),
в Portage используется технология <e>слотов</e> (SLOT), или областей.
Пакет присваивает определенный слот своей версии. Пакеты с разными слотами
способны сосуществовать в одной системе. Например, у пакета <c>freetype</c> 
есть ebuild как со <c>SLOT="1"</c>, так и со <c>SLOT="2"</c>.
</p>

<p>
Существуют также пакеты, выполняющие одни и те же функции, но отличающиеся
в реализации. Например <c>metalogd</c>, <c>sysklogd</c> и <c>syslog-ng</c>
являются системными службами журналирования. Приложения, использующие 
&laquo;системный журнал&raquo;, не могут зависеть от одной конкретной 
программы, например от <c>metalogd</c>, так как остальные программы ничем не 
хуже. В Portage предусмотрены <e>виртуальные пакеты</e>: каждая служба
журналирования описана как провайдер сервиса логгирования в виртуальном
пакете <c>logger</c> в категории <c>virtual</c>, поэтому все приложения
могут зависеть от пакета <c>virtual/logger</c>. При установке, приложения
загрузит первый пакет логгирования, который описан в пакете, если только
какой-нибудь из таких пакетов уже не установлен (в случае чего зависимость
от виртуального пакета считается удовлетворенной).
</p>

<p>
Программное обеспечение может располагаться в различных ветвях дерева
Portage. По умолчанию в системе разрешено только использование стабильных 
пакетов. Большинство новых программ при поступлении включаются в тестовую 
ветвь, что указывает на необходимость дополнительного тестирования перед тем, 
как включить их в стабильные. Хотя в дереве Portage и видны сборочные файлы 
для таких программ, Portage не станет обновлять их до тех пор, пока они не 
будут помещены в стабильную ветвь.
</p>

<p>
Некоторые программы имеются не для всех архитектур. Либо они не работают в
определенных архитектурах, либо требуют дополнительного тестирования, или 
у разработчика нет возможности проверить, работает ли пакет в различных 
архитектурах.
</p>

<p>
Каждая установка Gentoo придерживается определенного <c>профиля</c>, который 
содержит, помимо прочего, список пакетов, необходимых для работоспособности 
системы.
</p>

</body>
</subsection>
<subsection id="blocked">
<title>Блокировка пакетов</title>
<body>

<pre caption="Предупреждение о заблокированных пакетах (с --pretend)">
[blocks B     ] mail-mta/ssmtp (is blocking mail-mta/postfix-2.2.2-r1)
</pre>

<pre caption="Предупреждение о заблокированных пакетах (без --pretend)">
!!! Error: the mail-mta/postfix package conflicts with another package.
!!!        both can't be installed on the same system together.
!!!        Please use 'emerge --pretend' to determine blockers.

<comment>( !!! Ошибка: пакет mail-mta/postfix конфликтует с другим пакетом.
  !!! оба не могут находиться в системе одновременно. Пожалуйста,
  !!! запустите 'emerge --pretend' для выявления блокирующих пакетов. )</comment>
</pre>

<p>
В файлах ebuild есть специальные поля, сообщающие Portage о зависимостях. 
Возможны два вида зависимости: зависимость сборки, объявленная в <c>DEPEND</c>,
и зависимость выполнения, объявленная в <c>RDEPEND</c>. Когда одна из этих 
зависимостей явно указывает на <e>несовместимость</e> пакета или виртуального 
пакета, это вызывает блокировку.
</p>

<p>
Хотя новые версии Portage достаточно умны, чтобы обойти маленькие блокировки 
без вмешательства пользователя, может случиться, что вам нужно будет починить 
их самим, как объяснено ниже.
</p>

<p>
Для разблокировки можно отказаться от установки пакета или предварительно
удалить конфликтующего пакета. В данном примере можно отказаться от установки
<c>postfix</c> или сначала удалить <c>ssmtp</c>.
</p>

<p>
Вы также можете увидеть блокирующие пакеты с определенной версией, 
например <b>&lt;</b>media-video/mplayer-1.0_rc1-r2. В данном случае, 
обновление до более новой версии блокирующего пакета уберет блокировку.
</p>

<p>
Также возможно, что два пакета, подлежащие установке, блокируют друг друга. В этом
редчайшем случае следует определить, зачем вам устанавливать оба пакета.
В большинстве случаев можно обойтись одним. Если это окажется не так, то,
пожалуйста, заведите отчет об ошибке в <uri 
link="http://bugs.gentoo.org">системе распределения запросов Gentoo</uri>.
</p>

</body>
</subsection>
<subsection id="masked">
<title>Маскировка пакетов</title>
<body>

<pre caption="Предупреждение о замаскированных пакетах">
!!! all ebuilds that could satisfy "bootsplash" have been masked.

<comment>(!!! все сборки, удовлетворяющие "bootsplash", замаскированы.)</comment>
</pre>

<pre caption="Предупреждение о замаскированных пакетах с указанием причины">
!!! possible candidates are:

- gnome-base/gnome-2.8.0_pre1 (masked by: <i>~x86 keyword</i>)
- lm-sensors/lm-sensors-2.8.7 (masked by: <i>-sparc keyword</i>)
- sys-libs/glibc-2.3.4.20040808 (masked by: <i>-* keyword</i>)
- dev-util/cvsd-1.0.2 (masked by: <i>missing keyword</i>)
- games-fps/unreal-tournament-451 (masked by: <i>package.mask</i>)
- sys-libs/glibc-2.3.2-r11 (masked by: <i>profile</i>)
- net-im/skype-2.1.0.81 (masked by: skype-eula <i>license(s)</i>)

<comment>( !!! возможные кандидаты:

- gnome-base/gnome-2.8.0_pre1 (маскировка: <i>ключ ~x86</i>)
- lm-sensors/lm-sensors-2.8.7 (маскировка: <i>ключ -sparc</i>)
- sys-libs/glibc-2.3.4.20040808 (маскировка: <i>ключ -*</i>)
- dev-util/cvsd-1.0.2 (маскировка: <i>ключ отсутствует</i>)
- games-fps/unreal-tournament-451 (masked by: <i>package.mask</i>)
- sys-libs/glibc-2.3.2-r11 (маскировка: <i>profile</i>) 
- net-im/skype-2.1.0.81 (маскировка: skype-eula <i>лицензия</i>))</comment>
</pre>

<p>
Когда вы собираетесь установить пакет, не предназначенный для вашей системы, 
выдается ошибка маскировки. Нужно попытаться установить другую программу, 
существующую для вашей системы, или дождаться, пока пакет станет доступным. 
Всегда есть причина, по которой пакет замаскирован:
</p>

<ul>
  <li>
    <b>ключ ~arch</b>: пакет недостаточно проверен для помещения в стабильную
    ветвь. Подождите несколько дней или недель и попробуйте установить его еще 
    раз. 
  </li>
  <li>
    <b>ключ -arch</b> или <b>ключ -*</b>: пакет не работоспособен в вашей 
    архитектуре. Если вы полагаете, что он работает, сообщите об этом в <uri 
    link="http://bugs.gentoo.org">bugzilla</uri>. 
  </li>
  <li>
    <b>ключ отсутствует</b>: пакет еще не тестировался в вашей архитектуре.
    Попросите группу портирования в архитектуру проверить пакет, или
    протестируйте его за них и сообщите о своих изысканиях в <uri
    link="http://bugs.gentoo.org">bugzilla</uri>.
  </li>
  <li>
    <b>package.mask</b>: обнаружено повреждение пакета, нестабильность или
    что-то худшее, и пакет заблокирован специально.
  </li>
  <li>
    <b>profile</b>: пакет считается не предназначенным для вашего профиля.
    В случае установки приложение может вызвать сбой системы или просто 
    несовместимо с используемым профилем.
  </li>
  <li>
    <b>license</b> означает, что лицензия приложения не совместима с вашей 
    настройкой <c>ACCEPT_LISENSE</c>. Вы должны явно разрешить лицензию 
    или группу лицензий приложения, прописав ее в <path>/etc/portage/make.conf</path>, 
    либо в <path>/etc/portage/package.license</path>. Обратитесь к разделу 
    <uri link="#license">Лицензии</uri> для того, чтобы понять, как работают лицензии.
  </li>
</ul>

</body>
</subsection>

<subsection id="USEdependency">
<title>Необходимость изменить USE-флаги</title>
<body>

<pre caption="Portage предупреждает о необходимости изменить USE-флаг">
The following USE changes are necessary to proceed:
#required by app-text/happypackage-2.0, required by happypackage (argument)
>=app-text/feelings-1.0.0 test
</pre>

<p>
Ошибка может быть показана и так, если флаг <c>--autounmask</c> не установлен:
</p>

<pre caption="Portage показывает ошибку, требующую изменить USE-флаг">
emerge: there are no ebuilds built with USE flags to satisfy "app-text/feelings[test]".
!!! One of the following packages is required to complete your request:
- app-text/feelings-1.0.0 (Change USE: +test)
(dependency required by "app-text/happypackage-2.0" [ebuild])
(dependency required by "happypackage" [argument])
</pre>

<p>
Такое предупреждение, либо ошибка возникает, когда вы хотите установить пакет, 
который не только зависит от другого приложения, но и требует, чтобы это 
приложение было установлено с некоторым USE-флагом (либо набором USE-флагов). 
В данном примере, пакет <c>app-text/feelings</c> требуется собрать с 
<c>USE="test"</c>, но данный USE-флаг в системе не установлен.
</p>

<p>
Чтобы решить данную проблему, либо добавьте данный USE-флаг в ваши глобальные 
USE-флаги, в <path>/etc/portage/make.conf</path>, либо установите его для отдельного 
пакета в <path>/etc/portage/package.use</path>.
</p>

</body>
</subsection>

<subsection id="missingdependencies">
<title>Отсутствие нужных пакетов</title>
<body>

<pre caption="Предупреждение об отсутствии пакета">
emerge: there are no ebuilds to satisfy "&gt;=sys-devel/gcc-3.4.2-r4".

!!! Problem with ebuild sys-devel/gcc-3.4.2-r2
!!! Possibly a DEPEND/*DEPEND problem.

<comment>( emerge: нет сборок, удовлетворяющих "&gt;=sys-devel/gcc-3.4.2-r4".

  !!! Проблема с ebuild sys-devel/gcc-3.4.2-r2
  !!! Возможно, ошибка в DEPEND/*DEPEND. )</comment>
</pre>

<p>
Приложение, которое вы пытаетесь установить, зависит от другого пакета,
недоступного вашей системе. Пожалуйста, проверьте, есть ли такой запрос в
<uri link="http://bugs.gentoo.org">bugzilla</uri>, а если нет, сообщите
об ошибке. Если вы не смешиваете ветви, такого не должно происходить, и это 
&mdash; явная ошибка.
</p>

</body>
</subsection>
<subsection id="ambiguousebuild">
<title>Неоднозначность названия пакета</title>
<body>

<pre caption="Предупреждение о повторяющихся именах ebuild">
[ Results for search key : listen ]
[ Applications found : 2 ]

* dev-tinyos/listen [ Masked ]
     Latest version available: 1.1.15
     Latest version installed: [ Not Installed ]
     Size of files: 10,032 kB
     Homepage: http://www.tinyos.net/
     Description: Raw listen for TinyOS
     License: BSD

* media-sound/listen [ Masked ]
     Latest version available: 0.6.3
     Latest version installed: [ Not Installed ]
     Size of files: 859 kB
     Homepage: http://www.listen-project.org
     Description: A Music player and management for GNOME
     License: GPL-2

!!! The short ebuild name "listen" is ambiguous.  Please specify
!!! one of the above fully-qualified ebuild names instead.

<comment>( !!! Короткое название ebuild "listen" неоднозначно. Пожалуйста, 
  !!! вместо него укажите одно вышеприведенных полных названий ebuild.)</comment>
</pre>

<p>
Название приложения, которое вы собираетесь установить, соответствует более чем
одному пакету. Требуется также указать название категории. Portage предложит 
вам возможные варианты.
</p>

</body>
</subsection>
<subsection id="circulardependencies">
<title>Циклические зависимости</title>
<body>

<pre caption="Предупреждение Portage о циклических зависимостях">
!!! Error: circular dependencies:

ebuild / net-print/cups-1.1.15-r2 depends on ebuild /
app-text/ghostscript-7.05.3-r1
ebuild / app-text/ghostscript-7.05.3-r1 depends on ebuild /
net-print/cups-1.1.15-r2

<comment>( !!! Ошибка: циклические зависимости:

  ebuild / net-print/cups-1.1.15-r2 зависит от ebuild /
  app-text/ghostscript-7.05.3-r1
  ebuild / app-text/ghostscript-7.05.3-r1 зависит от ebuild /
  net-print/cups-1.1.15-r2   )</comment>
</pre>

<p>
Два или более пакета, которые вы хотите установить, взаимно зависимы, и в 
результате их установка невозможна. Скорее всего, это ошибка в дереве Portage. 
Пожалуйста, выждав время, обновите дерево Portage, и попытайтесь снова. Вы 
можете также проверить, есть ли эта ошибка в <uri 
link="http://bugs.gentoo.org">bugzilla</uri>, и если нет, сообщить о ней. 
</p>

</body>
</subsection>
<subsection id="fetchfailed">
<title>Ошибка извлечения</title>
<body>

<pre caption="Предупреждение Portage об ошибке извлечения">
!!! Fetch failed for sys-libs/ncurses-5.4-r5, continuing...
<comment>(...)</comment>
!!! Some fetch errors were encountered.  Please see above for details.

<comment>( !!! Ошибка при извлечении sys-libs/ncurses-5.4-r5, продолжение...
  (...)
!!! При извлечении произошли ошибки.  Подробности выше. )</comment>
</pre>

<p>
Portage не смогла загрузить исходный код данного приложения и попытается
продолжить установку других приложений (если запланирована). Эта ошибка может
произойти из-за неправильно синхронизированного зеркала, или из-за того, что 
ebuild указывает на неверное место. Сервер, где находятся исходные коды, 
также может почему-либо не работать.
</p>

<p>
Повторите действие через час, чтобы посмотреть, повторится ли эта ошибка.
</p>

</body>
</subsection>
<subsection id="profileprotect">
<title>Защита системного профиля</title>
<body>

<pre caption="Предупреждение Portage о пакете, защищенном профилем">
!!! Trying to unmerge package(s) in system profile. 'sys-apps/portage'
!!! This could be damaging to your system.

<comment>( !!! Попытка удаления пакетов из системного профиля. 'sys-apps/portage'
  !!! Это может повредить вашей системе. )</comment>
</pre>

<p>
Вы попросили удалить пакет, входящий в состав базовых пакетов вашей
системы. Он отмечен в вашем профиле как обязательный, и его не следует
удалять из системы.
</p>

</body>
</subsection>

<subsection id="digesterror">
<title>Ошибки проверки дайджеста</title>
<body>

<p>
Иногда, когда вы пытаетесь установить пакет, этого не происходит, и появляется ошибка:
</p>

<pre caption="Ошибка проверки дайджеста">
&gt;&gt;&gt; checking ebuild checksums

!!! Digest verification failed:
</pre>

<p>
Это является знаком, что с деревом Portage что-то не так — часто это потому, 
что разработчик допустил ошибку при коммите пакета в дерево.
</p>

<p>
Когда проверка дайджеста не проходит, <e>не</e> пробуйте обновить дайджест пакета 
сами. Запуск <c>ebuild foo manifest</c> не починит проблему, а почти наверняка 
сделает еще хуже!
</p>

<p>
Вместо этого, подождите час или два, чтобы дерево обновилось. Скорее всего, 
ошибку уже заметили, но может понадобиться некоторое время, чтобы починить 
дерево Portage. Пока вы ждете, проверьте <uri link="http://bugs.gentoo.org">багтрекер</uri>, 
и посмотрите, не написал ли кто-нибудь про этот баг. Если нет, не стесняйтесь, и 
откройте новый баг для сломанного пакета.
</p>

<p>
Как только вы увидите, что баг починили, вы можете ресинхронизировать дерево, 
чтобы у вас появился починенный дайждест.
</p>

<impo>
Это <e>не</e> означает, что вы можете ресинхронизировать ваше дерево несколько раз! 
Как сказано в политике rsync (когда вы запускаете <c>emerge --sync</c>), пользователи, 
которые запускают синхронизацию слишком часто будут забанены! Вообще, лучше 
просто подождать до следующей синхронизации по расписанию, так что вы не перегрузите 
серверы rsync.
</impo>
</body>
</subsection>
</section>
</sections>

<!-- *$Localization:
target-language: Russian
target-date: 2013-08-01
source-cvs-revision: 1.83
translated-by: Igor Naum <naumi@vesti-rtr.com>
edited-by: Azamat H. Hackimov <azazello1984@mail.ru>; Alexey Chumakov
edited-by: Vladimir Romanov <blueboar2@gmail.com>
-->