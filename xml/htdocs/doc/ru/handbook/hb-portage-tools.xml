<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/handbook/hb-portage-tools.xml,v 1.5 2006/03/23 20:05:21 achumakov Exp $ -->

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<!-- Текст этого документа распространяется на условиях лицензии CC-BY-SA -->
<!-- См. http://creativecommons.org/licenses/by-sa/2.5 -->

<sections>

<version>1.4</version>
<date>2005-07-28</date>

<section>
<title>etc-update</title>
<body>

<p>
<c>etc-update</c> &mdash; это утилита, предназначенная для обновления в системе
файлов <path>._cfg0000_&lt;имя&gt;</path>. Она обеспечивает интерактивную
настройку установки и может также автоматически устанавливать тривиальные 
изменения. Файлы создаются <path>._cfg0000_&lt;имя&gt;</path> Portage, когда 
нужно заменить файл в каталоге, защищенном переменной CONFIG_PROTECT.
</p>

<p>
Выполнить <c>etc-update</c> довольно просто:
</p>

<pre caption="Запуск etc-update">
# <i>etc-update</i>
</pre>

<p>
После выполнения тривиальных обновлений, вы увидите запрос со списком 
защищенных файлов, ожидающих обновления. Внизу вам предложат следующие 
варианты:
</p>

<pre caption="Запрос etc-update">
Please select a file to edit by entering the corresponding number.
              (-1 to exit) (-3 to auto merge all remaining files)
                           (-5 to auto-merge AND not use 'mv -i'):

<comment>(Пожалуйста, выберите файл для правки, введя соответствующее число.
         (-1 - выход) (-3 - автоустановка всех оставшихся файлов)
                 (-5 для автоустановки БЕЗ использования 'mv -i'): )</comment>
</pre>

<p>
При вводе <c>-1</c>, <c>etc-update</c> выходит, прекращая последующие 
изменения. Если вы введете <c>-3</c> или <c>-5</c>, <e>все</e> перечисленные 
файлы конфигурации заменяются более новыми версиями. Следовательно, 
очень важно сначало отобрать файлы, которые не следует автоматически 
обновлять. Для этого надо только вводить номер, указанный слева от файлов.
</p>

<p>
Например, выбираем файл конфигурации <path>/etc/pear.conf</path>:
</p>

<pre caption="Обновление конкретного конфигурационного файла">
Beginning of differences between /etc/pear.conf and /etc/._cfg0000_pear.conf
<comment>[...]</comment>
End of differences between /etc/pear.conf and /etc/._cfg0000_pear.conf
1) Replace original with update 
2) Delete update, keeping original as is 
3) Interactively merge original with update 
4) Show differences again 
</pre>

<p>
Теперь можно увидеть различия между двумя файлами. Если вы считаете, что 
обновленный файл конфигурации можно использовать без проблем, введите 
<c>1</c>. Если вы считаете, что обновленный файл конфигурации не нужен, или не 
содержит новую или полезную информацию, введите <c>2</c>. Если вы хотите 
обновить текущий файл в интерактивном режиме, введите <c>3</c>.
</p>

<p>
Нет никакого смысла в подробном описании интерактивного обновления. Для полноты 
изложения, мы перечислим возможные команды, которые можно использовать при
интерактивном слиянии двух файлов. Вас встречают две строки (одна исходная,
вторая измененная) и запрос, в ответ на который можно ввести одну из следующих 
команд:
</p>

<pre caption="Команды, доступные при интерактивном слиянии">
ed:     редактировать и использовать оба варианта, каждый пометить заголовком
eb:     редактировать и использовать оба варианта
el:     редактировать и использовать левый вариант
er:     редактировать и использовать правый вариант
e:      редактировать новую версию
l:      использовать левую версию
r:      использовать правую версию
s:      молча включить общие строки
v:      включить общие строки, сообщив подробности
q:      выход
</pre>

<p>
Завершив обновление важных файлов конфигурации, вы можете автоматически 
обновить оставшиеся файлы конфигурации. <c>etc-update</c> выйдет, если не 
найдет других файлов, подлежащих обновлению.
</p>

</body>
</section>
<section>
<title>dispatch-conf</title>
<body>

<p>
С помощью <c>dispatch-conf</c> можно обновлять файлы конфигурации, сохраняя
при этом историю изменений. <c>dispatch-conf</c> хранит различия между файлами 
конфигурации в виде заплаток или в системе управления версиями RCS.
</p>

<p>
Как и с <c>etc-update</c>, вы можете попросить сохранить файл конфигурации как 
есть, использовать новый файл конфигурации, редактировать текущий или 
объединить изменения интерактивно. Однако, у <c>dispatch-conf</c> также есть 
приятные дополнительные возможности:
</p>

<ul>
  <li>
    автоматическое обновление файлов, в которых обновились только комментарии
  </li>
  <li>
    автоматическое обновление файлов, которые отличаются только количеством
    пробелов
  </li>
</ul>

<p>
Убедитесь, что вы сначала отредактировали <path>/etc/dispatch-conf.conf</path> 
и создали каталог, прописанный в archive-dir.
</p>

<p>
За дополнительными сведениями обращайтесь к странице справки 
<c>dispatch-conf</c>:
</p>

<pre caption="Чтение справки по dispatch-conf">
$ <i>man dispatch-conf</i>
</pre>

</body>
</section>
<section>
<title>quickpkg</title>
<body>

<p>
С <c>quickpkg</c> вы можете создавать архивы пакетов, уже установленных в 
системе. Эти архивы можно использовать в качестве двоичных пакетов. Запуск
<c>quickpkg</c> прост: только укажите имена пакетов, которые нужно 
заархивировать.
</p>

<p>
Например, чтобы поместить в архив <c>curl</c>, <c>arts</c> и <c>procps</c>:
</p>

<pre caption="Пример использования quickpkg">
# <i>quickpkg curl arts procps</i>
</pre>

<p>
Двоичные пакеты будут храниться в <path>$PKGDIR/All</path> (по умолчанию 
&mdash; <path>/usr/portage/packages/All</path>). Символьные ссылки, указывающие 
на эти пакеты, помещаются в <path>$PKGDIR/&lt;категория&gt;</path>.
</p>

</body>
</section>
</sections>

<!-- *$Localization:
target-language: Russian
target-version: 1.4-r3
target-date: 2006-03-22
source-cvs-revision: 1.8
translated-by: Analyzer
edited-by: Alexey Chumakov <achumakov@gentoo.org>
-->
