<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- Текст этого документа распространяется на условиях лицензии CC-BY-SA -->
<!-- См. http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/handbook/hb-portage-branches.xml,v 1.9 2014/08/30 16:29:15 blueboar Exp $ -->

<sections>

<abstract>
Программное обеспечение в составе Gentoo подразделяется на ветви в зависимости 
от стабильности и поддержки различных архитектур. В этой главе рассказывается, 
как настраивать использование ветвей, а также как при необходимости преодолевать 
такое разделение. 
</abstract>

<version>3</version>
<date>2014-08-17</date>

<section>
<title>Использование одной ветви</title>
<subsection>
<title>Стабильная ветвь</title>
<body>

<p>
Переменная ACCEPT_KEYWORDS определяет, какую из ветвей использовать в вашей
системе. По умолчанию используется стабильная ветвь для вашей архитектуры,
например <c>x86</c>
</p>

<p>
Мы рекомендуем использовать только стабильную ветвь. Однако, если для вас
стабильность не критична и вы хотите помочь Gentoo, отсылая отчеты об ошибках
на <uri>https://bugs.gentoo.org</uri>, читайте дальше.
</p>

</body>
</subsection>
<subsection>
<title>Тестовая ветвь</title>
<body>

<p>
Если вы желаете использовать наиболее свежее ПО, подумайте над использованием 
тестовой ветви. Чтобы Portage начал использовать тестовую ветвь, добавьте 
&laquo;~&raquo; перед названием вашей архитектуры.
</p>

<p>
Тестовая ветвь полностью соответствует своему названию: <e>для 
тестирования</e>. Если пакет находится в стадии тестирования, это означает, что 
разработчики считают, что пакет работоспособен, но тщательно он не 
протестирован. Вы можете оказаться первым, кто столкнется с какой-либо ошибкой. 
В этом случае вы можете создать <uri link="https://bugs.gentoo.org">отчет об
ошибке</uri>, чтобы разработчики узнали о ней.
</p>

<p>
Однако будьте готовы к тому, что могут возникнуть проблемы со стабильностью,
неудовлетворительной поддержкой пакетов (например неправильные/отсутствующие
зависимости), слишком частыми обновлениями (а в результате &mdash; частыми 
сборками) или невозможностью собрать пакет. Если вы не знаете, как работает 
Gentoo и как разрешать возникающие проблемы, мы рекомендуем не отходить от 
стабильной и оттестированной ветви.
</p>

<p>
К примеру, для выбора тестовой ветви на архитектуре x86, отредактируйте 
<path>/etc/portage/make.conf</path> и укажите в нем:
</p>

<pre caption="Установка значения переменной ACCEPT_KEYWORDS">
ACCEPT_KEYWORDS="~x86"
</pre>

<p>
Если вы запустите обновление системы, то увидите, что <e>многие</e> пакеты 
нуждаются в обновлении. Обратите внимание, что после перехода на тестовую ветвь 
и обновления системы, как правило, нет простого пути назад к стабильной 
официальной ветви (конечно, кроме использования резервной копии).
</p>

</body>
</subsection>
</section>
<section>
<title>Одновременное использование стабильной и тестовой ветвей</title>
<subsection>
<title>Местоположение package.accept_keywords</title>
<body>

<p>
Вы можете указать, чтобы Portage использовал тестовую ветвь только для 
определенных пакетов, а для остальной системы &mdash; стабильную ветвь. Для 
этого добавьте категорию и имя пакета, для которого вы желаете использовать 
тестовую ветвь, в файл <path>/etc/portage/package.accept_keywords</path>.
Вместо этого можно создать каталог (с таким же именем) и указывать пакеты в
файлах, находящихся внутри этого каталога. Например, для использования
тестовой ветви для <c>gnumeric</c>:
</p>

<pre caption="Настройка /etc/portage/package.accept_keywords для gnumeric">
app-office/gnumeric
</pre>

</body>
</subsection>
<subsection id="versions">
<title>Тестирование определенных версий</title>
<body>

<p>
Если вы желаете использовать конкретную версию ПО из тестовой ветви, но не 
хотите, чтобы Portage использовал тестовую ветвь для последующих версий этого 
ПО, можно указать в местоположении <path>package.accept_keywords</path> номер
необходимой версии. В этом случае вы <e>обязаны</e> использовать оператор =.
Также можно указать диапазон версий, используя операторы &lt;=, &lt;, &gt;
или &gt;=.
</p>

<p>
В любом случае, добавляя информацию о версии, вы <e>должны</e> использовать 
один из этих операторов. Если вы не указываете версию, эти операторы 
использовать <e>нельзя</e>.
</p>

<p>
В следующем примере мы просим Portage разрешить установку gnumeric-1.2.13:
</p>

<pre caption="Использование конкретной тестовой версии gnumeric">
=app-office/gnumeric-1.2.13
</pre>

</body>
</subsection>
</section>
<section>
<title>Использование заблокированных пакетов</title>
<subsection>
<title>Расположение package.unmask</title>
<body>

<impo>
Разработчики Gentoo <b>не</b> поддерживают использование этого места
расположения. Пожалуйста, используйте их на свой страх и риск. Просьбы о
помощи, связанные с использованием <c>package.unmask</c> и/или
<c>package.mask</c>, останутся без ответа. Вы предупреждены.
</impo>

<p>
Если использование пакета было заблокировано разработчиками Gentoo, но вы 
желаете его использовать несмотря на причины блокировки, указанные в файле 
<path>package.mask</path> (по умолчанию он находится в 
<path>/usr/portage/profiles</path>), добавьте желаемую версию (обычно вы
получите точно такую же строку, как в <path>profiles</path>) в файл 
<path>/etc/portage/package.unmask</path> (или в файл в этом каталоге, если 
это каталог).
</p>

<p>
Например, если <c>=net-mail/hotwayd-0.8</c> заблокирован, то разблокировать его 
можно, прописав в <path>package.unmask</path> точно такую же строчку:
</p>

<pre caption="/etc/portage/package.unmask">
=net-mail/hotwayd-0.8
</pre>

<note>
Если запись в <path>/usr/portage/profiles/portage.mask</path> содержит
диапазон версий пакета, вам следует разблокировать только те версии,
которые вам на самом деле необходимы. Прочитайте 
<uri link="#versions">предыдущий раздел</uri>, чтобы узнать, как
определять версии в <path>package.unmask</path>.
</note>

</body>
</subsection>
<subsection>
<title>Местоположение package.mask</title>
<body>

<p>
Если вы не хотите, чтобы Portage использовала какое-то конкретное ПО или 
конкретные версии ПО, вы можете его самостоятельно заблокировать, добавив 
соответствующую запись в <path>/etc/portage/package.mask</path> (в такой
файл либо в файл внутри такого каталога).
</p>

<p>
Если, к примеру, вы не хотите, чтобы Portage устанавливала исходные коды ядра
новее, чем <c>gentoo-sources-2.6.8.1</c>, добавьте такую строку в
местоположение <path>package.mask</path>:
</p>

<pre caption="Пример использования файла /etc/portage/package.mask">
&gt;sys-kernel/gentoo-sources-2.6.8.1
</pre>

</body>
</subsection>
</section>
</sections>

<!-- *$Localization:
target-language: Russian
target-date: 2014-08-17
source-cvs-revision: 1.20
translated-by: Vasiliy Golubev [vas@nightmail.ru]
edited-by: Alexey Chumakov [achumakov@gentoo.org]
edited-by: Vladimir Romanov [blueboar2@gmail.com]
-->
