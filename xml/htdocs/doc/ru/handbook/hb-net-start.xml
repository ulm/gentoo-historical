<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/handbook/hb-net-start.xml,v 1.2 2005/11/16 07:28:00 achumakov Exp $ -->

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<sections>

<version>1.2</version>
<date>2005-07-14</date>

<section>
<title>Приступаем</title>
<body>

<note>
Предполагается что вы правильно сконфигурировали ваше ядро, те у вас готовы 
модули для вашего оборудования и известно имя интерфейса. Мы так же 
предполагаем, что оно сконфигурировано как eth0, но может быть и eth1, wlan0 и 
т.д. 
</note>

<note>
Требуется чтобы вы запускали все с baselayout-1.11.11 или более старшей.
</note>

<p>
Что бы приступить к конфигурированию вашей сетевой карты, вы должны сказать об 
этом системе Gentoo RC. Это делается с помощью создания символической ссылки 
(symbolic link) с <c>net.lo</c> на <c>net.eth0</c> в <path>/etc/init.d</path>
</p>

<pre caption="Создание символической ссылки с net.lo на net.eth0">
# <i>cd /etc/init.d</i>
# <i>ln -s net.lo net.eth0</i>
</pre>

<p>
Система Gentoo RC теперь знает об этом интерфейсе. Это нужно, чтобы знать как 
конфигурировать новый интерфейс. Все сетевые интерфейсы сконфигурированы в 
<path>/etc/conf.d/net</path>. Вот простая конфигурация DHCP и статическии адреса.
</p>

<pre caption="Пример для /etc/conf.d/net">
<comment># Для DHCP</comment>
config_eth0=( "dhcp" )

<comment># Для статического IP используем CIDR запись</comment>
config_eth0=( "192.168.0.7/24" )
routes_eth0=( "default via 192.168.0.1" )

<comment># Для статического IP используем запись сетевой маски</comment>
config_eth0=( "192.168.0.7 netmask 255.255.255.0" )
routes_eth0=( "default gw 192.168.0.1" )
</pre>

<note>
Если вы не отметите конфигурацию для вашего интерфейса, тогда предрологается 
DHCP. 
</note>

<note>
CIDR расшифровывается как Classless InterDomain Routing. Первоначально, IPv4 
адресация была классифицирована как A, B или C. Разработчики ранней системы 
классификации не могли представить такую массовую популярность Internet и 
потребность новых уникальных адресов. CIDR - это схема адресации, которая 
позволяет одним IP адресом определять множество IP адресов. IP адрес CIDR 
смотрится как нормальный IP адрес, за исключением того что он заканяивается 
слэшем, за которым следует номер; например, 192.168.0.0/16. CIDR описана в <uri 
link="http://rfc.net/rfc1519.html">RFC 1519</uri>.
</note>

<p>
Теперь у нас есть сконфигурированый интерфейс, мы можем запустить и остановить 
его с помощью следующей команды:
</p>

<pre caption="Запуск и остановка сетевых скриптов">
# <i>/etc/init.d/net.eth0 start</i>
# <i>/etc/init.d/net.eth0 stop</i>
</pre>

<impo>
Когда ищутся неисправности сети, рекомендуется установить <c>RC_VERBOSE="yes"</c> 
в <path>/etc/conf.d/rc</path>, так вы получите больше информации о том, что 
происходит.
</impo>

<p>
Теперь то у вас есть успешно запущеный и остановленый сетевой интерфейс, вам 
может потребоваться, чтобы он запускался при каждой загрузки Gentoo. Here's how 
to do this. Последняя "rc" команда заставляет Gentoo запускать любые скрипты в 
текущем runlevel'е, которые еще не были запущены.
</p>

<pre caption="Конфигурация сетевого интерфейса для запуска во время загрузки">
# <i>rc-update add net.eth0 default</i>
# <i>rc</i>
</pre>

</body>
</section>
</sections>

<!-- *$Localization:
target-language: Russian
target-version: 1.1-r1
target-date: 2005-06-20
source-cvs-revision: 1.3
translated-by: Analyzer <subscribe2k@yandex.ru>
edited-by: none
-->
