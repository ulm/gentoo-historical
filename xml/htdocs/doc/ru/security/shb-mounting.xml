<?xml version='1.0' encoding='UTF-8'?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/en/security/shb-mounting.xml,v 1.3 2006/09/18 09:22:48 neysx Exp $ -->
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- Текст этого документа распространяется на условиях лицензии CC-BY-SA -->
<!-- См. http://creativecommons.org/licenses/by-sa/2.5 -->
<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<sections>

<version>1.0</version>
<date>2005-05-31</date>

<section>
<title>Монтирование разделов</title>
<body>

<p>
При монтировании разделов с ФС <c>ext2</c>, <c>ext3</c> или <c>reiserfs</c>
можно указать различные параметры в файле <path>/etc/fstab</path>. Среди
них:
</p>

<ul>
  <li>
    <c>nosuid</c> &mdash; игнорировать установленный для файла бит SUID
  </li>
  <li>
    <c>noexec</c> &mdash; не разрешать запуск файлов для данного раздела
  </li>
  <li>
    <c>nodev</c> &mdash; игнорировать файлы устройств
  </li>
</ul>

<p>
К сожалению, эти настройки можно легко обойти, задействовав непрямые пути. Тем
не менее с установкой параметра запрещения запуска для <path>/tmp</path> можно
остановить использование большинства эксплоитов, запускаемых напрямую из
каталога <path>/tmp</path>.
</p>

<pre caption="/etc/fstab">
/dev/sda1 /boot ext2 noauto,noatime 1 1
/dev/sda2 none swap sw 0 0
/dev/sda3 / reiserfs notail,noatime 0 0
/dev/sda4 /tmp reiserfs notail,noatime,nodev,nosuid,noexec 0 0
/dev/sda5 /var reiserfs notail,noatime,nodev 0 0
/dev/sda6 /home reiserfs notail,noatime,nodev,nosuid 0 0
/dev/sda7 /usr reiserfs notail,noatime,nodev,ro 0 0
/dev/cdroms/cdrom0 /mnt/cdrom iso9660 noauto,ro 0 0
proc /proc proc defaults 0 0
</pre>

<warn>
Установка <path>/tmp</path> в режим <c>noexec</c> может предотвратить
нормальную работу различных сценариев.
</warn>

<note>
Для информации о дисковых квотах обратитесь к разделу
<uri link="?part=1&amp;chap=5#quotas">Квоты</uri>.
</note>

<note>
Я не устанавливаю для <path>/var</path> параметры <c>noexec</c> или
<c>nosuid</c>, даже если обычно файлы никогда не запускаются из этого каталога,
так как qmail установлен в <path>/var/qmail</path> и должен запускаться с битом
SUID. Я устанавливаю для <path>/usr</path> в режим только для чтения, так как я
никогда ничего не записываю туда, кроме случая обновления Gentoo. Для этого я
перемонтирую файловую систему в режим чтения и записи, обновляю систему и
монтирую снова режим только для чтения.
</note>

<note>
Даже если вы не используете qmail, Gentoo все же нужен установленный бит
запуска для <path>/var/tmp</path>, так как инструкции из ebuild выполняются
именно здесь. Но можно указать альтернативный путь, если вы хотите монтировать
каталог <path>/var</path> с параметром <c>noexec</c>.
</note>

</body>
</section>
</sections>
