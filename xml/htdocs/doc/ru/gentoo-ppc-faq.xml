<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/en/gentoo-ppc-faq.xml">
<title>Часто задаваемые Вопросы о Gentoo Linux/PowerPC</title>
<author title="Редактор"><mail link="rajiv@gentoo.org">Rajiv Manglani</mail></author>
<author title="Переводчик"><mail link="svyatogor@gentoo.org">Сергей Кулешов</mail></author>
<abstract>Это ЧАВО является сборником вопросов и ответов на базе списка рассылки gentoo-ppc-dev и каналов IRC, если у вас есть какие-нибудь вопросы, или ответы для этого документа, пожалуйста свяжитесь с автором или членом команды разработчиков документации.</abstract>

<version>1.4</version>
<date>03 Февраля 2002</date>

<chapter> 
<title> Вступление </title>
<section> <title> От перевочика </title>
<body>
В связи с тем, что компьютеры Macintosh мало распространены в России, немногие хорошо знают осбенности настройки Linux на этой платформе. Поэтому при переводе могли быть допущены некоторые технические неточности. Если Вы их обнаружите, пожалуйста или напишите переводчику, или отправьте соответсвующий отчет об ошибке, воспользовавшись формой по адресу <uri>http://bugs.gentoo.org</uri>
</body>
</section>
</chapter>

<chapter>
	<title>Установка</title>

	<section>
		<title>Могу ли я установить выбор загрузки: Gentoo Linux или Mac OS X?</title>
	<body><p>Да, можете! В действительности yabootconfig автоматически обнаружит и 
	установит <path>/etc/yaboot.conf</path> с Linux'ом, Mac OS X и даже Mac ОС классическим
	(сморите <uri link="/doc/en/gentoo-ppc-install.xml">Гид по установке Gentoo PPC</uri> 
	для более подробной информации он yabootconfig). Весь секрет заключается в том, как вы
	разобьете жесткий диск. Перед установкой Gentoo запустите компьютер с установочного CD
	Mac OS X. Используя <c>Disk Utility</c> разбейте ваш диск. Сначала должен идти один 
	раздел, достаточный по размеру для всех ваших Linux разделов (root+swap+/home и т.д.).
	Формат этого раздела не имеет значения. Затем должен идти раздел для OS X. Третьим, по
	желанию, вы можете создать раздел для Mac OS classic. Он необходим только в том 
	случае, если вы хотите разместить Mac OS 9 на отдельном разделе. Обратите внимание, 
	что если вы хотите обеспечить тройную  зaгрузку, то Mac OS 9 должен быть на разделе, 
	отдельном от Mac OS X.</p>
	<p>После разбиения установите Mac OS X и Mac OS 9 на соответствующие разделы. После завершения установки откройте
<uri link="/doc/en/gentoo-ppc-install.xml">Гид по установке Gentoo Linux PPC</uri>.
Когда дойдете до раздела о разбиении диска, воспользуйтесь <c>mac-fdisk</c>, чтобы
<e>удалить</e> большой раздел, который вы создали для Gento. На его месте создайте разделы bootstrap, root, swap и любые другие разделы, которые вы хотите использовать в  Gentoo.</p>
<p>Если у вас Macintosh Старого Света (OldWorld - до iMac), следуйте тем же указаниям, но используйте загрузочный диск Mac OS 9 и утилиту <c>Drive Setup</c>. Этим машинам не нужен раздел bootstrap.</p>
</body>
</section>

	<section>
		<title>У меня OldWorld Macintosh и я хочу использовать BootX, но я не могу
		открыть установку BootX на установочном диске PPC. Что мне делать?</title>
		<body><p>Вам нужна новая версия StuffIt Expander, чтобы открыть этот файл. Вы можете <uri link="http://www.stuffit.com/expander/download.html">загрузить его</uri> бесплатно.</p></body>
	</section>

	<section>
		<title>Можно ли загрузить Gentoo Linux на OldWorld машине без MacOS? Я бы хотел иметь машину без MacOS.</title>
		<body><p>Если у вас есть много времени для экспериментов, можете попробовать <uri link="http://penguinppc.org/projects/quik/">Quik</uri>. Quick - это загрузчик для OldWold PPC машин. Если на вашем компьютере используется BootX, то вы сможете воспользоваться Quick, если yaboot - то нет. Quick очень тяжело установить и на данный момент он <em>не работает</em> с gcc 3.x (нужно понимать как Gentoo 1.4 и новее), но конечный результат будет TODO: is somewhere between "neato" and "breathtaking" because MacOS does not have to load. Think yaboot on speed.</p>
			<p>Пожалуйста прочитайте <uri link="http://penguinppc.org/projects/quik/quirks.shtml">Quik quirks страницу</uri>. Также посмотрите "<uri link="http://lppcfom.sourceforge.net/fom-serve/cache/574.html">Is Quik Bootloader for Mac OS Dead?</uri>" и "<uri link="http://www.imaclinux.net/php/imaclinux_g_h.php3?single=17+index=0">Guide: Quik - Direct Booting for Older PowerMacs</uri>". "<uri link="http://www.netbsd.org/Ports/macppc/models.html">NetBSD/macppc Model Support</uri>"
документирует OpenFirware версии для разных Apple'й и колонов PowerPC.</p>
			<p>Спасибо vladimir'у за эту информацию.</p>
		</body>
	</section>

	<section>
		<title>У меня компьютер Beige G3. Могу я установить Gentoo Linux/PPC на втором IDE жестком диске?</title>
		<body><p>Ранние машины Beige G3 (с материнскими платами "Rev 1" и чипами ATI RageII+) не поддерживают slave IDE диски. Чтобы использовать второй хард диск, подключите его к внутреннему или внешнему SCSI порту и используйте PCI IDE плату. Более поздние машины G3 не имеют этих ограничений. За более подробной информацией обращайтесь к  <uri>http://www.xlr8yourmac.com/G3-ZONE/IDE/index.html</uri>.</p></body>
	</section>

	<section>
		<title>Когда я пытаюсь установить Gentoo на PowerBook или iBook система не видит внутренних жестких дисков. Что мне делать?</title>
		<body><p>На PowerBook'ах передайте <e>hda=1,1,1</e> ядру во время загрузки. Это должно решить проблему. Вы можете это сделать, набрав в командной строке yaboot <c>boot hda=1,1,1</c>. Некоторые iBook'и требуют <c>hda=16383,16,64</c>.</p></body>
	</section>

	<section>
		<title>У меня в <path>/etc/fstab</path> есть строка <path>/dev/BOOT</path>. Должен ли я ее установить на мой boostrap раздел?</title>
		<body><p>Нет. Если вы не используете отдельный загрузочный раздел (<path>/boot</path>), то вам эта строка совершенно не нужна и можете ее спокойно удалить. Раздел boostrap - это <e>не</e> <path>/boot</path> и никак с ним не связан. В общем, машинам PowerPC не нужен отдельный раздел <path>/boot</path>, и bootstrap раздел не должен быть примонтирован.  </p></body>
	</section>

	<section>
		<title>Установка завершена, но после перезагрузки, при нажатии на клавиши, на экране появляются не те символы. Что мне делать?</title>
		<body><p>Если это происходит с английской раскладкой, то это, скорее всего, проблема ядра. Вам придется его пересобрать со следующими опциями:
<pre><codenote>В "Input core support" (это установки по умолчанию, но все же проверьте их)</codenote>
   &lt;*&gt; Input core support
   &lt;*&gt;   Keyboard support
   &lt;*&gt;   Mouse support
   (1024)   Horizontal screen resolution
   (768)    Vertical screen resolution
   &lt; &gt;   Joystick support
   &lt;*&gt;   Event interface support
</pre><pre>
<codenote>В "Macintosh Device Drivers"</codenote>
   [*] Apple Desktop Bus (ADB) support
   [ ]    Include MacIO (CHRP) ADB driver   <codenote>не имеет значения</codenote>
   [*]    Use input layer for ADB devices
   [ ]      Support for ADB raw keycodes    <codenote>ВЫКЛЮЧИТЕ это</codenote>
   [*]      Support for mouse button 2+3 emulation
</pre>
Таким образом вы сможете использовать <path>/proc/sys/dev/mac_hid</path> для эмуляции кнопок 2 и 3 (смотрите раздел 18 Gentoo PPC Install Guide).</p>
		<p>Если по какой-то причине вы не хотите пересобирать ядро, добавьте <c>keyboard_sends_linux_keycodes=1</c> к параметрам ядра в <path>yaboot.conf</path>. Это также решит проблему, но, возможно, вызовет другие неприятности.</p>
		<p>Благодарим Joe McMahon за помощь при составлении этого ответа.</p></body>
	</section>

	<section>
		<title>Установка завершена, но после того, как я загружаю Gentoo и пытаюсь выполнить emerge что-то, я получаю ошибки, что невозможно выполнить 'stat' какой-нибудь файл.
		В чем дело?</title>
		<body><p>Проверьте, правильно ли установлено время. Установка времени и создание ссылки <path>/etc/localtime</path> на вашу временную зону (в <path>/usr/share/zoneinfo</path>) должны решить проблему. Также стоит проверить, что у вас <e>не включена</e> опция <e>Enhanced RTC</e> в разделе <e>Character devices</e> конфигурации ядра, как и указано в гиде по установке.</p></body>
	</section>
</chapter>


<chapter>
	<title>Поддержка лэптопов</title>

	<section>
		<title>Как мне включить полную скорость процессора на PowerBook'е, когда я работаю в Linux?</title>
		<body><p>Некоторые процессоры в PowerBook включаются с меньшей скоростью, чем та, на которую они рассчитаны. Работа на меньшей скорости позволяет продлить срок жизни батарей за счет скорости работы. Операционная система должна проинструктировать оборудование о том, что надо работать на полной скорости. В Mac OS X это называется "Reduced processor performance" или "CPU Scaling" в Linux. Чтобы проверить текущую скорость работы процессора в Linux наберите <c>cat /proc/cpuinfo</c>. В Mac OS X вы сначала должны выключить "Reduce processor performance" на вкладке "Options" Energy Saver настроек в системной панеле. Затем запустите Apple System Profiler (в Applications:Utilities).</p>
			<warn>
		Не изпользуйте этот метод, чтобы перегрузить машину.
		(TODO:	Do not use this method to overclock your machine.?) Результаты будут непредсказуемы если вы используете неправильные значения. Мы не несем ответственности если вы "поджарите" свою машину.</warn>
			<p>Если Apple System Profiler сообщает о более высокой скорости чем та, которую вы получаете в Linux, можете включить полную скорость простой командой. Первым делом проверьте, что у вас ядро 2.4.20-pre9-ben0 или выше. В ядрах более ранних версий нет кода необходимого для изменения скорости процессора. Затем, соберите ядро с <e>выключенной</e> опцией <c>CPU Frequency scaling</c>. И наконец запустите команду, как показано в примере ниже.
<pre>
<codenote>Это только примеры. Используйте значения соответствующие вашему компьютеру.</codenote>

echo "0:667000:1000000:performance" > /proc/cpufreq    <codenote>Для 1ghz PowerBook G4</codenote>
echo "0:667000:800000:performance" > /proc/cpufreq     <codenote>Для 800mhz PowerBook G4</codenote>
</pre>
		Многие пользователи захотят добавить эту команду в конец <path>/etc/conf.d/local.start</path>. Этот файл включается каждый раз, когда вы запускаете компьютер.
		</p></body>
	</section>

	<section>
		<title>Я запускаю Gentoo на лэптопе PowerPC. Какие пакеты я должен установить, чтобы обеспечить возможности специфичные для моего лэптопа.</title>
		<body><p>Вам надо будет установить четыре основных пакета.</p>
			<p><ul>
				<li><e>pmud</e> демон управления питанием вашего оборудования (похожий на apmd на x86). Обратите внимание, что pmud может потребоваться работающее звуковое устройство (<path>/dev/mixer</path>).</li>
				<li><e>pbbuttonsd</e> позволяет использовать различные кнопки лэптопа: управление громкостью, яркостью и т.д.</li>
				<li><e>gtkpbbuttons</e> - gtk интерфейс для pbbuttonsd (визуальные эффекты в Иксах при нажатии кнопок).  <e>gtkpbbuttons</e> требует gtk и для наилучшего результата в должны добавит его в файл X сессии (<path>~/.Xsession</path>, чтобы он запускался вместе с Иксами.</li>
				<li><e>powerprefs</e> работает вместе с pbbuttonsd и дает возможность изменять разные настройки, например опции TODO: trackpad и другие.</li>
			</ul></p>
			<p>Эти пакеты могут быть установлены запуском соответствующих команд из этого списка:
<pre>
# <c>emerge pmud; rc-update add pmud default</c>
# <c>emerge pbbuttonsd; rc-update add pbbuttonsd default</c>
# <c>emerge gtkpbbuttons</c>
# <c>emerge powerprefs</c>
</pre>
			</p></body>
	</section>

	<section>
		<title>Как мне сконфигурировать Airport или другую Wi-Fi карту?</title>
		<body><p> Сначала проверьте есть ли поддержка этой карты в ядре, а если она собрана как модуль - загружен ли он. Затем запустите: <c>emerge wireless-tools; iwconfig</c>.</p></body>
	</section>
</chapter>


<chapter>
	<title>Приложения</title>

	<section>
		<title>Есть ли простой способ сконфигурировать Иксы?</title>
		<body><p>Благодаря Gerk, вы можете сделать: <c>emerge xeasyconf; Xeasyconf</c>.</p></body>
	</section>

	<section>
		<title>Я недавно установил XFree, но, когда я им пользуюсь, международная раскладка клавиатуры работает неправильно. Основные кнопки работают нормально, но я не могу набрать специальные символы, такие как знак "at" (собака). В выводе startx содержится что-то типа: "could not load keymap, falling back to default keymap". В чем дело?</title>
		<body><p>Проверьте, что разрешения на <path>/var/tmp</path> установлены как <path>drwxrwxrwx</path>. Если это не так, измените их, выполнив <c>chmod a+rwx /var/tmp</c>. Это позволит XFree правильно загрузить раскладку.</p></body>
	</section>

	<section>
		<title>При использовании OpenGL DRI в XFree или проигрывании фильмов, система иногда неожиданно зависает намертво. Что можно сделать?</title>
		<body><p>Возможно ваша система не справляется с поддержкой AGP. Новые ядра (2.4.20 и выше) и XFree 4.3 и выше Должны решить эту проблему. До тех пор самым простым решением является добавить следующую строку в раздел "Device" файла <path>/etc/X11/XF86Config-4</path>:
<pre>
Option       "ForcePCIMode"
</pre></p></body>
	</section>
	<section>
		<title>Как заставить звук работать правильно?</title>
		<body><p>Необходимо сделать две вещи. Первое, проверьте установлены правильные опции ядра. В menuconfig должно быть:
<pre>
&lt;*&gt; Sound card support
&lt;*&gt;   PowerMac DMA sound support
</pre>
			(или выбрано как модули и загружено). Второе, пользователи, которым нужен доступ к звуковому устройству, должны быть добавлены в соответствующую группу командой <c>chmod -g audio [username]</c>. Если модуль dmasound_pmac module не загружен, вам возможно нужно нужно включить поддержку i2c-core или я ядре, или в виде модуля.</p></body>
	</section>

	<section>
		<title>Как проигрывать аудио диски?</title>
		<body><p>Машины NewWold не имеют аудио связи между CD-ROM и звуковым устройством. Следовательно, аудио информация должна быть считана в виде данных и переправлена звуковому устройству. Вы можете использовать xmms с плагином cdread. Во-первых, вы должны пересобрать ядро со следующими опциями:
<pre>
<codenote>В "ATA/IDE/MFM/RLL Support"</codenote>
<codenote>В "IDE, ATA, and ATAPI Block Devices"</codenote>
   &lt; &gt; Include IDE/ATAPI CDROM support  <codenote>ВЫКЛЮЧИТЕ это</codenote>
   &lt;M&gt; SCSI emulation support           <codenote>соберите как модуль</codenote>

<codenote>В "SCSI Support"</codenote>
   &lt;M&gt; SCSI support                     <codenote>соберите как модуль</codenote>
   &lt;M&gt; SCSI CD-ROM support              <codenote>соберите как модуль</codenote>
</pre>
Затем добавьте <c>hdX=ide-scsi</c> к описанию(ям) образа ядра в <path>/etc/yaboot.conf</path>, где <c>hdX</c> это IDE устройство, соответствующее ваше CD плейеру. Это обычно <c>hdc</c>. Наберите <c>mkofboot -v</c>, чтобы установить новые настройки yaboot.conf. Отредактируйте <path>/etc/group</path> и добавьте всех пользователей, у которых должна быть возможность проигрывать CD  в группу <c>cdrom</c>. Теперь вам надо перезагрузить систему, чтобы изменения ядра вступили в силу.</p>
		<p>После перезагрузки, перейдите в режим <c>su</c>, чтобы изменить разрешения на CD устройство и установить xmms:
<pre>
# <c>chown root.cdrom /dev/scsi/host0/bus0/target0/lun0/cd</c>
# <c>chmod 660 /dev/scsi/host0/bus0/target0/lun0/cd</c>
# <c>emerge xmms xmms-cdread</c>
</pre>
<note>Вы должны использовать путь соответствующий CD устройству на вашей машине.</note>
Для проигрывания <c>xmms</c> и выберите <c>/dev/cdrom</c> в качестве файла для проигрывания.</p>
		</body>
	</section>

	<section>
		<title>Могу я запустить Mac OS или Mac OS X под Gentoo Linux?</title>
		<body><p>Да, так как вы вы запускаете Gentoo Linux/PPC на оборудовании Apple или клоне Mac'а. Вам надо будет запустить <uri link="http://www.maconlinux.org/">Mac-on-Linux</uri>. Просто выполните <c>emerge mol</c>. MOL поддерживает Mac OS 7.5.2 до 9.2.2, а так же OS X 10.1 и 10.2. Он может работать как в полно экранном, там и оконном режиме.</p></body>
	</section>

	<section>
		<title>Какие флаги USE не работают на машинах PowerPC?</title>
		<body><p>Полный список находится в файле <path>/etc/make.profile/make.defaults</path>.</p></body>
	</section>
</chapter>


<chapter>
<title>Ресурсы</title>
	<section>
		<title>Могу я купить CD с Gentoo Linux/PPC?</title>
		<body><p>Да! Несколько поставщиков продают Gentoo на CD дисках. Некоторые даже продают системы с предустановленным Gentoo. Эти люди также отдают часть доходов проекту Gentoo, так что покупайте их, пока они горячие! <uri link="/main/en/where.xml">Get Gentoo!</uri>.</p>
		</body>
	</section>

	<section>
		<title>В этом ЧАВО не ответа на мой вопрос. What do I do now?</title>
		<body><p>Первым делом посмотрите <uri link="/main/en/docs.xml">документацию на www.gentoo.org</uri>. Есть два списка рассылки, посвященных PPC - <uri link="http://lists.gentoo.org/mailman/listinfo/gentooppc-dev">gentooppc-dev</uri> и <uri link="http://lists.gentoo.org/mailman/listinfo/gentooppc-user">gentooppc-user</uri>. В обоих списках есть онлайн архивы. <uri link="http://forums.gentoo.org/viewforum.php?f=24">Gentoo on PPC</uri> (на forums.gentoo.org) это открытая доска объявлений для всех обсуждений связанных с PowerPC. Кроме того, обычно ведется достаточно активное обсуждение в IRC. Присоединяйтесь к нам на <i>#gentoo-ppc</i> на сервере <i>irc.freenode.net</i>.</p>
			<p>Общую информацию о Linux на PowerPC можно найти на <uri link="http://penguinppc.org/">penguinppc.org</uri> и <uri link="http://lppcfom.sourceforge.net/">Linux on PowerPC FAQ-O-Matic</uri>. За общей информацией о Linux обращайтесь к <uri link="http://www.linuxdoc.org/">www.linuxdoc.org</uri>.</p>
		</body>
	</section>
</chapter>
</guide>
<!-- 	<section>
		<title></title>
		<body><p></p></body>
	</section>

-->
