<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/guide-localization.xml,v 1.9 2012/04/18 18:30:37 swift Exp $ -->

<guide lang="ru">
<title>Руководство по русской локализации Gentoo Linux</title>

<author title="автор">
  <mail link="alv@linux-online.ru">Алексей Федорчук</mail>
</author>

<abstract>
Это руководство по настройке Gentoo Linux для работы в кириллическом окружении, 
включающее установку экранных шрифтов и раскладок клавиатуры в консоли, русской 
locale и часового пояса для России, а также русификацию оконной системы X. 
</abstract>

<version>1.0.1</version>
<date>2003-02-19</date>

<chapter>
<title>Введение</title>
<section>
<title>Что такое русская локализация</title>
<body>

<p>
В понятие локализации входит обеспечение вывода и ввода символов национальных 
языков (в случае использования набора символов, отличных от чистого латинского) 
и определение переменных окружения, зависящих от страны, языка и набора 
символов (то есть собственно установка locale). В число таких переменных, кроме 
страны, языка и набора символов, входят также представление даты и времени, 
разделителей десятичных дробей, денежных единиц и так далее. 
</p>

<p>
Вследствие различия подходов в этом документе будут отдельно рассмотрены 
локализация текстового (то есть Linux-консоли) и графического (оконной системы 
X) режимов. 
</p>

</body>
</section>
<section>
<title>О кириллических кодировках</title>
<body>

<p>
В условиях России и некоторых других стран бывшего СССР локализация осложняется 
множественностью наборов символов (charsets), используемых для представления 
алфавитов, основанных на кириллице. Причём для Unix-систем получили 
распространение минимум три таких набора, в просторечии именуемых кодировками: 
традиционная для свободных Unix-клонов (в том числе и Linux) кодировка KOI8-R, 
кодировка ISO-8859-5 (именуемая кодировкой ГОСТ), используемая в проприетарных 
Unix-системах, и кодировка CP1251 (или кодировка Windows). Кроме того, для 
обеспечения экранного вывода используется кодировка CP866 (или кодировка DOS). 
Наконец, в последнее время всё большую популярность получает кодировка UTF-8. 
</p>

<p>
В Gentoo Linux штатно (как говорится, из коробки) поддерживается кодировка 
KOI8-R, и всё сказанное ниже относится именно к ней. Локализацию для кодировок 
ISO-8859-5 или CP1251 пользователь может выполнить самостоятельно, получив из 
независимых источников некоторые дополнительные компоненты. О локализации для 
кодировки UTF-8, призванной унифицировать подход к интернационализации, будет 
говориться в следующих версиях этого документа, когда использование её станет 
общепринятым. 
</p>

</body>
</section>
</chapter>

<chapter>
<title>Базовая кириллизация консоли</title>
<section>
<title>Введение</title>
<body>

<p>
Итак, базовая локализация консоли включает обеспечение вывода национальных 
символов на экран и ввода их с клавиатуры. Однако в случае кириллической 
локализации вследствие особенностей наборов символов и аппаратных особенностей 
PC для ввода и для вывода используются, как правило, разные кодировки. И это 
требует еще двух дополнительных шагов &mdash; установки карты соответствия между 
наборами символов ввода и вывода, и активизация её на каждой из виртуальных 
консолей. 
</p>

</body>
</section>
<section>
<title>Установка экранного шрифта</title>
<body>

<p>
Экранный шрифт, загружаемый по умолчанию при старте системы, определяется в 
файле /etc/rc.conf строкой 
</p>

<pre caption="Строка, определяющая экранный шрифт">
CONSOLEFONT="default8x16"
</pre>

<p>
Для вывода русских букв "умолчальное" значение следует заменить на имя 
какого-либо файла шрифта с поддержкой кириллицы, например, <c>cp866-8x16</c> 
для представления кодировки DOS или <c>koi8r-8x16</c> &mdash; для кодировки KOI8-R. 
Например, 
</p>

<pre caption="Определение экранного шрифта для кодировки cp866">
CONSOLEFONT="cp866-8x16"
</pre>

<p>
Или &mdash;
</p>

<pre caption="Определение экранного шрифта для кодировки KOI8-R">
CONSOLEFONT="koi8r-8x16"
</pre>

<note>
Файлы шрифтов (и не только кириллических) находятся в каталоге 
<path>/usr/share/consolefonts/</path> и имеют вид <c>*.gz</c>, <c>*.psf.gz</c> 
или <c>*.psfu.gz</c>. При стандартном их размещении и форме ни полного пути, ни 
"расширения" имени указывать не обязательно. 
</note>

<impo>
В кириллическом Linux'е для экранного вывода, <e>как правило</e>, используется 
кодировка cp866 (вне зависимости от того, какой набор символов принят для 
клавиатурного ввода). О причинах этого говорить можно было бы долго &mdash; 
достаточно указать, что в любом ином случае программы, использующие 
псевдографику (например, Midnight Commander) приобретут весьма уродливый вид.
</impo> 

<p>
Экранные кириллические шрифты, поставляемые с Gentoo Linux, далеки от 
эстетического совершенства (справедливости ради заметим, что это относится 
почти ко всем Unix-клонам). И потому в качестве источника дополнительных 
шрифтов можно рекомендовать пакет <uri 
link="ftp://ftp.45.free.net/pub/fonts/linux/console-tools-cyrillic-0.9.tar.gz">console-tools-cyrillic</uri>
Виктора Вагнера. В результате приведенная выше в качестве примера строка может 
принять вид вроде 
</p>

<pre caption="Один из лучших кириллических шрифтов для консоли">
CONSOLEFONT="UniCyr-sans"
</pre>

</body>
</section>
<section>
<title>Установка раскладки клавиатуры</title>
<body>

<p>
Загружаемая по умолчанию раскладка клавиатуры также определяется в файле 
<path>/etc/rc.conf</path> строкой 
</p>

<pre caption="Строка, определяющая раскладку клавиатуры">
KEYMAP="us"
</pre>

<p>
По аналогии с предыдущим случаем легко догадаться, что значение <c>us</c> 
следует заменить на имя файла какой-либо кириллической (на этот раз уже в 
кодировке KOI8-R) раскладки. Место этих файлов (имеющих вид *.map.gz) &mdash; в 
каталоге <path>/usr/share/keymaps/i386/qwerty</path>, где для русской кодировки 
KOI8-R имеется несколько раскладок, например, ru1-ru4. Различия между ними 
&mdash; в соответствии различной маркировке клавиш (DOS или Windows &mdash; 
<e>не путать</e> с одноименными кодировками) и положении переключателя 
латиница/кириллица. Рискну взять на себя смелость рекомендовать раскладку ru4 
&mdash; для Windows-маркированных клавиатур, в которой переключателем служит 
CapsLock (при этом фиксация верхнего регистра обеспечивается одновременным 
нажатием клавиш Shift+CapsLock). То есть строка примет вид:
</p>

<pre caption="Один из примеров определения кириллической раскладки">
KEYMAP="ru4"
</pre>

<note>
Как и в случае с экранными шрифтами, при стандартном расположении файлов 
раскладок указывать полный путь к ним и "расширение" имени нет необходимости. 
</note>

<warn>
При желании вы можете выбрать и раскладку клавиатуры для кодировки cp1251 
(например, ru_win). Однако в этом случае придётся отыскать или самостоятельно 
изготовить таблицу перекодировки (mapscreen) cp1251->cp866. 
</warn>

<note>
Нет ничего более уродливого, чем программы, использующие псевдографику, при 
экранном представлении в кодировке cp1251. 
</note>

</body>
</section>
<section>
<title>Установка карты соответствия (mapscreen)</title>
<body>

<p>
Теперь остаётся только обеспечить соответствие между кодировками ввода (KOI8-R) 
и вывода (cp866), то есть загрузить соответствующую таблицу перекодировки 
(mapscreen). Для этого снова обращаемся к файлу <path>/etc/rc.conf</path>. 
Строка в нём, отвечающая за эту операцию, имеет по умолчанию такой вид: 
</p>

<pre caption="Строка, определяющая раскладку клавиатуры">
#CONSOLETRANSLATION="cp437_to_iso01"
</pre>

<p>
Необходимо, сняв с неё символ комментария (#), заменить "умолчальное" значение 
на необходимое нам, и подсмотреть его можно в каталоге 
<path>/usr/share/consoletrans</path> &mdash; это <c>koi2alt</c>: 
</p>

<pre caption="Установка таблицы соответствия cp866->KOI8-R">
CONSOLETRANSLATION="koi2alt"
</pre>

<warn>
Пожалуйста, не забудьте снять символ комментария со строки 
<c>CONSOLETRANSLATION</c> &mdash; кто только на моей памяти не наступал на эти 
грабли :-) 
</warn>

<note>
Если вы по каким-либо причинам остановились на представлении экранных шрифтов в 
кодировке KOI8-R, загрузка и активизация карты соответствия, разумеется, не 
нужна. 
</note>

</body>
</section>
<section>
<title>Активизация карты соответствия</title>
<body>

<p>
Результатом выполненной операции будет то, что после перезагрузки машины мы 
получили бы нормальный вывод кириллического текста (записанного в кодировке 
KOI8-R), но только &mdash; на первой (т.н. системной) консоли. Чтобы иметь то 
же самое на остальных виртуальных консолях (а в Gentoo Linux их по умолчанию 
еще 5), та же карта соответствия должна быть активизирована на каждой из них с  
помощью направления Escape-последовательности \033(K (символ \ в данном случае 
показывает, что следующие за ним символы рассматриваются как специальные). 
Достигнуть этого можно разными способами. Например, создать в каталоге 
<path>/etc/init.d/</path> файл <c>consoletrans</c> и в любом текстовом 
редакторе внести в него следующие строки: 
</p>

<pre caption="Сценарий активизации mapscreen">
for i in 1 2 3 4 5 6; do
echo -ne '\033(K' > /dev/vc/$i
done
</pre>

<note>
Это &mdash; для случая 6-ти консолей по умолчанию. Если количество их 
изменялось пользователем, значения <c>in</c>, очевидно, должны быть приведены в 
соответствие с реальностью. 
</note>

<note>
Следует отметить, что начиная с baselayout-1.8.x необходимость в этом отпала, 
поскольку этот код был встроен в /etc/init.d/consolefont. 
</note>

<p>
Теперь командой <c>chmod a+x /etc/init.d/consoletrans</c> созданному скрипту 
следует присвоить бит исполнения, после чего он добавляется к уровню исполнения 
по умолчанию (default runlevel):  
</p>

<pre caption="Сценарий активизации mapscreen">
# rc-update add consoletrans default
</pre>

<note>
Механизм автоматического обновления стартовых скриптов подробно описан в <uri 
link="/doc/ru/rc-scripts.xml">соответствующем разделе</uri> документации. 
</note>

<p>
Вот теперь после перезагрузки машины мы получим полноценно локализованную 
консоль. 
</p>

<note>
Все действия, описанные в данной главе, могут быть выполнены как на 
заключительных шагах (final steps) установки Gentoo Linux, так и в произвольный 
момент времени в дальнейшем. 
</note> 

</body>
</section>
</chapter>

<chapter>
<title>Установка русской locale</title>
<section>
<title>Установка locale ru_RU.KOI8-R</title>
<body>

<p>
Установить локально-зависимые переменные можно различными способами, в том 
числе и просто в профильных файлах отдельных пользователей. Однако в Gentoo 
Linux предусмотрен автоматический механизм установки любых переменных окружения 
в качестве общесистемных &mdash; <c>env-update</c>, подробно описанный в <uri 
link="/doc/ru/env.d-howto.xml">соответствующих разделах</uri> документации.
</p>

<p>
Для использования этого механизма следует в файл 
<path>/etc/env.d/02locale</path> добавить строку 
</p>

<pre caption="Установка переменной LANG">
LANG="ru_RU.KOI8-R"
</pre>

<p>
которая определяет не только язык locale, но и все остальные 
локально-зависимые переменные. Далее выполняем команду <c>env-update</c>, 
дополняющую глобальный профильный файл <path>/etc/profile</path>, после чего 
остаётся только перечитать последний командой <c>source /etc/profile</c>. 
Теперь в ответ на команду <c>locale</c> последует вывод 
</p>

<pre caption="Вывод команды locale после установки переменной LANG">
LANG=ru_RU.KOI8-R
LC_CTYPE="ru_RU.KOI8-R"
LC_NUMERIC="ru_RU.KOI8-R"
LC_TIME="ru_RU.KOI8-R"
LC_COLLATE="ru_RU.KOI8-R"
LC_MONETARY="ru_RU.KOI8-R"
LC_MESSAGES="ru_RU.KOI8-R"
LC_PAPER="ru_RU.KOI8-R"
LC_NAME="ru_RU.KOI8-R"
LC_ADDRESS="ru_RU.KOI8-R"
LC_TELEPHONE="ru_RU.KOI8-R"
LC_MEASUREMENT="ru_RU.KOI8-R"
LC_IDENTIFICATION="ru_RU.KOI8-R"
LC_ALL=
</pre>

<p>
свидетельствующий, что все локально зависимые переменные приняли значения для 
страны России (ru), русского языка (_RU) и набора символов KOI8-R. Те же 
значения этих переменных будут устанавливаться и в сеансах всех пользователей, 
вошедших в систему после выполнения команды <c>env-update</c>. 
</p>

<warn>
Механизм <c>env-update</c> однозначно работает в том случае, если 
пользовательской оболочкой (login shell) является /bin/bash. При использовании 
иных командных оболочек могут потребоваться некоторые дополнительные действия. 
Например, если в качестве login shell выступает оболочка zsh, следует 
отказаться от создания файла ~/.zshenv в домашнем каталоге пользователя. 
</warn>

<impo>
Переменная LANG=ru_RU.KOI8-R должна быть установлена в любом случае, даже если 
вы не любите сообщений на русском языке: в противном случае во многих 
программах (в том числе для XFree86) окажется просто невозможным, например, 
ввод символов кириллицы. 
</impo>

<p>
Как уже сказано, установка переменной LANG автоматически определяет и все 
прочие локально-зависимые переменные. Что в ряде случаев может быть 
нежелательным. Например, некоторые программы расчетного характера требуют, 
чтобы в качестве десятичного разделителя использовался символ точки, как в 
locale POSIX, а не запятой, как это принято в locale ru_*. Чтобы добиться 
этого, достаточно в конец файла <path>/etc/env.d/02locale</path>, после 
определения LANG, добавить строку вида: 
</p>

<pre caption="Установка переменной LC_NUMERIC">
LC_NUMERIC="POSIX"
</pre>

<p>
Аналогичным образом могут поступить пользователи, испытывающие стойкую 
неприязнь к русскоязычным меню и сообщениям программ: 
</p>

<pre caption="Установка переменной LC_NUMERIC">
LC_MESSAGES="POSIX"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Установка часового пояса</title>
<section>
<title>Системные часы по Гринвичу</title>
<body>

<p>
Если системные часы машины в BIOS Setup установлены на время по Гринвичу (UTC), 
для настройки часового пояса достаточно создать символическую ссылку 
<path>/etc/localtime</path> на файл, описывающий данный часовой пояс. Например, 
для установки московского времени это будет выглядеть так: 
</p>

<pre caption="Установка московского времени">
ln -sf /usr/share/zoneinfo/Europe/Moscow /etc/localtime
</pre>

<note>
Точное обозначение часовых поясов для России можно посмотреть в каталогах 
<path>/usr/share/zoneinfo/Europe</path> (имеет силу также для Украины и 
Белоруссии) и <path>/usr/share/zoneinfo/Asia</path> (для азиатской части 
России). Например, пользователям из Петропавловска-Камчатского указанная 
команда потребуется в следующем виде: 
</note>

<pre caption="Установка времени для Петропавловска-Камчатского">
ln -sf /usr/share/zoneinfo/Asia/Kamchatka /etc/localtime
</pre>

</body>
</section>
<section>
<title>Системные часы по местному времени</title>
<body>

<p>
Если системные часы данной машины установлены по местному времени, кроме 
создания указанной ссылки потребуется внести еще и изменения в файл 
<path>/etc/rc.conf</path>, а именно: строку <c>CLOCK="UTC"</c> заменить на 
<c>CLOCK="local"</c>. 
</p>

</body>
</section>
</chapter>

<chapter>
<title>Локализация оконной системы X</title>
<section>
<title>Введение</title>
<body>

<p>
Локализация оконной системы X (конкретно &mdash; её свободной реализации 
XFree86) может быть выполнена двумя путями: с помощью специальных утилит 
конфигурирования (обычно &mdash; <c>xf86config</c>, используемой для настройки  
графического режима вообще) или прямым редактированием конфигурационного файла 
<path>/etc/X11/XF86Config</path>. 
</p>

</body>
</section>
<section>
<title>Локализация с использованием утилиты xf86config</title>
<body>

<p>
Утилита <c>xf86config</c> в большинстве случаев позволяет корректно выполнить 
кириллизацию системы XFree86 уже на стадии начальной её настройки. Для этого 
необходимо дать (в консольном режиме) одноименную команду и правильно ответить 
на вопросы, относящиеся к определению языково-зависимых параметров, и следующие 
после указания выбора типа клавиатуры.   
</p>

<p>
Первый из таких вопросов &mdash; выбор страны (<c>Enter a number to choose the
country</c>), ответ на который, на самом деле, определяет базовую раскладку 
клавиатуры. Очевидными ответами являются <c>8 Belarusian для Белоруссии</c> и 
<c>70 Ukrainian</c> для Украины, тогда как для России предлагается два 
варианта: <c>53 Russian</c> и <c>54 Russian (cyrillic phonetic)</c>. Первый 
&mdash; это традиционная раскладка <e>qwerty</e>, второй же &mdash; 
фонетическая раскладка <e>ywerti</e>, в которой символы кириллицы расположены 
на месте созвучных латинских. Она использовалась на старых терминалах и ныне 
практически не встречается. Так что на самом деле и тут выбор <c>53 Russian</c> 
практически однозначен.
</p>

<p>
Далее следует предложение указать вариант русской раскладки (<c>Please enter a 
variant name for 'ru' layout</c>). Если, просто нажав <e>Enter</e>, отказаться 
от этого, будет установлен так называемый DOS-вариант раскладки (вернее, 
маркировки клавиш); маркированные таким образом клавиатуры практически вышли из 
употребления, поэтому следует, введя <c>winkeys</c>, выбрать Windows-вариант 
(не следует путать его с Windows-кодировкой, иначе говоря &mdash; cp1251). 
</p>

<p>
Затем, введя <c>y</c>, следует положительно ответить на вопрос об указании 
дополнительных опций расширения <e>XKB</e> (<c>Do you want to select additional 
XKB options (group switcher, group indicator, etc.)?</c>): это позволит 
определить переключатель латиница/кириллица (в силу исторических причин русская 
раскладка клавиатуры в XFree86 по умолчанию такового не имеет вообще). 
</p>

<p>
В результате следующим шагом будет предложение выбрать клавишу или клавишную 
комбинацию для такого переключателя. Возможные варианты включают: 
</p>

<pre caption="Варианты выбора переключателя латиница/кириллица">
  1  R-Alt switches group while pressed                
  2  Left Win-key switches group while pressed         
  3  Right Win-key switches group while pressed        
  4  Both Win-keys switch group while pressed          
  5  Right Alt key changes group                       
  6  Caps Lock key changes group                       
  7  Menu key changes group                            
  8  Left Win-key changes group                        
  9  Right Win-key changes group                       
 10  Both Shift keys together change group             
 11  Control+Shift changes group                       
 12  Alt+Control changes group                         
 13  Alt+Shift changes group                           
</pre>

<p>
Из них следует выбирать, руководствуясь своими предпочтениями. Однако по вполне 
понятным причинам можно рекомендовать, чтобы переключатель раскладок был 
идентичен для текстового (консольного) и графического режимов. ИМХО, лучше 
всего на эту роль подходит клавиша <e>CapsLock</e> (для этого в консоли должна 
быть установлена раскладка ru4). При этом первичная функция этой клавиши 
(фиксация верхнего регистра), как и в консоли, будет выполняться одновременным 
нажатием <e>Shift</e>+<e>CapsLock</e> 
</p>

<note>
Не менее удобным представляется и использование в качестве переключателя 
какой-либо из т.н. Windows-клавиш, имеющихся на всех современных клавиатурах. 
Однако при этом для достижения идентичности переключения в консоли и в XFree86 
потребуются расширенные раскладки клавиатуры из упомянутого выше пакета 
<c>console-tools-cyrillic</c>. 
</note>

<p>
Следующие несколько вопросов позволяют указать переключатель для третьей 
клавиатурной раскладки, дополнительные позиции управляющей клавиши 
<e>Control</e>, индикацию текущей раскладки (например, индикаторами CapsLock 
или ScrollLock) и ещё некоторые опции. Если в них нет необходимости &mdash; 
ответы на эти вопросы можно просто пропустить, нажимая клавишу <e>Enter</e>. 
</p>

<p>
Покончив с настройкой клавиатуры, следует завершить конфигурирование XFree86 
(включая настройку видеорежимов) и выйти из программы <c>xf86config</c> с 
сохранением результатов в файле <path>/etc/X11/XF86Config</path>. 
</p>

</body>
</section>
<section>
<title>Установка кириллических шрифтов</title>
<body>

<p>
Программа <c>xf86config</c> обеспечивает настройку клавиатурного ввода, но не 
подключает по умолчанию шрифтов с символами кириллицы &mdash; это достигается 
редактированием файла <path>/etc/X11/XF86Config</path>. Его следует открыть в 
любом текстовом редакторе и отыскать в <e>Section "Files"</e> описание путей к 
шрифтовым файлам. 
</p>

<warn>
При вызове файла <path>/etc/X11/XF86Config</path> необходимо отключить режим 
переноса строк в используемом редакторе. 
</warn>

<p>
Пути к файлам шрифтов описываются следующим образом:
</p>

<pre caption="Описание путей к файлам шрифтов">
FontPath   "/usr/X11R6/lib/X11/fonts/local/"
FontPath   "/usr/X11R6/lib/X11/fonts/misc/"
FontPath   "/usr/X11R6/lib/X11/fonts/75dpi/:unscaled"
FontPath   "/usr/X11R6/lib/X11/fonts/100dpi/:unscaled"
FontPath   "/usr/X11R6/lib/X11/fonts/Type1/"
FontPath   "/usr/X11R6/lib/X11/fonts/Speedo/"
FontPath   "/usr/X11R6/lib/X11/fonts/75dpi/"
FontPath   "/usr/X11R6/lib/X11/fonts/100dpi/"
</pre>

<p>
В этот список следует внести путь к файлам шрифтов с поддержкой кириллицы. По 
умолчанию в любой современной версии XFree86 имеется один набор кириллических 
шрифтов &mdash; <e>Cronyx</e>, расположенный в каталоге 
<path>/usr/X11R6/lib/X11/fonts/cyrillic/</path>. И потому первая строка 
указанной секции должна принять вид 
</p>

<pre caption="Описание пути к файлам кириллических шрифтов">
FontPath   "/usr/X11R6/lib/X11/fonts/cyrillic/"
</pre>

<impo>
Строка с кириллическими шрифтами должна быть первой в списке путей, дабы именно 
они обнаруживались бы любыми программами в первую очередь при совпадении их 
имен или псевдонимов с таковыми шрифтов, не имеющих символов кириллицы. 
</impo>

<note>
Шрифты производства Cronyx содержат ограниченное число гарнитур. Кроме того, 
они являются растровыми и вообще далеки от эстетического совершенства. Поэтому 
их по возможности лучше дополнить (или заменить) шрифтами от независимых 
производителей. В качестве таковых можно рекомендовать коллекцию масштабируемых 
(TTF и ATM) лицензионно чистых шрифтов Валентина Филиппова, входящих в 
российскую сборку OpenOffice и в последние версии дистрибутивов <uri 
link="http://www.altlinux.ru">Altlinux</uri>. 
</note>

</body>
</section>
<section>
<title>Ручная настройка клавиатуры для ввода кириллицы</title>
<body>

<p>
К кириллизации XFree86 посредством программы <c>xf86config</c> целесообразно 
прибегать только при начальной настройке этой системы. Если же в ходе 
использования Gentoo Linux возникнет необходимость дополнительного 
конфигурирования (например, изменения положения переключателя раскладок), проще 
обратиться к прямому редактированию файла <path>/etc/X11/XF86Config</path>. 
</p>

<p>
За настройку клавиатуры в нём отвечает Section <e>"InputDevice"</e>. В ней, 
после указания идентификатора клавиатуры (а оконная система X в состоянии 
поддерживать, даже на локальной машине, более одной физической клавиатуры) и её 
драйвера, следует описание т.н. <e>правил</e> (<e>rules</e>), определяющих 
раскладку клавиатуры. Оно имеет вид вроде следующего:  
</p>

<pre caption="Описание раскладки клавиатуры">
Option "XkbRules"   "xfree86"
Option "XkbModel"   "pc105"
Option "XkbLayout"  "ru"
Option "XkbVariant" "winkeys"
Option "XkbOptions" "grp:caps_toggle,grp_led:caps"
</pre>

<p>
Здесь, разумеется, можно изменить всё, что угодно. Однако практически имеет 
смысл рассмотреть только возможные варианты значений для строки <c>Option 
"XkbOptions"</c>. Значение, приведенное в примере, соответствует переключателю 
раскладок CapsLock (grp:caps_toggle) и индикатору Capslock как показателю 
включения русской раскладки (grp_led:caps). И то, и другое можно изменить, если 
не устраивает. Доступные значения содержатся (вместе с их краткими описаниями) 
в секции <e>! option</e> файла 
<path>/usr/X11R6/lib/X11/xkb/rules/xfree86.lst</path>.  
</p>

<note>
Описание раскладок клавиатуры через набор правил &mdash; лишь одно из 
возможных. О других способах сделать это можно прочитать на 
<uri>http://www.tsu.ru/~pascal/other/xkb</uri>. 
</note>

</body>
</section>
</chapter>
</guide>

<!-- *$Localization:
note:

Original Russian document, replacement for gentoo guide-localization.xml,
not translated one (english version doesn't fit Russia).
Needs review and future rename to remove conflict with English document.
Date was not updated during editing intentionally.

achumakov, 2005-11-09
-->
