<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ru/gentoo-hppa-install.xml,v 1.1 2003/11/23 16:38:45 sergey Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/en/gentoo-hppa-install.xml">
<title>Описание установки Gentoo на HPPA</title>
<author title="Разработчики Gentoo HPPA">
<mail link="gmsoft@gentoo.org">Guy Martin</mail>
</author>

<author title="Переводчик">
<mail link="amncorp@bk.ru">Мартынцев Александр</mail>
</author>

<author title="Редактор">
<mail link="svyatogor@gentoo.org">Сергей Кулешов</mail>
</author>

<abstract>Gentoo Linux можно установить на машинах HP PA-RISC machine. Этот порт находится в ранней стадии разработки и все замечания по поводу этого документа и установки в общем должны направляться в <uri link="http://bugs.gentoo.org">Gentoo
Bugzilla.</uri>
</abstract>
<version>0.1</version>
<date>12 May 2003</date>

<license/>

<chapter>
<title>Поддерживаемые устройства </title>
<section>
<title>Обратите на это внимание!</title>
<body>
<p>
Во время написания этой статьи, SMP и 64-битные ядра еще не проверены.
Мы с нетерпением ждем заверешения испытаний.
</p>
<p>Поддержка аппаратного обеспечения зависит только от ядра.
Вы можете найти список поддерживаемых платформ на <uri link="http://pateam.esiee.fr/list.html">веб-сайте ESIEE 
web site</uri>.</p>
</body>
</section>
</chapter>

<chapter>
<title>Загрузка</title>
<body>
<note>Далее мы вкратце опишем процедуру начальной загрузки.
Если вам нужно большее количество информации о других способах загрузки HPPA (например через консоль),
пожалуйста прочтите HOWTO на <uri>http://tldp.org/HOWTO/PA-RISC-Linux-Boot-HOWTO/index.html</uri>.</note>
<p>
В процессе начальной загрузки вы будете видеть примерно следующее сообщение:
</p>
<pre>
Searching for Potential Boot Devices.
To terminate search, press and hold the ESCAPE key.
</pre>
<p>
Когда появится это сообщение, нажмите и удерживайте клавишу ESC пока не появится
меню опций. Это может потребовать значительного времени - потерпите!. По
умолчанию, вы войдёте в консоль BOOT_ADMIN. 
<note>
На некоторых моделях 715'ой и 725'ой серий может появится меню опций. 
Вы можете войти в консоль BOOT_ADMIN выбрав <c>a)    Enter Boot Administration
mode</c> и нажав <c>&lt;enter&gt;</c>.
</note>
Как только вы увидите приглашение '<c>&gt;</c>' вы будете находится в режиме BOOT_ADMIN.
</p>

</body>
<section>
<title>Загрузка используя LiveCD</title>
<body>
<p>Если вы не знаете SCSI ID своего привода CD-ROM, ваша PA-RISC станция
сама найдет его, когда вы дадите команду <c>search</c> </p>
<pre>
> <i>search</i>

Searching for Devices with Bootable Media.
To terminate search, please press and hold the ESCAPE key.
</pre>
<p>Теперь ваша PA-RISC станция отобразит все доступные носители для начальной загрузки. 
Например результат поиска может выглядеть так:</p>
<pre>
Device Selection      Device Path             Device Type and Utilities
---------------------------------------------------------------------------

P0                    scsi.5.0                TOSHIBA CD-ROM XM-3301TA
                                                  IPL
P1                    scsi.2.0                COMPAQ ST32550N
                                                  IPL
P2                    lan.0010a7-06d1b6.3.6   server
                                                  IPL


&gt;
</pre>
<p>
Конечно этот пример будет выглядеть у всех по разному, в зависимости от вашей конфигурации.
</p>
<p>
Теперь, когда вы знаете с какого устройства можно произвести загрузку, давайте сделаем это.
</p>
<pre>
&gt; <i>boot scsi.5.0 ipl</i>

Trying scsi.5.0
</pre>
<p>
Ключ <e>ipl</e> (Initial Program Loader) сообщает <i>palo</i>( PA-RISC boot LOader) чтобы он вошел в интерактивный режим.
Это позволит вам, например, менять параметры загрузки ядра. 
</p>
</body>
</section>
<section>
<title>Загрузка используя lifimage (Сетевая Загрузка)</title>
<body>
<p>
Lifimage на данный момент недоступен. 
Вы можете использовать lifimage с дистрибутива Debian's для создания оболочки, но
lifimage поставляется без утилиты bunzip2, а значит вам придётся распаковать
stage архивы перед их использованием.
Вам также надо будет поместить их на FTP или HTTP сервер, чтобы закачать их <i>wget</i> во время инсталляции.
<warn> Версия ядра lifimage должна быть больше или равна версии 2.4.20 иначе ваша система 
<e>вообще не будет работать</e>.</warn>
</p>
</body>
</section>
<section>
<title>После загрузки : Работаем с PALO - PA-RISC Linux Loader</title>
<body>
<p>Когда процес загрузки будет завершен, <i>palo</i> будет запущен в интерактивном режиме.</p>
<pre>
Boot path initialized.
Attempting to load IPL.


Hard booted.
palo ipl 1.2 root@b180l.da-kot Tue Apr  8 12:43:07 CEST 2003

Boot image contains:
    0/vmlinux32 4028015 bytes @ 0x1520000
    0/ramdisk 834748 bytes @ 0xf800
Current command line:
0/vmlinux initrd=initrd.gz TERM=linux console=tty root=/dev/ram0 init=/linuxrc
  0: 0/vmlinux
  1: initrd=initrd.gz
  2: TERM=linux
  3: console=tty
  4: root=/dev/ram0
  5: init=/linuxrc

Edit which field?
(or 'b' to boot with this command line)? 0
</pre>
<p>
Эти параметры подходят в большинстве случаев. 
</p>
<p>
Если хотите, то можете добавить ключевые слова в конец командной строки. 
Сейчас доступна толька одна опция <c>cdcache</c>  которая дает команду LiveCD загрузить себя в память, 
позволяя размонтировать CD. 
</p>
<pre>
(or 'b' to boot with this command line)? <i>5</i>
init=/linuxrc <i>cdcache</i>
</pre>
<p>
Теперь когда все параметры заданы, давайте загрузим ядро. 
</p>
<pre>
(or 'b' to boot with this command line)? <i>b</i>
</pre>
</body>
</section>


</chapter>
<chapter>
<title>Установка Gentoo</title>
<section>
<body>
<p>Вкратце рассмотрим процес инсталляции:
Вы должны создать разделы, и настроить их под нужную файловую систему,
затем выполнить стадию 1, стадию 2 или стадию 3. Если вы уже выполнили стадии 1 и 2,
то ваша система будет готова к выполнению стадии 3.
Когда система будет находится на стадии 3, вы сможете её настроить (изменить файлы конфигурации, 
установить загрузчик и т.д.).
После перезагрузки вы будете иметь полностью функционирующую систему Gentoo Linux.
В зависимости от стадии процесса сборки вам для инсталляции требуется следующее:</p>

<table>
<tr><th>stage tarball</th><th>requirements for installation</th></tr>
<tr><ti>1</ti><ti>partition/filesystem setup, emerge sync, bootstrap, emerge system, emerge linux sources, final configuration</ti></tr>
<tr><ti>2</ti><ti>partition/filesystem setup, emerge sync, emerge system, emerge linux sources, final configuration</ti></tr>
<tr><ti>3</ti><ti>partition/filesystem setup, emerge sync (по желанию), final configuration</ti></tr>
</table>
<p>Первым делом надо установить нужные модули.
Возможно вам не придётся этого делать т.к. большинство драйверов PA-RISC находится в ядре системы.
Для просмотра списка всех доступных сетевых карт, дайте команду <c>ls
/lib/modules/*/kernel/drivers/net/*</c>. Загрузить нужный модуль можно командой:</p>

<pre>
# <i>modprobe pcnet32</i>
<comment>(замените pcnet32 названием вашей сетевой карты)</comment>
</pre>

<p>Теперь, если вы захотите обратиться к SCSI-устройствам, которые были подключены к машине
и не были автоматически обнаружены, вам надо будет загрузить соответствующие модули из 
<path>/lib/modules</path>, с помощью команды <c>modprobe</c>:</p>

<pre>
# <i>modprobe aic7xxx</i>
# <i>modprobe sr_mod</i>
# <i>modprobe sd_mod</i>
</pre>

<p>В этом примере будет загружен драйвер SCSI-устройства <c>aic7xxx</c> или
<i>modprobe</i> загрузит поддержку SCSI CD-ROM (<c>sr_mod</c>) 
и диска (<c>sd_mod</c>).</p>

<note><c>hdparm</c> включен в состав Gentoo ISO.
Если вы хотите провести дополнительную настройку дисков, то сейчас для этого
самое подходящее время.
На современных дисках команда
<c>hdparm -d 1 /dev/hdx</c> будет очень полезна. Вы можете использовать команду 
<c>hdparm -v /dev/hdx</c> для проверки настроек дисков, и команду 
<c>hdparm -t /dev/hdx</c>  для проверки скорости работы ваших дисков.</note>
</body>
</section>

<section>
<title>Настройка установленной сети</title>
<body>

<p>Gentoo позволяет настроить установленную, работающую сеть, позволяя использовать команды
<c>ssh</c>, <c>scp</c> или <c>wget</c>
еще перед инсталяцией системы.Даже если вам не надо сейчас использовать сеть,
лучше настроить и сконфигурировать её сейчас, чтобы Portage смог ею
воспользоваться из среды с изменённым корнем, что необходимо для установки.</p>
</body>
</section>

<section>
<title>Ручная настройка DHCP</title>
<body>
<p>
Рассмотрим настройку сети на примере DHCP. 
Если ваш провайдер не использует DHCP, перейдите к следующему разделу. </p>
<pre caption="Network configuration with DHCP">
# <i>dhcpcd eth0</i>
</pre>
<note>
Некоторые поставщики Интернет-сервисов требуют указывать имя хоста. Что бы сделать это, надо добавить ключ
<c>-h myhostname</c> к команде dhcpcd указанной выше. 
</note>
<p>Если вам будут выданы предупреждения при выполнении этой команды - не паникуйте: Ошибки могут быть чисто косметические.
Теперь переходите к тестированию сети.</p>
</body>
</section>
<section>
<title>Описание статической настройки</title>
<body>
<p>
Выполните следующие команды, заменив $IFACE на свой сетевой интерфейс 
(обычно <c>eth0</c>), $IPNUM на ваш IP-адрес, $BCAST на ваш broadcast-адрес, $NMASK на маску сети.
В команде <c>route</c> замените $GTWAY на ваш gateway по умолчанию.
</p>
<pre>
# <i>/sbin/ifconfig $IFACE $IPNUM broadcast $BCAST netmask $NMASK</i>
# <i>/sbin/route add -net default gw $GTWAY netmask 0.0.0.0 metric 1</i>
</pre>
<p>Теперь пришло время создать файл <path>/etc/resolv.conf</path>
для поиска Web/FTP сайтов по имени,а не только по их IP-адресу.</p>

<note>В данный момент установлен только один редактор, по умолчанию это <c>nano</c>,
маленький и очень простой в работе визуальный редактор. Используйте <c>nano</c>
с опцией <c>-w, чтобы отключить свёртку строк.</c>
</note>

<p>Вот примерное содержимое вашего файла <path>/etc/resolv.conf</path>:
</p>
<pre caption="/etc/resolv.conf template">
domain mydomain.com
nameserver 10.0.0.1
nameserver 10.0.0.2
</pre>
<p>Замените <c>10.0.0.1</c> и <c>10.0.0.2</c>  на IP-адреса вашего первичного
и вторичного DNS-серверов соответственно.</p>
</body>
</section>

<section>
<title>Настройка прокси</title>
<body>
<p>Если в сети используется прокси, то прежде чем продолжать настраивать сеть, надо настроить ваш прокси. 
Вам надо будет экспортировать несколько переменных чтобы его установить. </p>
<pre>
# <i>export http_proxy="machine.company.com:1234" </i>
# <i>export ftp_proxy="$http_proxy" </i>
# <i>export RSYNC_PROXY="$http_proxy" </i>
</pre>
</body>
</section>

<section>
<title>Тестирование сети</title>
<body>
<p>Теперь когда ваша сеть настроена, команда <c>/sbin/ifconfig -a</c> должна
показать (будем надеются!), 
что ваша сетевая карта работает.
</p>
<pre caption="/sbin/ifconfig for a working network card">
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11
</pre>
</body>
</section>

<section>
<title>Сеть работает!</title>
<body>
<p>Теперь наша сеть пригодна для работы. Вы должны уметь пользоваться командами
<c>ssh</c>, <c>scp</c> и <c>wget</c> для соединения с другими компьютерами в вашей локальной сети и Internet.</p>
</body>
</section>
</chapter>

<chapter>
<title>Создание разделов и сборка системы</title>
<body>
<note> Если вам нужно несколько консолей, незабудьте установить пароль для root.
Многие программы доступны с LiveCD, например такие как <i>screen</i>, <i>lynx</i> и <i>irssi</i></note>
</body>
<section>
<title>Создание разделов</title>
<body>
<p>Запустите программу <i>fdisk</i> для создания разделов. </p>
<pre>
# <i>fdisk /dev/sdX</i>
<codenote>замените sdX названием того диска, на котором хотите создать разделы.
(т.е. sda, hda, ...)</codenote>
</pre>
<warn>Для работы PALO нужен специальный раздел.
Вы должны создать раздел размером не менее 16 MB в самом начале вашего диска.
Этот раздел должен иметь тип <e>f0 (Linux/PA-RISC boot)</e></warn>
<impo> Если объем вашего диска более 2 Гб, вам надо будет создать раздел на первых 2 Гб вашего диска.
PALO не может прочесть ядро, если оно находится за пределом первых 2 Гб.</impo>

<p>После того как вы создадите файловые системы с нужными файловыми системами можете переходить 
к следующему шагу.
В следующем примере корневой раздел находится на <path>/dev/sda3</path>, 
swap-раздел на <path>/dev/sda4</path> для первой стадии инсталляции.stage1 пакет
мы загрузили с зеркала gentoo.</p>
<pre>
# <i>swapon /dev/sda4</i>
# <i>mount -n /dev/sda3 /mnt/gentoo</i>
</pre>
<note>После монтирования вашего нового корневого раздела на <path>/mnt/gentoo</path>, 
пришло время смонтировать и остальные разделы (такие как <path>/boot, /usr, /var</path>).
</note>
<pre>
# <i>cd /mnt/gentoo</i>
# <i>wget http://www.ibiblio.org/pub/Linux/distributions/gentoo/experimental/hppa/stages/stage1-hppa1.1-1.4_someversion.tar.bz2">http://www.ibiblio.org/pub/Linux/distributions/gentoo/experimental/hppa/stages/stage1-hppa1.1-1.4_someversion.tar.bz2</i>
# <i>tar xpjvf stage1-hppa1.1-1.4_someversion.tar.bz2</i>
# <i>cp /etc/resolv.conf etc/resolv.conf</i>
# <i>mount -o bind /proc proc</i>
# <i>chroot .</i> <codenote>Now you are in your new system</codenote>
# <i>env-update</i> <codenote>This will correctly set your evironment variables</codenote>
<codenote>You can safely ignore any warnings about missing files</codenote>
# <i>source /etc/profile</i>
# <i>nano -w /etc/make.conf</i> <codenote>Tweak your optimisations and mirrors here</codenote>
# <i>emerge sync</i> <codenote>This will retrieve the current portage tree which is about 10 MB</codenote>
</pre>
<p>Если вы начали с первой стадии, начнется процесс начальной загрузки.</p>
<pre>
# <i>cd /usr/portage</i>
# <i>./scripts/bootstrap.sh</i>
</pre>
<p>Теперь можно перейти к второй стадии, где можно будет скомпилировать  и установить основные системные файлы.</p>
<pre>
# <i>export CONFIG_PROTECT="-*"</i>
# <i>emerge system</i>
</pre>
<p>Установка Gentoo теперь находится в стадии 3.
Если вы начали со стадии 3, возможно, что существуют новые и/или обновленные пакеты.
Обновите их:</p>
<pre>
# <i>unset CONFIG_PROTECT</i>
# <i>emerge -uD world</i>
</pre>
<p>
Теперь система обновлена. 
</p>
</body>
</section>
</chapter>


<chapter>
<title>Сборка ядра.</title>
<section>
<title>Получите текущую версию ядра для HP-PA </title>
<body>
<p>Имеется специальный патч ядра для машин HP-PA доступный в Gentoo Linux.
Установите его командой <c>emerge hppa-sources</c></p>
<pre>
# <i>emerge hppa-sources</i>
</pre>
<p>Теперь можно добавить в ядро поддержку таких файловых систем как SGI's XFS, Usagi IPv6, и т.д
<note> Ни один из патчей не был протестирован, так что вы ставите их на свой страх и риск.</note>
Как только исходники ядра будут скопированы и распакованы, вам надо будет с конфигурировать свое ядро. 
</p>
</body>
</section>
<section>
<title>Настройка и компиляция ядра.</title>
<body>
<p>Приступим к настройке и компиляции ядра.</p>
<pre>
# <i>cd /usr/src/linux</i>
# <i>make menuconfig</i>
# <i>make vmlinux modules modules_install</i>
# <i>cp vmlinux System.map /boot</i>
</pre>
<warn> Что бы иметь рабочее ядро, вы должны дать правильные опции при его
настройке. Некторые из них должны быть вкомпилированы в ядро <c>статически, а не
в иде модулей</c>. Вам нужно будет включить опцию <c>"Code maturity level options --> Prompt for development and/or incomplete code/drivers"</c>.В секции <c>"File systems"</c> должна быть включена опция <c>Device File System</c> (заметьте, что вы не должны включать опцию  <c>"/dev/pts file system support"</c>). Вам также надо включить опцию. <c>Virtual Memory File system</c>.</warn>
<impo>Если у вас есть HIL мышь или клавиатура, не забудьте указать их поддержку. Для этого, необходимо включить опции <c>"Keyboard support"</c>, <c>"Mouse support"</c> и <c>"Event interface support"</c> в разделе <c>"Input core support"</c>.
</impo>
<impo>
В секции <c>"HIL support"</c>, если у вас нету мышки на HIL-порте, 
рекомендуется использовать только опцию <c>"HIL Keyboard (basic) support"</c>.
</impo>
<impo>
Полную поддержку можно обеспечить, включив опции <c>"HP System Device Controller i8042 Support"</c> и <c>"HIL MLC Support"</c>, <c>"HIL Keyboard (full) support"</c> и <c>"HIL Mouse &amp; Pointer support"</c>. Но в этом случае <e>НЕ ВЫБИРАЙТЕ</e> опцию <c>"HIL Keyboard (basic) support"</c>.
</impo>
</body>
</section>
<section>
<title>Установка PALO - загрузчика системы.</title>
<body>
<p>На платформе PA-RISC,загрузчик системы называется <i>palo</i>. Его конфигурационный файл можно найти в <e>/etc/palo.conf</e>.
Например он может быть таким:</p>
<pre>
--commandline=2/vmlinux root=/dev/sdb2 HOME=/
--recoverykernel=/vmlinux.old
--init-partitioned=/dev/sdb
</pre>
<p>Первая строка сообщает palo месторасположение ядра и параметры его загрузки.
<c>2/vmlinux</c> сообщает название ядра <i>/vmlinux</i> и его месторасположение.
</p>
<impo>Путь к ядру указывается относительно корневого каталога раздела, а не корневого каталога древа-файлов.</impo>
<p>
Вторая строчка говорит о том, какое ядро следует использовать для восстановления. 
Если это ваша первая установка и у вас нет старого ядра, то эту строчку надо закоментировать. </p><p>
Третья строка указывает на диск, на котором будет находиться <i>palo</i>.
 Когда конфигурация будет завершена, запустите <c>palo</c>.</p>
<pre>
# <i>palo</i>
</pre>

</body>
</section>
</chapter> 
<chapter>
<title>Финальная настройка. </title>
<section>
<title>Временная зона. </title>
<body>
<note>Очень важно чтобы этот шаг был завершен. Иначе часы будут сильно врать.
</note>

<p>Для выполнения этого пункта, вы уже должны иметь завершенную третью стадию. Вам надо запустить это процес для установки временной зоны.
Установка временной зоны перед формированием ядра гарантирует, что пользователи
увидят правильное время в выводе от <c>uname -a</c>.</p>
<p>Найдите свою временную зону (или UTC, если вы используете Universal Time Constant) в 
<path>/usr/share/zoneinfo</path>, и сделайте символьную ссылку, набрав: 
</p><pre>
# <i>ln -sf /usr/share/zoneinfo/path/to/timezonefile /etc/localtime</i>
</pre>
<p>Вы также можете проверить <path>/etc/rc.conf</path> на правильность настройки часового пояса. </p>
</body>
</section>
<section>
<title>Системный Регистратор и демон Cron.</title>
<body>
<p>Теперь вы должны выбрать Системный Регистратор. Gentoo Linux предлагает
<i>sysklogd</i> - стандартный стандартный набор системы регистрации.  
Доступны также: <i>msyslog</i>,
<i>syslog-ng</i>, и <i>metalog</i>.
Профессиональные пользователи старются избегать
<i>sysklogd</i> (уж медленно он работает), и использовать новые альтернативы. 
Программа, <i>metalog</i> довольно популярна.
Чтобы установить ваш регистратор, дайте одну из следующих команд:</p>

<pre>
# <i>emerge app-admin/sysklogd</i>
# <i>rc-update add sysklogd default</i>
<comment>или</comment>
# <i>emerge app-admin/syslog-ng</i>
# <i>rc-update add syslog-ng default</i>
<comment>или</comment>
# <i>emerge app-admin/metalog</i>
# <i>rc-update add metalog default</i>
<comment>или</comment>
# <i>emerge app-admin/msyslog</i>
# <i>rc-update add msyslog default</i>
</pre>
<impo>
  Metalog не записывает события сразу же в журнал, а сначала складывает данные в
  блоки на диск. Поэтому если вы решили заняться отладкой демона, его попытки
  улучшить производительность вряд ли вам помогут, так что после старта Gentoo
  Linux можно отправить metalog сигнал USR1 чтобы временно отключить буферизацию
  (это значит,что <i>tail -f <path>/var/log/everything/current</path></i> будет работать в реальном времени). А чтобы обратно включить буферизацию, посылается сигнал USR2. </impo>

<p>Теперь вы можете выбрать для использования пакет Cron.
В Gentoo Linux можно выбрать: <i>dcron</i>, <i>fcron</i>, и
<i>vcron</i>.
Если вы не знаете какой вам выбрать, мы советуем выбрать <i>vcron</i>.
Выполните снова один из наборов команд:</p>
<pre>
# <i>emerge sys-apps/dcron</i>
# <i>crontab /etc/crontab</i>
<comment>или</comment>
# <i>emerge sys-apps/fcron</i>
# <i>crontab /etc/crontab</i>
<comment>или</comment>
# <i>emerge sys-apps/vcron</i>
<comment>не забудьте добавить *cron в нужный уровень инициализации </comment>
# <i>rc-update add *cron default </i>
</pre>
<p>Для дополнительной информации о работе Cron в Gentoo Linux, смотрите <uri
link="http://lists.gentoo.org/pipermail/gentoo-announce/2002-April/000151.html">тут</uri>.</p>
<p>Для дополнительной информации о автозапуске программ и демонов смотри <uri link="/doc/en/rc-scripts.xml">rc-script guide</uri>. </p>
</body>
</section>
<section>
<title>/etc/fstab</title>
<body>
<p>Ваша система Gentoo Linux уже почти готова к использованию. Все что осталось - настроить некоторые конфигурационные файлы и установить загрузчик PALO..
Первый файл который надо настроить это <path>/etc/fstab</path>.
Помните, что вы должны использовать опцию <c>notail</c> для вашего загрузочного раздела, если хотите создать на нем файловую систему  ReiserFS.
Не забудьте назначить файловые системы <c>ext2</c>, <c>ext3</c> или <c>reiserfs</c> на нужные разделы.</p>
<p>Ваш файл <path>/etc/fstab</path> должен быть примерно таким как указано ниже,
но конечно вы должны заменить "BOOT", "ROOT" и "SWAP" на соответствующие им блочные устройство (такие <c>hda1</c>, и т.д.)</p><pre>
<comment>
# /etc/fstab: static file system information.
#
# noatime turns off atimes for increased performance (atimes normally aren't
# needed; notail increases performance of ReiserFS (at the expense of storage
# efficiency).  it is safe to drop the noatime options if you want and to
# switch between notail and tail freely.

# &lt;fs&gt;           &lt;mountpoint&gt;   &lt;type&gt;   &lt;opts&gt;          &lt;dump/pass&gt;

# NOTE: If your BOOT partition is ReiserFS, add the notail option to opts.
</comment>
/dev/BOOT           /boot       ext2	 noauto,noatime	 1 2
/dev/ROOT           /           ext3	 noatime         0 1
/dev/SWAP           none        swap	 sw              0 0
/dev/cdroms/cdrom0  /mnt/cdrom  iso9660	 noauto,ro       0 0
proc                /proc       proc	 defaults        0 0
</pre>

<warn> Пожалуйста заметьте что <path>/boot</path> не монтируется во время
загрузки!. Это защищает данные в разделе <path>/boot</path> 
от возможных повреждений. Если вам нужен доступ к <path>/boot</path>, смонтируйте его!
</warn>

</body>
</section>
<section>
<title>Установка пароля root </title>
<body>
<p>Для установки пароля root надо дать команду::</p>
<pre>
# <i>passwd</i>
</pre>
</body>
</section>
<section>
<title>/etc/hostname</title>
<body>
<p>Редактируйте этот файл так, чтобы каждая строка содержала полное доменное имя, т.е. <c>mymachine.mydomain.com</c>.
<pre>
# <i>echo mymachine.mydomain.com > /etc/hostname</i>
</pre>
</p>
</body>
</section>

<section>
<title>/etc/hosts</title>
<body>
<p>Этот файл содержит список IP-адресов и соответствующих им имен хостов.
Это используется системой для решения проблем IP-адресации имен хостов, которых нет в вашем сервере имен. Вот шаблон этого файла: :
</p><pre>
127.0.0.1      localhost
<comment># the next line contains your IP for your local LAN, and your associated machine name</comment>
192.168.1.1    mymachine.mydomain.com	mymachine
</pre>

<note>Если вы работаете DHCP-сети, полезно будет заменить localhost на настоящее
вашей машины. Это поможет для работы в GNOME и многим других программам.
</note>

</body>
</section>

<section>
<title>Окончательная настройка сети.</title>
<body>
<p>
Добавьте имена всех модулей которые нужны для нормального функционирования вашей системой в файл
<path>/etc/modules.autoload</path> (вы таже можете добавлять любые нужные вам опции в туже строку.)
При загрузке Gentoo Linux эти модули будут загружены автоматически.
Особенно важно добавить в список драйвер сетевой карты, если вы скомпилировали
ее модулем.
</p>
<pre caption="/etc/modules.autoload">
3c59x
</pre>
<p>Отедактируйте скрипт <path>/etc/conf.d/net</path>, чтобы сеть заработала после первой загрузки:
</p>
<pre>
# <i>nano -w /etc/conf.d/net</i>
# <i>rc-update add net.eth0 default</i>
</pre>
<p>
Если у вас стоит несколько сетевых карт то надо создать дополнительные скрипты <path>net.eth<comment>x</comment></path>
для каждой из них (<comment>x</comment> = 1, 2, ...):
</p>
<pre caption="Multiple network interfaces">
# <i>cd /etc/init.d</i>
# <i>cp net.eth0 net.eth<comment>x</comment></i>
# <i>rc-update add net.eth<comment>x</comment> default</i>
</pre>

</body>
</section>

<section>
<title>Базовые настройки (включая международную раскладку клавиатуры).</title>
<body>
<pre caption="basic configuration">
# <i>nano -w /etc/rc.conf</i>
</pre>
<p>
Следуйте указаниям в файле для задания омновных настроек. Пожалуйста, удостоверьтесь что CLOCK установлен правильно. 
Устанавливать международные раскладки клавиатуры можно меняя переменную KEYMAP (смотрите <path>/usr/share/keymaps</path> 
для выяснения возможных раскладок).
</p>
</body>
</section>

</chapter>
<chapter>
<title> Вот и все!</title>
<section>
<body>
<p>Поздравляем! Вы только что завершили установку Gentoo Linux на своей HPPA-станции.
Мы приветствуем любые комментарии или предложения могущие помочь в улучшении портирования на HPPA.
Спасибо за то, что потратили время на установку.</p>

<p>Теперь вы можете делать все что захотите. Вы можете перезагрузится и начать установку других пакетов, а если хотите можете начать прямо сейчас..</p>
<note> Большая часть этой документации была взята из Gentoo
SPARC Installation Guide и PA-RISC-Linux-Boot-HOWTO.</note>
</body>
</section>
</chapter>

</guide>
