<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<!-- English CVS Version: 1.31 -->

<guide link="/doc/de/alsa-guide.html">

<title>Gentoo Linux ALSA Anleitung</title>

<author title="Author">
  <mail link="zu@pandora.be">Vincent Verleye</mail>
</author>
<author title="Author">
  <mail link="g2boojum@gentoo.org">Grant Goodyear</mail>
</author>
<author title="Author">
  <mail link="agenkin@gentoo.org">Arcady Genkin</mail>
</author>
 <author title="Author">
   <mail link="eradicator@gentoo.org">Jeremy Huddleston</mail>
 </author>
<author title="Editor">
  <!--zhen@gentoo.org-->John P. Davis
</author>
<author title="Editor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Editor">
  <mail link="bennyc@gentoo.org">Benny Chuang</mail>
</author>
<author title="Editor">
  <mail link="blubber@gentoo.org">Tiemo Kieft</mail>
</author>
 <author title="Editor">
   <mail link="erwin@gentoo.org">Erwin</mail>
 </author>
<author title="Übersetzer">
  <mail link="js@ameds.de">Jens Schittenhelm</mail>
</author>
<author title="Übersetzer">
  <mail link="dertobi123@gentoo.org">Tobias Scherbaum</mail>
</author>
<author title="Übersetzer">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Übersetzer">
  <mail link="hendrik@grahli.net">Hendrik Grahl</mail>
</author>  

<abstract>
Dieses Dokument zeigt, wie unter Gentoo Linux das Advanced Linux Sound 
Architecture (ALSA) installiert und eingerichtet werden kann. Dieses Dokument 
soll zusätzliche Informationen zur Gentoo Linux Desktop Konfiguration vermitteln.
</abstract>

<license/>

<version>1.4.2</version>
<date>28. März 2004</date>

<chapter>
<title>Einführung</title>
<section>
<title>Was ist ALSA?</title>
<body>

<p>
ALSA (Advanced Linux Sound Architecture) ist ein Projekt, mit dem die Steuerung
des Audio Subsystems unter Linux verbessert werden soll, indem viele Bereiche
neu programmiert werden. Es hat das Open Sound System (OSS) als 
Standard-Sound-Subsystem im 2.6 Kernel ersetzt, aber es kann sowohl mit 2.4 
wie 2.6 Kerneln verwendet werden.
</p>

<p>
ALSA stellt die Audio and MIDI Funktionen für Linux bereit.
</p>

<p>
Wir zitieren von der Webseite des <uri>http://www.alsa-project.org</uri> folgende Funktionen:
</p>
<ul>
  <li>
    Unterstützung für alle Audio Schnittstellen von Standard Soundkarten bis zu
    professionellen "multichannel audio interfaces".
  </li>
  <li>Vollkommen modularisierte Sound Treiber.</li>
  <li>SMP und thread-safe design.</li>
  <li>
    Benutzerschnittstelle (alsa-lib) um das Programmieren von Anwendungen, die
    auf Ton beruhen, deutlich zu vereinfachen und verbesserte Funktionen
    bereitzustellen.
  </li>
  <li>
    Unterstützung für die ältere OSS (Open Sound System) Benutzerschnittstelle,
    welches die Abwärtskompatibilität zu älteren OSS Programmen garantiert.
  </li>
</ul>

<p>
Darüberhinaus kann ALSA noch viel mehr, wie z.B. Full Duplex Aufnahme und
Wiedergabe, Unterstützung für mehrere Soundkarten, hardware mixing von Streams,
stark erweiterte Mischeigenschaften, um die vielen Features der neuen
Soundkarten auch ausnutzen zu können...
</p>

</body>
</section>
<section>
<title>Warum ALSA benutzen?</title>
<body>

<p>
Ihre Soundkarte könnte durch Module vorhanden im 2.4 Kernel unterstützt sein 
(diese werden auch mit dem 2.6 Kernel geliefert unter der 'Open Sound System 
(DEPRECATED)' Option). Zusätzlich könnten Sie auch noch die Möglichkeit haben 
das kommerzielle OSS/4Front Sound Treibersystem zu benutzen. Wenn Sie wünschen 
eines dieser Systeme zu verwenden, dann sollten Sie die 
<uri link="http://www.tldp.org/HOWTO/Sound-HOWTO/index.html">Linux Sound
HOWTO</uri> durchlesen.
</p>

<p>
Jedoch haben diese  OSS/4Front Treiber einige Einschränkungen -- die
kommerzielle Lizenz ist eine davon. ALSA ist ein Ansatz diese Einschränkungen zu
umgehen und darüber hinaus Open Source Software mit vollwertiger GPL und LGPL
Lizenz einzusetzen, ohne auf professionelle Tonqualität beim Aufnhemen,
Abspielen und MIDI Sequenzierung verzichten zu müssen.
</p>

</body>
</section>
<section>
<title>Welche Karten werden von ALSA unterstützt?</title>
<body>

<p>
ALSA versucht so viele neue Karten wie möglich mit Open-Source Treibern zu
unterstützen. Einige Hersteller stellen allerdings nur binäre Pakete zur
Verfügung.
</p>

<p>
Um herauszufinden, ob Ihre Karte von ALSA unterstützt wird, gibt es eine Liste
von Soundkarten, die bereits unter ALSA funktionieren:
<uri>http://www.alsa-project.org/alsa-doc/</uri>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Installation</title>
<section>
<title>Gentoo USE Flags</title>
<body>

<p>
Um Programme mit ALSA-Unterstützung zu kompilieren, fügen Sie <e>alsa</e> zu
Ihrer USE-Variablen hinzu.  Es gibt dennoch Tools, die Alsa noch nicht
unterstützen und OSS benötigen.  Alsa bietet eine OSS-Emulation an, wenn Sie
<e>oss</e> in Ihrer USE-Variable definieren, bevor Sie starten.
</p>

</body>
</section>


<section>
<title>Kernel Module</title>
<body>

<p>
Wenn Sie einen 2.4 Kernel verwenden, müssen Sie die Alsa Treiber separat vom 
Kernel erstellen. Wenn Sie einen 2.6 Kernel verwenden, dann haben Sie die 
Möglichkeit die ALSA Treiber enthalten im Kernel oder die, welche vom 
<c>alsa-driver</c> Paket geliefert werden, zu verwenden.
</p>

<p>
Zuerst müssen wir sicherstellen, dass unsere Kernel Konfiguration für den
Einsatz von ALSA vorbereitet ist. Dazu ist es notwendig, dass im Kernel der
Punkt "Sound Card Support" als Modul (M) einkompiliert wird. Dadurch wird das
Modul <c>soundcore.o</c> erstellt.
</p>

<note>
Wahrscheinlich wird es auch funktionieren, wenn "Sound Card Support" direkt in
den Kernel (Y) einkompiliert, anstatt es als Modul (M) zu bauen. Jedoch
empfiehlt die offizielle ALSA Dokumentation es als Modul (M) zu erstellen, da
ALSA beim Start versucht, das Modul zu laden.
</note>

<p>
Wenn Sie bereits eine funktionsfähige Kernel Konfiguration besitzen, sollten Sie
sicherstellen, dass alle anderen Soundkarten Treiber entfernt wurden, mit
Ausnahme des bereits erwähnten "Sound Card Support". Um nicht neu booten zu
müssen, empfiehlt sich folgendes Vorgehen:
</p>

<pre caption="Kernel Konfiguration">
# <i>cd /usr/src/linux</i>
# <i>cp .config ~</i>
# <i>make mrproper</i>
# <i>cp ~/.config .</i>
# <i>make menuconfig</i>
</pre>

<p>
Nun sollte <e>Sound Card Support</e> als Modul (M) ausgewählt und alle anderen 
Soundkarten Treiber abgewählt werden. Wenn Sie 2.6 mit den ALSA Modulen 
geliefert vom Kernel verwenden, dann wählen Sie auch die Treiber für Ihre 
Soundkarte aus (schauen Sie in den <uri link="#doc_chap2_sect3">ALSA 
Module</uri> Abschnitt weiter unten, wenn Sie Hilfe benötigen bei der Wahl des 
richtigen Treibers). Beenden Sie menuconfig und speichern Sie mit Y die Kernel 
Konfiguration. Danach erstellen Sie die Module mit: 
</p>

<pre caption="2.4 Kernel Konfiguration">
# <i>make dep clean</i>
# <i>make modules modules_install</i>
</pre>
<pre caption="2.6 Kernel Konfiguration">
 # <i>make</i>
 # <i>make modules_install</i>
 </pre>
 
 <p>
 Wenn Sie 2.6 mit dem vom Kernel gelieferten Modulen kompiliert haben, dann 
 fahren Sie bitte mit der <uri link="#doc_chap2_sect4">Konfiguration von 
 ALSA</uri> weiter unten fort.
 </p>
 
<p>
Die letzte Zeile stellt sicher, dass vor der Installation neuer Module die alten
überschrieben werden, auch die einer älteren ALSA Installation.
</p>

<impo>
Das bedeutet, dass JEDES MAL wenn der Kernel neu kompiliert wird,
<c>alsa-driver</c> ebenfalls neu kompiliert werden muss!
</impo>

</body>
</section>

<section>
<title>Das richtige ALSA Modul</title>
<body>

<p>
Nun wird es Zeit, die passenden ALSA Treiber für Ihre Soundkarte zu installieren. Wenn Ihre Soundkarte auf einem
PCI Steckplatz sitzt, kann der output von /proc/pci den Namen und Typ der Karte offenbaren:
</p>

<pre caption="Suche nach Soundkarteninformationen">
#<i>grep audio /proc/pci</i>
</pre>

<warn>
Sollten Sie zuvor ein anderes Audio System eingerichtet haben und Nicht-ALSA
Module sich noch im Speicher befinden, empfiehlt es sich, diese <e>jetzt</e> zu
entfernen. Überprüfen Sie mit <c>lsmod</c> Ihre geladenen Module und
entfernen Sie mit <c>rmmod</c> nicht mehr benötigte Treiber auf Ihrem System. 
Wenn <c>rmmod</c> sich beschwert, dass es die Module nicht entfernen kann, 
weil diese gerade im Gebrauch sind, dann versuchen Sie diese mit 
<c>/etc/init.c/alsasound stop</c> zu entfernen.
</warn>

<p>
Ein einfaches <c>emerge alsa-driver</c> würde <e>alle</e> ALSA Treiber
kompilieren und in das System einbinden.
</p>

<p>
Um jedoch Zeit zu sparen, empfiehlt es sich, den <e>Modul Namen</e> Ihrer
Soundkarte in der <uri link="http://www.alsa-project.org/alsa-doc">ALSA
Soundcard Matrix</uri> und folgend <e>Details</e> bei <e>Driver and Docs</e> in
der Spalte des Chipsatzes Ihrer Soundkarte nachzuschlagen. Bei mir handelt es
sich um das Modul <c>snd-emu10k1</c>, da ich eine SBlive! Soundkarte mit dem
<e>EMU10K!</e> Chipsatz besitze. Dann setzen Sie die ALSA_CARDS environment
Variable, bevor Sie emerge ausführen, sodass emerge nur die Treiber, die Sie
wirklich brauchen auch kompilieren wird. Bei mir sieht das folgendermaßen aus:
</p>

<pre caption="Kompilieren der richtigen Module">
# <i>env ALSA_CARDS='emu10k1' emerge alsa-driver</i>
</pre>

<note>
Sie können diese Variable auch in Ihrer <path>/etc/make.conf</path> speicher,
sodass Sie bei einem späteren neuen emerge einfach nur <c>emerge alsa-driver</c>
aufrufen brauchen.  Führen Sie z.B. <c>echo 'ALSA_CARDS="emu10k1"' &gt;&gt;
/etc/make.conf</c> aus.
</note>

<note>
Wenn Sie vorhaben, ALSA Treiber für mehr als eine Soundkarte zu installieren,
können diese durch ein Leerzeichen getrennt an ALSA_CARDS übergeben werden, z.B.
so:  <c>env ALSA_CARDS='emu10k1 intel8x0 ens1370' emerge alsa-driver</c>
</note>

<note>
Sollten Sie OSS Kompatibilität benötigen, so sollte "emerge <c>alsa-oss</c>"
ausgeführt werden, um den ALSA/OSS compatibility wrapper auf Ihrem System
einzurichten.
</note>

<note>
Wennn Sie planen, Ihren Kernel mehrmals neu zu kompileren, ist es sinnvoll
<c>alsa-driver</c> mit der emerge-Option <c>--buildpkg</c> zu kompilieren.
Dadurch erstellen Sie ein Binärpaket.  Nachdem Sie den Kernel neu kompiliert
haben, können Sie einfach <c>emerge --usepkg alsa-driver</c> ausführen, was das
Binärpaket installieren wird anstatt den Treiber neu zu kompilieren. Wenn 
'depmod -a' sich jemals darüber beschwert, dass die Soundtreiber "unreferenced 
symbols" enthalten, wenn Sie dies tun, dann müssen Sie das alsa-driver Paket 
von den Quellen aus neu kompilieren.
</note>

<p>
Mit diesen wenigen Handgriffen sollten die ALSA Module bereits auf Ihrem System
installiert sein.
</p>

</body>
</section>
<section>
<title>Konfiguration von ALSA</title>
<body>

<p>
Als nächstes sollten Sie die Konfiguration vornehmen, um ALSA sauber
einzurichten. Dazu müssen einige Konfigurationsdateien geändert werden, damit
Ihr System von den neu installierten Modulen auch Kenntnis nimmt.
</p>

<p>
Zuallererst installieren Sie die <c>alsa-utils</c> auf Ihrem System:
</p>

<pre caption="alsa-utils emergen">
# <i>emerge alsa-utils</i>
</pre>

<p>
Danach editieren Sie die Datei <path>/etc/modules.d/alsa</path>.
</p>

<warn>
Es ist nicht notwendig <path>/etc/modules.conf</path> zu modifizieren. Es
sollten immer die Dateien in <path>/etc/modules.d</path> bearbeitet werden 
und <c>modules-update</c> ausgeführt werden um <path>/etc/modules.conf</path> 
von den aktualisierten Daten zu erstellen. 
</warn>

<pre caption="Innerhalb von /etc/modules.d/alsa">
## and then run `modules-update' command.
## Read alsa-driver's INSTALL file in /usr/share/doc for more info.
##
##  ALSA portion
alias snd-card-0 snd-emu10k1
## alias snd-card-1 snd-intel8x0
## alias snd-card-2 snd-ens1370
##  OSS/Free portion
alias sound-slot-0 snd-card-0
## alias sound-slot-1 snd-card-1
## alias sound-slot-2 snd-card-2
##
</pre>

<p>
Natürlich sollten Sie hier darauf achten snd-emu10k1 durch den Namen des
richtigen Moduls für Ihre Soundkarte zu ersetzen.
</p>

<note>
Wenn Sie mehr als eine Soundkarte besitzen, fügen Sie weitere <c>snd-card</c>
und <c>snd-slot</c> Aliase hinzu und passen Sie den <c>cards_limit</c> Wert am
Ende der Datei an. Sie finden Beispiele für Konfigurationen mit zwei oder mehr
Soundkarten in <uri
link="http://www.alsa-project.org/alsa-doc/alsa-howto/c1660.htm">Kapitel 6</uri>
des <uri
link="http://www.alsa-project.org/alsa-doc/alsa-howto/alsa-howto.html">ALSA
Howto</uri>.
</note>

<p>
Als letztes sollten Sie noch sicherstellen, dass folgende Zeilen ganz am Ende
der Konfigurationsdatei vorhanden und unkommentiert sind:
</p>

<pre caption="am Ende von /etc/modules.d/alsa">
alias /dev/mixer snd-mixer-oss
alias /dev/dsp snd-pcm-oss
alias /dev/midi snd-seq-oss
</pre>

<p>
Führen Sie, nach erneuerter Überprüfung von <path>/etc/modules.d/alsa</path> 
um sicherzugehen, dass alles in Ordnung ist,  <c>modules-update</c> aus:
</p>

<pre caption="Ausführen von modules-update">
# <i>modules-update</i>
</pre>

<note>
Durch das Ausführen von <c>modules-update</c> werden die Daten von
<path>/etc/modules.d/alsa</path> in <path>/etc/modules.conf</path> geschrieben.
</note>

<p>
Nun sollten Sie sicherstellen, dass in /etc/devfsd.conf die ALSA Geräte korrekt
eingetragen und registriert sind.
</p>

<pre caption="/etc/devfsd.conf">
# ALSA/OSS stuff
# Comment/change these if you want to change the permissions on
# the audio devices
LOOKUP          snd          MODLOAD ACTION snd
LOOKUP          dsp          MODLOAD
LOOKUP          mixer        MODLOAD
LOOKUP          midi         MODLOAD
REGISTER        sound/.*     PERMISSIONS root.audio 660
REGISTER        snd/.*       PERMISSIONS root.audio 660
</pre>

<note>
Wie man sehen kann, werden von devfsd.conf die Zugriffe auf
<path>/dev/sound</path> auf <c>root.audio</c> beschränkt. Nicht root-user müssen
also in der Gruppe audio sein, um die Soundkarte auch zu hören.
</note>

</body>
</section>
</chapter>

<chapter>
<title>ALSA starten</title>
<section>
<title>Alsasound zu einem runlevel hinzufügen</title>
<body>

<p>
Ihnen wird ein Init Skript geliefert, welches alle notwendigen Soundtreiber 
für Ihre Karte installiert (inklusive OSS Unterstützungstreiber, wenn Sie 
USE=oss gesetzt haben). Nun sollten Sie daran gehen, ALSA beim booten auch zu 
starten. Dies geschieht mit einem: 
</p>

<pre caption="Hinzufügen von ALSA zum boot Runlevel">
# <i>rc-update add alsasound boot</i>
</pre>

<warn>
Das alsasound Skript gehört in den "boot" runlevel, und nicht in den
"default" runlevel!
</warn>

</body>
</section>
<section>
<title>Stummschaltung aufheben</title>
<body>

<p>
Da wir Linux User sind und Rebooten des Systems uncool ist, starten wir das
alsasound Skript von Hand:
</p>

<pre caption="Starten ALSA von Hand">
# <i>/etc/init.d/alsasound start</i>
</pre>

<p>
ALSA sollte jetzt laufen. Wenn alles ok ist, sollten beim Ausführen von
<c>lsmod</c> die ALSA Module angezeigt werden.  Allerdings bekommen Sie noch
keinen Ton zu hören, da die Kanäle noch stumm geschaltet sind. Um die
Einstellungen zu ändern, brauchen wir <c>amixer</c>.
</p>

<pre caption="amixer aufrufen">
# <i>amixer</i>
</pre>
<!-- alsasound init Skript wird dies nun für sie tun...
<warn>
Normalerweise sollte es gar nicht dazu kommen, aber <e>wenn</e> Sie eine
Fehlermeldung in der Art von "amixer: Mixer attach default error: No such file
or directory" bekommen, sollten Sie <c>snd-mixer-oss</c> und <c>snd-pcm-oss</c>
aus dem Speicher werfen und erneut laden. Danach sollte amixer noch einmal
aufgerufen werden.
</warn>

<pre caption="Nur bei Fehlermeldungen durch amixer">
# <i>modprobe snd-mixer-oss</i>
# <i>modprobe snd-pcm-oss</i>
# <i>amixer</i>
</pre>
-->
<p>
Wenn Sie nun so weit gekommen sind, sollten Sie die Stummschaltung der Master
und PCM Kanäle aufheben.  Manche Hardware verlangt, dass auch bei dem Center- und die
Surround-Kanäle die Stummschaltung aufgehoben wird.
</p>

<pre caption="Stummschaltung aufheben">
# <i>amixer set Master 100 unmute</i>
# <i>amixer set PCM 100 unmute</i>
<comment>Nur, falls das obige zu keinem Erfolg führte:</comment>
# <i>amixer set Center 100 unmute</i>
# <i>amixer set Surround 100 unmute</i>
<comment>Sound testen:</comment>
# <i>aplay $KDEDIR/share/sounds/pop.wav</i> <codenote>(pop.wav ist Bestandteil des KDE Paketes)</codenote>
</pre>

<p>
Um zu Überprüfen, ob der Ton funktioniert, benutzen wir den Befehl aplay (alsa
play). Wenn Sie einen Klang hören, dann arbeitet Ihre Soundkarte. Herzlichen
Glückwunsch! Um die Lautstärke an Ihre Bedürfnisse anzupassen, ist das
ncurses-basierte Paket <c>alsamixer</c> die richtige Wahl.
</p>

<p>
Wenn Sie Ihr System neu starten, wird das <e>alsasound</e> init Skript ihre
Lautstärkeeinstellungen sichern und korrekt wieder herstellen.
</p>

</body>
</section>
</chapter>

<chapter>
<title>MIDI Unterstützung</title>
<section>
<title>Hardware Synthesizer</title>
<body>

<p>
Einige Soundkarten (SBLive, Audigy, und andere) werden mit einem onboard MIDI 
Synthesizer geliefert. Um diesen zu verwenden, müssen sie zuerst das 
<c>awesfx</c> Paket installieren.
</p>

<pre caption="Installieren von awesfx">
# <i>emerge awesfx</i>
</pre>

<p>
Nun sollten Sie Ihre Sound Font in <path>/usr/share/sfbank/</path> plazieren. 
Sie können wahrscheinlich die Sound Fonts von Ihrer Windows Treiber CD für 
Ihre Soundkarte bekommen. Bei der SBLive ist unter den mitgelieferten Sound 
Fonts Dateien eine mit dem Namen 8MBGMSFX.SF2.
</p>

<note>
Bei einigen neueren CDs welche mit einer SBLive geliefert werden wird die 
Font Datei CT4GMSFX.SF2 genannt. Wenn dies der Fall ist, dann ersetzen Sie 
bitte alle Nennungen von 8MBGMSFX.SF2 mit CT4GMSFX.SF2 in den Beispielen.
</note>

<p>
Nach dem Kopieren der Sound Font, die Sie verwenden möchten, müssen Sie diese 
zur Verwendung mit <c>/usr/bin/sfxload</c> auswählen.
</p>

<pre caption="Auswählen der Sound Font">
# <i>/usr/bin/sfxload /usr/share/sfbank/8MBGMSFX.SF2</i>
</pre>

<note>
Sie möchten diesen Befehl vielleicht in /etc/conf.d/local.start plazieren oder 
im Startskript für Ihre Soundkarte (/etc/alsa.d/emu10k1) um sicherzustellen, 
dass es beim Start geladen wird.
</note>

</body>
</section>
<section>
<title>Timidity++ Virtueller Synthesizer</title>
<body>

<p>
Wenn Ihre Soundkarte ohne Hardware Synthesizer geliefert wird (oder Sie ihn 
nicht verwenden möchten), dann können Sie <c>timidity++</c> verwenden um Ihnen 
einen virtuellen Synthesizer zu liefern. Beginnen Sie mit dem emerge des Paketes:
</p>

<pre caption="Installieren von Timidity++">
# <i>emerge timidity++</i>
</pre>

<p>
Eine Beispielskonfigurationsdatei wird für Sie in 
<path>/usr/share/timitidy/config/timidity.cfg</path> installiert werden. Wenn 
Sie bis jetzt keine timidty++ Konfiguration haben, dann können Sie einfach 
diese verwenden.
</p>

<pre caption="Verwenden der Standard Timidty++ Konfigurationsdatei">
# <i>cp /usr/share/timidity/config/timidity.cfg /usr/share/timidity</i>
</pre>

<p>
Nun müssen Sie aktivieren, dass das Init Skript ausgeführt wird,wenn Ihr 
System gestartet wird und es auch auch jetzt aktivieren. 
</p>

<pre caption="Hinzufügen von timidity zum Standard Runlevel und jetzt starten">
# <i>rc-update add timidity default</i>
# <i>/etc/init.d/timidity start</i>
</pre>

<p>
Beachten Sie, dass es eine Konfigurationsdatei für das Init Skript gibt, 
welches Sie in <path>/etc/conf.d/timidity</path> verändern können 
und vernünftige Standardeinstellungen wurden für Sie gewählt.
</p>

</body>
</section>
<section>
<title>Testen der MIDI Unterstützung</title>
<body>

<p>
Sie können <c>pmidi</c> verwenden um Ihre MIDI Konfiguration zu testen. 
Um dies zu tun, müssen Sie dieses Paket zunächst installieren.
</p>

<pre caption="Installieren von pmidi">
# <i>emerge pmidi</i>
</pre>

<p>
Die '-l' Kommandozeilenoption an pmidi wird alle entdeckten MIDI Ausgangsports 
auflisten und '-p' kann verwendet werden um den für Wiedergabe verwendeten 
auszuwählen. Überprüfen Sie um festztustellen, welche MIDI Ausgangsports für 
Ihr System verfügbar sind:
</p>

<pre caption="Liste der Ports wenn der Hardware Synthesizer verwendet wird">
# <i>pmidi -l</i>
 Port     Client name                       Port name
 64:0     Rawmidi 0 - EMU10K1 MPU-401 (U    EMU10K1 MPU-401 (UART)
 65:0     Emu10k1 WaveTable                 Emu10k1 Port 0
 65:1     Emu10k1 WaveTable                 Emu10k1 Port 1
 65:2     Emu10k1 WaveTable                 Emu10k1 Port 2
 65:3     Emu10k1 WaveTable                 Emu10k1 Port 3
</pre>

<pre caption="Liste der Ports wenn Timidty++ verwendet wird">
# <i>pmidi -l</i>
 Port     Client name                       Port name
 64:0     Rawmidi 0 - ES1371                ES1371
128:0     TiMidity                          TiMidity port 0
128:1     TiMidity                          TiMidity port 1
128:2     TiMidity                          TiMidity port 2
128:3     TiMidity                          TiMidity port 3
</pre>

<p>
Versuchen Sie nun eine MIDI Datei abzuspielen um sicherzugehen, dass alles 
funktioniert:
</p>

<pre caption="Einen Song abspielen">
# <i>pmidi -p 65:0 Final\ Fantasy\ 7\ -\ Aerith\'s\ Theme.mid</i>
or
# <i>pmidi -p 128:0 Final\ Fantasy\ 7\ -\ Aerith\'s\ Theme.mid</i>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>Abschließende Bemerkungen</title>
<section>
<title>Nach Kernel Aktualisierungen</title>
<body>

<p>
Wenn Sie Ihren Kernel neu kompilieren oder auf einen aktuelleren Kernel
umsteigen, dann müssen Sie die ALSA Module ebenfalls neu kompilieren.
</p>

<p>
Auch wenn Sie alle Pakete: <c>alsa-driver</c>, <c>alsa-lib</c> und
<c>alsa-utils</c> installiert haben, ist es notwendig nur das erste Paket neu zu
kompilieren, da es die Module unter 
<path>/lib/modules/*/kernel/sound/pci/</path> ablegt.
</p>

<pre caption="Nötig nach jeder Kernel Neuerstellung:">
# <i>emerge alsa-driver</i>
</pre>

</body>
</section>
<section>

<title>alsa-tools und alsa-firmware</title>
 <body>
 
 <p>
Die alsa-tools und alsa-firmware Pakete enthalten Programme, welche hilfreich 
sind für Benutzer bestimmter Soundkarten. Die meisten Benutzer werden diese 
nicht benötigen. Wenn Sie alsa-tools benötigen, dann können Sie die 
Umgebungsvariable 'ALSA_TOOLS' setzen um nur die Werkzeuge, welche für Ihre 
Karte benötigt werden, zu installieren:
</p>

<pre caption="Installieren von alsa-tools">
# <i>env ALSA_TOOLS='as10k1 ac3dec' emerge alsa-tools</i>
</pre>

</body>
</section>
<section>
<title>Verwenden unterschiedlicher Versionen</title>
<body>
 
<p> 
Oft funktionieren unterschiedliche Versionen von <c>alsa-driver</c>, 
<c>alsa-lib</c>, <c>alsa-utils</c>, <c>alsa-tools</c>, und <c>alsa-oss</c> 
miteinander, aber es wird empfohlen, dass Sie versuchen die Versionen in 
Einklang zu halten.
</p>
  
</body> 
</section> 
<section>
<title>/etc/modules.autoload</title>
<body>

<p>
Um ALSA zu benutzen, muss diese Datei im Normalfall nicht modifiziert werden.
Nach ausführen von <c>rc-update add alsasound boot</c> wird das System die 
richtigen Module beim Start automatisch laden.
</p>

<!--
<p>
Es ist also nicht notwendig <c>snd-pcm-oss</c> oder <c>snd-mixer-oss</c> in
diese Datei einzufügen.  Für weitere Informationen oder häufige Fragen ist <uri
link="http://www.djcj.org/LAU/guide/alsbook/faq1.html">diese FAQ</uri> der
richtige Anlaufpunkt.
</p>
-->
</body>
</section>
<section>
<title>Bekannte Fehler</title>
<body>

<note>
Diese Anleitung hängt hinter der Alsa-Entwicklung hinterher.  Möglicherweise
wurden die Fehler schon längst beseitigt während Sie diese Zeilen hier lesen.
</note>

<ul>
  <li>
    Wenn Sie <b>viel Lärm</b> während der <b>OSS</b> Emulation hören, fügen Sie
    <e>options snd-pcm-oss dsp_map=1</e> in <path>/etc/modules.d/alsa</path>
    hinzu.
  </li>
</ul>

</body>
</section>

<section>
  <title>Aktivieren der Joystick Unterstützung</title>
<body>

<p>
Sollte Ihre Soundkarte einen Joystick-Stecker enthalten, sind Sie sicher daran
interessiert, die Unterstützung für Ihren Joystick einzuschalten. Zunächst
sollten Sie überprüfen, ob Ihr Soundkartentreiber einen Parameter für den
Joystick enthält. Sie können dies mit dem Befehl <c>modinfo</c> gegen
<path>snd-&lt;Ihr Chipsatz&gt;</path> ausführen. Als Beispiel für den
<c>snd-via82xx</c> Chipsatz:
</p>

 <pre caption="Ausführen von modinfo">
# <i>modinfo snd-via82xx</i>
filename:    /lib/modules/2.4.22-ck2/snd-via82xx.o
description: "VIA VT82xx audio"
author:      "Jaroslav Kysela &lt;perex@suse.cz&gt;"
license:     "GPL"
parm:        index int array (min = 1, max = 8), description "Index value for VIA 82xx bridge."
parm:        id string array (min = 1, max = 8), description "ID string for VIA 82xx bridge."
parm:        enable int array (min = 1, max = 8), description "Enable audio part of VIA 82xx bridge."
parm:        mpu_port long array (min = 1, max = 8), description "MPU-401 port. (VT82C686x only)"
<i>parm:        joystick int array (min = 1, max = 8), description "Enable joystick. (VT82C686x only)"</i>
parm:        ac97_clock int array (min = 1, max = 8), description "AC'97 codec clock (default 48000Hz)."
parm:        dxs_support int array (min = 1, max = 8), description "Support for DXS channels
             (0 = auto, 1 = enable, 2 = disable, 3 = 48k only, 4 = no VRA)"
 </pre>

<p>
Sollte in der Ausgabe der <c>joystick</c> Parameter auftreten, dann können Sie mit
<c>joystick=1</c>in der Zeile <c>options</c> der Datei <path>/etc/modules.d/alsa</path>
die Unterstützung aktivieren. Wieder ein Beispiel für <c>snd-via82xx</c>:
</p>

<pre caption="Hinzufügen der Joystick parameter">
alias snd-card-0 snd-via82xx
options snd-via82xx joystick=1
</pre>

</body>
</section>

<section>
<title>Noch mehr Links</title>
<body>

<p>
Für weitere Informationen rund um ALSA empfehle ich folgende Links:
</p>

<ul>
  <li><uri link="desktop.xml">Das Gentoo Linux Desktop Konfigurations Handbuch</uri></li>
  <li><uri link="http://www.alsa-project.org">ALSA Project Homepage</uri></li>
  <li><uri link="http://www.alsa-project.org/documentation.php3">ALSA Users Documentation</uri></li>
  <li><uri link="http://www.djcj.org">ALSA Howto's and FAQ's</uri></li>
  <li><uri link="http://tldp.org/HOWTO/Sound-HOWTO/index.html">Linux Sound HOWTO</uri></li>
  <li><uri link="http://linux-sound.org/">Sound and MIDI Software For Linux</uri></li>
</ul>

</body>
</section>
</chapter>
</guide>
