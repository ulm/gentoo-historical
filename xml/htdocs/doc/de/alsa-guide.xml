<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/alsa-guide.xml,v 1.32 2006/03/27 03:01:29 grahl Exp $ -->

<!-- English CVS Version: 1.65 -->

<guide link="/doc/de/alsa-guide.xml" lang="de">
<title>Gentoo Linux ALSA Guide</title>

<author title="Autor">
  <mail link="fox2mike@gentoo.org">Shyam Mani</mail>
</author>
<author title="Übersetzer">
  <mail link="christian.simon@hamburg.de">Christian Simon</mail>
</author>

<abstract>
Dieses Dokument hilft dem Benutzer dabei, ALSA unter Gentoo Linux zu installieren.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>2.11</version>
<date>2006-03-25</date>

<chapter>
<title>Einführung</title>
<section>
<title>Was ist ALSA?</title>
<body>

<p>
ALSA steht für <e>Advanced Linux Sound Architecture</e> und stellt
Audio- und MIDI- (<e>Musical Instrument Digital Interface</e>) Funktionalität
unter Linux zur Verfügung. ALSA ist das standardmäßige Sound-System im 2.6er-
Kernel und ersetzt damit OSS (<e>Open Sound System</e>), welches im
2.4er-Kernel verwendet wurde.
</p>

<p>
Zu ALSAs Hauptfeatures zählen ein effizienter Support für alle Arten von Audio-Schnittstellen
von Endverbraucher-Soundkarten bis hin zu Profi-Sound-Equipment,
voll modularisierte Treiber, SMP und Thread safety, Rückwärtskompatibilität
mit OSS und eine Bibliothek im user-space,<c>alsa-lib</c>, die Softwareentwicklung
zum Kinderspiel macht.
</p>

</body>
</section>
<section>
<title>ALSA unter Gentoo</title>
<body>

<p>
Eine von Gentoos Hauptstärken liegt darin, dem Benutzer eine maximale Kontrolle
darüber einzuräumen, wie das System installiert/konfiguriert ist. ALSA unter
Gentoo folgt dem gleichen Prinzip. Es gibt zwei Wege, ALSA-Unterstützung auf
Ihrem zu installieren und zum Laufen zu bringen. Im nächsten Kapitel werden
wir sie im Detail betrachten.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Installation von ALSA</title>
<section>
<title>Optionen</title>
<body>

<warn>
Die unten aufgeführten Methoden schließen einander aus. Sie können nicht ALSA
in den Kernel kompiliert haben und gleichzeitig<c>media-sound/alsa-driver</c>
benutzen. Es <e>wird</e> scheitern!
</warn>

<p>
Die zwei Optionen sind:
</p>

<ol>
  <li>
  ALSA aus dem Kernel heraus zu benutzen. Das ist die bevorzugte/empfohlene
  Methode.
  </li>
  <li>
  Gentoos <c>media-sound/alsa-driver</c> Paket verwenden.
  </li>
</ol>

<p>
Wir werden auf beide einen Blick werfen, bevor wir uns schließlich für eine
Methode entscheiden.
</p>

<p>
Fall Sie das vom Kernel zur Verfügung gestellte ALSA benutzen sollten, wären
das die Vor- und Nachteile:
</p>

<table>
<tr>
  <th>Kernel ALSA</th>
  <th>Vor- und Nachteile</th>
</tr>
<tr>
  <th>+</th>
  <ti>Ziemlich stabile Treiber sind im Kernel integriert.</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Eine einmalige Lösung, die keine wiederholten emerge-Vorgänge verlangt.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Es kann sich um etwas ältere Versionen handeln als bei <c>alsa-driver</c>.</ti>
</tr>
</table>

<p>
Falls Sie alsa-driver verwenden sollten:
</p>

<table>
<tr>
  <th>alsa-driver</th>
  <th>Vor- und Nachteile</th>
</tr>
<tr>
  <th>+</th>
  <ti>Die neusten Treiber aus dem ALSA Project.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Jede Neukompilierung des Kernes erfordert einen re-emerge von <c>alsa-driver</c>.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Bestimte Optionen in der Kernelkonfiguration müssen deaktiviert sein, um korrekt zu arbeiten.</ti>
</tr>
</table>

</body>
</section>
<section>
<title>Also...</title>
<body>

<p>
Der Hauptunterschied zwischen <c>alsa-driver</c> und dem im Kernel integrierten
ALSA ist der, dass <c>alsa-driver</c> normalerweise auf einem neueren Stand ist
als die Version im Kernel. Da das keinen allzu großen Unterschied macht,
sollten Sie ruhig das im Kernel integrierte ALSA verwenden; der Einfachheit
halber. Bevor sie irgendwelche Sound-bedingten Probleme an <uri
link="https://bugs.gentoo.org">Gentoo Bugzilla</uri> melden, versuchen Sie bitte
das Problem zu reproduzieren, indem sie <c>alsa-driver</c> verwenden und reichen
Sie den Bug Report ein, egal was das Resultat gewesen sein mag.
</p>

</body>
</section>
<section id="lspci">
<title>Bevor Sie fortfahren</title>
<body>

<p>
Für welche Methode Sie sich auch entschieden haben mögen, Sie müssen wissen,
welche Treiber Ihre Soundkarte verwendet. Meistens sind Soundkarten (onboard
und andere) PCI-basiert. <c>lspci</c> wird Ihnen dabei helfen, die richtigen
Informationen herauszufinden. Bitte <c>emerge sys-apps/pciutils</c> eingeben,
um <c>lspci</c> zu bekommen, fall es nicht schon installiert ist. Falls Sie
eine USB-Soundkarte haben, könnte <c>lsusb</c> aus <c>sys-apps/usbutils</c>
<e>eventuell</e> hilfreich sein. Für ISA-Karten probieren Sie die
<c>sys-apps/isapnptools</c> aus. Ebenso <e>könnten</e> die folgenden Seiten
Benutzern mit ISA-basierten Soundkarten helfen.
</p>

<ul>
  <li>
  <uri link="http://www.roestock.demon.co.uk/isapnptools/">The ISAPNPTOOLS
  Page</uri>
  </li>
  <li>
  <uri link="http://www2.linuxjournal.com/article/3269">LinuxJournal PnP
  Article</uri>
  </li>
  <li>
  <uri link="http://www.tldp.org/HOWTO/Sound-HOWTO/x320.html">TLDP Sound
  HowTo</uri>
  </li>
</ul>

<note>
Der leichteren Benutzung/Erklärung halber gehen wir im Rest dieses Guides davon aus,
dass Sie eine PCI-basierte Soundkarte haben.
</note>

<p>
Wir fahren jetzt damit fort Details über die Soundkarte herausfinden.
</p>

<pre caption="Details über die Soundkarte">
# <i>lspci -v | grep -i audio</i>
0000:00:0a.0 Multimedia audio controller: Creative Labs SB Live! EMU10k1 (rev 06)
</pre>

<p>
Wir wissen jetzt, dass die Soundkarte in dieser Maschine eine Sound Blaster
Live! ist und dass der Kartenhersteller Creative Labs ist. Gehen Sie zur Seite
<uri link="http://www.alsa-project.org/alsa-doc/"> ALSA Soundcard Matrix</uri>
und wählen Sie Creative Labs aus dem Dropdown-Menü aus. Sie werden zur
Creative Labs Matrix-Seite weitergeleitet, wo Sie dann sehen können, dass SB
Live! das Modul <c>emu10k1</c> verwendet. Das ist die Information, die wir
fürs erste brauchen. Fall Sie Interesse an detaillierten Informationen haben,
können Sie auf den Link "Details" klicken, was Sie zur
<c>emu10k1</c>-spezifischen Seite bringen wird.
</p>

</body>
</section>
<section id="kernel">
<title>ALSA aus dem Kernel heraus verwenden</title>
<body>

<p>
Wenn Sie wie ich ein Mensch sind, der die Dinge einfach halten möchte, dann
sollten Sie diesen Weg gehen.
</p>

<note>
Seit dem Release 2005.0 ist der 2.6er-Kernel der Standard-Kernel unter Gentoo
Linux. Wenn Sie nicht explizit ein 2.4er-Profil verwenden, steht auf den
<e>meisten</e> Architekturen <c>gentoo-sources</c> für einen 2.6-Kernel. Bitte
überprüfen Sie, ob Ihr Kernel ein Kernel der 2.6er-Serie ist. Diese Methode
wird mit einem 2.4er-Kernel <e>nicht</e> funktionieren.
</note>

<p>
Wir wollen jetzt den Kernel konfigurieren und ALSA aktivieren.
</p>

<impo>
<c>genkernel</c> - Benutzer sollten nun <c>genkernel --menuconfig all</c>
starten und dann den Anweisungen in <uri link="#doc_chap2_pre3">Kerneloptionen
für ALSA</uri> folgen.
</impo>

<pre caption="In die Quellen wechseln">
# <i>cd /usr/src/linux</i>
# <i>make menuconfig</i>
</pre>

<note>
Das obige Beispiel nimmer an, dass <path>/usr/src/linux</path> ist ein
symoblischer Link, der auf die Kernel-Quellen verweist, die sie verwenden
wollen. Stellen Sie das bitte sicher, bevor Sie weiterfahren.
</note>

<p>
Jetzt schauen wir uns einige der Optionen an, die wir aktivieren müssen,
um angemessene ALSA-Unterstützung für unsere Soundkarte im 2.6er-Kernel zu haben.
</p>

<p>
Bitte nehmen Sie zum Zwecke der Vereinfachung zur Kenntnis, dass alle Beispiele
zeigen, wie ALSA als Module kompiliert werden. Es ist empfohlen, dem Beispiel zu
folgen, weil es uns erlaubt, <c>alsaconf</c> zu verwenden, was für die
Konfiguration Ihrer Karte ein Segen ist. Bitte überspringen Sie <e>nicht</e>
das <uri link="#alsa-config">Konfigurationskapitel</uri> dieses Dokuments. Falls
Sie Optionen fest einkompiliert haben wollen, dann stellen Sie sicher,
dass Sie die Änderungen entsprechend an Ihrer Konfiguration vornehmen.
</p>

<pre caption="Kerneloptionen für ALSA">
Device Drivers  ---&gt;
   Sound  ---&gt;

<comment>(Das muss aktiviert sein)</comment>
&lt;M&gt; Sound card support

<comment>(Stellen Sie sicher, dass OSS deaktiviert ist)</comment>
Open Sound System   ---&gt;
   &lt; &gt; Open Sound System (DEPRECATED)

<comment>(Gehen Sie einen Schritt zurück und gehen Sie zu ALSA)</comment>
Advanced Linux Sound Architecture  ---&gt;
   &lt;M&gt; Advanced Linux Sound Architecture
   <comment>(Select this if you want MIDI sequencing and routing)</comment>
   &lt;M&gt; Sequencer support
   <comment>(Old style /dev/mixer* and /dev/dsp* support. Recommended.)</comment>
   &lt;M&gt; OSS Mixer API
   &lt;M&gt; OSS PCM (digital audio) API 

<comment>(Sie haben jetzt die Wahl, für welche Geräte Sie Support aktivieren wollen. Für gewöhnlich 
haben Sie nur einen Gerätetyp und nicht mehr. Wenn Sie mehr als eine Soundkarte haben, aktivieren Sie sie hier alle bitte)</comment>

<comment>(Meistens zum Ausprobieren und für Entwicklungszwecke, nicht notwendig für normale Benutzer, es sei denn Sie
wissen, was Sie tun)</comment>
Generic devices  ---&gt;
   
<comment>(Für ISA Soundkarten)</comment>
ISA devices   ---&gt;
<comment>(FALLS Sie die Gravis haben, würden Sie dieses Option auswählen)</comment>
   &lt;M&gt; Gravis UltraSound Extreme

<comment>(Gehen Sie eine Seite zurück und dann zu den PCI devices. Die meisten Soundkarten heute sind PCI-Karten)</comment>
PCI devices   ---&gt;
   <comment>(We now select the emu10k1 driver for our card)</comment>
   &lt;M&gt; Emu10k1 (SB Live!, Audigy, E-mu APS)
   <comment>(Or an Intel card would be)</comment>
   &lt;M&gt; Intel/SiS/nVidia/AMD/ALi AC97 Controller
   <comment>(Or if you have a VIA Card)</comment>
   &lt;M&gt; VIA 82C686A/B, 8233/8235 AC97 Controller

<comment>(Gehen Sie eine Seite zurück und für den Fall, dass Sie eine USB-Soundkarte haben, gehen Sie zu)</comment>
USB Devices   ---&gt;
</pre>

<p>
Jetzt da Sie Ihre Optionen eingestellt haben, können Sie den Kernel
(re)kompilieren, und die ALSA-Unterstützung sollte  verfügbar sein, sobald
Sie den Kernel rebootet haben. Vergessen Sie nicht Ihre GRUB Konfiguration
zu aktualisieren, so dass der neu erstellte Kernel verwendet wird. Sie können
jetzt mit den <uri link="#alsa-utilities">ALSA Utilities</uri> weitermachen,
um zu schauen, ob alles so funktioniert, wie es sollte.
</p>

</body>
</section>
<section id="alsa-driver">
<title>Das Paket ALSA Driver verwenden</title>
<body>

<p>
Jetzt haben Sie sich also dazu entschlossen, <c>alsa-driver</c> zu verwenden.
Dann wollen wir mal anfangen. Es gibt ein paar geringfügige Dinge, die
erledigt werden müssen, um zu gewährleisten, dass nur die Treiber für Ihre
Soundkarte kompiliert werden. Obwohl das nicht wirklich notwendig ist,
schließt es doch die unnötigen Treiber aus, die andernfalls kompiliert würden.
</p>

<p>
Falls Sie keine Ahnung haben, welche Treiber Ihre Soundkarte braucht, schauen
Sie sich bitte das <uri link="#lspci">lspci</uri> Kapitel in diesem Guide an.
Sobald Sie den Namen Ihres Treiber herausgefunden haben (<c>emu10k1</c> in
unserem Beispiel), editieren Sie <path>/etc/make.conf</path> und fügen Sie
die Umgebungsvariable <c>ALSA_CARDS</c> hinzu.
</p>

<pre caption="Adding ALSA_CARDS to make.conf">
<comment>(Für eine Soundkarte)</comment>
ALSA_CARDS="emu10k1"
<comment>(Für mehr als eine mit Leerzeichen getrennte Namen)</comment>
ALSA_CARDS="emu10k1 via82xx"
</pre>

<p>
Falls Sie Ihren Kernel kompiliert haben und <c>alsa-driver</c> verwenden wollen,
stellen Sie bitte das Folgende sicher, bevor Sie weiterfahren,
andernfalls wird <c>alsa-driver</c> wahrscheinlich scheitern.
Das nächste Listing zeigt Ihnen, wie Sie die Überprüfungen vornehmen.
</p>

<note>
Benutzer von <c>genkernel</c> können mit <uri link="#doc_chap2_pre6">
Installation von Alsa-Driver</uri> fortfahren, da Ihre Konfiguration
standardmäßig synchron zu der unten abgebildeten ist.
</note>

<ol>
  <li>
  <c>CONFIG_SOUND</c> ist gesetzt. (Basic Sound-Support aktiviert)
  </li>
  <li>
  <c>CONFIG_SOUND_PRIME</c> ist nicht gesetzt. (Eingebauter OSS-Support deaktiviert)
  </li>
  <li>
  <c>CONFIG_SND</c> ist nicht gesetzt. (Eingebauter ALSA-Support deaktiviert)
  </li>
  <li>
  <path>/usr/src/linux</path> zeigt auf den Kernel, mit dem ALSA arbeiten soll.
  </li>
</ol>

<pre caption=".config checks">
<comment>(Angenommen, dass der symoblische Link linux auf den richtigen Kernel zeigt)</comment>
# <i>cd /usr/src/linux</i>
# <i>grep SOUND .config</i>
<comment>(1. ist wahr)</comment>
CONFIG_SOUND=y
<comment>(2. ist wahr)</comment>
CONFIG_SOUND_PRIME is not set
# <i>grep SND .config</i>
<comment>(und 3. ist wahr)</comment>
CONFIG_SND is not set
</pre>

<p> 
Jetzt müssen Sie nur noch die magischen Wort eingeben ...
und nein, sie lauten nicht Abracadabra.
</p>

<pre caption="Installation von Alsa-Driver">
# <i>emerge alsa-driver</i>
</pre>

<impo>
Bitte nehmen Sie zur Kenntnis, dass Sie <c>emerge alsa-driver</c> nach jeder
(Re)Kompilierung des Kernels starten müssen, da die frühere Version gelöscht wird.
</impo>

</body>
</section>
</chapter>

<chapter>
<title>Konfiguration/Ausprobieren von ALSA</title>
<section id="alsa-utilities">
<title>ALSA Utilities</title>
<body>

<p>
Die <c>alsa-utils</c> bilden einen wesentlichen Bestandteil von ALSA,
da sie einen Wagenladung von Programmen beinhalten, die hochgradig
nützlich sind, was auch die ALSA Initskripte einschließt. Daher empfehlen
wir wärmstens die Installation von <c>alsa-utils</c>.
</p>

<pre caption="Installation von alsa-utils">
# <i>emerge alsa-utils</i>
</pre>

<note>
Wenn Sie ALSA in Ihrem <uri link="#kernel">Kernel</uri> aktiviert haben
<e>und</e> ALSA nicht als Module kompiliert haben, fahren Sie bitte mit
dem Kapitel <uri link="#initscript">ALSA Initskript</uri> fort. Die anderen
müssen ALSA konfigurieren. Das wird durch die Existenz des Tools
<c>alsaconf</c> aus den <c>alsa-utils</c> recht leicht gemacht.
</note>

</body>
</section>
<section id="alsa-config">
<title>Konfiguration</title>
<body>

<note>
Bitte beenden Sie Programme, die während des Ausführens von <c>alsaconf</c>
auf die Soundkarte zugreifen <e>könnten</e>.
</note>

<p>
Der leichteste Weg, Ihre Soundkarte zu konfigurieren, ist <c>alsaconf</c> zu
starten. Tippen Sie einfach <c>alsaconf</c> in einer Shell as root ein.
</p>

<pre caption="Aufrufen von alsaconf">
# <i>alsaconf</i>
</pre>

<p>
Sie werden jetzt ein schickes menügesteuertes Interface sehen, das automatisch
Ihre Geräte abfragen wird und Ihre Soundkarte herausfinden wird. Sie werden
gebeten, Ihre Soundkarte aus einer Liste auszuwählen. Sobald das erledigt ist,
wird es Sie um die Berechtigung bitten, automatisch die notwendigen Änderungen
an <path>/etc/modules.d/alsa</path> vorzunemen. Dann wird es Ihre Lautstärke
optimal einstellen. Starten Sie <c>modules-update</c> und starten Sie den
Dienst <path>/etc/init.d/alsasound</path>. Sobald <c>alsaconf</c> beendet ist,
können Sie mit dem ALSA-Initskript fortfahren. 
</p>

</body>
</section>
<section id="initscript">
<title>ALSA Initskript</title>
<body>

<p>
Wir sind fast fertig. Für welche Methode, Sie sich auch für die Installation
von ALSA entschieden haben, Sie brauchen etwas, um Ihre Module zu laden oder
ALSA zu initialisieren und und Ihre Lautstärkeeinstellungen zu setzen, wenn
Ihr System hochfährt. Das ALSA-Initskript kümmert sich um all das für Sie
und heißt <c>alsasound</c>. Fügen Sie es zum Runlevel boot hinzu.
</p>

<pre caption="ALSA zum boot Runlevel hinzufügen">
# <i>rc-update add alsasound boot</i>
 * alsasound added to runlevel boot
 * rc-update complete.
</pre>

<p>
Als nächstes überprüfen Sie die Datei <path>/etc/conf.d/alsasound</path> und
stellen Sie sicher, dass die Umgebungsvariable SAVE_ON_STOP auf yes gesetzt
ist. Das speichert Ihre Sound-Einstellungen, wenn sie das System herunterfahren.
</p>

</body>
</section>
<section>
<title>Die Audio Group</title>
<body>

<p>
Bevor wir zum Ausprobieren weitergehen, gibt es noch eine letzte
<e>wichtige</e> Sache, die eingerichtet werden muss. Daumenregel in einem
*nix Betriebssystem: Arbeite nicht als root, es sei denn, es ist nötig.
Das gilt auch hier ;) Wie? Tja, die meiste Zeit sollten Sie als ein User
einloggen, wenn Sie gerne Musik hören wollen oder auf Ihre Soundkarte
zugreifen wollen. Damit das möglich ist, müssen Sie sich in der "audio"-Group
befinden. Hier werden wir Benutzer in die Audio Group hinzufügen, so dass
Ihnen keine Probleme widerfahren, wenn sie auf Sound-Geräte zugreifen. Wir
werden hier <c>gpasswd</c> verwenden und dafür müssen Sie als root eingeloggt sein.
</p>

<pre caption="User zur Audio Group hinzufügen">
<comment>(Ersetzen Sie &lt;username&gt; Durch Ihren Benutzer)</comment>
# <i>gpasswd -a &lt;username&gt; audio </i>
Adding user &lt;username&gt; to group audio
</pre>

</body>
</section>
<section>
<title>Volume Check!</title>
<body>

<p>
Wir sind jetzt mit allem fertig, also bringen wir ALSA hoch. Falls Sie
<c>alsaconf</c> laufen gelassen haben, können Sie diesen Schritt überspringen,
da <c>alsaconf</c> das bereits für Sie gemacht hat.
</p>

<pre caption="Starten des Dienstes">
<comment>(ALSA als Module)</comment>
# <i>/etc/init.d/alsasound start</i>
 * Loading ALSA modules ...
 * Loading: snd-card-0 ...        [ ok ]
 * Loading: snd-pcm-oss ...       [ ok ]
 * Loading: snd-seq ...           [ ok ]
 * Loading: snd-emu10k1-synth ... [ ok ]
 * Loading: snd-seq-midi ...      [ ok ]
 * Restoring Mixer Levels ...     [ ok ]
<comment>(ALSA einkompiliert)</comment>
# <i>/etc/init.d/alsasound start</i>
 * Loading ALSA modules ...
 * Restoring Mixer Levels ...     [ ok ]
</pre>

<p>
Jetzt, da wir uns um die erforderlichen Dinge gekümmert haben, müssen wir
die Lautstärke überprüfen, da sie in bestimmten Fällen auf stumm geschaltet ist.
Dafür verwenden wir <c>alsamixer</c>.
</p>

<pre caption="Starten von alsamixer">
<comment>(Öffnen Sie eine Konsole. Nur die benötigten Einstellungen werden gezeigt)</comment>
# <i>alsamixer</i>
</pre>

<impo>
Falls Sie Probleme haben sollten, <c>alsamixer</c> zu starten und
Fehlermeldungen erhalten wie alsamixer: function snd_ctl_open failed for
default: No such file or directory, ist das gewöhnlich ein Problem mit dem
Einrichten der Geräte von udev. Lassen Sie <c>killall udevd; udevstart</c>
laufen, um die Einträge in<path>/dev</path> neu zu laden und starten Sie
<c>alsamixer</c>. Das sollte das Problem beheben.
</impo>

<p>
So <e>könnte</e> sich der ALSA Mixer beim ersten Start zeigen. Achten Sie
auf die Master- und PCM-Kanäle, die ein MM unter sich stehen haben.
Das bedeutet, dass sie stummgeschaltet sind. Falls Sie versuchen, etwas
abzuspielen, während <c>alsamixer</c> in diesem Zustand ist, werden Sie
überhaupt nichts über Ihre Lautsprecher hören.
</p>

<figure link="http://www.gentoo.org/images/docs/alsa-mixermuted.png" short="AlsaMixer Muted" caption="The Alsa Mixer Main Window, Muted"/>

<p>
Jetzt werden wir die Kanäle stumm schalten und die Lautstärkeregler nach
unseren Bedürfnissen einstellen.
</p>

<warn>
Sowohl Master <e>als auch</e> PCM müssen zunächst auf stumm geschaltet und
dann auf Werte im hörbaren Bereich geschaltet sein, wenn Sie auf Ihren
Lautsprechern etwas hören wollen.
</warn>

<ul>
  <li>
    Um zwischen den Kanälen zu wechseln, verwenden Sie die Pfeiltasten für
    rechts und links. (&lt;- &amp; -&gt;)
  </li>
  <li>
   Um stumm zu schalten, gehen Sie zu dem gewünschten Kanal, z. B. Master
    und drücken Sie die <e>m</e>-Taste.
  </li>
  <li>
    Um die Lautstärke zu verstärken oder zu verringern, verwenden Sie die
    Pfeiltasten für hoch und runter. 
  </li>
</ul>

<note>
Seien Sie vorsichtig beim Einstellen des Bass und des Trebles. 50 ist für
gewöhnlich für beides ein guter Wert. Extrem hohe Werte für den Bass können
bei Lautsprechern, die nicht dafür ausgelegt sind, zu <e>Misstönen</e> führen.
</note>

<p>
Wenn Sie fertig sind, sollte Ihr ALSA-Mixer ähnlich wie der unten abgebildete
aussehen. Für optimale Einstellungen, beachten Sie die 00 statt der MM sowie
die Lautstärken.
</p>

<figure link="http://www.gentoo.org/images/docs/alsa-mixerunmuted.png" short="AlsaMixer Unmuted" caption="Alsa Mixer ready to roll"/>

</body>
</section>
<section>
<title>Sound Check!</title>
<body>

<p>
Endlich. Musik. Wenn alles oben perfekt war, sollten Sie jetzt gute Musik
hören. Ein schneller Weg, um das auszuprobieren, ist die Verwendung eines
Kommandozeilentools wie <c>media-sound/madplay</c>. Sie können auch etwas
Bekannteres wie <c>mpg123</c> oder <c>xmms</c> verwenden. Falls Sie ein
Ogg-Fan sind können Sie <c>ogg123</c> aus <c>media-sound/vorbis-tools</c>
benutzen. Sie können jeden Player verwenden, mit dem Sie sich auskennen.
Verwenden Sie <c>emerge</c> für alles, was Sie brauchen.
</p>

<pre caption="Die Software holen">
<comment>(Installieren Sie die Anwendungen, die Sie wollen)</comment>
# <i>emerge madplay mpg123 xmms</i>
<comment>(Um .ogg-Dateien abzuspielen)</comment>
# <i>emerge vorbis-tools</i>
</pre>

<p>
Und dann spielen Sie Ihren Lieblingstitel...
</p>

<pre caption="Musik abspielen">
# <i>madplay -v /mnt/shyam/Music/Paul\ Oakenfold\ -\ Dread\ Rock.mp3</i>
MPEG Audio Decoder 0.15.2 (beta) - Copyright (C) 2000-2004 Robert Leslie et al.
          Title: Dread Rock
         Artist: Paul Oakenfold
          Album: Matrix Reloaded
           Year: 2003
          Genre: Soundtrack
                 Soundtrack
 00:04:19 Layer III, 160 kbps, 44100 Hz, joint stereo (MS), no CRC

# <i>ogg123 Paul\ Oakenfold\ -\ Dread\ Rock.ogg</i>
Audio Device:   Advanced Linux Sound Architecture (ALSA) output

Playing: Paul Oakenfold - Dread Rock.ogg
Ogg Vorbis stream: 2 channel, 44100 Hz
Genre: Soundtrack
Transcoded: mp3;160
Title: Dread Rock
Artist: Paul Oakenfold
Date: 2003
Album: Matrix Reloaded
Time: 00:11.31 [04:28.75] of 04:40.06  (200.6 kbps)  Output Buffer  96.9%
</pre>

</body>
</section>
<section>
<title>ALSA und USE</title>
<body>

<p>
Sie können jetzt das <c>alsa</c> USE-Flag in der <path>/etc/make.conf</path>
hinzufügen, um sicherzustellen, dass Ihre Programme mit ALSA-Unterstützung
kompiliert werden. Bei einigen Architekturen wie x86 und amd64 ist das Flag
standardmäßig gesetzt.
</p>

</body>
</section>
<section>
<title>Probleme?</title>
<body>

<p>
Falls Sie aus irgend einem Grund keinen Ton hören sollten, sollten Sie als
erstes Ihre <uri link="#doc_chap3_pre6">alsamixer</uri> - Einstellungen
überprüfen. 80% der Probleme gehen auf stummgeschaltete Kanäle oder zu
geringe Lautstärke zurück. Überprüfen Sie ebenso das Sound-Applet in Ihrem Window
Manager und stellen Sie sicher, dass die Lautstärkeregler im hörbaren Bereich stehen.
</p>

<p>
<path>/proc</path> ist Ihr Freund. Und in diesem Fall ist <path>/proc/asound</path>
Ihr bester Freund. Wir werden einen kurzen Blick darauf werfen, wie viel Information
uns hier geboten wird.
</p>

<pre caption="Fun with /proc/asound">
<comment>(Soweit erstmal: wenn  /proc/asound/cards Ihre Soundkarte anzeigt, hat ALSA Ihre Soundkarte richtig erkannt.)</comment>
# <i>cat /proc/asound/cards</i>
0 [Live           ]: EMU10K1 - Sound Blaster Live!
                     Sound Blaster Live! (rev.6, serial:0x80271102) at 0xb800, irq 11

<comment>(Falls Sie so wie ich ALSA aus dem Kernel heraus laufen lassen und sich fragen, wie weit Sie hinter 
alsa-driver zurückliegen, zeigt dies die gegenwärtig laufende ALSA-Version an)</comment>
# <i>cat /proc/asound/version</i>
Advanced Linux Sound Architecture Driver Version 1.0.8 (Thu Jan 13 09:39:32 2005 UTC).

<comment>(Details für ALSA OSS-Emulation)</comment>
# <i>cat /proc/asound/oss/sndstat</i>
Sound Driver:3.8.1a-980706 (ALSA v1.0.8 emulation code)
Kernel: Linux airwolf.zion 2.6.11ac1 #2 Wed May 4 00:35:08 IST 2005 i686
Config options: 0

Installed drivers:
Type 10: ALSA emulation

Card config:
Sound Blaster Live! (rev.6, serial:0x80271102) at 0xb800, irq 11

Audio devices:
0: EMU10K1 (DUPLEX)

Synth devices: NOT ENABLED IN CONFIG

Midi devices:
0: EMU10K1 MPU-401 (UART)

Timers:
7: system timer

Mixers:
0: SigmaTel STAC9721/23
</pre>

<p>
Die zweithäufigste Problemquelle für Benutzer ist der gefürchtete "Unknown
symbol in module" Fehler. Dies ist ein Beispiel von diesem Fehler:
</p>

<pre caption="Fehler: Unknown Symbol in module">
# <i>/etc/init.d/alsasound start</i>
 * Loading ALSA modules ...
 *   Loading: snd-card-0 ...                                              [ ok ]
 *   Loading: snd-pcm-oss ...
WARNING: Error inserting snd_mixer_oss
(/lib/modules/2.6.12-gentoo-r6/kernel/sound/core/oss/snd-mixer-oss.ko): Unknown
symbol in module, or unknown parameter (see dmesg) FATAL: Error inserting
snd_pcm_oss
(/lib/modules/2.6.12-gentoo-r6/kernel/sound/core/oss/snd-pcm-oss.ko): Unknown
symbol in module, or unknown parameter (see dmesg)                             
                                                                          [ !! ]
 *   Loading: snd-mixer-oss ...
FATAL: Error inserting snd_mixer_oss
(/lib/modules/2.6.12-gentoo-r6/kernel/sound/core/oss/snd-mixer-oss.ko): Unknown
symbol in module, or unknown parameter (see dmesg)                             
                                                                          [ !! ]
 *   Loading: snd-seq ...                                                 [ ok ]
 *   Loading: snd-emu10k1-synth ...                                       [ ok ]
 *   Loading: snd-seq-midi ...                                            [ ok ]
 * Restoring Mixer Levels ...                                             [ ok ]
</pre>

<p>
Wenn Sie, wie empfohlen, einen Blick auf <c>dmesg</c> werfen, werden Sie sehr
wahrscheinlich folgendes sehen:
</p>

<pre caption="dmesg Ausgabe">
<comment>(Nur relevante Auszüge folgen)</comment>
# <i>dmesg | less</i>
ACPI: PCI Interrupt 0000:02:06.0[A] -> Link [APC3] -> GSI 18 (level, low) -> IRQ 209
snd_mixer_oss: Unknown symbol snd_unregister_oss_device
snd_mixer_oss: Unknown symbol snd_register_oss_device
snd_mixer_oss: Unknown symbol snd_mixer_oss_notify_callback
snd_mixer_oss: Unknown symbol snd_oss_info_register
snd_pcm_oss: Unknown symbol snd_unregister_oss_device
snd_pcm_oss: Unknown symbol snd_register_oss_device
snd_pcm_oss: Unknown symbol snd_mixer_oss_ioctl_card
snd_pcm_oss: Unknown symbol snd_oss_info_register
snd_mixer_oss: Unknown symbol snd_unregister_oss_device
snd_mixer_oss: Unknown symbol snd_register_oss_device
snd_mixer_oss: Unknown symbol snd_mixer_oss_notify_callback
snd_mixer_oss: Unknown symbol snd_oss_info_register
</pre>

<p>
Die obige Problematik wird durch einen Wechsel von <c>alsa-driver</c> zu
im-Kernel ALSA verursacht, da, wenn Sie <c>alsa-driver</c> mit emerge
deinstallieren, die Moduldateien wegen Konfigurationsschutz nicht entfernt
werden. Wenn Sie also auf im-Kernel Treiber wechseln, gibt Ihnen
<c>modprobe</c> einen Mix von <c>alsa-driver</c> und im-Kernel Modulen und
löst daher den obigen Fehler aus.
</p>

<p>
Die Lösung ist ziemlich einfach: Wir müssen nur das Probleme verursachende
Verzeichnis manuell löschen, nachdem Sie <c>alsa-driver</c> mit emerge
deinstalliert haben. Achten Sie darauf, dass Sie die korrekte Kernelversion
und nicht die momentane verwenden!
</p>

<pre caption="Entfernen der alsa-driver Module">
<comment>(Ersetzen Sie KERNELVER mit Ihrer Kernelversion)</comment>
# <i>rm -rf /lib/modules/KERNELVER/alsa-driver</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Andere Dinge unter ALSA</title>
<section>
<title>Einrichten der MIDI-Unterstützung</title>
<body>

<p>
Wenn Ihre Soundkarte zu denen gehört, die mit einem Onboard-MIDI-Synthesizer
ausgeliefert werden und Sie sich gerne .mid-Dateien anhören wollen, müssen Sie
<c>awesfx</c> installieren. Dabei handelt es sich um Grunde genommen um eine
Reihe von Dienstprogrammen für die Kontrolle des AWE32-Treiber. Als erstes
müssen wir es installieren. Falls Sie keinen Hardware-Synthesizer haben,
können Sie einen virtuellen verwenden. Bitte schlagen Sie im Kapitel über
<uri link="#vsynth">Virtuelle Synthesizer</uri> für mehr Informationen nach.
</p>

<pre caption="Installation von awesfx">
# <i>emerge awesfx</i>
</pre>

<note>
Sie werden SoundFont (SF2)-Dateien von der Treiber-CD Ihrer Soundkarte oder
einer Windows-Installation nach <path>/usr/share/sounds/sf2/</path>
herüberkopieren müssen. Zum Beispiel wäre eine Soundfond-Datei für die
Creative SBLive! 8MBGMSFX.SF2.
</note>

<p>
Nachdem Sie die Soundfont-Datein herüberkopiert haben, können wir wie unten
gezeigt eine MIDI-Datei abspielen. Sie können aus das  <c>asfxload</c>-Kommando
zu <path>/etc/conf.d/local.start</path> hinzufügen, so dass der Soundfont bei
jedem Systemstart geladen wird.
</p>

<note>
Der <path>/mnt</path>-Pfad, der im Code-Listing unten verwendet wird, wird auf
Ihrer Maschine<e>nicht</e> der gleiche sein. Es ist nur ein Beispiel. Geben Sie
bitte darauf Acht, den Pfad an Ihre Maschine anzupassen.
</note>

<pre caption="Laden von Soundfonts">
<comment>(Als erstes kopieren Sie den Soundfont)</comment>
# <i>cp /mnt/win2k/Program\ Files/CreativeSBLive2k/SFBank/8MBGMSFX.SF2 /usr/share/sounds/sf2/</i>
<comment>(Oder holen Sie ihn von der SoundBlaster CD)</comment>
# <i>cp /mnt/cdrom/AUDIO/ENGLISH/SFBANK/8MBGMSFX.SF2 /usr/share/sounds/sf2/</i>
<comment>(Wir laden den spezifischen Soundfont)</comment>
# <i>asfxload /usr/share/sounds/sf2/8MBGMSFX.SF2</i>
</pre>

<p>
Sie können jetzt MIDI-Dateien spielen, indem Sie ein Programm wie <c>aplaymidi</c>
verwenden. Starten Sie <c>aplaymidi -l</c>, um eine Liste der verfügbaren Ports
zu erhalten und wählen Sie einen aus, auf dem Sie die Datei abspielen.
</p>

<pre caption="MIDI-Dateien abspielen">
<comment>(Überprüfen der offenen Ports)</comment>
# <i>aplaymidi -l</i>
 Port    Client name                      Port name
 64:0    EMU10K1 MPU-401 (UART)           EMU10K1 MPU-401 (UART)
 65:0    Emu10k1 WaveTable                Emu10k1 Port 0
 65:1    Emu10k1 WaveTable                Emu10k1 Port 1
 65:2    Emu10k1 WaveTable                Emu10k1 Port 2
 65:3    Emu10k1 WaveTable                Emu10k1 Port 3
<comment>(Einen Port wählen, und dann die MIDI-Datei abspielen)</comment>
# <i> aplaymidi --port=65:0 /mnt/shyam/music/midi/mi2.mid</i>
</pre>

</body>
</section>
<section id="vsynth">
<title>Virtuelle Synthesizer</title>
<body>

<p>
Falls Ihre Soundkarte keinen Hardware-Synthesizer hat, können Sie einen virtuellen wie
<c>timidity++</c> verwenden. Die Installation ist ein Kinderspiel.
</p>

<pre caption="Installation von timidity++">
# <i>emerge timidity++</i>
</pre>

<p>
Damit timidity Sounds abspielen kann, braucht es einen Soundfont. Falls Sie
keinen haben, installieren Sie <c>timidity-eawpatches</c> oder
<c>timidity-shompatches</c>, womit Sie ein paar Soundfonts erhalten werden.
Sie können mehrere Soundfont-Konfigurationen installiert haben,
und Sie können Ihren eigenen in <path>/usr/share/timidity/</path> stellen.
Um zwischen verschiedenen Konfigurationen für timidity hin- und herzuwechseln,
sollten Sie das <c>timidity-update</c> - Tool, das durch das timidity++ -
Paket bereitgestellt wird, verwenden.
</p>

<pre caption="Installation der Soundfonts">
# <i>emerge timidity-eawpatches</i>
# <i>timidity-update -g -s eawpatches</i>

<comment>(oder)</comment>

# <i>emerge timidity-shompatches</i>
# <i>timidity-update -g -s shompatches</i>
</pre>

<p>
Vergessen Sie nicht, <c>timidity</c> zum Default Runlevel hinzuzufügen.
</p>

<pre caption="timidity zum Default Runlevel hinzufügen">
# <i>rc-update add timidity default</i>
# <i>/etc/init.d/timidity start</i>
</pre>

<p>
Sie können jetzt versuchen, <uri link="#doc_chap4_pre3">MIDI-Dateien abzuspielen</uri>.
</p>

</body>
</section>
<section>
<title>Tools und Firmware</title>
<body>

<p>
Bestimmte Soundkarten können von Tools, die mit <c>alsa-tools</c> und den
<c>alsa-firmware</c> Paketen geliefert werden, profitieren. Falls Sie
<c>alsa-tools</c> brauchen, dann stellen Sie sicher, dass die
ALSA_TOOLS - Umgebungsvariable in <path>/etc/make.conf</path> zusammen mit den
Tools, die sie brauchen, definiert ist. Zum Beispiel:
</p>

<pre caption="Auswählen der ALSA Tools in /etc/make.conf">
ALSA_TOOLS="as10k1 ac3dec"
</pre>

<p>
Falls die ALSA_TOOLS - Umgebungsvariable nicht gesetzt ist, werden alle zur
Verfügung stehenden Tools gebaut. Installieren Sie jetzt <c>alsa-tools</c>
(und/oder das/die <c>alsa-firmware</c>) Paket(e):
</p>

<pre caption="Installation der ALSA Tools">
# <i>emerge alsa-tools</i>
</pre>

</body>
</section>
<section>
<title>Ein großes Dankeschön an...</title>
<body>

<p>
...alle, die zu der bisherigen Version des Gentoo ALSA Guide beigetragen haben:
Vincent Verleye, Grant Goodyear, Arcady Genkin, Jeremy Huddleston,
John P. Davis, Sven Vermeulen, Benny Chuang, Tiemo Kieft and Erwin.
</p>

</body>
</section>
<section>
<title>Literatur</title>
<body>

<ul>
  <li><uri link="http://www.alsa-project.org/">The ALSA Project</uri></li>
  <li><uri link="http://linux-sound.org">Linux Sound/MIDI Software</uri></li>
</ul>

</body>
</section>
</chapter>
</guide>
