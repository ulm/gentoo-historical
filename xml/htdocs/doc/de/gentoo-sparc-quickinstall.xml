<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/Attic/gentoo-sparc-quickinstall.xml,v 1.3 2005/12/25 16:58:50 grahl Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<!-- English CVS Version: 1.16 -->

<guide link="/doc/de/gentoo-sparc-quickinstall.xml" lang="de">
<title>Gentoo Linux Sparc Kurz-Leitfaden zur Installation</title>

<author title="Author">
  <mail link="ciaranm@gentoo.org">Ciaran McCreesh</mail>
</author>

<author title="Übersetzer">
  Sebastian Westermayer
</author>


<abstract>
Der Kurz-Leitfaden zur Installation beschreibt alle Details des Sparc
Installationsprozesses in einer sehr knapp gehaltenen Form. Benutzer die dieser
Anleitung folgen möchten sollten bereits Erfahrungen mit der Installation von
Gentoo Linux haben.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.9</version>
<date>2005-12-21</date>

<chapter>
<title>Sparc Kurz-Leitfaden zur Installation</title>
<section>
<body>

<p>
Dieser Leitfaden ist an Leute gerichtet, die bereits Erfahrung mit der 
Installation von Gentoo Linux haben. Für eine umfangreichere Anleitung schauen
Sie sich bitte das <uri link="/doc/de/handbook">Gentoo Handbuch</uri> an.
</p>

<p>
Die Installations ISOs und netboot Images befinden sich auf den <uri 
link="/main/en/mirrors.xml">Gentoo Spiegeln</uri>. Die 'Universal' und
'Minimal' CDs sind startfähig und beinhalten die zur Installation von Gentoo
notwendigen Tools. Die 'Universal' CD beinhaltet zudem Stages und einige
Distfiles. Die 'Packages' CD beinhaltet zusätzliche vorkompilierte Pakete für
GRP Installationen. Die netboot Images beinhalten keine Stages und nur einen
Teil der Standardtools (beachten Sie, dass Sie <c>vi</c> anstatt <c>nano</c>
benutzen müssen, wenn Sie netboot benutzen).
</p>

<p>
Drücken Sie <c>stop+A</c> (Tastatur) oder senden Sie ein break (serielle
Konsole) während des Startens um in das OBP zu gelangen. Starten Sie die
Universal oder Minimal Gentoo CD mit dem Befehl <c>boot cdrom</c> oder
<c>boot net</c> für die netboot Images. Drücken Sie Return um den
Standardkernel zu benutzen oder drücken Sie Tab um eine Liste mit alternativen
Kerneln zu sehen.
</p>

<note>
Weitere Informationen zu OBP finden Sie unter <uri
link="/doc/en/gentoo-sparc-obpreference.xml">OpenBoot PROM (OBP) 
Reference</uri> oder in der "OpenBoot 3.x Command Reference" (P/N 802-3242) von
Sun.
</note>

<pre caption="Eingangs-Einstellungen">
# <i>date</i>  (Stellen Sie sicher, dass Zeit und Datum korrekt sind. Falls nicht, stellen Sie sie mit <i>date MMDDhhmmCCYY</i> ein)
# <i>modprobe module_name</i>  (Optional - lädt benötigte Module)
# <i>ifconfig eth0 a.b.c.d netmask e.f.g.h broadcast i.j.k.l</i> (Konfiguration des Netzwerks)
# <i>route add -net default gw a.b.c.d netmask 0.0.0.0 metric 1 eth0</i> (Konfiguration des Standardgateways)
# <i>echo "nameserver a.b.c.d" > /etc/resolv.conf</i> (DNS konfigurieren)
# <i>fdisk /dev/sda</i> (Partitionierung der Festplatte)
</pre>

<p>
Ein sun disclabel wird für Sparc-Rechner vorrausgesetzt. Dieses kann mit 's'
erstellt werden.
</p>

<p>
Eine separate /boot Partition ist für Sparc nicht empfohlen. Die root Partition
muss bei Sparc32-Rechnern komplett innerhalb der ersten 1GByte der Festplatte
liegen. Das empfohlene Dateisystem ist ext3. Mindestens 512Mbytes RAM + Swap
werden für Bootstrap und einige größere Kompilierungen benötigt.
</p>

<p>
Initialisieren Sie Ihre Partitionen mit <c>mke2fs</c> (Ext2), <c>mke2fs -j</c>
(Ext3) und <c>mkswap</c> (Swap Partition). Zum Beispiel:
<c>mke2fs -j /dev/sda1</c>.
</p>

<p>
Fahren Sie mit dem Mounten der Partitionen und dem Entpacken des gewünschten
Stage-Tarballs fort.
</p>

<pre caption="Vorbereiten der Installation">
(Aktivieren der Swap Partition)                  # <i>swapon /dev/sdax</i>
(Mounten der Root Partition)                     # <i>mount /dev/sdax /mnt/gentoo</i>
(Wechseln zum Mountpunkt)                        # <i>cd /mnt/gentoo</i>
(Extrahieren eines Stage Tarballs...)            # <i>tar xvjpf /mnt/cdrom/stages/stage?-*.tar.bz2</i>
(<comment>oder</comment> herunterladen des neuesten Tarballs...)    # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(                         ...und extrahieren)    # <i>tar xvjpf stage*</i>
(Optional: entpacken eines Portage Baums)        # <i>tar xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 -C /mnt/gentoo/usr</i>
(Optional: kopieren der Distfiles)               # <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
(Auswahl eines Spiegels)                         # <i>mirrorselect -a -s4 -o | grep 'GENTOO_MIRRORS=' &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Kopieren der Nameserver Informationen)          # <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Mounten des Proc Dateisystems)                  # <i>mount -t proc none /mnt/gentoo/proc</i>
(Chroot in die neue Umgebung)                    # <i>chroot /mnt/gentoo /bin/bash</i>
(Laden der notwendigen Variablen)                # <i>env-update; source /etc/profile</i>
(Nur Netzwerk, nicht GRP: Portage aktualisieren) # <i>emerge --sync</i>
</pre>

<p>
Jetzt installieren wir Gentoo:
</p>

<pre caption = "Gentoo installieren">
(Nur Stage1:)
(  Verändern Sie USE, CFLAGS und CXXFLAGS. CHOST verändern Sie nicht.) 
                                                         # <i>nano -w /etc/make.conf</i>
(  Bootstrap des Systems)                                # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Nur Stage1 and Stage2:)
(  Installieren des Basissystems)                        # <i>emerge system</i>
</pre>

<note>
Passende CFLAGS für Sparc-Systeme sind <c>-mcpu=ihre_cpu -O2 -pipe</c>, wobei
<c>ihre_cpu</c> eine dieser ist: <c>ultrasparc3</c>, <c>ultrasparc</c>,
<c>v9</c> (64 Bit Systeme) oder <c>hypersparc</c>, <c>supersparc</c>, <c>v8</c>
oder <c>v7</c> (32 Bit Systeme). Das <c>-frename-registers</c> Flag könnte auch
von Interesse sein. Beachten Sie, dass <c>-fomit-frame-pointer</c>, anders als
bei x86 Systemen, nicht empfohlen wird.
</note>

<p>
Als nächstes müssen Sie notwendige Informationen setzen:
</p>

<pre caption = "Anpassen der Konfigurationsdateien">
<comment>(Setzen der Zeitzoneninformation)</comment>
# <i>cp /usr/share/zoneinfo/<comment>&lt;Pfad zur Zeitzonendatei&gt;</comment> /etc/localtime</i>
<comment>(Editieren der fstab Datei)</comment>
# <i>nano -w /etc/fstab</i>
</pre>

<p>
Benutzen Sie folgendes als eine <e>Vorlage</e> (kopieren sie es nicht wörtlich)
für <path>/etc/fstab</path>:
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;                  &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/sdax               none            swap            sw                      0 0
/dev/sdax               /               ext3            noatime                 0 1
/dev/cdroms/cdrom0      /mnt/cdrom      auto            noauto,user             0 0
none                    /proc           proc            defaults                0 0
none                    /dev/shm        tmpfs           nodev,nosuid,noexec     0 0
</pre>

<p>
Fahren Sie nun mit der Installation des Linux-Kernels fort. Verfügbare
Kernelpakete für Sparc sind <c>sparc-sources</c> (2.4) und 
<c>development-sources</c> (2.6). Das <c>ultra1</c> USE Flag sollte auf Ultra 1
und Netra i 1 "Enterprise" und "Creator" Modellen gesetzt werden, damit die
onboard HME Ethernet Controller richtig unterstützt werden.
</p>

<pre caption="Installation des Kernels">
(Installieren der Kernelquellen)                           # <i>emerge <comment>&lt;hier-das-kernelpaket&gt;</comment></i>
                                                           # <i>cd /usr/src/linux; make menuconfig</i>
(   (2) Aktivieren von shmfs, procfs, devfs wenn udev nicht benutzt wird)
(   (3) Komplilieren des Kernels)
(       - 2.4 Kernel auf sparc32)                          # <i>make dep &amp;&amp; make clean vmlinux modules modules_install</i>
(       - 2.4 Kernel auf sparc64)                          # <i>make dep &amp;&amp; make clean vmlinux image modules modules_install</i>
(       - 2.6 Kernel auf sparc32                           # <i>make &amp;&amp; make modules_install</i>
(       - 2.6 Kernel auf sparc64                           # <i>make &amp;&amp; make image modules_install</i>
(   (4) Kopieren des Kernels)
(       - 2.4 Kernel auf sparc32)                          # <i>cp vmlinux /boot/image</i>
(       - 2.4 Kernel auf sparc64)                          # <i>cp arch/sparc64/boot/image /boot</i>
(       - 2.6 Kernel auf sparc32)                          # <i>cp arch/sparc/boot/image /boot</i>
(       - 2.6 Kernel auf sparc64)                          # <i>cp arch/sparc64/boot/image /boot</i>
</pre>

<p>
Nun folgt die Installation der von Ihnen benötigten Tools:
</p>

<pre caption = "Installation wichtiger Systemtools">
(Systemlogger; Auswahl: sysklogd, metalog, msyslog, syslog-ng)         # <i>emerge syslog-ng </i>
(Automatisches Starten des Systemloggers beim Booten)                  # <i>rc-update add syslog-ng default</i>
(Installation eines Crondaemons; Auswahl: vixie-cron, dcron, fcron)    # <i>emerge vixie-cron</i>
(Automatisches starten des Crondaemons beim Booten)                    # <i>rc-update add vixie-cron default</i>   
(Domainname Initskript)                                                # <i>rc-update add domainname default</i>
(Nur für 2.6.x Kernel: udev kann anstatt von devfs genutzt werden)     # <i>emerge udev</i>
</pre>

<note>
Mehr Informationen zur Konfiguration von udev finden Sie im <uri
link="/doc/de/udev-guide.xml">Gentoo udev Guide</uri>. Beachten Sie, dass die
Option <c>RC_DEVICE_TARBALL="no"</c> auf Sparc-Systemen bevorzugt wird.
</note>

<p>
Abschluss der Einstellungen Ihres Gentoo Systems:
</p>

<pre caption = "Abschluss der Konfigurationseinstellungen">
(Setzen des root Passworts)                              # <i>passwd</i>
(Erstellen eines Benutzers)                              # <i>useradd benutzername -m -G users,wheel,audio -s /bin/bash</i>
(Setzen des Passworts für diesen Benutzer)               # <i>passwd benutzername</i>
(Setzen des System Hostnamens)                           # <i>echo meinrechner &gt; /etc/hostname</i>
(Setzen des System Domainnamens)                         # <i>echo meinedomain.com &gt; /etc/dnsdomainname</i>
(Erstellen der Hostdatei, z.B.:"127.0.0.1 localhost meinrechner")  
                                                         # <i>nano -w /etc/hosts</i>
(Konfiguration grundliegender Systemeinstellungen, folgen Sie den Kommentaren)
                                                         # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption = "Konfigurieren des Netzwerks">
(Konfiguration des Netzwerks; dhcp-Benutzer sollten iface_eth0="dhcp" setzen)
                                                                 # <i>nano -w /etc/conf.d/net</i>
(Auflisten der Module, die beim Start geladen werden sollen)
                                                                 # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;version&gt;</comment></i>
(Starten des Netzwerk beim Booten)                               # <i>rc-update add net.eth0 default</i>
(Nur wenn Sie mehrere Netzwerkkarten haben:)
   (1) Erstellen Sie Initskripte für jedes Interface)            # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Automatisches starten beim Booten)                        # <i>rc-update add net.ethx default</i>
</pre>

<p>
Installieren Sie jetzt den Bootloader.
</p>

<pre caption="SILO installieren">
# emerge silo
# nano -w /etc/silo.conf
partition = 1
root = /dev/sda1
timeout = 150

image = /boot/image
    label = Gentoo
# silo
</pre>


<p>
Unmounten Sie nun alle Partitionen und rebooten Sie in Ihr neues System:
</p>

<pre caption="Beenden und Installation eines GUI">
(Verlassen der Chroot-Umgebung)                 # <i>exit; cd /</i>
(Unmounten der Partitionen)                     # <i>umount /mnt/gentoo/proc /mnt/gentoo</i>
(Neustart; Entfernen Sie die Installations CD aus dem Laufwerk)
                                                # <i>reboot</i>
(Nach dem Neustart:)
(Nur GRP-Benutzer)
(  (1) Mounten der CD2)                         # <i>mount /dev/cdroms/cdrom0 /mnt/cdrom</i>  
(  (2) Kopieren der Pakete)                     # <i>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</i>
(  (3) Installation zusätzlicher Software)      # <i>USE="bindist" emerge -k xorg-x11 gnome kde mozilla</i>
(  (4) Konfiguration des Xservers)              # <i>$EDITOR /etc/X11/XF86Config</i>
</pre>

<p>
Sie können weitere Informationen in der <uri
link="/doc/de/index.xml">Gentoo Dokumentation</uri> finden.
</p>
</body>
</section>
</chapter>
</guide>
