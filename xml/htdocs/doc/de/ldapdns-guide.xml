<?xml version='1.0' encoding="UTF-8"?>

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/Attic/ldapdns-guide.xml,v 1.1 2009/08/16 11:09:07 keytoaster Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/de/ldapdns-guide.xml" lang="de">
<title>Gentoo LDAP-DNS Leitfaden</title>

<author title="Autor">
  <mail link="fnjordy@gmail.com">Steve-o</mail>
</author>
<author title="Bearbeiter">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Übersetzer">
  <mail link="micm@micm.eu">Michael Münch</mail>
</author>

<abstract>
Mit ldapdns können Sie in Ihrem Netzwerk mühelos DNS-Dienste zur Verfügung
stellen. Die genutzten DNS-Einträge werden in einer LDAP-Umgebung gespeichert.
Dieses Dokument führt Sie durch die Konfiguration von OpenLDAP und ldapdns für
diesen Zweck.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>0.3</version>
<date>2008-05-01</date>

<chapter>
<title>Einführung</title>
<section>
<body>

<p>
LDAPDNS ist ein kleiner Server, der DNS-Dienste für Ihr Netzwerk zur Verfügung
stellt. Mit DNS-Diensten können Sie Ihre Hostnamen in zentraler Weise verwalten
und damit die lästigen Aktualisierungen von <path>/etc/hosts</path>, jedes Mal
wenn Sie ein System hinzufügen, entfernen oder sich sein Hostname ändert,
verhinden.
</p>

<p>
Das Paket LDAPDNS benutzt einen LDAP-Dienst, um alle DNS-Einträge (welche, um
es kurz zu erklären, eine Zeile mit einer Zuordnung von Hostname und IP-Adresse
sind) zu speichern. LDAP ist ein Standardprotokoll, um Informationen aus einer
hierarchisch aufgebauten Wissensdatenbank (Verzeichnisse) zu erhalten. Der
bekannteste LDAP-Dienst für Linux ist OpenLDAP, eine freie LDAP-Implementierung.
</p>

<p>
Mit dieser kurzen Anleitung an der Hand sollten Sie in der Lage sein,
DNS-Dienste in Ihrem Netzwerk mit möglichst wenig Aufwand einzurichten.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Konfiguration von LDAP-DNS</title>
<section>
<body>

<p>
Als erstes installieren Sie <c>net-dns/ldapdns</c>.
</p>

<pre caption="Installation von ldapdns">
# <i>emerge net-dns/ldapdns</i>
</pre>

<p>
Als nächstes konfigurieren Sie <c>ldapdns</c> die DNS-Einträge für Ihr Netzwerk
bereitzuhalten. Wir benutzen <c>ldapdns-conf</c>, welches folgende Syntax
benutzt:
</p>

<pre caption="Syntax für ldapdns-conf">
ldapdns-conf acct logacct /path yourip ldaphost dn [suffix]
</pre>

<table>
<tr>
  <th>Schlüsselwort</th>
  <th>Erklärung</th>
  <th>Beispiel</th>
</tr>
<tr>
  <ti>acct</ti>
  <ti>Benutzername unter dem ldapdns laufen soll</ti>
  <ti>ldapdns</ti>
</tr>
<tr>
  <ti>logacct</ti>
  <ti>Benutzername unter dem das Logging von ldapdns laufen soll</ti>
  <ti>dnslog</ti>
</tr>
<tr>
  <ti>/path</ti>
  <ti>Chrooted Heimatverzeichnis für ldapdns</ti>
  <ti><path>/var/lib/ldapdns</path></ti>
</tr>
<tr>
  <ti>yourip</ti>
  <ti>IP-Adresse auf der ldapdns hört</ti>
  <ti>127.0.0.1</ti>
</tr>
<tr>
  <ti>ldaphost</ti>
  <ti>Adresse des LDAP-Dienstes</ti>
  <ti><c>ldapi://%2fvar%2frun%2fopenldap%2fslapd.sock</c></ti>
</tr>
<tr>
  <ti>dn</ti>
  <ti>LDAP-Benutzerkennung</ti>
  <ti>cn=Manager,dc=<c>yourdomain</c></ti>
</tr>
<tr>
  <ti>suffix</ti>
  <ti>Optional, LDAP-Pfad der allen Anfragen standardmäßig hinzugefügt wird</ti>
  <ti>ou=Machines,dc=<c>yourdomain</c></ti>
</tr>
</table>

<p>
Sie sollten die IP-Adresse <c>127.0.0.1</c> mit einer IP-Adresse, die alle
Hosts erreichen können, ersetzen und vergessen Sie nicht den Domainnamen, den
Sie haben möchten, anstelle von <c>yourdomain</c> zu benutzen.
</p>

<pre caption="Beispielaufruf von ldapdns-conf">
# <i>ldapdns-conf ldapdns dnslog /var/lib/ldapdns 127.0.0.1 ldapi://%2fvar%2frun%2fopenldap%2fslapd.sock cn=Manager,dc=yourdomain ou=Machines,dc=yourdomain</i>
</pre>

<p>
Setzen Sie jetzt das Passwort für den LDAP-Login:
</p>

<pre caption="Einrichtung des LDAP-Login Passwortes">
# <i>echo YourSecretPassword &gt; /var/lib/ldapdns/root/password</i>
# <i>chmod 0400 /var/lib/ldapdns/root/password</i>
</pre>

<p>
Konfigurieren Sie jetzt ldapdns, die einfache Authentifizierung und die cosine
LDAP-Schemata zu verwenden:
</p>

<pre caption="Konfiguration von ldapdns">
# <i>echo simple &gt; /var/lib/ldapdns/env/LDAP_AUTH</i>
# <i>echo cosine &gt; /var/lib/ldapdns/env/SCHEMA</i>
</pre>

<p>
Optional können Sie noch eine Email-Adresse für den Dienst eintragen:
</p>

<pre caption="Einrichtung einer Hostmaster Email-Adresse">
# <i>echo YourMail@address &gt; /var/lib/ldapdns/env/HOSTMASTER</i>
</pre>

<p>
Fügen Sie den Dienst dem supervice scan hinzu und starten Sie, falls noch nicht
geschehen, den Supervisor-Dienst:
</p>

<pre caption="Einrichten des Supervisor-Dienstes">
# <i>ln -s /var/lib/ldapdns /service</i>
# <i>/etc/init.d/svscan start</i>
# <i>rc-update add svscan default</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Konfiguration von OpenLDAP</title>
<section>
<body>

<p>
Jetzt müssen wir OpenLDAP mit dem DNS-Schema konfigurieren. Öffnen Sie
<path>/etc/openldap/slapd.conf</path> in Ihrem Lieblingseditor und vergewissern
Sie sich, dass die folgenden drei Zeilen enthalten sind:
</p>

<pre caption="Bearbeiten von /etc/openldap/slapd.conf">
include         /etc/openldap/schema/cosine.schema
include         /etc/openldap/schema/inetorgperson.schema
include         /etc/openldap/schema/nis.schema
</pre>

<p>
Bootstrappen Sie LDAP mit dem Base DN, den Sie vorhin mittels
<c>ldapdns-conf</c> festgelegt haben. Um das zu erreichen, erstellen wir als
erstes eine Datei <path>bootstrap.ldif</path> (der Name ist nicht wichtig), die
wir mit DNS-Informationen füllen.
</p>

<p>
Als Beispiel stellen wir eine <uri
link="bootstrap.ldif.txt">bootstrap.ldif</uri> Datei für die fiktive Domain
<c>cherchetoujours.org</c> zur Verfügung.
</p>

<p>
Bootstrappen Sie jetzt LDAP mit diesen Informationen:
</p>

<pre caption="Bootstrapping LDAP">
# <i>ldapadd -x -D "cn=Manager,dc=yourdomain" -W -f bootstrap.ldif</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Testen der Installation</title>
<section>
<body>

<p>
Jetzt sind Sie startklar. Testen Sie Ihren Aufbau mit <c>nslookup</c> (Teil der
<c>net-dns/bind-tools</c>):
</p>

<pre caption="Test der ldapdns-Konfiguration">
# <i>nslookup ns1.yourdomain</i>
 Note:  nslookup is deprecated and may be removed from future releases.
 Consider using the `dig' or `host' programs instead.  Run nslookup with
 the `-sil[ent]' option to prevent this message from appearing.
 Server:         <i>127.0.0.1</i>
 Address:        <i>127.0.0.1#53</i>

 Name:   ns1.example.com
 Address: <comment>(Die IP-Adresse Ihres Servers)</comment>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Quellen</title>
<section>
<body>

<p>
Die <uri
link="http://cvs.lp.se/doc/ldapdns/README.configure.gz">README.configure.gz</uri>
Datei des ldapdns-Projektes.
</p>

</body>
</section>
</chapter>

</guide>