<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->

<!-- English CVS Version: 1.41 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/handbook/hb-working-portage.xml,v 1.10 2004/10/28 18:16:26 dertobi123 Exp $ -->

<sections>
<section>
<title>Willkommen zu Portage</title>
<body>

<p>
Portage ist vermutlich Gentoos bemerkenswerteste Innovation in Sachen Software
Management. Mit seiner großen Flexibilität und enormen Menge an Optionen wird
es vielfach als bestes Software Management Tool für Linux gesehen.
</p>

<p>
Portage ist vollständig in <uri link="http://www.python.org">Python</uri>
und <uri link="http://www.gnu.org/software/bash">Bash</uri> geschrieben und
somit für seine Benutzer vollständig sichtbar, da dieses beides Scriptsprachen
sind.
</p>

<p>
Die meisten Benutzer werden Portage durch das <c>emerge</c> Programm benutzen.
Dieses Kapitel soll nicht die Informationen aus der emerge Manpage duplizieren,
für eine vollständige Auflistung aller emerge Optionen konsultieren Sie die
Manpage:
</p>

<pre caption="Lesen der emerge Manpage">
$ <i>man emerge</i>
</pre>

</body>
</section>
<section>
<title>Der Portage Tree</title>
<subsection>
<title>Ebuilds</title>
<body>

<p>
Wenn wir über Pakete reden meinen wir oft Programme, die für Gentoo Benutzer
durch den Portage Tree verfügbar sind. Der Portage Tree ist eine Sammlung von
<e>ebuilds</e>, Dateien die alle Informationen enthalten, die Portage benötigt
um Anwendungen zu betreuen (installieren, suchen, abfragen, ...). Diese Ebuilds
liegen standardmäßig in <path>/usr/portage</path>.
</p>

<p>
Wann immer Sie Portage bitten eine Aktion betreffend irgendwelcher Anwendungen
durchzuführen wird es die Ebuilds auf Ihrem System als Basis benutzen. Es ist
daher sehr wichtig, dass Sie die Ebuilds auf Ihrem System regelmäßig
aktualisieren, so dass Portage über neue Anwendungen,
Sicherheitsaktualisierungen usw. informiert ist.
</p>

</body>
</subsection>
<subsection>
<title>Aktualisieren des Portage Tree</title>
<body>

<p>
Der Portage Tree wird für gewöhnlich mit <uri
link="http://rsync.gentoo.org">rsync</uri> aktualisiert, ein schnelles und
inkrementielles Dateiübertragungsprogramm. Das Aktualisieren ist ziemlich
einfach, da das <c>emerge</c> Kommando ein Frontend für rsync beinhaltet:
</p>

<pre caption="Aktualisieren des Portage Tree">
# <i>emerge --sync</i>
</pre>

<p>
Wenn Sie aufgrund von Firewall Restriktionen das rsync Protokoll nicht benutzen
können, können Sie immer noch unsere täglich aktualisierten Portage Snapshots
benutzen. Das <c>emerge-webrsync</c> Tool lädt diesen automatisch und
installiert den aktuellsten Snapshot in Ihrem System:
</p>

<pre caption="Running emerge-webrsync">
# <i>emerge-webrsync</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Software installieren und aktuell halten</title>
<subsection>
<title>Nach Software suchen</title>
<body>

<p>
Um den Portage Tree nach Anwendungen zu durchsuchen können Sie die in
<e>emerge</e> eingebauten Suchfunktionen nutzen. Standardmäßig liefert
<c>emerge search</c> Paketnamen, die mit dem Suchbegriff teilweise oder
vollständig übereinstimmen.
</p>

<p>
Um zum Beispiel nach allen Paketen zu suchen, in deren Name "pdf" vorkommt:
</p>

<pre caption="Suche nach Paketen mit pdf im Namen">
$ <i>emerge search pdf</i>
</pre>

<p>
Wenn Sie ebenfalls durch die Beschreibungen suchen möchten, können Sie die
<c>--searchdesc</c> (oder <c>-S</c>) Option nutzen:
</p>

<pre caption="Suche nach Paketen im Zusammenhang mit pdf">
$ <i>emerge --searchdesc pdf</i>
</pre>

<p>
Wenn Sie einen Blick auf die Ausgabe werfen werden Sie feststellen, dass Ihnen
diese zahlreiche Informationen gibt. Die Felder sind klar beschriftet, so dass
wir dies nicht näher erläutern wollen.
</p>

<pre caption="Beispiel Ausgabe einer Suchabfrage">
*  net-print/cups-pdf
      Latest version available: 1.5.2
      Latest version installed: [ Not Installed ]
      Size of downloaded files: 15 kB
      Homepage:    http://cip.physik.uni-wuerzburg.de/~vrbehr/cups-pdf/
      Description: Provides a virtual printer for CUPS to produce PDF files.
      License:     GPL-2
</pre>

</body>
</subsection>
<subsection>
<title>Software installieren</title>
<body>

<p>
Nachdem Sie eine Anwendung gefunden haben, die Sie installieren möchten, können
Sie dies mit <c>emerge</c> ganz einfach durchführen, zum Beispiel für
<c>gnumeric</c>:
</p>

<pre caption="Installation von gnumeric">
# <i>emerge gnumeric</i>
</pre>

<p>
Da viele Anwendungen untereinander Abhängigkeiten haben, kann jeder Versuch ein
bestimmtes Paket zu installieren in der Installation von verschiedenen
Abhängigkeiten resultieren. Aber keine Angst, Portage kümmert sich ebenfalls um
diese Abhängigkeiten. Wenn Sie herausfinden wollen, welche Pakete Portage als
Abhängigkeiten mitinstallieren <e>würde</e> benutzen Sie die <c>--pretend</c>
Option. Zum Beispiel:
</p>

<pre caption="Installation von gnumeric simulieren">
# <i>emerge --pretend gnumeric</i>
</pre>

<p>
Wenn Sie Portage anweisen ein Paket zu installieren werden alle notwendigen
Quellen (sofern notwendig) aus dem Internet heruntergeladen und standardmäßig
in <path>/usr/portage/distfiles</path> abgelegt. Anschließend werden die
Quellen entpackt, kompiliert und das Paket installiert. Wenn Sie
Portage anweisen möchten zwar die Quellen herunterzuladen, das Paket aber nicht
zu kompilieren und installieren hängen Sie die <c>--fetchonly</c> Option an das
<c>emerge</c> Kommando an:
</p>

<pre caption="Herunterladen der Quellen für gnumeric">
# <i>emerge --fetchonly gnumeric</i>
</pre>

</body>
</subsection>
<subsection>
<title>Software deinstallieren</title>
<body>

<p>
Um Anwendungen aus Ihrem System zu entfernen benutzen Sie <c>emerge
unmerge</c>. Dies weist Portage an, alle Dateien die zu diesem Paket gehören
(mit der <e>Ausnahme</e> von Konfigurationsdateien, die Sie nach der
Installation geändert haben) zu entfernen. Das Beibehalten der
Konfigurationsdateien ermöglicht Ihnen die eventuelle Weiterarbeit mit diesem
Paket zu einem späteren Zeitpunkt.
</p>

<p>
Es wird Ihnen jedoch eine <brite>dicke Warnung</brite> angezeigt: Portage wird
<e>nicht</e> kontrollieren, ob ein Paket, welches Sie deinstallieren möchten,
noch Abhängigkeit eines anderen ist. Sie werden jedoch darauf hingewiesen, wenn
Sie wichtige Pakete aus dem system Profil entfernen wollen.
</p>

<pre caption="Deinstallieren von Pakten aus dem system Profil">
# <i>emerge unmerge gnumeric</i>
</pre>

<p>
Wenn Sie ein Paket deinstalliert haben, so sind die Abhängigkeiten dieses
speziellen Paketes weiterhin installiert. Um Portage anzuweisen nach Paketen zu
suchen, die keinerlei Abhängigkeit sind und nun entfernt werden können, nutzen
Sie die <c>depclean</c> Funktionalität. Wir werden dies später ausführlicher
behandeln.
</p>

</body>
</subsection>
<subsection>
<title>Aktualisieren Ihres Systems</title>
<body>

<p>
Um Ihr System auf dem Laufenden zu halten (von Sicherheitsaktualisierungen gar
nicht gesprochen) müssen Sie Ihr System regelmäßig aktualisieren. Da Portage
nur die Ebuilds in Ihrem lokalen Portage Tree kennt, müssen Sie zunächst den
Portage Tree aktualisieren. Wenn Sie dies getan haben, können Sie das System
mittels <c>emerge --update world</c> aktualisieren:
</p>

<pre caption="Aktualisierung des Systems">
# <i>emerge --update world</i>
</pre>

<p>
Portage wird nun nach neueren Versionen von Anwendungen suchen, die Sie
installiert haben. Es werden jedoch nur Versionen von Anwendungen überprüft, die
Sie explizit installiert haben - also nicht die von Abhängigkeiten. Wenn Sie
jedes einzelne Paket in Ihrem System aktualisieren wollen fügen Sie das
<c>--deep</c> Argument hinzu:
</p>

<pre caption="Aktualisierung des gesamten Systems">
# <i>emerge --update --deep world</i>
</pre>

<p>
Wenn Sie zuvor ein <uri link="?part=2&amp;chap=2">USE Flag</uri> geändert haben
möchten Sie vermutlich <c>--newuse</c> hinzufügen. Portage wird nun feststellen,
ob die Änderung eine Installation von weiteren Paketen erfordert oder eine
Neuinstallation der existierenden hinreichend ist:
</p>

<pre caption="Durchführen einer vollen Aktualisierung">
# <i>emerge --update --deep --newuse world</i>
</pre>

</body>
</subsection>
<subsection>
<title>Pseudo Pakete</title>
<body>

<p>
Einige Pakete im Portage Tree haben keinen realen Inhalt sondern dienen als
Kollektion von Paketen. Zum Beispiel wird das <c>kde</c> Paket eine komplette KDE
Umgebung auf Ihrem System installieren, indem es sämtliche Komponenten eines
KDE Desktop als Abhängigkeiten angibt.
</p>

<p>
Wenn Sie jemals ein solches Paket entfernen wollen, wird Ihnen <c>emerge
unmerge</c> nicht viel weiterhelfen, da dies keinerlei Einfluss auf die
installierten Abhängigkeiten hat.
</p>

<p>
Portage hat die Funktionalität um verwaiste Abhängigkeiten zu entfernen, da die
Verfügbarkeit von Anwendungen und Abhängigkeiten dynamisch aufgelöst wird müssen
Sie zunächst Ihr System vollständig aktualisieren, inklusive der Änderungen die
Sie durch Änderungen an USE Flags herbeigeführt haben. Im Anschluss daran können
Sie <c>emerge depclean</c> ausführen, um die verwaisten Abhängigkeiten zu
entfernen. Wenn dies geschehen ist müssen Sie die Anwendungen die dynamisch auf
die nun deinstallierten Anwendungen gelinkt sind neu kompilieren.
</p>

<p>
All dies wird durch die folgenden 3 Kommandos erledigt:
</p>

<pre caption="Entfernen von verwaisten Paketen">
# <i>emerge --update --deep --newuse world</i>
# <i>emerge depclean</i>
# <i>revdep-rebuild</i>
</pre>

<p>
<c>revdep-rebuild</c> ist im <c>gentoolkit</c> Paket enthalten, vergessen Sie
nicht es zuvor zu installieren:
</p>

<pre caption="Installieren des gentoolkit Paket">
# <i>emerge gentoolkit</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Wenn Portage sich beschwert ...</title>
<subsection>
<title>Über SLOTs, Virtuals, Zweige, Architekturen und Profile</title>
<body>

<p>
Wie bereits zuvor erwähnt bietet Portage extrem viele Möglichkeiten und
unterstützt zahlreiche Features, die in andere Software Management Tools fehlen.
Um dies zu verstehen erläutern wir einige Aspekte von Portage, ohne jedoch ganz
ins Detail zu gehen.
</p>

<p>
Mit Portage können verschiedene Versionen eines einzelnen Pakets auf einem
System koexistieren. Während andere Distributionen dazu tendieren die Pakete zu
diesen Versionen umzubenennen (wie <c>freetype</c> und <c>freetype2</c>)
beherrscht Portage eine Technik namens <e>SLOT</e>s. Ein deklariert einen
bestimmten SLOT für die Version. Zum Beispiel hat das <c>freetype</c> Paket
Ebuilds mit <c>SLOT="1"</c> und <c>SLOT="2"</c>.
</p>

<p>
Es gibt weiterhin einige Pakete, die die gleiche Funktionalität anbieten, aber
anders implementiert sind. Zum Beispiel sind <c>metalogd</c>, <c>sysklogd</c>
und <c>syslog-ng</c> alle Systemlogger. Anwendungen die einen Systemlogger
benötigen können nicht, zum Beispiel, auf <c>metalogd</c> bestehen, da die
anderen Systemlogger eine genauso gute Wahl sind. Portage erlaubt daher
<e>Virtuals</e>: Jeder Systemlogger bietet <c>virtual/syslog</c>, so dass
Anwendungen von <c>virtual/syslog</c> abhängen können.
</p>

<p>
Anwendungen im Portage Tree können in verschiedenen Zweigen liegen.
Standardmäßig akzeptiert Ihr System nur Pakete, die Gentoo als stabil
betrachtet. Die meisten neuen Anwendungen werden, nach dem Einbringen ins CVS,
in den Test Zweig hinzugefügt, da Tests erforderlich sind um festzustellen, ob
die spezifische Anwendung als stabil gekennzeichnet werden kann. Sie werden die
Ebuilds für solche Software in Ihrem Portage Tree haben, Portage wird diese
Anwendungen nicht installieren, bevor Sie nicht in den stabilen Zweig verschoben
wurden.
</p>

<p>
Einige Anwedungen sind nur für einige Architekturen verfügbar, oder die
Anwendung funktioniert nicht auf anderen Architekturen, oder benötigt mehr
Tests, oder der Entwickler, der die Anwendung eingebracht hat, kann nicht
verifizieren, ob die Anwendung auf anderen Architekturen korrekt funktioniert.
</p>

<p>
Jede Gentoo Installation befolgt ein bestimmtes <c>Profil</c>, welches neben
anderen Informationen auch alle zwingend erforderlichen Pakete auflistet.
</p>

</body>
</subsection>
<subsection id="blocked">
<title>Blockierte Pakete</title>
<body>

<pre caption="Portage Warnung über blockierte Pakete (mit --pretend)">
[blocks B     ] gnome-base/bonobo-activation (from pkg gnome-base/libbonobo-2.4.0)
</pre>

<pre caption="Portage warnung über blockierte Pakete (ohne --pretend)">
!!! Error: the gnome-base/bonobo-activation package conflicts with another package.
!!!        both can't be installed on the same system together.
!!!        Please use 'emerge --pretend' to determine blockers.
</pre>

<p>
Ebuilds enthalten spezifische Felder, die Portage über die Abhängigkeiten
informieren. Es gibt zwei mögliche Formen von Abhängigkeiten: Build
Abhängigkeiten, deklariert in <c>DEPEND</c> und Abhängigkeiten zur Laufzeit,
deklariert in <c>RDEPEND</c>. Wenn eine dieser Abhängigkeiten ein Paket oder
eine Virtual als explizit <e>nicht</e> kompatibel kennzeichnet, wird ein Blocker
ausgelöst.
</p>

<p>
Um einen solchen Blocker zu umgehen können Sie entweder auf das Installieren des
Pakets verzichten, oder das den Blocker auslösende Paket zuerst deinstallieren.
Im grade angebrachten Beispiel sind Ihre Optionen der Verzicht auf die
Installation von <c>libbonobo</c> oder die vorherige Deinstallation von
<c>bonobo-activation</c>.
</p>

</body>
</subsection>
<subsection id="masked">
<title>Maskierte Pakete</title>
<body>

<pre caption="Portage Warnung zu maskierten Paketen">
!!! all ebuilds that could satisfy "bootsplash" have been masked.
</pre>

<pre caption="Portage Warnung zumaskierten Paketen - Gründe">
!!! possible candidates are:

- gnome-base/gnome-2.8.0_pre1 (masked by: <i>~x86 keyword</i>)
- lm-sensors/lm-sensors-2.8.7 (masked by: <i>-sparc keyword</i>)
- sys-libs/glibc-2.3.4.20040808 (masked by: <i>-* keyword</i>)
- dev-util/cvsd-1.0.2 (masked by: <i>missing keyword</i>)
- media-video/ati-gatos-4.3.0 (masked by: <i>package.mask</i>)
- sys-libs/glibc-2.3.2-r11 (masked by: <i>profile</i>)
</pre>

<p>
Wenn Sie ein Paket isntallieren wollen, welches für Ihr System nicht verfügbar
ist, erhalten Sie eine Fehlermeldung. Sie sollten versuchen eine andere
Anwendung, welche für Ihr System verfügbar ist, zu installieren oder warten bis
dieses bestimmte Paket verfügbar ist. Es gibt immer einen Grund warum ein Paket
maskiert ist:
</p>

<ul>
  <li>
    <b>~arch Keyword</b> bedeutet, dass diese Anwendung noch nicht hinreichend
    getestet ist, um diese in den stabilen Zweig zu schieben. Warten Sie ein
    paar Tage oder Wochen und versuchen Sie es erneut.
  </li>
  <li>
    <b>-arch Keyword</b> oder <b>-* Keyword</b> bedeutet, dass diese Anwendung
    auf Ihrer Architektur nicht funktioniert. Wenn Sie glauben, dass das Paket
    funktioniert erstellen Sie einen Bugreport in unserem
    <uri link="http://bugs.gentoo.org">Bugzilla</uri>.
  </li>
  <li>
    <b>Fehlendes Keyword</b> bedeutet, dass diese Anwendung auf Ihrer
    Architektur noch nicht getestet wurde. Bitten Sie das Porting Team der
    spezifischen Architektur dieses Paket zu testen, oder testen Sie es selbst
    und melden Ihre Ergebnisse in unserem
    <uri link="http://bugs.gentoo.org">Bugzilla</uri>.
  </li>
  <li>
    <b>package.mask</b> bedeutet, dass dieses Paket korrupt, instabil oder
    schlecht ist und als "nicht-benutzen" gekennzeichnet wurde.
  </li>
  <li>
    <b>profile</b> bedeutet, dass dieses Paket als nicht zutreffend für Ihr
    Profil gekennzeichnet ist. Die Applikation kann Ihr System in einen
    korrupten Zustand versetzen, nachdem Sie diese Anwendung installiert haben
    oder sie ist nicht kompatibel mit Ihrem aktuellen Profil.
  </li>
</ul>

</body>
</subsection>
<subsection id="missingdependencies">
<title>Fehlende Abhängigkeiten</title>
<body>

<pre caption="Portage Warnung zu fehlenden Abhängigkeiten">
emerge: there are no ebuilds to satisfy "&gt;=sys-devel/gcc-4.2-r4".

!!! Problem with ebuild sys-devel/gcc-3.4.2-r2
!!! Possibly a DEPEND/*DEPEND problem.
</pre>

<p>
Die Anwendung welche Sie installieren möchten benötigt ein anderes Paket,
welches für Ihr System nicht verfügbar ist. Schauen Sie im
<uri link="http://bugs.gentoo.org">Bugzilla</uri> nach, ob das Problem bekannt
ist und wenn nicht erstellen Sie einen neuen Bugreport zu diesem Problem.
Solange Sie nicht verschiedene Zweige mischen sollte eine solche Fehlermeldung
eigentlich nicht auftauchen und ist somit ein Bug.
</p>

</body>
</subsection>
<subsection id="ambiguousebuild">
<title>Doppeldeutige Ebuild Namen</title>
<body>

<pre caption="Portage Warnung über Doppeldeutige Ebuild Namen">
!!! The short ebuild name "aterm" is ambiguous.  Please specify
!!! one of the following fully-qualified ebuild names instead:

    dev-libs/aterm
    x11-terms/aterm
</pre>

<p>
Die Anwendung welche Sie installieren möchten, hat einen Namen der auf mehr als
ein Paket zutrifft. Sie müssen ebenfalls die Kategorie des Paketes angeben.
Portage informiert Sie über mögliche Treffer, aus denen Sie auswählen können.
</p>

</body>
</subsection>
<subsection id="circulardependencies">
<title>Zyklische Abhängigkeiten</title>
<body>

<pre caption="Portage Warnnung zu zyklischen Abhängigkeiten">
!!! Error: circular dependencies:

ebuild / net-print/cups-1.1.15-r2 depends on ebuild / app-text/ghostscript-7.05.3-r1
ebuild / app-text/ghostscript-7.05.3-r1 depends on ebuild / net-print/cups-1.1.15-r2
</pre>

<p>
Zwei (oder mehr) Pakete, die Sie installieren möchten hängen gegenseitig
voneinander ab und können daher nicht installiert werden. Dies ist in den
meisten Fällen ein Bug im Portage Tree. Bitte warten Sie eine Weile und
aktualisieren den Portage Tree dann und versuchen Sie es erneut. Schauen Sie
ebenfalls im <uri link="http://bugs.gentoo.org">Bugzilla</uri>, ob dies ein
bekanntes Problem ist und erstellen einen Bugreport sofern noch keiner
existiert.
</p>

</body>
</subsection>
<subsection id="fetchfailed">
<title>Herunterladen der Quellen schlägt fehl</title>
<body>

<pre caption="Portage Warnung zu Fehlern beim herunterladen der Quellen">
!!! Fetch failed for sys-libs/ncurses-5.4-r5, continuing...
<comment>(...)</comment>
!!! Some fetch errors were encountered.  Please see above for details.
</pre>

<p>
Portage konnte die Quellen für eine bestimmte Anwendung nicht herunterladen und
wird mit dem Installieren der anderen Anwendungen (sofern zutreffend)
fortfahren. Dieser Fehler kann durch einen noch nicht aktualisierten Mirror
oder einen falsche Angabe im Ebuild hervorgerufen werden. Der Server von dem
Sie Quellen herunterladen möchten kann weiterhin aus einem unbekannten Grund
nicht erreichbar sein.
</p>

<p>
Veruschen Sie es in einer Stunde erneut und schauen, ob das Problem noch
besteht.
</p>

</body>
</subsection>
<subsection id="profileprotect">
<title>System Profil Schutz</title>
<body>

<pre caption="Portage Warnung über durch das Profil geschützte Pakete">
!!! Trying to unmerge package(s) in system profile. 'sys-apps/portage'
!!! This could be damaging to your system.
</pre>

<p>
Sie wollen ein Paket deinstallieren, welches zu den wichtigsten Bestandteilen
des System zählt. Es ist in Ihrem Profil als notwendig aufgeführt und sollte
daher nicht deinstalliert werden.
</p>

</body>
</subsection>
</section>
</sections>
