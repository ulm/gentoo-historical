<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- English CVS Version: 1.10 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/handbook/Attic/hb-install-amd64-bootloader.xml,v 1.4 2004/08/28 22:38:09 dertobi123 Exp $ -->

<sections>
<section>
<title>Eine Wahl treffen</title>
<subsection>
<title>Einleitung</title>
<body>

<p>
Nun, da Ihr Kernel konfiguriert und kompiliert ist und die notwendigen
Systemkonfigurationsdateien richtig konfiguriert sind, ist es Zeit ein Programm
zu installieren, dass Ihren Kernel lädt wenn Sie Ihr System starten. Solch ein
Programm nennt man einen <e>Bootloader</e>. Jedoch bevor sie anfangen,
betrachten sie ihre Wahlmöglichkeiten...
</p>

</body>
</subsection>
<subsection>
<title>Optional: Framebuffer</title>
<body>

<p>
<e>Wenn</e> Sie Ihren Kernel mit Framebuffer Unterstützung konfiguriert haben,
müssen Sie das <c>vga</c> Statement zu Ihrer Bootloaderkonfigurationsdatei
hinzufügen, wenn sie Framebuffer benötigen. Die nächste Tabelle listet die
verfügbaren <c>vga</c> Werte auf, die Sie benutzen können. In den
Beispielkonfigurationsdateien benutzen wir <e>800x600 @ 16bpp</e>,
daher <e>788</e>.
</p>

<table>
<tr>
  <ti></ti><th>640x480</th><th>800x600</th><th>1024x768</th><th>1280x1024</th>
</tr>
<tr>
  <th>8 bpp</th><ti>769</ti><ti>771</ti><ti>773</ti><ti>775</ti>
</tr>
<tr>
  <th>16 bpp</th><ti>785</ti><ti>788</ti><ti>791</ti><ti>794</ti>
</tr>
<tr>
  <th>32 bpp</th><ti>786</ti><ti>789</ti><ti>792</ti><ti>795</ti>
</tr>
</table>

<p>
Merken Sie sich diesen Wert (oder schreiben Sie ihn auf), Sie werden ihn wenig
später brauchen.
</p>

</body>
</subsection>
</section>
<section>
<title>Die Benutzung von GRUB</title>
<subsection>
<title>Das Verstehen von GRUBs Terminologie</title>
<body>

<p>
Der wichtigste Teil beim Verstehen von GRUB ist, sich mit der Art vertraut zu
machen, in der GRUB Festplatten und Partitionen benennt. Ihre Linux Partition
<path>/dev/hda1</path> wird <path>(hd0,0)</path> unter GRUB genannt. Beachten
Sie die Klammern um das <path>hd0,0</path>, denn diese sind Pflicht.
</p>

<p>
Festplatten zählen von Null anstatt von "a" und Partitionen starten bei Null
anstatt bei 1. Beachten Sie bitte auch, dass mit den hd-Geräten nur Festplatten
gezählt werden, keine ATAPI-IDE Geräte wie CD-ROM Player oder Brenner.
Dasselbe Modell wird auch bei SCSI Laufwerken verwendet. (Normalerweise
erhalten sie höhere Nummern als IDE Laufwerke, außer wenn das BIOS konfiguriert
ist von SCSI zu booten.)
</p>

<p>
Vorausgesetzt Sie haben eine Festplatte an <path>/dev/hda</path>, einen CD-ROM
Player an <path>/dev/hdb</path>, einen Brenner an <path>/dev/hdc</path>, eine
zweite Festplatte an <path>/dev/hdd</path> und keine SCSI Festplatte, dann wird
<path>/dev/hdd7</path> übersetzt in <path>(hd1,6)</path>. Es mag schwierig
klingen und das ist es in der Tat auch, aber wie wir werden sehen, bietet GRUB
einen Tab-Komplettierungsmechanismus an, der hilfreich ist für diejenigen von
Ihnen die viele Festplatten und Partitionen haben und sich ein wenig verloren
fühlen mit dem Nummerierungssystem von GRUB.
</p>

<p>
Nachdem man dafür jetzt ein Gefühl erlangt hat, ist es nun Zeit GRUB zu
installieren.
</p>

</body>
</subsection>
<subsection>
<title>Installieren von GRUB</title>
<body>

<p>
Um GRUB zu installieren, führen Sie ein emerge aus.
</p>

<pre caption = "Installieren von GRUB">
# <i>emerge grub-static</i>
# <i>cp -Rpv /usr/share/grub/i386-pc/* /boot/grub</i>
</pre>

<p>
Obwohl GRUB nun installiert ist, müssen Sie trotzdem noch eine
Konfigurationsdatei dafür schreiben und GRUB in den MBR installieren, damit
GRUB automatisch Ihren neu erstellten Kernel bootet. Erstellen Sie
<path>/boot/grub/grub.conf</path> mit <c>nano</c> (oder wenn gewünscht
einem anderen Editor):
</p>

<pre caption = "Erstellen von /boot/grub/grub.conf">
# <i>nano -w /boot/grub/grub.conf</i>
</pre>

<p>
Nun wollen wir eine <path>grub.conf</path> schreiben. Folgend finden Sie zwei
mögliche <path>grub.conf</path> für das Partitionierungsbeispiel, das wir in
diesem Leitfaden verwendet haben mit dem Kernel-Image <path>kernel-2.6.5</path>.
Wir werden nur die erste <path>grub.conf</path> ausführlich erläutern.
</p>

<ul>
  <li>
    Die erste <path>grub.conf</path> für Leute, die nicht <c>genkernel</c>
    benutzt haben
  </li>
  <li>
    Die zweite <path>grub.conf</path> ist für Leute, die <c>genkernel</c>
    benutzt haben
  </li>
</ul>

<pre caption = "grub.conf für Nicht-genkernel Benutzer">
<comment># Welcher Eintrag standardmäßig gebootet werden soll. 0 ist der Erste, 1 ist der Zweite usw.</comment>
default 0
<comment># Wieviele Sekunden gewartet werden soll, bevor der Standardeintrag gebootet wird.</comment>
timeout 30
<comment># Eine nettes, fettes Hintergrundbild um die ganze Sache ein wenig zu würzen :)
# Auskommentieren, wenn Sie keine Grafikkarte installiert haben.</comment>
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux 2.6.5
<comment># Partition in der das Kernel-Image (oder das Betriebssystem) vorhanden ist</comment>
root (hd0,0)
kernel (hd0,0)/kernel-2.6.5-gentoo root=/dev/hda3

<comment># Die nächsten drei Zeilen werden nur benötigt wenn Sie einen Dualboot mit einem Windows System einrichten wollen.</comment>
<comment># Hier in diesem Fall liegt Windows auf /dev/hda6.</comment>
title=Windows XP
rootnoverify (hd0,5)
makeactive
chainloader +1
</pre>

<pre caption = "grub.conf genkernel Benutzer">
default 0
timeout 30
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux 2.6.5
root (hd0,0)
kernel (hd0,0)/kernel-2.6.5-gentoo root=/dev/ram0 init=/linuxrc ramdisk=8192 real_root=/dev/hda3
initrd (hd0,0)/initrd-2.6.5-gentoo

<comment># Nur wenn Sie einen Dual-Boot einrichten möchten</comment>
title=Windows XP
rootnoverify (hd0,5)
makeactive
chainloader +1
</pre>

<note>
Wenn Sie ein anderes Partitionierungschema verwenden und/oder Kernel-Image,
passen Sie Ihre Konfiguration entsprechend an. Stellen Sie jedoch sicher, dass
alles was einem GRUB-Device folgt (wie z.B. <path>(hd0,0)</path>) relativ zum
Mountpoint ist, nicht dem Root. Mit anderen Worten,
<path>(hd0,0)/grub/splash.xpm.gz</path> ist in Wirklichkeit
<path>/boot/grub/splash.xpm.gz</path> denn <path>(hd0,0)</path> ist
<path>/boot</path>.
</note>

<p>
Wenn Sie noch zusätzliche Optionen an den Kernel übergeben müssen, fügen Sie
diese einfach zum Ende des Kernelbefehls hinzu. Eine Option übermitteln wir
schon (<c>root=/dev/hda3</c> oder <c>real_root=/dev/hda3</c>), aber Sie können
auch weitere übermittlen. Als Beispiel benutzen wir das <c>vga</c> Statement
für Framebuffer, das wir schon besprochen haben:
</p>

<pre caption = "Hinzufügen des vga Statements als eine Kerneloption">
title=Gentoo Linux
  root (hd0,0)
  kernel (hd0,0)/kernel-2.6.5-gentoo root=/dev/hda3 vga=788
</pre>

<p>
<c>genkernel</c> Benutzer sollten wissen, dass Ihr Kernel die selben
Bootoptionen benutzt wie der auf der LiveCD. Zum Beispiel, wenn Sie SCSI Geräte
haben, sollten Sie <c>doscsi</c> als Kerneloption hinzufügen.
</p>

<p>
Speichern Sie nun die <path>grub.conf</path> Datei und verlassen Sie den
Editor. Sie müssen GRUB noch in den MBR (Master Boot Record) schreiben, so dass
GRUB automatisch beim Systemstart ausgeführt wird.
</p>

<p>
Um GRUB zu installieren führen sie das <c>grub-install</c> Kommando aus.
<c>grub-install</c> wird nicht direkt funktionieren, da wir uns innerhalb einer
chroot Umgebung befinden. Wir müssen <path>/etc/mtab</path> (die Datei die
Informationen über alle gemounteten Dateisysteme enthält) zunächst
aktualisieren: Glücklicherweise gibt es einen recht einfachen Weg dies zu tun -
kopieren Sie einfach <path>/proc/mounts</path> nach <path>/etc/mtab</path>:
</p>

<pre caption="/etc/mtab aktualisieren">
# <i>cp /proc/mounts /etc/mtab</i>
</pre>

<p>
Jetzt können wir GRUB durch <c>grub-install</c> installieren:
</p>

<pre caption="grub-install ausführen">
# <i>grub-install --root-directory=/boot /dev/hda</i>
</pre>

<p>
Wenn Sie weitere Fragen GRUB betreffend haben, konsultieren Sie die <uri
link="http://www.gnu.org/software/grub/grub-faq.html">GRUB FAQ</uri> oder das <uri
link="http://www.gnu.org/software/grub/manual/">GRUB Manual</uri>.
</p>

<p>
Fahren Sie nun mit <uri link="#reboot">Rebooten des Systems</uri> fort.
</p>

</body>
</subsection>
</section>
<section id="reboot">
<title>Rebooten des Systems</title>
<subsection>
<body>

<p>
Verlassen Sie die chroot Umgebung und unmounten Sie alle gemounteten
Partitionen. Danach tippen Sie das magische Kommando ein, auf das Sie solange
gewartet haben: <c>reboot</c>.
</p>

<pre caption="Unmounten aller Partitionen und Rebooten">
# <i>exit</i>
# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
# <i>reboot</i>
</pre>

<p>
Vergessen Sie nicht die bootbare CD aus dem Laufwerk zu nehmen, sonst wird diese
anstatt Ihres neuen Gentoo Systems gestartet.
</p>

<p>
Nachdem Sie in die neue Gentoo Installation gebootet haben schliessen Sie die
Installation mit <uri link="?part=1&amp;chap=11">Abschliessen der Gentoo
Installation</uri> ab.
</p>

</body>
</subsection>
</section>
</sections>
