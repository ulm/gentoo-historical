<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- English CVS Version: 1.8 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/handbook/hb-install-mips-bootloader.xml,v 1.3 2004/11/25 20:08:27 dertobi123 Exp $ -->

<sections>


<version>1.5</version>
<date>2004-10-23</date>

<section>
<title>Das MIPS PROM</title>
<subsection>
<body>

<p>
MIPS benötigt keinen zustätzlich installierten Bootloader. Das MIPS PROM handlet
das Booten, Sie müssen lediglich Ihren Kernel als eine Option installieren.
</p>

<p>
Installieren Sie zunächst <c>dvhtool</c>, dies wird benötigt im den Kernel in SGI Volume
Header zu kopieren.
</p>

<pre caption="dvhtool installieren">
# <i>emerge dvhtool</i>
</pre>

<p>
Kopieren Sie den Kernel nun in SGI Volume Header. Standardmässig geht
<c>dvhtool</c> davon asu, dass der SGI Volume Header auf <path>/dev/sda</path>
liegt. Ist das nicht der Fall (wenn z.B. IRIX auf <path>/dev/sda</path>
und Gentoo/MIPS auf <path>/dev/sdb</path> installiert sind) müssen Sie
<c>dvhtool</c> dies mittels <c>-d &lt;device&gt;</c> mitteilen.
</p>

<pre caption="Kopieren eines Kernel in den SGI Volume Header">
# <i>dvhtool --unix-to-vh &lt;kernel name in /boot&gt; &lt;name you want to give in volume header&gt;</i>
</pre>

<p>
Wenn Sie alle verfügbaren Einträge angezeigt bekommen möchten, benutzen Sie
<c>--print-volume-directory</c>:
</p>

<pre caption="Anzeige aller verfügbaren Einträge">
# <i>dvhtool --print-volume-directory</i>
</pre>

<p>
Um das System zum Booten von Gentoo/MIPS zu bringen müssen Sie einige
Anpassungen im MIPS PROM vornehmen.
</p>

<p>
Fahren Sie nun mit <uri link="#reboot">Rebooten des Systems</uri> fort.
</p>

</body>
</subsection>
</section>
<section id="reboot">
<title>Rebooten des Systems</title>
<subsection>
<body>

<p>
Verlassen Sie die chroot Umgebung und unmounten Sie alle gemounteten
Partitionen. Danach tippen Sie das magische Kommando ein, auf das Sie solange
gewartet haben: <c>reboot</c>.
</p>

<pre caption="Unmounten aller Partitionen und Rebooten">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Anpassen des MIPS PROM</title>
<subsection>
<body>

<p>
Wenn Sie neu gestartet haben gehen Sie in das <e>System Maintenance Menu</e> und
wählen <e>Enter Command Monitor</e> (<c>5</c>). Wenn Sie Ihre neue Gentoo
Installation kurz testen möchten können Sie einfach <c>boot -f &lt;kernel
name&gt;</c> eingeben. Um Ihrem System beizubringen immer die Gentoo
Installation zu booten müssen Sie einige Variablen im MIPS PROM setzen:
</p>

<pre caption="Konfiguration des MIPS PROM">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;root device&gt; = Gentoos Root Partition, z.B. /dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;root device&gt;</i>

<comment>(Um alle verfügbaren Kernel anzuzeigen geben Sie "ls" ein)</comment>
&gt;&gt; <i>setenv OSLoader &lt;kernel name&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;kernel name&gt;</i>

<comment>(Deklarieren Sie die Kernel Parameter)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;kernel parameters&gt;</i>

<comment>(Geben Sie den Pfad zum Volume Header an)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(Automatisches Starten von Gentoo)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(Setzen der Zeitzone)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(Nutzung der seriellen Konsole, Nutzer der Grafikoption wählen ihr "g" anstelle von "d1")</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
Nachdem Sie in die neue Gentoo Installation gebootet haben schliessen Sie die
Installation mit <uri link="?part=1&amp;chap=11">Abschliessen der Gentoo
Installation</uri> ab.
</p>

</body>
</subsection>
</section>
</sections>
