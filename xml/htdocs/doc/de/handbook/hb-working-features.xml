<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- English CVS Version: 1.25 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/handbook/hb-working-features.xml,v 1.6 2004/11/25 20:08:27 dertobi123 Exp $ -->

<sections>

<version>1.22</version>
<date>2004-10-24</date>

<section>
<title>Portage Features</title>
<body>

<p>
Portage hat einige zusätzliche Features, die das Gentoo Erlebnis noch ein wenig
besser machen. Viele dieser Features beruhen auf Software Tools um die
Performance, Funktionssicherheit, Sicherheit, etc. zu verbessern.
</p>

<p>
Um diese Portage Features zu aktivieren oder deaktivieren müssen Sie die
<c>FEATURES</c> Variable in <path>/etc/make.conf</path> anpassen. In vielen
Fällen müssen Sie ebenfalls zusätzliche Software installieren.
</p>

<p>
Nicht alle Features, die Portage anbietet werden hier aufgelistet. Für einen
vollständigen Überblick schauen Sie in die <path>make.conf</path> Manpage:
</p>

<pre caption="Lesen der make.conf Manpage">
$ <i>man make.conf</i>
</pre>

<p>
Um herauszufinden, welche FEATURES per default aktiviert sind führen Sie
<c>emerge info</c> aus und suchen Sie nach der FEATURES Variable, oder filtern
diese aus:
</p>

<pre caption="Herausfinden welche FEATURES bereits aktiv sind">
$ <i>emerge info | grep FEATURES</i>
</pre>

</body>
</section>
<section>
<title>Distributed Compiling</title>
<subsection>
<title>Benutzung von distcc</title>
<body>

<p>
<c>distcc</c> ist ein Programm das "Kompilierungen" über mehrere, nicht
notwendigerweise identische Computer, über ein Netzwerk verteilt. Der
<c>distcc</c> - Client sendet alle notwendigen Informationen zu den
erreichbaren distcc - Servern (die den <c>distccd</c> laufen haben), so
dass diese Teile des Quellcodes vom Client kompilieren können. Als Resultat
wird Zeit beim Kompilieren eingespart.
</p>

<p>
Sie finden tiefer gehende Informationen über <c>distcc</c> (und wie Sie es bei
Gentoo zum Laufen bringen) in unserer <uri link="/doc/de/distcc.xml">Gentoo
distcc Dokumentation</uri>.
</p>

</body>
</subsection>
<subsection>
<title>distcc installieren</title>
<body>

<p>
Distcc bringt einen grafischen Monitor mit, der Sie über alle Aufgaben
informiert, die der Computer zum Kompilieren wegsendet. Falls Sie
Gnome benutzen, setzen Sie 'gnome' in Ihrer USE Variable.
Wenn Sie nicht Gnome nutzen, den Monitor aber trotzdem haben
wollen, sollten Sie 'gtk' in Ihrer USE Variable setzen.
</p>

<pre caption="distcc installieren">
# <i>emerge distcc</i>
</pre>

</body>
</subsection>
<subsection>
<title>Unterstützung für Portage aktivieren</title>
<body>

<p>
Fügen Sie <c>distcc</c> der FEATURES Variable in <path>/etc/make.conf</path>
hinzu. Anschliessen editieren Sie die MAKEOPTS Variable entsprechend Ihren
Wünschen. In den meisten Fällen ist es hinreichend "-jX" anzugeben, wobei X der
Nummer der der CPUs die den <c>distccd</c> ausführen entsprechen (inklusive dem
aktuellen Host) plus eins, möglicherweise haben Sie mit anderen Werten bessere
Ergebnisse.
</p>

<p>
Nun rufen Sie <c>distcc-config</c> auf und tragen eine Liste der verfügbaren
Server ein. Als einfaches Beispiel nehmen wir einmal an, dass die verfügbaren
distcc Server <c>192.168.1.102</c> (der momentane Host),
<c>192.168.1.103</c> und <c>192.168.1.104</c> (zwei "entfernte" Hosts) sind:
</p>

<pre caption="distcc für die Nutzung dreier verfügbarer dsitcc Server konfigurieren">
# <i>distcc-config --set-hosts "192.168.1.102 192.168.1.103 192.168.1.104"</i>
</pre>

<p>
Vergessen Sie bitte nicht, auch den <c>distccd</c> - Dämonen zu starten:
</p>

<pre caption="distcc Dämonen starten">
# <i>rc-update add distccd default</i>
# <i>/etc/init.d/distccd start</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Caching Compilation</title>
<subsection>
<title>Über ccache</title>
<body>

<p>
<c>ccache</c> ist ein schneller Compiler - Cache. Wenn Sie ein Programm
kompilieren, werden Zwischenresultate gecacht, so dass bei einer Rekompilierung
des Programms die Zeit zum Kompilieren viel kürzer ist. Das kann bei normalen
Kompilierungen eine 5 bis 10 Mal schnellere Kompilierung ausmachen.
</p>

<p>
Falls Sie an den Vor- und Nachteilen von <c>ccache</c> interessiert sind,
besuchen Sie bitte die <uri link="http://ccache.samba.org">ccache Homepage</uri>.
</p>

</body>
</subsection>
<subsection>
<title>ccache installieren</title>
<body>

<p>
Zur Installation von <c>ccache</c> führen Sie <c>emerge ccache</c> aus:
</p>

<pre caption="ccache installieren">
# <i>emerge ccache</i>
</pre>

</body>
</subsection>
<subsection>
<title>Unterstützung für Portage aktivieren</title>
<body>

<p>
Öffnen Sie <path>/etc/make.conf</path> und fügen Sie <c>ccache</c> zu
<c>FEATURES</c> hinzu. Anschliessen erstellen Sie eine neue Variable namens
CCACHE_SIZE und setzen diese auf "2G":
</p>

<pre caption="CCACHE_SIZE in /etc/make.conf editieren">
CCACHE_SIZE="2G"
</pre>

<p>
Um zu schauen ob ccache funktioniert, fragen Sie ccache nach Statistiken:
</p>

<pre caption="Ccache - Statistiken anschauen">
# <i>ccache -s</i>
</pre>

</body>
</subsection>
<subsection>
<title>Nutzung von ccache ausserhalb von Portage</title>
<body>

<p>
Wenn Sie ccache für Kompilierungen ausserhalb von Portage nutzen möchten fügen
Sie <path>/usr/lib/ccache/bin</path> dem Beginn der PATH Variable hinzu (vor
<path>/usr/bin</path>). Dies kann durch Editieren von
<path>/etc/env.d/00basic</path> erreicht werden:
</p>

<pre caption="Editieren von /etc/env.d/00basic">
PATH="/usr/local/bin:/opt/bin<i>:/usr/lib/ccache/bin</i>"
</pre>

</body>
</subsection>
</section>
<section>
<title>Binäre Pakete</title>
<subsection>
<title>Binärpakete erstellen</title>
<body>

<p>
Portage unterstützt die Installation von vorkompilierten Paketen. Obwohl Gentoo
keine vorkompilierten Pakete anbietet (mit Ausnahme der GRP Schnappschüsse) ist
die Funktion vollständig implementiert.
</p>

<p>
Um ein vorkompiliertes Paket zu erstellen können Sie <c>quickpg</c> benutzen,
sofern das Programm bereits in Ihrem System installiert ist oder Sie benutzen
die <c>--buildpkg</c> oder <c>--buildpkgonly</c> Optionen.
</p>

<pre caption="Gnumeric installieren und ein Binärpaket dazu erstellen">
# <i>emerge --buildpkg gnumeric</i>
</pre>

<p>
Falls Sie wollen, dass Portage dies standardmäßig macht, sollten Sie das
Schlüsselword <c>buildpkg</c> in der FEATURES Variablen setzen.
</p>

<p>
Erweiterte Unterstützung zum Erstellen von vorkompilierten Paketen finden Sie in
<c>catalyst</c>. Für weitere Informationen zu <c>catalyst</c> lesen Sie das <uri
link="http://www.gentoo.org/proj/en/releng/catalyst/reference.xml">Catalyst
Reference Manual</uri> und <uri link="http://www.gentoo.org/proj/en/releng/catalyst/catalyst-howto.xml">
Catalyst Howto</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Vorkompilierte Pakete Installieren</title>
<body>

<p>
Auch wenn Gentoo keine anbietet, Sie können ein zentrales Repository anlegen, in
dem Sie vorkompilierte Pakete ablegen. Wenn Sie dieses Repository nutzen möchten
müssen Sie Portage mit der PORTAGE_BINHOST Variable den Ort des Repository
bekannt machen. Wenn sich die Pakete zum Beispiel auf ftp://buildhost/gentoo
befinden:
</p>

<pre caption="Setzen der PORTAGE_BINHOST Variable in /etc/make.conf">
PORTAGE_BINHOST="ftp://buildhost/gentoo"
</pre>

<p>
Wenn Sie vorkompilierte Pakete installieren wollen fügen Sie <c>--getbinpkg</c>
Option an das entsprechende emerge Kommando (welches ebenfalls <c>--usepkg</c>
enthalten muss) an. Die erste Option weist Portage an ein Binärpaket
herunterzuladen, die zweite zuerst zu versuchen ein Binärpaket zu installieren,
bevor Sourcen heruntergeladen und kompiliert werden.
</p>

<p>
Um zum Beispiel <c>gnumeric</c> mit vorkompilierten Paketen zu installieren:
</p>

<pre caption="Installing the gnumeric prebuilt package">
# <i>emerge --usepkg --getbinpkg gnumeric</i>
</pre>

<p>
Weitere Informationen zur Binärpaket Funktionalität von <c>emerge</c> finden Sie
in der emerge Manpage:
</p>

<pre caption="Lesen der emerge Manpage">
$ <i>man emerge</i>
</pre>

</body>
</subsection>
</section>
</sections>
