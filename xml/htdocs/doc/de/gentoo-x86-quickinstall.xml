<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/gentoo-x86-quickinstall.xml,v 1.27 2007/05/20 09:28:52 keytoaster Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<!-- English CVS Version: 1.76 -->

<guide link="/doc/de/gentoo-x86-quickinstall.xml" lang="de">
<title>Gentoo Linux: x86 Kurz-Leitfaden zur Installation</title>

<author title="Autor">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>
<author title="Autor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Autor">Steven Wagner</author>
<author title="Übersetzer">
  <mail link="dertobi123@gentoo.org">Tobias Scherbaum</mail>
</author>
<author title="Übersetzer">
  Sebastian Westermayer
</author>
<author title="Übersetzer">
  <mail link="stefangasten@web.de">Stefan Gasten</mail>
</author>
<author title="Korrektor">
  <mail link="grahl@gentoo.org">Jan Hendrik Grahl</mail>
</author>
<author title="Übersetzer">
  <mail link="keytoaster@gentoo.org">Tobias Heinlein</mail>
</author>

<abstract>
Der Kurz-Leitfaden zur Installation beschreibt den Gentoo
Installationsprozess in einer sehr knapp gehaltenen Form. Er hat die Absicht
Benutzern sofort zu erlauben eine stage3-Installation durchzuführen. Benutzer
die dieser Anleitung folgen möchten, sollten bereits Erfahrungen in der
Installation von Gentoo Linux haben.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>19</version>
<date>2007-05-19</date>

<chapter>
<title>Einleitung</title>
<section>
<body>

<p>
Dieser Leitfaden beinhaltet alle Befehle, die Sie verwenden sollten, um eine
vollständige stage3-Installation Gentoo's durchzuführen. Sie benötigen eine
Verbindung ins Internet um das stage3 und den Portage-Snapshot herunterzuladen.
</p>

<p>
Die time-Ausgaben folgen auf alle Befehle, die mehr als ein paar Sekunden
brauchen. Die Befehle wurden auf einem AMD 2000 1,66 GHz PC mit 512 MB RAM und
einem Hardware-Controller mit 2 S-ATA-Festplatten gestoppt.
</p>

<pre caption="Gerätespezifikationen testen">
<comment>(Die folgenden Spezifikationen und Zeit-Informationen sollten Ihnen
helfen die Zeit, die Sie brauchen werden, um die Installation abzuschließen,
grob einzuschätzen.)</comment>

# <i>grep bogo /proc/cpuinfo</i>
bogomips       : 3337.81

# <i>hdparm -tT /dev/sda</i>
/dev/sda:
 Timing cached reads:   1100 MB in  2.00 seconds = 549.97 MB/sec
 Timing buffered disk reads:  224 MB in  3.01 seconds =  74.36 MB/sec

# <i>grep MemTotal /proc/meminfo</i>
MemTotal:       509248 kB
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Kurz-Leitfaden zur Installation</title>
<section>
<title>Installationsmedium</title>
<body>

<p>
Laden Sie sich eine CD von einem unserer
<uri link="/main/en/mirrors.xml">Mirrors</uri>.
Die Minimal-CD-ISO finden Sie in
<path>releases/x86/&lt;release&gt;/installcd</path> oder die LiveCD-Iso in
<path>releases/x86/&lt;release&gt;/livecd</path>. Die
<e>Minimal</e>-Installations-CD ist nur für Internet-basierte Installationen
nützlich. Sie können die <e>LiveCD</e> für eine netzwerklose
Installation, wie im
<uri link="/doc/de/handbook/2007.0/handbook-x86.xml">2007.0 x86
Installations-Handbuch</uri> dokumentiert, verwenden. Die Minimal-CD wird
empfohlen.
</p>

<p>
<uri link="/doc/de/faq.xml#isoburning">Brennen</uri> Sie die CD und booten
anschließend damit.
</p>

</body>
</section>
<section>
<title>Die CD booten</title>
<body>

<p>
Drücken Sie <c>F2</c> beim Boot-Bildschirm für die Boot-Optionen. Sie können
entweder <c>gentoo</c>, oder <c>gentoo-nofb</c> starten, letzteres deaktiviert
den Framebuffer. Wenn Sie die LiveCD gebootet haben, vergessen Sie nicht die
<c>nox</c>-Option hinzuzufügen, um zu verhindern, dass die graphische X-Umgebung
gestartet wird. Wenn alles glatt läuft, wird Ihre Hardware erkannt und alle
Module geladen. Wenn der Kernel nicht richtig bootet, oder Ihr Computer während
des Boot-Vorgangs hängen bleibt, werden Sie u.U. verschiedene Konfigurationen
versuchen müssen. Der vielleicht sicherste Weg ist, die <c>nodetect</c>-Option
zu verwenden und die benötigten Module explizit zu laden.
</p>

<pre caption="Die Minimal-CD booten">
Gentoo Linux Installation LiveCD                     http://www.gentoo.org
Enter to Boot; F1 for kernels  F2 for options.
boot: <i>gentoo-nofb</i>
  <comment>(oder, im Falle von Problemen)</comment>
boot: <i>gentoo-nofb nodetect</i>
</pre>

</body>
</section>
<section>
<title>Optional: Module laden</title>
<body>

<p>
Wenn Sie den <c>nodetect</c>-Option verwendet haben, laden Sie die benötigten
Module, sobald gebootet. Sie müssen den Netzwerkbetrieb aktivieren und Zugriff
auf Ihre Festplatten haben. Der <c>lspci</c>-Befehl kann Ihnen helfen, Ihre
Hardware zu identifizieren.
</p>

<pre caption="Benötigte Module laden">
livecd root # <i>lspci</i>
<comment>(Benutzen Sie lspci's Ausgabe, um die benötigten Module aus zu machen)</comment>

<comment>(Das Folgende ist ein Beispiel, passen Sie es an Ihre Hardware an)</comment>
livecd root # <i>modprobe 3w-9xxx</i>
livecd root # <i>modprobe r8169</i>
</pre>

</body>
</section>
<section>
<title>Netzwerk Konfiguration</title>
<body>

<p>
Falls Ihr Netzwerkzugriff noch nicht funktioniert, können Sie
<c>net-setup</c> benutzen um Ihr Netzwerk zu konfigurieren. Möglicherweise
müssen Sie vor der Konfiguration mit <c>modprobe</c> Treiber für Ihre
Netzwerkkarte laden. Wenn Sie ADSL haben, benutzen Sie <c>pppoe-setup</c> und
<c>pppoe-start</c>. Für PPTP-Unterstützung bearbeiten Sie zuerst
<path>/etc/ppp/chap-secrets</path> und <path>/etc/ppp/options.pptp</path> und
führen danach <c>pptp &lt;server&nbsp;ip&gt;</c> aus.
</p>

<p>
Für WLAN Zugriff starten Sie <c>iwconfig</c> um die WLAN Parameter zu setzen und
starten danach entweder <c>net-setup</c> erneut oder führen <c>ifconfig</c>,
<c>dhcpcd</c> und/oder <c>route</c> manuell aus.
</p>

<p>
Befinden Sie sich hinter einem Proxy, sollten Sie nicht vergessen Ihr System mit
<c>export http_proxy</c>, <c>ftp_proxy</c> und <c>RSYNC_PROXY</c> zu
initialisieren.
</p>

<pre caption="Konfigurieren des Netzwerkbetriebes nach Anweisung">
livecd root # <i>net-setup eth0</i>
</pre>

<p>
Alternativ können Sie den Netzwerkbetrieb manuell starten. Das folgende Beispiel
weist Ihrem PC die IP-Adresse 192.168.1.10 zu und definiert 192.168.1.1 als
Ihren Router und Name-Server.
</p>

<pre caption="Den Netzwerkbetrieb manuell konfigurieren">
livecd root # <i>ifconfig eth0 192.168.1.10/24</i>
livecd root # <i>route add default gw 192.168.1.1</i>
livecd root # <i>echo nameserver 192.168.1.1 &gt; /etc/resolv.conf</i>
</pre>

<p>
Die Installations-CD erlaubt es einen <c>sshd</c>-Server zu starten, zusätzliche
Benutzer hinzuzufügen, <c>irssi</c> (einen Kommandozeilen Chat-Client) zu
benutzen und mittels <c>lynx</c>, oder <c>links</c> im Web zu surfen.
</p>

</body>
</section>
<section>
<title>Optional: Verbinden Sie sich mit Ihrem neuen System über ssh</title>
<body>

<p>
Das interessanteste Feature ist natürlich <c>sshd</c>. Sie können ihn starten
und dann von einer anderen Maschine aus verbinden und Befehle dieses Leitfadens
einfügen.
</p>

<pre caption="sshd starten">
livecd root # <i>time /etc/init.d/sshd start</i>
 * Generating hostkey ...
<comment>(sshd generiert den Schlüssel und zeigt mehr an)</comment>
 * starting sshd ...                            [ok]

real   0m13.688s
user   0m9.420s
sys    0m0.090s
</pre>

<p>
Setzen Sie jetzt das root-Passwort auf der LiveCD, damit Sie von einem anderen
PC dorthin verbinden können. Beachten Sie bitte, dass es unter normalen
Umständen nicht empfohlen wird, Root zu erlauben sich über ssh zu verbinden.
Wenn Sie Ihrem lokalen Netzwerk nicht trauen, verwenden Sie ein langes,
komplexes Passwort. Sie sollten dies nur ein mal verwenden, da es nach dem
ersten Neustart verschwunden sein wird.
</p>

<pre caption="Das Root-Passwort setzen">
livecd root # <i>passwd</i>
New UNIX password: <comment>Geben_Sie_ein_Passwort_ein</comment>
Retype new UNIX password: <comment>Geben_Sie_ein_Passwort_ein</comment>
passwd: password updated successfully
</pre>

<p>
Jetzt können Sie auf einem anderen PC ein Terminal starten und zu Ihrem neuen
System verbinden. Folgen Sie dem Rest des Leitfadens in einem anderen Fenster
und führen Sie die kopierten Befehle aus.
</p>

<pre caption="Verbinden Sie zu Ihrem neuen System von einem anderen PC">
<comment>(Verwenden Sie die IP-Adresse Ihres neuen Systems)</comment>
$ <i>ssh root@192.168.1.10</i>
The authenticity of host '192.168.1.10 (192.168.1.10)' can't be established.
RSA key fingerprint is 96:e7:2d:12:ac:9c:b0:94:90:9f:40:89:b0:45:26:8f.
Are you sure you want to continue connecting (yes/no)? <i>yes</i>
Warning: Permanently added '192.168.1.10' (RSA) to the list of known hosts.
Password: <comment>Geben_Sie_ein_Passwort_ein</comment>
</pre>

</body>
</section>
<section>
<title>Vorbereitung der Festplatten</title>
<body>

<p>
Benutzen Sie <c>fdisk</c> oder <c>cfdisk</c> um Ihr Partitionslayout anzulegen.
Sie benötigen mindestens eine Swappartition (Typ 82) und eine Linuxpartition
(Typ 83). Das folgende Szenario erstellt eine <path>/boot</path>-, eine swap-
und eine Hauptpartition wie im Handbuch. Der Laufwerksname ist wahrscheinlich
<path>/dev/sda</path> bei S-ATA oder SCSI, oder <path>/dev/hda</path> bei einer
IDE-Festplatte.
</p>

<pre caption="Die Partitionen erstellen">
livecd ~ # <i>fdisk /dev/sda</i>

<comment>(Der Rest des Leitfadens verwendet folgendes Partitions-Schema)</comment>
livecd ~ # <i>fdisk -l /dev/sda</i>

Disk /dev/sda: 599.9 GB, 599978409984 bytes
255 heads, 63 sectors/track, 72943 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1               1          12       96358+  83  Linux
/dev/sda2              13         110      787185   82  Linux swap / Solaris
/dev/sda3             111       72943   585031072+  83  Linux
</pre>

<p>
Nutzen Sie <c>mke2fs</c>, <c>mke2fs -j</c>, <c>mkreiserfs</c>, <c>mkfs.xfs</c>
und <c>mkfs.jfs</c> um Dateisysteme auf den Linuxpartitionen zu erstellen.
Initialisieren Sie die Swappartiton mit <c>mkswap</c> und <c>swapon</c>.
</p>

<pre caption="Das Dateisystem erstellen und swap aktivieren">
<comment>(Auf der /boot-Partition brauchen Sie lediglich ext2)</comment>
livecd ~ # <i>mke2fs /dev/sda1</i>

<comment>(Lassen Sie uns ext3 auf der Hauptpartition verwenden)</comment>
livecd ~ # <i>mke2fs -j /dev/sda3</i>

<comment>(swap erstellen und aktivieren)</comment>
livecd ~ # <i>mkswap /dev/sda2 &amp;&amp; swapon /dev/sda2</i>
</pre>

<p>
Mounten Sie das frisch angelegte Dateisystem nach <path>/mnt/gentoo</path>.
Legen Sie Verzeichnisse für die anderen Mountpunkte (wie
<path>/mnt/gentoo/boot</path>) an, falls Sie diese benötigen, und mounten Sie
auch diese.
</p>

<pre caption="Die Dateisysteme einhängen">
livecd ~ # <i>mount /dev/sda3 /mnt/gentoo</i>
livecd ~ # <i>mkdir /mnt/gentoo/boot</i>
livecd ~ # <i>mount /dev/sda1 /mnt/gentoo/boot</i>
</pre>

</body>
</section>
<section>
<title>Einrichten der Stage</title>
<body>

<p>
Stellen Sie mit <c>date MMDDhhmmYYYY</c> zunächst sicher, dass Datum und Zeit
korrekt sind. Benutzen Sie die UTC-Zeit.
</p>

<pre caption="Setzen des Datums und der UTC-Zeit">
<comment>(Überprüfen Sie die Zeit)</comment>
livecd ~ # <i>date</i>
Mon Mar  6 00:14:13 UTC 2006

<comment>(Setzen Sie, wenn nötig, das aktuelle Datum und die Zeit)</comment>
livecd ~ # <i>date 030600162006</i> <comment>(Format is MMDDhhmmYYYY)</comment>
Mon Mar  6 00:16:00 UTC 2006
</pre>

<p>
Laden Sie nun ein stage von einem unserer
<uri link="/main/en/mirrors.xml">Mirrors</uri> herunter.
Gehen Sie nach <path>/mnt/gentoo</path> und entpacken Sie das stage mit
<c>tar xjpf &lt;stage3-Tarball&gt;</c>.
</p>

<pre caption="Das stage3-Archiv herunterladen">
livecd ~ # <i>cd /mnt/gentoo</i>
livecd gentoo # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
<comment>(Wählen Sie einen Mirror, wechseln Sie in das Verzeichnis
releases/x86/current/stages, selektieren Sie das stage3 Ihrer Wahl, vermutlich
das i686 stage3, und drücken Sie D um es herunterzuladen)</comment>

<comment>(<b>Oder</b>, beziehen Sie es mit wget auf direktem Wege, ohne einen
nahegelegenen Mirror auszusuchen)</comment>
livecd ~ # <i>cd /mnt/gentoo</i>
livecd gentoo # <i>wget http://gentoo.osuosl.org/releases/x86/current/stages/stage3-i686*tar.bz2</i>
</pre>

<pre caption="Das stage3-Archiv entpacken">
livecd gentoo # <i>time tar xjpf stage3*</i>

real  1m13.157s
user  1m2.920s
sys   0m7.230s
</pre>

<p>
Installieren Sie den neusten Portage-Snapshot. Gehen Sie wie beim stage3-Archiv
vor: Wählen Sie einen nahegelegenen Mirror aus unserer <uri
link="/main/en/mirrors.xml">Liste</uri>, beziehen Sie den neusten Snapshot und
entpacken Sie ihn.
</p>

<pre caption="Den neusten Portage-Snapshot herunterladen">
livecd gentoo # <i>cd /mnt/gentoo/usr</i>
livecd usr # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
<comment>(Wählen Sie einen Mirror, wechseln Sie in das Verzeichnis snapshots/,
selektieren Sie <b>portage-latest.tar.bz2</b> und drücken Sie D um ihn
herunterzuladen)</comment>

<comment>(<b>Oder</b>, beziehen Sie es mit wget auf direktem Wege, ohne einen
nahegelegenen Mirror auszusuchen)</comment>
livecd gentoo # <i>cd /mnt/gentoo/usr</i>
livecd usr # <i>wget http://gentoo.osuosl.org/snapshots/portage-latest.tar.bz2</i>
</pre>

<pre caption="Den Portage-Snapshot entpacken">
livecd usr # <i>time tar xjf portage*</i>

real  0m51.523s
user  0m28.680s
sys   0m12.840s
</pre>

</body>
</section>
<section>
<title>Chrooten</title>
<body>

<p>
Mounten Sie das <path>/proc</path> Dateisystem, kopieren Sie die Datei
<path>/etc/resolv.conf</path> herüber und chrooten Sie dann in Ihre
Gentoo-Umgebung.
</p>

<pre caption="Chroot">
livecd usr # <i>cd /</i>
livecd / # <i>mount -t proc proc /mnt/gentoo/proc</i>
livecd / # <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/</i>
livecd / # <i>chroot /mnt/gentoo /bin/bash</i>
livecd / # <i>env-update &amp;&amp; source /etc/profile</i>
>>> Regenerating /etc/ld.so.cache...
</pre>

</body>
</section>
<section>
<title>Die Zeitzone setzen</title>
<body>

<p>
Setzen Sie Ihre Zeitzone, indem Sie den korrekten Eintrag in
<path>/usr/share/zoneinfo</path> verwenden.
</p>

<pre caption="Die Zeitzone setzen">
livecd / # <i>ls /usr/share/zoneinfo</i>
<comment>(z.B. Brüssel)</comment>
livecd / # <i>cp /usr/share/zoneinfo/Europe/Brussels /etc/localtime</i>

livecd / # <i>date</i>
Wed Mar  8 00:46:05 CET 2006
</pre>

<p>
Bearbeiten Sie <path>/etc/conf.d/clock</path>, um die Zeitzone, die Sie vorhin
benutzt hatten, zu definieren.
</p>

<pre caption="Bearbeiten von /etc/conf.d/clock">
livecd / # <i>nano -w /etc/conf.d/clock</i>
TIMEZONE="Europe/Brussels"
</pre>

</body>
</section>
<section>
<title>Den Host- und Domain-Namen setzen</title>
<body>

<p>
Setzen Sie Ihren Hostnamen in <path>/etc/conf.d/hostname</path> und
<path>/etc/hosts</path>. Im folgenden Beispiel verwenden wir <c>mybox</c> als
Hostnamen und <c>at.myplace</c> als Domainnamen. Sie können die
Konfigurationsdatei entweder mit <c>nano</c> editieren, oder Sie verwenden die
folgenden Befehle:
</p>

<pre caption="Den Host- und Domain-Namen setzen">
livecd / # <i>cd /etc</i>
livecd etc # <i>echo "127.0.0.1 mybox.at.myplace mybox localhost" > hosts</i>
livecd etc # <i>sed -i -e 's/HOSTNAME.*/HOSTNAME="mybox"/' conf.d/hostname</i>
<comment>(Benutzen Sie den gesetzten Hostnamen und überprüfen Sie ihn)</comment>
livecd etc # <i>hostname mybox</i>
livecd etc # <i>hostname -f</i>
mybox.at.myplace
</pre>

</body>
</section>
<section>
<title>Kernel-Konfiguration</title>
<body>

<p>
Installieren Sie eine Kernel-Quelle (normalerweise <c>gentoo-sources</c>),
konfigurieren Sie sie und kopieren Sie die Datei
<path>arch/i386/boot/bzImage</path> nach <path>/boot</path>.
</p>

<pre caption="Kernel-Quelle installieren, kompilieren und einrichten">
livecd etc # <i>time emerge gentoo-sources</i>

real  2m51.435s
user  0m58.220s
sys   0m29.890s
livecd etc # <i>cd /usr/src/linux</i>
livecd linux # <i>make menuconfig</i>
<comment>(Konfigurieren Sie Ihren Kernel)</comment>
livecd linux # <i>time make -j2</i>

<comment>(Die verstrichene Zeit hängt maßgeblich von den, von Ihnen gewählten,
Optionen ab)</comment>
real  3m51.962s
user  3m27.060s
sys   0m24.310s

livecd linux # <i>make modules_install</i>
livecd linux # <i>cp arch/i386/boot/bzImage /boot/kernel</i>
</pre>

</body>
</section>
<section>
<title>Das System konfigurieren</title>
<body>

<p>
Editieren Sie Ihre <c>/etc/fstab</c> und ersetzen Sie <c>BOOT</c>, <c>ROOT</c>
und <c>SWAP</c> durch die tatsächlichen Partitionsnamen. Vergessen Sie nicht, zu
überprüfen, dass die Dateisysteme Ihrer Installation entsprechen.
</p>

<pre caption="Beispiel-fstab">
livecd linux # <i>cd /etc</i>
livecd etc # <i>nano -w fstab</i>
/dev/<i>sda1</i>   /boot     ext2    noauto,noatime     1 2
/dev/<i>sda3</i>   /         ext3    noatime            0 1
/dev/<i>sda2</i>   none      swap    sw                 0 0
</pre>

<p>
Konfigurieren Sie Ihr Netzwerk in <path>/etc/conf.d/net</path>. Fügen Sie
das <c>net.eth0</c>-Initscript dem default-Runlevel hinzu. Wenn Sie mehrere NICs
haben, legen Sie symbolische Links auf <c>net.eth0</c> an und fügen Sie auch sie
dem default-Runlevel hinzu. Editieren Sie <path>/etc/conf.d/net</path> entweder
mit nano, oder verwenden Sie die folgenden Befehle.
</p>

<pre caption="Den Netzwerkbetrieb konfigurieren">
livecd etc # <i>cd conf.d</i>
livecd conf.d # <i>echo 'config_eth0=( "192.168.1.10/24" )' >> net</i>
livecd conf.d # <i>echo 'routes_eth0=( "default via 192.168.1.1" )' >> net</i>
livecd conf.d # <i>rc-update add net.eth0 default</i>
<comment>(Wenn Sie den Treiber Ihrer Netzwerkkarte als Modul kompiliert haben,
fügen Sie es /etc/modules.autoload.d/kernel-2.6 hinzu)</comment>
livecd conf.d # <i>echo r8169 >> /etc/modules.autoload.d/kernel-2.6</i>
<comment>(Wenn Sie sich nach dem Neustart Ihres System mit ssh wiederverbinden
möchten:)</comment>
livecd conf.d # <i>rc-update add sshd default</i>
</pre>

<note>
Emergen Sie <c>pcmciautils</c>, wenn Sie Unterstützung für PCMCIA-Karten
benötigen.
</note>

<p>
Setzen Sie mittels <c>passwd</c> das Root-Passwort.
</p>

<pre caption="Das Root-Passwort setzen">
livecd conf.d # <i>passwd</i>
New UNIX password: <comment>Geben_Sie_ein_Passwort_ein</comment>
Retype new UNIX password: <comment>Geben_Sie_ein_Passwort_ein</comment>
passwd: password updated successfully
</pre>

<p>
Überprüfen Sie die System-Konfiguration in <path>/etc/rc.conf</path>,
<path>/etc/conf.d/rc</path>, <path>/etc/conf.d/keymaps</path> und editieren Sie
die Dateien gegebenenfalls.
</p>

<pre caption="Optional: Weitere Konfiguartionsdateien editieren">
livecd conf.d # <i>nano -w /etc/rc.conf</i>
livecd conf.d # <i>nano -w /etc/conf.d/rc</i>
livecd conf.d # <i>nano -w /etc/conf.d/keymaps</i>
</pre>

</body>
</section>
<section>
<title>System-Tools installieren</title>
<body>

<p>
Installieren Sie einen System-Logger, wie <c>syslog-ng</c>, und einen
Cron-Dämon, wie <c>vixie-cron</c>, und fügen Sie diese dem default-Runlevel
hinzu.
</p>

<note>
Cron-Dämonen beruhen auf einem MTA. <c>mail-mta/ssmtp</c> wird als Abhängigkeit
installiert werden. Wenn Sie einen fortgeschritteneren MTA verwenden möchten,
könnten Sie ihn jetzt installieren. Wenn Sie in Eile sind, lassen Sie ssmtp
installieren und entfernen Sie ihn später, wenn Sie den MTA Ihrer Wahl
installieren.
</note>

<pre caption="Einen System-Logger und einen Cron-Dämon installieren">
livecd conf.d # <i>time emerge syslog-ng vixie-cron</i>

real  1m52.699s
user  1m1.630s
sys   0m35.220s
livecd conf.d # <i>rc-update add syslog-ng default</i>
livecd conf.d # <i>rc-update add vixie-cron default</i>
</pre>

<p>
Installieren Sie die notwendigen Dateisystem- (<c>xfsprogs</c>,
<c>reiserfsprogs</c>, oder <c>jfsutils</c>) und Netzwerk-Tools (<c>dhcpcd</c>
oder <c>ppp</c>), wenn Sie diese benötigen.
</p>

<pre caption="ggf. weitere Tools installieren">
livecd conf.d # <i>emerge xfsprogs</i>           <comment>(Wenn Sie das XFS-Dateisystem verwenden)</comment>
livecd conf.d # <i>emerge jfsutils</i>           <comment>(Wenn Sie das JFS-Dateisystem verwenden)</comment>
livecd conf.d # <i>emerge reiserfsprogs</i>      <comment>(Wenn Sie das ReiserFS-Dateisystem verwenden)</comment>
livecd conf.d # <i>emerge dhcpcd</i>             <comment>(Wenn Sie einen DHCP-Client benötigen)</comment>
livecd conf.d # <i>emerge ppp</i>                <comment>(Wenn Sie eine PPPoE-ADSL-Verbindung benötigen)</comment>
</pre>

</body>
</section>
<section>
<title>Den Bootloader konfigurieren</title>
<body>

<p>
Emergen Sie <c>grub</c>, oder <c>lilo</c>. Konfigurieren Sie entweder
<path>/boot/grub/grub.conf</path>, oder <path>/etc/lilo.conf</path> und
installieren Sie den Bootloader, den Sie emerged haben.
</p>

<p>
<b>1. grub verwenden</b>
</p>

<pre caption="grub emergen und dessen Konfigurations-Datei editieren">
livecd conf.d # <i>time emerge grub</i>

real  1m8.634s
user  0m39.460s
sys   0m15.280s
livecd conf.d # <i>nano -w /boot/grub/grub.conf</i>
</pre>

<pre caption="Beispiel-grub.conf">
default 0
timeout 10

title=Gentoo
root (hd0,0)
kernel /boot/kernel root=/dev/sda3
</pre>

<pre caption="grub installieren">
livecd conf.d # <i>grub</i>
Probing devices to guess BIOS drives. This may take a long time.

grub> <i>root (hd0,0)</i>
 Filesystem type is ext2fs, partition type 0x83

grub> <i>setup (hd0)</i>
 Checking if "/boot/grub/stage1" exists... yes
 Checking if "/boot/grub/stage2" exists... yes
 Checking if "/boot/grub/e2fs_stage1_5" exists... yes
 Running "embed /boot/grub/e2fs_stage1_5 (hd0)"...  16 sectors are embedded.
succeeded
 Running "install /boot/grub/stage1 (hd0) (hd0)1+16 p (hd0,0)/boot/grub/stage2 /boot/
grub/menu.lst"... succeeded
Done.

grub> <i>quit</i>
</pre>

<p>
Fahren Sie nun mit dem <uri link="#reboot">Neustart-Teil</uri> fort.
</p>

<p>
<b>2. lilo verwenden</b>
</p>

<pre caption="Emergen Sie lilo und editieren Sie dessen Konfigurations-Datei">
livecd conf.d # <i>time emerge lilo</i>

real  0m47.016s
user  0m22.770s
sys   0m5.980s
livecd conf.d # <i>nano -w /etc/lilo.conf</i>
</pre>

<pre caption="Beispiel-lilo.conf">
boot=/dev/sda
prompt
timeout=50
default=gentoo

image=/boot/kernel
  label=Gentoo
  read-only
  root=/dev/sda3
</pre>

<pre caption="lilo installieren">
livecd conf.d # <i>lilo</i>
Added Gentoo *
</pre>

</body>
</section>
<section id="reboot">
<title>Neustart</title>
<body>

<p>
Verlassen Sie die chroot-Umgebung, hängen Sie alle Dateisysteme aus und starten
Sie neu:
</p>

<pre caption="Neustart">
livecd conf.d # <i>exit</i>
livecd / # <i>umount /mnt/gentoo/proc /mnt/gentoo/boot /mnt/gentoo</i>
livecd / # <i>reboot</i>
<comment>(Vergessen Sie nicht die CD zu entfernen)</comment>
</pre>

</body>
</section>
<section id="after-reboot">
<title>Die Installation abschließen</title>
<body>

<note>
Die <b>absolute</b> Zeit zwischen dem Anzeigen des Boot-Prompts der Minimal-CD
und des Login-Prompts auf unserem Test-System war <b>00:42:31</b>.
Ja, weniger als eine Stunde! Beachten Sie, dass diese Zeit auch das stage3, den
Portage-Snapshot und das Herunterladen verschiedener anderer Pakete, sowie das
Konfigurieren des Kernels, beinhaltet.
</note>

<p>
Loggen Sie sich als <c>root</c> ein und fügen Sie dann einen, oder mehrere
Benutzer für den täglichen Gebrauch mit <c>useradd</c> hinzu.
</p>

<pre caption="Von einem anderen PC zu Ihrem neuen System verbinden">
<comment>(Bereinigen Sie Ihre known_hosts-Datei, das neue System hat einen neuen
Schlüssel generiert)</comment>
$ <i>nano -w ~/.ssh/known_hosts</i>
<comment>(Suchen Sie nach der IP Ihres neuen PCs, löschen Sie die Zeile,
speichern und verlassen Sie nano.)</comment>

<comment>(Benutzen Sie die IP-Adresse Ihres neuen Systems)</comment>
$ <i>ssh root@192.168.1.10</i>
The authenticity of host '192.168.1.10 (192.168.1.10)' can't be established.
RSA key fingerprint is 96:e7:2d:12:ac:9c:b0:94:90:9f:40:89:b0:45:26:8f.
Are you sure you want to continue connecting (yes/no)? <i>yes</i>
Warning: Permanently added '192.168.1.10' (RSA) to the list of known hosts.
Password: <comment>Geben_Sie_ein_Passwort_ein</comment>
</pre>

<pre caption="Einen neuen Benutzer hinzufügen">
mybox ~ # <i>adduser -g users -G lp,wheel,audio,cdrom,portage,cron -m john</i>
mybox ~ # <i>passwd john</i>
New UNIX password: <comment>John's Passwort setzen</comment>
Retype new UNIX password: <comment>nochmals John's Passwort</comment>
passwd: password updated successfully
</pre>

</body>
</section>
<section>
<title>Letzte Konfigurationen</title>
<body>

<p>
Beginnen Sie mit dem Auswählen nahegelegener Mirros durch Definition von
<c>RSYNC</c> und <c>GENTOO_MIRROS</c> in der <path>/etc/make.conf</path>, oder
mittels <c>mirrorselect</c>. An dieser Stelle können Sie außerdem die Anzahl
gleichzeitig auszuführender Kompilations-Prozesse definieren.
</p>

<pre caption="mirrorselect verwenden und MAKEOPTS setzen">
mybox ~ # <i>emerge mirrorselect</i>
mybox ~ # <i>mirrorselect -i -o >> /etc/make.conf</i>
mybox ~ # <i>mirrorselect -i -r -o >> /etc/make.conf</i>
<comment>(Die Anzahl der Prozessoren+1 ist normalerweise ein guter Wert)</comment>
mybox ~ # <i>echo 'MAKEOPTS="-j2"' >> /etc/make.conf</i>
</pre>

<p>
Jetzt ist ein guter Zeitpunkt um ein paar USE-Flags zu de-/aktivieren. Führen
Sie <c>emerge -vpe world</c> aus, um alle aktuell installierten Pakete und deren
de-/aktivierte USE-Flags aufzulisten. Editieren Sie <path>/etc/make.conf</path>,
oder verwenden Sie die folgenden Befehle um die USE-Variable zu definieren:
</p>

<pre caption="Aktive USE-Flags anzeigen und manche de-/aktivieren">
mybox ~ # <i>emerge -vpe world</i>
<comment>(Portage zeigt die Pakete und deren USE-Flags. Lassen Sie
uns, als Beispiel, ipv6 und fortran deaktivieren und unicode aktivieren)</comment>
mybox ~ # <i>echo 'USE="nptl nptlonly -ipv6 -fortran unicode"' >> /etc/make.conf</i>
</pre>

<p>
Neuere Versionen von glibc benutzen <path>/etc/locale.gen</path>, um
Einstellungen bezüglich der Locales zu definieren.
</p>

<pre caption="Locales definieren">
mybox ~ # <i>cd /etc</i>
mybox etc # <i>nano -w locale.gen</i>
</pre>

<p>
Last, not least, können Sie die <c>CFLAGS</c>-Variable in Ihrer
<path>/etc/make.conf</path> modifizieren, um den Code für Ihre speziellen
Bedürfnisse zu optimieren. Beachten Sie bitte, dass eine lange Liste an Flags
selten gebraucht wird und sogar zu einem defekten System führen kann. Es wird
empfohlen, den Prozessor-Typ mit der <c>march</c>-Option zu spezifizieren und es
bei <c>-O2 -pipe</c> zu belassen.
</p>

<p>
Sie werden außerdem vielleicht zu <b>~x86</b> wechseln wollen. Sie sollten dies
nur tun, wenn Sie mit seltsam defekten Ebuilds und Paketen klarkommen. Wenn Sie
Ihr System lieber stabil halten, fügen Sie nicht die
<c>ACCEPT_KEYWORDS</c>-Variable hinzu. <c>FEATURES="parallel-fetch ccache"</c>
hinzuzufügen ist ebenfalls eine gute Idee.
</p>

<pre caption="Letzte Arbeiten an der make.conf">
mybox etc # <i>nano -w make.conf</i>
<comment>(Setzen Sie -march in den CFLAGS auf Ihren CPU-Typ)</comment>
CFLAGS="-O2 -march=<i>athlon-xp</i> -pipe"
<comment>(Fügen Sie die folgende Zeile hinzu)</comment>
FEATURES="parallel-fetch ccache"
<comment>(Nur hinzufügen, wenn Sie wissen, was Sie tun)</comment>
ACCEPT_KEYWORDS="~x86"
</pre>

<p>
Sie werden Ihr System vielleicht zweifach re-kompilieren wollen, um sicher zu
stellen, dass die letzten Konfigurations-Änderungen vollen Effekt zeigen. Es
würde einiges an Zeit in Anspruch nehmen und nur wenig Gewinn bringen. Sie
können Ihr System sich mit den nach und nach erscheinenden neuen
Versionen von Paketen selbst optimieren lassen. Jedoch ist das Neukompilieren
weiterhin eine gute Idee, wenn man vom Standpunkt der Erhaltung der
Systemkonsistenz ausgeht. Bitte lesen Sie den
<uri link="/doc/de/gcc-upgrading.xml">Gentoo GCC Upgrade Leitfaden</uri>,
welcher eine Diskussion über die Leistungen eines solchen gebauten Systems
enthält.
</p>

<p>
Es wird genug Zeit in Anspruch nehmen die Pakete zu re-kompilieren, die seit der
Veröffentlichung ein Update erfahren haben, oder von neuen USE-Flags betroffen
sind. Unter Umständen werden Sie außerdem einige Pakete mit <c>emerge -C</c>
entfernen müssen, die ein Upgrade blockieren. Betrachten Sie dazu die Ausgabe
von <c>emerge -vpuD --newuse world</c> auf das Auftreten von "[blocks
<brite>B</brite>    ]" hin.
</p>

<pre caption="Ihre Pakete aktualisieren">
<comment>(ccache installieren)</comment>
mybox etc # <i>emerge ccache</i>

<comment>(Beachten Sie bitte, dass der Wechsel zu ~x86 eine Menge zu
aktualisierender Pakete nach sich zieht)</comment>
mybox etc # <i>emerge -vpuD --newuse world</i>
<comment>(Werfen Sie einen genauen Blick auf die Paketliste und die USE-Flags,
entfernen Sie ggf. blockierende Pakete und starten Sie den langatmigen Prozess)</comment>
mybox etc # <i>time emerge -vuD --newuse world</i>
<comment>(79 wurden (re)kompiliert)</comment>

real  180m13.276s
user  121m22.905s
sys   36m31.472s

<comment>(Re-emergen Sie libtool, um potenziellen Problemen auszuweichen)</comment>
mybox etc # <i>emerge libtool</i>

<comment>(Aktualisieren Sie Ihre Konfigurationsdateien. Stellen Sie sicher, dass
etc-update <b>keine</b> Konfigurationsdateien überschreibt, die Sie editiert
haben)</comment>
mybox etc # <i>etc-update</i>

<comment>(Wenn perl aktualisiert wurde, sollten Sie das perl-cleaner-Script
ausführen)</comment>
mybox etc # <i>time perl-cleaner all</i>
real  1m6.495s
user  0m42.699s
sys   0m10.641s

<comment>(Im Falle eines Major-Upgrade python's sollten Sie das
python-updater-Script ausführen)</comment>
mybox etc # <i>python-updater</i>
</pre>

</body>
</section>
<section>
<title>Was noch kommt</title>
<body>

<p>
Abhängig vom Einsatzgebiet Ihrer neuen Gentoo-Maschine, werden Sie vielleicht
Server-Anwendungen, oder ein Desktop-System installieren wollen. Nur als
Beispiel, <c>emerge gnome</c> und <c>emerge kde</c> wurden auf einem
~x86-System, aufgesetzt, wie oben beschrieben, gestoppt. Beide wurden vom selben
Ausgangspunkt aus installiert.
</p>

<p>
Sie sollten unseren <uri link="/doc/de/">Dokumentations-Index</uri> betrachten,
um zu erfahren, wie Sie die Applikationen Ihrer Wahl installieren und
konfigurieren.
</p>

<impo>
Das Folgende ist nur ein Beispiel. Es ist keineswegs als empfohlenes Setup
gemeint.
</impo>

<pre caption="Emerge GNOME">
mybox etc # <i>emerge -vp gnome</i>
<comment>(Betrachten Sie die Liste der Pakete und deren USE-Flags, editieren Sie
dann die make.conf, wenn nötig.)</comment>
mybox etc # <i>nano -w /etc/make.conf</i>
<comment>(Die folgenden USE-Flags wurden gesetzt)</comment>
USE="nptl nptlonly -ipv6 -fortran unicode svg hal dbus \
     -kde -qt3 -qt4 -arts -eds -esd gnome gstreamer gtk firefox"

mybox etc # <i>time emerge gnome</i>
<comment>(326 Pakete wurden emerged)</comment>

real  520m44.532s
user  339m21.144s
sys   146m22.337s
</pre>

<pre caption="Emerge KDE">
mybox etc # <i>emerge -vp kde-meta</i>
<comment>(Betrachten Sie die Liste der Pakete und deren USE-Flags, editieren Sie
dann die make.conf, wenn nötig.)</comment>
mybox etc # <i>nano -w /etc/make.conf</i>
<comment>(Die folgenden USE-Flags wurden gesetzt)</comment>
USE="nptl nptlonly -ipv6 -fortran unicode svg hal dbus \
     kde qt3 qt4 -arts -eds -esd -gnome -gstreamer -gtk -firefox"

mybox etc # <i>time emerge kde-meta</i>
<comment>(391 Pakete wurden emerged)</comment>

real  1171m25.318s
user  851m26.393s
sys   281m45.629s
</pre>

</body>
</section>
</chapter>
</guide>
