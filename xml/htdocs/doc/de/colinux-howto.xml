<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/de/Attic/colinux-howto.xml,v 1.3 2006/07/12 11:07:38 grahl Exp $ -->

<!-- English CVS Version: 1.11 -->

<guide link="/doc/de/colinux-howto.xml" lang="de">
<title>Wie man coLinux mit Gentoo einrichtet</title>
<author title="Autor">
  IWBCMAN
</author>
<author title="Autor">
  janlaur
</author>
<author title="Bearbeiter">
  <mail link="joshua@sungentoo.homeunix.com">Joshua Preston</mail>
</author>
<author title="Bearbeiter">
  <mail link="avenj@gentoo.org">Jon Portnoy</mail>
</author>
<author title="Übersetzer">
  <mail link="stefangasten@web.de">Stefan Gasten</mail>
</author>
<abstract>
Dieses HOWTO beabsichtigt Ihnen eine Anleitung für ein einfaches Setup von
coLinux zu liefern, um Ihrem Windows zu ermöglichen Linux als Thread
auszuführen.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->
<license/>

<version>1.4</version>
<date>2005-07-26</date>

<chapter>
<title>Einleitung</title>
<section>
<title>Was ist coLinux?</title>
<body>

<p>
coLinux ist ein Windows-Dämon-Programm. Das Ziel ist es, Linux als einen
nativen Windows-Thread laufen zu lassen, und somit Linux nativ innerhalb
Windows betreiben zu können.
</p>

<p>
Der Hauptmakel dabei ist die Performance. Die Performance von X-Anwendungen ist
schlecht, aber benutzbar. Gewöhnliche Anwendungen laufen genau so schnell, wie
im richtigen Linux.
</p>

<warn>
coLinux befindet sich immer noch deutlich im Alpha-Stadium. Es funktioniert,
und das wirklich gut, aber da sind eine Menge Dinge, die bisher noch nicht
unterstützt werden.
</warn>

<p>
Dieses HOWTO basiert auf einer Sammlung und Zusammenlegung von zwei exzellenten
HOWTOs aus den <uri link="http://forums.gentoo.org">Gentoo Foren</uri> von
IWBCMAN und janlaur. Die Links zu diesen Diskussion finden Sie nachstehend als
Quellen.
</p>

<ul>
  <li><uri link="http://forums.gentoo.org/viewtopic.php?t=162420">Teil von IWBCMAN</uri></li>
  <li><uri link="http://forums.gentoo.org/viewtopic.php?t=163154">Teil von janlaur</uri></li>
</ul>

</body>
</section>
</chapter>
<chapter>
<title>Installation</title>
<section>
<title>coLinux beziehen</title>
<body>

<warn>
Sie müssen Windows 2000, 2003, oder XP (Home/Professional) verwenden um coLinux
verwenden zu können.
</warn>

<p>
Sie brauchen lediglich den neusten Snapshot von <uri
link="http://colinux.org/snapshots/">coLinux.org</uri> herunterzuladen.
</p>

<note>
Für dieses HOWTO wurde coLinux-20040417.exe verwendet. Die Snapshots enthalten
außerdem einige nette Bugfixes, weshalb wir Ihnen empfehlen, diese zu benutzen.
</note>

<p>
Die .EXE-Datei ist ein Installationsprogramm, welches in der Lage ist ein
grundlegendes Distributions-Image von SourceForge herunterzuladen
(Gentoo/Debian/Fedora).
</p>

<p>
Starten Sie die .EXE und belassen Sie es bei den Standardeinstellungen, außer
natürlich bei der Distribution, wo Sie in diesem Falle Gentoo wählen sollten.
</p>

<p>
Dieses Image wird in das Installationsverzeichnis heruntergeladen werden und
<path>gentoo-i586-ext3-2g-deluxe.bz2</path> heißen.
</p>

<p>
Diese neue virtuelle Partitionsdatei beinhaltet eine stage3
Gentoo-Installation. Tatsächlich sogar mehr, als eine stage3, da es XFree86,
XFCE4, Firefox, GAIM und XChat enthält. Die virtuelle Partion ist mit ext3
formatiert.
</p>

<ul>
  <li>
    Extrahieren Sie diese Datei in irgendein Windows-Laufwerk, das Platz für
    eine 2-Gigabyte-Datei hat.
  </li>
  <li>Der Pfad zur Datei sollte keine Leerzeichen enthalten</li>
  <li>Wahlweise können Sie die .bz2-Datei nach dem Entpacken löschen</li>
</ul>

<p>
Sie werden vermutlich Winrar für Windows brauchen um sie zu entpacken.
Besuchen Sie <uri link="http://wiki.colinux.org/cgi-bin/NiceTools">die coLinux
Nice Tools Seite</uri> um Tools zum extrahieren der Image-Datei und zum
erzeugen der virtuellen Swap-Partitionen zu finden.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Konfiguration</title>
<section>
<title>Die Konfigurationsdatei modifizieren</title>
<body>

<p>
Es gibt nur eine einzige Konfigurationsdatei; sie befindet sich im
Installationsverzeichnis und heißt <path>default.colinux.xml</path>. Öffnen Sie
sie in Ihrem bevorzugten Browser und editieren Sie sie folgendermaßen:
</p>

<pre caption="default.colinux.xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;colinux&gt;
    <comment>&lt;!-- Ihr Pfad kann etwas abweichen. --&gt;</comment>
    &lt;block_device index="0" path="\DosDevices\e:\gentoo-i586-ext3-2g-deluxe" enabled="true"&gt;&lt;/block_device&gt;
    &lt;bootparams&gt;root=/dev/cobd0&lt;/bootparams&gt;
    &lt;image path="vmlinux"&gt;&lt;/image&gt;
    <comment>&lt;!-- Passen Sie die Größe Ihren Bedürfnissen an --&gt;</comment>
    &lt;memory size="256"&gt;&lt;/memory&gt;
    <comment>&lt;!-- Stellen Sie sicher, dass name= der exakte Name des TAPs in Ihren Netzwerkverbindungen ist! --&gt;</comment>
    &lt;network index="0" type="tap" name="TAP"&gt;&lt;/network&gt;
&lt;/colinux&gt;
</pre>

<p>
Ändern Sie den Pfad entsprechend, wohin Sie das Image entpackt haben und
konfigurieren Sie, wie viel Arbeitsspeicher Sie coLinux zuweisen wollen.
</p>

</body>
</section>
<section>
<title>Das Netzwerk einrichten</title>
<body>

<p>
Sie sollten nun in der Lage sein coLinux, durch einen Doppelklick auf
colinux-daemon.exe, booten zu können, da die meisten Leute jedoch ein Netzwerk
wollen, werden wir dies vorher konfigurieren.
</p>

<ul>
  <li>
    Wählen Sie "Add Hardware" beim Control Panel und klicken Sie auf "Next"
  </li>
  <li>
    Klicken Sie auf "Yes I have already connected the new hardware" und dann
    auf "Next"
  </li>
  <li>
    Scrollen Sie bis zum Ende der Liste im nächsten Fenster und wählen Sie "Add
    a new hardware device" und dann klicken Sie "Next"
  </li>
  <li>
    Wählen Sie "Install the hardware that I manually select from a list" und
    klicken Sie auf "Next"
  </li>
  <li>Wählen Sie "Network Adapters" und klicken Sie dann auf "Next"</li>
  <li>
    Klicken Sie auf "Have Disk" and wählen Sie den Ort, wohin Sie coLinux
    extrahiert haben. Gehen Sie in das "netdriver"-Verzeichnis. Eine Datei
    sollte erscheinen.
  </li>
  <li>Wählen Sie sie und klicken Sie "Open"</li>
</ul>

<p>
Sie haben Ihren virtuellen Netzwerkadapter nun konfiguriert! Sie können ihn
wie alle anderen Adapter in Ihrem System einstellen.
</p>

<ul>
  <li>Wählen Sie "Control Panel->Network Connections"</li>
  <li>
    Klicken Sie auf Ihre Internetverbindung, und dann Strg+Klick auf Ihre neue
    TAP-Netzwerkverbindung.
  </li>
  <li>Rechtsklick, und wählen Sie "Bridge connections".</li>
</ul>

<p>
Windows sollte eine Netzwerk-Brücke erstellen. Wenn Sie immer noch eine
funktionierende Internetverbindung in Windows haben, sollte es wohl laufen.
</p>

</body>
</section>
<section>
<title>Booten</title>
<body>

<p>
Jetzt sind Sie bereit colinux-daemon.exe zu öffnen und die Magie zu bestaunen:
Sie haben nun eine einfache Gentoo-Installation gebootet, mit Programmen, wie
XFree86, XFCE4, GAIM, kernel-2.4.26 und anderen grundlegenden Dingen, die Ihnen
zur Verfügung stehen.
</p>

<p>
Wenn Sie erst einmal drin sind, werden Sie einige Dinge zuerst erledigen
wollen:
</p>

<ul>
  <li>
    Melden Sie sich ohne Passwort als root an und setzen Sie ein root-Passwort
  </li>
  <li>Schauen Sie nach, ob das Netzwerk funktioniert</li>
  <li>
    Starten Sie sshd und wählen Sie sich mit Putty ein (Wählen Sie cgywin
    als Terminaltyp)
  </li>
</ul>

<p>
Sie werden Ihr System wahrscheinlich nun aktualisieren wollen, also lassen Sie
uns das jetzt tun:
</p>

<pre caption="Das Setup abschließen">
# <i>emerge --sync</i>
# <i>env-update &amp;&amp; source /etc/profile</i>
<comment>(Wenn Sie vnc bevorzugen)</comment>
# <i>emerge tightvnc</i>
</pre>

<p>
Jetzt müssen Sie X konfigurieren. Sie können (sofern gegeben) einfach die
<path>/etc/X11/XF86Config</path> Ihrer Linux-Installation in Ihre
coLinux-Installation rüberkopieren.
</p>

<note>
Sie können ausschließlich Treiber, die von X zur Verfügung gestellt werden,
verwenden (nvidia-glx/kernel z.B. nicht) und es sieht auch so aus, als würde
dies nur mit einer Farbtiefe von 16 funktionieren, also werden Sie die Datei
ein wenig überarbeiten müssen. Denken Sie dran, Sie haben keinen direkten
Zugriff auf die Video-Hardware von Windows, Sie werden die Datei also von
woanders her kopieren, oder selbst erstellen müssen. Alternativ können Sie die
Maschine auch einfach mit Knoppix booten und Knoppix eine
<path>XF86Config</path> für Sie erstellen lassen.
</note>

<p>
Wenn das erledigt ist, erstellen Sie <path>~/.vnc/xstartup</path>:
</p>

<pre caption="~/.vnc/xstartup Beispiel">
startxfce4 &amp;
</pre>

<p>
Starten Sie nun einfach den vncserver mit Ihren Optionen. Sie werden nach einem
Passwort gefragt werden, erstellen Sie eins und merken Sie sich dieses.
</p>

<pre caption="vncserver starten">
$ <i>vncserver -geometry "1024x768" -depth 16</i>
</pre>

<p>
Alles, was Sie jetzt tun müssen, ist VNC für Windows herunterzuladen, den
vncviewer auszuführen und ihm die IP-Adresse Ihres virtuellen Netzwerk-Adapters
(z.B. 192.168.0.X:1) samt Passwort zu übergeben. Wenn alles glatt läuft, sollte
vncviewer nun Ihren XFCE4-Desktop anzeigen - haben Sie viel Spaß!
</p>

</body>
</section>
</chapter>
<chapter>
<title>Fortgeschrittene Themen</title>
<section>
<title>Eine swap-Partition hinzufügen</title>
<body>

<p>
Laden Sie sich <uri link="http://gniarf.nerim.net/colinux/swap/">hier</uri> ein
Swapfile herunter (der Dateiname gibt einen Hinweis auf die Swap-Größe).
Extrahieren Sie es nach wo auch immer Sie Platz dafür haben und fügen Sie
folgendes Ihrer <path>default.colinux.xml</path> hinzu:
</p>

<pre caption="Ein Swap-Laufwerk hinzufügen">
    <comment>&lt;-- index="1" bedeutet, dass es unter /dev/cobd1 aufgenommen wird --&gt;</comment>
    &lt;block_device index="1" path="\DosDevices\e:\swap-file" enabled="true"&gt;&lt;/block_device&gt;
</pre>

<p>
Nun starten wir coLinux (neu) und führen <c>mkswap</c> aus:
</p>

<pre caption="Einrichten der swap-Partition">
# <i>mkswap /dev/cobd1</i>
</pre>

<p>
Sie werden außerdem die folgende Zeile Ihrer <path>/etc/fstab</path>
hinzufügen müssen:
</p>

<pre caption="Der /etc/fstab hinzufügen">
/dev/cobd1    none    swap    sw    0    0
</pre>

<p>
Aktivieren Sie Ihren Swap nun ohne neuzustarten!
</p>

<pre caption="Aktivieren Ihres Swaps">
# <i>swapon -a</i>
</pre>

</body>
</section>
<section>
<title>Auf Ihre existierenden Linux-Partitionen von coLinux aus zugreifen</title>
<body>

<p>
Die coLinux-Webseite stellt ein Dokument zur Verfügung, welches die <uri
link="http://wiki.colinux.org/cgi-bin/GettingStarted">Grundlagen</uri> abdeckt.
Nachdem Sie dies gelesen haben, könnten Sie mit folgender Konfiguration
abschließen:
</p>

<pre caption="Neue default.colinux.xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;colinux&gt;
    &lt;block_device index="0" path="\DosDevices\e:\gentoo-i586-ext3-2g-deluxe" enabled="true"&gt;&lt;/block_device&gt;
    &lt;block_device index="1" path="\DosDevices\e:\swap-file" enabled="true"&gt;&lt;/block_device&gt;
    <comment>&lt;!-- Abhängig von Ihrem Festplatten-Layout kann der Pfad variieren --&gt;</comment>
    &lt;block_device index="2" path="\Device\Harddisk0\Partition5" enabled="true"&gt;&lt;/block_device&gt; 
    &lt;bootparams&gt;root=/dev/cobd0&lt;/bootparams&gt;
    &lt;image path="vmlinux"&gt;&lt;/image&gt;
    &lt;memory size="256"&gt;&lt;/memory&gt;
    &lt;network index="0" type="tap" name="TAP"&gt;&lt;/network&gt;
&lt;/colinux&gt;
</pre>


<p>
Sie werden coLinux (neu)starten müssen, damit die Änderungen berücksichtigt
werden. Sie sollten in der Lage sein in coLinux über das /dev/cobd2 Gerät auf
"\Device\Harddisk0\Partition5" zugreifen zu können.
</p>

<pre caption="Mounten">
# <i>mount /dev/cobd2 /mnt/linux</i>
</pre>

<impo>
Denken Sie daran, dass dies nur mit Partitionen funktioniert, auf die Windows
nicht zugreift. Wenn Windows diese benutzt, werden Sie smbfs verwenden müssen.
</impo>

</body>
</section>
</chapter>
<chapter>
<title>F&amp;A</title>
<section>
<title>Welche USE-Flags sollte ich verwenden?</title>
<body>

<p>
Die USE-Flags sind die gleichen, wie beim nativen System.
</p>

</body>
</section>
<section>
<title>Werde ich in der Lage sein meine Dial-Up-Verbindung zu teilen?</title>
<body>

<p>
Es benutzt die geteilte Internetverbindung um das Linux-Netzwerk mit dem
Netzwerk außerhalb zu verbinden, also sollte es Ihnen möglich sein die
TAP-Verbindung zur PPP-Verbindung zu überbrücken.
</p>

</body>
</section>
<section>
<title>Kann der Linux-Kernel trotzdem noch auf Hardware zugreifen?</title>
<body>

<p>
coLinux emuliert jede Art von Hardware, die gebraucht wird. Sie haben
emulierten Festplattenzugriff, Netzwerk, usw. Was bisher nicht zur Verfügung
steht ist USB-, direkter Grafik-, oder Soundkarten-Zugriff. Die gute Nachricht
ist, dass coLinux derzeit daran arbeitet USB an's Laufen zu bekommen
(ausgenommen USB-Tastaturen und -Mäuse).
</p>

</body>
</section>
<section>
<title>Gibt es Alternativen zu coLinux?</title>
<body>

<p>
Ja!
</p>

<ul>
<li><uri link="http://www.vmware.com/">VMWare</uri></li>
<li><uri link="http://bochs.sourceforge.net/">Bochs</uri></li>
</ul>

</body>
</section>
<section>
<title>Wird coLinux mit dem 2.6er Kernel arbeiten?</title>
<body>

<p>
Im Moment nicht, es verwendet einen 2.4 basierten Kernel, der gepatched wurde
um sowohl die geteilten emulierten Laufwerke, als auch die mit Windows
geteilten Ressourcen zu erlauben.
</p>

</body>
</section>
<section>
<title>Warum funktioniert X nicht?</title>
<body>

<p>
Es gibt keine native X-Unterstützung. Sie müssen entweder vnc, oder Cgywin-X11
verwenden. Folgen Sie den Anweisungen in diesem HOWTO.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Fazit</title>
<section>
<body>

<p>
coLinux bietet eine erstaunliche Vielzahl an Möglichkeiten. Sie können Apache,
Samba, DHCP, Mail, distcc, NFS, oder <e>einen ganz beliebigen</e> Server unter
coLinux betreiben. Mit Ausnahme von Geräteunterstützung und Festplattenzugriff
kann man nicht sagen ob man sich gerade unter Linux oder unter Windows
befindet; und das ist wirklich beeindruckend.
</p>

</body>
</section>
</chapter>
</guide>
