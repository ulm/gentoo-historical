<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pt_br/handbook/hb-install-mips-bootloader.xml,v 1.2 2005/01/14 16:32:11 enderson Exp $ -->

<sections>

<version>1.5</version>
<date>2004-10-23</date>

<section>
<title>O PROM do MIPS</title>
<subsection>
<body>

<p>
O MIPS não necessita que você instale um bootloader. O PROM do MIPS controla o processo 
de boot, e você só precisa instalar seu kernel como uma opção viável.
</p>

<p>
Primeiro, instale o <c>dvhtool</c>, necessário para copiar o kernel para o SGI Volume
Header.
</p>

<pre caption="Instalando o dvhtool">
# <i>emerge dvhtool</i>
</pre>

<p>
Agora copie o kernel para o SGI Volume Header. Por padrão o <c>dvhtool</c>
presume que o SGI Volume Header está em <path>/dev/sda</path>. Se este não for 
o caso (por exemplo quando o IRIX está instalado em <path>/dev/sda</path> e o
Gentoo/MIPS em <path>/dev/sdb</path>) você precisa informar o <c>dvhtool</c> sobre isso
usando <c>-d &lt;dispositivo&gt;</c>.
</p>

<pre caption="Copiando um kernel para o SGI Volume Header">
# <i>dvhtool --unix-to-vh &lt;nome do kernel em /boot&gt; &lt;nome que você quer no volume header&gt;</i>
</pre>

<p>
Se você quiser ver todas entradas disponíveis no volume, use
<c>--print-volume-directory</c>:
</p>

<pre caption="Vendo todas entradas disponíveis em um volume">
# <i>dvhtool --print-volume-directory</i>
</pre>

<p>
Para fazer que seu sistema carregue o Gentoo/MIPS você precisa mexer em alguns ajustes 
do PROM do MIPS.
</p>

<p>
Continue com <uri link="#reboot">Reiniciando o sistema</uri>.
</p>

</body>
</subsection>
</section>
<section id="reboot">
<title>Reiniciando o sistema</title>
<subsection>
<body>

<p>
Saia do ambiente de chroot e desmonte todas partições montadas. Então digite aquele comando mágico que você estava esperando: <c>reboot</c>.
</p>

<pre caption="Saindo do chroot, desmontando todas partições e reiniciando">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Configurando o PROM do MIPS</title>
<subsection>
<body>

<p>
Quando você houver reiniciando, vá para o <e>System Maintenance Menu</e> e selecione
<e>Enter Command Monitor</e> (<c>5</c>). Se você quiser testar sua nova instalação do 
Gentoo, você pode simplesmente rodar <c>boot -f &lt;kernel name&gt;</c>. Para fazer com 
que seu sistema carregue sua instalação do Gentoo permanentemente, você precisa ajustar 
algumas variáveis no PROM do MIPS:
</p>

<pre caption="Configurando o PROM para carregar o Gentoo">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;dispositivo de root&gt; = A partição de root do Gentoo, por exemplo /dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;dispositivo de root&gt;</i>

<comment>(Para listar os kernéis disponíveis, digite "ls")</comment>
&gt;&gt; <i>setenv OSLoader &lt;nome do kernel&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;nome do kernel&gt;</i>

<comment>(Declare os parâmetros que você quer passar ao kernel)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;parâmetros do kernel&gt;</i>

<comment>(Dê o local do Volume Header)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(Automaticamente carregar o Gentoo)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(Configurar o fuso horário)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(Use o console serial - usuários de adaptador gráfico devem usar "g" ao invés de "d1" (um))</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
Agora você está pronto para aproveitar o Gentoo! Faça boot da sua instalação do Gentoo e 
termine com <uri link="?part=1&amp;chap=11">Completando sua instalação do Gentoo</uri>.
</p>

</body>
</subsection>
</section>
</sections>
