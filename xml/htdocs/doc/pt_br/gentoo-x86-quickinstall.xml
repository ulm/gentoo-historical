<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pt_br/gentoo-x86-quickinstall.xml,v 1.2 2005/05/07 18:06:45 vanquirius Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/pt_br/gentoo-x86-quickinstall.xml" lang="pt_br">
<title>Referência de Instalação do Gentoo Linux</title>
<author title="Autor">Steven Wagner</author>
<author title="Editor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Tradutor">
  <mail link="enderson@gentoo.org">Enderson Maia</mail>
</author>

<abstract>
A Referência de Instalação sobre detalhes do processo de instalação de
uma maneira não extensa. Usuários devem ter experiência anteriores de 
instalação do Gentoo Linux se querem seguire este guia.
</abstract>

<license/>

<version>1.21</version>
<date>2004-12-26</date>

<chapter>
<title>Referência Rápida de Instalação</title>
<section>
<body>

<p>
Os ISOs de instalação estão em <uri link=
"http://www.gentoo.org/main/en/mirrors.xml">Espelhos do
Gentoo</uri>. Descrições detalhadas dos diferentes CDs estão
disponíveis na <uri link="http://store.gentoo.org">Loja do
Gentoo</uri>. Um CD universal contem tudo que você precisa para instalar o Gentoo Linux
rapidamente e sem uma conexão com a Internet. Um CD de pacotes é opcional e
contem pacotes pré-compilados como o KDE, GNOME, OpenOffice,
Mozilla, Evolution e mais.
</p>

<p>
Inicie pelo CD Universal. Pressione &lt;F1&gt; e/ou &lt;F2&gt; para
ver quais as opções de inicialização disponíveis. Pressione &lt;ENTER&gt; na tela de inicialização 
para continuar com o kernel padrão. You'll eventually receive a prompt *.
</p>

<pre caption="Iniciando as configurações">
# <i>date</i>  (Certifique-se que a data e a hora estejam corretas. Se erradas, acerte com  <i>date MMDDhhmmAAAA</i> )
# <i>modprobe module_name</i>  (Opcional - Carregue os módulos necessários)
# <i>net-setup eth0</i> (Configure a rede)
# <i>fdisk /dev/hda</i> (Particione seu disco)
</pre>

<p>
A configuração recomendada é uma partição de boot de 64MB formatado em ext2, uma partição swap
com o dobro da memória RAM disponível, e o resto de sua partição como root formatado em 
Reiserfs.
</p>

<p>
Formate a partição usando <c>mke2fs</c> (Ext2), <c>mke2fs
-j</c> (Ext3), <c>mkreiserfs</c> (ReiserFS), <c>mkfs.xfs</c> (XFS),
<c>mkfs.jfs</c> (JFS) and <c>mkswap</c> (swap). Por exemplo:
<c>mke2fs -j /dev/hda3</c>.
</p>

<p>
Continue montando as partições e extraindo o arquivo de stage 
apropriado.
</p>

<pre caption="Preparando a instalação">
(Ative a partição swap)          # <i>swapon /dev/hdax</i>
(Monte a partição root)          # <i>mount /dev/hdax /mnt/gentoo</i>
(Crie o ponto de montagem root)  # <i>mkdir /mnt/gentoo/boot</i>
(Monte a partição root)          # <i>mount /dev/hdax /mnt/gentoo/boot</i>
(Vá para o ponto de montagem)    # <i>cd /mnt/gentoo</i>
(Extraia o arquivo de stage)     # <i>tar -xvjpf /mnt/cdrom/stages/stage&lt;your stage&gt;.tar.bz2</i>
(<comment>ou</comment> baixe o último arquivo de stage...)
                                 # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(    ... e extraia)              # <i>tar -xvjpf stage&lt;your stage&gt;.tar.bz2</i>
(Opcional: descompacte o portage)# <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 \
                                   -C /mnt/gentoo/usr</i>
(Opcional: copie o distfiles)    # <i>cd /mnt/gentoo/usr/portage; mkdir distfiles;</i>
                                 # <i>cp /mnt/cdrom/distfiles/* distfiles/</i>
(Selecione um servidor espelho)  # <i>mirrorselect -a -s4 -o | grep 'GENTOO_MIRRORS=' \
                                   &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Copie informações de resolução de nomes (DNS) )
                                 # <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Mounte o /proc )                # <i>mount -t proc none /mnt/gentoo/proc</i>
(Entre com o chroot no ambiente) # <i>chroot /mnt/gentoo /bin/bash</i>
(Carregue as variáveis necessarias)
                                 #<i>env-update; source /etc/profile</i>
(Somente em instalação com rede: Atulize o portage)
                                 # <i>emerge --sync</i>
</pre>

<p>
Agora instalaremos o Gentoo:
</p>

<pre caption = "Instalando o Gentoo">
(Modifique asvariáveis USE, CFLAGS and CXXFLAGS. Com o Stage1 você pode mudar o CHOST)  
                                       # <i>nano -w /etc/make.conf</i>
(Somente com Stage1: bootstrap system) # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Somente com Stage1, Stage2: Instala o sistema base )
                                  # <i>emerge system</i>
</pre>

<p>
Next we set up the necessary information:
</p>

<pre caption = "Setting up Configuration Files">
(Set timezone information) # <i>ln -sf /usr/share/zoneinfo/<comment>&lt;path to time zone file&gt;</comment> /etc/localtime</i>
(Edit fstab file)          # <i>nano -w /etc/fstab</i>
</pre>

<p>
Use the following as a <e>template</e> (don't copy verbatim) for
<path>/etc/fstab</path>:
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;          &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/hdax       /boot           ext2            defaults,noatime        1 2
/dev/hdax       none            swap            sw                      0 0
/dev/hdax       /               reiserfs        noatime                 0 1
/dev/cdroms/cdrom0 /mnt/cdrom   auto            noauto,user             0 0
none            /proc           proc            defaults                0 0
none            /dev/shm        tmpfs           nodev,nosuid,noexec     0 0
</pre>

<p>
Continue by installing the Linux kernel:
</p>

<pre caption="Installing the Kernel">
(Install the kernel sources)    # <i>emerge <comment>&lt;kernel-package-here&gt;</comment></i>
(Configure your kernel using genkernel...) 
                                # <i>emerge genkernel; genkernel --menuconfig all</i>
(<comment>or</comment> (1) manually build your kernel)
                                # <i>cd /usr/src/linux; make menuconfig;</i>
(   (2) Include VM fs, /proc fs, /dev fs,  /dev fs auto mount at boot)
(   (3) Compile your kernel) 
           (for a 2.4 kernel)   # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
           (for a 2.6 kernel)   # <i>make &amp;&amp; make modules_install</i>
(   (4) Copy over the kernel)   # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
Now install other tools you might want:
</p>

<pre caption = "Install important system tools">
(Install system logger; choice: sysklogd, metalog, msyslog, syslog-ng) 
                                          # <i>emerge syslog-ng </i>
(Have the systemlogger automatically started at boot)
                                          # <i>rc-update add syslog-ng default</i>
(Install cron daemon; choice: vixie-cron, dcron, fcron)                
                                          # <i>emerge vixie-cron</i>
(Have the cron daemon automatically started at boot)                   
                                          # <i>rc-update add vixie-cron default</i>   
(genkernel users only: install hotplug)   # <i>emerge hotplug</i>
(genkernel users only: have hotplug automatically started at boot)     
                                          # <i>rc-update add hotplug default</i>
(Non-ext2,ext3 users only; choice: reiserfsprogs, xfsprogs, jfsutils)  
                                          # <i>emerge reiserfsprogs</i>
(Optional: install DHCP client)           # <i>emerge dhcpcd</i> 
(Domain name init script)                 # <i>rc-update add domainname default</i>
</pre>

<p>
If you need specialised kernel ebuilds, now is a good time to install them:
</p>

<pre caption = "Install Specialised Kernel Ebuilds">
# <i>emerge pcmcia-cs</i> (or <i>nforce-net</i>, <i>nforce-audio</i>, <i>e100</i>, <i>e1000</i>, <i>ati-drivers</i>, <i>rp-pppoe</i>)
# <i>VIDEO_CARDS="yourcard" emerge x11-drm</i>   (for ATI Radeon up to 9200, Rage128, 
                                            Matrox, Voodoo and other cards)
</pre>

<p>
Finalise the settings for your Gentoo system:
</p>

<pre caption = "Finalise the Configuration Settings">
(Set root password)          # <i>passwd</i>
(Create a user)              # <i>useradd your_user -m -G users,wheel,audio -s /bin/bash</i>
(Set password for that user) # <i>passwd your_user</i>
(Set the system hostname)    # <i>echo mymachine &gt; /etc/hostname</i>
(Set the system domainname)  # <i>echo mydomain.com &gt; /etc/dnsdomainname</i>
(Set the hostsfile, ex:"127.0.0.1 localhost mymachine")  
                             # <i>nano -w /etc/hosts</i>
(Configure basic system settings; follow comments)       
                             # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption = "Set up Networking">
(Setup networking; dhcp-users should set iface_eth0="dhcp")      
                              # <i>nano -w /etc/conf.d/net</i>
(List modules to be loaded at startup)
                              # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;version&gt;</comment></i>
(Non-PCMCIA only: start networking automatically at boot)        
                              # <i>rc-update add net.eth0 default</i>
(Only if you have multiple network interfaces:)
   (1) Create initscripts for each interface)                    
                              # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Automatically start at boot if no PCMCIA)
                              # <i>rc-update add net.ethx default</i>
(PCMCIA only: verify /etc/conf.d/pcmcia and load PCMCIA at boot) 
                              # <i>rc-update add pcmcia boot</i>
</pre>

<p>
Now install a bootloader.
</p>

<pre caption="Install and configure GRUB">
# <i>emerge grub</i>
# <i>grub</i>
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup (hd0)</i>
grub&gt; <i>quit</i>
# <i>nano -w /boot/grub/grub.conf</i>
default 0
timeout 15
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux
  root (hd0,0)
  <comment># genkernel users:</comment>
  kernel /kernel-<comment>&lt;kernel version&gt;</comment> root=/dev/ram0 init=/linuxrc real_root=/dev/hda3
  initrd /initrd-<comment>&lt;kernel version&gt;</comment>
  <comment># non-genkernel users:</comment>
  kernel /kernel-<comment>&lt;kernel version&gt;</comment> root=/dev/hda3
</pre>

<pre caption="Install and configure LILO">
# <i>emerge lilo</i>
# <i>nano -w /etc/lilo.conf</i>
boot=/dev/hda
prompt
timeout=50
default=gentoo

image=/boot/kernel-<comment>&lt;kernel version&gt;</comment> 
  label=gentoo
  read-only
  <comment># genkernel users:</comment>
  append="init=/linuxrc real_root=/dev/hda3"
  root=/dev/ram0
  initrd=/boot/initrd-<comment>&lt;kernel version&gt;</comment>
  <comment># non-genkernel users:</comment>
  root=/dev/hda3

# <i>/sbin/lilo</i>
</pre>

<p>
Now unmount all partitions and reboot into your new system:
</p>

<pre caption="Finishing off and installing GUI">
(Exiting the chroot)         # <i>exit; cd /</i>
(Unmounting partitions)      # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
(Reboot; Remove the universal CD from the tray) 
                             # <i>reboot</i>
(After booting:)
(ADSL-users only)            # <i>adsl-setup</i>
(GRP-users only)
   (1) Mount Package CD      # <i>mount /dev/cdrom /mnt/cdrom</i>  
   (2) Copy over packages    # <i>mkdir /usr/portage/packages</i>
                             # <i>cp -a /mnt/cdrom/* /usr/portage/packages/</i>
   (3) Install extra software# <i>USE="bindist" emerge -k xfree gnome kde mozilla openoffice-bin</i>
   (4) Configure your Xserver# <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>
You can get more information from the <uri
link="http://www.gentoo.org/doc/en/index.xml">Gentoo
Documentation</uri>.
</p>
</body>
</section>
</chapter>	
</guide>

