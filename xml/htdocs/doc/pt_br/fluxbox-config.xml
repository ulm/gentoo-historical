<?xml version='1.0' encoding="UTF-8"?>

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pt_br/fluxbox-config.xml,v 1.1 2005/04/30 00:28:22 vanquirius Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/pt_br/fluxbox-config.xml">

<title>O guia de configuração do Fluxbox</title>

<author title="Autor">
  <mail link="smith.jonathan@gmail.com">Jonathan Smith</mail>
</author>
<author title="Tradutor">
  <mail link="vanquirius@gentoo.org">Marcelo Góes</mail>
</author>

<abstract>
Este guia irá mostrar como configurar o gerenciador de janelas Fluxbox para X11.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->
<license/>

<version>1.0.4</version>
<date>2005-04-16</date>

<chapter>
<title>Introdução</title>
<section>
<title>Introduçao ao gerenciador de janelas Fluxbox</title>
<body>

<p>
Para aqueles que não estiverem familiarizados com o modelo de desktop do Linux, gerenciadores de janelas (WMs)
são aplicações que são rodadas pelo X11 para gerenciar outros programas gráficos.
Embora não sejam necessários, uma sessão de X11 sem um WM é bem feia
e não contém muitas das funções comumente associadas com um desktop
moderno.
</p>

<p>
O Fluxbox é um WM que tem uma filosofia muito mais minimalística que WMs mais
populares como KDE e GNOME. Embora sirva o mesmo propósito básico, o Fluxbox
não tem um gerenciador de arquivos gráfico, ícones, uma organização de "menu iniciar", e
utilitários adicionais. No entanto, é possível obter estes e mais se for
desejado. Isto permite o máximo de abilidade para personalizar, que afinal de
contas é o lema do Gentoo.
</p>

<p>
Este guia é dirigido para os que são novos ao Fluxbox, curiosos, ou que
só querem tirar mais de sua experiência com o Gentoo/Fluxbox. Este guia
também irá ilustrar como tirar mais funcionalidade (ainda opcional)
usando programas de terceiros que funcionam bem com Fluxbox.
</p>

<p>
Também note que desde o começo de 2005, o XFree86 foi tirado da árvore do Portage do Gentoo.
Isto significa que este guia está presumindo que o leitor está usando Xorg. Se não, então
este guia pode ainda ser preciso, mas ele não tenta oferecer
compatibilidade com XFree. O Gentoo recomenda trocar para fazendo <c>emerge
xorg-x11</c>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Instalando o Fluxbox</title>
<section>
<title>Instalação de base</title>
<body>

<p>
O Gentoo oferece uma ebuild para instalar o Fluxbox rapidamente e facilmente. Embora o Gentoo
ofereça opções de USE para <c>gnome</c> e <c>kde</c> que são para fornecer
"compatibilidade" com estes WMs, não é a experiência do autor de que 
sejam necessárias. Se você desejar qt, qtk+ ou qualquer utilitário de KDE/GNOME você é
bem-vindo a fazer emerge e configurá-lo independentemente. Por exemplo, o autor usa
Fluxbox com k3b, o utilitário de gravação de CD-R(W) do KDE.
</p>

<p>
Também é necessário que um programa trave o display do X para prevenir
acesso não autorizado, então é sábio fazer emerge do <c>xlock</c>. A vasta
maioria dos usuários também deve ter a abilidade de configurar seu fundo, então
iremos instalar o <c>eterm</c>, que é um simpático terminal de X11.
</p>

<pre caption="Fazendo emerge do Fluxbox">
# <i>emerge fluxbox xlockmore x11-terms/eterm</i>
</pre>

<p>
Bem, isto é tudo; o Fluxbox está instalado agora! Todavia, ainda é provável que você
não irá ser capaz de usá-lo eficientemente com estas ferramentas. As seguintes seções
irão ajudar a instalar outros pacotes potencialmente necessários, e configurar o Fluxbox
e programas de terceiros para funcionar pra você. Tenha em mente que todos os passos
são opcionais, então sinta-se livre para escolher.
</p>


</body>
</section>
</chapter>
<chapter>
<title>Configurando o Fluxbox</title>
<section>
<title>Preparando o X11</title>
<body>

<p>
O Fluxbox é simplesmente outro programa que o X11 roda. Se desejado, pode-se fazer
<c>startx</c> e então digitar <c>fluxbox</c> em um xterm. No entanto, isto
annoying to say the least. If one does not desire to boot to the GUI, but
instead wants to start X11 manually, it is possible to have X automatically
load Fluxbox by executing, as a normal (non-root) user:
</p>

<pre caption="Editing your xinit">
$ <i>echo fluxbox > ~/.xinitrc</i>
</pre>

<p>
This is also not ideal for most users, as they want to have the desktop
environment all the time; it is a pain to <c>startx</c> if it is desired to use
a GUI everytime you boot. It also presents a security risk to the unaware. If
one locks the X11 display using <c>xlock</c>, but run X11 from a console, then
someone with physical access to the computer can switch to that console, kill
X11, and use your account. The only way to prevent this is to either background
X11 or run it in screen, detach the screen, and then logout of the console, a
tedious task at best. If one uses a graphical login manager, this problem does
not exist. However, you will be running X11 as root, which may be a bad thing.
There are, as of this writing, no exploits that the author is aware of for the
current version, but if one is concerned, then either not use X11 or use the
above method with screen. Note that this is not a Fluxbox issue, but affects
X11 itself.
</p>

<!--
thanks to Josh Nichols for helping cleanup this section. see comment #4 on bug
87330
-->

<p>
There are a number of graphical login managers to choose from; we will be using
gdm. You may use another manager at your option, but gdm works well for
Fluxbox, as well as any other WMs you may have installed such as GNOME, KDE, or
xfce.
</p>

<pre caption="Login Manager">
# <i>emerge gdm</i>
# <i>rc-update add xdm default</i>
</pre>

<impo>
Be sure to emerge gdm and add xdm to the bootscript, and not the other way
around! Switching these will cause failure. We will also need to modify one
system-wide config file:
</impo>

<pre caption="Editing /etc/rc.conf">
DISPLAYMANAGER="gdm"
</pre>

</body>
</section>
<section>
<title>Themes and Artwork</title>
<body>

<p>
This section can be skipped if one truly wants a minimal footprint. However, it
is nice to allow users to customize their WM's appearance. Themes specific to
Fluxbox, Gentoo artwork for any WM, and themes that can be used on any *box WM
will be installed.
</p>

<pre caption="Installing styles and artwork">
# <i>emerge commonbox-styles commonbox-styles-extra \
  fluxbox-styles-fluxmod gentoo-artwork</i>
</pre>

</body>
</section>
<section>
<title>Fluxbox Syntax for Vim</title>
<body>

<p>
Next, install the special Fluxbox color scheme for <c>vim</c>. This enables
users to more readily see the contents of their keys and init files for
Fluxbox. This is a quite small extension for vim, so it is highly recommended
(unless of course you are one of those emacs people, in which case I recommend
<c>emerge -C emacs &amp;&amp; emerge vim gvim</c> ;-).
</p>

<pre caption="Emerging Fluxbox Syntax">
# <i>emerge fluxbox-syntax</i>
</pre>


</body>
</section>
<section>
<title>Fluxbox Keys</title>
<body>

<p>
Fluxbox comes with a very weak set of default keysets. It enables a user to
switch windows and desktops, and no more. Before changing it, there are a few
things necessary to know. In the Fluxbox keys file, there are some strange
modifiers. Mod1 is commonly known as the "Alt" key, and Mod4 is the unspeakable
(windows) key. Control and Shift are Control and Shift. However, it is usually
best to use Alt/Windows keys because other X11 programs tend to use Control and
Shift for their own shortcuts.
</p>

<p>
All of these are independent, so feel free to leave out anything not desired,
or modify this to your own needs. This guide uses what the author assumes to be
the most common programs, so also substitute the name of the package used if it
differs from what appears here. For more information, read the man page for
Fluxbox.
</p>

<p>
So, with that out of the way, fire up a text editor (non-root user), point it
to <path>~/.fluxbox/keys</path>, and lets upgrade those shortcuts!
</p>

<pre caption="Modifying Keyboard Shortcuts">
<comment># locks X11 display to the current user</comment>
Mod4 l   :ExecCommand xlock

<comment># opens a number of programs with quickkeys. These are just examples, I am sure
# you get the point...</comment>
Mod1 f   :ExecCommand firefox
Mod1 t   :ExecCommand thunderbird
Mod1 o   :ExecCommand oowriter
Mod1 v   :ExecCommand gvim

<comment># Fluxbox has no sound control, so we need to do a hack to get one
# (assumes alsa usage. if you use oss, then you are on your own)</comment>
Mod1 e   :ExecCommand Eterm -name alsa -e alsamixer

<comment># Program Control. It just makes life simpler...</comment>
Mod1 4   :Close
Mod1 m   :Minimize

<comment># if you have aterm (emerge x11-terms/aterm), then this opens a really nice
# transparent aterm with no borders, fitting nicely with 1024x768
# resolution, while still leaving room for torsmo. Once again, feel free to
# modify.</comment>
Mod1 a   :ExecCommand aterm -name aterm -sl 3000 -tr +sb -sr -sk -bg black -fg \
white -fade 90 -bl -tn xterm -fn \
-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15 -g 116x57

<comment># similar to the above, but opens a transparent rooted terminal. you must, of
# course, know the root password to use this</comment>
Mod1 s   :ExecCommand aterm -name aterm -sl 3000 -tr +sb -sr -sk -bg black -fg \
white -fade 90 -bl -tn xterm -fn \
-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15 -g 116x57 -e su -
</pre>

</body>
</section>
<section>
<title>System Monitor</title>
<body>

<p>
It is a common desire to setup a system monitor for X11 on desktop systems.
Gkrellm is a commonly used monitor, but in the spirit of Fluxbox minimalism, we
are going to use a simpler monitor: Torsmo. If desired, use another monitor;
there are plenty of howto's elsewhere.
</p>

<pre caption="Installing torsmo">
# <i>emerge torsmo</i>
</pre>

<p>
The default config file for Torsmo is rather weak, but more info can be found
by reading the manpage or <uri
link="http://torsmo.sourceforge.net/readme.php">the readme</uri>.
</p>

</body>
</section>
<section>
<title>Icons</title>
<body>

<p>
Fluxbox does not come with a utility or program to draw icons to the desktop;
everything is handled by keyboard shortcuts, or the right-click menu. However,
it is possible to use a program to generate icons. Despite the name, idesk is
not affiliated with Apple or Mac (to the best of the author's knowledge).
</p>

<pre caption="Installing idesk">
# <i>emerge idesk</i>
</pre>

<!--
if someone wants to write a better description of idesk, feel free. it would be
appreciated!
-->

<p>
Once installed, it will be necessary to add icons to the program. Idesk's icons
are handled in their config file, found at <path>~/.ideskrc</path>. This is a
rather lengthy task, and can't well be covered in this guide. For more
information, <c>man idesk</c> and look at the <uri
link="http://idesk.sourceforge.net/usage.html">usage guide</uri>.
</p>

</body>
</section>
<section>
<title>Setting a theme, background, and a startup script</title>
<body>

<p>
Fluxbox has a number of themes that can be accessed by the right click menu,
then "Fluxbox menu," and "System Styles." These themes usually set their own
background, which is either a single color or a gradient of some type. Most
people prefer to set their own background, and keep it no matter what theme
they chose. To do so, we need to edit another of Fluxbox's files, which governs
startup behavior. So fire up that text editor again, and point it to
<path>~/.fluxbox/startup</path>.
</p>

<p>
If this file exists, then clear it. Add the following to the newly created
file, uncommenting as needed, and filling in values for the CAPS.
</p>

<pre caption="Editing Startup scripts for Fluxbox">
<comment># Gentoo's Fluxbox startup script

# Programs which need to run constantly, as opposed to a one time execution,
# need "&amp;" at the end of the command.

# Show the Fluxbox splash-screen
#fbsetbg -C /usr/share/fluxbox/splash.jpg

# This sets a background. You must have a program setup to do this
# (x11-terms/eterm is recommended)
#bsetbg -f PATH_TO_IMAGE

# Custom fonts directory
#xset +fp PATH_TO_FONT_DIRECTORY

# Starts the icons program
#idesk &amp;

# Launches the Torsmo system monitor
#torsmo &amp;

# This MUST be the last command!</comment>
exec /usr/bin/fluxbox -log ~/.fluxbox/log
</pre>

</body>
</section>
<section>
<title>Menu generation</title>
<body>

<p>
The author uses a text editor to create menus, believing that menumakers
introduce too much clutter, often skip important packages, and don't always
work well with the styles Gentoo installs. However, many disagree, so the
instructions below show how to use two of the more common menu generators.
</p>

<p>
Both of these programs provide a good organizational system, and it is possible
to edit <path>~/.fluxbox/menu</path> by hand after using them, to either add
packages or delete those which aren't used. Note that if something is deleted
from this menu, it does not delete the package from the system, just from the
individual user's menu. The program can still be run by command-line.
</p>

<p>
There is a program already on your system called <c>fluxbox-generate_menu</c>,
who's behaviour is similar to that of <c>mmaker</c>. This program does a better
job handling styles, but does not detect as many programs. To use it, simply
run the command. To install and use <c>mmaker</c>, see below.
</p>

<pre caption="Installing menumaker">
# <i>emerge menumaker</i>
</pre>

<p>
Then, simply run <c>mmaker Fluxbox</c>. However, it is important to note that
while more programs are detected than by using <c>fluxbox-generate_menu</c>,
many major programs are still skipped. For example, neither gaim nor xchat are
found.
</p>

</body>
</section>
<section>
<title>Summary</title>
<body>

<p>
Congratulations! Fluxbox is now installed, configured, and ready to go. If any
questions or suggestions come to mind, please email the author and/or file a
bug report at Gentoo's <uri link="http://bugs.gentoo.org">Bugzilla</uri>.
</p>

</body>
</section>
</chapter>
</guide>
