<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/en/gentoo-x86-install.xml">
<title>Instruções de Instalação do Gentoo Linux 1.4</title>
<author title="Chief Architect">
    <mail link="drobbins@gentoo.org">Daniel Robbins</mail>
</author>
<author title="Author">Chris Houser</author>
<author title="Author">Jerry Alexandratos</author>
<author title="Ghost">
    <mail link="g2boojum@gentoo.org">Grant Goodyear</mail>
</author>
<author title="Editor">
    <mail link="zhen@gentoo.org">John P. Davis</mail>
</author>
<author title="Editor">
    <mail link="Pierre-Henri.Jondot@wanadoo.fr">Pierre-Henri Jondot</mail>
</author>
<author title="Editor">
    <mail link="stocke2@gentoo.org">Eric Stockbridge</mail>
</author>
<author title="Editor">
    <mail link="rajiv@gentoo.org">Rajiv Manglani</mail>
</author>
<author title="Editor">
    <mail link="seo@gentoo.org">Jungmin Seo</mail>
</author>
<author title="Editor">
    <mail link="zhware@gentoo.org">Stoyan Zhekov</mail>
</author>
<author title="Editor">
    <mail link="jhhudso@gentoo.org">Jared Hudson</mail>
</author>
<author title="Editor">Colin Morey</author>
<author title="Editor">
    <mail link="peesh@gentoo.org">Jorge Paulo</mail>
</author>
<author title="Editor">
    <mail link="carl@gentoo.org">Carl Anderson</mail>
</author>
<author title="Editor, Reviewer">
    <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Editor">
    <mail link="avenj@gentoo.org">Jon Portnoy</mail>
</author>
<author title="Editor">
     <mail link="klasikahl@gentoo.org">Zack Gilburd</mail>
</author>
<author title="Reviewer">
    <mail link="gerrynjr@gentoo.org">Gerald J. Normandin Jr.</mail>
</author>
<author title="Reviewer">
    <mail link="spyderous@gentoo.org">Donnie Berkholz</mail>
</author>

<abstract>
Estas instruções te guiarão através do processo de instalação do Gentoo Linux
1.4 versão final (não as versões _rc). O processo de instalação do Gentoo Linux
suporta várias abordagens de instalação, dependendo de quanto você deseja
personalizar seu sistema.
</abstract>

<license/>

<version>2.6.4</version>
<date>8 de Agosto de 2003</date>

<chapter>
<title>Sobre a Instalação</title>
<section>
<body>

<p>
Primeiro, se você é novo aqui, seja bem-vindo ao Gentoo Linux! O Gentoo Linux
pode ser instalado de diversas formas, enquanto quem quiser o máximo em
personalização pode compilar o Gentoo Linux inteiramente a partir do
código-fonte original. O método de instalação só depende de você.
</p>

<p>
Uma mudança significativa em relação à versão 1.4 oficial de nosso conjunto de
instalação de 2 CD's, que pode ser encomendado na <uri
link="http://store.gentoo.org">Loja do Gentoo Linux</uri>, além de estar
disponível em nossos mirrors. Atualmente temos conjuntos de instalação
de 2 CD's para x86 (486 e acima), i686 (Pentium Pro, Pentium II, Athlon/Duron e
acima), Pentium III, Pentium 4 e Athlon XP. Para saber qual conjunto de 2 CD's é
o certo para você, leia as descrições detalhadas de cada produto na <uri
link="http://store.gentoo.org">loja</uri>. As descrições da loja contêm
informações bastante detalhadas sobre compatibilidade de CPU's.
</p>

<p>Então, sobre os pacotes de 2 CD's -- aqui está o conteúdo de cada CD. O
primeiro CD ("CD 1") é chamado de "Live CD Installation" e é um CD-ROM
inicializável, o que significa que você pode inserir o "CD 1" em sua unidade e
rodar o Gentoo Linux diretamente a partir do CD. Você pode então usar esta
versão de CD do Gentoo para instalar o Gentoo Linux 1.4 em seu disco rígido.
Além de conter um ambiente Gentoo Linux inicializável, o CD 1 contém tudo que
você necessita para instalar o Gentoo Linux rapidamente, mesmo sem uma conexão à
Internet. E ainda há vários pacotes pré-compilados incluídos no CD 1, como por
exemplo o sempre importante servidor X XFree86. Se você tem um arquivo de imagem
ISO do CD 1, o nome dele termina com "<path>-cd1.iso</path>".
</p>

<p>
Diferente do primeiro, o sgundo CD ("CD 2") não é inicializável e contém
toneladas de pacotes pré-compilados para seu sistema. Incluídos neste CD estão
as versões otimizadas de pacotes como KDE, GNOME, OpenOffice, Mozilla, Evolution
e outros. O CD 2 é <e>opcional</e> e se destina àqueles interessados em instalar
o Gentoo Linux bem rápido. Os pacotes incluídos no CD 2 normalmente levam cerca
de 36 horas para compilar a partid do códig-fonte num típico sistema moderno
monoprocessado. Se você tem um arquivo de imagem ISO do CD 2, o nome dele
termina com "<path>-cd2.iso</path>".
</p>

<note>
Um conjunto de 2 CD's do Gentoo Linux completo contém a Plataforma de Referência
Gentoo, que é um sistema Gentoo Linux completo pré-compilado, incluindo GNOME,
KDE, Mozilla e OpenOffice. A Plataforma de Referência Gentoo ("GRP") foi criada
para permitir instalações rápidas de pacotes do Gentoo Linux para quem precisar
desta capacidade. A funcionalidade de "compilar a partir dos fontes", que é o
chamariz do Gentoo Linux, sempre será uma forma de instalação totalmente
suportada. O objetivo da GRP é tornar o Gentoo Linux mais conveniente para
alguns usuários, sem conflitar com o poderoso processo de instalação de
"compilação a partir dos fontes" de modo algum.
</note>

<p>
Além do nosso pacote com 2 CD's, temos também um pequeno CD de inicialização
"básico", que você pode usar para inicializar seu sistema. Quando seu sistema
inicializar, você poderá configurar uma conexão à Internet e depois instalar o
Gentoo pela rede. A vantafem deste CD "básico" é seu pequeno tamanho, e então o
arquivo de imagem ISO pode ser rapidamente baixado. Se você é um usuário
avançado que quer instalar a versão mais atualizada possível do Gentoo Linux,
e possui uma conexão rápida à Internet, então talvez você prefira esta opção. Se
você tiver um arquivo de imagem ISO para seu CD inicializável "básico", o nome
dele termina com "<path>-basic.iso</path>".
</p>
		
<p>
Para usar qualquer método de instalação do Gentoo Linux baseado em CD, você
precisará de um processador 486 ou superior, e idealmente no mínimoo 64
Megabytes de memória RAM. (O Gentoo Linux já foi instalado com sucesso com 64MB
de RAM + 64MB de <e>swap</e>, mas o processo de compilação é terrivelmente lento
nestas condições.)
</p>

<p>
Tendo iniciado um de seus CD's de inicialização, agora você tem ainda mais
opções. O Gentoo Linux pode ser instalado usando-se um dos três arquivos de
&quot;estágios&quot;. A sua escolha depende do quanto do seu sistema você quer
compilar. O arquivo do estágio1 é usado quando você quer fazer o
<e>bootstrap</e> e compilar o sistema inteiro "do zero". O arquivo do estágio2 é
usado para compilar o sistema inteiro a partir de um estado <e>bootstrap</e>ado
"semi-compilado". O estágio3 já contém um sistema Gentoo Linux básico que foi
feito para você. Se você está interessado em fazer uma instalação da "GRP",
então o arquivo do estágio3 deve ser usadio.
</p>

<p>
<b>Se você não está fazendo uma instalação da GRP, de qual estágio começar (1, 2
ou 3)?</b> Aqui estão algumas informações que deve ajudá-lo a fazer esta
escolha.
</p>

<p>
Começar do estágio1 sempre lhe permite total controle sobre as configurações de
otimização e funcionalidades de tempo de compilação que inicialmente estão
ativas em seu sistema. Isto torna instalações do estágio1 boas para usuários
experientes que sabem o que estão fazendo. Também é um excelente método de
instalação para quem quer aprender mais sobre o funcionamento do Gentoo Linux.
</p>

<p>
Instalações do estágio2 permitem que você pule o processo de <e>bootstrap</e>, e
isto é bom se você está satisfeito com as otimizações que escolhemos para seu
arquivo particular do estágio2. 
</p>

<p>
E escolher o estágio3 permite a instalação mais rápida do Gentoo Linux, mas
também significa que a base de seu sistema terá as otimizações que escolhemos
para você (que, honestamente, são boas otimizações e foram cuidadosamente
escolhidas para aumentar o desempenho enquanto mantêm a estabilidade). Como as
principais versões do Gentoo Linux têm estágios3 especificamente otimizados para
vários processadores populares, começar do estágio3 pode oferecer o melhor de
todos os mundos -- uma instalação rápida e um sistema bem otimizado.
</p>

<p>
<b>Se você está instalado o Gentoo Linux pela primeira vez, considere usar um
arquivo do estágio3 para a instalação, ou um estágio3 com GRP.</b>
</p>

<note>
<b>Usuários avançados:</b> Se você usar uma instalação do estágio3, você não
deve mudar a configuração do CHOST padrão em <path>/etc/make.conf</path>. Se
você precisar fazer uma modificação destas, inicie com o arquivo do estágio1 e
compile seu sistema com a configuração de CHOST desejada. A configuração do
CHOST geralmente é parecida com isso: <c>i686-pc-linux-gnu</c>.
</note>

<impo>
Se você tiver algum problema com qualquer parte da instalação e quiser
reportá-lo como um <e>bug</e>, faça-o em <uri>http://bugs.gentoo.org</uri>. Se o
<e>bug</e> precisar ser mandado para os desenvolvedores originais do software
(por exemplo, a equipe do KDE), os <e>desenvolvedores do Gentoo Linux</e>
cuidarão disto por você.
</impo>

<note>
As instruções de instalação no CD inicializável podem não estar tão atualizadas
quanto nossa documentação na rede em
<uri>http://www.gentoo.org/doc/en/gentoo-x86-install.xml</uri>. Consulte nossa
documentação na rede para as instruções mais atualizadas de instalação.
</note>

<p>
Agora, vamos rapidamente rever o processo de instalação. Primeiro, vamos baixar,
gravar o(s) CD('s) e inicializar com o CD inicializável. Depois que aparecer o
<e>prompt</e> do root, vamos criar as partições, criar nossos sitemas de
arquivos e extrair o arquivo do estágio1, estágio2 ou estágio3. Se estivermos
usando um arquivo do estágio1 ou estágio2, tomaremos os passos certos para levar
nosso sistema ao estágio3. Quando nosso sistema estiver no estágio3, poderemos
configurá-lo (personalizar os arquivos de configuração, instalado um gerenciador
de inicialização etc.), iniciá-lo e ter um sistema Gentoo Linux totalmente
funcional. Depois do seu sistema Gentoo Linux básico estar funcionando, você
pode optativamente usar o "CD 2" de nosso pacote de 2 CD's e instalar qualquer
número de pacotes pré-compilados tais como KDE, GNOME, OpenOffice, Mozilla, ou
outros que você gostaria de ter no seu sistema. 
</p>

<p>
Dependendo de em qual estágio do processo de compilação você estiver começando,
aqui estão os requisitos para a instalação:
</p>

<table>
<tr>
 <th>Arquivo de estágio</th>
 <th>Acesso à Internet Necessário</th>
 <th>CD's Necessários</th>
 <th>Passos</th>
</tr>
<tr>
 <ti>1</ti>
 <ti>Sim</ti>
 <ti><e>básico</e> ou <e>CD 1</e></ti>
 <ti>configuração de partição/sistema de arquivos, emerge sync, bootstrap,
 emerge system, configurações finais</ti>
</tr>
<tr>
 <ti>2</ti>
 <ti>Sim</ti>
 <ti><e>báico</e> ou <e>CD 1</e></ti>
 <ti>configuração de partição/sistema de arquivos, emerge sync, emerge system,
 configurações finais</ti>
</tr>
<tr>
 <ti>3</ti>
 <ti>Não se usar o <e>CD 1</e>, Sim se diferente</ti>
 <ti><e>básico</e> oo <e>CD 1</e></ti>
 <ti>configuração de partição/sistema de arquivos, emerge sync (desnecessário se
 estiver usando o <e>CD 1</e>), configurações finais</ti>
</tr>
<tr>
 <ti>3+GRP</ti>
 <ti>Não</ti>
 <ti><e>CD 1</e>, <e>CD 2</e> optativamente</ti>
 <ti>configuração de partição/sistema de arquivos, configurações finais,
 instalação dos pacotes pré-compilados do CD 1 (opcional), reinicialização,
 instalação de pacotes pré-compilados extras como KDE e GNOME (se ustiver usando
 o "CD 2")</ti>
</tr>
</table>

<note>
Usuários de RAID por <e>hardware</e> devem ler a seção sobre ATA RAID no final
deste documento antes de continuar.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Inicialização</title>
<section>
<body>

<warn>
Leia toda esta seção antes de continuar, principalmente as opções de
inicialização disponíveis. Ignorá-las poderia levar a configurações erradas de
teclado, serviços pcmcia não-iniciados etc..
</warn>

<p>
Comece inicializando pelo CD que você preferir. Deve aparecer uma tela bonitinha
de inicialização com o logo do Gentoo Linux. Nesta tela, você pode apertar ENTER
para começar o processo de inicialização, ou iniciar o CD com opções de
inicialização pessoais especificando um kernel seguido das opções de
inicialização e pressionando ENTER. Por exemplo: <c>gentoo nousb nohotplug</c>.
Se você estiver instalando o Gentoo Linux num sistema com mais de um processador
("SMP"), então vocÊ deve digitar <c>smp</c> em vez de <c>gentoo</c> no
<e>prompt</e>. Isto vai permitir que o CD veja todos os processadores no seu
sistema, não só o primeiro deles.
</p>
		
<p>
Consulte a próxima tabela para uma lista parcial de kernels e opções disponíveis
ou pressione F2 e F3 para ver as telas de ajuda.
</p>

<table>
<tr><th>Kernels disponíveis</th><th>Descrição</th></tr>
<tr><ti>gentoo</ti><ti>Kernel gentoo padrão (padrão)</ti></tr>
<tr><ti>nofb</ti><ti>desabilita o modo framebuffer</ti></tr>
<tr><ti>smp</ti><ti>carrega um kernel smp em modo noframebuffer</ti></tr>
<tr><ti>acpi</ti><ti>habilita acpi=on e carrega os módulos acpi durante a
inicialização</ti></tr>
<tr><ti>memtest</ti><ti>inicia o programa de teste de memória</ti></tr>
</table>

<table>
<tr><th>Opções de inicialização disponíveis</th><th>Descrição</th></tr>
<tr><ti>doataraid</ti><ti>carrega os módulos de ide raid do initrd</ti></tr>
<tr><ti>dofirewire</ti><ti>faz um modprobe dos módulos de firewire no initrd man
(para cdroms e outros dispositivos firewire)</ti></tr>
<tr><ti>dokeymap</ti><ti>habilita a seleção de mapa de teclado para conjuntos de
teclas não-us</ti></tr>
<tr><ti>dopcmcia</ti><ti>inicia o serviço pcmcia</ti></tr>
<tr><ti>doscsi</ti><ti>procura dispositivos scsi (quebra algumas placas
ethernet)</ti></tr>
<tr><ti>noapm</ti><ti>desabilita o carregamento de módulos apm</ti></tr>
<tr><ti>nodetect</ti><ti>não roda hwsetup/kudzu nem hotplug</ti></tr>
<tr><ti>nodhcp</ti><ti>dhcp não inicia automaticamente se a placa de rede for
detectada</ti></tr>
<tr><ti>nohotplug</ti><ti>desabilita o carregamento do serviço hotplug</ti></tr>
<tr><ti>noraid</ti><ti>desabilita o carregamento dos módulos evms</ti></tr>
<tr><ti>nousb</ti><ti>desabilita o carregamento do módulo usb no initrd,
desabilita hotplug</ti></tr>
<tr><ti>ide=nodma</ti><ti>força a desabilitação de dma para dispositivos dma com
defeito</ti></tr>
<tr><ti>cdcache</ti><ti>faz cache na ram toda a parte <e>runtime</e> do cd. Isso
usa 40mb de RAM, mas permite que você desmonte o <path>/mnt/cdrom</path> e monte
outro cdrom</ti></tr>
</table>

<p>
Depois de apertar ENTER, você verá uma tela de inicialização ainda mais
bonitinha, além de uma barra de progresso.
</p>

<!--
	<figure link="/images/install/livecd-1.4-boot.png" caption="CD di Gentoo
	Linux iniciando" />
-->

<p>
Assim que o processo de inicialização for completado, você será automaticamente
logado no Gentoo Linux como "<e>root</e>", o "superusuário". Você deve ter um
<e>prompt</e> de root ("#") no terminal atual, e também pode mudar para outros
terminais pressionando Alt-F2, Alt-F3 e Alt-F4. Volte ao primeiro terminal
pressionando Alt-F1.
</p>

<!--

	<figure link="/images/install/livecd-1.4-con.png" caption="Terminal do
	CD inicializável do Gentoo Linux" />
-->

<note>
<b>Usuários avançados:</b> Quando o CD inicializa, a senha do root é
especificada para uma palavra aleatória por motivo de segurança. Se você
pretende iniciar o <c>sshd</c> para permitir <e>logins</e> remotos em seu CD,
você deve especificar a senha do root do CD agora digitando <c>passwd</c> e
seguindo as instruções. Senão, você não vai saber a senha adequada para logar no
CD pela rede. 
</note>

<p>
Provavelmente você já notou que acima do seu <e>prompt</e> # existe um monte de
texto de ajuda que explica como fazer coisas como configurar sua rede Linux e
dizendo onde você encontra os arquivos de estágios do Gentoo Linux e pacotes no
seu CD.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configuração opcional de hardware</title>
<section>
<body>

<p>
Quando o CD inicia, ele tenta detectar todos os seus dispositivos de hardware e
carrega os módulos do kernel apropriados para suportar seu hardware. Na grande
maioria dos casos, ele faz um bom trabalho. Porém, em alguns casos, ele pode não
conseguir carregar automaticamente os módulos do kernel que você precisa. Se a
auto-detecção PCI deixou de ver algum ítem de hardware, você terá que carregar
os módulos apropriados manualmente. Para ver uma lista de todos os módulos de
placas de rede disponíveis, digite <c>>ls 
/lib/modules/`uname -r`/kernel/drivers/net/*</c>. Para carregar um módulo
particular, digite:
</p>

<pre caption="Configuração de Módulos PCI">
# <i>modprobe pcnet32</i>
<comment>(substitua pcnet32 pelo módulo da sua placa de rede)</comment>
</pre>

<p>
Da mesma forma, se você quiser acessar algum dispositivo SCSI que não tenha sido
detectado durante o processo inicial de auto-detecção, você precisará carregar
os módulos adequados a partir de <path>/lib/modules</path>,novamente usando
<c>modprobe</c>:
</p>

<pre caption="Carregando Módulos SCSI">
# <i>modprobe aic7xxx</i>
<comment>(substitua aic7xxx pelo módulo do seu adaptador SCSI)</comment>
# <i>modprobe sd_mod</i>
<comment>(sd_mod é o módulo para suporte de discos SCSI)</comment>
</pre>

<note>
O suporte a CD-ROMs e discos SCSI está compilado dentro do kernel.
</note>

<note>
<b>Usuários avançados:</b> O CD inicializável do Gentoo provavelmente habilitou
o DMA nos seus discos para acelerar ao máximo a transferência de dados. Porém,
se ele não o fez, <c>hdparm</c> pode ser usado para configurar o DMA em seus
drives, assim:
<pre caption="Habilitando DMA">
<comment>(Substitua hdX0 pelo seu disco)</comment>
# <i>hdparm -d 1 /dev/hdX</i> 
<comment>(Habilita DMA)</comment>
# <i>hdparm -d1 -A1 -m16 -u1 -a64 /dev/hdX</i>
<comment>(Habilita DMA e outras opções seguras de melhora de desempenho)</comment>
# <i>hdparm -X66 /dev/hdX</i>
<comment>(Força a habilitação de Ultra-DMA -- perigoso -- pode bagunçar alguns
discos)</comment>
</pre>
</note>

			
</body>
</section>
</chapter>
<chapter>
<title>Configuração opcional de Rede</title>
<section>
<title>Talvez já esteja funcionando?</title>
<body>

<p>
Se o seu sistema está ligado a uma rede Ethernet, é muito provável que sua
configuração de rede já tenha sido feita automaticamente para você. Se for este
o caso, você deve conseguir aproveitar os muitos comandos de rede incluídos no
CD, tais como <c>ssh</c>, <c>scp</c>, <c>ping</c>, <c>irssi</c>, <c>wget</c> and
<c>lynx</c>, entre outros.
</p>
	  
<p>
Se a rede já foi configurada para você, o comando <c>/sbin/ifconfig</c> deve
listar algumas interfaces de rede além de lo, como eth0:
</p>

<pre caption="/sbin/ifconfig para uma placa de rede funcionante">
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11 Base address:0xe800 
</pre>

<p>
Você também pode tentar pingar o servidor DNS do seu provedor (encontrado em
<path>/etc/resolv.conf</path>) e um sítio eletrônico de sua escolha, só para ter
certeza de que seus pacotes estão chegando na rede, a resolução de nomes por DNS
está funcionando corretamente, etc..
</p>

<pre caption="Testando a Rede um pouco mais">
# <i>ping -c 3 www.yahoo.com</i>
</pre>

<p>
Você consegue usar sua rede? Se sim, pode pular o resto desta seção.
</p>

</body>
</section>
<section>
<title>Configuração de PPPoE</title>
<body>

<p>
Supondo que você precise do PPPoE para se conectar à internet, o CD (qualquer
versão) já torna as coisas mais fáceis para você incluindo o <c>rp-pppoe</c>.
Use o script <c>adsl-setup</c> fornecido para configurar sua conexão. Você será
perguntado pelo dispositivo ethernet que está conectado ao seu modem adsl, seu
nome de usuário e senha, os IP's de seus servidores DNS e se você precisa de um
<e>firewall</e> básico ou não.
</p>

<pre caption="Configurando o PPPoE">
# <i> adsl-setup </i>
# <i> adsl-start </i>
</pre>

<p>
Se alguma coisa sair errada, verifique novamente se você digitou corretamente
seu nome de usuário e senha olhando o <path>/etc/ppp/pap-secrets</path> ou o
<path>/etc/ppp/chap-secrets</path> e certifique-se de estar usando o dispositivo
de rede correto.
</p>

</body>
</section>

<section>
<title>Configuração de Rede Automática</title>
<body>

<p>
A forma mais fácil de configurar a rede se ela não foi configurada
automaticamente é rodar o script <c>net-setup</c>:
</p>

<pre caption="O Script Net-Setup">
# <i>net-setup eth0</i>
</pre>

<p>
Obviamente, se você preferir, você ainda pode configurar a rede manualmente.
Falaremos sobre isso a seguir.
</p>

</body>
</section>
<section>
<title>Configuração Manual de DHCP</title>
<body>

<p>
A configuração da rede é fácil com DHCP; se o seu provedor não está usando DHCP,
pule para a seção de configuração estática de rede logo abaixo.
</p>

<pre caption="Configuração de rede com DHCP">
# <i>dhcpcd eth0</i>
</pre>

<note>
Alguns provedores precisam que você forneça um nome de máquina. Para fazer isso,
adicione um <c>-h minhamáquina</c> à linha de comando do dhcpcd acima.
</note>

<p>
Se você receber avisos do <e>dhcpConfig</e>, fique calmo; os erros são, na
maioria das vezes, cosméticos. Pule para os Testes de Rede abaixo.
</p>

</body>
</section>
<section>
<title>Configuração Estática Manual</title>
<body>

<p>
Precisamos configurar a rede o suficiente para baixarmos os fontes para a
compilação do sistema, assim como a interface localhost necessária. As
informações necessárias estão explicadas na próxima tabela.
</p>

<table>
<tr><th>Information</th><th>Descrição</th><th>Exemplo de valor</th></tr>
<tr><ti>IP address</ti><ti>O endereço IP que você quer associar à sua placa de
rede</ti><ti>192.168.1.2</ti></tr>
<tr><ti>Broadcast address</ti><ti>O endereço IP que vai espalhar os pacotes
para todas as máquinas da rede</ti><ti>192.168.1.255</ti></tr>
<tr><ti>Network mask</ti><ti>A máscara que é usada junto com o endereço IP para
ver qual parte do endereço é para identificação da rede e qual é para
identificação das máquinas</ti><ti>255.255.255.0</ti></tr>
<tr><ti>Gateway</ti><ti>O endereço IP do computador que vai repassar os pacotes
que não se destinam à rede local (na maioria das vezes, o computador que
compartilha a conexão à Internet)</ti><ti>192.168.1.1</ti></tr>
</table>

<p>
Digite os seguintes comandos, substituindo <c>$IFACE</c> pela sua interface de
rede (geralmente <c>eth0</c>), <c>$IPNUM</c> pelo seu endereço IP, <c>$BCAST</c>
pelo seu endereço broadcast e <c>$NMASK</c> pela sua máscara de rede. Para o
comando <c>route</c>, substitua <c>$GTWAY</c> pelo seu roteador padrão.
</p>

<pre caption="Configuração de Rede com IP Estático">
# <i>ifconfig $IFACE $IPNUM broadcast $BCAST netmask $NMASK</i>
# <i>route add -net default gw $GTWAY netmask 0.0.0.0 metric 1 $IFACE</i>
</pre>

<p>
Agora vamos criar o arquivo <path>/etc/resolv.conf</path> para a resolução de
nomes (encontrar sítios WWW/FTP pelo nome, em vez de só pelo endereço IP)
funcionar. Você pode usar <c>nano -w /etc/resolv.conf</c> para criar o
<path>/etc/resolv.conf</path>. <c>nano</c> é um editor pequeno e fácil de usar.
</p>

<p>
Aqui está um exemplo para você seguir para criar seu arquivo
<path>/etc/resolv.conf</path>:
</p>

<pre caption="/etc/resolv.conf de exemplo">
domain meudominio.com
nameserver 10.0.0.1
nameserver 10.0.0.2
</pre>

<p>
Substitua <c>10.0.0.1</c> e <c>10.0.0.2</c> pelos endereços IP dos seus
servidores DNS primário e secundário respectivamente.
</p>

</body>
</section>

<section>
<title>Configuração de Proxy</title>
<body>

<p>
Se você está atrás de um proxy, pode ser necessário configurar seu proxy antes
de continuar. Vamos exportar algumas variáveis para configurar o proxy de
acordo.
</p>

<pre caption="Configurando um Proxy">
<comment>Se o proxy restringe tráfego HTTP:</comment>
# <i>export http_proxy="máquina.empresa.com:1234"</i>
<comment>Se o proxy restringe tráfego FTP:</comment>
# <i>export ftp_proxy="máquina.empresa.com"</i>
<comment>Se o proxy restringe tráfego RSYNC:</comment>
# <i>export RSYNC_PROXY="máquina.empresa.com"</i>
</pre>

</body>
</section>

<section>
<title>A rede está pronta!</title>
<body>

<p>
A rede já deve estar configurada e utilizável. Você deve conseguir usar os
comandos <c>ssh</c>, <c>scp</c>, <c>lynx</c>, <c>irssi</c> e <c>wget</c>
incluídos para se conectar a outras máquinas na sua rede local ou na Internet.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configurando data e hora do seu sistema</title>
<section>
<body>

<p>
Agora você precisará configurar a data e a hora do seu sistema. Você pode fazer
isso usando o comando <c>date</c>.
</p>

<pre caption="Configurar a data do sistema">
# <i>date</i>
Thu Feb 27 09:04:42 CST 2003
<comment>(Se a sua data está errada, configure-a com este próximo comando)</comment>
# <i>date 022709042003</i>
<comment>(date MMDDhhmmAAAA)</comment>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Sistemas de Arquivos, partições e dispositivos de blocos</title>
<section>
<title>Introdução a dispositivos de blocos</title>
<body>

<p>
Nesta seção, vamos dar uma olhada nos aspectos
orientados a disco do Gentoo Linux e no Linux em geral, incluindo
sistemas de arquivos, partições e dispositivos de blocos do Linux.
Depois, já que você estará familiarizado com os discos e sistemas de
arquivos, você será guiado através do processo de configuração de
partições e sistemas de arquivos para a sua instalação do Gentoo Linux.
</p>

<p>
Para começar, vou apresentar os "dispositivos de blocos". O dispositivo de bloco
mais famoso é provavelmente o que representa o primeiro disco IDE num sistema
Linux:
</p>

<pre caption="/dev/hda, o dispositivo de blocos que representa o disco IDE mestre
primário no seu sistema">
/dev/hda
</pre>

<p>
Se seu sistema usa discos SCSI, então seu primeiro disco rígido será:
</p>

<pre caption="/dev/sda, o dispositivo de blocos que representa o primeiro
dispositivo SCSI lógico no seu sistema">
/dev/sda
</pre>

<p>
Os dispositivos de blocos acima representam uma interface <e>abstrata</e> com o
disco. Programas de usuário podem usar estes dispositivos de blocos para
interagir com seu disco sem se preocupar se seus discos são IDE, SCSI ou alguma
outra coisa. O programa pode simplesmente destinar o armazenamento no disco como
um monte de blocos contíguos e aleatoriamente acessíveis de 512 bytes.
</p>

</body>
</section>
<section>
<title>Partições e fdisk</title>
<body>

<p>
No Linux, nós criamos sistemas de arquivos usando um comando especial chamado
<c>mkfs</c> (ou <c>mke2fs</c>, <c>mkreiserfs</c>, etc.), especificando um
dispositivo de blocos particular em um argumento da linha de comando.
</p>

<p>
Porém, apesar de ser teoricamente possível usar um dispositivo de blocos de "um
disco inteiro" (um que represente o disco <e>todo</e>) como
<path>/dev/hda</path> ou <path>/dev/sda</path> para abrigar um único sistema de
arquivos, isto quase nunca é feito na prática. Em vez disto, dispositivos de
blocos de disco inteiro são divididos em dispositivos de blocos menores e mais
fáceis de mexer chamdos "partições". Partições são criadas usando uma ferramenta
chamada <c>fdisk</c>, que é usada para criar e editar a tabela de partições que
fica guardada em cada disco. A tabela de partições define exatamente como
dividir o disco todo.
</p>

<p>
Podemos olhar a tabela de partições de um disco rodando <c>fdisk</c>,
especificando como argumento um dispositivo de blocos que representa o disco
inteiro:
</p>

<note>
Interfaces alternativas para a tabela de partições incluem <c>cfdisk</c>,
<c>parted</c> e <c>partimage</c>.. Recomendamos <c>fdisk</c> porque é mais
poderoso e difundido no mundo Unix/Linux.
</note>

<pre caption="Iniciando o fdisk">
# <i>fdisk /dev/hda</i>
</pre>

<p>
ou
</p>

<pre caption="Iniciando o fdisk para ver a tabela de partições em /dev/sda">
# <i>fdisk /dev/sda</i>
</pre>

<impo>
Note que você <e>não</e> deve salvar ou fazer nenhuma alteração na tabela de
partições de um disco se alguma de suas partições contém sistemas de arquivos em
uso ou contém dados importantes. Alterar a tabela muito provavelmente fará os
dados no disco serem perdidos.
</impo>

<p>
Agora que você está no <c>fdisk</c>, você verá um <e>prompt</e> mais ou menos
assim:
</p>

<pre caption="O prompt do fdisk">
Command (m for help): 
</pre>

<p>
Digite <c>p</c> para mostrar a configuração atual das partições do seu disco:
</p>

<pre caption="Um exemplo de configuração de partições">
Command (m for help): <i>p</i>

Disk /dev/hda: 240 heads, 63 sectors, 2184 cylinders
Units = cylinders of 15120 * 512 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux
/dev/hda2            15        49    264600   82  Linux swap
/dev/hda3            50        70    158760   83  Linux
/dev/hda4            71      2184  15981840    5  Extended
/dev/hda5            71       209   1050808+  83  Linux
/dev/hda6           210       348   1050808+  83  Linux
/dev/hda7           349       626   2101648+  83  Linux
/dev/hda8           627       904   2101648+  83  Linux
/dev/hda9           905      2184   9676768+  83  Linux

Command (m for help): 
</pre>

<p>
Este disco específico está configurado para abrigar sete sistemas de arquivos
Linux diferentes(cada um com uma partição correspondente listada como "Linux")
além de uma partição de troca (<e>swap</e>) (listada como "Linux swap").
</p>

<p>
Note o nome dos dispositivos de blocos das partições correspondentes no lado
esquerdo, começando com <path>/dev/hda1</path> e indo até
<path>/dev/hda9</path>. Nos primórdios do PC, programas de particionamento só
permitiam um máximo de quatro partições (chamadas partições "primárias"). Isto
era muito limitante, então criaram uma solução chamada <e>partição
estendida</e>. Uma partição estendida é muito parecida com a partição primária e
conta como uma partição primária para o limite de quatro. Porém, partições
estendidas podem abrigar qualquer número das chamadas partições <e>lógicas</e>
dentro delas, fornecendo assim um jeito efetivo de solucionar o limite das quatro
partições.
</p>

<p>
Todas as partições <path>/dev/hda5</path> e acima são partições lógicas. Os
números 1 a 4 são reservados para partições primárias e estendidas.
</p>

<p>
Então, no nosso exemplo, <path>/dev/hda1</path> a <path>/dev/hda3</path> são
partições primárias. <path>/dev/hda4</path> é uma partição estendida que contém
as partições lógicas <path>/dev/hda5</path> até <path>/dev/hda9</path>. Você
nunca realmente <e>usa</e> <path>/dev/hda4</path> para guardar diretamente um
sistema de arquivos -- esta partição estendida simplesmente age como um
contêiner para as partições <path>/dev/hda5</path> até <path>/dev/hda9</path>.
</p>

<p>
Além disto, note que cada partição tem uma "Id", também chamada de "tipo de
partição". Sempra que você cria uma partição, você deve se certificar que o tipo
de partição está especificado corretamente. '83' é o tipo de partição correto
para partições que abrigarão sistemas de arquivos Linux, '82' é o tipo de
partição correto para partições Linux swap, e 'fd' é o tipo de partição
recomendado para partições "RAID por software". Você especifica o tipo de
partição usando a opção <c>t</c> no <c>fdisk</c>. O kernel Linux usa o tipo de
partição para auto-detectar sistemas de arquivos e dispositivos de troca no
disco durante a inicialização do sistema.
</p>

</body>
</section>

<section>
<title>Usando fdisk para criar partições</title>
<body>

<p>
Agora que você já foi apresentado à forma como se particionam discos no Linux,
está na hora de adentrar o processo de criação de partições de disco para a sua
instalação do Gentoo Linux. Após passar pelo processo de criação de partições no
seu disco, sua configuração das partições deverá ser parecida com isso:
</p>

<pre caption="A configuração de partições que você terá após seguir estes passos">
Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1   *         1        14    105808+  83  Linux
/dev/hda2            15        81    506520   82  Linux swap
/dev/hda3            82      3876  28690200   83  Linux

Command (m for help):
</pre>

<p>
Na nossa configuração de partições sugerida para iniciantes, temos três
partições. A primeira (<path>/dev/hda1</path>) no início do disco é uma pequena
partição chamada "partição boot". A partição boot serve para guardar todos os
dados críticos relacionados com a inicialização -- informações do gerenciador de
inicialização GRUB (se você usar o GRUB) além de seu(s) kernel(s) Linux. A
partição boot fornece um lugar seguro para guardar tudo relacionado à
inicialização do Linux. No uso diário normal do Gentoo Linux, a sua partição
boot deve permanecer <e> desmontada</e> por questões de segurança. Se você
estiver configurando um sistema SCSI, sua partição boot provavelmente acabará
sendo <path>/dev/sda1</path>.
</p> 

<p>
Recomenda-se ter partições boot (contendo tudo o que é necessário para o
gerenciador de inicialização funcionar) no início do disco. Apesar de não ser
mais necessário, é uma tradição útil dos dias em que o gerenciador de boot LILO
não era capaz de carregar kernels de sistemas de arquivos que se estendiam além
do cilindro 1024 do disco. 
</p>

<p>
A segunda partição (<path>/dev/hda2</path>) é usada somente como espaço de
troca. O kernel usa o espaço de troca como memória virtual quando a memória RAM
já está toda ocupada. Esta partição, relativamente falando, também não é muito
grande, normalmente ocupando algo como 521MB. Se você está configurando um
sistema SCSI, esta partição provavelmente acabará sendo a
<path>/dev/sda2</path>.
</p>

<p>
A terceira partição (<path>/dev/hda3</path>) é bastante grande e ocupa todo o
resto do disco. Esta partição é chamada de partição "raiz" e será usada para
guardar nosso sistema de arquvos principal, aquele que abriga o Gentoo Linux
propriamente dito. Num disco SCSI, esta partição provavelmente acabará sendo a
<path>/dev/sda3</path>.
</p>

<p>
Antes de particionarmos o disco, aqui está uma revisão técnica das configuração
sugerida para partições e sistemas de arquivos para usar na instalação do Gentoo
Linux:
</p>

<table>
<tr>
 <th>Partição</th>
 <th>Tamanho</th>
 <th>Tipo</th>
 <th>exemplo de dispositivo</th>
</tr>
<tr>
 <ti>partição boot, contendo o(s) kernel(s) e informações de inicialização</ti>
 <ti>32 Megabytes</ti>
 <ti>ext2/3 altamente recomendadas (mais fáceis); se ReiserFS então monte com
 <c>-o notail</c>. Se você usar ext3 ou ReiserFS, é preciso adicionar o tamanho
 do <e>journal</e> ao tamanho da partição; nestes casos 64MB são o recomendado</ti>
 <ti><path>/dev/hda1</path></ti>
</tr>
<tr>
 <ti>partição de troca (não mais limitadas a 128 Megabytes, agora 2GB)</ti>
 <ti>Geralmente, configura uma área de troca que tenha entre uma e duas vezes o
 tamanho físico da memória RAM no seu sistema</ti>
 <ti>Linux swap</ti>
 <ti><path>/dev/hda2</path></ti>
</tr>
<tr>
 <ti>partição raiz, contendo o sistema de arquivos principal (/usr, /home, etc.)</ti>
 <ti>&gt;=1.5 Gigabytes</ti>
 <ti>ReiserFS, ext3 recomendados; ext2 ok</ti>
 <ti><path>/dev/hda3</path></ti>
</tr>
</table>

<p>
OK, agora vamos criar as partições como no exemplo e na tabela acima. Primeiro,
entre no fdisk digitando <c>fdisk /dev/hda</c> ou <c>fdisk /dev/sda</c>,
dependendo do tipo do seu disco rígido (IDE ou SCSI). Depois, digite <c>p</c>
para ver a sua configuração atual de partições. Tem alguma coisa no disco que
você precise guardar? Se sim, <b>pare agora mesmo</b>. Se você continuar com
essas instruções, <b>todos os dados atuais do seu disco serão apagados</b>.
</p>

<impo>
Seguir estas instruções abaixo fará todos os dados existentes no seu disco
<b>serem apagados</b>! Se existe alguma coisa no seu disco, por favor
certifique-se de que você <b>selecionou o disco correto</b>, para que você não
apague acidentalmente os dados do disco errado.
</impo>

<p>
Agora é a hora de apagar todas as partições existentes. Para fazer isto, digite
<c>d</c> e pressione Enter. O programa perguntará o número da partição que você
quer apagar. Para apagar uma <path>/dev/hda1</path> já existente, você
digitaria:
</p>

<pre caption="Apagando uma partição">
Command (m for help): <i>d</i>
Partition number (1-4): <i>1</i>
</pre>

<p>
A partição foi marcada para ser apagada. Ela não será mais mostrada se você
digitar <c>p</c>, mas não será realmente apagada até você salvar as alterações.
Se você cometer um erro e quiser abortar sem salvar as alterações, digite
<c>q</c> imediatamente e pressione enter e a sua partição não será apagada.
</p>

<p>
Agora, supondo que você realmente queira apagar todas as partições no seu
sistema, digite <c>p</c> para ver uma lista das partições e depois digite
<c>d</c> e o número da partição para apagá-la, repetidas vezes. Fatalmente você
vai acabar com uma tabela de partições vazia:
</p>

<pre caption="Uma tabela de partições vazia">
Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System

Command (m for help):
</pre>

<p>
Agora que a tabela de partições armazenada na memória está vazia, estamos
prontos para criar uma partição de inicialização. Para fazer isto, digite
<c>n</c> para criar uma nova partição, depois <c>p</c> para dizer ao fdisk que
você quer uma partição primária. Depois digite <c>1</c> para criar a primeira
partição primária. Quando você for perguntado sobre o primeiro cilindro,
pressione enter. Quando perguntado sobre o último cilindro, digite <c>+32M</c>
para criar uma partição com 32MB de espaço. Você pode ver a saída destes passos
abaixo:
</p>

<note>
Sistemas de arquivos com <e>journal</e> precisam de espaço extra para o
<e>journal</e>. Configurações padrão precisam de aproimadamente 33MB de espaço.
Portanto, se você estiver usando um sistema de arquivos <e>journaled</e> para o
<path>/boot</path>, você deve digitar <c>+64MB</c> quando for perguntado sobre o
último cilindro.
</note>

<pre caption="Passos para criar uma partição de inicialização">
Command (m for help): <i>n</i>
Command action
e   extended
p   primary partition (1-4)
<i>p</i>
Partition number (1-4): <i>1</i>
First cylinder (1-3876, default 1): <comment>(Aperte Enter)</comment>
Using default value 1
Last cylinder or +size or +sizeM or +sizeK (1-3876, default 3876): <i>+32M</i>
</pre>

<p>
Agora, quando você digitar <c>p></c>, você deve ver o seguinte esquema de
partições:
</p>

<pre caption="Nossa primeira partição foi criada">
Command (m for help): <i>p</i>

Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1          1        14    105808+  83  Linux
</pre>

<p>
A seguir vamos criar a partição de troca. Para fazer isto, digite <c>n</c> para
criar uma nova partição, depois <c>p</c> para dizer ao fdisk que você quer uma
partição primária. Depois digite <c>2</c> para criar a segunda partição
primária, <path>/dev/hda2</path> no nosso caso. Quando você for consultado sobre
o primeiro cilindro, aperte enter. Quando perguntado sobre o último cilindro,
digite <c>+512M</c> para criar uma partição de 512MB de espaço. Depois de fazer
isto, digite <c>t</c> para especificar o tipo de partição, <c>2</c> para
selecionar a partição que você acabou de criar, e depois digite <c>82</c> para
especificar o tipo de partição "Linux Swap". Após completar estes passos, se
você digitar <c>p</c>, deve ver uma tabela de partições que parece isso:
</p>

<pre caption="Nossa partição de troca foi criada">
Command (m for help): <i>p</i>

Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1          1        14    105808+  83  Linux
/dev/hda2         15        81    506520   82  Linux swap
</pre>

<p>
Finalmente, vamos criar a partição raiz. Para fazer isto, digite <c>m</c> para
criar uma nova partição, depois <c>p</c> para dizer ao fdisk que você quer uma
partição primária. Depois digite <c>3</c> para criar a terceira partição
primária, <path>/dev/hda3</path> no nosso caso. Quando você for perguntado sobre
o primeiro cilindro, aperte enter. Quando for perguntado sobre o último
cilindro, aperte enter para criar uma partição que ocupa todo o resto do disco.
Após completar estes passos, se você digitar <c>p</c>, deve ver uma tabela de
partições mais ou menos assim:
</p>

<pre caption="Nossa partição raiz foi criada">
Command (m for help): <i>p</i>

Disk /dev/hda: 30.0 GB, 30005821440 bytes
240 heads, 63 sectors/track, 3876 cylinders
Units = cylinders of 15120 * 512 = 7741440 bytes

Device Boot    Start       End    Blocks   Id  System
/dev/hda1          1        14    105808+  83  Linux
/dev/hda2         15        81    506520   82  Linux swap
/dev/hda3         82      3876  28690200   83  Linux
</pre>

<p>
Finalmente, precisamos colocar a marca de "inicializável" na nossa partição de
inicialização e depois gravar as alterações no disco. Para marcar
<path>/dev/hda1</path> como uma partição "inicializável", digite <c>a</c> no
menu e depois digite <c>1</c> para o número da partição. Se vocÊ digitar
<c>p</c> agora, verá que <path>/dev/hda1</path> tem um <c>*</c> na coluna
"Boot". Agora, vamos gravar as alterações no disco. Para fazer isto, digite
<c>w</c> e aperte enter. Suas partições de disco agora estão propriamente
configuradas para uma instação do Gentoo Linux. 
</p>

<note>
Se o <c>fdisk</c> ou o <c>cfdisk</c> disserem para fazê-lo, por favor reinicie o
computador para permitir ao seu sistema detectar a nova configuração de
partição.
</note>

</body>
</section>

<section>
<title>Criando sistemas de arquivos</title>
<body>

<p>
Agora que as partições já foram criadas, é hora de configurar os sistemas de
arquivos bas partições boot e raiz para que elas sejam montadas e usadas para
guardar dados. Vamos também configurar a partição de troca para servir como
armazenamento de troca.
</p>

<p>
O Gentoo Linux suporta uma variedade de tipos de sistemas de arquivos; cada tipo
tem suas vantagens e desvantagens e sua características próprias de desempenho.
Atualmente, suportamos a criação de sistemas de arquivos ext2, ext3, XFS, JFS e
ReiserFS.
</p>

<p>
ext2 é o sistema de arquivos usado e testado do Linux, mas não tem
<e>journaling</e>, o que significa que verificações de rotina em sistemas de
arquivos ext2 na inicialozação pode demorar bastante. Agora existe uma boa gama
de sistemas de arquivos <e>journaled</e> de nova geração que podem ter a
consistência verificada muito rapidamente, e por isso geralmente são preferidos
em vez dos equivalentes não-<e>journaled</e>. Sistemas de arquivos
<e>journaled</e> evitam longas esperas quando você inicia seu sistema e seu
sistema de arquivos está num estado <e>inconsistente</e>.
</p>

<p>
ext3 é a versão <e>journaled</e> do ext2, e fornece <e>metadata journaling</e>
para a rápida recuperação, além de outros modos avançados de <e>journaling</e>
como <e>journaling</e> de dados completos e de dados ordenados. ext3 é um
sistema de arquivos muito bom e confiável. Oferece geralmente um desempenho
decente na maioria das situações. Por não empregar árvores extensivamente em seu
desenho interno, ele não é muito escalável, o que significa que ele não é a
escolha ideal para grandes sistemas de arquivos, ou situações onde você vá lidar
com arquivos muito grandes ou grandes quantidades de arquivos em um mesmo
diretório. Mas quando usado dentro de seus parâmetros ideais, ext3 é um
excelente sistema de arquivos.
</p>

<p>
ReiserFS é um sistema de arquivos baseado em árvores-B* que tem desempenho geral
muito bom e facilmente supera ext2 e ext3 quando lida com pequenos arquivos
(arquivos menores que 4k), freqüentemente num fator de 10 a 15 vezes. ReiserFS é
bastante escalável e tem <e>metadata journaling</e>. A partir do kernel 2.4.18,
ReiserFS é extremamente sólido e altamente recomendado tanto para uso geral
quanto para casos extremos como a criação de grandes sistemas de arquivos, o uso
de muitos arquivos pequenos, arquivos muito grandes e diretórios contendo
dezenas de milhares de arquivos. ReiserFS é o sistema de arquivos que nós
recomendamos por padrão para todas as partições não-boot.
</p>

<p>
XFS é um sistema de arquivos com <e>metadata journaling</e> totalmente suportado
no kernel <c>xfs-sources</c> do Gentoo Linux. É bastante robusto e otimizado
para escalabilidade. Nos só recomendamos usar este sistema de arquivos em
sistemas Linux com discos SCSI de alto desempenho e/ou armazenamento por fibra
ótica e um <e>no-break</e>. Por fazer <e>cache</e> agressivamente de dados em
trânsito na RAM, programas mal desenhados (os que não tomam as devidas
precauções quando escrevem arquivos para o disco; há alguns deles) podem
perder muitos dados se o sistema parar inesperadamente.
</p>  

<p>
JFS é o sistema de arquivos <e>journaled</e> de alta performance da IBM.
Recentemente tornou-se pronto para o uso e ainda não existem suficientes
experiências relatadas para se comentar positiva ou negativamente sobre sua
estabilidade.
</p>

<p>
Se você estiver procurando o sistema de arquivos mais maduro, use ext3. Se você
quiser um bom sistema de arquivos de uso geral e alto desempenho com suporte a
<e>journaling</e>, use ReiserFS; ext3 e ReiserFS são maduros, refinados e
recomendados para uso geral.
</p>

<p>
Baseados em nosso exemplo acima, usaremos os seguintes comandos para inicializar
todas as nossas partições para o uso:
</p>

<pre caption="Inicializando nossas partições (exemplo)">
# <i>mke2fs -j /dev/hda1</i>
# <i>mkswap /dev/hda2</i>
# <i>mkreiserfs /dev/hda3</i>
</pre>

<p>
Escolhemos ext3 para nossa partição boot <path>/dev/hda1</path> porque é um
sistema de arquivos robusto e <e>journaled</e> suportado pela maioria dos
grandes gerenciadores de inicialização. Usamos <c>mkswap</c> para nossa partição
de troca <path>/dev/hda2</path> -- a escolha é óbvia aqui. E para nosso
principal sistema de arquivos raiz em <path>/dev/hda3</path> escolhemos
ReiserFS, porque é um sólido sistema de arquivos <e>journaled</e> que oferece
excelente desempenho. Agora, prossiga e inicialize suas partições.
</p>

<p>
Para sua referênai, aqui estão os vários comandos tipo <c>mkfs</c> disponíveis
durante o processo de instalação:
</p>

<p>
<c>mkswap</c> é o comando usado para inicializar as partições de troca:
</p>

<pre caption="Inicializando a partição de troca Swap">
# <i>mkswap /dev/hda2</i>
</pre>

<p>
Você pode usar o comando <c>mke2fs</c> para criar sistemas de arquivos:
</p>

<pre caption="Criando um Sistema de Arquivos ext2">
# <i>mke2fs /dev/hda1</i>
</pre>

<p>
Se você quiser usar ext3, pode criar um sistema de arquivos ext3 usando
<c>mke2fs -j</c>:
</p>

<pre caption="Criando um Sistema de Arquivos ext3">
# <i>mke2fs -j /dev/hda3</i>
</pre>

<note>
Encontre mais sobre o uso de ext3 no Linux 2.4 em 
<uri>http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html</uri>.
</note>

<p>
Para criar sistemas de arquivos ReiserFS, use o comando <c>mkreiserfs</c>:
</p>

<pre caption="Criando um Sistema de Arquivos ReiserFS">
# <i>mkreiserfs /dev/hda3</i>
</pre>

<p>
Para criar um sistema de arquivos XFS, use o comando <c>mkfs.xfs</c>:
</p>

<pre caption="Criando um Sistema de Arquivos XFS">
# <i>mkfs.xfs /dev/hda3</i>
</pre>

<note>
Talvez você queira especificar algumas opções adicionais ao comando
<c>mkfs.xfs</c>: <c>-d agcount=3 -l size=32m</c>. O comando <c>-d agcount=3</c>
dimiuirá o número de grupos de alocação. O XFS insistirá em usar pelo menos 1
grupo de alocação para cada 4 GB da sua partição, então, por exemplo, se você
tiver uma partição de 20 GB, precisará de um agcount mínimo de 5. O comando
<c>-l size=32m</c> aumenta o tamanho do <e>journal</e> para 32 MB, melhorando o
desempenho.
</note>

<p>
Para criar sistemas de arquivos JFS, use o comando <c>mkfs.jfs</c>:
</p>

<pre caption="Criando um Sistema de Arquivos JFS">
# <i>mkfs.jfs /dev/hda3</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Montar as Partições</title>
<section>
<body>

<p>
Agora vamos ativar nosso recém-inicializado volume de troca, já que mais tarde
podemos precisar da memória virtual adicional que ele vai proporcionar:
</p>

<pre caption="Ativando a partição de Troca">
# <i>swapon /dev/hda2</i>
</pre>

<p>
A seguir, criaremos o ponto de montagem <path>/mnt/gentoo/boot</path>, e
montaremos nossos sistemas de arquivos nos pontos de montagem. Uma vez que
nossos sistemas de arquivos raiz e boot estejam montados, qualquer arquivo que
copiarmos ou criarmos dentro de <path>/mnt/gentoo</path> será colocado no nosso
novo sistema de arquivos. Note que se você estiver instalando o Gentoo Linux com
um sistema de arquivos separado para <path>/usr</path> ou <path>/var</path>,
eles serão montados em <path>/mnt/gentoo/usr</path> e
<path>/mnt/gentoo/var</path>, respectivamente.
</p>

<impo>
Se a sua partição <path>/boot</path> (a que guarda o kernel) for ReiserFS, tenha
certeza de montá-la com a opção <c>-o notail</c>, para o GRUB ser instalado
corretamente. Certifique-se de que <c>notail</c> esteja presente na sua nova
entrada em <path>/etc/fstab</path> também. Chegaremos lá daqui a pouquinho. Se
você for usar o LILO com ReiserFS, a opção <c>-o notail</c> não é necessária. É
sempre seguro especificar a opção <c>-o notail</c> com ReiserFS se vocÊ não sabe
direito o que fazer.
</impo>

<pre caption="Craindo Pontos de Montagem">
# <i>mount /dev/hda3 /mnt/gentoo</i>
# <i>mkdir /mnt/gentoo/boot</i>
# <i>mount /dev/hda1 /mnt/gentoo/boot</i>
</pre>

<impo>
Se você tiver problemas ao montar sua partição boot com ext2, tente usar <c>mount /dev/hXX /mnt/gentoo/boot -t ext2</c>
</impo>

</body>
</section>
</chapter>


<chapter>
<title>Arquivos de Estágios e chroot</title>
<section>
<title>Selecionando o arquivo de estágio que se deseja</title>
<body>

<p>
Agora, você precisa decidir qual você quer usar como base para a instalação, se
você ainda não decidiu. Os estágios no CD inicializável estão em
<path>/mnt/cdrom/stages/</path> e você pode digitar <c>ls 
/mnt/cdrom/stages/</c> para ver o que tem disponível no seu CD.
</p>

<p>
<b>Usuários de GRP</b> devem usar o arquivo <path>stage3-xx-yy.tar.bz2</path>.
</p>

<p>
Se você quiser fazer uma instalação usando um arquivo de estágio que <e>não</e>
esteja no seu CD (o que provavelmente será o caso se você estiver usando nosso
CD "básico"), ainda é possível instalar, mas vocÊ precisará baixar o estágio que
vocÊ quer, usando as instruções a seguir. Se você já tem o arquivo de estágio
que quer usar (a maioria dos usuários estará nesta situação), então prossiga
para a seção "Descompactando o arquivo de estário".
</p>

<pre caption="Baixando os Estágios Necessários">
# <i>cd /mnt/gentoo</i>
<comment>Use o lynx para pegar a URL do seu arquivo de estágio:</comment>
# <i>lynx http://gentoo.oregonstate.edu/releases/x86/1.4/</i>
<comment>Use as teclas <c>para cima</c> e <c>para baixo</c> (ou a tecla
<c>TAB</c>) para it para o diretório desejado
Marque o estágio apropriado que vocÊ quiser baixar
Pressione <c>d</c> para começar a baixar
Salve o arquivo e saia do navegador

<b>OU</b> use o wget a partir da linha de comando:</comment>
# <i>wget </i><comment>(insira a URL para o arquivo de estágio desejado)</comment>
</pre>

</body>
</section>
<section>
<title>Descompactando o arquivo de estágio</title>
<body>

<p>
Vamos agora descompactar em <path>/mnt/gentoo/</path> o arquivo de estágio que
você escolheu. Lembre-se, vocÊ precisa descompactar <b>um</b> arquivo de
estágio, seja um stage1, stage2 ou stage3. Então, se vocÊ quiser fazer uma
instalação de estágio3 do Gentoo, você só precisa descompactar o arquivo de
estágio3. Desempacote o arquivo assim:
</p>

<impo>
Certifique-se de usar a opção <c>p</c> com o <c>tar</c>. Esquecer isso pode
fazer alguns arquivos terem permissões incorretas.
</impo>

<pre caption="Descompactando os Estágios">
# <i>cd /mnt/gentoo</i>
<comment>Mude "stage3" para "stage2" ou "stage1" se vocÊ quiser começar de um
desses estágios.</comment>
<comment>Se você baixou seu arquivo de estágio, mude o caminho abaixo para
começar com "/mnt/gentoo/" em vez de "/mnt/cdrom/stages".</comment>
# <i>tar -xvjpf /mnt/cdrom/stages/stage3-*.tar.bz2</i>
</pre>

<p>
Se você baixou seu arquivo de estágio para <path>/mnt/gentoo</path>, pode
apagá-lo agora digitando <c>rm /mnt/gentoo/stage*.tar.bz2</c>.
</p>

</body>
</section>

<section>
<title>Passos para pacotes GRP</title>
<body>

<impo>
As seguintes instruções são somente para usuários de GRP.
</impo>

<p>
<b>Usuários de GRP</b>: Existe um <e>snapshot</e> no CD inicializável. VocÊ
precisará usar este <e>snapshot</e> para pular o passo <c>emerge sync</c> depois
neste documento, já que o <c>emerge sync</c> precisa de uma conexão de rede.
Descompacte este <e>snapshot</e> assim:
</p>

<pre caption="Usando um snapshot do Portage">
<comment>Substitua yyyymmdd pela data no nome do arquivo.</comment>
# <i>tar -xvjf /mnt/cdrom/snapshots/portage-yyyymmdd.tar.bz2 -C /mnt/gentoo/usr</i>
</pre>

<p>
Isto vai descompactar o <e>snapshot</e> da árvore Portage na sua instalação do
Gentoo. Agora você não vai mais precisar se conectar à Internet e usar <c>emerge
sync</c> para baixar uma árvore Portage. Agora, copie os distfiles e pacotes do
CD inicializável para o local:
</p>

<pre caption="Copiando os arquivos GRP">
# <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
# <i>cp -a /mnt/cdrom/packages/ /mnt/gentoo/usr/portage/packages/</i>
</pre>

<p>
Todos os arquivos relevantes agora já estão no devido lugar para usar a GRP.
VocÊ já deve estar com tudo copiado e descompactado para instalar o Gentoo Linux
-- mesmo sem uma conexão de rede.
</p>

</body>
</section>

<section>
<title>Selecionando mirrors (Opcional)</title>
<body>

<p>
<c>mirrorselect</c> é uma ferramenta para escolher automaticamente os emirror,
baseado em sua localização, ou manualmente selecionar um esmirrore uma lista.
Infelizmente, o <c>mirrorselect</c> não funciona muito bem com todos os
roteadores.
</p>

<pre caption="Usando o mirrorselect">
<comment>Para selecionar um mirror automaticamente:</comment>
# <i>mirrorselect -a -s4 -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
<comment>Para selecionar um mirror interativamente:</comment>
# <i>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<p>
Se, por alguma razão, o <c>mirrorselect</c> falhar, você ainda deve conseguir
continuar com este guia já que nenhuma mudança foi feita.
</p>

</body>
</section>
<section>
<title>Entrando no chroot</title>
<body>

<p>
A seguir, vamos dar um <c>chroot</c> para a nova instalação do Gentoo Linux para
"entrar" no novo sistema Gentoo Linux:
</p>

<note>
Você pode receber um aviso durante o <c>env-update</c> dizendo que
<path>/etc/make.profile/make.defaults</path> não está disponível: ignore-o.
Vamos executar um <c>emerge sync</c> mais tarde neste documento, o que deve
resolver o problema.
</note>

<pre caption="Preparando e entrando no ambiente chroot">
# <i>mount -t proc proc /mnt/gentoo/proc</i>
# <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>env-update</i>
Regenerating /etc/ld.so.cache...
# <i>source /etc/profile</i>
<comment>(O comando acima aponta seu ambiente para os novos caminhos e binários
atualizados)</comment>
</pre>

<p>
Depois de executar esses comandos, você estará "dentro" do seu novo ambiente
Gentoo Linux em <path>/mnt/gentoo</path>. Podemos fazer o resto do processo de
instalação dentro do chroot.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Pegando a Árvore Portage Atual usando sync</title>
<section>
<body>

<impo>
Se você estiver fazendo uma instalação GRP, pode ignorar a próxima seção sobre
<c>emerge sync</c>.
</impo>

<p>
Agora você precisa rodar <c>emerge sync</c>. Este comando diz ao Portage para
baixar da Internet a cópia mias recente da árvore Portage do Gentoo Linux. Se
você já descompactou a árvore Portage a partir do <e>CD 1</e>, pode pular este
passo. A árvore Portage contém todos os scripts (chamados ebuilds) usados para
compilar cada pacote no Gentoo Linux. Atualmente temos scripts de ebuild para
aproximadamente 4000 pacotes. Quando o <c>emerge sync</c> terminar, você terá
uma árvore Portage completa em <path>/usr/portage</path>:
</p>

<pre caption="Atualizando Usando sync">
# <i>emerge sync</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Especificando as otimizações do Gentoo (make.conf)</title>
<section>
<body>

<p>
Agora que já temos uma cópia funcionante da árvore Portage, é hora de
personalizar as configurações de otimização e compilação para usar no seu
sistema Gentoo Linux. O Portage vai usar estas configurações quando compilar
qualquer programa para você. Para fazer isto, edite o arquivo
<path>/etc/make.conf</path>. Neste arquivo, você deve especificar suas opções
USE, que especificam funcionalidades opcionais que você quer compilar nos seus
pacotes se estiverrm disponíveis; geralmente o padrão (uma variável <e>vazia</e>
ou não especificada) está OK. Mais informações sobre opções USE podem ser
encontradas <uri
link="http://www.gentoo.org/doc/en/use-howto.xml">aqui</uri>. Uma lista completa
das opções USE atuais pode ser encontrada <uri
link="http://www.gentoo.org/dyn/use-index.xml">aqui</uri>.  
</p>

<p>
Se você estiver começando do estágio1, você deve especificar apropriadamente as
configurações de CHOST, CFLAGS e CXXFLAGS para o tipo de sistema que você está
criando (exemplos comentados são fornecidos mais abaixo no texto). Se você
estiver usando um arquivo de estágio2 ou estágio3, estas configurações já
estarão especificadas para otimização e não precisam de nenhuma modificação.
</p>

<impo>
<b>Usuários avançados:</b> As configurações de CFLAGS e CXXFLAGS são usadas para
informar ao compilador C/C++ como otimizar o código que é gerado no seu sistema.
É comum usuários com processadores Athlon XP usarem a opção "-march=athlon-xp"
em suas configurações de CFLAGS e CXXFLAGS, para todos os pacotes compilados
serem otimizados para as características de sua CPU, por exemplo. O arquivo
<path>/etc/make.conf</path> contém um guia geral para as configurações
apropriadas de CFLAGS e CXXFLAGS.
</impo>

<!-- needs qa
<note>
<b>Advanced users:</b>If you are building from a stage1 and don't want
to manually configure CFLAGS and CXXFLAGS, you can use the <c>genflags</c>
utility, which will try to guess accurate flags for your CPU architecture.
Simply type <c>emerge -O genflags</c> and then execute
<c>info2flags</c>. <c>info2flags</c> will suggest CHOST, CFLAGS and
CXXFLAGS settings, which you can then add to
<path>/etc/make.conf</path>.
</note>
-->

<p>
Se for necessário, você também pode configurar suas informações de proxy aqui se
você estiver atrás de um firewall. Use o seguinte comando para editar o
<path>/etc/make.conf</path> com o <c>nano</c>, um editor visual simples:
</p>

<pre caption="Especificando as opções do make.conf">
# <i>nano -w /etc/make.conf</i>
</pre>

<note>
<b>Usuários avançados:</b> Pessoas que precisem personalizar substancialmente o
processo de compilação devem olhar o arquivo <path>/etc/make.globals</path>.
Este arquivo contém os padrões do gentoo e nunca deve ser alterado. Se os
padrões não forem suficientes, então novos valores devem ser colocados em
<path>/etc/make.conf</path>, já que entradas em <path>make.conf</path>
<e>prevalecem</e> sobre as entradas em <path>make.globals</path>. Se você
estiver interessado em personalizar as opções USE, dê uma olhada em
<path>/etc/make.profile/make.defaults</path>. Se você quiser desligar as opções
USE encontradas aqui, adicione um <c>USE="-foo"</c> apropriado em 
<path>/etc/make.conf</path>.

</note>

<warn>
Certifique-se de não adicionar '<c>static</c>' às suas variáveis USE antes de 
chegar no estágio1.
</warn>

</body>
</section>
</chapter>

<chapter>
<title>Começando do Estágio</title>
<section>
<body>

<note>
Se você não estiver começando de um arquivo dee estágio1, pule esta seção.
</note>

<p>
O arquivo de estágio1 é para personalização e otimização completas. Se você
escolheu este arquivo, provavelmente está procurando um sistema altamente
atualizado e totalmente otimizado. Divirta-se! Instalar do estágio1 leva um
monte de tempo, mas o resultado é um sistema que foi otimizado a partir do zero
para sua máquina e suas necessidades específicas.
</p>

<p>
Agora vamos iniciar o processo de "<e>bootstrap</e>". Este processo leva
aproximadamente duas horas num sistema AMD Athlon 1200MHz. Neste tempo, a
biblioteca C GNU, o conjunto de compiladores GNU e outros componentes-chave do
sistema serão compilados. Inicie o processo de <e> bootstrap</e> assim:
</p>

<pre caption="O processo de Bootstrap">
# <i>cd /usr/portage</i>
# <i>scripts/bootstrap.sh</i>
</pre>

<p>
O processo de <e>bootstrap</e> começará agora.
</p>

<note>
O <c>bootstrap.sh</c> agora suporta a opção <c>--fetchonly</c>. Usuários de
conexão discada apreciarão muito esta possibilidade. Isto vai baixar todos os
arquivos relacionados ao <e>bootstrap</e> de uma vez, para posterior
compilaç~ao. Digite <c>bootstrap.sh -h</c> para maiores informações.
</note>

<note>
O Portage por padrão usa <path>/var/tmp</path> durante a compilação de pacotes,
freqüentemente usando centenas de megabytes de espaço temporário. Se você
quisermudar o local onde o Portage guarda esses arquivos temporários,
especifique um novo PORTAGE_TMPDIR <e>antes</e> de iniciar o processo de
<e>bootstrap</e>, assim:
<pre caption="Mudando o local de armazenamento do Portage">
# <i>export PORTAGE_TMPDIR="/outro_diretório/tmp"</i>
</pre>
</note>

<p>
O <c>bootstrap.sh</c> compilará o <c>binutils</c>, <c>gcc</c>, <c>gettext</c>,
e <c>glibc</c>, recompilando o <c>gettext</c> depois da <c>glibc</c>.
Logicamente, este processo leva algum tempo. Uma vez terminado o processo, seu
sistema será equivalente a um sistema dee estágio2, o que significa que você
agora pode prosseguir para as instruções de estágio2.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Iniciando a partir do estágio2 e continuando o estágio1</title>
<section>
<body>

<note>
Esta seção é para aqueles que estão continuando uma instalação de estágio1 ou
iniciando no estágio2. Se este não é o seu caso (ou seja, se você estiver usando
um estágio3), pule esta seção.
</note>

<warn>
Se você iniciar do estágio2, não mude a variável CHOST no 
<path>/etc/make.conf</path>. Isto resultaria em grandes e estranhos erros de 
compilação.
</warn>
		
<p>
O arquivo de estágio2 já tem o <e>bootstrap</e> feito para você. Tudo que você
deve fazer é instalar o resto do sistema:
</p>

<note>
Se você estiver iniciando ded um estágio2 pré-compilado e quiser se assegurar de
que o seu conjunto de compiladores está totalmente atualizado, adicione a opção
<c>-u</c> aos comandos abaixo. Se você não souber o que isto significa, é seguro
pular esta sugestão.
</note>

<pre caption="Instalando o resto do sistema">
# <i>emerge -p system</i>
<comment>(lista os pacotes a ser instalados)</comment>
# <i>emerge system</i>
</pre>

<p>
Vai levar algum tempo até terminar a compilação do sistema básico inteiro. Sua
recompensa é que ele estará profundamente otimizaado para a sua máquina. A
desvantagem é que você tem que encontrar uma maneira de manter-se ocupado
durante este tempo. O autor sugere "Star Wars - Super Bombad Racing" para PS2.
</p>

<p>
A compilação já está feita. Siga em frente e pule para a seção "Ajustando seu
fuso horário".
</p>

</body>
</section>
</chapter>


<chapter>
<title>Iniciando do Estágio3</title>
<section>
<body>

<note>
Esta seção é para aqueles que estão <b>iniciando</b> com um estágio3, e não para
aqueles que começaram com o estágio1 ou estágio2, os quais devem <b>pular</b>
esta seção. Usuários da GRP devem pular esta seção e ir para a próxima.
</note>

<warn>
Lembre-se que, se você começar do estágio3, não mude a variável CHOST no 
<path>/etc/make.conf</path>. Isto resultaria em erros grosseiros de compilação.
</warn>

<p>
O arquivo de estágio3 fornece um sistema Gentoo básico totalmente funcional,
então nenhuma compilação é necessária.
</p>
	 
<note>
<b>Usuários avançados:</b> Porém, já que o arquivo de estágio3 é pré-compilado,
ele pode estar levemente desatualizado. Se isto for um problema para você, é
possível atualizar automaticamente seu estágio3 existente para conter as versões
mais atualizadas de todos os pacotes de sistema, digitando <c>export CONFIG_PROTECT="-* 
/etc/make.conf" emerge -u system</c> (isto requer uma conexão de rede). Note que
isto pode levar muito tempo se seu estágio3 for antigo; senão, este processo
geralmente será rápido e permitirá que você se beneficie das últimas
atualizações e correções do Gentoo. Em qualquer caso, sinta-se livre para pular
estes passos e seguir para a próxima seção se quiser.
</note>
		
</body>
</section>
</chapter>


<chapter>
<title>Ajustando seu fuso horário</title>
<section>
<body>

<p>
Agora você precisa ajustar seu fuso horário.
</p>

<p>
Procure seu fuso horário (ou GMT se você estiver usando o horário de Greenwich)
em <path>/usr/share/zoneinfo</path>. Depois, crie um <e>link</e> simbólico para 
<path>/etc/localtime</path> digitando:
</p>

<pre caption="Criando um link simbólico para o fuso horário">
# <i>ln -sf /usr/share/zoneinfo/caminho/até/fuso_horário /etc/localtime</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Modificando o /etc/fstab para sua máquina</title>
<section>
<body>

<impo>
Para editar arquivos, lembre-se de usar <c>nano -w "nome_do_arquivo"</c>.
</impo>

<p>
O seu sistema Gentoo Linux já está quase pronto para usar. Agora só precisamos
configurar alguns arquivos de sistema importantes e instalar o carregador do
sistema ("boot loader").
O primeiro arquivo que vamos configurar é o <path>/etc/fstab</path>. Lembre-se
de que você deve usar a opção <c>notail</c> para sua partição boot se escolheu
criar um sistema de arquivos ReiserFS nela. Lembre-se de especificar os tipos
de sistema de arquivos <c>ext2</c>, <c>ext3</c> ou <c>reiserfs</c> conforme o
seu caso.
</p>

<p>
Use algo como o <path>/etc/fstab</path> listado abaixo, mas obviamente
certifique-se de substituir "BOOT", "RAIZ" e "SWAP" pelos dispositivos de blocos
que você estiver usando (como <c>hda1</c>, etc.):
</p>

<pre caption="Editando o fstab">
<comment># /etc/fstab: static file system information.
#
# noatime turns off atimes for increased performance (atimes normally aren't
# needed; notail increases performance of ReiserFS (at the expense of storage
# efficiency).  It is safe to drop the noatime options if you want and to 
# switch between notail and tail freely.

# &lt;fs&gt;           &lt;mount point&gt;   &lt;type&gt;   &lt;opts&gt;          &lt;dump/pass&gt;

# NOTE: If your BOOT partition is ReiserFS, add the notail option to opts.
</comment>
/dev/BOOT           /boot       ext2	 noauto,noatime	 1 2
/dev/RAIZ           /           ext3	 noatime         0 1
/dev/SWAP           none        swap	 sw              0 0
/dev/cdroms/cdrom0  /mnt/cdrom  iso9660	 noauto,ro       0 0
proc                /proc       proc	 defaults        0 0
</pre>

<warn>
Favor notar que <path>/boot</path> <e>não</e> é montado na inicialização. Isto é
para proteger os dados em <path>/boot</path> de corrupção. Se você precisar
acessar <path>/boot</path>, favor montá-lo!
</warn>

</body>
</section>
</chapter>


<chapter>
<title>Instalando o kernel e o "system logger"</title>
<section>
<title>Seleções de kernel</title>
<body>
	
<p>
Existem duas opções para instalar um kernel. Você pode configurar seu próprio
kernel ou usar o utilitário <c>genkernel</c> para configurá-lo e compilá-lo
automaticamente.
</p>
	
<p>
Independentemente de estar configurando seu kernel manualmente ou usando o
<c>genkernel</c>, você precisará baixar os fontes do kernel Linux que você
quiser usar. O Gentoo fornece muitos ebuilds de kernel; uma lista pode ser
encontrada <uri link="/doc/en/gentoo-kernel.xml">aqui</uri>. Se você estiver em
dúvida sobrre qual kernel escolher, recomendamos o <c>gentoo-sources</c>. Se
você quiser suporte a XFS, escolha <c>xfs-sources</c> ou <c>gs-sources</c>. O CD
inicializável do Gentoo usa <c>gs-sources</c> e <c>xfs-sources</c>. Existe
também um kernel <c>gaming-sources</c>, otimizado para jogos e responsividade, e
que funciona maravilhosamente para este propósito quando a opção "Preemptible
kernel" é ativada.
</p>

<p>
Escolha um kernel e depois instale como mostrado:
</p>

<pre caption="Instalando os fontes do kernel">
# <i>emerge -k sys-kernel/gentoo-sources</i>
</pre>

<p>
O link simbólico <path>/usr/src/linux</path> apontará para sua árvore de fontes
do kernel recém-instalada. O Portage usa o link simbólico 
<path>/usr/src/linux</path> para um propósito especial. Todos os ebuilds que
você instalar que contenham módulos de kernel serão configurados para funcionar
com os fontes do kernel apontado em <path>/usr/src/linux</path>. 
<path>/usr/src/linux</path> é criado quando você instala seu primeiro pacote de
fontes de kernel, mas depois que ele existe, o Portage não modifica este link
simbólico.
</p>

</body>
</section>
<section>
<title>Usando o genkernel para compilar seu kernel</title>
<body>

<p>
Agora que a sua árvore de fontes do kernel já está instalada, é hora de compilar
seu kernel. Há duas formas de se fazeristo. A primeira e usando nosso novo
script <c>genkernel</c> para automaticamente compilar um kernel para você. O
<c>genkernel</c> funciona configurando um kernel quase idêntico ao usado no CD
inicializável. Isto significa que quando você usa o <c>genkernel</c> para
compilar seu kernel, seu sistema geralmente detectará todo o seu hardware na
inicialização, exatamente como seu CD inicializável faz. Por não precisar de
qualquer configuração manual do kernel, o genkernel e uma boa solução para os
usuários que não se sintam confortáveis compilando seus próprios kernels.
</p>

<p>
Agora, vams ver como usar o genkernel. Primeiro, instale o ebuild do genkernel:
</p>

<pre caption="Instalando o genkernel">
# <i>emerge -k genkernel</i>
</pre>
		
<p>
Agora, compile os fontes do seu kernel executando <c>genkernel</c>:
</p>

<note>
<b>Usuários avançados:</b> você pode digitar <c>genkernel --config</c>, o que
vai fazer o genkernel permitir que você ajuste a configuração padrão do kernel
antes de iniciar a compilação.
</note>

<pre caption="Rodando o genkernel">
<comment>Se você estiver usando o genkernel 1.2 (incluído no conjunto
1.4-20030803 x86/i686 GRP), use o seguinte:</comment>
# <i>genkernel gentoo-sources</i>
<comment>Se você estiver usando o genkernel 1.4 ou mais novo, não precisa
especificar um kernel:</comment>
# <i>genkernel</i>
Gentoo Linux genkernel, version 1.4
Copyright 2003 Gentoo Technologies, Inc., Bob Johnson, Daniel Robbins
Distributed under the GNU General Public License version 2

Settings:
compile optimization: 1 processor(s)
source tree: /usr/src/linux-2.4.20-gaming-r3
config: gentoo (customized)
config loc: /etc/kernels/config-2.4.20-gaming-r3
initrd config: (default) /etc/kernels/settings

* Running "make oldconfig"...                                                                     [ ok ]
* Logging to /var/log/genkernel.log...                                                            [ ok ]
* Starting 2.4.20-gaming-r3 build...                                                              [ ok ]
* Running "make dep"...                                                                           [ ok ]
* Running "make bzImage"...                                                                       [ ok ]
* Running "make modules"...                                                                       [ ok ]
* Running "make modules_install"...                                                               [ ok ]
* Moving bzImage to /boot/kernel-2.4.20-gaming-r3...                                              [ ok ]
* Building busybox...                                                                             [ ok ]
* Creating initrd...                                                                              [ ok ]

* Build completed successfully!

* Please specify /boot/kernel-2.4.20-gaming-r3 and /boot/initrd-2.4.20-gaming-r3
* when customizing your boot loader configuration files.
</pre>

<p>
Quando o <c>genkernel</c> terminar, um kernel, um conjunto completo de módulos e
um <e>disco raiz inicial</e> (initrd) serão criados. Vamos usar o kernel e o
initrd quando estivermos configurando o carregador do sistema daqui a poco. O
initrd será iniciado imediatamente após a inicializaçção do sistema, para
executar a autodetecção do hardware (exatamente como no CD inicializável) antes
do seu sistema "real" iniciar.
</p>

<p>
Agora, vamos dar mais um passo para deixar nosso sistema mais parecido com o CD
inicializável -- vamos instalar o <c>hotplug</c>. Enquanto o initrd autodedtecta
o hardware nececssário para inicializar o seu sistema, o <c>hotplug</c>
autodetecta todo o resto. Para instalar e habilitar o <c>hotplug</c>, digite o
seguinte:
</p>

<pre caption="Instalando e ativando o hotplug">
# <i>emerge -k hotplug</i>
# <i>rc-update add hotplug default</i>
</pre>

<p>
Finalmente, agora você deve instalar os ebuilds de todos os ítens de hardware
adicionais do seu sistema. Aqui está uma lista de ebuilds relacionados ao kernel
que você pode instalar:
</p>

<table>
<tr>
 <th>Ebuild</th>
 <th>Propósito</th>
 <th>Comando</th>
</tr>
<tr>
 <ti>nvidia-kernel</ti>
 <ti>Aceleração gráfica da NVIDIA para o XFree86</ti>
 <ti><c>emerge -k nvidia-kernel</c></ti>
</tr>
<tr>
 <ti>nforce-net</ti>
 <ti>Placa de rede onboard de placas-mãe NVIDIA NForce(2)</ti>
 <ti><c>emerge nforce-net</c></ti>
</tr>
<tr>
 <ti>nforce-audio</ti>
 <ti>Áudio onboard de placas-mãe NVIDIA NForce(2)</ti>
 <ti><c>emerge nforce-audio</c></ti>
</tr>
<tr>
 <ti>e100</ti>
 <ti>Adaptadores Fast Ethernet Intel e100</ti>
 <ti><c>emerge e100</c></ti>
</tr>
<tr>
 <ti>e1000</ti>
 <ti>Adaptadores Gigabit Ethernet Intel e1000</ti>
 <ti><c>emerge e1000</c></ti>
</tr>
<tr>
 <ti>emu10k1</ti>
 <ti>Suporte a placas Creative Sound Blaster Live!/Audigy</ti>
 <ti><c>emerge emu10k1</c></ti>
</tr>
<tr>
 <ti>ati-drivers</ti>
 <ti>Aceleração gráfica de placas ATI Radeon 8500+/FireGL para XFree86</ti>
 <ti><c>emerge ati-drivers</c></ti>
</tr>
<tr>
 <ti>xfree-drm</ti>
 <ti>Aceleração gráfica de placas ATI Radeon até 9200, Rage128, Matrox, Voodoo e
outras placas para XFree86</ti>
 <ti><c>VIDEO_CARDS="sua_placa" emerge xfree-drm</c></ti>
</tr>
</table>

<p>
Os pacotes <c>nvidia-kernel</c>, <c>ati-drivers</c> e <c>xfree-drm</c>
necessitam configurações adicionais para serem ativados. Todos os outros ebuilds
listados acima devem ser auto-detectados durante a inicialização pelo pacote
<c>hotplug</c>.
</p>
		
<p>
Agora que você já rodou e configurou seu sistema para usar o <c>genkernel</c>,
você pode pular a seção abaixo "configuração manual do kernel".
</p>

</body>
</section>
<section>
<title>Configuração Manual do kernel</title>
<body>

<p>
Se você escolheu não usa o genkernel para compilar um kernel para você, esta
seção vai guiá-lo através do processo de configuração e compilação de um kernel
manualmente. Por favor note que <path>/usr/src/linux</path> é um link simbólico
para os seus fontes de kernel atualmente instalados, e é assim configurado
automaticamente pelo Portage no momento da instalação. Se você tiver múltiplos
pacotes de fontes do kernel, é necessário especificar o link simbólico <path>/usr/src/linux</path> para os fontes corretos antes de prosseguir.
</p>

<warn>
Se você estiver configurando seu próprio kernel, tenha cuidade com a opção <i>grsecurity</i>.
Muita agressividade com suas configurações de segurança pode fazer alguns
programas (como o X) não rodarem direito. Se estiver em dúvida, deixe a opção como está.
</warn>

<note>
Se você quiser usar a mesma configuração do kernel do CD inicializável, ou se
quiser usá-lo como base para sua configuração, execute <c>cd /usr/src/linux &amp;&amp; cat /proc/config > .config &amp;&amp; make oldconfig</c>.
Se você não estiver usando <c>xfs-sources</c>, algumas perguntas serão feitas
sobre diferenças entre o kernel que você escolheu e o <c>xfs-sources</c>.
</note>

<pre caption="Configurando o kernel Linux">
# <i>cd /usr/src/linux</i>
# <i>make menuconfig</i>
</pre>

<warn>
Para seu kernel funcionar propriamente, existem diversas opções que você
precisará ter certeza de ter colocado dentro do kernel -- isto é, elas devem
<e>estar habilitadas e não compiladas como módulos</e>. Certifique-se de
habilitar &quot;ReiserFS&quot; se você tiver alguma partição ReiserFS; o mesmo
vale para &quot;Ext3&quot;. Se você estiver usando XFS, ative a opção &quot;SGI 
XFS filesystem support&quot;. Sempre é uma boa idéia deixar ext2 habilitado
mesmo que você não o use.
</warn>

<p>
Aqui estão algumas opções comuns que você precisará:
</p>

<pre caption="opções de make menuconfig">
Code maturity level options ---&gt;
[*] Prompt for development and/or incomplete code/drivers&quot;
<comment>(Você precisa disso para habilitar algumas das opções abaixo)</comment>
...

File systems ---&gt;
&lt;*&gt; Reiserfs support
<comment>(Só é necessário se você estiver usando reiserfs)</comment>
... 
&lt;*&gt; Ext3 journalling file system support
<comment>(Só é necessário se você usar ext3)</comment>
...
[*] Virtual memory file system support (former shm fs)
<comment>(Necessário para o Gentoo Linux)</comment>
...
&lt;*&gt; JFS filesystem support
<comment>(Só é necessário se você usar JFS)</comment>
...
[*] /proc file system support
<comment>(Necessário para o Gentoo Linux)</comment>
[*] /dev file system support (EXPERIMENTAL)
[*]   Automatically mount at boot          
<comment>(Necessário para o Gentoo Linux)</comment>
[ ] /dev/pts file system for Unix98 PTYs
<comment>(Desmarque isto, porque NÃO é necessário)</comment>
...
&lt;*&gt; Second extended fs support
<comment>(Só é necessário se você usar ext2)</comment>
...
&lt;*&gt; XFS filesystem support
<comment>(Só é necessário se você usar XFS)</comment>
</pre>

<p>
Se você usar PPPoE para conectar à internet, vai precisar das seguintes opções
no kernel (embutidas ou como módulos, de acordo com sua preferência) : &quot;PPP 
(point-to-point protocol) support&quot;, &quot;PPP support for async serial 
ports&quot;, &quot;PPP support for sync tty ports&quot;. As duas opções de
compressão não machucam mas definitivamente são desnecessárias, assim como a
opção &quot;PPP over Ethernet&quot;, que só pode ser usada pelo <c>rp-pppoe</c>
quando este for configurado para fazer PPPoE pelo kernel (<e>kernel mode
PPPoE</e>).
</p>

<p>
As antigas versões do kernel precisavam de emulação SCSI para gravadores IDE.
Porém, isto não é mais necessário nas versões mais recentes dos kernels
disponíveis para o Gentoo Linux.
Ainda assim, se você quiser usar uma versão mais antiga do kernel, ou se desejar
emular SCSI para gravação de CD's (ainda possível), habilite as opções &quot;ATA/IDE/MFM/RLL 
support&quot; ---&gt; &quot;IDE, ATA and ATAPI Block devices&quot; ---&gt; &quot;SCSI 
emulation support&quot; (Normalmente eu deixo este como módulo), e depois em 
&quot;SCSI support&quot; ative &quot;SCSI support&quot;, &quot;SCSI CD-ROM support&quot; 
e &quot;SCSI generic support&quot; (novamente, costumo deixá-los como módulos).
Se você também preferir usar módulos, dê mais tarde um <c>echo -e 
&quot;ide-scsi\nsg\nsr_mod&quot;&gt;&gt; /etc/modules.autoload</c> para carregar os módulos na inicialização do
sistema.
</p>

<p>
Se você precisar, não se esqueça de incluir no kernel o suporte à sua placa de
rede.
</p>

<note>
Para aqueles que preferirem, é possível instalar o Gentoo Linux com um kernel
2.2. Porém, isto tem um preço: você perde muitas das novas características
interessantes da série 2.4 do kernel (como os sistemas de arquivos XFS e tmpfs,
o iptables, e outras), apesar de os fontes do kernel 2.2 poderem receber
<e>patches</e> para suporte a ReiserFS e devfs.
Os scripts de inicialização do Gentoo Linux precisam ou do tmpfs ou do ramdisk
suportados no kernel, então usuários do kernel 2.2 precisam ter certeza de que o
suporte a ramdisk está compilado dentro (isto é, não como um módulo). É 
<comment>vital</comment> que uma opção <e>gentoo=notmpfs</e> seja adicionada à
linha do kernel no <path>/boot/grub/grub.conf</path> ou à linha "append" no 
<path>/etc/lilo.conf</path> para o kernel 2.2 para que um ramdisk seja montado
para os scripts de inicialização em vez do tmpfs. Se você escolher não usar
devfs, então <e>gentoo=notmpfs,nodevfs</e> deve ser usado nesta linha.
</note>

<pre caption = "Compilando e Instalando o kernel">
# <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
# <i>cp /usr/src/linux/arch/i386/boot/bzImage /boot</i>
</pre>

</body>
</section>
<section>
<title>Instalando um system logger</title>
<body>

<p>
Seu novo kernel (e módulos) personalizado já está instalado. Agora você
precisará escolher um system logger para instalar. Nós oferecemos o sysklogd,
que é o conjunto tradicional de daemons de log do sistema. Oferecemos também o
msyslog e o syslog-ng, assim como o metalog. Usuários avançados parecem tender a
se afastar do sysklogd (devido ao desempenho não muito bom) e em direção às
novas alternativas. Em caso de dúvida, você pode testar o metalog, já que ele
parece ser muito popular. Para instalar seu logger escolhido, digite <e>um</e>
dos próximos quatro conjuntos de comandos:
</p>

<pre caption="Instalado o System Logger escolhido">
# <i>emerge -k app-admin/sysklogd</i>
# <i>rc-update add sysklogd default</i>
<comment>or</comment>
# <i>emerge -k app-admin/syslog-ng</i>
# <i>rc-update add syslog-ng default</i>
<comment>or</comment>
# <i>emerge -k app-admin/metalog</i>
# <i>rc-update add metalog default</i>
<comment>or</comment>
# <i>emerge -k app-admin/msyslog</i>
# <i>rc-update add msyslog default</i>
</pre>

<impo>
O Metalog manda a saída para o disxo em blocos, então mensagens não são
imediatamente gravadas nos logs do sistema. Se você estiver tentando depurar
um daemons, este comportamento (que melhora o desempenho) não ajuda muito.
Quando seu sistema Gentoo Linux estiver rodando direito, você pode mandarpara o
metalog um sinal USR1 para temporariamente desligar este buffering de mensagens
(o que significa que <c>tail -f <path>/var/log/everything/current</path></c> vai
passar a funcionar em tempo real, como esperado) e um sinal USR2 para religar o
buffering. Se você quiser desabilitar o buffering permanentemente, pode mudar
METALOG_OPTS="-B" para METALOG_OPTS="-B -s" em <path>/etc/conf.d/metalog</path>. 
<pre caption="(Des)Ativando o buffering no metalog">
<codenote>Para desativar o buffering:</codenote>
# <i>killall -USR1 metalog</i>
<codenote>Para ativar o buffering:</codenote>
# <i>killall -USR2 metalog</i>
</pre>
</impo>

<p>
Agora você pode (se quiser) escolher um pacote cron para usar. Atualmente,
oferecemos o dcron, fcron e vcron. Se você não sabe qual escolher, pode
selecionar o vcron.
</p>

<pre caption="Escolhendo um Daemon CRON">
# <i>emerge -k sys-apps/dcron</i>
# <i>rc-update add dcron default</i>
# <i>crontab /etc/crontab</i>
<comment>or</comment>
# <i>emerge -k sys-apps/fcron</i>
# <i>rc-update add fcron default</i>
# <i>crontab /etc/crontab</i>
<comment>or</comment>
# <i>emerge -k sys-apps/vcron</i>
# <i>rc-update add vcron default</i>
<comment>Não precisa executar <i>crontab /etc/crontab</i> se usar o vcron.</comment>
</pre>

<p>
Para mais informações sobre a inicialização de programas e daemons na
inicialização do sistema, veja o <uri link="/doc/pt_BR/rc-scripts.xml">rc-script guide</uri>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Instalando pacotes necessários diversos</title>
<section>
<body>

<p>
Se você precisar do rp-pppoe para se conectar à rede, saiba que até agora ele
não foi instalado. É uma boa hora para fazê-lo:
</p>

<pre caption="Instalando o rp-pppoe">
# <i>USE="-X" emerge rp-pppoe</i>
<comment>Usuários da GRP devem digitar o seguinte:</comment>
# <i>USE="-X bindist" emerge -K rp-pppoe</i>
</pre>

<note>
O <i>USE="-X"</i> impede o pppoe de instalar sua interface gráfica opcional, o
que é uma boa coisa, porque o X e suas dependências também seriam instalados.
Você sempre pode recompilar o <i>rp-pppoe</i> com suporte ao X mais tarde.
</note>

<note>
Por favor note que o rp-pppoe está compilado mas não configurado. Você precisará
configurá-lo novamente usando o <c>adsl-setup</c> quando entrar no Gentoo pela
primeira vez.
</note>

<p>
Talvez você precise instalar alguns pacotes adicionais da árvore Portage se você
usar características opcionais como XFS, ReiserFS ou LVM. Se você estiver usando
XFS, instale o pacote <c>xfsprogs</c>: 
</p>

<pre caption="Instalando as ferramentas de sistemas de arquivos">
# <i>emerge -k sys-apps/xfsprogs</i>
<comment>Se você quiser usar ReiserFS, instale as ferramentas para ReiserFS: </comment>
# <i>emerge -k sys-apps/reiserfsprogs</i>
<comment>Se você quiser usar JFS, instale as ferramentas para JFS: </comment>
# <i>emerge -k jfsutils</i>
<comment>Se você quiser usar LVM, instale o pacote <c>lvm-user</c>: </comment>
# <i>emerge -k sys-apps/lvm-user</i>
</pre>

<p>
Se você usar um laptop e quiser usar seus slots PCMCIA em sua primeira
inicialização real, certifique-se de instalar o pacote <i>pcmcia-cs</i>.
</p>

<pre caption="Instalando o PCMCIA-cs">
# <i>emerge -k sys-apps/pcmcia-cs</i>
</pre>

<!-- fix the bug or fix the docs, don't send the user in circles
(drobbins)
		<warn>You will have to re-emerge <i>pcmcia-cs</i> after installation to get PCMCIA
			to work.
			</warn>
	-->

</body>
</section>
</chapter>

<chapter>
<title>Gerenciamento de Usuários</title>
<section>
<title>Especificando uma senha de root</title>
<body>

<p>
Antes que você se esqueça, especifique a senha de root digitando:
</p>

<pre caption="Especificando a senha de root">
# <i>passwd</i>
</pre>

</body>
</section>
<section>
<title>Adicionando um usuário para o uso diário</title>
<body>

<p>
Trabalhar como root num sistema Unix/Linux é <e>perigoso</e> e deve ser evitado
ao máximo. Portanto, é <e>altamente</e> recomendável que você adicione um
usuário comum para o uso diário:
</p>

<pre caption = "Adicionando um usuário">
# <i>useradd seu_usuário -m -G users,wheel,audio -s /bin/bash</i>
# <i>passwd seu_usuário</i>
</pre>

<p>
Substitua <c>seu_usuário</c> pelo seu nome de usuário.
</p>

<p>
Sempre que você precisar realizar alguma tarefa que somente o root possa fazer,
use <c>su -</c> para mudar seu privilégios para os privilégios de root, ou dê
uma olhada no pacote <c>sudo</c>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Especificando o nome da sua máquina</title>
<section>
<body>

<p>
Edite o <path>/etc/hostname</path> para este conter o nome da sua máquina numa
única linha, ou seja, <c>minhamáquina</c>. 
</p>

<pre caption="Configurando o nome de máquina">
# <i>echo minhamáquina &gt; /etc/hostname</i>
</pre>

<p>
Depois edite o <path>/etc/dnsdomainname</path> para este conter o nome do seu
domínio, ou seja, <c>meudomínio.com</c>.
</p>

<pre caption="Configurando o nome de domínio">
# <i>echo meudomínio.com &gt; /etc/dnsdomainname</i>
</pre>

<p>
Se você tiver um domínio NIS, especifique-o em <path>/etc/nisdomainname</path>.
</p>

<pre caption="Configurando o nome de domínio NIS">
# <i>echo nis.meudomínio.com &gt; /etc/nisdomainname</i>
</pre>

</body>
</section>
</chapter>


<chapter>
<title>Modificando o /etc/hosts</title>
<section>
<body>

<p>
Este arquivo contém uma lista de endereços IP e seus nomes de máquina
associados. Ele é usado pelo sistema para resolver os endereços IP de qualquer
nome de máquina que não esteja em seus servidores de nome. Aqui está um exemplo
deste arquivo:
</p>

<pre caption="Exemplo de Hosts">
127.0.0.1      localhost
<comment># a próxima linha contém seu IP para sua rede local e seu nome de máquina associado</comment>
192.168.1.1    minhamáquina.meudomínio.com	minhamáquina
</pre>

<note>
Se você estiver numa rede DHCP, pode ser útil adicionar o nome real da sua
máquina apóes <i>localhost</i>. Isto vai ajudar o GNOME e muitos outros
programas na resolução de nomes.
</note>

</body>
</section>
</chapter>


<chapter>
<title>Configuração final de rede</title>
<section>
<body>

<p>
Adicione os nomes dee quaisquer módulos que sejam necessários para o
funcionamento correto do seu sistema no arquivo <path>/etc/modules.autoload</path> 
(você também pode adicionar quaisquer opções que precisar à mesma linha). Quando
o Gentoo Linux iniciar, esses módulos serão automaticamente carregados. Seu
módulo da placa de rede é especialmente importante, se você por acaso o compilou
como módulo:
</p>

<pre caption="/etc/modules.autoload">
<comment>Isto presume que você tenha uma placa de rede 3com. 
Procure sua placa em <path>/lib/modules/`uname -r`/kernel/drivers/net</path>. </comment>
3c59x
</pre>

<p>
Edite o script <path>/etc/conf.d/net</path> para colocar sua rede para funcionar
em sua primeira inicialização:
</p>

<pre caption="Configuração da rede na inicialização">
# <i>nano -w /etc/conf.d/net</i>
# <i>rc-update add net.eth0 default</i>
</pre>

<p>
Se você tem mais de uma placa de rede ou interface tokenring, você precisará
criar um script adicional <path>net.eth<comment>x</comment></path> ou 
<path>net.tr<comment>x</comment></path> respectivamente para cada um 
(<comment>x</comment> = 1, 2, ...):
</p>

<pre caption="Múltiplas Interfaces de Rede">
# <i>cd /etc/init.d</i>
# <i>cp net.eth0 net.eth<comment>x</comment></i>
# <i>rc-update add net.eth<comment>x</comment> default</i>
</pre>

<p>
Se você tiver uma placa PCMCIA instalada, dê uma rápida olhada em <path>/etc/init.d/pcmcia</path> para verificar se tudo está correto para a sua configuração, e depois adicione esta linha ao início do <path>/etc/init.d/net.ethx</path>:
</p>

<pre caption="depend para PCMCIA em /etc/init.d/net.ethx">
depend() {
	need pcmcia
}
</pre>

<p>
Isto certifica que os drivers PCMCIA sejam automaticamente carregados sempre que
sua rede for carregada.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Últimos passos: Configure as partes básicas (inclusive o mapa de teclado)</title>
<section>
<body>

<pre caption="Configurações Básicas">
# <i>nano -w /etc/rc.conf</i>
</pre>

<p>
Siga as instruções no arquivo para configurar as partes básicas. Todos os
usuários deverão se certificar de que o CLOCK está configurado de acordo com a
sua vontade. Usuários de teclados internacionais deverão especificar a variável
KEYMAP (navegue por <path>/usr/share/keymaps</path> para ver as várias
possibilidades).
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configure um Gerenciador de Inicialização</title>
<section>
<title>Notas</title>
<body>

<p>
No espírito do Gentoo, os usuários agora têm mais de um gerenciador de
inicialização para escolher. Usando nosso sistema de pacotes virtuais, os
usuários agora têm a possibilidade de escolher o GRUB ou o LILO como gerenciador
de inicialização. 
</p>

<p>
Por favor tenha em mente que ter ambos os gerenciadores instalados não é
necessário. Na verdade, pode até ser um problema, então por favor escolha um só.
</p>

<p>
Além disso, você precisará configurar seu gerenciador de inicialização
diferentemente dependendo se você está usando o <c>genkernel</c> (com um kernel
e um initrd) ou um kernel compilado manualmente por você. Por favor lembre-se
das importantes diferenças.
</p>

<impo>
Se você está instalando o Gentoo Linux num sistema com um chipset NVIDIA nForce
ou nForce2 com uma placa de vídeo GeForce onboard, você deve usar o LILO e
evitar o GRUB. Com o vídeo onboard ativado, a área de memória baixa da sua RAM
pode ser usada como memória de vídeo. Como o GRUB também usa a memória baixa na
inicialização, ele pode acabar ficando sem memória. Então, se você tiver uma
nForce ou potencialmente outra placa com vídeo onboard, use o LILO. Mesmo que
você esteja usando nela uma placa de vídeo offboard, é melhor você manter a
possibilidade de tirar a placa de vídeo e usar o vídeo onboard rapidamente,
certo? :)
</impo>

</body>
</section>
<section>
<title>Configurando o GRUB</title>
<body>

<p>
A parte mais crítica do entendimento do GRUB é ficar confortável com a forma
como ele se refere aos discos rígidos e partições. A sua partição Linux
<path>/dev/hda1</path> é chamada de <path>(hd0,0)</path> no GRUB. Note que os
parênteses em volta do hd0,0 são necessários. Os discos rígidos começam a ser
contados do zero em vez do "a", e as partições começam do zero em vez do 1. Note
também que, com os discos rígidos, somente os discos rígidos em si são contados;
outros dispositivos IDE, como leitores e gravadores de CD. O mesmo vale para
dispositivos SCSI. (Normalmente recebem números maiores que os discos IDE a
menos que a BIOS esteja configurada para iniciar o sistema a partir dos discos
SCSI.) Supondo que você tenha um disco rígido em <path>/dev/hda</path>, um
leitor de CD em <path>/dev/hdb</path>, um gravador de CD em
<path>/dev/hdc</path>, um segundo disco rígido em <path>/dev/hdd</path> e nenhum
dispositivo SCSI, o <path>/dev/hdd7</path> será traduzido para
<path>(hd1,6)</path>. Pode parecer complexo, e realmente é complexo, mas como
vamos ver, o GRUB oferece um mecanismo de auto-completar com TAB que é muito
útil para quem tem um monte de discos rígidos e partições e está um pouco
perdido no esquema de numeração do GRUB. Tendo compreendido este esquema, é hora
de instalar o GRUB.
</p>

<p>
O jeito mais fácil de instalar o GRUB é simplesmente digitar <c>grub</c> em seu
prompt do shell <e>chrooted</e>:
</p>

<pre caption="Instalando o GRUB">
# <i>emerge -k grub</i>
# <i>grub</i>
</pre>

<p>
Você verá um propt <e>grub&gt;</e>. Agora, você precisará digitar os comandos
corretos para instalar o registro de inicialização do GRUB em seu disco rígido.
Na minha configuração simples, quero instalar o registro de inicialização do
GRUB na MBR (Registro Mestre de Inicialização), para que a primeira coisa que eu
veja ao ligar meu computador seja o prompt do GRUB. No meu caso, os comandos que
eu vou digitar são:
</p>

<pre caption="GRUB na MBR">
grub&gt; <i>root (hd0,0)</i> <comment>(Sua partição de inicialização)</comment>
grub&gt; <i>setup (hd0)</i> <comment>(Onde o registro de inicialização do GRUB
será instalado; aqui, é na MBR)</comment>
</pre>
	
<pre caption="GRUB não na MBR">
<comment>Alternativamente, se você quiser instalar o gerenciador de
inicialização em outro lugar que não a MBR:</comment>
grub&gt; <i>root (hd0,0)</i> <comment>(Sua partição de inicialização)</comment>
grub&gt; <i>setup (hd0,4)</i> <comment>(Onde o registro de inicialização será
instalado; aqui, é em /dev/hga5)</comment>
grub&gt; <i>quit</i>
</pre>

<p>
Aqui está como os dois comadnos funcionam. O primeiro comando <c>root ( )</c>
diz ao GRUB a localização da sua partição de inicialização (no nosso exemplo,
<path>/dev/hda1</path> ou <path>(hd0,0)</path> nos termos do GRUB. Depois, o
segundo comando <c>setup ( )</c> diz ao GRUB onde instalar o registro de
inicialização - ele será configurado para procurar seus arquivos especiais no
local <c>root     ( )</c> que você especificou. No meu caso, eu quero colocar o
registro de inicialização na MBR do disco rígido, então eu simplesmente
especifico <path>/dev/hda</path> (também conhecido como <path>(hd0)</path>). Se
eu estivesse usando outro gerenciador de inicialização e quisesse colocarr o
GRUB como um gerenciador secundário, eu poderia instalar o GRUB no registro de
inicialização de alguma partição (em vez do registro MESTRE de inicialização, a
MBR). Neste caso, eu especificaria uma partição particular em vez do disco
inteiro. Quando o registro de inicialização do GRUB tiver sido instalado com
sucesso, você pode digitar <c>quit</c> para sair do GRUB. 
</p>

<note>
O mecanismo de auto-completar do GRUB pode ser usado de dentro dele. Supondo que
você tenha escrito <c> root (</c> e pressionado a tecla TAB, você veria uma
lista dos dispositivos disponíveis (não somente os discos rígidos). Pressionando
TAB depois de digitar <c> root (hd</c>, você verá os discos rígidos disponíveis,
e um TAB após digitar <c> root (hd0,</c> faria aparecer uma lista das partições
no primeiro disco rígido. Conferir a sintaxe da localização do GRUB com o
auto-completar por TAB realmente deve ajudar a tomar a decisão correta.
</note>
			
<p>
O Gentoo Linux agora já está instalado, mas nós precisamos criar o arquivo
<path>/boot/grub/grub.conf</path> para termos um bonito menu do GRUB quando o
computador for ligado novamente. Aqui está como fazer isto.
</p>

<impo>
Para assegurar a compatibilidade com versões antigas do GRUB, certifique-se de
criar um link de <path>grub.conf</path> para <path>menu.lst</path>. Você pode
fazer isto digitando <c>ln -s /boot/grub/grub.conf /boot/grub/menu.lst</c>.
</impo>

<p>
Agora crie o arquivo <path>grub.conf</path> (<c>nano -w 
/boot/grub/grub.conf</c>) e adicione o seguinte a ele:
</p>

<pre caption="grub.conf para o GRUB">
default 0
timeout 30
splashimage=(hd0,0)/boot/grub/splash.xpm.gz

<comment># Se você compilou seu próprio kernel, use algo assim:</comment>
title=meu Gentoo de exemplo
root (hd0,0) 
kernel (hd0,0)/boot/bzImage root=/dev/hda3 

<comment># Se você gerou seu kernel com o genkernel, use algo assim:</comment>
title=My example Gentoo Linux (genkernel)
root (hd0,0)
kernel (hd0,0)/boot/kernel-KV root=/dev/hda3
initrd (hd0,0)/boot/initrd-KV

<comment># Abaixo somente necessário para pessoas com duas opções de
inicialização ("dual-boot")</comment>
title=Windows XP
root (hd0,5) 
chainloader (hd0,5)+1
</pre>

<p>
Substitua <c>KV</c> pela versão de kernel que você tem instalado.
</p>

<note>
(hd0,0) deve ser escrito sem nenhum espaço dentro dos parênteses.
</note>

<impo>
Se você configurou a emulação SCSI para usar um gravador de CD IDE, então para
fazê-lo funcionar você precisará adicionar um fragmento <c>hdx=ide-scsi</c> À
linha do kernel no <path>grub.conf</path> (onde "hdx" deve ser o dispositivo
para o seu gravador de CD).
</impo>

<p>
Após salvar este arquivo, a instalação do Gentoo Linux está completa. A escolha
da primeira opção vai dizer ao GRUB para iniciar o Gentoo Linux sem problemas. A
segunda parte do arquivo <path>grub.conf</path> é opcional e mostra como usar o
GRUB para iniciar uma partição Windows.
</p>

<note>
Acima, <path>(hd0,0)</path> deve apontar para a sua partição de inicialização
(<path>/dev/hda1</path> em nosso exemplo de configuração) e
<path>/dev/hda3</path> deve apontar para seu sistema de arquivos raiz.
<path>(hd0,5)</path> contém o <e>NT boot loader</e>.
</note>

<note>
O caminho da imagem do kernel é relativo à partição de inicialização. Se por
exemplo você tiver separado a partição boot <path>(hd0,0)</path> da partição
raiz <path>(hd0,1)</path>, todos os caminhos no arquivo <path>grub.conf</path>
acima virarão <path>/bzImage</path>.
</note>

<p>
Se você precisar passar alguma opção adicional para o kernel, simplesmente
adicione-as ao final do comando <c>kernel</c>. Já estamos passando uma opção
(<c>root=/dev/hda3</c>), mas você pode ainda passar outras. Em particular, você
pode desativar do devfs por padrão (não recomendado a menos que você saiba o que
está fazendo) adicionando a opção <c>gentoo=nodevfs</c> ao comando
<c>kernel</c>.
</p>

<note>
Diferente das versões anteriores do Gentoo Linux, agora você não precisa mais
adicionar <c>devfs=mount</c> ao final da linha <c>kernel</c> para ativar o
devfs. Agora o devfs é ativado por padrão.
</note>

</body>
</section>
<section>
<title>Configurando o LILO</title>
<body>

<p>
Enquanto o GRUB pode ser a nova alternativa para a maioria das pessoas, nem
sempre ele é a melhor escolha. O LILO (LInux LOader) é o gerenciador de
inicialização tradicional do Linux. Aqui está como instalar o LILO se você
quiser usá-lo em vez do GRUB.
</p>

<p>
O primeiro passo é instalar o LILO: 
</p>

<pre caption="Instalando o LILO">
# <i>emerge -k lilo</i>
</pre>

<p>
Agora vamos configurar o LILO. Aqui está um exemplo de arquivo de configuração <path>/etc/lilo.conf</path>:
</p>

<pre caption="Exemplo de lilo.conf">
boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
lba32
default=linux

<comment># Use algo como as próximas 4 linhas se você compilou seu próprio
kernel</comment>
image=/boot/bzImage
	label=linux
	read-only
	root=/dev/hda3

<comment># Se você usou o genkernel, use algo assim:</comment>
image=/boot/kernel-KV
	label=gk_linux
	root=/dev/hda3
	initrd=/boot/initrd-KV
	append="root=/dev/ram0 init=/linuxrc"

	
<comment># Para ter possibilidade de iniciar o windows ou outro S.O.
("dual-boot")</comment>
other=/dev/hda1
	label=dos
</pre>

<p>
Substitua <c>KV</c> pela versão do kenel que você tem instalado.
</p>

<ul>
<li><c>boot=/dev/hda</c> diz ao LILO para se instalar no primeiro disco rígido
na primeira controladora IDE.</li>
<li><c>map=/boot/map</c> informa o arquivo de mapa. No uso normal, isto não deve
ser modificado. </li>
<li><c>install=/boot/boot.b</c> diz ao LILO para instalar o arquivo especificado
como o novo setor de inicialização. NO uso normal, isto não deve ser alterado.
Se a linha install estiver faltando, o LILO vai pressupor o padrão
(<path>/boot/boot.b</path>) como arquivo a ser usado. </li>
<li>A existência do <c>prompt</c> diz ao LILO para mostrar o prompt clássico
<e>lilo:</e> na inicialização. Enquanto não é recomendado que você remova a
linha de prompt, se você a remover, ainda poderá ter um prompt segurando a tecla
[Shift] enquanto a sua máquina começa a inicializar. </li>
<li><c>timeout=50</c> estabelece o tempo que o LILO vai esperar por alguma
entrada do usuário antes de proceder com a inicialização do S.O./kernel padrão.
Isto é medido em décimos de segundo, com 50 como padrão. </li>
<li><c>lba32</c> descreve a geometria do disco rígido para o LILO. Outra entrada
comum aqui é linear. Você não deve mudar esta linha a menos que saiba muito bem
o que está fazendo. Senão, você poderia tornar seu sistema inutilizável. </li>
<li><c>default=linux</c> se refere ao sistema operacional padrão para o LILO
inicializar das opções listadas abaixo desta linha. O nome linux se refere à
linha label (título) abaixo em cada uma das opções de inicialização. </li>
<li><c>image=/boot/bzImage</c> especifica o kernel linux a inicializar com esta
opção específica de inicialização. </li>
<li><c>label=linux</c> nomeia a opção de sistema operacional na tela do LILO.
Neste caso, este também é o nome ao qual se refere a linha default. </li>
<li><c>read-only</c> especifica que a partição raiz (veja a linha abaixo) é
somente leitura e não pode ser alterada durante o processo de inicialização. </li>
<li><c>root=/dev/hda3</c> diz ao LILO qual partição de disco usar como partição
raiz. </li>
</ul>

<p>
Depois de editar seu arquivo <path>lilo.conf</path>, é hora de rodar o LILO para
mandar a informação na MBR:
</p>

<pre caption="Rodando o LILO">
# <i>/sbin/lilo</i>
</pre>

<p>
O LILO já está configurado e agora sua máquina está pronta para iniciar o Gentoo
Linux!
</p>

</body>
</section>

<section>
<title>Usando o framebuffer</title>
<body>

<p>
Quem selecionou o framebuffer em seu kernel deve agora adicionar <c>vga=xxx</c>
a seu arquivo de configuração do carregador do sistema. <c>xxx</c> é um dos
valores da seguinte tabela:
</p>

<table>
<tr><ti></ti><th>640x480</th><th>800x600</th><th>1024x768</th><th>1280x1024</th></tr>
<tr><th>8 bpp</th><ti>769</ti><ti>771</ti><ti>773</ti><ti>775</ti></tr>
<tr><th>16 bpp</th><ti>785</ti><ti>788</ti><ti>791</ti><ti>794</ti></tr>
<tr><th>32 bpp</th><ti>786</ti><ti>789</ti><ti>792</ti><ti>795</ti></tr>
</table>

<p>
Usuários do LILO terão que adicionar <c>vga=xxx</c> no alto de seu arquivo de
configuração.
</p>

<p>
Usuários do GRUB terão que acrescentar <c>vga=xxx</c> à linha <c>kernel
(hd0,0)...</c>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Criando discos de inicialização</title>
<section>
<title>Discos de inicialização do GRUB</title>
<body>

<impo>
Não se esqueça de inserir um disquete em sua unidade antes de continuar.
</impo>

<p>
Sempre é uma boa idéia fazer um disquete de inicialização na primeira vez em que
você instala qualquer distribuição Linux. Isto é uma segurança a mais e
geralmente não é uma má idéia. Se o seu hardware não lhe permite instalar um
carregador de sistema a partir do ambiente chrooted, você talvez <e>precise</e>
criar um disquete de inicialização do GRUB. Se você estiver neste caso, crie um
disquete de inicialização do GRUB, e quando você reiniciar pela primeira vez
você poderá instalar o GRUB na MBR. Crie seus discos de inicialização assim:
</p>

<pre caption="Criando um disquete de inicialização do GRUB">
# <i>cd /usr/share/grub/i386-pc/</i>
# <i>cat stage1 stage2 > /dev/fd0</i>
</pre>

<p>
Agora reinicie e insira o disquete na unidade. No prompt <c>grub&gt;</c> do
disquete, você já poderá executar os comandos <c>root</c> e <c>setup</c>
necessários.
</p>

</body>
</section>
<section>
<title>Disquetes de inicialização do LILO</title>
<body>

<impo>
Não se esqueça de inserir um disquete na sua unidade antes de continuar.
</impo>

<p>
Se você estiver usando o LILO, também é uma boa idéia criar um disquete de
inicialização:
</p>

<pre caption="Criando um disquete de inicialização">
# <i>dd if=/boot/your_kernel of=/dev/fd0 </i>
<comment>(Isto só vai funcionar se o seu kernel for menor que 1.44MB)</comment>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Usando a GRP</title>
<section>
<body>

<p>
Usuários da GRP podem agora instalar pacotes binários:
</p>

<pre caption="Instalando a partir da GRP">
# <i>USE="bindist" emerge -k xfree</i> 
<codenote>(USE="bindist" deve ser especificado enquanto você estiver instalando
pacotes GRP que usem o XFree86)</codenote>
</pre>

<p>
O CD 1 contém aplicativos suficientes para instalar um sistema funcional com o
XFree86. Adicionalmente, o CD2 do conjunto de 2 CD's contém outros aplicativos
incluindo KDE, GNOME, Mozilla e outros. Para instalar esses pacotes, você
precisará reiniciar seu novo sistema Gentoo primeiro (descrito na seção
"Instalação terminada!" perto do fim deste documento). Quando você estiver
rodando seu sistema básico Gentoo a partir do seu disco rígido, você poderá
montar o segundo CD e copiar arquivos:
</p>

<pre caption="Pegando pacotes binários do CD2">
# <i>mount /dev/cdrom /mnt/cdrom</i>
# <i>cp -a /mnt/cdrom/packages/ /usr/portage/</i>
</pre>

<p>
Agora vários outros aplicativos podem ser instalados da mesma forma. Por
exemplo:
</p>

<pre caption="Instalando o KDE a partir da GRP">
# <i>USE="bindist" emerge -k kde</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Instalação Terminada!</title>
<section>
<body>

<p>
Agora o Gentoo Linux está instalado. O único passo que falta é atualizar os
arquivos necessários de configuração, sair do shell chrooted, desmontar
seguramente as suas partições e reiniciar o sistema:
</p>

<warn>
O <c>etc-update</c> fornece uma lista de arquivos de configuração que têm
versões mais novas à sua disposição. Verifique se nenhum dos arquivos de
configuração tem um grande impacto (como por exemplo <path>/etc/fstab</path>,
<path>/etc/make.conf</path>, <path>/etc/rc.conf</path>, ...). Substitua os
arquivos antigos nos casos em que não haja grande impacto, remova as
atualizações dos outros ou veja as diferenças e atualize manualmente os arquivos
de configurações.
</warn>

<pre caption="Reiniciando o Sistema">
# <i>etc-update</i>
# <i>exit</i> 
<comment>(Isto sai do shell chrooted: você também pode digitar <i>^D</i>)</comment>
# <i>cd / </i>
# <i>umount /mnt/gentoo/boot</i>
# <i>umount /mnt/gentoo/proc</i>
# <i>umount /mnt/gentoo</i>
# <i>reboot</i>
<comment>(Não se esqueça de retirar o CD inicializável)</comment>
</pre>

<note>
Após reinicializar sua máquina, é uma boa idéia rodar o comando
<c>update-modules</c> para criar o arquivo <path>/etc/modules.conf</path>. Em
vez de modigicar este arquivo diretamente, geralmente você deve fazer alterações
aos arquivos em <path>/etc/modules.d</path>.
</note>

<p>
Se você tiver qualquer dúvida ou quiser se envolver com o desenvolvimento do
Gentoo Linux, pense em se juntar às nossas listas de e-mails gentoo-user e
gentoo-dev (mais informações em nossa página de <uri 
link="http://www.gentoo.org/main/en/lists.xml">listas de e-mail</uri>).
Também temos um útil <uri 
link="http://www.gentoo.org/doc/en/desktop.xml">Guia de configuração de
Desktop</uri> que o ajudará a continuar configurando o seu novo sistema Gentoo
Linux, e um bom <uri 
link="http://www.gentoo.org/doc/en/portage-user.xml">Guia para usuários do Portage</uri>
para ajudá-lo a se familiarizar com o básico do Portage. Você pode encontrar o
resto da Documentação do Gentoo <uri 
link="http://www.gentoo.org/main/en/docs.xml">aqui</uri>. Se você tiver qualquer
outra pergunta sobre a instalação ou algo assim, por favor verifique o <uri 
link="http://www.gentoo.org/doc/en/faq.xml">FAQ</uri> do Gentoo Linux.
Divirta-se e bem vindo ao Gentoo Linux!
</p>

</body>
</section>
</chapter>

<chapter>
<title>Gentoo-Stats</title>
<section>
<body>

<p>
O program de estatísticas de uso do Gentoo Linux foi iniciado como uma tentativa
de dar aos desenvolvedores uma forma de saber sobre sua base de usuários. Ele
coleta informações sobre o uso do Gentoo Linux para nos ajudar a definir
prioridades no desenvolvimento; Sua instalação é completamente opcional e seria
muito legal se você decidisse usá-lo. As estatísticas compiladas podem ser
visualizadas em <uri>http://stats.gentoo.org/</uri>.
</p>

<p>
O servidor do gentoo-stats conferir uma ID única ao seu sistema. Esta ID é usada
para ter certeza de que cada sistema é contado somente uma vez. A ID não será
usada para identificar individualmente o seu sistema, nem vai ser combinada a um
endereço de IP ou outras informações pessoais. Todos os cuidados foram tomados
para assegurar a sua privacidade no desenvolvimento deste sistema. Eis o que
estamos monitorando agora pelo programa "gentoo-stats":
</p>

<ul>
<li>pacotes instalados e o número de suas versões</li>
<li>informações da CPU: velocidade (MHz), fabricante, nome do modelo, extensões
da CPU (como "mmx" ou "3dnow")</li>
<li>informações da memória (RAM total disponível, espaço de troca total
disponível)</li>
<li>placas PCI e chips controladores de rede</li>
<li>o perfil do Gentoo Linux que a sua máquina está usando (ou seja, para onde o
link <path>/etc/make.profile</path> está apontando).</li>
</ul>

<p>
Estamos cientes de que o uso de informações importantes é uma ameaça à maioria
dos usuários do Gentoo Linux (exatamente como para os desenvolvedores).
</p>

<ul>
<li>A menos que você modifique o programa gentoo-stats, ele nunca vai transmitir
informações importantes como suas senhas, dados de configuração, tamanho do
sapato...</li>
<li>A transmissão dos seus endereços de e-mail é opcional e desabilitada por
padrão.</li>
<li>O endereço IP de onde a transmissão dos seus dados está se originando nunca
será registrado de forma a identificar você. Não existem pares "endereço IP/ID
do sistema".</li>
</ul>

<p>
A instalação é fácil - basta rodar os seguintes comandos:
</p>

<pre caption="Instalando o gentoo-stats">
# <i>emerge gentoo-stats</i>   <comment>(Instala o gentoo-stats)</comment>
# <i>gentoo-stats --new</i>    <comment>(Obtém uma nova ID de sistema)</comment>
</pre>

<p>
O segundo comando acima pedirá uma nova ID de sistema e a colocará em
<path>/etc/gentoo-stats/gentoo-stats.conf</path> automaticamente. Você pode ver
este arquivo para olhar opções adicionais de configuração.
</p>

<p>
Depois disto, o programa deve rodar numa escala regular (o gentoo-stats não tem
que ser executado como superusuário). Adicione esta linha ao seu
<path>crontab</path>:
</p>

<pre caption="Atualizando o gentoo-stats com o cron">
0 0 * * 0,4 /usr/sbin/gentoo-stats --update &gt; /dev/null
</pre>

<p>
O programa <c>gentoo-stats</c> é um simples script de perl que pode ser
visualizado com o seu editor ou visualizador favorito:
<path>/usr/sbin/gentoo-stats</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Gentoo em hardware menos comum</title>
<section>
<title>ATA RAID por hardware</title>
<body>

<p>
Usuários que quiserem instalar o Gentoo em ATA RAID por hardware devem prestar
atenção aos seguintes passos para instalar o Gentoo Linux com sucesso:
</p>

<ul>
<li>Certifique-se de iniciar o CD com a opção de kernel <c>doataraid</c>.</li>
<li>Se você se esqueceu de selecionar <c>doataraid</c> durante a inicialização,
ou os módulos misteriosamente não foram carregados, carregue-os conforme a
necessidade:
<pre caption = "Carregando os módulos de RAID">
# <i>modprobe ataraid</i>
<comment>Para Controladoras Raid Promise:</comment>
# <i>modprobe pdcraid</i> 
<comment>Para Controladoras Raid Highpoint:</comment>
# <i>modprobe hptraid</i>
</pre></li>
<li>Algumas controladoras ATA RAID requerem que você reinicie após o
particionamento; ou então a formatação falhará.</li>
<li>Antes de ir para o chroot, monte a árvore de dispositivos no novo ambiente:
<pre caption = "Montando /dev em /mnt/gentoo/dev">
# <i>mount -o bind /dev /mnt/gentoo/dev</i>
</pre></li>
<li>Durante a configuração do kernel, selecione as opções de RAID necessárias:
<pre caption = "RAID na Configuração do Kernel Linux">
<comment>Para controladoras RAID Highpoint:</comment>
ATA/IDE/MFM/RLL support  ---&gt;
[*] HPT36X/37X chipset support 
[*] Support for IDE Raid controllers
[*] Highpoint 370 software RAID
<comment>Para controladoras RAID Promise:</comment>
ATA/IDE/MFM/RLL support  ---&gt;
[*] PROMISE PDC202{46|62|65|67} support 
<comment>e/ou</comment>
[*] PROMISE PDC202{68|69|70|71|75|76|77} support
[*] Support for IDE Raid controllers
[*] Support Promise software RAID (Fasttrak(tm))
</pre></li>
<li>Quando usar o GRUB, adicione <c>--stage2=/boot/grub/stage2</c> quando rodar
o <c>grub</c> ao comando <c>setup</c>:
<pre caption = "Instalando o GRUB para sistemas RAID por hardware">
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup --stage2=/boot/grub/stage2 (hd0)</i>
grub&gt; <i>quit</i>
</pre>
Além disto, na configuração do GRUB, tenha certeza de apontar <c>root</c> para o
dispositivo RAID apropriado:
<pre caption = "grub.conf para RAID">
title=Meu sistema Gentoo Linux em RAID
root (hd0,0)
kernel (hd0,0)/boot/bzImage root=/dev/ataraid/dXpY
</pre></li>
<li>Usuários do LILO devem especificar a opção <c>root</c> para o dispositivo
RAID adequado:
<pre caption = "lilo.conf para RAID">
image=/boot/bzImage
label=linux
read-only
root=/dev/ataraid/dXpY
</pre></li>
</ul>

<p>
Se você ainda tiver problemas na instalação do Gentoo Linux no seu RAID por
hardware, certifique-se de reportá-los em <uri>http://bugs.gentoo.org</uri>. 
</p>

<p>
Obrigado por usar o Gentoo Linux, e divirta-se com a sua nova instalação!
</p>


</body>
</section>
</chapter>
</guide>
