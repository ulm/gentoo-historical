<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pt_br/gentoolkit.xml,v 1.1 2005/01/27 02:46:32 enderson Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/pt_br/gentoolkit.xml">
<title>Gentoolkit</title>

<author title="Autor">
  <mail link="mbutcher@aleph-null.tv">Matt Butcher</mail>
</author>
<author title="Editor">
  <!-- zhen@gentoo.org -->John P. Davis
</author>
<author title="Editor">
  <mail link="erwin@gentoo.org">Erwin</mail>
</author>
<author title="Editor">
  <mail link="fox2mike@gmail.com">Shyam Mani</mail>
</author>
<author title="Editor">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>
<author title="Tradutor">
  <mail link="marcelogoes@gmail.com">Marcelo Góes</mail>
</author>

<!-- Licensed under GFDL -->

<abstract>
O Gentoolkit é um conjunto de ferramentas para facilitar a administração de um sistema Gentoo.
Este documento cobre o básico de algumas ferramentas presentes no Gentoolkit.
</abstract>

<version>1.5</version>
<date>2004-12-27</date>

<chapter>
<title>Introdução</title>
<section>
<title>O que é o Gentoolkit?</title>
<body>

<p>
O Gentoo é uma distribuição singular e apresenta algumas complexidades que simplesmente
não existem em outras distribuições. Ao passo que os desenvolvedores do Gentoo e colaboradores
descobriram essas as complexidades, também escreveram ferramentas para ajudar os usuários
e administradores contorná-las. Muitas dessas ferramentas foram contribuídas para
o projeto do Gentoo e são incluídas no pacote
<c>app-portage/gentoolkit</c>.
</p>

<note>
No momento existem duas versões do gentoolkit: <c>app-portage/gentoolkit</c>
e <c>app-portage/gentoolkit-dev</c>. Enquanto o primeiro contém scripts de
administração, o segundo contém scripts específicos para ajudar no desenvolvimento do Gentoo.
Este documento discute somente o gentoolkit.
</note>

<p>
O Gentoolkit contém várias ferramentas úteis para ajudar a gerenciar seus pacotes
e cuidar do que está acontecendo em seu sistema. A maior parte dos usuários --&nbsp; especialmente
os que atualizam o sistema freqüentemente &nbsp;-- irão tirar proveito de ter o gentoolkit
instalado.
</p>

</body>
</section>
<section>
<title>Instalação</title>
<body>

<p>
Como com qualquer pacote do Gentoo, a instalação é só um simples emerge.
</p>

<pre caption="Obtendo o gentoolkit">
# <i>emerge gentoolkit</i>
</pre>

<note>
Muitas das ferramentas do gentoolkit revelam informações importantes sobre seu sistema
ou precisam de privilégios de administrador (root). Por este motivo, alguns programas só podem
ser executados (ou funcionar direito) se rodados com permissões de root.
</note>

</body>
</section>
<section>
<title>Encontrando documentação</title>
<body>

<p>
Qualquer documentação que um programa pode ter (fora as man pages) está gravado em
<path>/usr/doc/gentoolkit-[versão]/[nome-do-programa]/</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>equery</title>
<section>
<title>Introdução</title>
<body>

<p>
<c>equery</c> é uma ferramenta que suporta funções que o <c>epm</c> (e o
antigo <c>qpkg</c>) tem, mas também tem seu próprio conjunto de funções que fazem dele
realmente útil. <c>equery --help</c> dará a você todas as opções.
<c>equery</c> irá acabar substituindo o <c>etcat</c> em algum ponto do futuro.
</p>

<note>
Nem todas funções listadas por <c>equery --help</c> já foram implementadas.
Aquelas que não foram são mencionadas claramente.
</note>

</body>
</section>
<section>
<title>Descobrindo tamanhos de pacotes</title>
<body>

<p>
Já esteve curioso para saber quanto espaço um pacote específico está ocupando?
Já que o pacote pode ter seus arquivos em vários diretórios, o comum
<c>du -hc</c> pode não dar o tamanho correto. Não se preocupe, aqui vem
<c>equery</c> ao resgate!
</p>

<pre caption="Tamanho de pacote">
# <i>equery size openoffice-bin</i>
* app-office/openoffice-bin-1.1.2
	   Total Files : 2908
	   Total Size  : 223353.31 KiB
</pre>

<p>
Como você pode ver, o <c>equery</c> mostra o espaço total usado em kilobytes e também
lista o número total de arquivos que pacote tem.
</p>

</body>
</section>
<section>
<title>Lista de opções de USE por pacote</title>
<body>

<p>
O <c>equery</c> pode ser usado para dar-nos informações sobre opções de USE sendo
usadas por um pacote específico. Ele diz quais são nossas opções de USE atuais para um
pacote e que opções de USE estão disponíveis para o pacote.
</p>

<pre caption="Configurando e tirando opções de USE">
# <i>equery uses ethereal</i>
[ Colour Code : set unset ]
[ Legend    : (U) Col 1 - Current USE flags        ]
[           : (I) Col 2 - Installed With USE flags ]

 U I [ Found these USE variables in : net-analyzer/ethereal-0.10.6 ]
 - - adns  : Adds support for the adns DNS client library
 + + gtk   : Adds support for x11-libs/gtk+ (The GIMP Toolkit)
 - - ipv6  : Adds support for IP version 6
 - - snmp  : Adds support for the Simple Network Management Protocol if available
 + + ssl   : Adds support for Secure Socket Layer connections
 + + gtk2  : Use gtk+-2.0.0 over gtk+-1.2 in cases where a program supports both.
 - - debug : Tells configure and the makefiles to build for debugging. Effects vary across packages,
             but generally it will at least add -g to CFLAGS. Remember to set FEATURES=nostrip too
</pre>

<p>
Eu instalei o ethereal só com as opções gtk, ssl e gtk2, mas as
outras opções de USE para o ethereal são adns, ipv6, snmp e debug. Para mais
informações sobre as opções de USE, por favor leia o capítulo <uri
link="/doc/pt_br/handbook/handbook-x86.xml?part=2&amp;chap=2">Variáveis de USE</uri>
<uri link="/doc/pt_br/handbook/">Manual do Gentoo</uri>.
</p>

</body>
</section>
<section>
<title>Onde está a ebuild?</title>
<body>

<p>
Nós também podemos saber que ebuild está sendo usada para um pacote específico usando
<c>equery</c>. Isto é feito usando o comando <c>equery which</c> que
mostra o caminho completo para a ebuild.
</p>

<pre caption="Mostrando o caminho da ebuild">
# <i>equery which cdrtools</i>
/usr/portage/app-cdr/cdrtools/cdrtools-2.01_alpha37.ebuild
</pre>

</body>
</section>
<section>
<title>Gráficos de dependência</title>
<body>

<p>
<c>equery</c> é capaz de traçar um gráfico de dependências para um pacote específico.
O gráfico de dependência dá uma lista de todos pacotes que tem dependências diretas e
indiretas do pacote em questão.
</p>

<pre caption="Gráfico de dependências do cdrtools">
# <i>equery depgraph cdrtools</i>
Displaying dependencies for app-cdr/cdrtools-2.01_alpha37
`-- app-cdr/cdrtools-2.01_alpha37
 `-- sys-libs/glibc-2.3.4.20040808 (virtual/libc)
  `-- sys-kernel/linux-headers-2.4.22 (virtual/os-headers)
   `-- sys-apps/baselayout-1.10.4
    `-- sys-apps/sysvinit-2.85-r1
     `-- sys-apps/gawk-3.1.3-r1
      `-- sys-apps/util-linux-2.12-r4
          `-- sys-apps/sed-4.0.9
	      `-- sys-libs/ncurses-5.4-r4
	          `-- sys-apps/pam-login-3.14
	          `-- sys-libs/pam-0.77-r1
                 `-- sys-libs/cracklib-2.7-r10
               `-- sys-apps/miscfiles-1.3-r1
              `-- app-arch/gzip-1.3.5-r1
              `-- sys-apps/portage-2.0.50-r10
</pre>

<p>
Por exemplo, enquanto o glibc pode ser uma dependência direta para o cdrtools, o linux-headers
é uma dependência indireta para o cdrtools.
</p>

</body>
</section>
</chapter>

<chapter>
<title>euse</title>
<section>
<title>Introdução</title>
<body>

<p>
<c>euse</c> é uma ferramenta para ver, configurar e remover opções de USE em vários lugares. Para
mais informações sobre opções de USE, por favor leia o capítulo  <uri
link="/doc/pt_br/handbook/handbook-x86.xml?part=2&amp;chap=2">Variáveis de USE</uri>.
<c>euse -i</c> lista todas opções de USE.
</p>

</body>
</section>
<section>
<title>Lendo, configurando e removendo opções de USE</title>
<body>

<p>
O comando <c>euse --conf</c> lê as opções de USE atuais ligadas/desligadas no
make.conf.
</p>

<pre caption="Vendo opções atuais do make.conf">
# <i> euse --conf</i>
USE setting in make.conf:
alsa acpi apache2 cups cdr crypt cscope -doc ethereal fbcon gif gimpprint gnome
gpm gstreamer gtk2 gtkhtml imlib imlib2 innodb -java javascript jpeg libg++ libwww
mad md5sum mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses oggvorbis odbc
offensive opengl pam pdflib perl png python quicktime readline sdl spell sse ssl
svga tcltk tiff truetype usb vanilla X xml2 xmms xosd xv xvid x86 zlib
</pre>

<p>
Configurar uma opção de USE é feito com ajuda do comando <c>euse --enable</c>
que precisa de um argumento obrigatório de opção. Se a opção já não estiver ligada,
o <c>euse</c> anexa a opção de USE no final das opções de USE atuais.
No caso que a opção de USE seja inválida, há um aviso. Remover uma opção de USE é
feito com o comando <c>euse --disable</c>. Se uma opção inválida for especificada,
o usuário é avisado sutilmente. Se a opção estiver presente, ela é desligada com um -opção
no make.conf.
</p>

<pre caption="Configurando uma opção de USE, 3dfx">
# <i>euse --enable 3dfx</i>
USE setting in make.conf after enabling:
alsa acpi apache2 cups cdr crypt cscope -doc ethereal fbcon gif gimpprint gnome
gpm gstreamer gtk2 gtkhtml imlib imlib2 innodb -java javascript jpeg libg++ libwww
mad md5sum mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses oggvorbis odbc
offensive opengl pam pdflib perl png python quicktime readline sdl spell sse ssl
svga tcltk tiff truetype usb vanilla X xml2 xmms xosd xv xvid x86 zlib 3dfx
</pre>

<pre caption="Desligando uma opção de USE, 3dfx">
# <i>euse --disable 3dfx</i>
USE setting in make.conf after disabling:
alsa acpi apache2 cups cdr crypt cscope -doc ethereal fbcon gif gimpprint gnome
gpm gstreamer gtk2 gtkhtml imlib imlib2 innodb -java javascript jpeg libg++ libwww
mad md5sum mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses oggvorbis odbc
offensive opengl pam pdflib perl png python quicktime readline sdl spell sse ssl
svga tcltk tiff truetype usb vanilla X xml2 xmms xosd xv xvid x86 zlib -3dfx
</pre>

<note>
<c>euse</c> não remove a opção fisicamente do make.conf. Ele simplesmente adiciona um
- (menos) na frente da opção para desligá-la. Você pode ter que limpar seu
make.conf manualmente para evitar variáveis não-desejáveis.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Outras ferramentas</title>
<section>
<title>revdep-rebuild</title>
<body>

<p>
Esta ferramenta é o re-construtor de dependências reversas do Gentoo. Ele irá escanear as
ebuilds instaladas para encontrar pacotes que se tornaram quebradas como resultado e uma atualização
de um pacote de que dependem. Ele pode fazer emerge dos pacotes para você, mas também
pode ser que o pacote dado não funcione mais com as dependências instaladas atualmente,
e no caso você deve atualizar o pacote quebrado para uma versão mais
recente. O revdep-rebuild irá passar opções para o emerge, o que permite usar a opção
<c>--pretend</c> para ver do que será feito emerge novamente antes de você
proceder.
</p>

<pre caption="Rodando revdep-rebuild em modo pretend">
# <i>revdep-rebuild -p</i>

Checking reverse dependencies...
Packages containing binaries and libraries broken by any package update,
will be recompiled.

Collecting system binaries and libraries... done.
  (/root/.revdep-rebuild.1_files)

Collecting complete LD_LIBRARY_PATH... done.
  (/root/.revdep-rebuild.2_ldpath)

Checking dynamic linking consistency...
  broken /usr/lib/ao/plugins-2/libarts.so (requires libartsc.so.0)
  broken /usr/lib/kde3/libkpresenterpart.so (requires libartskde.so.1 libqtmcop.so.1
         libsoundserver_idl.so.1 libkmedia2_idl.so.1 libartsflow.so.1 libartsflow_idl.so.1 libmcop.so.1)
  broken /usr/lib/ruby/site_ruby/1.8/i686-linux/fox.so (requires libFOX-1.0.so.0)
  broken /usr/lib/xine/plugins/1.0.0/xineplug_ao_out_arts.so (requires libartsc.so.0)
  broken /usr/lib/perl5/vendor_perl/5.8.0/i686-linux/auto/SDL_perl/SDL_perl.so (requires libSDL_gfx.so.0)
  broken /usr/lib/libloudmouth-1.so.0.0.0 (requires libgnutls.so.10)
  broken /usr/bin/k3b (requires libartskde.so.1 libqtmcop.so.1 libsoundserver_idl.so.1 libkmedia2_idl.so.1
         libartsflow.so.1 libartsflow_idl.so.1 libmcop.so.1)
  broken /usr/bin/lua (requires libhistory.so.4)
  broken /usr/bin/lyx (requires libAiksaurus-1.0.so.0)
  broken /usr/bin/luac (requires libhistory.so.4)
  broken /usr/bin/avidemux2 (requires libartsc.so.0)
  broken /usr/bin/pptout (requires libxml++-0.1.so.11)
  broken /usr/bin/xml2ps (requires libxml++-0.1.so.11)
 done.
  (/root/.revdep-rebuild.3_rebuild)

Assigning files to ebuilds... done.
  (/root/.revdep-rebuild.4_ebuilds)

Evaluating package order... done.
  (/root/.revdep-rebuild.5_order)

All prepared. Starting rebuild...
emerge --oneshot --nodeps -p =app-cdr/k3b-0.11.14 =app-office/koffice-1.3.2 =app-office/lyx-1.3.4 \
       =app-office/passepartout-0.2 =dev-lang/lua-5.0.2 =dev-ruby/fxruby-1.0.29 =media-libs/libao-0.8.5 \
       =media-libs/xine-lib-1_rc5-r3 =media-video/avidemux-2.0.26 =net-libs/loudmouth-0.16 

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] app-cdr/k3b-0.11.14  
[ebuild   R   ] app-office/koffice-1.3.2  
[ebuild   R   ] app-office/lyx-1.3.4  
[ebuild   R   ] app-office/passepartout-0.2  
[ebuild   R   ] dev-lang/lua-5.0.2  
[ebuild   R   ] dev-ruby/fxruby-1.0.29  
[ebuild   R   ] media-libs/libao-0.8.5  
[ebuild   R   ] media-libs/xine-lib-1_rc5-r3  
[ebuild   R   ] media-video/avidemux-2.0.26  
[ebuild   R   ] net-libs/loudmouth-0.16  

Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
</pre>

<p>
Se você precisar re-construir alguns pacotes, agora você pode <c>revdep-rebuild</c> sem a
opção <c>-p</c> e os pacotes listados serão instalados novamente.
</p>

</body>
</section>

<section>
<title>glsa-check</title>
<body>

<p>
<c>glsa-check</c> é pricipalmente uma ferramenta de testes que controla as várias GLSA's
(Gentoo Linux Security Advisory) e irá ser integrada no futuro no
<c>emerge</c> e <c>equery</c>. Para mais informações, por favor visite a <uri
link="/proj/en/portage/glsa-integration.xml">Página de integração de GLSA com o
Portage</uri>.
</p> 

</body>
</section>
</chapter>

</guide>
