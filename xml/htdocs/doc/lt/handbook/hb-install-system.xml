<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/lt/handbook/hb-install-system.xml,v 1.1 2006/07/16 09:24:58 neysx Exp $ -->

<sections>

<version>2.20</version>
<date>2006-07-13</date>

<section>
<title>Chrooting</title>
<subsection>
<title>Pasirinktinai: Pasirenkame Veidrodžius</title>
<body>

<p>
Norėdami greitai parsisiųsti išeities kodą, rekomenduojame pirmiausia
pasirinkti greičiausią parsisiuntimo veidrodį. Portage bazė pasižiūrės į
rinkmenoje <path>make.conf</path> esantį kintamąjį GENTOO_MIRRORS ir nuskaitys
jo reikšmę, t.y. nuskaitys veidrodinio šaltinio adresą. Taip pat jūs galite
panaršyti mūsų <uri link="/main/en/mirrors.xml">veidrodinių šaltinių
sąrašą</uri> ir paieškoti veidrodžio (veidrodžių), kurie yra arčiausiai jūsų
(tie, kurie dažniausiai minimi yra greičiausi). Bet mes siūlome jums patogų
įrankį, pavadintą <c>mirrorselect</c>, kuris leidžia jums patogia programos
sąsaja pasirinkti norimą veidrodį.
</p>
  
<pre caption="GENTOO_MIRRORS kintamojo parinkimui naudojame mirrorselect">
# <i>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<warn>
Nesirinkite IPv6 veidrodžių. Mūsų baziniai variantai šiuo metu nepalaiko IPv6
protokolo.
</warn>

<p>
Kitas svarbus nustatymas yra rinkmenoje <path>make.conf</path> SYNC kintamasis.
Šis kintamasis laiko rsync serverio adresą, kurį jūs naudojate kai atnaujinate
Portage medį (ebuild rinkmenas, skriptus, kurie laiko visą reikalingą
informaciją, reikalingą Portage bazei norint parsisiųsti ir įdiegti programinę
įrangą). Jūs galite pats nustatyti SYNC kintamojo reikšmę arba pasinaudoti
<c>mirrorselect</c> įrankiu:
</p>

<pre caption="Pasirenkame rsync serverio veidrodį naudodami mirrorselect">
# <i>mirrorselect -i -r -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<p>
Po to kai paleistie <c>mirrorselect</c>, rekomenduojame patikrinti reikšmes
rinkmenoje <path>/mnt/gentoo/etc/make.conf</path>!
</p>

</body>
</subsection>
<subsection>
<title>Kopijuojame DNS Informaciją</title>
<body>

<p>
Vieną dalyką, kurį reikia būtinai padaryti prieš pereinant į naują aplinką, yra
DNS informacijos nukopijavimas į rinkmeną <path>/etc/resolv.conf</path>. Jūs
turite tai padaryti, jei norite būti tikras, kad galėsite naudotis tinklu po
to, kai pereisite į naują aplinką. Rinkmena <path>/etc/resolv.conf</path> laiko
vardinių serverių (nameserver) adresus jūsų tinklui.
</p>

<pre caption="Kopijuojame DNS informaciją">
<comment>("-L" pasirinktis užtikrina, kad mes nenukopijuosime simbolinės
nuorodos)</comment>
# <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
</pre>

</body>
</subsection>
<subsection>
<title>Prijungiame /proc ir /dev failines sistemas</title>
<body>

<p>
Prijungiame <path>/proc</path> failų sistemą prie
<path>/mnt/gentoo/proc</path>, kad leistume diegimui naudoti branduolio
teikiamą informaciją naujai aplinkai. Tada prijungiame <path>/dev</path> failų
sistemą.
</p>

<pre caption="Prijungiame /proc ir /dev">
# <i>mount -t proc none /mnt/gentoo/proc</i>
# <i>mount -o bind /dev /mnt/gentoo/dev</i>
</pre>

</body>
</subsection>
<subsection>
<title>Įeiname į naująją Aplinką</title>
<body>

<p>
Jau visi skaidiniai yra inicializuoti ir pagrindinė aplinka įdiegta, todėl
dabar laikas įeiti į naująją aplinką, kurią <e>atskyrėme (chrooting)</e> nuo
senosios. Tai reiškia, kad mes pakeisime esamą diegimo aplinką (Diegimo CD arba
kitų diegimo laikmenų) į jūsų įdiegtą sistemą (tiksliau pavadinus, dalinai
įdiegtą sistemą).
</p>

<p>
Šis izoliavimas yra daromas trimis žingsniais. Pirmiausia, mes pakeisime
šakninį katalogą iš <path>/</path> (iš diegimo laikmenos) į
<path>/mnt/gentoo</path> katalogą (esančią jūsų skaidiniuose), naudodami
<c>chroot</c> komandą. Tada mes sukursime naująją aplinką naudodami
<c>env-update</c> komandą, kuri savaime sukurs aplinkos kintamuosius.
Galiausiai, užkrausime visus kintamuosius į atmintį, naudodami komandą
<c>source</c>.
</p>

<pre caption = "Sukuriame naująją aplinką">
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>env-update</i>
>> Regenerating /etc/ld.so.cache...
# <i>source /etc/profile</i>
# <i>export PS1="(chroot) $PS1"</i>
</pre>

<p>
Sveikiname! Pagaliau Jūs esate savo Gentoo Linux sistemoje. Aišku tai dar toli
nuo pabaigos, vien jau dėl to, kad liko dar keletas skyrių perskaityti :-)
</p>

</body>
</subsection>
</section>

<section>
<title>Nustatinėjame Portage bazę</title>
<subsection>
<title>Atnaujiname Portage medį</title>
<body>

<p>
Dabar jūs turėtumėte atnaujinti naujausia versija savo Portage medį. Komanda
<c>emerge --sync</c> tai atlieka už jus.
</p>

<pre caption="Atnaujiname Portage medį">
# <i>emerge --sync</i>
<comment>(Jeigu jūs naudojate lėtą terminalą su framebuffers arba serijinius
terminalus, jūs galite naudoti parametrą --quiet, paspartindami
procesą:)</comment>
# <i>emerge --sync --quiet</i>
</pre>

<p>
Jeigu jūs esate už ugniasienės, kuri blokuoja rsync srautą, jūs galite naudoti
<c>emerge-webrsync</c> komandą, kuri parsiųs ir instaliuos portage bazės vaizdą
už jus.
</p>

<p>
Jeigu jūs būsite įspėti, kad nauja Portage versija jau yra ir kad jūs galite ją
įdiegti, tai dabar ir padarykite, pasinaudodami komanda <c>emerge portage</c>.
</p>

</body>
</subsection>
<subsection>
<title>Pasirenkame teisingą profilį</title>
<body>

<p>
Profilio pasirinkimas yra kertinis akmuo Gentoo sistemoje. Ne vien dėl to, kad
nurodome numatytąsias reikšmes CHOST, CFLAGS ir kitus svarbius kintamuosius,
tai svarbu ir todėl, kad nustatysime tam tikrą paketų naudojimo versiją. O visa
tai yra sukurta Gentoo kūrėjų.
</p>

<p>
Anksčiau prie profilio vartotojas beveik neprisilietė. Tiesa sakant, x86, hppa
ir alpha vartotojai galėjo pasirinkti iš dviejų profilių, vienas jų skirtas
2.4 branduoliui, kitas 2.6 branduoliui. Šio reikalavimo buvo atsisakyta norint
pagerinti 2.6 branduolio integraciją. ppc ir ppc64 architektūros turi keletą
galimų profilių taip pat, bet apie tai mes pašnekėsime vėliau.
</p>

<p>
Jūs galite pažiūrėti, kokį profilį dabar naudojate, įvykdydami tokią komandą:
</p>

<pre caption="Patikriname sistemos profilį">
# <i>ls -FGg /etc/make.profile</i>
lrwxrwxrwx  1 48 Apr  8 18:51 /etc/make.profile ->
../usr/portage/profiles/default-linux/x86/2006.0/
</pre>

<p>
Jeigu jūs naudojate viena iš anksčiau paminėtų trijų architektūrų, numatytasis
profilis pateiks Linux 2.6 branduoliu besiremiančią sistemą. Tai yra
rekomenduojamas numatytasis profilis, bet aišku, jūs galite pats pasirinkti
kitą profilį taip pat.
</p>

<p>
Kai kurie vartotojai gali norėti įdiegti sistemą paremtą senesniu Linux 2.4
profiliu. Jeigu tam turite svarbių priežasčių, tada pirmiausia turite
patikrinti, ar papildomi profiliai egzistuoja. Tai galite padaryti tiesiog
įvykdę komandą:
</p>

<pre caption="Patikriname kokie papildomi profiliai egzistuoja">
# <i>ls -d /usr/portage/profiles/default-linux/x86/no-nptl/2.4</i>
/usr/portage/profiles/default-linux/x86/no-nptl/2.4
</pre>

<p>
Aukščiau pateiktas pavyzdys rodo, kad papildomas 2.4 profilis egzistuoja, nes
nebuvo jokio pranešimo apie dingusias rinkmenas ar direktorijas.
Rekomenduojama, kad jūs pasiliktumėte su numatytuoju profiliu, bet jeigu jūs
norite pakeisti, tada galite padaryti taip:
</p>

<pre caption="Keičiame profilį į 2.4">
<comment>(Patikrinkite, ar tikrai naudojate teisingą architektūrą, pavyzdys
pateikas x86 architektūrai)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/x86/no-nptl/2.4 /etc/make.profile</i>
<comment>(Failų sąrašas 2.4 profilyje)</comment>
# <i>ls -FGg /etc/make.profile/</i>
total 12
-rw-r--r--  1 939 Dec 10 14:06 packages
-rw-r--r--  1 347 Dec  3  2004 parent
-rw-r--r--  1 573 Dec  3  2004 virtuals
</pre>

<p>
ppc vartotojams yra pateikta naujų profilių, kurie pateikiami su 2006.0 Gentoo
versija.
</p>

<pre caption="PPC Profiliai">
<comment>(Daugybinis PPC profilis, skirtas visiems PPC kompiuteriams, minimalus)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0 /etc/make.profile</i>
<comment>(G3 profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G3 /etc/make.profile</i>
<comment>(G3 Pegasos profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G3/Pegasos/ /etc/make.profile</i>
<comment>(G4 (Altivec) profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G4 /etc/make.profile</i>
<comment>(G4 (Altivec) Pegasos profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G4/Pegasos/ /etc/make.profile</i>
</pre>

<p>
ppc64 vartotojams yra keletas naujų profilių, pateiktų su 2006 Gentoo versija.
</p>

<pre caption="PPC64 Profilis">
<comment>(Daugybinis 64bit vartotojiškas PPC64 profilis, skirtas visiems PPC64
kompiuteriams)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/64bit-userland /etc/make.profile</i>
<comment>(Daugybinis 32bit vartotojiškas PPC64 profilis, skirtas visiems PPC64
kompiuteriams)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/32bit-userland /etc/make.profile</i>
<comment>(Each type of userland has sub profiles as follows, with (userland) replaced with the chosen userland from above)</comment>
<comment>(970 profilis skirtas JS20)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/970 /etc/make.profile</i>
<comment>(G5 profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/970/pmac /etc/make.profile</i>
<comment>(POWER3 profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/power3 /etc/make.profile</i>
<comment>(POWER4 profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/power4 /etc/make.profile</i>
<comment>(POWER5 profilis)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/power5 /etc/make.profile</i>
<comment>(Daugiabibliotekinis profilis šios versijos nėra stabilus.)</comment>
</pre>

</body>
</subsection>
<subsection id="configure_USE">
<title>Konfigūruojame USE kintamajį</title>
<body>

<p>
<c>USE</c> yra vienas iš galingiausių Gentoo sistemos teikiamų vartotojams
kintamųjų. Daugelis programų gali būti sukompiliuotos su arba be tam tikrų
palaikymų, priedų. Pavyzdžiui, keletas programų gali būti sukompiliuotos su
gtk palaikymu arba su qt palaikymu. Kitos programos gali būti sukompiliuotos su
arba be SSL palaikymu. Kai kurios programos gali būti sukompiliuotus su
grafinio buferio palaikymu (svgalib) vietoj X11 palaikymo (X-serverio).
</p>

<p>
Daugelis distribucijų kompiliuoja savo paketus su kiek įmanoma daugiau
palaikymų, priedų, taip padidindami programos dydį ir krovimosi laiką, jau
nekalbant apie nežmoniškus kiekius priklausomybių. Su Gentoo sistema Jūs galite
nustatyti su kokiais palaikymas paketai bus sukompiliuoti. Šioje vietoje
svarbiausias vaidmuo atitenka <c>USE</c> kintamajam.
</p>

<p>
<c>USE</c> kintamajame jūs nustatysite raktažodžius, kurie yra surišti su
kompiliavimo pasirinktimis. Pavyzdžiui, <e>ssl</e> bus sukompiliuotas su ssl
palaikymu programose, kurios palaiko tai. <e>-X</e> pašalins X-serverio
palaikymą (atkreipkite dėmesį į minusą prieš raktažodį, tai rodo, kad
palaikymas nebus kompiliuojamas). <e>gnome gtk -kde -qt</e> sukompiliuos
programas su gnome (ir gtk) palaikymu ir pašalins kde (ir qt) palaikymą, kas
padarys Jūsų sistemą orientuotą į GNOME.
</p>

<p>
Numatytieji <c>USE</c> nustatymai yra laikomi rinkmenoje
<path>make.defaults</path> jūsų profilyje. Jūs rasite rinkmenas
<path>make.defaults</path> kataloge, kurį nurodo <path>/etc/make.profile</path>
rinkmena. Numatytasis <c>USE</c> nustatymai yra rinkmenoje
<path>make.defaults</path>. Ką jūs padėsite į <path>/etc/make.conf</path>, tai
yra atskirai paskaičiuojama nuo numatytųjų nustatymų. Jeigu jūs pridedate
kažkokį nustatymą į <c>USE</c>, tada jis yra įtraukiams į numatytųjų sarašą.
Jeigu pašalinate ką nors iš <c>USE</c> (padėdami minusą prieš raktažodį), tai
bus pašalinta ir iš numatytųjų sąrašo (jeigu jis apskritai ten buvo įtrauktas).
<e>Niekada</e> nepridėkite nieko patys į rinkmeną
<path>/etc/make.profile</path>; Tai bus perrašyta, kai jūs atnaujinsite Portage
bazę!
</p>

<p>
Pilną <c>USE</c> aprašymą galima rasti antroje Gentoo Handbook dalyje, 
<uri link="?part=2&amp;chap=2">USE vėliavėlės</uri>. Pilnas USE vėliavėlių
aprašymą galima rasti pačioje sistemoje rinkmenoje
<path>/usr/portage/profiles/use.desc</path>.
</p>

<pre caption="Peržiūrime galima USE vėliavėlias">
# <i>less /usr/portage/profiles/use.desc</i>
<comment>(Vaikščiojimui galite naudoti rodyklių klavišus, o norėdami išeiti
spauskite 'q')</comment>
</pre>

<p>
Kaip pavyzdį parodysime <c>USE</c> nustatymus KDE-tipo sistemai su DVD, ALSA ir
CD įrašymo palaikymais:
</p>

<pre caption="Atidarome /etc/make.conf">
# <i>nano -w /etc/make.conf</i>
</pre>

<pre caption="USE nustatymai">
USE="-gtk -gnome qt kde dvd alsa cdr"
</pre>

</body>
</subsection>
<subsection>
<title>Pasirinktinai: GLIBC Lokalės</title>
<body>

<p>
Jūs greičiausiai naudosite vieną arba dvi lokales savo sistemoje. Iki šiol po
kompiliavimo <c>glibc</c> bibliotekos būdavo sukuriamos visos galimos lokalės.
Dabar jūs galite aktyvuoti <c>userlocales</c> USE vėliavėlė ir nurodyti tik tas
lokales, kurių jums reikės. Tai padaryti galite rinkmenoje
<path>/etc/locales.build</path>. Atlikite tai, jei tikrai žinote kokių lokalių
jums reikės.
</p>

<pre caption="Aktyvuojame userlaocales USE vėliavėlę glibc bibliotekai">
# <i>mkdir -p /etc/portage</i>
# <i>echo "sys-libs/glibc userlocales" >> /etc/portage/package.use</i>
</pre>

<p>
Dabar nurodykite, kurias lokales jūs norite naudoti:
</p>

<pre caption="Atidarykite /etc/locales.build">
# <i>nano -w /etc/locales.build</i>
</pre>

<p>
Žemiau pateiktos lokalės yra pavyzdžiai kaip gauti anglų (Jungtinių Amerikos
Valstijų) ir vokiečių (Vokietijos) kalbų palaikymą su įvairiais simbolių
formatais (tokiais kaip UTF-8)
</p>

<pre caption="Nurodyme savo lokales">
en_US/ISO-8859-1
en_US.UTF-8/UTF-8
de_DE/ISO-8859-1
de_DE@euro/ISO-8859-15
</pre>

<p>
Dabar pereikime prie skyriaus <uri link="?part=1&amp;chap=7">Konfigūruojame
branduolį</uri>.
</p>

</body>
</subsection>
</section>
</sections>
