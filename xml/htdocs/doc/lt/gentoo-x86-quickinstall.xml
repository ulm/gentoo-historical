<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/lt/gentoo-x86-quickinstall.xml,v 1.1 2007/07/17 16:57:30 neysx Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/lt/gentoo-x86-quickinstall.xml" lang="lt">
<title>„Gentoo Linux“ x86 greitojo diegimo vadovas</title>

<author title="Autorius">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>
<author title="Autorius">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Autorius">Steven Wagner</author>
<author title="Vertėjas">
  <mail link="e.liubarskij@gmail.com">Ernestas Liubarskij</mail>
</author>

<abstract>
Greitojo diegimo vadove glaustai aprašomas „Gentoo“ diegimo procesas. Jo
paskirtis - leisti naudotojams labai greitai atlikti stage3 diegimą. Naudotojai
turėtų jau turėti ankstesnės patirties „Gentoo Linux“ diegime, jei nori sekti
šiuo vadovu.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>19</version>
<date>2007-06-02</date>

<chapter>
<title>Įvadas</title>
<section>
<body>

<p>
Šiame vadove yra visos komandos, kurias turėtumėte naudoti stage3 „Gentoo“
diegimo užbaigimui. Stage3 ir „Portage“ momentinių kopijų atsisiuntimui jums
reikės veikiančio internetinio ryšio.
</p>

<p>
Laikas, per kurį įvykdoma komanda, kurios vykdymui reikia daugiau nei kelių
sekundžių, išvedamas po kiekvienos tokios komandos. Komandų vykdymo laikas
buvo apskaičiuotas AMD 2000 1.66 Ghz kompiuteriu su 512 MB laisvosios kreipties
atmintine (RAM) ir dviem prijungtais prie aparatinio valdiklio SATA diskais.
</p>

<pre caption="Kompiuterio specifikacijos patikrinimas">
<comment>(Ši specifikacija ir laiko apskaitos informacija turėtų padėti jums
nustatyti apytikrį apskaičiavimą laiko, reikiamo diegimo užbaigimui)</comment>

# <i>grep bogo /proc/cpuinfo</i>
bogomips       : 3337.81

# <i>hdparm -tT /dev/sda</i>
/dev/sda:
 Timing cached reads:   1100 MB in  2.00 seconds = 549.97 MB/sec
 Timing buffered disk reads:  224 MB in  3.01 seconds =  74.36 MB/sec

# <i>grep MemTotal /proc/meminfo</i>
MemTotal:       509248 kB
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Greitojo diegimo vadovas</title>
<section>
<title>Diegimo laikmenos</title>
<body>

<p>
Atsisiųskite CD iš vieno iš mūsų <uri
link="/main/en/mirrors.xml">atvaizdų</uri>. Minimalaus CD ISO galite rasti
<path>releases/x86/&lt;laida&gt;/installcd</path>, o LiveCD ISO -
<path>releases/x86/&lt;laida&gt;/livecd</path>. <e>Minimalus</e> diegimo CD
tinkamas tik internetiniam diegimui. Diegimui be interneto sujungimo atlikti,
kaip dokumentuota <uri link="/doc/en/handbook/2007.0/handbook-x86.xml">2007.0
x86 diegimo vadove</uri>, galite naudoti <e>LiveCD</e>. Rekomenduojamas yra
minimalus CD.
</p>

<p>
<uri link="/doc/en/faq.xml#isoburning">Įrašykite</uri> CD ir paleiskite jį.
</p>

</body>
</section>
<section>
<title>Kompaktinio disko paleidimas</title>
<body>

<p>
Paleidimo ekrane paspauskite <c>F2</c>, kad sužinotumėte, kokios egzistuoja
parinktys. Galite paleisti arba <c>gentoo</c>, arba <c>gentoo-nofb</c>,
pastarasis pasyvina kadrų buferį (framebuffer). Jei paleidote LiveCD,
nepamirškite pridėti <c>nox</c> parametro, kad neleistumėte pasileisti X
grafinei aplinkai. Keli parametrai leidžia aktyvinti arba pasyvinti kai kurias
funkcijas. Jei viskas vyks gerai, jūsų aparatinė įranga bus aptikta, ir visi
moduliai bus įkelti. Jeigu branduoliui nepavyksta tinkamai pasileisti, arba jei
paleidimo procedūros metu įvyksta jūsų kompiuterio strigtis, jums gali tekti
išbandyti įvairias konfigūracijas. Saugiausias būdas turbūt yra naudoti
<c>nodetect</c> parametrą ir tuomet tiksliai užkrauti reikiamus modulius.
</p>

<pre caption="Minimalaus CD paleidimas">
Gentoo Linux Installation LiveCD                     http://www.gentoo.org
Enter to Boot; F1 for kernels  F2 for options.
boot: <i>gentoo-nofb</i>
  <comment>(arba jei kiltų problemų)</comment>
boot: <i>gentoo-nofb nodetect</i>
</pre>

</body>
</section>
<section>
<title>Nebūtina: modulių įkėlimas</title>
<body>

<p>
Jeigu naudojote <c>nodetect</c> parametrą, vos pasileidus operacinei sistemai
įkelkite reikiamus modulius. Jums reikia aktyvinti darbą tinkle ir turėti
prieigą prie diskų. Komanda <c>lspci</c> gali padėti nustatyti jūsų aparatinę
įrangą.
</p>

<pre caption="Reikiamų modulių įkėlimas">
livecd root # <i>lspci</i>
<comment>(Reikiamų modulių nustatymui naudokitės lspci išvediniu)</comment>

<comment>(Tai yra pavyzdys, pritaikykite jį prie savo įrangos)</comment>
livecd root # <i>modprobe 3w-9xxx</i>
livecd root # <i>modprobe r8169</i>
</pre>

</body>
</section>
<section>
<title>Tinklo konfigūracija</title>
<body>

<p>
Jei jūsų tinklas dar neveikia, jo konfigūravimui galite naudoti
<c>net-setup</c>. Prieš konfigūravimą jums gali prireikti įkelti savo tinklo
plokštės palaikymą naudojantis <c>modprobe</c> komanda. Jei turite ADSL,
naudokite <c>pppoe-setup</c> ir <c>pppoe-start</c>. PPTP palaikymui pirmiausia
redaguokite <path>/etc/ppp/chap-secrets</path> ir
<path>/etc/ppp/options.pptp</path>, o tuomet naudokite komandą <c>pptp
&lt;serveris&nbsp;ip&gt;</c>.
</p>

<p>
Belaidei priegai naudokite <c>iwconfig</c>, kad nustatytumėte belaidžio ryšio
parametrus ir tuomet arba vėl naudokite <c>net-setup</c>, arba rankiniu būdu
įvykdykite <c>ifconfig</c>, <c>dhcpcd</c> ir/arba <c>route</c>.
</p>

<p>
Jei esate už įgaliotojo serverio (proxy), nepamirškite inicijuoti savo sistemos
naudodami <c>export http_proxy</c>, <c>ftp_proxy</c> ir <c>RSYNC_PROXY</c>.
</p>

<pre caption="Tinklo konfigūravimas valdomuoju būdu">
livecd root # <i>net-setup eth0</i>
</pre>

<p>
Antraip, jūs galite pradėti darbą tinkle rankiniu būdu. Šiame pavyzdyje
jūsų kompiuteriui priskiriamas IP adresas 192.168.1.10 ir kaip kelvedis
(router) bei vardų serveris (name server) apibrėžiamas 192.168.1.1 adresas.
</p>

<pre caption="Tinklo konfigūravimas rankiniu būdu">
livecd root # <i>ifconfig eth0 192.168.1.10/24</i>
livecd root # <i>route add default gw 192.168.1.1</i>
livecd root # <i>echo nameserver 192.168.1.1 &gt; /etc/resolv.conf</i>
</pre>

<p>
Diegimo kompaktinis diskas leidžia jums paleisti <c>sshd</c> serverį, pridėti
naudotojų, paleisti <c>irssi</c> (komandinės eilutės pokalbių programa) bei
naršyti žiniatinklį naudojantis <c>lynx</c> arba <c>links</c>.
</p>

</body>
</section>
<section>
<title>Nebūtina: prisijungimas prie naujojo jūsų kompiuterio per ssh</title>
<body>

<p>
Įdomiausia savybė, žinoma, yra <c>sshd</c>. Jūs galite jį paleisti ir tuomet
prisijungti iš kito kompiuterio ir iškirpti bei įdėti komandas iš šio vadovo.
</p>

<pre caption="sshd paleidimas">
livecd root # <i>time /etc/init.d/sshd start</i>
 * Generating hostkey ...
<comment>(sshd generuoja raktą ir išveda daugiau informacijos)</comment>
 * starting sshd ...                            [ok]

real   0m13.688s
user   0m9.420s
sys    0m0.090s
</pre>

<p>
Dabar nustatykite LiveCD pagrindinio naudotojo (root) slaptažodį, kad
galėtumėte prisijungti iš kito kompiuterio. Atminkite, kad leidimas
pagrindiniam naudotojui (root) prisijungti per ssh įprastomis aplinkybėmis nėra
rekomenduojamas. Jei jūs nepasitikite savo vietiniu tinklu, naudokite ilgą ir
sudėtingą slaptažodį, jūs turėtumėte jį naudoti tik vieną kartą, kadangi jis
pradings po pirmojo sistemos įkėlimo iš naujo.
</p>

<pre caption="Pagrindinio (root) naudotojo slaptažodžio nustatymas">
livecd root # <i>passwd</i>
New UNIX password: <comment>įveskite_slaptažodį</comment>
Retype new UNIX password: <comment>įveskite_slaptažodį</comment>
passwd: password updated successfully
</pre>

<p>
Dabar kitame kompiuteryje galite paleisti terminalą ir prisijungti prie jūsų
naujojo kompiuterio, kitame lange sekti tolesnius šio vadovo nurodymis ir
iškirpti bei įdėti komandas.
</p>

<pre caption="Prisijungimas prie naujojo kompiuterio iš kito PK">
<comment>(Naudokite savo naujojo kompiuterio IP adresą)</comment>
$ <i>ssh root@192.168.1.10</i>
The authenticity of host '192.168.1.10 (192.168.1.10)' can't be established.
RSA key fingerprint is 96:e7:2d:12:ac:9c:b0:94:90:9f:40:89:b0:45:26:8f.
Are you sure you want to continue connecting (yes/no)? <i>yes</i>
Warning: Permanently added '192.168.1.10' (RSA) to the list of known hosts.
Password: <comment>įveskite_slaptažodį</comment>
</pre>

</body>
</section>
<section>
<title>Diskų paruošimas</title>
<body>

<p>
Skaidinių išdėstymo (partition layout) sukūrimui naudokite <c>fdisk</c> arba
<c>cfdisk</c>. Mažiausiai reikės keitinių (swap) skaidinio (82 tipas) ir
vieno „Linux“ skaidinio (83 tipas). Šiuo scenarijumi sukuriamas
<path>/boot</path>, keitinių ir pagrindinis skaidinys, kaip naudojama mūsų
vadove. Įrenginys tikriausiai bus <path>/dev/sda</path> SATA arba SCSI diskui
arba <path>/dev/hda</path> IDE diskui.
</p>

<pre caption="Skaidinių sukūrimas">
livecd ~ # <i>fdisk /dev/sda</i>

<comment>(Likusioje vadovo dalyje naudojama ši skaidinių schema)</comment>
livecd ~ # <i>fdisk -l /dev/sda</i>

Disk /dev/sda: 599.9 GB, 599978409984 bytes
255 heads, 63 sectors/track, 72943 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1               1          12       96358+  83  Linux
/dev/sda2              13         110      787185   82  Linux swap / Solaris
/dev/sda3             111       72943   585031072+  83  Linux
</pre>

<p>
Rinkmenų išdėstymo sistemų savo „Linux“ skaidiniuose sukūrimui naudokite
<c>mke2fs</c>, <c>mke2fs -j</c>, <c>mkreiserfs</c>, <c>mkfs.xfs</c> ir
<c>mkfs.jfs</c>. Inicijuokite keitinių skaidinį naudodamiesi <c>mkswap</c> ir
<c>swapon</c>.
</p>

<pre caption="Rinkmenų išdėstymo sistemų sukūrimas ir keitinių aktyvavimas">
<comment>(ext2 yra viskas, ko jums reikia /boot skaidinyje)</comment>
livecd ~ # <i>mke2fs /dev/sda1</i>

<comment>(Pagrindiniame skaidinyje naudokime ext3)</comment>
livecd ~ # <i>mke2fs -j /dev/sda3</i>

<comment>(Keitinių sukūrimas ir aktyvavimas)</comment>
livecd ~ # <i>mkswap /dev/sda2 &amp;&amp; swapon /dev/sda2</i>
</pre>

<p>
Prijunkite naujai sukurtas rinkmenų išdėstymo sistemas prie
<path>/mnt/gentoo</path>. Sukurkite katalogus kitiems jungties taškams
(pavyzdžiui, <path>/mnt/gentoo/boot</path>), jei jums jų reikia ir juos taip
pat prijunkite.
</p>

<pre caption="Rinkmenų išdėstymo sistemų prijungimas">
livecd ~ # <i>mount /dev/sda3 /mnt/gentoo</i>
livecd ~ # <i>mkdir /mnt/gentoo/boot</i>
livecd ~ # <i>mount /dev/sda1 /mnt/gentoo/boot</i>
</pre>

</body>
</section>
<section>
<title>Stage archyvo diegimas</title>
<body>

<p>
Pirmiausia įsitikinkite, kad laikas ir data yra teisingai nustatyti naudojantis
<c>date MMDDhhmmYYYY</c> komanda (MM - mėnuo, DD - diena, hh - valandos, mm -
minutės, YYYY - metai). Naudokite UTC laiką.
</p>

<pre caption="Datos ir UTC laiko nustatymas">
<comment>(Patikrinkite laikrodį)</comment>
livecd ~ # <i>date</i>
Mon Mar  6 00:14:13 UTC 2006

<comment>(Jei reikia, nustatykite dabartinę datą ir laiką)</comment>
livecd ~ # <i>date 030600162006</i> <comment>(MMDDhhmmYYYY formatas)</comment>
Mon Mar  6 00:16:00 UTC 2006
</pre>

<p>
Tuomet atsisiųskite stage archyvą iš vieno mūsų <uri
link="/main/en/mirrors.xml">dubliuojamųjų tinklaviečių</uri>. Pereikite į
<path>/mnt/gentoo</path> ir išpakuokite stage archyvą naudodami komandą <c>tar
xjpf &lt;stage3 archyvas&gt;</c>.
</p>

<pre caption="stage3 archyvo atsiuntimas">
livecd ~ # <i>cd /mnt/gentoo</i>
livecd gentoo # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
<comment>(Pasirinkite dubliuojamąją tinklavietę, pereikite į
releases/x86/current/stages katalogą, pasirinkite savo pasirinktą stage3
archyvą, tikriausiai i686 stage3 ir paspauskite D, kad jį
atsiųstumėte)</comment>

<comment>(<b>Arba</b> atsiųskite jį tiesiogiai, naudodami wget ir nesirinkdami artimesnės dubliuojamosios tinklavietės)</comment>
livecd ~ # <i>cd /mnt/gentoo</i>
livecd gentoo # <i>wget ftp://gentoo.osuosl.org/pub/gentoo/releases/x86/current/stages/stage3-i686*tar.bz2</i>
</pre>

<pre caption="stage3 archyvo išpakavimas">
livecd gentoo # <i>time tar xjpf stage3*</i>

real  1m13.157s
user  1m2.920s
sys   0m7.230s
</pre>

<p>
Įdiekite naujausią „Portage“ momentinę kopiją. Elkitės kaip ir su stage3
archyvu: pasirinkite artimiausią dubliuojamąją tinklavietę is mūsų <uri
link="/main/en/mirrors.xml">sąrašo</uri>, atsiųskite naujausią momentinę
kopiją ir išpakuokite ją.

Install the latest Portage snapshot. Proceed as for the stage3 archive: choose
a nearby mirror from our <uri link="/main/en/mirrors.xml">list</uri>, download
the latest snapshot and unpack it.
</p>

<pre caption="Naujausios „Portage“ momentinės kopijos atsiuntimas">
livecd gentoo # <i>cd /mnt/gentoo/usr</i>
livecd usr # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
<comment>(Pasirinkite dubliuojamąją tinklavietę, pereikite prie snapshots/
katalogo, pažymėkite <b>portage-latest.tar.bz2</b> ir paspauskite D, kad
atsisiųstumėte)</comment>

<comment>(<b>Arba</b> atsiųskite jį tiesiogiai, naudodami wget ir nesirinkdami artimesnės dubliuojamosios tinklavietės)</comment>
livecd gentoo # <i>cd /mnt/gentoo/usr</i>
livecd usr # <i>wget http://gentoo.osuosl.org/snapshots/portage-latest.tar.bz2</i>
</pre>

<pre caption="„Portage“ momentinės kopijos išpakavimas">
livecd usr # <i>time tar xjf portage*</i>

real  0m51.523s
user  0m28.680s
sys   0m12.840s
</pre>

</body>
</section>
<section>
<title>Šakninio katalogo pakeitimas</title>
<body>

<p>
Prijunkite <path>/proc</path> rinkmenų išdėstymo sistemą, nukopijuokite
<path>/etc/resolv.conf</path> rinkmeną, o tuomet pakeiskite šakninį katalogą
į jūsų „Gentoo“ aplinkos.
</p>

<pre caption="Šakninio katalogo pakeitimas">
livecd usr # <i>cd /</i>
livecd / # <i>mount -t proc proc /mnt/gentoo/proc</i>
livecd / # <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/</i>
livecd / # <i>chroot /mnt/gentoo /bin/bash</i>
livecd / # <i>env-update &amp;&amp; source /etc/profile</i>
>>> Regenerating /etc/ld.so.cache...
</pre>

</body>
</section>
<section>
<title>Nustatykite savo laiko juostą</title>
<body>

<p>
Nustatykite savo laiko juostą naudodami reikiamą įrašą iš
<path>/usr/share/zoneinfo</path>.
</p>

<pre caption="Laiko juostos nustatymas">
livecd / # <i>ls /usr/share/zoneinfo</i>
<comment>(Kaip pavyzdį naudojame Briuselį)</comment>
livecd / # <i>cp /usr/share/zoneinfo/Europe/Brussels /etc/localtime</i>

livecd / # <i>date</i>
Wed Mar  8 00:46:05 CET 2006
</pre>

</body>
</section>
<section>
<title>Nustatykite savo kompiuterio ir srities vardus</title>
<body>

<p>
Nustatykite savo kompiuterio vardą rinkmenose <path>/etc/conf.d/hostname</path>
ir <path>/etc/hosts</path>. Pavyzdyje mes naudojame <c>mybox</c> kompiuterio
vardą ir <c>at.myplace</c> srities vardą. Galite redaguoti konfigūracines
rinkmenas <c>nano</c> tekstų redaktoriumi arba naudoti šias komandas:
</p>

<pre caption="Kompiuterio ir srities vardų nustatymas">
livecd / # <i>cd /etc</i>
livecd etc # <i>echo "127.0.0.1 mybox.at.myplace mybox localhost" > hosts</i>
livecd etc # <i>sed -i -e 's/HOSTNAME.*/HOSTNAME="mybox"/' conf.d/hostname</i>
<comment>(Use defined host name and check)</comment>
livecd etc # <i>hostname mybox</i>
livecd etc # <i>hostname -f</i>
mybox.at.myplace
</pre>

</body>
</section>
<section>
<title>Branduolio konfigūravimas</title>
<body>

<p>
Įdiekite branduolio pirminį tekstą (paprastai <c>gentoo-sources</c>),
sukonfigūruokite, sukompiliuokite jį ir nukopijuokite
<path>arch/i386/boot/bzImage</path> rinkmeną į <path>/boot</path>.
</p>

<pre caption="Įdiekite branduolio pirminį tekstą, sukompiliuokite jį ir įdiekite branduolį">
livecd etc # <i>time emerge gentoo-sources</i>

real  2m51.435s
user  0m58.220s
sys   0m29.890s
livecd etc # <i>cd /usr/src/linux</i>
livecd linux # <i>make menuconfig</i>
<comment>(Sukonfigūruokite savo branduolį)</comment>
livecd linux # <i>time make -j2</i>

<comment>(Laikas labai priklauso jūsų pažymėtų parinkčių)</comment>
real  3m51.962s
user  3m27.060s
sys   0m24.310s

livecd linux # <i>make modules_install</i>
livecd linux # <i>cp arch/i386/boot/bzImage /boot/kernel</i>
</pre>

</body>
</section>
<section>
<title>Sistemos konfigūravimas</title>
<body>

<p>
Paredaguokite savo <path>/etc/fstab</path> ir pakeiskite <c>BOOT</c>,
<c>ROOT</c> ir <c>SWAP</c> tikrais skirsnių pavadinimais. Nepamirškite
patikrinti, ar rinkmenų išdėstymo sistemos atitinka jūsiškes.
</p>

<pre caption="fstab pavyzdys">
livecd linux # <i>cd /etc</i>
livecd etc # <i>nano -w fstab</i>
/dev/<i>sda1</i>   /boot     ext2    noauto,noatime     1 2
/dev/<i>sda3</i>   /         ext3    noatime            0 1
/dev/<i>sda2</i>   none      swap    sw                 0 0
</pre>

<p>
Sukonfigūruokite savo tinklą rinkmenoje <path>/etc/conf.d/net</path>. Pridėkite
<c>net.eth0</c> paleidimo scenarijų į numatytąjį paleidžiamąjį lygį. Jei turite
kelias tinklo plokštes, sukurkite joms nuorodas į <c>net.eth0</c> paleidimo
scenarijų ir pridėkite juos į numatytąjį paleidžiamąjį lygį. Redaguokite
<path>/etc/conf.d/net</path> tekstų redaktoriumi <c>nano</c> arba naudokite
šias komandas:
</p>

<pre caption="Tinklo konfigūravimas">
livecd etc # <i>cd conf.d</i>
livecd conf.d # <i>echo 'config_eth0=( "192.168.1.10/24" )' >> net</i>
livecd conf.d # <i>echo 'routes_eth0=( "default via 192.168.1.1" )' >> net</i>
livecd conf.d # <i>rc-update add net.eth0 default</i>
<comment>(Jei sukompiliavote savo tinklo kortos tvarkyklę kaip modulį,
pridėkite jį į /etc/modules.autoload.d/kernel-2.6)</comment>
livecd conf.d # <i>echo r8169 >> /etc/modules.autoload.d/kernel-2.6</i>
<comment>(Jeigu norite prisijungti per ssh, kai persikrausite į naują sistemą:)</comment>
livecd conf.d # <i>rc-update add sshd default</i>
</pre>

<note>
Įdiekite <c>pcmciautils</c>, jei jums reikia PCMCIA plokščių palaikymo.
</note>

<p>
Nustatykite pagrindinio (root) naudotojo slaptažodį, naudodami <c>passwd</c>.
</p>

<pre caption="Pagrindinio (root) naudotojo slaptažodžio nustatymas">
livecd conf.d # <i>passwd</i>
New UNIX password: <comment>įveskite_slaptažodį</comment>
Retype new UNIX password: <comment>įveskite_slaptažodį_dar_kartą</comment>
passwd: password updated successfully
</pre>

<p>
Paredaguokite <path>/etc/conf.d/clock</path>, kad apibrėžtumėte laiko juostą,
kurią anksčiau naudojote.
</p>

<pre caption="/etc/conf.d/clock redagavimas">
livecd conf.d # <i>nano -w /etc/conf.d/clock</i>
TIMEZONE="Europe/Brussels"
</pre>

<p>
Patikrinkite sistemos sąranką rinkmenose <path>/etc/rc.conf</path>,
<path>/etc/conf.d/rc</path>, <path>/etc/conf.d/keymaps</path> ir paredaguokite
bet kurią iš šių rinkmenų, jei reikia.
</p>

<pre caption="Nebūtina: paredaguokite kelias konfigūracines rinkmenas">
livecd conf.d # <i>nano -w /etc/rc.conf</i>
livecd conf.d # <i>nano -w /etc/conf.d/rc</i>
livecd conf.d # <i>nano -w /etc/conf.d/keymaps</i>
</pre>

</body>
</section>
<section>
<title>Sistemos įrankių diegimas</title>
<body>

<p>
Įdiekite sistemos žurnalizavimo įrankį, tokį kaip <c>syslog-ng</c>, ir cron
tarnybą, tokią kaip <c>vixie-cron</c>, ir pridėkite juos į numatytąjį
paleidžiamąjį lygį.
</p>

<note>
Cron tarnybos priklauso nuo MTA. <c>mail-mta/ssmtp</c> bus įdiegtas kaip
priklausomybė. Jei norite sudėtingesnio MTA, galbūt norėsite jį įsidiegti
dabar. Jei skubate, leiskite ssmtp būti įdiegtam ir pašalinkite jį vėliau, kai
įdiegsite savo norimą MTA.
</note>

<pre caption="Sistemos žurnalizavimo įrankio ir cron tarnybos diegimas">
livecd conf.d # <i>time emerge syslog-ng vixie-cron</i>

real  1m52.699s
user  1m1.630s
sys   0m35.220s
livecd conf.d # <i>rc-update add syslog-ng default</i>
livecd conf.d # <i>rc-update add vixie-cron default</i>
</pre>

<p>
Įdiekite reikiamus rinkmenų išdėstymo sistemų įrankius (<c>xfsprogs</c>,
<c>reiserfsprogs</c> ar <c>jfsutils</c>) ir tinklo įrankius (<c>dhcpcd</c> ar
<c>ppp</c>), jei kurių nors jums reikia.
</p>

<pre caption="Jei reikia, įdiekite papildomus įrankius">
livecd conf.d # <i>emerge xfsprogs</i>       <comment>(Jei naudojate XFS rinkmenų išdėstymo sistemą)</comment>
livecd conf.d # <i>emerge jfsutils</i>       <comment>(Jei naudojate JFS rinkmenų išdėstymo sistemą)</comment>
livecd conf.d # <i>emerge reiserfsprogs</i>  <comment>(Jei naudojate Reiser rinkmenų išdėstymo sistemą)</comment>
livecd conf.d # <i>emerge dhcpcd</i>         <comment>(Jei jums reikia DHCP kliento)</comment>
livecd conf.d # <i>emerge ppp</i>            <comment>(Jei jums reikia PPPoE ADSL ryšio)</comment>
</pre>

</body>
</section>
<section>
<title>Įkrovos tvarkyklės konfigūravimas</title>
<body>

<p>
Įdiekite <c>grub</c> arba <c>lilo</c>. Sukonfigūruokite
<path>/boot/grub/grub.conf</path> arba <path>/etc/lilo.conf</path> ir įdiekite
įkrovos tvarkyklę.
</p>

<p>
<b>1. grub naudojimas</b>
</p>

<pre caption="Įdiekite grub ir paredaguokite jo konfigūracinę rinkmeną">
livecd conf.d # <i>time emerge grub</i>

real  1m8.634s
user  0m39.460s
sys   0m15.280s
livecd conf.d # <i>nano -w /boot/grub/grub.conf</i>
</pre>

<pre caption="grub.conf pavyzdys">
default 0
timeout 10

title=Gentoo
root (hd0,0)
kernel /boot/kernel root=/dev/sda3
</pre>

<pre caption="grub diegimas">
livecd conf.d # <i>grub</i>
Probing devices to guess BIOS drives. This may take a long time.

grub> <i>root (hd0,0)</i>
 Filesystem type is ext2fs, partition type 0x83

grub> <i>setup (hd0)</i>
 Checking if "/boot/grub/stage1" exists... yes
 Checking if "/boot/grub/stage2" exists... yes
 Checking if "/boot/grub/e2fs_stage1_5" exists... yes
 Running "embed /boot/grub/e2fs_stage1_5 (hd0)"...  16 sectors are embedded.
succeeded
 Running "install /boot/grub/stage1 (hd0) (hd0)1+16 p (hd0,0)/boot/grub/stage2 /boot/
grub/menu.lst"... succeeded
Done.

grub> <i>quit</i>
</pre>

<p>
Dabar pereikite prie <uri link="#reboot">perkrovimo dalies</uri>.
</p>

<p>
<b>2. lilo naudojimas</b>
</p>

<pre caption="Įdiekite lilo ir paredaguokite jo konfigūracinę rinkmeną">
livecd conf.d # <i>time emerge lilo</i>

real  0m47.016s
user  0m22.770s
sys   0m5.980s
livecd conf.d # <i>nano -w /etc/lilo.conf</i>
</pre>

<pre caption="lilo.conf pavyzdys">
boot=/dev/sda
prompt
timeout=50
default=gentoo

image=/boot/kernel
  label=Gentoo
  read-only
  root=/dev/sda3
</pre>

<pre caption="lilo diegimas">
livecd conf.d # <i>lilo</i>
Added Gentoo *
</pre>

</body>
</section>
<section id="reboot">
<title>Perkrovimas</title>
<body>

<p>
Išeikite iš pakeisto šakninio katalogo aplinkos, atjunkite visas rinkmenų
išdėstymo sistemas ir perkraukite kompiuterį:
</p>

<pre caption="Perkrovimas">
livecd conf.d # <i>exit</i>
livecd / # <i>umount /mnt/gentoo/proc /mnt/gentoo/boot /mnt/gentoo</i>
livecd / # <i>reboot</i>
<comment>(Nepamirškite išimti CD)</comment>
</pre>

</body>
</section>
<section id="after-reboot">
<title>Diegimo užbaigimas</title>
<body>

<note>
<b>Visas</b> praėjęs laikas nuo įkrovos raginimo parodymo minimaliame CD iki
prisijungimo raginimo po perkrovimo mūsų bandomajame kompiuteryje buvo
<b>00:42:31</b>. Taip, mačiau negu viena valanda! Atkreipkite dėmesį, kad į šį
laiką įeina ir stage3, „Portage“ momentinės kopijos ir kelių paketų atsiuntimo
laikas bei branduolio konfigūravimui panaudotas laikas.
</note>

<p>
Prisijunkite kaip pagrindinis naudotojas <c>root</c>, tuomet pridėkite vieną ar
daugiau naudotojų kasdieniam naudojimui, naudodami <c>useradd</c>.
</p>

<pre caption="Prisijunkite prie savo naujos sistemos iš kito kompiuterio">
<comment>(Išvalykite savo known_hosts rinkmeną, nes jūsų nauja sistema
sugeneravo naują galutinį raktą)</comment>
$ <i>nano -w ~/.ssh/known_hosts</i>
<comment>(Raskite savo naujo kompiuterio IP adresą ir ištrinkite eilutę, tada
išsaugokite rinkmeną ir užverkite nano)</comment>

<comment>(Naudokite savo naujos sistemos IP adresą)</comment>
$ <i>ssh root@192.168.1.10</i>
The authenticity of host '192.168.1.10 (192.168.1.10)' can't be established.
RSA key fingerprint is 96:e7:2d:12:ac:9c:b0:94:90:9f:40:89:b0:45:26:8f.
Are you sure you want to continue connecting (yes/no)? <i>yes</i>
Warning: Permanently added '192.168.1.10' (RSA) to the list of known hosts.
Password: <comment>įveskite_slaptažodį</comment>
</pre>

<pre caption="Pridėkite naują naudotoją">
mybox ~ # <i>adduser -g users -G lp,wheel,audio,cdrom,portage,cron -m jonas</i>
mybox ~ # <i>passwd jonas</i>
New UNIX password: <comment>Nustatykite Jono slaptažodį</comment>
Retype new UNIX password: <comment>Įveskite Jono slaptažodį dar kartą</comment>
passwd: password updated successfully
</pre>

</body>
</section>
<section>
<title>Paskutiniai konfigūravimai</title>
<body>

<p>
Pradėkite pasirinkdami artimiausias dubliuojamąsias tinklavietes apibrėždami
<c>SYNC</c> arba <c>GENTOO_MIRRORS</c> kintamuosius <path>/etc/make.conf</path>
rinkmenoje ar naudodami <c>mirrorselect</c>. Dabar galite apibrėžti ir vienu
metu vykdomų kompiliavimo procesų skaičių.
</p>

<pre caption="Naudokite mirrorselect ir nustatykite MAKEOPTS">
mybox ~ # <i>emerge mirrorselect</i>
mybox ~ # <i>mirrorselect -i -o >> /etc/make.conf</i>
mybox ~ # <i>mirrorselect -i -r -o >> /etc/make.conf</i>
<comment>(Dažniausia (procesorių skaičius + 1) yra gera vertė)</comment>
mybox ~ # <i>echo 'MAKEOPTS="-j2"' >> /etc/make.conf</i>
</pre>

<p>
Dabar geras metas aktyvinti ar pasyvinti kai kurias USE vėliavėles. Įvykdykite
<c>emerge -vpe world</c>, kad peržvelgtumėte visus šiuo metu įdiegtus paketus
ir jų aktyvintas bei pasyvintas USE vėliavėles. Paredaguokite
<path>/etc/make.conf</path> arba naudokite šią komandą, kad apibrėžtumėte USE
kintamąjį:
</p>

<pre caption="Naudojamų USE vėliavėlių peržvelgimas ir kai kurių aktyvinimas ar pasyvinimas">
mybox ~ # <i>emerge -vpe world</i>
<comment>(„Portage“ parodo paketus ir jų USE vėliavėles, kaip pavyzdį
pasyvinkime ipv6 ir fortran bei aktyvinkime unicode)</comment>
mybox ~ # <i>echo 'USE="nptl nptlonly -ipv6 -fortran unicode"' >> /etc/make.conf</i>
</pre>

<p>
Dabartinės glibc versijos naudoja <path>/etc/locale.gen</path> lokalių
nuostatoms apibrėžti.
</p>

<pre caption="Lokalių nustatymas">
mybox ~ # <i>cd /etc</i>
mybox etc # <i>nano -w locale.gen</i>
</pre>

<p>
Paskutinis, bet ne mažiau svarbus, dalykas yra <c>CFLAGS</c> kintamojo
nustatymas rinkmenoje <path>/etc/make.conf</path>, kad kodas būtų optimizuotas
jūsų specifiniams poreikiams. Prašome pastebėti, kad ilgo vėliavėlių sąrašo
naudojimas labai reitai yra reikalingas ir netgi gali privesti prie sugadintos
sistemos. Rekomenduojama nurodyti procesoriaus tipą <c>march</c> parinktyje ir
apsiriboti <c>-O2 -pipe</c>.
</p>

<p>
Galite norėti ir pereiti prie <b>~x86</b>. Turėtumėte tai daryti tik jei galite
susitaikyti su keistais sugadintais paketais. Jei jūs geriau norėtumėte
palaikyti stabilią sistemą, nepridėkite <c>ACCEPT_KEYWORDS</c> kintamojo. Gera
idėja yra ir <c>FEATURES="parallel-fetch ccache"</c> pridėjimas.
</p>

<pre caption="Paskutinis make.conf redagavimas">
mybox etc # <i>nano -w make.conf</i>
<comment>(Nustatykite -march į savo procesoriaus tipą CFLAGS kintamajame)</comment>
CFLAGS="-O2 -march=<i>athlon-xp</i> -pipe"
<comment>(Pridėkite šią eilutę)</comment>
FEATURES="parallel-fetch ccache"
<comment>(Pridėkite, tik jei žinote, ką darote)</comment>
ACCEPT_KEYWORDS="~x86"
</pre>

<p>
Jūs galite norėti perkompiliuoti visą sistemą du kartus, kad išgautumėte visą
naudą iš jūsų paskutinių konfigūracijos pakeitimų. Tai užimtų daug laiko, o
spartos padidėjimas būtų minimalus. Galite leisti savo sistemai optimizuotis
palaipsniui, kai išleidžiamos naujos paketų versijos. Tačiau perkompiliavimas
visgi yra gera idėja sistemos darnos palaikymo požiūriu. Skaitykite
pasvarstymus apie nuosekliai sukompiliuotų „system“ ir „world“ naudą <uri
link="/doc/en/gcc-upgrading.xml">„Gentoo“ GCC atnaujinimo vadove</uri>.
</p>

<p>
Vien paketų, jau atnaujintų nuo išleidimo ar paveiktų jūsų naujų USE
vėliavėlių, perkompiliavimas užims pakankamai daug laiko. Jums gali tekti
pašalinti paketus, kurie blokuoja naujinimą. Ieškokite "[blocks
<brite>B</brite>     ]" komandos <c>emerge -vpuD --newuse world</c> išvestyje
ir naudodami <c>emerge -C</c> pašalinkite juos.
</p>

<pre caption="Atnaujinkite savo paketus">
<comment>(Įdiekite ccache)</comment>
mybox etc # <i>emerge ccache</i>

<comment>(Atminkite, kad perėjimas prie ~x86 lemia daugybės paketų atnaujinimą)</comment>
mybox etc # <i>emerge -vpuD --newuse world</i>
<comment>(Gerai peržiūrėkite paketų sąrašą ir jų USE vėliavės, pašalinkite
blokuojančius paketus, jei tokių yra, ir pradėkite ilgai trunkantį
procesą)</comment>
mybox etc # <i>time emerge -vuD --newuse world</i>
<comment>(Buvo perkompiliuoti 79 paketai)</comment>

real  180m13.276s
user  121m22.905s
sys   36m31.472s

<comment>(Perdiekite libtool, kad išvengtumėte tolimesnių potencialių problemų)</comment>
mybox etc # <i>emerge libtool</i>

<comment>(Atnaujinkite konfigūracines rinkmenas, įsitikinkite, kad jūs
<b>neleidžiate</b> etc-update atnaujinti failų, kuriuos jūs
redagavote)</comment>
mybox etc # <i>etc-update</i>

<comment>(Jeigu buvo atnaujintas perl, turėtumėte paleisti perl-cleaner scenarijų)</comment>
mybox etc # <i>time perl-cleaner all</i>
real  1m6.495s
user  0m42.699s
sys   0m10.641s

<comment>(Jei buvo svarbus python atnaujinimas, turėtumėte paleisti python-updater scenarijų)</comment>
mybox etc # <i>python-updater</i>
</pre>

</body>
</section>
<section>
<title>Ką daryti toliau</title>
<body>

<p>
Priklausomai nuo to, ką jūsų naujasis „Gentoo“ kompiuteris turėtų daryti,
tikriausiai norėsite įdiegti serverio programų ar darbastalio sistemą. Tik kaip
pavyzdys buvo išmatuotas <c>emerge gnome</c> ir <c>emerge kde</c> diegimų ~x86
sistemoje laikas. Abu buvo įdiegti nuo to paties pradinio taško.
</p>

<p>
Turėtumėte peržiūrėti mūsų <uri link="/doc/lt/">dokumentacijos sąrašą</uri>,
kad sužinotumėte kaip įdiegti ir susikonfigūruoti jūsų pasirinktą programą.
</p>

<impo>
Tai yra tik pavyzdys. Tai jokiu būdu nėra rekomenduojama sąranka.
</impo>

<pre caption="GNOME diegimas">
mybox etc # <i>emerge -vp gnome</i>
<comment>(Peržiūrėkite paketų ir jų USE vėliavėlių sąrašą, tuomet, jei reikia,
paredaguokite make.conf.</comment>
mybox etc # <i>nano -w /etc/make.conf</i>
<comment>Buvo apibrėžtos šios USE vėliavėlės)</comment>
USE="nptl nptlonly -ipv6 -fortran unicode svg hal dbus \
     -kde -qt3 -qt4 -arts -eds -esd gnome gstreamer gtk firefox"

mybox etc # <i>time emerge gnome</i>
<comment>(Buvo įdiegti 326 paketai)</comment>

real  520m44.532s
user  339m21.144s
sys   146m22.337s
</pre>

<pre caption="KDE diegimas">
mybox etc # <i>emerge -vp kde-meta</i>
<comment>(Peržiūrėkite paketų ir jų USE vėliavėlių sąrašą, tuomet, jei reikia,
paredaguokite make.conf.</comment>
mybox etc # <i>nano -w /etc/make.conf</i>
<comment>Buvo apibrėžtos šios USE vėliavėlės)</comment>
USE="nptl nptlonly -ipv6 -fortran unicode svg hal dbus \
     kde qt3 qt4 -arts -eds -esd -gnome -gstreamer -gtk -firefox"

mybox etc # <i>time emerge kde-meta</i>
<comment>(Buvo įdiegtas 391 paketas)</comment>

real  1171m25.318s
user  851m26.393s
sys   281m45.629s
</pre>

</body>
</section>
</chapter>
</guide>
