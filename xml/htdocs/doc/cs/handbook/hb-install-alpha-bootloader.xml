<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/cs/handbook/hb-install-alpha-bootloader.xml,v 1.2 2006/01/25 19:51:10 jkt Exp $ -->

<sections>

<version>2.2</version>
<date>2006-01-19</date>

<section>
<title>Vyberte si</title>
<subsection>
<title>Úvod</title>
<body>

<p>
Po kompilaci jádra, instalaci nezbytných systémových nástrojů a další
konfiguraci nastal nyní čas nainstalovat program, který po startu systému jádro
načítá, tzv. <e>bootloader (zavaděč)</e>.
</p>

<p>
Pro Linux/Alpha je k&nbsp;dispozici více bootloaderů. Neinstalujte je všechny,
vyberte si pouze jeden podporovaný - máte na výběr
z&nbsp;<uri link="#aboot">aBoot</uri> a <uri link="#milo">MILO</uri>.
</p>

</body>
</subsection>
</section>
<section id="aboot">
<title>Výchozí: použití aBootu</title>
<body>

<p>
Nejprve aboot do systému nainstalujte, jak jinak, než přes <c>emerge</c>:
</p>

<pre caption = "Instalace aboot">
# <i>emerge --usepkg aboot</i>
</pre>

<p>
V&nbsp;dalším krokem učiníte bootdisk bootovatelným, tj. nastavíte spouštění
<c>aboot</c> během bootovacího procesu. Dosáhnete toho jeho instalací na začátek
disku.
</p>

<pre caption = "Aby Váš disk bootoval...">
# <i>swriteboot -f3 /dev/sda /boot/bootlx</i>
# <i>abootconf /dev/sda 2</i>
</pre>

<note>
Používáte-li jiné rozdělení disku než popisujeme v&nbsp;této kapitole, budete
muset patřičně změnit příkazy. Přečtěte si prosím odpovídající manuálové stránky,
<c>man 8 swriteboot</c> a <c>man 8 abootconf</c>. Je-li Váš kořenový souborový
systém typu JFS, ujistěte se, že bude nejprve připojen v&nbsp;režimu pouze pro
čtení - přidejte jádru <c>ro</c> jako parametr.
</note>

<p>
Aby navíc Gentoo bootovalo automaticky, musíte nastavit konfigurační soubor
abootu a některé SRM proměnné. Můžete to zkusit z&nbsp;Linuxu, ale snáze toho
dosáhnete přímo ze&nbsp;SRM konzole.
</p>

<pre caption="Automatické bootování Gentoo">
# <i>echo '0:2/boot/vmlinux.gz root=/dev/sda2' &gt; /etc/aboot.conf</i>
# <i>cd /proc/srm_environment/named_variables</i>
# <i>echo -n 0 &gt; boot_osflags</i>
# <i>echo -n '' &gt; boot_file</i>
# <i>echo -n 'BOOT' &gt; auto_action</i>
# <i>echo -n 'dkc100' &gt; bootdef_dev</i>
<comment>(nahraďte dkc100 jménem svého bootovacího zařízení)</comment>
</pre>

<p>
Budete-li někdy v&nbsp;budoucnosti potřebovat přístup do SRM konzole (například
pro obnovu instalace, změnu některých proměnných nebo tak vůbec), zmáčkněte
CTRL+C pro přerušení automatického zavádění.
</p>

<p>
Pokud instalujete přes sériovou konzoli, nezapomeňte nastavit odpovídající
bootovací volbu v&nbsp;<path>aboot.conf</path>. Další informace viz
<path>/etc/aboot.conf.example</path>.
</p>

<p>
Aboot je nyní nakonfigurovaný a připraven k&nbsp;použití. Pokračujte
<uri link="#reboot">rebootem systému</uri>.
</p>

</body>
</section>
<section id="milo">
<title>Alternativní: použití MILO</title>
<body>

<p>
Před pokračováním byste se měli rozhodnout, jak budete MILO používat.
V&nbsp;této sekci budeme předpokládat, že chcete použít MILO bootovací disketu.
Hodláte-li bootovat z&nbsp;MS-DOS oddílu na disku, změňte příslušné příkazy.
</p>

<p>
Pro instalaci MILO použijeme příkaz <c>emerge</c>.
</p>

<pre caption = "Instalace MILO">
# <i>emerge --usepkg milo</i>
</pre>

<p>
Po instalaci najdete image MILO v&nbsp;adresáři <path>/opt/milo</path>.
Následující příkazy připraví bootovací disketu; nezapomeňte použít správný image
podle konkrétního systému.
</p>

<pre caption="Instalace MILO na disketu">
<comment>(nejdříve vložte prázdnou disketu)</comment>
# <i>fdformat /dev/fd0</i>
# <i>mformat a:</i>
# <i>mcopy /opt/milo/milo-2.2-18-gentoo-ruffian a:\milo</i>
# <i>mcopy /opt/milo/linload.exe a:\lilnload.exe</i>
<comment>(pouze máte-li Ruffian:</comment>
  # <i>mcopy /opt/milo/ldmilo.exe a:\ldmilo.exe</i>
<comment>)</comment>
# <i>echo -ne '\125\252' | dd of=/dev/fd0 bs=1 seek=510 count=2</i>
</pre>

<p>
Vaše MILO disketa nyní umí bootovat Gentoo Linux. Možná budete potřebovat
nastavit proměnné prostředí v&nbsp;ARCS firmwaru; vše je popsáno v&nbsp;<uri
link="http://tldp.org/HOWTO/MILO-HOWTO/">MILO-HOWTO</uri> spolu s&nbsp;příklady
nastavení na běžných systémech a použití příkazů v&nbsp;interaktivním režimu.
</p>

<p>
Pokud si nechcete přečíst
<uri link="http://tldp.org/HOWTO/MILO-HOWTO/">MILO-HOWTO</uri>, <e>neděláte</e>
dobře.
</p>

<p>
Nyní pokračujte <uri link="#reboot">restartem systému</uri>.
</p>

</body>
</section>
<section id="reboot">
<title>Restart systému</title>
<subsection>
<body>

<p>
Opusťte chrootované prostředí a odpojte všechny připojené oddíly. Pak zadejte
onen magický příkaz, na který jste tolik čekali: <c>reboot</c>.
</p>

<pre caption="Ukončení chrootu, odpojení všech oddílů a reboot">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/dev /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

<p>
Nezapomeňte vyjmout bootovací CD, nebo vám místo vašeho nového systému Gentoo
naběhne znovu jen CD.
</p>

<p>
Až se nově nainstalovaný systém Gentoo spustí, pokračujte <uri
link="?part=1&amp;chap=11">dokončením instalace</uri>.
</p>

</body>
</subsection>
</section>
</sections>
