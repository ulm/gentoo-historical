<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/fluxbox-config.xml,v 1.1 2005/04/30 11:41:41 cam Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fr/fluxbox-config.xml" lang="fr">

<title>Le guide de configuration de Fluxbox</title>

<author title="Auteur">
  <mail link="smith.jonathan@gmail.com">Jonathan Smith</mail>
</author>
<author title="Traducteur">
  <mail link="clement@varaldi.org">Clément Varaldi</mail>
</author>

<abstract>
Ce guide présente comment mettre en place le gestionnaire de fenêtres Fluxbox.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->
<license/>

<version>1.0.4</version>
<date>2005-04-16</date>

<chapter>
<title>Introduction</title>
<section>
<title>Introduction au gestionnaire de fenêtres Fluxbox</title>
<body>

<p>
Pour ceux qui ne sont pas familiers avec le modèle de bureau de Linux, les
gestionnaires de fenêtres (WM, pour Window Manager en anglais) sont des
applications lancées par X11 pour gérer les programmes graphiques. Même s'ils ne
sont pas obligatoires, une session X11 sans WM est franchement laide et ne
contient pas toutes les fonctions associées généralement avec un bureau moderne.
</p>

<p>
Fluxbox est un WM ayant une philosophie plus minimaliste que d'autres, comme
KDE ou GNOME. S'il permet d'effectuer les manipulations de base, Fluxbox ne
dispose pas de gestionnaire de fichiers graphique, d'icônes, d'organisation avec
un «&nbsp;menu de démarrage&nbsp;» et tous les autres utilitaires graphiques
habituels. Cela dit, il est tout à fait possible de les obtenir si l'on le
souhaite. Cela lui donne une grande capacité de personnalisation, proche de la
philosophie Gentoo en somme...
</p>

<p>
Ce guide est destiné à ceux qui viennent d'arriver sur Fluxbox, aux curieux ou à
ceux qui souhaitent tout simplement accroître leurs connaissances de Gentoo avec
Fluxbox. Ce guide illustre également comment avoir plus de fonctionnalités (même
si elles sont optionnelles) en utilisant des programmes extérieurs fonctionnant
bien sur Fluxbox.
</p>

<p>
Remarquez également que depuis début 2005, XFree86 a été supprimé de Gentoo
Portage. Nous supposons donc dans ce guide que le lecteur utilise Xorg. Si ce
n'est pas le cas, vous pourrez sans doute tirer quelque chose de ce guide mais
l'objectif ici n'est pas de proposer une compatibilité croisée avec XFree.
Gentoo recommande de changer et d'utiliser Xorg en faisant un <c>emerge
xorg-x11</c>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Installer Fluxbox</title>
<section>
<title>L'installation de base</title>
<body>

<p>
Gentoo met à votre disposition un ebuild pour installer rapidement et facilement
Fluxbox. Si Gentoo propose les paramètres USE <c>gnome</c> et <c>kde</c> qui
sont là pour proposer une compatibilité avec les autres WM, ils ne semblent pas,
de l'expérience de l'auteur, nécessaires à l'installation de Fluxbox. Si vous
souhaitez avoir qt, gtk+ ou n'importe quel utilitaire de KDE/GNOME alors vous
pourrez les installer et les configurer de manière indépendante. Par exemple,
j'utilise Fluxbox avec k3b, l'utilitaire de gravure de CD-R(W) de KDE.
</p>

<p>
Il est également nécessaire d'avoir un programme pour empêcher l'accès non
autorisé au bureau. Il vous faudra pour cela installer <c>xlock</c>. La grande
majorité des utilisateurs souhaite pouvoir utiliser leur propre fond d'écran
donc nous installerons <c>eterm</c> qui propose également un bon terminal X11.
</p>

<pre caption="Installation de Fluxbox">
# <i>emerge fluxbox xlockmore x11-terms/eterm</i>
</pre>

<p>
Hé bien voilà, Fluxbox est maintenant installé&nbsp;! Cela dit, il est bien
possible que vous ne puissiez pas l'utiliser efficacement avec juste ces outils.
Les chapitres suivants vous aideront à installer des paquets pouvant vous être
nécessaires et à configurer Fluxbox et les programmes externes à utiliser.
Souvenez-vous que toutes ces étapes sont optionnelles. Vous pouvez donc choisir
de récupérer une partie ou une autre comme vous le souhaitez.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configurer Fluxbox</title>
<section>
<title>Préparation de X11</title>
<body>

<p>
Fluxbox n'est en fait qu'un programme lancé par X11. Si vous le souhaitez, vous
pouvez exécuter <c>startx</c> puis taper <c>fluxbox</c> dans un xterm. Cela dit,
faire cela à chaque fois peut être ennuyant. Si vous ne souhaitez pas démarrer
sur l'interface graphique mais préférez lancer X11 manuellement, vous pouvez
faire en sorte que X charge automatiquement Fluxbox en exécutant cette commande
depuis votre compte utilisateur&nbsp;:
</p>

<pre caption="Édition de votre xinit">
$ <i>echo fluxbox > ~/.xinitrc</i>
</pre>

<p>
Ce n'est pas l'idéal pour la plupart des utilisateurs qui souhaitent avoir
un environnement de bureau tout le temps. C'est casse pieds de toujours devoir
exécuter <c>startx</c> si vous souhaitez en fait utiliser une interface
graphique à chaque démarrage. Cela ajoute de plus un risque au niveau de la
sécurité si vous ne faites pas attention. Si vous bloquez l'affichage X11 en
utilisant <c>xlock</c> mais que vous lancez X11 depuis une console alors
quelqu'un ayant un accès physique à la machine peut retourner à la console, tuer
le processus de X11 et utiliser votre compte. La seule manière d'éviter cela est
soit de mettre X11 en tâche de fond, soit de le lancer dans un <c>screen</c>,
détacher le screen puis vous déloguer. Encore du travail pour pas grand chose au
fond. Si vous utilisez un gestionnaire de connexions graphique, vous n'aurez pas
ce problème. Cela dit vous devrez exécuter X11 en tant que root, ce qui peut
être une mauvaise chose. À l'heure où ces lignes sont écrites, il n'existe
aucune exploitation connue de l'auteur pour la version actuelle de X11
permettant d'utiliser ce fait. Si vous êtes concerné par un problème à ce
niveau-là, soit n'utilisez pas X11, soit utilisez la méthode avec <c>screen</c>.
Remarquez que ce n'est pas un problème de Fluxbox mais de X11 lui-même.
</p>

<!--
Merci à Josh Nichols pour avoir aidé à nettoyer ce chapitre. Lire le commentaire
#4 du bogue 87330.
-->

<p>
Il existe de nombreux gestionnaires de connexions graphiques. Nous utiliserons
gdm mais vous pouvez en choisir un autre si ça vous chante. Gdm fonctionne bien
pour Fluxbox ainsi que pour d'autres WM que vous auriez installé comme GNOME,
KDE ou xfce.
</p>

<pre caption="Gestionnaire de connexion">
# <i>emerge gdm</i>
# <i>rc-update add xdm default</i>
</pre>

<impo>
Faites bien attention à installer gdm et ajouter xdm au script de démarrage et
pas une autre manipulation&nbsp;! Vous tromper ici engendrera une erreur. Vous
devez également changer un fichier de configuration système&nbsp;:
</impo>

<pre caption="Éditer /etc/rc.conf">
DISPLAYMANAGER="gdm"
</pre>

</body>
</section>
<section>
<title>Thèmes de bureau</title>
<body>

<p>
Vous pouvez sauter ce chapitre si vous souhaitez vraiment une installation
minimale. Cela dit c'est une bonne chose de permettre aux utilisateurs de
personnaliser l'apparence de leur gestionnaire de fenêtres. Nous installerons
des thèmes spécifiques à Fluxbox, des graphiques de Gentoo utilisables
pour tous les WM et des thèmes de bureau qui peuvent être utilisés sur
n'importe quel WM de type *box.
</p>

<pre caption="Installation de styles et de graphiques">
# <i>emerge commonbox-styles commonbox-styles-extra \
  fluxbox-styles-fluxmod gentoo-artwork</i>
</pre>

</body>
</section>
<section>
<title>La syntaxe Fluxbox pour Vim</title>
<body>

<p>
Ensuite, installez la coloration syntaxique de Fluxbox pour <c>vim</c>. Elle
permet aux utilisateurs de lire plus facilement le contenu des fichiers init
et de raccourcis clavier de Fluxbox. C'est une toute petite extention pour vim
donc nous vous la recommandons grandement (sauf évidemment si vous êtes un
utilisateur d'emacs).
</p>

<pre caption="Installation de la syntaxe Fluxbox">
# <i>emerge fluxbox-syntax</i>
</pre>

</body>
</section>
<section>
<title>Les touches clavier de Fluxbox</title>
<body>

<p>
Fluxbox, par défaut, est accompagné d'un ensemble vraiment très léger de
raccourcis clavier. Il permet à l'utilisateur de changer de fenêtre ou de
bureau, mais pas plus. Avant de faire des changements, il y a quelque chose que
vous devez apprendre. Dans le fichier des raccourcis claviers de Fluxbox, vous
rencontrerez un certain nombre de modificateurs. Mod1 correspond en général à la
touche «&nbsp;Alt&nbsp;» et Mod4 correspond généralement à la touche
«&nbsp;Windows&nbsp;». Control et Shift sont les touches Ctrl et Maj. Il est
généralement mieux d'utiliser les touches Alt/Windows car les autres programmes
X11 utilisent d'habitude les touches Ctrl et Maj pour leurs propres raccourcis
clavier.
</p>

<p>
Tous ces éléments sont indépendants donc vous pouvez garder ceux qui vous
plaisent, les modifier selon vos besoins... Ce guide utilise ce que l'auteur
pense être les programmes les plus communément utilisés. Pour plus
d'informations lisez la page de manuel de Fluxbox.
</p>

<p>
Maintenant que vous savez tout cela, lancez un éditeur de texte avec votre
compte utilisateur et ouvrez le fichier <path>~/.fluxbox/keys</path> (s'il
n'existe pas, créez-le). Modifions maintenant les raccourcis claviers.
</p>

<pre caption="Modification des raccourcis clavier">
<comment># Bloque l'affichage de X11 pour l'utilisateur actuel.</comment>
Mod4 l   :ExecCommand xlock

<comment># Ouvre un certain nombre de programmes avec des raccourcis clavier. Je suis sûr</comment>
<comment># que vous comprendrez cette partie...</comment>
Mod1 f   :ExecCommand firefox
Mod1 t   :ExecCommand thunderbird
Mod1 o   :ExecCommand oowriter
Mod1 v   :ExecCommand gvim

<comment># Fluxbox n'a pas de contrôle du son donc nous devons utiliser une astuce</comment>
<comment># pour en avoir un (nous supposons que vous utilisez ALSA).</comment>
Mod1 e   :ExecCommand Eterm -name alsa -e alsamixer

<comment># Contrôle des programmes. Juste pour vous simplifier la vie...</comment>
Mod1 4   :Close
Mod1 m   :Minimize

<comment># Si vous utilisez aterm (emerge x11-terms/aterm), cette commande ouvre un</comment>
<comment># joli terminal aterm transparent sans bordures d'une résolution de 1027x768</comment>
<comment># en laissant suffisamment de place pour torsmo.</comment>
Mod1 a   :ExecCommand aterm -name aterm -sl 3000 -tr +sb -sr -sk -bg black -fg\
white -fade 90 -bl -tn xterm -fn\
-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15 -g 116x57

<comment># Comme auparavant mais ouvre un terminal transparent avec les droits root.</comment>
<comment># Vous devez bien sûr connaître le mot de passe root pour vous en servir.</comment>
Mod1 s   :ExecCommand aterm -name aterm -sl 3000 -tr +sb -sr -sk -bg black -fg\
white -fade 90 -bl -tn xterm -fn\
-misc-fixed-medium-r-normal-*-*-120-*-*-c-*-iso8859-15 -g 116x57 -e su -
</pre>

</body>
</section>
<section>
<title>Moniteur système</title>
<body>

<p>
En général, les utilisateurs aiment utiliser un moniteur système pour X11.
Gkrelmm est en général utilisé mais il ne correspond pas à l'esprit minimaliste
de Fluxbox. Nous utiliserons donc un moniteur système plus simple&nbsp;: Torsmo.
Si vous le souhaitez, vous pouvez en utiliser un autre, vous trouverez sur
Internet de nombreux guides sur le sujet.
</p>

<pre caption="Installation de torsmo">
# <i>emerge torsmo</i>
</pre>

<p>
Le fichier de configuration par défaut de Torsmo est très léger. Vous trouverez
plus d'informations sur le sujet en lisant la page de manuel ou bien encore le
<uri link="http://torsmo.sourceforge.net/readme.php">readme</uri>.
</p>

</body>
</section>
<section>
<title>Les icônes</title>
<body>

<p>
Fluxbox ne dispose pas d'utilitaire ou de programme permettant d'afficher des
icônes sur le bureau. Tout est géré grâce aux raccourcis clavier ou avec le
menu obtenu avec un clic-droit. Cela dit, vous pouvez tout aussi bien installer
un programme pour générer des icônes. Contrairement à ce qu'indique son nom,
idesk n'a aucun lien de parenté avec Apple ou Mac.
</p>

<pre caption="Installation d'idesk">
# <i>emerge idesk</i>
</pre>

<!--
SI quelqu'un souhaite écrire une description meilleure de idesk allez-y, ça sera
grandement apprecié&nbsp;!
-->

<p>
Une fois installé, vous devez ajouter des icônes au programme. Les icônes
d'idesk sont gérées dans le fichier de configuration <path>~/.ideskrc</path>.
Il est long à réaliser et nous ne pouvons pas décemment couvrir tout le sujet
dans ce guide. Pour plus d'informations, <c>man idesk</c> ou jetez un œil au
<uri link="http://idesk.sourceforge.net/usage.html">guide d'utilisation</uri>.
</p>

</body>
</section>
<section>
<title>Choisir un thème, un fond d'écran et un script de démarrage</title>
<body>

<p>
Fluxbox dispose de nombreux thèmes accessibles à partir du menu de clic-droit
dans la partie «&nbsp;Fluxbox menu&nbsp;» puis «&nbsp;System Styles&nbsp;». Ces
thèmes utilisent en général leur propre fond d'écran qui est au choix une
couleur ou bien un gradient de couleurs quelconque. La plupart des utilisateurs
préfèrent utiliser leur propre fond d'écran et ne pas le faire dépendre du
thème choisi. Pour cela nous devons éditer un autre fichier de configuration de
Fluxbox qui gère tout ce qui concerne le démarrage. Ouvrez donc avec votre
éditeur de texte le fichier <path>~/.fluxbox/startup</path>.
</p>

<p>
Si ce fichier existe, effacez-le. Ajoutez les lignes suivantes au nouveau
fichier, enlevez les commentaires si besoin est et modifiez les valeurs des
mots en majuscules.
</p>

<pre caption="Édition des scripts de démarrage de Fluxbox">
<comment># Script de démarrage de Fluxbox pour Gentoo

# Les programmes qui tournent constamment, contrairement à
# ceux qui ne durent que très peu de temps, nécessitent un &amp; à la fin
# de la commande.

# Affichez l'écran de démarrage de Fluxbox
#fbsetbg -C /usr/share/fluxbox/splash.jpg

# Cette ligne affiche le fond d'écran. Vous devez avoir installé un programme le
# permettant (x11-terms/eterm est recommandé).
#bsetbg -f PATH_TO_IMAGE

# Répertoire de polices personnalisé
#xset +fp PATH_TO_FONT_DIRECTORY

# Démarre le programme pour les icônes
#idesk &amp;

# Lance le moniteur système Torsmo
#torsmo &amp;

# Cette ligne DOIT ÊTRE la dernière commande&nbsp;!</comment>
exec /usr/bin/fluxbox -log ~/.fluxbox/log
</pre>

</body>
</section>
<section>
<title>Génération du menu</title>
<body>

<p>
L'auteur utilise un éditeur de texte pour créer les menus, parce que les
programmes de création de menus ajoutent des éléments en trop, sautent souvent
des paquets importants et ne fonctionnent pas très bien avec les styles
mis à dispositions à l'installation de Gentoo. Cela dit, ce n'est pas l'avis de
tout le monde, c'est pourquoi les instructions ci-dessous expliquent comment
utiliser deux des générateurs de menus les plus utilisés.
</p>

<p>
Ces deux programmes fournissent un bon système d'organisation, sachant qu'il est
toujours possible d'éditer le fichier <path>~/.fluxbox/menu</path> à la main
après les avoir utilisés pour ajouter des applications ou supprimer celles qui
ne seraient pas utilisées. Notez que si quelque chose est supprimé de ce menu,
cela ne supprime pas le paquet du système, seulement du menu de l'utilisateur.
L'application pourra toujours être lancée depuis la ligne de commande.
</p>

<p>
Un programme nommé <c>fluxbox-generate_menu</c>, qui est déjà présent sur votre
système, a un comportement similaire à celui de <c>mmaker</c>. Ce programme gère
mieux les styles mais ne détecte pas autant d'applications. Pour l'utiliser,
vous n'avez qu'à l'exécuter. Pour installer et utiliser <c>mmaker</c>, voir
ci-dessous.
</p>

<pre caption="Installation de menumaker">
# <i>emerge menumaker</i>
</pre>

<p>
Ensuite, lancez simplement <c>mmaker Fluxbox</c>. Il est cependant important de
noter que, même si plus d'applications sont détectées qu'en utilisant
<c>fluxbox-generate_menu</c>, de nombreuses applications répandues sont encore
oubliées. C'est, par exemple, le cas de gaim et xchat.
</p>

</body>
</section>
<section>
<title>Résumé</title>
<body>

<p>
Bravo&nbsp;! Fluxbox est maintenant installé, configuré et prêt à l'emploi. Si
vous avez une question ou une suggestion, envoyez un courrier électronique à
l'auteur et/ou remplissez un rapport de bogue sur le
<uri link="http://bugs.gentoo.org">Bugzilla</uri> de Gentoo.
</p>

</body>
</section>
</chapter>
</guide>
