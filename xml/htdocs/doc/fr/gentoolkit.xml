<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/gentoolkit.xml,v 1.7 2005/06/07 15:14:11 neysx Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fr/gentoolkit.xml" lang="fr">
<title>Gentoolkit</title>

<author title="Auteur">
  <mail link="mbutcher@aleph-null.tv">Matt Butcher</mail>
</author>
<author title="Correcteur">
  <!-- zhen@gentoo.org -->John P. Davis
</author>
<author title="Correcteur">
  <mail link="erwin@gentoo.org">Erwin</mail>
</author>
<author title="Correcteur">
  <mail link="fox2mike@gentoo.org">Shyam Mani</mail>
</author>
<author title="Correcteur">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>
<author title="Correcteur">
  <mail link="karltk@gentoo.org">Karl Trygve</mail>
</author>
<author title="Correcteur">
  <mail link="yoswink@gentoo.org">José Luis Rivero</mail>
</author>
<author title="Traducteur">
  <mail link="ribosome@gentoo.org">Olivier Fisette</mail>
</author>
<author title="Traducteur">
  <mail link="Clement@varaldi.org">Clément Varaldi</mail>
</author>

<abstract>
Gentoolkit est un ensemble d'outils qui facilitent l'administration d'un
système Gentoo. La lecture de ce document vous fournira les bases nécessaires
à l'utilisation de quelques-uns de ces outils.
</abstract>

<!-- Licensed under GFDL -->

<version>1.8</version>
<date>2005-06-07</date>

<chapter>
<title>Introduction</title>
<section>
<title>Qu'est Gentoolkit&nbsp;?</title>
<body>

<p>
Gentoo est une distribution Linux tout à fait unique&nbsp;; cela engendre des
complexités qu'on ne rencontre pas avec les autres distributions. Lorsque les
développeurs et contributeurs Gentoo ont découvert ces complexités, ils ont
écrit des outils permettant de les contourner. Plusieurs de ces outils ont été
intégrés au projet Gentoo et font partie du paquet
<c>app-portage/gentoolkit</c>.
</p>

<note>
Il existe à l'heure actuelle deux versions de gentoolkit&nbsp;:
<c>app-portage/gentoolkit</c> et <c>app-portage/gentoolkit-dev</c>. La première
contient des scripts servant à l'administration système alors que la seconde
rassemble des scripts facilitant le développement de Gentoo. Si vous êtes
développeur, vous pouvez inclure votre script à <c>gentoolkit-dev</c> en
contactant le mainteneur de Gentoolkit. Ce document ne traitera que de
Gentoolkit.
</note>

<p>
Gentoolkit contient un bon nombre d'outils qui vous aideront à gérer vos
paquets et à garder la trace de ce qui se passe sur votre système. La plupart
des utilisateurs (et plus particulièrement ceux qui mettent à jour leur système
fréquemment) trouveront gentoolkit utile.
</p>

</body>
</section>
<section>
<title>Installation</title>
<body>

<p>
Comme pour n'importe quel paquet Gentoo, l'installation ne nécessite qu'une
commande&nbsp;:
</p>

<pre caption="Installer gentoolkit">
# <i>emerge gentoolkit</i>
</pre>

<note>
Plusieurs outils de gentoolkit révèlent des informations importantes sur votre
système ou requièrent les privilèges du super-utilisateur (root). Pour ces
raisons, certains de ces programmes ne peuvent être exécutés que par un
utilisateur disposant des permissions root alors que d'autres ne fonctionneront
correctement que s'ils sont exécutés par un utilisateur disposant de ces
permissions.
</note>

</body>
</section>
<section>
<title>Trouver la documentation</title>
<body>

<p>
Toute documentation relative à un programme gentoolkit (à part les pages man)
se trouve dans <path>/usr/doc/gentoolkit-[version]/[nom-du-programme]/</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>equery</title>
<section>
<title>Introduction</title>
<body>

<p>
L'outil <c>equery</c> offre plusieurs des fonctionnalités fournies par
<c>epm</c> (et par l'outil <c>qpkg</c> maintenant obsolète) tout en ajoutant
ses propres fonctions qui le rendent particulièrement utile. <c>equery
--help</c> vous donnera la liste complète des options. À terme, <c>equery</c>
pourrait remplacer complètement <c>etcat</c>.
</p>

<note>
Les fonctionnalités listées par <c>equery --help</c> ne sont pas toutes
implémentées pour l'instant. Celles qui ne le sont pas sont clairement
indiquées comme telles. Vous remarquerez également que toutes les commandes
disposent d'une option courte, comme par exemple <c>b</c> à la place de
<c>belongs</c>.
</note>

<note>
Vous devez savoir de plus qu'actuellement le format de sortie n'est pas le même
si vous envoyez les données à travers un pipe ou non. Le format en pipe a été
simplifié pour être plus facile à manipuler avec des outils classiques mais
est peu populaire et sera probablement modifié dans le futur. Si vous écrivez
des scripts utilisant equery, vous devrez vous tenir au courant des changements.
</note>

</body>
</section>
<section>
<title>Trouver de quel paquet provient un fichier</title>
<body>

<p>
<c>equery</c> permet également de trouver le paquet auquel un fichier appartient
en utilisant la commande <c>belongs</c> (ou plus simplement <c>b</c>).
</p>

<pre caption="Trouver l'ebuild ayant installé un certain fichier">
# <i>equery belongs /usr/bin/xmms</i>
[ Searching for file(s) /usr/bin/xmms in *... ]
media-sound/xmms-1.2.10-r9 (/usr/bin/xmms)
</pre>

<p>
En utilisant l'option <c>-f</c> vous pouvez chercher les paquets installant des
fichiers correspondant à une expression régulière. L'option <c>-e</c> est utile
pour terminer la recherche immédiatement après avoir trouvé une réponse.
</p>

</body>
</section>
<section>
<title>Vérifier l'intégrité d'un paquet</title>
<body>

<p>
Il est parfois utile de vérifier l'intégrité d'un paquet. <c>equery</c> peut
vérifier la somme md5 ainsi que la marque horaire d'un paquet pour indiquer s'il
a été corrompu, remplacé ou enlevé.
</p>

<pre caption="Intégrité correcte d'un paquet">
# <i>equery check gentoolkit</i>
[ Checking app-portage/gentoolkit-0.2.0 ]
 * 54 out of 54 files good
</pre>

<p>
Vous remarquerez que si vous changez des fichiers de configuration après
l'installation, ils seront probablement rapportés comme «&nbsp;not good&nbsp;»,
soit incorrects.
</p>

</body>
</section>
<section>
<title>Lister tous les paquets dépendant de...</title>
<body>

<p>
<c>equery</c> est capable de lister toutes les dépendances directes d'un paquet.
Nous utiliserons pour cela la fonction <c>depends</c> et son utilisation est
simple&nbsp;:
</p>

<pre caption="Chercher les paquets dépendant de pygtk">
# <i>equery depends pygtk</i>
[ Searching for packages depending on pygtk... ]
app-office/dia-0.93
dev-python/gnome-python-2.0.0-r1
gnome-extra/gdesklets-core-0.26.2
media-gfx/gimp-2.0.4
x11-libs/vte-0.11.11-r1
</pre>

</body>
</section>
<section>
<title>Graphes de dépendances</title>
<body>

<p>
<c>equery</c> est capable de vous donner un graphe des dépendances pour un
paquet donné. Le graphe de dépendances liste tous les paquets qui ont une
dépendance directe ou indirecte pour le paquet en question.
</p>

<pre caption="Graphe de dépendances pour cdrtools">
# <i>equery depgraph cdrtools</i>
Displaying dependencies for app-cdr/cdrtools-2.01_alpha37
`-- app-cdr/cdrtools-2.01_alpha37
 `-- sys-libs/glibc-2.3.4.20040808 (virtual/libc)
  `-- sys-kernel/linux-headers-2.4.22 (virtual/os-headers)
   `-- sys-apps/baselayout-1.10.4
    `-- sys-apps/sysvinit-2.85-r1
     `-- sys-apps/gawk-3.1.3-r1
      `-- sys-apps/util-linux-2.12-r4
          `-- sys-apps/sed-4.0.9
              `-- sys-libs/ncurses-5.4-r4
                  `-- sys-apps/pam-login-3.14
                  `-- sys-libs/pam-0.77-r1
                 `-- sys-libs/cracklib-2.7-r10
               `-- sys-apps/miscfiles-1.3-r1
              `-- app-arch/gzip-1.3.5-r1
              `-- sys-apps/portage-2.0.50-r10
</pre>

<p>
Par exemple, si glibc est une dépendance directe pour cdrtools, linux-headers
n'est qu'une dépendance indirecte. Remarquez que la sortie donne également
des informations sur les paquets virtuels. Dans l'exemple ci-dessus,
<c>cdrtools</c> est en fait écrit comme nécessitant virtual/libc et non
sys-libs/glibc. Mais dans l'exemple donné, le paquet virtuel virtual/libc
sera satisfait grâce à l'installation de sys-libs/glibc.
</p>

</body>
</section>
<section>
<title>Lister les fichiers appartenant à un ebuild</title>
<body>

<p>
<c>equery</c> peut lister les fichiers qui appartiennent à un ebuild installé.
Si vous ne savez pas quels fichiers ont été installés par Gentoolkit sur le
système, vous pourrez utiliser <c>equery</c> pour les obtenir.
</p>

<pre caption="Lister les fichiers de Gentoolkit">
# <i>equery files gentoolkit</i>
[ Searching for packages matching gentoolkit... ]
app-portage/gentoolkit-0.2.0
* Contents of app-portage/gentoolkit-0.2.0:
/usr
/usr/bin
/usr/bin/equery
/usr/bin/etcat
/usr/bin/euse
/usr/bin/glsa-check
/usr/bin/qpkg
/usr/bin/revdep-rebuild
/usr/lib
/usr/lib/gentoolkit
/usr/lib/gentoolkit/pym
/usr/lib/gentoolkit/pym/gentoolkit
/usr/lib/gentoolkit/pym/gentoolkit/__init__.py
/usr/lib/gentoolkit/pym/gentoolkit/gentoolkit.py
/usr/lib/gentoolkit/pym/gentoolkit/pprinter.py
/usr/lib/gentoolkit/pym/glsa.py
/usr/sbin
/usr/share
/usr/share/doc
/usr/share/doc/gentoolkit-0.2.0_pre10

[...]
</pre>

<p>
La commande <c>files</c> de <c>equery</c> propose quelques options pour modifier
la sortie. Vous pouvez y jeter un œil en lisant la page de manuel de
<c>equery</c>.
</p>

</body>
</section>
<section>
<title>Chercher les paquets utilisant une option USE spécifique</title>
<body>

<p>
Si vous souhaitez trouver quels paquets sur votre système peuvent utiliser une
option USE bien précise, <c>equery</c> dispose de la fonction <c>hasuse</c>.
</p>

<pre caption="Chercher les paquets utilisant l'option USE mozilla">
# <i>equery hasuse mozilla</i>
[ Searching for USE flag mozilla in all categories among: ]
 * installed packages
[I--] [  ] dev-java/blackdown-jre-1.4.2.01 (1.4.2)
[I--] [  ] mail-client/evolution-2.0.2 (2.0)
</pre>

</body>
</section>
<section>
<title>Lister les paquets</title>
<body>

<p>
<c>equery</c> dispose d'un outil puissant permettant de lister les paquets
appartenant à notre système, à Portage ou même à un «&nbsp;overlay&nbsp;». Nous
allons l'essayer&nbsp;:
</p>

<pre caption="Lister les paquets avec equery">
# <i>equery list gentoolkit</i>
[ Searching for package 'gentoolkit' in all categories among: ]
 * installed packages
[I--] [  ] app-portage/gentoolkit-0.2.0 (0)
</pre>

<p>
La recherche standard cherchera parmi les paquets installés un nom donné. S'il
est trouvé, les informations suivantes seront retournées&nbsp;: l'état du
paquet sur le système dans les premiers crochets (I pour les paquets Installés,
P pour Portage et O pour Overlay), les masques possibles dans les seconds (~ par
mot-clef, - par architecture ou M pour Masqué en dur), puis la catégorie,
le nom complet et enfin le SLOT dans lequel le paquet est mis.
</p>

<p>
Dans cet autre exemple, nous allons utiliser des options locales pour chercher
des paquets dans notre arbre de Portage et dans l'overlay.
</p>

<pre caption="Utilisation d'options locales avec equery">
# <i>equery list -p -o vim</i>
[ Searching for package 'vim' in all categories among: ]
 * installed packages
[I--] [  ] app-editors/vim-6.3-r4 (0)
 * Portage tree (/usr/portage)
[-P-] [M~] app-editors/vim-7.0_alpha20050126 (0)
[-P-] [M~] app-editors/vim-7.0_alpha20050201 (0)
[-P-] [  ] app-editors/vim-6.3-r2 (0)
[-P-] [M~] app-editors/vim-7.0_alpha20050122 (0)
[-P-] [M~] app-editors/vim-core-7.0_alpha20050126 (0)
[-P-] [  ] app-editors/vim-core-6.3-r3 (0)
[-P-] [M~] app-editors/vim-core-7.0_alpha20050122 (0)
[-P-] [M~] app-editors/vim-core-7.0_alpha20050201 (0)
[-P-] [  ] app-editors/vim-core-6.3-r4 (0)
 * overlay tree (/opt/ebuilds)
</pre>

</body>
</section>
<section>
<title>Trouver la taille d'un paquet</title>
<body>

<p>
Vous êtes-vous déjà demandé quel espace disque occupe un de vos paquets&nbsp;?
Puisqu'un paquet peut installer des fichiers dans plus d'un répertoire, la
commande habituelle <c>du -hc</c> ne vous renseignera pas correctement. Pas
d'inquiétude, <c>equery</c> est là pour vous aider&nbsp;!
</p>

<pre caption="Obtenir la taille d'un paquet">
# <i>equery size openoffice-bin</i>
* app-office/openoffice-bin-1.1.2
       Total Files : 2908
       Total Size  : 223353.31 KiB
</pre>

<p>
Comme vous pouvez le voir, <c>equery</c> donne à la fois l'espace disque total
occupé en kilo octets et le nombre de fichiers du paquet.
</p>

</body>
</section>
<section>
<title>Liste des options USE d'un paquet</title>
<body>

<p>
<c>equery</c> peut être utilisé pour obtenir de l'information sur les options
USE utilisées par un paquet donné. Il vous indiquera les options USE utilisées
lors de l'installation du paquet, et aussi toutes les options USE disponibles
pour ce paquet.
</p>

<pre caption="Paramétrer les options USE">
# <i>equery uses ethereal</i>
[ Colour Code : set unset ]
[ Legend    : (U) Col 1 - Current USE flags        ]
[           : (I) Col 2 - Installed With USE flags ]

 U I [ Found these USE variables in : net-analyzer/ethereal-0.10.6 ]
 - - adns  : Adds support for the adns DNS client library
 + + gtk   : Adds support for x11-libs/gtk+ (The GIMP Toolkit)
 - - ipv6  : Adds support for IP version 6
 - - snmp  : Adds support for the Simple Network Management Protocol if available
 + + ssl   : Adds support for Secure Socket Layer connections
 + + gtk2  : Use gtk+-2.0.0 over gtk+-1.2 in cases where a program supports both.
 - - debug : Tells configure and the makefiles to build for debugging. Effects vary across packages,
             but generally it will at least add -g to CFLAGS. Remember to set FEATURES=nostrip too
</pre>

<p>
On constate dans l'exemple précédent que seules les options USE gtk, ssl et
gtk2 étaient actives lorsque j'ai installé ethereal, mais que d'autres options
USE sont utilisées par ce paquet (adns, ipv6, snmp et debug). Pour en savoir
plus sur les options USE, consultez le chapitre <uri
link="/doc/fr/handbook/handbook-x86.xml?part=2&amp;chap=2">La variable
USE</uri> du <uri link="/doc/fr/handbook/">Manuel Gentoo</uri>.
</p>

</body>
</section>
<section>
<title>Où se trouve cet ebuild&nbsp;?</title>
<body>

<p>
<c>equery</c> peut également être utilisé pour trouver l'ebuild associé à un
paquet donné. Pour ce faire, utilisez la commande <c>equery which</c> qui donne
le chemin d'accès complet de l'ebuild en question.
</p>

<pre caption="Afficher le chemin d'accès d'un ebuild">
# <i>equery which cdrtools</i>
/usr/portage/app-cdr/cdrtools/cdrtools-2.01_alpha37.ebuild
</pre>

</body>
</section>
</chapter>

<chapter>
<title>euse</title>
<section>
<title>Introduction</title>
<body>

<warn>
<c>euse</c> est actuellement cassé dans la mesure où il ne supporte pas
correctement les profils en cascade.
</warn>

<p>
L'outil <c>euse</c> sert à consulter la variable USE et à ajouter et retirer
des options à cette variable, et ce à différents endroits sur votre système.
Pour plus d'informations sur les options USE, consultez le chapitre <uri
link="/doc/fr/handbook/handbook-x86.xml?part=2&amp;chap=2">La variable
USE</uri> du <uri link="/doc/fr/handbook/">Manuel Gentoo</uri>. Utilisez
<c>euse -h</c> pour obtenir une aide complète et toutes les options de euse.
</p>

</body>
</section>
<section>
<title>Consulter, ajouter et retirer des paramètres USE</title>
<body>

<p>
La commande <c>euse -a</c> lit la configuration actuelle des options USE actives
et les affiche.
</p>

<note>
<c>euse</c> utilise désormais cinq colonnes pour montrer si une option est
activée ou non et où cette option a été activée. Les colonnes sont précisées
comme suit&nbsp;: +/-, activé dans l'<e>E</e>nvironnement, activée dans
make.<e>C</e>onf, activée dans make.<e>D</e>efaults, et dans
make.<e>G</e>lobals. La sortie ressemble à [+ECDG]. 
</note>

<pre caption="Consulter toutes les options USE actives">
# <i> euse -a</i>
X                   [+ CD ]
aalib               [+    ]
acpi                [+ C  ]
alsa                [+ C  ]
apache2             [+ C  ]
apm                 [+  D ]
avi                 [+  D ]
berkdb              [+  D ]
bitmap-fonts        [+  D ]
bonobo              [+    ]
cdr                 [+ C  ]
crypt               [+ CD ]
cscope              [+ C  ]
cups                [+ CD ]
curl                [+    ]
emboss              [+  D ]
encode              [+  D ]
esd                 [+    ]
ethereal            [+ C  ]
fam                 [+    ]
fbcon               [+ C  ]
font-server         [+  D ]
foomaticdb          [+  D ]
fortran             [+  D ]
gd                  [+ C  ]
gdbm                [+  D ]
gif                 [+ CD ]
gimpprint           [+ C  ]
gnome               [+ CD ]
gphoto2             [+    ]
gpm                 [+ CD ]
gstreamer           [+ C  ]
gtk                 [+  D ]
gtk2                [+ CD ]
gtkhtml             [+ C  ]
guile               [+    ]
imagemagick         [+    ]
imlib               [+ CD ]
imlib2              [+    ]
innodb              [+    ]
ipv6                [+  D ]
javascript          [+ C  ]
jpeg                [+ CD ]
kde                 [+  D ]
ldap                [+    ]
libg++              [+ CD ]
libwww              [+ CD ]
mad                 [+ CD ]
mbox                [+ C  ]
md5sum              [+ C  ]
mikmod              [+ CD ]
mmx                 [+ C  ]
motif               [+ CD ]
mozilla             [+ C  ]
mp3                 [+    ]
mpeg                [+ CD ]
mpeg4               [+ C  ]
mysql               [+ C  ]
ncurses             [+ CD ]
nls                 [+  D ]
nvidia              [+ C  ]
odbc                [+    ]
offensive           [+    ]
oggvorbis           [+ CD ]
opengl              [+ CD ]
oss                 [+  D ]
pam                 [+ CD ]
pdflib              [+ CD ]
perl                [+ CD ]
png                 [+ CD ]
python              [+ CD ]
qt                  [+  D ]
quicktime           [+ CD ]
readline            [+ CD ]
ruby                [+    ]
sdl                 [+ CD ]
slang               [+  D ]
spell               [+ CD ]
sse                 [+ C  ]
ssl                 [+ CD ]
svga                [+ CD ]
tcltk               [+ C  ]
tcpd                [+  D ]
tiff                [+ C  ]
truetype            [+ CD ]
truetype-fonts      [+  D ]
type1-fonts         [+  D ]
usb                 [+ C  ]
vanilla             [+ C  ]
x86                 [+ C  ]
xml                 [+    ]
xml2                [+  D ]
xmms                [+  D ]
xosd                [+ C  ]
xv                  [+ CD ]
xvid                [+ C  ]
zlib                [+ CD ]
</pre>

<p>
Vous pouvez aussi utiliser la commande <c>euse -a -g</c> pour ne consulter que
les options USE globales actives. La commande <c>euse -a -l</c> permet
d'obtenir la même chose pour les options USE locales actives. <c>-g</c> et
<c>-l</c> sont des sous-options de <c>euse</c> et nécessitent une option donnée
auparavant (comme <c>-a</c>) pour fonctionner correctement.
</p>

<pre caption="Consulter les options USE locales actives">
# <i>euse -a -l</i>
bitmap-fonts        [+  D ]
font-server         [+  D ]
fortran             [+  D ]
gimpprint           [+ C  ]
imlib2              [+    ]
md5sum              [+ C  ]
mpeg4               [+ C  ]
nvidia              [+ C  ]
offensive           [+    ]
truetype            [+ CD ]
truetype-fonts      [+  D ]
type1-fonts         [+  D ]
</pre>

<p>
On peut également utiliser <c>euse</c> pour activer ou désactiver des options
USE. Les commandes à utiliser sont <c>euse -E option</c> (activer une option)
et <c>euse -D option</c> (désactiver une option).
</p>

<warn>
N'utilisez pas les commandes <c>euse -E</c> et <c>euse -D</c> sans préciser
d'options USE sinon cela activera/désactivera TOUTES les options USE dans
<path>/etc/make.conf</path>. Même si une sauvegarde est créée sur
<path>/etc/make.conf.euse_backup</path>, faites attention en utilisant
<c>euse -E</c> ou <c>euse -D</c>.
</warn>

<pre caption="Activer et désactiver des options USE">
<comment>(Activer une option USE)</comment>
# <i> euse -E 3dfx</i>
/etc/make.conf was modified, a backup copy has been placed at /etc/make.conf.euse_backup

<comment>(/etc/make.conf après la commande)</comment>
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc ethereal fbcon gd \
     gif gimpprint gnome gpm gstreamer gtk2 gtkhtml imlib imlib2 \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses nvidia \
     oggvorbis odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xml2 xmms xosd xv xvid x86 zlib 3dfx"

<comment>(Désactiver une option USE)</comment>
# <i> euse -D 3dfx</i>
/etc/make.conf was modified, a backup copy has been placed at /etc/make.conf.euse_backup

<comment>(/etc/make.conf après la commande)</comment>
USE="alsa acpi apache2 -arts cups cdr crypt cscope -doc ethereal fbcon gd \
     gif gimpprint gnome gpm gstreamer gtk2 gtkhtml imlib imlib2 \
     innodb -java javascript jpeg libg++ libwww mad mbox md5sum \
     mikmod mmx motif mozilla mpeg mpeg4 mysql ncurses nvidia \
     oggvorbis odbc offensive opengl pam pdflib perl png python \
     quicktime readline sdl spell sse ssl svga tcltk tiff truetype usb \
     vanilla X xml2 xmms xosd xv xvid x86 zlib -3dfx"
</pre>

<note>
<c>euse</c> ne supprime pas réellement les options de make.conf&nbsp;; il les
préfixe simplement avec - (moins) afin de les désactiver. Vous souhaiterez
peut-être nettoyer manuellement votre make.conf pour retirer les options non
désirées.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Autres outils</title>
<section>
<title>revdep-rebuild</title>
<body>

<p>
Cet outil est le «&nbsp;reconstructeur des dépendances inverses&nbsp;» de
Gentoo. Il examine les ebuilds installés sur votre système pour trouver ceux
qui ne fonctionnent plus à cause de la mise à jour de paquets dont ils
dépendent. Il peut aussi installer ces paquets manquants pour vous, mais
lorsqu'un paquet ne fonctionne plus avec les versions des dépendances déjà
installées, il est conseillé de mettre à jour ce paquet vers une version
récente. Si vous spécifiez des options, revdep-rebuild les passera à la
commande emerge, ce qui vous permet d'utiliser l'option <c>--pretend</c> pour
consulter la liste des paquets qui seront installés avant de procéder.
</p>

<pre caption="Exécuter revdep-rebuild en mode « pretend »">
# <i>revdep-rebuild -p</i>

Checking reverse dependencies...
Packages containing binaries and libraries broken by any package update,
will be recompiled.

Collecting system binaries and libraries... done.
  (/root/.revdep-rebuild.1_files)

Collecting complete LD_LIBRARY_PATH... done.
  (/root/.revdep-rebuild.2_ldpath)

Checking dynamic linking consistency...
  broken /usr/lib/ao/plugins-2/libarts.so (requires libartsc.so.0)
  broken /usr/lib/kde3/libkpresenterpart.so (requires libartskde.so.1 libqtmcop.so.1
         libsoundserver_idl.so.1 libkmedia2_idl.so.1 libartsflow.so.1 libartsflow_idl.so.1 libmcop.so.1)
  broken /usr/lib/ruby/site_ruby/1.8/i686-linux/fox.so (requires libFOX-1.0.so.0)
  broken /usr/lib/xine/plugins/1.0.0/xineplug_ao_out_arts.so (requires libartsc.so.0)
  broken /usr/lib/perl5/vendor_perl/5.8.0/i686-linux/auto/SDL_perl/SDL_perl.so (requires libSDL_gfx.so.0)
  broken /usr/lib/libloudmouth-1.so.0.0.0 (requires libgnutls.so.10)
  broken /usr/bin/k3b (requires libartskde.so.1 libqtmcop.so.1 libsoundserver_idl.so.1 libkmedia2_idl.so.1
         libartsflow.so.1 libartsflow_idl.so.1 libmcop.so.1)
  broken /usr/bin/lua (requires libhistory.so.4)
  broken /usr/bin/lyx (requires libAiksaurus-1.0.so.0)
  broken /usr/bin/luac (requires libhistory.so.4)
  broken /usr/bin/avidemux2 (requires libartsc.so.0)
  broken /usr/bin/pptout (requires libxml++-0.1.so.11)
  broken /usr/bin/xml2ps (requires libxml++-0.1.so.11)
 done.
  (/root/.revdep-rebuild.3_rebuild)

Assigning files to ebuilds... done.
  (/root/.revdep-rebuild.4_ebuilds)

Evaluating package order... done.
  (/root/.revdep-rebuild.5_order)

All prepared. Starting rebuild...
emerge --oneshot --nodeps -p =app-cdr/k3b-0.11.14 =app-office/koffice-1.3.2 =app-office/lyx-1.3.4 \
       =app-office/passepartout-0.2 =dev-lang/lua-5.0.2 =dev-ruby/fxruby-1.0.29 =media-libs/libao-0.8.5 \
       =media-libs/xine-lib-1_rc5-r3 =media-video/avidemux-2.0.26 =net-libs/loudmouth-0.16

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] app-cdr/k3b-0.11.14
[ebuild   R   ] app-office/koffice-1.3.2
[ebuild   R   ] app-office/lyx-1.3.4
[ebuild   R   ] app-office/passepartout-0.2
[ebuild   R   ] dev-lang/lua-5.0.2
[ebuild   R   ] dev-ruby/fxruby-1.0.29
[ebuild   R   ] media-libs/libao-0.8.5
[ebuild   R   ] media-libs/xine-lib-1_rc5-r3
[ebuild   R   ] media-video/avidemux-2.0.26
[ebuild   R   ] net-libs/loudmouth-0.16

Now you can remove -p (or --pretend) from arguments and re-run revdep-rebuild.
</pre>

<p>
Si vous devez reconstruire certains paquets, vous pouvez exécuter
<c>revdep-rebuild</c> sans l'option <c>-p</c>. Tous les paquets listés seront
réinstallés.
</p>

</body>
</section>

<section>
<title>glsa-check</title>
<body>

<p>
<c>glsa-check</c> sert essentiellement à garder un œil sur les GLSA (les
Recommandations Gentoo Linux sur la sécurité, en anglais «&nbsp;Gentoo Linux
Security Advisories&nbsp;»). Les fonctions de <c>glsa-check</c> seront
incorporées à <c>emerge</c> et <c>equery</c> plus tard. Pour plus
d'informations, visitez la page <uri
link="/proj/en/portage/glsa-integration.xml">Portage GLSA Integration</uri> (en
anglais).
</p>

</body>
</section>
</chapter>
</guide>
