<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/gentoo-x86-quickinstall.xml,v 1.29 2005/08/05 09:05:16 neysx Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fr/gentoo-x86-quickinstall.xml" lang="fr">

<title>Guide d'installation rapide de Gentoo Linux x86</title>

<author title="Auteur">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Auteur">
  Steven Wagner
</author>
<author title="Traducteur">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>
<author title="Traducteur">
  <mail link="ribosome@gentoo.org">Olivier Fisette</mail>
</author>

<abstract>
Le guide d'installation rapide présente le processus d'installation de Gentoo
Linux de façon concise. Une expérience préalable avec l'installation de Gentoo
est vivement recommandée pour suivre ce guide.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>2.4</version>
<date>2005-08-04</date>

<chapter>
<title>Guide d'installation rapide</title>
<section>
<title>Média pour l'installation</title>
<body>

<p>
Téléchargez un CD à partir de l'un de nos
<uri link="/main/en/mirrors.xml">miroirs</uri>. Vous trouverez les images ISO
dans <path>releases/&lt;architecture&gt;/&lt;version&gt;/installcd</path>. Le CD
d'installation <e>minimal</e> ne sert que pour l'installation par le biais
d'Internet&nbsp;; vous pouvez procéder à une installation sans réseau avec le CD
d'installation <e>universel</e>.
</p>

<p>
<uri link="/doc/fr/faq.xml#isoburning">Gravez</uri> puis amorcez le CD. Tapez
<c>F2</c> lorsque s'affiche l'écran de démarrage pour voir quelles sont les
options de démarrage. Après le démarrage du système, lancez le script
d'initialisation <c>pcmcia</c> si vous avez besoin du support PCMCIA.
</p>

<p>
Les CD d'installation permettent de lancer un serveur <c>sshd</c>, d'ajouter des
utilisateurs supplémentaires, d'exécuter <c>irssi</c> (un client de discussion
en mode ligne de commande) et de naviguer le Web avec <c>lynx</c> ou
<c>links2</c>.
</p>

</body>
</section>
<section>
<title>Configuration du réseau</title>
<body>

<p>
Si votre réseau ne fonctionne pas déjà, vous pouvez utiliser <c>net-setup</c>
pour le configurer. Vous devrez peut-être utiliser <c>modprobe</c> pour charger
le support pour votre carte réseau avant de procéder à la configuration. Si vous
avez une connexion ADSL, utilisez <c>adsl-setup</c> et <c>adsl-start</c>. Pour
le support PPTP, éditez d'abord <path>/etc/ppp/chap-secrets</path> et
<path>/etc/ppp/options.pptp</path>, puis exécutez <c>pptp
&lt;server&nbsp;ip&gt;</c>.
</p>

<p>
Pour l'accès par réseau sans fil, utilisez <c>iwconfig</c> pour régler les
paramètres du sans fil, puis lancez <c>net-setup</c> à nouveau ou alors exécutez
manuellement <c>ifconfig</c>, <c>dhcpcd</c> et/ou <c>route</c>.
</p>

<p>
Si vous êtes situé derrière un serveur mandataire («&nbsp;proxy&nbsp;»),
n'oubliez pas de préparer votre système avec <c>export http_proxy</c>,
<c>ftp_proxy</c> et <c>RSYNC_PROXY</c>.
</p>

</body>
</section>
<section>
<title>Préparer les disques</title>
<body>

<p>
Utilisez <c>fdisk</c> ou <c>cfdisk</c> pour appliquer votre plan de
partitionnement. Vous aurez besoin d'au moins une partition de mémoire virtuelle
(type 82) et une partition Linux (type 83).
</p>

<p>
Utilisez <c>mke2fs</c>, <c>mke2fs -j</c>, <c>mkreiserfs</c>, <c>mkfs.xfs</c> et
<c>mkfs.jfs</c> pour créer les systèmes de fichiers sur vos partitions Linux.
Initialisez votre partition de mémoire virtuelle avec <c>mkswap</c> et
<c>swapon</c>.
</p>

<p>
Montez les systèmes de fichiers fraîchement créés sur <path>/mnt/gentoo</path>.
Créez les répertoires pour les divers points de montage (par exemple
<path>/mnt/gentoo/boot</path>) si nécessaire.
</p>

</body>
</section>
<section>
<title>Préparer le stage</title>
<body>

<p>
D'abord, assurez-vous que la date de votre système est correcte en utilisant
<c>date MMDDhhmmYYYY</c>. Ensuite, téléchargez une archive «&nbsp;stage&nbsp;» à
partir d'un de nos <uri link="/main/en/mirrors.xml">miroirs</uri> ou utilisez
celle qui est disponible sur le CD (<path>/mnt/cdrom/stages</path>). Allez dans
<path>/mnt/gentoo</path> et désarchivez le stage avec la commande
<c>tar&nbsp;-xvjpf&nbsp;&lt;archive&nbsp;tar&gt;</c>.
</p>

<p>
Si vous faites une installation sans accès réseau, installez un instantané de
Portage. Allez dans <path>/mnt/gentoo/usr</path> et exécutez
<c>tar&nbsp;-xvjf&nbsp;/mnt/cdrom/snapshots/&lt;instantané&gt;</c>. Les autres
utilisateurs peuvent télécharger un instantané de Portage et l'installer de la
même manière.
</p>

<p>
Éditez <path>/mnt/gentoo/etc/make.conf</path> selon vos besoins (options USE,
variables CFLAGS et CXXFLAGS). Pour ce faire, vous pouvez utiliser l'éditeur
<c>nano</c>.
</p>

</body>
</section>
<section>
<title>Installer le système de base Gentoo</title>
<body>

<p>
Montez d'abord le système de fichiers <path>/proc</path>, copiez et remplacez le
fichier <path>/etc/resolv.conf</path>, puis utilisez <c>chroot</c> pour entrer
dans votre environnement Gentoo.
</p>

<pre caption="Préparation et exécution de chroot">
# <i>mount -t proc none /mnt/gentoo/proc</i>
# <i>cp /etc/resolv.conf /mnt/gentoo/etc/</i>
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>env-update</i> &amp;&amp; <i>source /etc/profile</i>
</pre>

<p>
Si ne faites pas une installation sans accès réseau, mettez à jour votre arbre
Portage avec&nbsp;: <c>emerge --sync</c>.
</p>

<p>
Ensuite, assurez-vous que <path>/etc/make.profile</path> pointe vers le profil
approprié. Le profil par défaut devrait convenir à la plupart des
utilisateurs&nbsp;; des sous-profils sont disponibles pour différents noyaux
(par exemple <path>2.4/</path> pour les profils basés sur les noyaux 2.4).
Changez le profil avec <c>ln -sf</c>.
</p>

<ul>
  <li>
    Le «&nbsp;bootstrap&nbsp;» (non disponible pour les installations sans accès
    réseau) se fait en exécutant <c>scripts/bootstrap.sh</c> dans le répertoire
    <path>/usr/portage</path>.
  </li>
  <li>
    L'installation du système (non disponible pour les installations sans accès
    réseau) se fait en exécutant <c>emerge&nbsp;-e&nbsp;system</c> (ou <c>-N</c>
    si vous n'avez pas changé les valeurs par défaut pour les variables CFLAGS
    et CXXFLAGS).
  </li>
</ul>

<p>
Les utilisateurs du stage3 (sauf ceux qui font une installation sans accès
réseau) doivent mettre à jour le paquet <c>baselayout</c>.
</p>

<pre caption="Mettre à jour baselayout">
# <i>CONFIG_PROTECT="-*" emerge baselayout</i>
</pre>

</body>
</section>
<section>
<title>Configuration du noyau</title>
<body>

<p>
Choisissez votre fuseau horaire en changeant le lien symbolique
<path>/etc/localtime</path> pour qu'il pointe vers le fichier approprié dans
<path>/usr/share/zoneinfo</path>. (Utilisez <c>ln -sf</c>.)
</p>

<p>
Installez les sources d'un noyau de votre choix (<c>gentoo-sources</c> et
<c>vanilla-sources</c> sont disponibles pour les installation sans accès
réseau), configurez-les avec <c>make menuconfig</c>, puis compilez-les avec
<c>make&nbsp;&amp;&amp;make&nbsp;modules_install</c>. (Exécutez toutes ces
commandes à partir de <path>/usr/src/linux</path>.) Copiez le fichier
<path>arch/i386/bzImage</path> dans <path>/boot</path>. Vous pouvez aussi
utiliser <c>emerge&nbsp;genkernel</c> et <c>genkernel&nbsp;--udev&nbsp;all</c>.
</p>

<p>
Les utilisateurs de genkernel doivent exécuter <c>emerge&nbsp;coldplug</c> et
<c>rc-update&nbsp;add&nbsp;coldplug&nbsp;default</c>.
</p>

</body>
</section>
<section>
<title>Configurer le système</title>
<body>

<p>
Éditez le fichier <path>/etc/fstab</path>&nbsp;; voici un exemple&nbsp;:
</p>

<pre caption="Exemple de fichier fstab">
/dev/hda1   /boot     ext2    defaults,noatime     1 2
/dev/hda2   none      swap    sw                   0 0
/dev/hda3   /         ext3    noatime              0 1
none        /proc     proc    defaults             0 0
none        /dev/shm  tmpfs   nodev,nosuid,noexec  0 0
/dev/cdroms/cdrom0    /mnt/cdrom    auto      noauto,user    0 0
</pre>

<p>
Éditez <path>/etc/conf.d/hostname</path> et <path>/etc/conf.d/domainname</path>,
exécutez <c>rc-update&nbsp;add&nbsp;domainname&nbsp;default</c> et éditez
<path>/etc/conf.d/net</path> pour configurer votre réseau. Ajoutez le script
d'initialisation <c>net.eth0</c> au niveau d'exécution par défaut. Si vous avez
de multiples adaptateurs réseaux, faites-en des liens symboliques vers le script
<c>net.eth0</c> et ajoutez-les également au niveau d'exécution par défaut.
</p>

<p>
Éditez <path>/etc/hosts</path>&nbsp;; des exemples sont donnés ci-bas&nbsp;:
</p>

<pre caption="Exemples de fichier /etc/hosts">
<comment>(Pour des adresses IP statiques.)</comment>
127.0.0.1     localhost
192.168.0.5   jenny.homenetwork jenny
192.168.0.6   benny.homenetwork benny
192.168.0.7   tux.homenetwork tux

<comment>(Pour une adresse IP dynamique.)</comment>
127.0.0.1     localhost.homenetwork tux localhost
</pre>

<p>
Si vous en avez besoin, installez <c>pcmcia-cs</c> (utilisez <c>emerge</c>) et
ajoutez-le au niveau d'exécution par défaut.
</p>

<p>
Définissez le mot de passe <c>root</c> en utilisant <c>passwd</c>.
</p>

<p>
Procédez à la configuration de votre système en éditant les fichiers
<path>/etc/rc.conf</path>, <path>/etc/conf.d/rc</path>,
<path>/etc/conf.d/keymaps</path> et <path>/etc/conf.d/clock</path>.
</p>

</body>
</section>
<section>
<title>Installer les outils système</title>
<body>

<p>
Les utilisateurs de noyaux 2.4 doivent faire&nbsp;:
<c>emerge&nbsp;--unmerge&nbsp;udev</c>, <c>emerge&nbsp;devfsd</c>.
</p>

<p>
Installez un système de journalisation tel que <c>syslog-ng</c> et ajoutez-le au
niveau d'exécution par défaut. Faites la même chose pour un démon cron tel que
<c>vixie-cron</c> (optionnel).
</p>

<p>
Installez les outils système nécessaires (<c>xfsprogs</c>, <c>reiserfsprogs</c>
ou <c>jfsutils</c>) et les outils réseaux (<c>dhcpcd</c> ou <c>rp-pppoe</c>).
</p>

</body>
</section>
<section>
<title>Configurer le chargeur de démarrage</title>
<body>

<p>
Installez <c>grub</c> ou <c>lilo</c>. Éditez <path>/boot/grub/grub.conf</path>
ou <path>/etc/lilo.conf</path> selon vos préférences. Vous trouverez ci-dessous
un exemple pour chacun.
</p>

<pre caption="Exemple de fichier grub.conf">
default 0
timeout 30
splashimage=(hd0,0)/grub/splash.xpm.gz

<comment># Pour les utilisateurs de genkernel :</comment>
title=Gentoo Linux 2.6.11-r3
root (hd0,0)
kernel /kernel-genkernel-x86-2.6.11-gentoo-r3 root=/dev/ram0 init=/linuxrc ramdisk=8192 real_root=/dev/hda3 udev
initrd /initramfs-genkernel-x86-2.6.11-gentoo-r3

<comment># Pour ceux qui n'utilisent pas genkernel (sans initrd) :</comment>
title=Gentoo Linux 2.6.11 r3
root (hd0,0)
kernel /kernel-2.6.11-gentoo-r3 root=/dev/hda3

<comment># Si vous utilisez aussi Microsoft Windows :</comment>
title=Windows XP
root (hd0,5)
makeactive
chainloader +1
</pre>

<pre caption="Exemple de fichier lilo.conf">
boot=/dev/hda
prompt
timeout=50
default=gentoo

<comment># Pour ceux qui n'utilisent pas genkernel :</comment>
image=/boot/kernel-2.6.11-gentoo-r3
  label=gentoo
  read-only
  root=/dev/hda3

<comment># Pour les utilisateurs de genkernel :</comment>
image=/boot/kernel-genkernel-x86-2.6.11-gentoo-r3
  label=gentoo
  read-only
  root=/dev/ram0
  append="init=/linuxrc ramdisk=8192 real_root=/dev/hda3 udev"
  initrd=/boot/initramfs-genkernel-x86-2.6.11-gentoo-r3

<comment># Si vous utilisez aussi Microsoft Windows :</comment>
other=/dev/hda6
  label=windows
</pre>

<p>
Les utilisateurs de GRUB doivent installer GRUB dans le MBR avec
<c>grub-install&nbsp;/dev/hda</c> après avoir copié <path>/proc/mounts</path>
vers <path>/etc/mtab</path>. Les utilisateurs de LILO doivent exécuter
<c>/sbin/lilo</c>.
</p>

<p>
Quittez l'environnement chroot, démontez tous les systèmes de fichier et
redémarrez.
</p>

</body>
</section>
<section>
<title>Finaliser votre installation</title>
<body>

<p>
Connectez-vous en tant qu'utilisateur <c>root</c> et ajoutez un ou plusieurs
utilisateurs pour l'utilisation quotidienne avec la commande
<c>useradd&nbsp;-m&nbsp;-G&nbsp;&lt;groupes&gt;&nbsp;&lt;nom_d'utilisateur&gt;</c>.
</p>

<p>
Si vous avez réalisé une installation sans accès réseau, montez le CD sur
<path>/mnt/cdrom</path> et tapez <c>export&nbsp;PKGDIR="/mnt/cdrom"</c>, après
quoi vous pouvez utiliser la commande <c>emerge&nbsp;-k&nbsp;&lt;paquet&gt;</c>
pour installer des logiciels additionnels tels que <c>kde</c>.
</p>

<p>
Merci d'avoir installé Gentoo&nbsp;!
</p>

</body>
</section>
</chapter>
</guide>
