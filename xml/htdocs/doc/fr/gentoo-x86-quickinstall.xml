<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/gentoo-x86-quickinstall.xml,v 1.5 2004/03/11 21:01:16 neysx Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fr/quickinstall.xml" lang="fr">

<title>Guide d'installation rapide de Gentoo Linux</title>

<author title="Auteur">Steven Wagner</author>
<author title="Correcteur">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Traducteur">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>

<abstract>
Le guide d'installation rapide passe en revue toutes les étapes du processus
d'installation de Gentoo Linux.  Une expérience préalable avec Gentoo est
vivement recommandée pour suivre ce guide.
</abstract>

<license/>

<version>1.5</version>
<date>4 mars 2004</date>

<chapter>
<title>Guide d'installation rapide</title>
<section>
<body>

<p>
Les images ISO sont disponibles sur les <uri
link="http://www.gentoo.org/main/en/mirrors.xml">miroirs Gentoo</uri>.  Une
description détaillée des différents CD se trouve sur la <uri
link="http://store.gentoo.org">boutique Gentoo</uri>. Le CD 1 contient tout ce
qu'il faut pour installer Gentoo Linux rapidement et sans connexion Internet.
Le CD 2 est facultatif et contient des paquets pré-compilés comme KDE, Gnome,
OpenOffice.org, Mozilla, Evolution et d'autres.
</p>

<p>
Démarrez sur le premier CD, tapez &lt;F1&gt; et/ou &lt;F2&gt; et voyez les
options disponibles. Tapez &lt;ENTER&gt; pour charger le noyau par défaut.
Vous finirez par obtenir le prompt.
</p>

<pre caption="Début de la configuration">
# <i>date</i>  (vérifiez que la date est correcte. Sinon, changez-la avec <i>date MMDDhhmmCCYY</i>)
# <i>modprobe module_name</i>  (facultatif - chargez les modules nécessaires)
# <i>net-setup eth0</i> (paramétrez le réseau)
# <i>fdisk /dev/hda</i> (partitionnez le disque)
</pre>

<p>
La configuration recommandée est 64 Mo pour une partition de démarrage ext2,
une partition swap de deux fois la RAM disponible et une partition racine
ReiserFS qui occupe le reste du disque.
</p>

<p>
Initialisez vos partitions avec <c>mke2fs</c> (Ext2), <c>mke2fs -j</c> (Ext3),
<c>mkreiserfs</c> (ReiserFS), <c>mkfs.xfs</c> (XFS), <c>mkfs.jfs</c> (JFS) et
<c>mkswap</c> (partition swap). Par exemple&nbsp;: <c>mke2fs -j /dev/hda3</c>.
</p>

<p>
Montez les partitions et décompressez l'archive "stage" appropriée.
</p>

<pre caption="Préparation de l'installation">
(Activez la partition swap)                      # <i>swapon /dev/hdax</i>
(Montez la partition racine)                     # <i>mount /dev/hdax /mnt/gentoo</i>
(Créez le point de montage boot)                 # <i>mkdir /mnt/gentoo/boot</i>
(Montez la partition boot)                       # <i>mount /dev/hdax /mnt/gentoo/boot</i>
(Allez au point de montage)                      # <i>cd /mnt/gentoo</i>
(Décompressez l'archive "stage")                 # <i>tar -xvjpf /mnt/cdrom/stages/stage?-*.tar.bz2</i>
(<comment>ou</comment> téléchargez la dernière...)                  # <i>lynx http://www.gentoo.org/main/en/mirrors.xml</i>
(      ... et décompressez-la)                   # <i>tar -xvjpf stage*</i>
(Facultatif : décompressez un arbre Portage)     # <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 -C /mnt/gentoo/usr</i>
(Facultatif : copiez les sources)                # <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
(Choisissez un miroir)                           # <i>mirrorselect -a -s4 -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Copiez les infos sur les serveurs de noms)      # <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Montez le système de fichiers /proc)            # <i>mount -t proc none /mnt/gentoo/proc</i>
(« Chrootez » dans le nouvel environnement)      # <i>chroot /mnt/gentoo /bin/bash</i>
(Chargez les variables d'environnement)          # <i>env-update; source /etc/profile</i>
(Uniquement avec connexion réseau, pas pour GRP) # <i>emerge sync</i>
</pre>

<p>
Installons Gentoo&nbsp;:
</p>

<pre caption = "Installation de Gentoo">
(Modifiez USE, CFLAGS et CXXFLAGS. Éventuellement CHOST avec Stage1) # <i>nano -w /etc/make.conf</i>
(Uniquement Stage1 : bootstrap du système)                           # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Uniquement Stage1 ou Stage2 : installation du système de base)      # <i>emerge system</i>
</pre>

<p>
Ensuite, définissons quelques paramètres&nbsp;:
</p>

<pre caption = "Création des fichiers de configuration">
(Définition du fuseau horaire)       # <i>ln -sf /usr/share/zoneinfo/<comment>&lt;chemin_du_fichier_de _zone&gt;</comment> /etc/localtime</i>
(Modification du fichier fstab)      # <i>nano -w /etc/fstab</i>
</pre>

<p>
Utilisez l'exemple suivant comme un <e>modèle</e> (ne pas recopier tel quel)
pour <path>/etc/fstab</path>&nbsp;:
</p>

<pre caption="Fichier /etc/fstab">
# &lt;fs&gt;                  &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/hdax               /boot           ext2            noauto,noatime          1 2
/dev/hdax               none            swap            sw                      0 0
/dev/hdax               /               reiserfs        noatime                 0 1
/dev/cdroms/cdrom0      /mnt/cdrom      iso9660         noauto,user             0 0
none                    /proc           proc            defaults                0 0
none                    /dev/shm        tmpfs           defaults                0 0
</pre>

<p>
Poursuivons avec le noyau&nbsp;:
</p>

<pre caption="Installation du noyau">
(Installez les sources du noyau)                           # <i>emerge <comment>&lt;noyau_choisi&gt;</comment></i>
(Configurez votre noyau avec genkernel...)                 # <i>emerge genkernel; genkernel --menuconfig all</i>
(<comment>ou</comment> (1) Configurez votre noyau manuellement )              # <i>cd /usr/src/linux; make menuconfig;</i>
(   (2) Sélectionnez les options VM fs, /proc fs, /dev fs, /dev fs auto mount at boot)
(   (3) Compilez votre noyau)                              # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
(   (4) Copiez le noyau compilé)                           # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
Installez maintenant les outils supplémentaires dont vous avez besoin&nbsp;:
</p>

<pre caption = "Installation d'outils système importants">
(Choisissez un système de logs parmi sysklogd, metalog, msyslog, syslog-ng)      # <i>emerge syslog-ng </i>
(Activez-le au démarrage de la machine)                                          # <i>rc-update add syslog-ng default</i>
(Installez un démon cron au choix : vcron, dcron, fcron)                         # <i>emerge vixie-cron</i>
(Activez-le au démarrage de la machine)                                          # <i>rc-update add vixie-cron default</i>   
(Uniquement avec genkernel : installez hotplug)                                  # <i>emerge hotplug</i>
(Uniquement avec genkernel : activez-le au démarrage)                            # <i>rc-update add hotplug default</i>
(Uniquement si vous utilisez ALSA)                                               # <i>emerge alsa-utils</i>
(Uniquement si vous utilisez ALSA)                                               # <i>rc-update add alsasound boot</i>
(Uniquement en plus de ext2,ext3, au choix : reiserfsprogs, xfsprogs, jfsutils)  # <i>emerge reiserfsprogs</i>
(Définition du domaine)                                                          # <i>rc-update add domainname default</i>
</pre>

<p>
Si vous avez besoin d'ebuilds relatifs au noyau, c'est le moment de les
installer&nbsp;:
</p>

<pre caption = "Installation d'ebuilds spécifiques">
# <i>emerge pcmcia-cs</i> (ou <i>nforce-net</i>, <i>nforce-audio</i>, <i>e100</i>, <i>e1000</i>, <i>ati-drivers</i>, <i>rp-pppoe</i>)
# <i>VIDEO_CARDS="votre_carte" emerge xfree-drm</i>   (pour ATI Radeon jusqu'à la 9200, Rage128, Matrox, Voodoo et autres)
</pre>

<p>
Terminons enfin la configuration de votre système Gentoo&nbsp;:
</p>

<pre caption = "Fin de la configuration">
(Définissez le mot de passe de root)                                        # <i>passwd</i>
(Créez un utilisateur)                                                      # <i>useradd votre_nom -m -G users,wheel,audio -s /bin/bash</i>
(Définissez son mot de passe)                                               # <i>passwd your_nom</i>
(Définissez le nom de la machine)                                           # <i>echo mamachine &gt; /etc/hostname</i>
(Définissez le nom de domaine)                                              # <i>echo mondomaine.com &gt; /etc/dnsdomainname</i>
(Créez le fichier hosts avec au moins "127.0.0.1 localhost mamachine")      # <i>nano -w /etc/hosts</i>
(Définissez des paramètres divers, suivez les commentaires)                 # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption = "Paramétrage du réseau">
(Paramétrez votre réseau. Avec dhcp, utilisez iface_eth0="dhcp")                  # <i>nano -w /etc/conf.d/net</i>
(Définissez les noms des modules à charger au démarrage)                          # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;version&gt;</comment></i>
(Si pas PCMCIA : activez le réseau au démarrage)                                  # <i>rc-update add net.eth0 default</i>
(Si vous avez plusieurs cartes réseau :)
   (1) Créez un script pour chaque carte)                                         # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Activez chaque carte du démarrage, si pas PCMCIA)                          # <i>rc-update add net.ethx default</i>
(Uniquement PCMCIA : vérifiez /etc/conf.d/pcmcia et activez PCMCIA au démarrage)  # <i>rc-update add pcmcia boot</i>
</pre>

<p>
Configurons maintenant le gestionnaire de démarrage&nbsp;:
</p>

<pre caption="Installer et configurer GRUB">
# <i>emerge grub</i>
# <i>grub</i>
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup (hd0)</i>
grub&gt; <i>quit</i>
# <i>nano -w /boot/grub/grub.conf</i>
default 0
timeout 15
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux
  root (hd0,0)
  <comment># Avec genkernel :</comment>
  kernel /kernel-<comment>&lt;version du noyau&gt;</comment> root=/dev/ram0 init=/linuxrc real_root=/dev/hda3
  initrd /initrd-<comment>&lt;version du noyau&gt;</comment>
  <comment># Sans genkernel :</comment>
  kernel /kernel-<comment>&lt;version du noyau&gt;</comment> root=/dev/hda3
</pre>

<pre caption="Installer et configurer LILO">
# <i>emerge lilo</i>
# <i>nano -w /etc/lilo.conf</i>
boot=/dev/hda
prompt
delay=50
default=gentoo

image=/boot/kernel-<comment>&lt;version du noyau&gt;</comment> 
  label=gentoo
  read-only
  <comment># Avec genkernel :</comment>
  append="init=/linuxrc real_root=/dev/hda3"
  root=/dev/ram0
  initrd=/boot/initrd-<comment>&lt;version du noyau&gt;</comment>
  <comment># Sans genkernel :</comment>
  root=/dev/hda3

# <i>/sbin/lilo</i>
</pre>


<p>
Démontez toutes les partitions et redémarrez votre nouveau système&nbsp;:
</p>

<pre caption="Étapes finales et installation de l'interface graphique">
(Quittez le chroot)                             # <i>exit; cd /</i>
(Démontez les partitions)                       # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
(Redémarrez et enlevez le CD)                   # <i>reboot</i>
(Après avoir redémarré)
(Si vous utilisez l'ADSL)                       # <i>adsl-setup</i>
(Uniquement avec GRP : utiliser le « Package CD »)
(  (1) Montez le CD « Package CD » )            # <i>mount /dev/cdrom /mnt/cdrom</i>  
(  (2) Copiez les paquets)                      # <i>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</i>
(  (3) Installez des logiciels)                 # <i>USE="bindist" emerge -k xfree gnome kde mozilla openoffice-bin</i>
(  (4) Configurez votre serveur XFree)          # <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>
Consultez le <uri link="http://www.gentoo.org/doc/fr/index.xml">centre de
documentation Gentoo</uri> pour de plus amples information.
</p>
</body>
</section>
</chapter>	
</guide>

