<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/Attic/metadata.xml,v 1.3 2004/06/23 07:30:28 neysx Exp $ -->

<guide link="/doc/fr/metadata.xml" lang="fr">
<title>Méta-données Gentoo</title>

<author title="Auteur">
  <mail link="pauldv@gentoo.org">Paul De Vrieze</mail>
</author>
<author title="Correcteur">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Traducteur">
  <mail link="ribosome@gentoo.org">Olivier Fisette</mail>
</author>

<abstract>
Informations à propos de metadata.xml et de herds.xml. Ce document explique
aussi la procédure à suivre pour vous ajouter à un groupe (herd).
</abstract>

<license/>

<version>0.2</version>
<date>7 mars 2004</date>

<chapter>
<title>Pourquoi metadata.xml&nbsp;?</title>
<section>
<body>

<p>
Le but du fichier <c>metadata.xml</c> est de fournir des informations
supplémentaires sur les «&nbsp;ebuilds&nbsp;». Le fichier <c>metadata.xml</c> 
devrait être présent dans le répertoire de chaque paquet. Un modèle est 
présent dans l'arbre Portage&nbsp;: <c>skel.metadata.xml</c>.
</p>

<note>
Veuillez exécuter <c>xmllint --valid metadata.xml</c> avant d'envoyer un 
fichier <c>metadata.xml</c>. Nous espérons ajouter bientôt le support pour 
<c>metadata.xml</c> à repoman.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Structure des méta-données</title>
<section>
<body>

<p>
Un fichier <c>metadata.xml</c> peut contenir ces éléments&nbsp;:
</p>

<table>
<tr>
  <th>Balise</th>
  <th>Description</th>
</tr>
<tr>
  <ti>
    <brite>&lt;pkgmetadata&gt;</brite>
  </ti>
  <ti>
    Il s'agit de l'élément racine du fichier metadata.xml. Il n'a aucun attribut.
		Son sous-élément obligatoire est&nbsp;: <brite>&lt;herd&gt;</brite>. En plus, 
		les sous-éléments suivants sont permis&nbsp;: <brite>&lt;email&gt;</brite> 
		(pour l'adresse de courrier électronique générale du groupe), 
		<brite>&lt;maintainer&gt;</brite> et <brite>&lt;longdescription&gt;</brite>.
  </ti>
</tr>
<tr>
  <ti>
    <brite>&lt;herd&gt;</brite>
  </ti>
  <ti>
    Il doit y avoir au moins un sous-élément &lt;herd&gt;. Le contenu de cet 
		élément devrait être le nom d'un groupe tel que spécifié dans le 
		fichier <uri 
    link="http://www.gentoo.org/cgi-bin/viewcvs.cgi/misc/herds.xml?rev=HEAD;cvsroot=gentoo;content-type=text/plain">
		herds.xml</uri>. 
  </ti>
</tr>
<tr>
  <ti>
    <brite>&lt;maintainer&gt;</brite>
  </ti>
  <ti>
    En plus de faire partie d'un groupe, un paquet peut être 
		maintenu directement. Les développeurs assignés à la maintenance d'un paquet 
		peuvent être mentionnés avec l'élément <brite>&lt;maintainer&gt;</brite>.
		Cet élément a un sous-élément obligatoire&nbsp;: 
		<brite>&lt;email&gt;</brite>. Il a deux sous-éléments optionnels&nbsp;: 
		<brite>&lt;name&gt;</brite> et <brite>&lt;description&gt;</brite>.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;email&gt;</brite></ti>
  <ti>
    Contient l'adresse de courrier électronique du mainteneur. Il est requis.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;name&gt;</brite></ti>
  <ti>
    Contient un texte sous forme libre donnant le nom du mainteneur. Il est 
		optionnel.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;description&gt;</brite></ti>
  <ti>
    Cet élément contient une description de la maintenance ou une remarque, 
		par exemple une offre pour que quelqu'un prenne en charge la maintenance 
		du paquet. Il est optionnel.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;longdescription&gt;</brite></ti>
  <ti>
    Cet élément contient une description du paquet. Cela s'ajoute au champ
		DESCRIPTION qui se trouve dans les ebuilds eux-mêmes.
  </ti>
</tr>
</table>

<p>
D'autres attributs peuvent être utilisés avec ces éléments. Ils sont tous
optionnels&nbsp;:
</p>

<table>
<tr>
  <th>Attribut</th>
  <th>Balise</th>
  <th>Description</th>
</tr>
<tr>
  <ti>lang</ti>
  <ti>
    <brite>&lt;description&gt;</brite>, <brite>&lt;longdescription&gt;</brite>
  </ti>
  <ti>
    Dans tous les cas où une description est requise, il doit y avoir <e>au 
		moins</e> une description en anglais. Si une description supplémentaire dans
		une autre langue est donnée, cet attribut sert à spécifier la langue 
		utilisée. Le format est un code de pays en deux lettres.
  </ti>
</tr>
<tr>
  <ti>restrict</ti>
  <ti>
    <brite>&lt;herd&gt;</brite>, <brite>&lt;maintainer&gt;</brite>, 
    <brite>&lt;longdescription&gt;</brite>
  </ti>
  <ti>
    L'attribut restrict permet de restreindre l'application de certains éléments 
		à certaines versions du paquet. Lorsque cet attribut est utilisé, un élément 
		sans cet attribut doit également exister. Cet élément sans l'attribut 
		restrict servira de valeur par défaut. Le format de l'attribut restrict est 
		celui des options de DEPEND, mais «&nbsp;&lt;&nbsp;» et «&nbsp;&gt;&nbsp;» 
		doivent être spécifiés en utilisant &amp;lt; and &amp;gt;.<br />
		<br />
    Par exemple, dans le paquet db,
		<c>restrict="&gt;=sys-libs/db-3.2.9-r5"</c> 
		dans l'élément maintainer indique que je suis le responsable pour la 
		version 3.2.9-r5 et les suivantes.
  </ti>
</tr>
</table>

</body>
</section>
</chapter>

<chapter>
<title>Exemples de méta-données</title>
<section>
<title>Premier exemple</title>
<body>

<p>
Dans ce premier exemple, nous vous montrons le <path>metadata.xml</path> pour
OpenOffice dont les «&nbsp;ebuilds&nbsp;» sont entièrement gérés par le 
groupe nommé <c>openoffice</c>&nbsp;:
</p>

<pre caption="Paquet géré par un groupe">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd"&gt;
&lt;pkgmetadata&gt;
  &lt;herd&gt;openoffice&lt;/herd&gt;
  &lt;longdescription&gt;
    OpenOffice is the  opensource version of staroffice.
    This ebuild allows you to compile it yourself. Unfortunately this
    compilation can take up to a day depending on the speed of your
    computer. It will however make a snappier openoffice than the binary
    version.
  &lt;/longdescription&gt;
&lt;/pkgmetadata&gt;
</pre>

<p>
Le groupe <c>openoffice</c> est défini dans <path>herds.xml</path>
par le <uri link="/proj/en/metastructure">Gentoo Metastructure Project</uri>&nbsp;:
</p>

<note>
Cet exemple sera peut-être suranné lorsque vous le lirez. Ce n'est qu'un 
exemple&nbsp;!
</note>

<pre caption="Exemple du groupe de OpenOffice">
&lt;herd&gt;
  &lt;name&gt;openoffice&lt;/name&gt;
  &lt;email&gt;openoffice@gentoo.org&lt;/email&gt;
  &lt;description&gt;openoffice related packages&lt;/description&gt;
  &lt;maintainer&gt;&lt;email&gt;pauldv@gentoo.org&lt;/email&gt;&lt;/maintainer&gt;
  &lt;maintainer&gt;&lt;email&gt;brad@gentoo.org&lt;/email&gt;&lt;/maintainer&gt;
&lt;/herd&gt;
</pre>

<p>
Si vous voulez vous ajouter à un groupe (ou vous en enlever), modifiez le
fichier <path>herds.xml</path> situé dans <path>[gentoo]/misc</path> dans le
dépôt CVS de Gentoo. Ensuite, vérifiez que vous connaissez l'adresse de
courriel utilisée par le groupe (par exemple, le groupe «&nbsp;sound&nbsp;»
utilise l'adresse <mail link="sound@gentoo.org">sound@gentoo.org</mail>) et
ajoutez-vous à la liste des destinataires dans le fichier correspondant&nbsp;:
<path>/var/mail/alias/misc/&lt;le_nom_du_groupe&gt;</path>.
</p>

</body>
</section>
<section>
<title>Deuxième exemple</title>
<body>

<p>
Comme second exemple, nous regarderons le <path>metadata.xml</path> de 
<c>mirrorselect</c>. Cet «&nbsp;ebuild&nbsp;» est maintenu par le 
groupe <c>tools-portage</c> et par un mainteneur séparé. 
</p>

<pre caption="Paquet maintenu par un groupe et une autre personne">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd"&gt;
&lt;pkgmetadata&gt;
  &lt;herd&gt;tools-portage&lt;/herd&gt;
  &lt;maintainer&gt;
    &lt;email&gt;johnm@gentoo.org&lt;/email&gt;
    &lt;name&gt;John Mylchreest&lt;/name&gt;
  &lt;/maintainer&gt;
  &lt;longdescription&gt;
    This utility is used to select the fastest mirror (distfiles) and provide a
    nicer front-end for mirror selection (both rsync + distfiles) to a user.
  &lt;/longdescription&gt;
&lt;/pkgmetadata&gt;
</pre>

</body>
</section>
</chapter>
</guide>
