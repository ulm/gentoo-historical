<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/java.xml,v 1.6 2004/04/04 09:26:42 neysx Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fr/java.xml" lang="fr">
<title>Guide Java avec Gentoo</title>

<author title="Auteur, correcteur">
 <mail link="karltk@gentoo.org">Karl Trygve Kalleberg</mail>
</author>
<author title="Correcteur">
 <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Traducteur">
 <mail link="marc@pangos.com">Marc Krauth</mail>
</author>
<author title="Traducteur, relecteur">
 <mail link="cam@cameuh.net">Camille Huot</mail>
</author>

<abstract>
Guide de l'utilisateur et du développeur Java avec Gentoo
</abstract>

<license/>

<version>0.1.4</version>
<date>21 novembre 2003</date>

<chapter>
<title>Installer un JDK/JRE</title>
<section>
<title>Vue d'ensemble</title>
<body>

<p>
Gentoo fournit de nombreuses versions de JDK (N.D.T.&nbsp;: Java Development Kit)
et JRE (N.D.T.&nbsp;: Java Runtime Environment). La version proposée par défaut
est celle de Blackdown, car elle est librement disponible sans avoir besoin de
s'enregistrer. 
</p>

<note>
Quand kaffe pourra remplacer JRE/JDK, il deviendra probablement le JRE/JDK
proposé par défaut.
</note>

<p>
En général, les JDK/JRE de Sun et d'IBM sont plus rapides, mais ils sont plus
compliqués à installer puisque, pour chacun d'entre eux, on vous demandera de
lire et d'accepter leur licence avant de les télécharger. (IBM vous demandera
par ailleurs de remplir un formulaire d'enregistrement.)
</p>

<p>
Nos ebuilds pour les JDK/JRE de Sun et d'IBM vous indiqueront exactement où
aller pour les télécharger.
</p>

</body>
</section>

<section>
<title>Installer les JDK/JRE de Sun ou d'IBM</title>
<body>

<p>
Si vous faites <c>emerge sun-jdk-1.3.1</c> ou <c>emerge ibm-jdk-1.3.1</c>, un
message vous demandera d'aller télécharger les archives vous-même à cause des
restrictions de licence des JDK/JRE de Sun et de la procédure d'enregistrement
demandée pour les JDK/JRE d'IBM.
</p>

<note>
Il y a aussi un sun-jdk-1.4.0, mais tous les paquets ne fonctionnent pas
correctement avec Java 1.4. Utilisez-le à vos risques et périls.
</note> 

<p>
Vous devez télécharger et placer les fichiers indiqués dans
<path>/usr/portage/distfiles</path>. Ceci fait, vous pouvez relancer
la commande emerge et JDK/JRE sera alors correctement installé dans
<path>/opt</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configurer votre JDK/JRE</title>
<section>
<title>Vue d'ensemble</title>
<body>

<p>
Gentoo donne la possibilité d'avoir plusieurs JDK et JRE installés
sans provoquer de conflit.
</p> 

<p>
En utilisant l'outil <c>java-config</c>, vous pouvez déterminer
la configuration par défaut de tout le système si vous avez les droits de
l'utilisateur root sur votre machine. Les utilisateurs peuvent aussi se
servir de <c>java-config</c> pour définir leur propre configuration par
défaut, mais elle ne sera en vigueur que pour cet utilisateur.
</p>

</body>
</section>

<section>
<title>Mettre en place un JDK/JRE par défaut</title>
<body>

<p>
En lançant la commande <c>java-config --list-available-vms</c> (N.D.T.&nbsp;:
VM&nbsp;= Machine Virtuelle), vous avez la liste de tous les JRE et JDK à
votre disposition sur votre système, ainsi&nbsp;:
</p>

<pre caption="Liste des VM disponibles">
# <i>java-config --list-available-vms</i>
[blackdown-jdk-1.3.1] Blackdown JDK 1.3.1 (/etc/env.d/java/20blackdown-jdk-1.3.1)
[blackdown-jre-1.3.1] Blackdown JRE 1.3.1 (/etc/env.d/java/20blackdown-jre-1.3.1)
[ibm-jdk-1.3.0] IBM JDK 1.3.0 (/etc/env.d/java/20ibm-jdk-1.3.0)
[ibm-jdk-1.3.1] IBM JDK 1.3.1 (/etc/env.d/java/20ibm-jdk-1.3.1)
[ibm-jre-1.3.1] IBM JRE 1.3.1 (/etc/env.d/java/20ibm-jre-1.3.1)
[sun-jdk-1.4.0] Sun JDK 1.4.0 (/etc/env.d/java/20sun-jdk-1.4.0)
</pre>

<p>
Le nom entre crochets <path>[]</path> est le «&nbsp;label&nbsp;» ou l'ID d'une
machine virtuelle spécifique. Vous devez donner cet ID en argument à 
<c>java-config --set-system-vm</c>. Par exemple&nbsp;:
</p>

<pre caption="Réglage de la VM du système">
# <i>java-config --set-system-vm=ibm-jdk-1.3.1</i>
Now using IBM JDK 1.3.1 (/etc/env.d/java/20ibm-jdk-1.3.1)
</pre>

<note>
Vous devez avoir les droits de l'utilisateur root pour lancer --set-system-vm.
</note> 

<p>
Une fois que vous avez défini votre machine virtuelle avec <c>java-config
--set-system-vm</c> , vous devrez regénérer votre /etc/profile.env&nbsp;:
</p>

<pre caption="Regénération de /etc/profile.env">
# <i>env-update</i>
</pre>

<p>
Pour finir, vous devez actualiser votre environnement en rechargeant le fichier
<path>/etc/profile</path> ou en vous déconnectant/reconnectant.
</p>

<p>
En tant que simple utilisateur, vous pouvez utiliser <c>java-config
--set-user-vm</c>, ce qui va créer le fichier
<path>$HOME/.gentoo/java-env</path> avec toutes les variables d'environnement
requises. Vous devrez normalement exécuter source sur ce fichier depuis le
script de démarrage de votre shell.  (<path>$HOME/.zshenv</path> dans mon cas).
</p>

</body>
</section>

<section>
<title>Définir un CLASSPATH par défaut</title>
<body>

<p>
<c>java-config</c> peut aussi être utilisé pour définir votre
CLASSPATH par défaut, et bien entendu le CLASSPATH spécifique d'un utilisateur.
</p>

<p>
En premier lieu, vous voulez lister les bibliothèques java qui peuvent être
intéressantes à ajouter à votre CLASSPATH. Vous pouvez procéder ainsi&nbsp;:
</p>

<pre caption="Lister les classes">
# <i>java-config --list-available-packages</i>
[ant] No description (/usr/share/ant/classpath.env)
[java-gnome] No description (/usr/share/java-gnome/classpath.env)
[java-gtk] No description (/usr/share/java-gtk/classpath.env)
[log4j] "" (/usr/share/log4j/package.env)
</pre>

<note>
Aucun de ces paquets n'a une description correcte. Cela devrait être implémenté
dans un futur pas trop lointain.
</note>

<p>
Encore une fois, les noms entre crochets <path>"[]"</path> définissent
les ID que vous devez passer en argument à
<c>java-config --set-system-classpath</c>, comme par exemple&nbsp;:
</p>

<pre caption="Réglage du CLASSPATH">
# <i>java-config --set-system-classpath=log4j,java-gtk,java-gnome</i>
</pre>

<note>
Le répertoire courant (.) ne fera pas partie du CLASSPATH du système et il
devrait être ajouté au profil de connexion de l'utilisateur root.
</note>

<p>
Encore une fois, vous devrez lancer <c>env-update</c> pour mettre à
jour l'environnement du système, puis vous reconnecter ou recharger le fichier
<path>/etc/profile</path>.
</p>

<p>
Pour les utilisateurs, <c>java-config --set-user-classpath</c> créera 
<path>$HOME/.gentoo/java-env-classpath</path> qui sera automatiquement
inclus dans <path>$HOME/.gentoo/java-env</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Documentation supplémentaire</title>
<section>
<title>Documentation hors-ligne</title>
<body>

<ul>
<li>Les pages man de java-config</li>
<li><c>java-config --help</c></li>
<li>Le script <path>/usr/bin/java-config</path> lui-même</li>
</ul>

</body>
</section>

<section>
<title>Documentation en ligne</title>
<body>

<ul>
<li>Les archives des listes de diffusion <uri
link="http://news.gmane.org/gmane.linux.gentoo.devel">gentoo-dev</uri> et <uri
link="http://news.gmane.org/gmane.linux.gentoo.user">gentoo-user</uri></li>
<li>#gentoofr et #gentoo-java sur irc.freenode.net</li>
</ul>

</body>
</section>
</chapter>
</guide>
