<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/gentoo-upgrading.xml,v 1.4 2004/07/01 14:05:09 neysx Exp $ -->

<guide link="/doc/fr/gentoo-upgrading.xml" lang="fr">
<title>Guide des mises à jour de Gentoo</title>

<author title="Auteur">
  <mail link="g.guidi@sns.it">Gregorio Guidi</mail>
</author>

<author title="Traducteur">
  <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>

<abstract>
Ce document décrit la marche à suivre lors de la sortie d'une nouvelle version
de Gentoo.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->
<license/>

<version>1.2</version>
<date>1er juillet 2004</date>

<chapter>
<title>Gentoo et les mises à jour</title>
<section>
<title>Philosophie</title>
<body>

<p>
Dans le monde de Gentoo, le concept de mise à jour est différent de la plupart
des distributions.  Vous avez sans doute déjà remarqué que vous ne devez pas
attendre la prochaine version, la télécharger, graver un CD et ensuite réaliser
la mise à jour comme c'est souvent le cas avec d'autres distributions.
</p>

<p>
Vous savez que ce processus est frustrant pour des utilisateurs avancés qui
veulent les dernières versions des logiciels installés. C'est pour cette même
raison que des outils tels que apt ou apt-rpm ont vu le jour. Les utilisateurs
des autres distributions veulent aussi mettre à jour quand ils le souhaitent.
Cependant, Gentoo est la meilleure distribution pour ceux qui veulent rester à
jour en permanence, car elle a été conçue pour être actualisée au jour le jour.
</p>

<p>
En principe, vous ne devriez installer qu'une seule fois et ne plus vous
soucier des nouvelles versions par la suite. Suivez les indications du chapitre
<uri link="/doc/fr/handbook/handbook-x86.xml?part=2&amp;chap=2">Portage et les
logiciels</uri> du Manuel Gentoo pour maintenir votre système à jour.
Cependant, il peut arriver que des modifications soient apportées au cœur du
système lors d'une sortie d'une nouvelle version. Nous décrivons ce cas
ci-dessous en abordant les profils.
</p>

</body>
</section>
<section>
<title>Les versions et les profils</title>
<body>

<p>
Une question fréquente est&nbsp;:«&nbsp;pourquoi sortez-vous des nouvelles
versions régulièrement si ce n'est pour que les utilisateurs mettent leur
installation à jour&nbsp;?&nbsp;» Il y a plusieurs raisons&nbsp;:
</p>

<ul>
  <li>
    Une nouvelle version permet d'améliorer et d'enrichir les LiveCD.
  </li>
  <li>
    Une nouvelle version fournit des paquets précompilés à jour et permet aux
    utilisateurs qui optent pour une installation rapide (stage3 + paquets
    précompilés) d'obtenir un système relativement à jour.
  </li>
  <li>
    Une nouvelle version peut parfois ajouter des fonctionnalités incompatibles
    avec les versions précédentes. Ce cas est rare.
  </li>
</ul>

<p>
Quand une nouvelle version ajoute des fonctionnalités incompatibles avec les
versions précédentes, quand elle fournit un jeu de paquets ou de réglages qui
modifient profondément le comportement du système ou quand des paramètres par
défaut sont modifiés, nous disons que la version installe un nouveau
<e>profil</e>.
</p>

<p>
Un <e>profil</e> est un ensemble de fichiers de configuration stockés dans un
sous-répertoire de <path>/usr/portage/profiles/</path>. Ces fichiers
contiennent par exemple la liste des ebuilds qui constituent les paquets de
base du système, les options USE par défaut, les paquets qui correspondent aux
paquets virtuels.
</p>

<p>
Le profil en cours d'utilisation est défini par le lien symbolique
<path>/etc/make.profile</path> qui pointe vers le sous-répertoire correspondant
sous <path>/usr/portage/profiles</path> où sont stockés tous les profils, par
exemple <path>/usr/portage/profiles/default-x86-2004.0</path> (ancien système)
ou <path>/usr/portage/profiles/default-linux/x86/2004.0</path> (nouveau
système). Veuillez noter qu'avec le nouveau système, les fichiers des
répertoires parents font aussi partie du profil. Ce système permet de partager
des fichiers entre plusieurs profils.
</p>

<p>
Les profiles rendus obsolètes sont conservés dans
<path>/usr/portage/profiles</path>, mais sont marqués comme étant surannés par
la présence d'un fichier <path>deprecated</path> dans le répertoire du profil.
Le contenu de ce fichier est le nom du profil qui remplace le profil obsolète.
Portage vous avertit quand il substitue un profil dépassé par un autre.
</p>

<p>
Plusieurs raisons peuvent justifier la création d'un nouveau profil&nbsp;:
l'utilisation de nouvelles versions des paquets de base tels que
<c>baselayout</c>, <c>gcc</c> ou <c>glibc</c> qui seraient incompatibles avec
les versions antérieures, une modification des options USE par défaut, un
changement des correspondances entre les paquets virtuels et les paquets
utilisés ou encore une modification d'un paramètre système global tel que le
passage à udev qui remplace devfs comme gestionnaire de <path>/dev</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Rester à jour</title>
<section>
<title>Nouvelles versions sans changement de profil</title>
<body>

<p>
Quand une nouvelle version de Gentoo est annoncée et qu'elle ne contient pas de
nouveau profil (par exemple la version 2004.1 pour architecture x86), vous
pouvez l'ignorer.
</p>

<p>
Si vous mettez votre système à jour régulièrement comme <uri
link="/doc/fr/handbook/handbook-x86.xml?part=2&amp;chap=2">expliqué dans le
Manuel Gentoo</uri>, votre système est identique à ce que vous obtiendriez en
faisant une nouvelle installation.
</p>

</body>
</section>
<section>
<title>Nouvelles versions avec changement de profil</title>
<body>

<p>
Si une nouvelle version ajoute un nouveau profil, vous avez le choix de migrer
vers le nouveau profil.
</p>

<p>
Évidemment, vous n'y êtes pas obligé et vous pouvez continuer à utiliser
l'ancien et à mettre vos paquets à jour comme <uri
link="/doc/fr/handbook/handbook-x86.xml?part=2&amp;chap=2">expliqué dans le
Manuel Gentoo</uri> (ou ne rien mettre à jour du tout si tel est votre choix).
</p>

<p>
Cependant, Gentoo recommande de migrer quand votre profil devient obsolète et
qu'il n'est plus supporté par les développeurs Gentoo, c'est-à-dire quand il
n'est pas repris dans la table ci-dessous.
</p>

<p>
Pour migrer vers un nouveau profil, vous devez réaliser quelques actions
manuellement. Ces actions dépendent des versions et de l'importance des
modifications qui ont été apportées.
</p>

<p>
Dans le plus simple des cas, vous devez juste modifier le lien symbolique
<path>/etc/make.profile</path>. Dans le pire des cas, vous devrez recompiler
tout votre système. Dans tous les cas, les instructions seront fournies avec la
nouvelle version de Gentoo. Vous trouverez ces instructions à la fin de ce
guide.
</p>

</body>
</section>
<section>
<title>Profils supportés</title>
<body>

<p>
Les profils suivants sont officiellement supportés par les développeurs
Gentoo&nbsp;:
</p>

<table>
<tr>
  <th>Architecture</th>
  <th>Profil le plus récent</th>
  <th>Anciens profils supportés</th>
</tr>
<tr>
  <th>x86</th>
  <ti>2004.0</ti>
  <ti>1.4</ti>
</tr>
<tr>
  <th>hardened-x86</th>
  <ti>2004.0</ti>
  <ti></ti>
</tr>
<tr>
  <th>amd64</th>
  <ti>2004.0</ti>
  <ti></ti>
</tr>
<tr>
  <th>ppc</th>
  <ti>2004.0</ti>
  <ti></ti>
</tr>
<tr>
  <th>sparc</th>
  <ti>2004.0</ti>
  <ti>1.4</ti>
</tr>
<tr>
  <th>mips</th>
  <ti>2004.0</ti>
  <ti>1.4</ti>
</tr>
<tr>
  <th>hppa</th>
  <ti>2004.0</ti>
  <ti></ti>
</tr>
</table>

</body>
</section>
</chapter>

<chapter>
<title>Mise à jour de votre profil</title>
<section>
<title>Passer de 1.4 à 2004.0 (toutes architectures)</title>
<body>

<p>
Il n'y a aucun changement fondamental entre les profils 1.4 et 2004.0. Il
suffit de modifier le lien symbolique <path>/etc/make.profile</path> pour le
faire pointer vers le nouveau profil&nbsp;:
</p>

<pre caption="Mettre le lien /etc/make.profile à jour">
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-linux/x86/2004.0 /etc/make.profile</i>
</pre>

</body>
</section>
<section>
<title>Mise à jour d'un profil antérieur à 1.4 vers 1.4</title>
<body>

<p>
Cette mise à jour est complexe. Les instructions sont décrites dans le <uri
link="/doc/fr/new-upgrade-to-gentoo-1.4.xml">Guide de mise à jour Gentoo Linux
1.4</uri>.
</p>

</body>
</section>
</chapter>

</guide>

