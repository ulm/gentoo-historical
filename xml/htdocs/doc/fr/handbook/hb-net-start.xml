<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- Le contenu de ce document est sous licence CC-BY-SA. -->
<!-- Voir http://creativecommons.org/licenses/by-sa/2.0 -->

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/handbook/hb-net-start.xml,v 1.1 2005/06/12 20:49:26 cam Exp $ -->

<sections>

<version>1.0</version>
<date>2005-06-06</date>

<section>
<title>Préparation</title>
<body>

<note>
Ce document suppose que vous avez correctement configuré votre noyau et vos
modules en fonction de votre matériel et que vous connaissez le nom de vos
interfaces. De plus, ce guide procédera à la configuration d'eth0, mais cela
pourrait tout aussi bien être eth1, wlan0, etc.
</note>

<note>
Vous devez utiliser baselayout-1.11.11 ou supérieur pour pouvoir suivre ce
document.
</note>

<p>
Pour être prêt à configurer votre carte réseau, vous devez indiquer au système
RC (N.D.T&nbsp;: Configuration des ressources) de Gentoo le nom de cette
interface. Pour cela, un lien symbolique doit être créé de <c>net.lo</c> vers
<c>net.eth0</c> dans le répertoire <path>/etc/init.d/</path>.
</p>

<pre caption="Déclarer une interface réseau">
# <i>cd /etc/init.d</i>
# <i>ln -s net.lo net.eth0</i>
</pre>

<p>
Le système RC de Gentoo est à présent au courant pour votre interface. Il doit
maintenant savoir comment la configurer. Toutes les interfaces réseaux sont
configurées dans le fichier <path>/etc/conf.d/net</path>.<br/>
Voici un exemple de configuration en DHCP ou en adressage statique&nbsp;:
</p>

<pre caption="Exemples de /etc/conf.d/net">
<comment># Pour DHCP :</comment>
config_eth0=( "dhcp" )

<comment># Pour une adresse IP statique en utilisant la notation CIDR :</comment>
config_eth0=( "192.168.0.7/24" )
routes_eth0=( "default via 192.168.0.1" )

<comment># Pour une adresse IP statique en utilisant un masque réseau</comment>
config_eth0=( "192.168.0.7 netmask 255.255.255.0" )
routes_eth0=( "default gw 192.168.0.1" )
</pre>

<note>
Si vous ne spécifiez pas de configuration pour votre interface, elle sera
automatiquement configurée en DHCP.
</note>

<note>
CIDR signifie «&nbsp;Classless InterDomain Routing&nbsp;» (N.D.T&nbsp;: routage
sans tenir compte des classes).<br/>
À l'origine, les adresses IPv4 étaient classées A, B ou C. Ce vieux système de
classification n'avait pas prévu la popularité que connaît aujourd'hui Internet
et menaçait de ne plus pouvoir offrir de nouvelles adresses. Le CIDR est un
schéma d'adressage qui permet à une adresse IP de désigner plusieurs adresses
IP. Une adresse IP CIDR ressemble à une adresse normale, sauf qu'elle se termine
par un «&nbsp;/&nbsp;» (slash) suivi d'un nombre. Par exemple&nbsp;:
192.168.0.0/16. Le CIDR est décrit en anglais dans la <uri
link="http://rfc.net/rfc1519.html">RFC 1519</uri>.
</note>

<p>
Maintenant que notre interface est configurée, nous pouvons la démarrer et
l'arrêter grâce aux commandes ci-dessous&nbsp;:
</p>

<pre caption="Démarrage et arrêt du réseau">
# <i>/etc/init.d/net.eth0 start</i>
# <i>/etc/init.d/net.eth0 stop</i>
</pre>

<impo>
Lorsque vous chercher à résoudre un problème de réseau, il est recommandé de
mettre RC_VERBOSE="yes" dans le fichier de configuration
<path>/etc/conf.d/rc</path> afin d'avoir plus d'informations sur ce qui se
passe.
</impo>

<p>
Maintenant que vous avez démarré et arrêté votre carte réseau avec succès, vous
voulez peut-être qu'elle soit démarrée automatiquement lorsque Gentoo démarre.
Voici comment faire. La commande «&nbsp;rc&nbsp;» demande à Gentoo de démarrer
tous les scripts du niveau d'exécution actuel qui ne le sont pas.
</p>

<pre caption="Activer une interface réseau au démarrage du système">
# <i>rc-update add net.eth0 default</i>
# <i>rc</i>
</pre>

</body>
</section>

</sections>
