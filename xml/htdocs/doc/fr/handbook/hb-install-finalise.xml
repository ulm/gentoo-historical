<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/handbook/hb-install-finalise.xml,v 1.1 2004/01/09 15:10:01 neysx Exp $ -->

<sections>
<section>
<title>Administration des utilisateurs</title>
<subsection>
<title>Définir le mot de passe de root</title>
<body>

<p>
Avant que vous ne l'oubliez, définissez un mot de passe pour root en tapant :
</p>

<pre caption="Définir un mot de passe pour root">
# <i>passwd</i>
</pre>

<p>
Si vous voulez que root soit capable de se connecter via la console sur le port série,
ajoutez <c>ttyS0</c> à <path>/etc/securetty</path>.
</p>

<pre caption="Ajouter ttyS0 à /etc/securetty">
# <i>echo "ttyS0" &gt;&gt; /etc/securetty</i>
</pre>

</body>
</subsection>
<subsection>
<title>Ajouter un utilisateur pour un utilisation quotidienne</title>
<body>

<p>
Travailler en temps que root sur un système Unix/Linux est <e>dangereux</e> et
devrait être évité aussi souvent que possible. Par conséquent, il est
<e>vivement</e> recommandé d'ajouter un utilisateur pour une utilisation
quotidienne.
</p>

<p>
Par exemple, pour créer un utilisateur nommé <c>john</c> qui est membre du
groupe <c>wheel</c> (autorisé à devenir root par la commande <c>su</c>),
<c>users</c> (groupe par défaut de tous les utilisateurs) et <c>audio</c>
(autorisé à utiliser les périphériques audio) :
</p>

<pre caption="Ajouter un compte pour une utilisation de tous les jours">
# <i>useradd john -m -G users,wheel,audio -s /bin/bash</i>
# <i>passwd john</i>
Password: <comment>(tapez le mot de passe pour john)</comment>
Re-enter password: <comment>(retapez-le pour vérifier)</comment>
</pre>

<p>
Si cet utilisateur à besoin d'utiliser le compte root, il peut utiliser
<c>su -</c> pour recevoir les privilèges root. Un autre moyen est d'utiliser
le paquet <c>sudo</c> qui est, si il est configuré correctement, très sécurisé.
</p>

</body>
</subsection>
</section>
<section>
<title>Redémarrez et appéciez</title>
<subsection>
<title>Redémarrage</title>
<body>

<p>
Bravo ! Votre sytème Gentoo est maintenant prêt. Démarrez <c>etc-update</c>
pour mettre vos fichiers de configuration à jour (si besoin est), sortez de
l'environnement chroot et démontez toutes les partitions. Ensuite, tapez la
commande magique que vous attendez depuis un moment : <c>reboot</c>.
</p>

<pre caption="Redémarrer le système">
# <i>etc-update</i>
# <i>exit</i>
# <i>cd /</i>
# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
# <i>reboot</i>
</pre>

<p>
Bien sûr, n'oubliez pas de retirer le CD-ROM démarrable, sinon il sera
redémarré à la place de votre nouveau système Gentoo.
</p>

<p>
Les utilisateur d'anciens PPC démarreront avec MacOS tant que leur chargeur
de démarrage ne sera pas installé. Ces utilisateurs devront lire <uri
link="#doc_chap2_sect2">Facultatif : configurer BootX</uri>. Les utilisateurs
de MIPS devront ajuster leur PROM pour faire fonctionner Gentoo.
Ces utilisateurs devraient lire <uri link="#doc_chap2_sect3">Facultatif : faire
fonctionner Gentoo sur MIPS</uri>. Les utilisateurs de GRP peuvent passer
directement à <uri link="#doc_chap2_sect4">Facultatif : installation de paquets
supplémentaires</uri>, tous les autres peuvent finir avec <uri
link="?part=1&amp;chap=12">Que faire maintenant ?</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Facultatif : configurer BootX</title>
<body>

<impo>
Cette sous-partie est <e>seulement</e> pour les utilisateurs de PPC qui
veulent utiliser BootX comme chargeur de démarrage. Tous les autres lecteurs
devraient passer cette sous-partie.
</impo>

<p>
Maintenant que votre machine à démarré sur MacOS, ouvrez le panneau de contrôle
de BootX. Selectionnez <c>Options</c> et décochez <c>Used specified RAM
disk</c>. Quand vous serez retourné à l'écran principal de Bootx, vous trouverez
des options pour spécifier la partition principale et le disque principal.
Remplissez les champs avec les valeurs appropriées.
</p>

<p>
BootX peut être configuré pour démarrer Linux pendant le boot. Si vous faites
cela, vous verrez tout d'abord votre machine démarrer sur MacOS puis, pendant
le démarrage de celui-ci, BootX chargera et démarrera Linux. Lisez la
<uri link="http://penguinppc.org/projects/bootx/">Home page de BootX</uri>
pour plus d'informations.
</p>

<p>
Si vous êtes un utilisateur GRP, vous pouvez continuer avec <uri
link="#doc_chap2_sect3">Facultatif : installation de paquets
supplémentaires</uri>, sinon, allez directement à <uri
link="?part=1&amp;chap=12">Que faire maintenant ?</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Facultatif : faire fonctionner Gentoo sur MIPS</title>
<body>

<p>
Quand vous aurez redémarré, allez dans le <e>System Maintenance Menu</e> et
selectionnez <e>Enter Command Monitor</e> (<c>5</c>). Si vous voulez tester
votre nouvelle Gentoo, vous pouvez juste lancer <c>boot -f &lt;nom du noyau
&gt;</c>. Si vous voulez que votre Gentoo démarre à chaque fois, vous
devrez configurer certaines variables dans la PROM de votre MIPS :
</p>

<pre caption="Configurer la PROM pour booter Gentoo">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;root device&gt; = Patition root de Gentoo, par exemple /dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;root device&gt;</i>

<comment>(Pour lister les noyaux disponibles, tapez "ls")</comment>
&gt;&gt; <i>setenv OSLoader &lt;kernel name&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;kernel name&gt;</i>

<comment>(Déclarer les paramètres du noyau que vous voulez lui passer)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;kernel parameters&gt;</i>

<comment>(Donner le lieu de l'en-tête de disque)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(Booter Gentoo automatiquement)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(Définir le fuseau horaire)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(Utiliser la console série - les utilisateurs d'adaptateur graphique devraient utiliser "g" à la place de "d1")</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
Maintenant, vous êtes prêt à vous amuser avec Gentoo !
</p>

</body>
</subsection>
<subsection>
<title>Facultatif : installation de paquets supplémentaires</title>
<body>

<impo>
Cette partie est réservée aux utilisateurs de GRP. Les autres utilisateurs
devraient passer cette étape et continuer avec <uri
link="?part=1&amp;chap=12">Que faire maintenant ?</uri>.
</impo>

<p>
Maintenant que votre système a démarré, connectez-vous avec le compte utilisateur
que vous avez créé précédemment (par exemple, <c>john</c>) et utilisez
<c>su -</c> pour obtenir les privilèges de root :
</p>

<pre caption="Obtenir les privilèges root">
$ <i>su -</i>
Password: <comment>(Tapez le mot de passe de root)</comment>
</pre>

<p>
Maintenant, nous devons recopier les binaires précompilés à partir
du second CD-ROM (CD-2), si vous l'avez. Tout d'abord, montez-le :
</p>

<pre caption="Monter le CD-2">
<comment>(Mettez le CD-2 dans le lecteur)</comment>
# <i>mount /mnt/cdrom</i>
</pre>

<p>
Maintenant, recopiez tous les paquets précompilés à partir du CD-ROM dans
<path>/usr/portage/packages</path>. Assurez-vous d'utiliser la même commande !
</p>

<pre caption="Recopier les binaires précompilés">
# <i>cp /mnt/cdrom/packages/All/* /usr/portage/packages/All/</i>
</pre>

<p>
Maintenant, installez les paquets que vous voulez. Le CD-2 contient plusieurs
binaires précompilés, par exemple pour KDE :
</p>

<pre caption="Installer KDE">
# <i>emerge --usepkg kde</i>
</pre>

<p>
Assurez-vous d'installer les binaires maintenant. Quand vous ferez un <c>emerge
sync</c> pour mettre l'arbre de Portage à jour (vous apprendrez cela plus
tard), les binaires précompilés ne correspondront plus avec les ebuilds du
nouvel arbre de Portage. Vous pouvez essayer d'empêcher cela en utilisant
<c>emerge --usepkgonly</c> à la place de <c>emerge --usepkg</c>.
</p>

<p>
Félicitations, votre système est maintenant totalement installé ! Continuez avec
<uri link="?part=1&amp;chap=12">Que faire maintenant ?</uri> pour en apprendre
plus à propos de Gentoo.
</p>

</body>
</subsection>
</section>
</sections>
