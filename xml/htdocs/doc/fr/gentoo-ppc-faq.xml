<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/gentoo-ppc-faq.xml,v 1.20 2005/04/05 09:13:00 neysx Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fr/gentoo-ppc-faq.xml" lang="fr">
<title>Foire Aux Questions (FAQ) Gentoo Linux/PowerPC</title>

<author title="Auteur">
  <mail link="rajiv@gentoo.org">Rajiv Manglani</mail>
</author>
<author title="Auteur">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Correcteur">
   <mail link="sejo@gentoo.org">Jochen Maes </mail>
</author>
<author title="Correcteur">
    <mail link="josejx@gentoo.org">Joseph Jezak</mail>
</author>
<author title="Traducteur">
  <mail link="frederic.baujard@dev.gaeia.org">Frédéric Baujard</mail>
</author>
<author title="Traducteur">
  <mail link="clement@varaldi.org">Clément Varaldi</mail>
</author>

<abstract>
Cette FAQ est un ensemble de questions/réponses collectées depuis la liste de
distribution gentoo-ppc-dev et depuis IRC. Si vous avez des questions (ou des
réponses&nbsp;!) à ajouter, veuillez contacter soit un auteur, soit un membre
de l'équipe de documentation.
</abstract>

<license/>

<version>1.15</version>
<date>2005-03-06</date>

<chapter>
<title>Installation</title>

<section>
<title>Comment puis-je vérifier avec Mac OS X que l'ISO téléchargé n'est pas
corrompu&nbsp;?</title>
<body>

<p>
D'abord, vérifiez que vous n'avez pas monté le serveur ftp avec <e>Finder</e>
puis copié le fichier par glisser/déposer. Cela peut corrompre l'ISO.
Utilisez plutôt <c>curl</c> (avec <c>curl -O http://chemin/vers/iso</c>).
</p>

<p>
Tant que Mac OS X ne fournira pas <c>md5sum</c>, vous devrez utiliser la
fonctionnalité de <c>openssl</c> pour produire une vérification de md5. Par
conséquent, tapez dans un terminal&nbsp;:</p>

<pre caption="md5sum avec openssl">
$ <i>openssl md5 /chemin/vers/iso</i>
<comment>Cela peut prendre un moment en fonction de la taille de l'ISO et de votre CPU.</comment>
</pre>

<p>
Maintenant, comparez l'affichage avec le contenu du fichier correspondant avec
l'extension <path>.md5</path> sur le serveur. Si c'est le même, votre
téléchargement est correct. Vérifiez que vous ne l'avez pas déjà monté (par
ex.&nbsp;: avec Disk Copy)&nbsp;!
</p>

</body>
</section>

<section>
<title>Puis-je faire un dual-boot entre Gentoo Linux et Mac OS X&nbsp;?</title>
<body>

<p>
Oui, vous pouvez&nbsp;! En fait, <e>yabootconfig</e> détectera automatiquement
et installera <path>/etc/yaboot.conf</path> avec Linux, Mac OS X et même les
Mac OS classiques (voir le <uri
link="/doc/fr/handbook/handbook-ppc.xml?part=1&amp;chap=9#yaboot">Manuel
Gentoo</uri> pour les détails de yabootconfig). L'astuce est dans la façon de
partitionner votre disque dur. Avant l'installation de Gentoo, démarrez avec
le CD de Mac OS X. Utilisez le <c>Disk Utility</c> pour partitionner le disque
de votre machine en deux ou trois partitions. Vous pouvez aussi utiliser
<c>parted</c> depuis un LiveCD récent pour pouvoir manipuler les partitions HFS
et HFS+. En outre, il est capable de réduire une partition, vous ne devez donc
pas effacer tout le disque. La première partition servira en totalité pour
contenir les différentes partitions Linux (root+swap+/home etc.) Le format de
cette partition importe peu. La seconde partition sera pour Mac OS X. La
troisième partition (optionnelle) sera pour le Mac OS classique.  Cela est
recommandé seulement si vous voulez mettre Mac OS 9 sur une partition separée.
</p>

<note>
Notez que si vous voulez être capable de faire un triple-boot avec yaboot,
Mac OS 9 a besoin d'être sur une partition séparée de Mac OS X.
</note>

<p>
Apres avoir partitionné, installez Mac OS X et Mac OS 9 dans leur partitions
respectives. Une fois l'installation terminée, démarrez en suivant les
indications du <uri link="/doc/fr/handbook/handbook-ppc.xml">Manuel
Gentoo</uri>. Au moment de partitionner, utilisez <c>mac-fdisk</c>
pour <e>supprimer</e> la grande partition que vous avez créée pour Gentoo. Dans
cet espace, créez une partition bootstrap, root, swap et toute autre partition
que vous voulez utiliser avec Gentoo.
</p>

<p>
Si vous avez un Mac «&nbsp;OldWorld&nbsp;» (pre-iMac), suivez une procédure
similaire à celle décrite ci-dessus. Cependant, utilisez le CD d'installation de
Mac OS 9 et l'utilitaire <c>Drive Setup</c>. Les machines «&nbsp;OldWorld&nbsp;»
n'ont pas besoin de partition bootstrap.
</p>

</body>
</section>

<section>
<title>J'ai un Mac «&nbsp;OldWorld&nbsp;» et j'ai besoin d'utiliser BootX.
Cependant, je ne peux pas ouvrir l'installeur de BootX à partir du CD
d'installation de PPC. Que puis-je faire&nbsp;?</title>
<body>

<p>
Vous avez besoin de la nouvelle version de StuffIt Expander pour ouvrir ce
fichier. Vous pouvez la télécharger
<uri link="http://www.stuffit.com/expander/download.html">ici</uri>.</p>

</body>
</section>

<section>
<title>Est-il possible de démarrer avec Gentoo Linux sur une machine
«&nbsp;OldWorld&nbsp;» sans Mac OS&nbsp;? J'aimerais une machine qui n'a pas
Mac OS.</title>
<body>

<p>
Si vous avez du temps pour expérimenter, vous pouvez essayer <uri
link="http://penguinppc.org/projects/quik/">Quik</uri>.  <e>Quik</e> est un
chargeur de démarrage pour les machines PPC «&nbsp;OldWorld&nbsp;». Si votre
machine utilise <e>BootX</e>, vous pouvez utiliser <e>Quik</e>&nbsp;; si elle
utilise yaboot, vous ne pouvez pas. <e>Quik</e> peut être incroyablement
difficile à installer et <e>n'est pas</e> couramment utilisé avec gcc 3.x
(c'est-à-dire&nbsp;: Gentoo 1.4 ou plus récent), mais, si vous réussissez, le
résultat se situe entre «&nbsp;bien soigné&nbsp;» et «&nbsp;stupéfiant&nbsp;»
car Mac OS n'a pas besoin d'être chargé. C'est comme yaboot en plus rapide.
</p>

<p>
Vous devriez lire la <uri
link="http://penguinppc.org/projects/quik/quirks.shtml">page des soucis avec
Quik</uri> ainsi que «&nbsp;<uri
link="http://lppcfom.sourceforge.net/fom-serve/cache/574.html">Quick est-il
mort&nbsp;?</uri>&nbsp;», «&nbsp;<uri
link="http://www.imaclinux.net/php/imaclinux_g_h.php3?single=17+index=0">Guide
Quik&nbsp;: démarrage direct pour vieux PowerMacs</uri>&nbsp;» et «&nbsp;<uri
link="http://www.netbsd.org/Ports/macppc/models.html">support pour les modèles
NetBSD/macppc</uri>&nbsp;» qui documente les versions d'OpenFirmware pour
différents Apple et clones de machines PowerPC.
</p>

<p>Merci à Vladimir pour ces informations.</p>

</body>
</section>

<section>
<title>J'ai une machine G3 beige. Puis-je installer Gentoo Linux/PPC sur un
second disque IDE&nbsp;?</title>
<body>

<p>
Les premières machines G3 beiges (celles avec une carte mère «&nbsp;Rev 1&nbsp;»
avec un chipset ATI RageII+) ne supportent pas les disques esclaves en IDE. Pour
utiliser un second disque dur avec cette machine, vous devrez le brancher sur un
connecteur SCSI interne ou externe ou installer une carte PCI IDE. Les machines
G3 plus récentes n'ont plus cette limitation. Consultez
<uri>http://www.xlr8yourmac.com/G3-ZONE/IDE/index.html</uri> pour plus
d'information.
</p>

</body>
</section>

<section>
<title>Quand j'essaie d'installer Gentoo sur mon PowerBook ou iBook le disque
dur interne n'est pas visible. Que puis-je faire&nbsp;?</title>
<body>

<p>
Pour un PowerBook, passez le paramètre <c>hda=1,1,1</c> au noyau au moment du
démarrage. Cela devrait résoudre vos problèmes. Vous pouvez faire cela au
prompt de <e>yaboot</e> en tapant <c>boot hda=1,1,1</c>. Certains iBooks ont
besoin de <c>hda=16383,16,64</c>.
</p>

</body>
</section>

<section>
<title>Mon fichier /etc/fstab contient /dev/BOOT. Ai-je besoin de rajouter
cette ligne pour ma partition bootstrap&nbsp;?</title>
<body>

<p>
Non. Si vous n'utilisez pas de partition de démarrage séparée
(<path>/boot</path>), alors vous n'avez pas besoin de cette ligne et pouvez
l'effacer de votre <path>/etc/fstab</path>. La partition bootstrap <e>n'est
pas</e> <path>/boot</path> et il n'y a pas de relation entre les deux. En
general, les machines PowerPC n'ont pas besoin d'une partition
<path>/boot</path> séparée et la partition bootstrap ne devrait jamais être
montée.
</p>

</body>
</section>

<section>
<title>L'installation est maintenant terminée. Cependant, après le
redémarrage, j'obtiens des caractères différents de
ceux de mon clavier. Que puis-je faire&nbsp;?</title>
<body>

<p>
Si la disposition de votre clavier est anglaise, il y a probablement un
problème dans la configuration de votre noyau. Vous devez recompiler votre
noyau avec les options suivantes&nbsp;:
</p>

<pre caption="Options Input core support">
<comment>(Par défaut, mais vérifiez-les quand même.)</comment>
&lt;*&gt; Input core support
&lt;*&gt;   Keyboard support
&lt;*&gt;   Mouse support
(1024)   Horizontal screen resolution
(768)    Vertical screen resolution
&lt; &gt;   Joystick support
&lt;*&gt;   Event interface support
</pre>

<pre caption="Macintosh Device Drivers">
 [*] Apple Desktop Bus (ADB) support
 [*]    Use input layer for ADB devices
 [*]      Support for mouse button 2+3 emulation
</pre>

<p>
De cette manière, vous serez toujours capable d'utiliser
<path>/proc/sys/dev/mac_hid</path> pour émuler les boutons 2 et 3 de la souris
(voir la question suivante).
</p>

<p>
Si, pour une raison quelconque, vous ne pouvez pas recompiler votre noyau,
ajoutez <c>keyboard_sends_linux_keycodes=1</c> aux arguments du noyau dans
<path>yaboot.conf</path>. Cela va aussi corriger le problème, mais cela va
peut-être en introduire d'autres.
</p>

<p>Merci à Joe McMahon pour son aide avec cette réponse.</p>

</body>
</section>

<section>
<title>Ma souris n'a qu'un bouton. Comment puis-je définir les boutons 2 et 3
puisque Ctrl-Bouton ne marche pas&nbsp;?</title>
<body>

<p>
Il n'est pas possible d'utiliser Ctrl-Bouton comme avec Mac OS X, mais vous
pouvez définir n'importe quelle touche ou combinaison de touches pour émuler
les boutons 2 et 3. Utilisez la commande <c>showkey</c> pour connaître les
codes des touches. L'émulation des boutons par des touches est activée via
/proc. Faites <c>echo "1" &lt;
/proc/sys/dev/mac_hid/mouse_button_emulation</c>. Ensuite, placez les codes des
touches qui émulent les boutons dans <path>mouse_button2_keycode</path> et
<path>mouse_button3_keycode</path>. Pour conserver votre configuration après un
redémarrage, placez ces codes dans le fichier <path>/etc/sysctl.conf</path>.
Voici un exemple qui utilise F11 et F12&nbsp;:
</p>

<pre caption="Émuler les boutons 2 et 3 avec F11 et F12">
# Enable mouse button emulation
dev.mac_hid.mouse_button_emulation = 1
# Set 2nd button to 87 - F11
dev.mac_hid.mouse_button2_keycode = 87
# Set 3rd button to 88 - F12
dev.mac_hid.mouse_button3_keycode = 88
</pre>

<p>
D'autres codes possibles seraient 100 et 126 pour les combinaisons Fn+Alt et
Fn+Pomme.
</p>

</body>
</section>

<section>
<title>L'installation est maintenant terminée. Cependant, après le démarrage
de ma machine sous Gentoo, j'essaie d'installer un programme avec emerge et je
vois des erreurs disant qu'il ne peut pas «&nbsp;stat&nbsp;» un fichier. Que se
passe-t-il&nbsp;?</title>
<body>

<p>
Vérifiez que l'heure est correctement configurée. Mettez votre machne à l'heure
et définissez le lien <path>/etc/localtime</path> vers votre fuseau horaire
(dans <path>/usr/share/zoneinfo</path>)&nbsp;; cela devrait résoudre votre
problème. Vérifiez aussi que vous <e>n'avez pas</e> activé l'option <e>Enhanced
RTC</e> dans la section <e>Character devices</e> de la configuration du noyau
(comme indiqué dans le guide d'installation).
</p>

</body>
</section>
</chapter>


<chapter>
<title>Support des portables</title>
<section>
<title>Comment puis-je activer la vitesse maximale de mon processeur sur mon
PowerBook sous Linux&nbsp;?</title>
<body>

<note>
Certains (si ce n'est pas tous) processeurs, grâce aux nouveaux noyaux,
fonctionneront à la bonne vitesse. Si vous continuez à avoir des problèmes vous
devriez mettre à jour votre noyau à la dernière version et essayer de nouveau.
N'utilisez cette solution que comme une solution de secours.
</note>

<p>
Certains processeurs de PowerBooks démarrent à une vitesse plus faible que
celle à laquelle ils sont censés tourner.  En tournant à cette vitesse plus
lente, ils augmentent la durée de fonctionnement sur la batterie mais diminuent
les performances. Le système d'exploitation de la machine doit ordonner au
matériel de tourner à la vitesse maximale. Dans Mac OS X, cela s'appelle
«&nbsp;Reduced processor performance&nbsp;», ou «&nbsp;CPU Scaling&nbsp;», sous
Linux. Pour vérifier la vitesse actuelle de votre processeur sous Linux, tapez
<c>cat /proc/cpuinfo</c>. Dans Mac OS X, vous devez d'abord désactiver
«&nbsp;Reduce processor performance&nbsp;» dans
«&nbsp;Options&nbsp;» du tableau dans le menu préférences du système de gestion de
l'énergie. Ensuite, lancez le profileur système d'Apple (dans
Applications--&gt;Utilities).
</p>

<warn>
Ne pas utiliser cette méthode pour surcadencer («&nbsp;overclocker&nbsp;»)
votre machine. Les résultats sont imprévisibles si vous utilisez une mauvaise
valeur. Nous ne sommes pas responsables si vous grillez votre machine&nbsp;!
</warn>

<p>
Si le profileur système d'Apple vous donne une valeur supérieure à ce que vous
avez quand vous êtes sous linux, vous pouvez activer la vitesse maximale du
processeur avec une simple commande. Premièrement, votre machine a besoin de
tourner avec un noyau <c>2.4.20-pre9-ben0</c> ou plus récent. Les noyaux plus
anciens n'ont pas le code nécessaire pour changer la vitesse du processeur.
Deuxièmement, vous aurez besoin de compiler votre noyau avec l'option <c>CPU
Frequency scaling</c> <e>désactivée</e>. Finalement, lancez la commande ad hoc
comme dans l'exemple ci-dessous.
</p>

<pre caption="« CPU Frequency scaling »">
<codenote>Ce sont des exemples.</codenote>
<codenote>Utilisez les valeurs appropriées selon votre machine.</codenote>

echo "0:667000:1000000:performance" > /proc/cpufreq    <codenote>Pour un PowerBook G4 à 1 GHz</codenote>
echo "0:667000:800000:performance" > /proc/cpufreq     <codenote>Pour un PowerBook G4 à 800 Mhz</codenote>
</pre>

<p>
La plupart des utilisateurs voudront ajouter cette commande à la fin du fichier
<path>/etc/conf.d/local.start</path>.  Ce fichier est lu à chaque fois que la
machine démarre sous Linux.
</p>

</body>
</section>

<section>
<title>J'utilise Gentoo sur un portable PowerPC. Quels paquets dois-je installer
pour activer les fonctionnalités de mon portable&nbsp;?</title>
<body>

<p>Vous devez installer 3 paquets principaux.</p>

<ul>
  <li>
    <e>pbbuttonsd</e> vous permet d'utiliser les différents boutons présents sur
    le portable, par exemple pour le volume et la luminence sur la plupart des
    portables PPC actuels. La version actuelle gère aussi l'énergie.
  </li>
  <li>
    <e>gtkpbbuttons</e> vous donne une interface gtk pour pbbuttonsd (retour
    visuel de la pression du bouton sous X). <e>gtkpbbuttons</e> requiert gtk et
    devrait être ajouté à votre fichier de session X (<path>~/.Xsession</path>)
    pour de meilleurs résultats (pour qu'il tourne en permanence sous X).
  </li>
  <li>
    <e>powerprefs</e> s'utilise avec pbbuttonsd et vous permet d'éditer les
    paramètres comme celui du «&nbsp;trackpad&nbsp;» et de la gestion de
    l'énergie ainsi que d'autres préférences.
  </li>
  <li>
    <e>cpudyn</e> permet d'adapter la vitesse du processeur pour préserver la
    durée de vie de votre batterie.
  </li>
</ul>

<p>
Ces paquets peuvent être installés avec les commandes appropriées de la liste
ci-dessous&nbsp;:
</p>

<pre caption="Installer les paquets spécifiques aux portables">
# <i>emerge pbbuttonsd; rc-update add pbbuttonsd default</i>
# <i>emerge gtkpbbuttons</i>
# <i>emerge powerprefs</i>
# <i>emerge cpudyn</i>
</pre>

<note>
Vous devriez éditer votre <path>/etc/pbbuttonsd.conf</path> pour définir vos
préférences, particulièrement pour le comportement des touches Fx, puisque
pbbuttonsd vous permet d'utiliser les touches Fx normalement et de régler la
luminosité et le son en les combinant avec la touche Fn.
</note>

<p>
Il est utile d'ajouter pbbuttonsd et cpudyn au niveau de démarrage <e>boot</e>
afin qu'ils soient exécutés dès que votre ordinateur démarre. Pour faire
cela&nbsp;:
</p>
 <pre caption="Ajouter pbbuttonsd et cpudyn au niveau de démarrage boot">
 # <i>rc-update add pbbuttonsd boot</i>
 # <i>rc-update add cpudyn boot</i>
 </pre>

</body>
</section>

<section>
<title>Comment puis-je configurer mon Airport ou une autre carte Wi-Fi sur ma
machine &nbsp;?</title>
<body>

<p>
D'abord, vérifiez que vous avez le support de la carte compilée dans le noyau
ou qu'il est compilé comme un module et chargé. Vous pouvez changer votre
configuration sans fil avec la commande iwconfig. Elle fait partie du paquet
<c>wireless-tools</c>.
</p>

<p>
Par exemple, pour donner à SSID la valeur home_ssid avec iwconfig, faites&nbsp;:
</p>
<pre caption="Configurer un SSID">
 # iwconfig wlan0 essid home_ssid
 </pre>

<p>
Où wlan0 est le nom de votre dispositif sans fil. Pour les utilisateurs de carte
Airport, le dispositif wifi est souvent nommé eth1. Pour plus de détails sur
l'utilisation de iwconfig, référez-vous à sa page de manuel.
</p>

<note>
Les cartes Airport Extreme ne sont actuellement pas supportées par Linux.
</note>

</body>
</section>

<section>
<title>Est-ce que le modem interne dans un iBook2 ou PowerBook
fonctionne&nbsp;?</title>
<body>

<p>
<c>emerge <path>net-dialin/hcfusbmodem</path></c> vous donnera
<path>/dev/ttySHCF0</path>. Puis, configurez ppp comme habituellement.  De plus
amples informations sur l'installation peuvent être trouvées à
<uri>http://www.linuxant.com/drivers/hcf/install.html</uri>
</p>

</body>
</section>

<section>
 <title>Est-ce que la commande sleep fonctionne sur mon
iBook/PowerBook&nbsp;?</title>
<body>

<p>
La commande sleep (suspendre l'utilisation en RAM) fonctionne très bien sur tous
les iBooks et TiBooks G3. Récemment, un correctif au noyau a été mis à
disposition qui propose le support de sleep sur les iBooks G4 et les *Books
utilisant des cartes vidéo Radeon. Si vous disposez d'un portable de ce type,
merci de vous référer à ce fil de discussion sur le forum pour plus de
détails&nbsp;: <uri>http://forums.gentoo.org/viewtopic.php?t=254232</uri>.
</p>

<note>
Vous remarquerez que les PowerBook 12" ne sont toujours pas supportés, parce
qu'ils utilisent un chipset nVidia.
</note>
          
 </body>
 </section>
</chapter>

<chapter>
<title>Applications</title>
<section>
<title>
  Je ne peux pas installer de paquet ou j'obtiens une erreur indiquant qu'il
  est masqué. Que puis-je faire&nbsp;?
</title>
<body>

<p>
Deux raisons principales peuvent être à l'origine de ce problème.  Soit il n'a
pas été testé sur une architecture PPC, soit il a été testé, mais n'a pas
encore été marqué comme stable.
</p>

<p>
Si votre paquet n'a pas encore été testé sur PPC, vous devez tout d'abord
marquer l'ebuild du mot-clef ppc. Vous pouvez le faire en utilisant l'outil
ekeyword qui est dans le paquet gentoolkit-dev. Exécutez alors la
commande&nbsp;:
</p>

<pre caption="Ajouter le mot-clef ppc à app-foo/bar">
# <i>ekeyword ppc /usr/portage/app-foo/bar/bar-1.0.ebuild</i>
</pre>

<p>
Une fois que l'ebuild aura été marqué, vous pourrez alors l'installer
normalement. Testez l'application et, si elle fonctionne, <b>s'il vous
plaît</b> faites un rapport de bogue pour indiquer aux développeurs qu'ils
peuvent ajouter le mot-clef.
</p>

<note>
Cette modification ne restera que jusqu'à la prochaine synchronisation de
Portage. Si vous voulez une modification plus permanente, vous devrez utiliser
l'<e>overlay</e> de Portage. Lisez la documentation de Portage pour plus
d'information.
</note>

<p>
Si votre paquet a déjà le mot-clef ~ppc, vous avez deux options. Soit vous suivez
les instructions ci-dessus et remplacez ~ppc par ppc, soit vous utilisez le
répertoire <path>/etc/portage</path> pour démasquer le paquet en question.
</p>

<pre caption="Utiliser /etc/portage pour démasquer app-foo/bar">
# <i>echo "=app-foo/bar-1.0 ~ppc" &gt; /etc/portage/package.keywords</i>
</pre>

<note>
Si le répertoire <path>/etc/portage</path> n'existe pas, vous devrez d'abord le
créer.
</note>

<p>
Maintenant, installez normalement le paquet. Une fois que vous êtes sûr que le
paquet est stable, <b>merci</b> de nous faire un rapport de bogue pour demander
aux développeurs d'ajouter le mot-clef.
</p>

</body>
</section>
<section>
<title>Est-ce que Gentoo/PPC fournit un support pour Flash&nbsp;?</title>
<body>

<p>
Non, Macromedia n'a jamais mis à disposition de binaire pour Linux/ppc et tant
que Macromedia n'aura pas libéré le format flash ou proposé de binaire, le flash
ne fonctionnera pas sur architecture ppc. Une possibilité est d'utiliser qemu
(un émulateur x86) pour lancer le lecteur Macromedia Flash Player 6. La
méthode est décrite ici&nbsp;:
<uri>http://forums.gentoo.org/viewtopic.php?t=117774</uri>.
</p>

</body>
</section>

<section>
<title>Est-ce que Gentoo/PPC dispose d'un plugin java&nbsp;?</title>
<body>

<p>
Non, pas pour le moment. L'ancien plugin java n'est plus compatible avec le
nouveau système de plugin de Mozilla et aucun nouveau plugin n'a été écrit
depuis.
</p>

</body>
</section>

<section>
<title>Y a-t-il une façon simple de configurer X&nbsp;?</title>
<body>

<p>
Vous pouvez faire <c>emerge Xautoconfig</c>, tout simplement. Une fois que le
paquet est installé, exécutez Xautoconfig pour générer la configuration pour
votre installation. Pour activer le DRM, vous devrez peaufiner encore un peu
cette configuration, lisez le chapitre suivant pour savoir comment faire.
</p>

</body>
</section>

<section>
<title>Comment puis-je activer le Direct Rendering (DRM) sur une rage128 ou une
carte radeon&nbsp;?</title>
<body>

<p>
Vérifiez que la configuration de votre noyau contient les options
suivantes&nbsp;:
</p>

<pre caption="Configuration noyau pour le support DRM">
Device Drivers - Character devices ---&gt;
&lt;*&gt; /dev/agpgart (AGP Support)
[*] Apple UniNorth support
[*] Direct Rendering Manager (DRI support)
&lt; &gt; ATI Rage 128
&lt; &gt; ATI Radeon
Device Drivers - Graphics Support ---&gt;
 &lt;*&gt;   ATI Rage 128 display support
 &lt;*&gt;   ATI Radeon display support
</pre>

<p>
Recompilez et installez le noyau si nécessaire. Après cela, vérifiez que vous
démarrez sur le «&nbsp;framebuffer&nbsp;» natif (comme radeonfb ou atyfb et
<e>non</e> depuis offb ou ofonly) et lancez <c>Xautoconfig</c>.
</p>

<impo>
Vous devrez éditer votre fichier <path>/etc/X11/xorg.conf</path> en fonction de
votre carte vidéo. Assurez-vous que le pilote choisi est soit ati, soit un
pilote spécifique à votre carte (r128 ou radeon). Vérifiez également que
l'extension DRI est chargée et non commentée.
</impo>

<note>
Il n'y a actuellement aucun support DRI pour les chipsets R300/R400. Un projet
a démarré sur <uri>http://r300.sourceforge.net</uri>. Les chipsets nVidia sont
également généralement non supportées sur PPC. Un support de base est fourni
avec le pilote nv, mais il ne propose aucune accélération 3D.
</note>

</body>
</section>

<section>
<title>J'ai récemment installé XFree, mais quand je l'utilise, mon clavier
international ne marche pas correctement. Les touches principales fonctionnent
bien mais je ne peux pas entrer de symboles spéciaux comme l'arobase. La sortie
de la commande startx dit quelque chose comme «&nbsp;could not load keymap,
falling back to default keymap&nbsp;». Que puis-je faire&nbsp;?</title>
<body>

<p>
Vérifiez que les permissions sur <path>/var/tmp</path> sont mises à
<path>drwxrwxrwx</path>. Si ce n'est pas le cas, changez-les en tapant <c>chmod
a+rwx /var/tmp</c>. Cela permettra à XFree de charger les keymaps correctement.
</p>

</body>
</section>

<section>
<title>Lors de l'utilisation de OpenGL DRI ou en visionnant des films,
le système se bloque à l'improviste. Que puis-je y faire&nbsp;?</title>
<body>

<p>
Votre système ne gère pas proprement le support AGP. La solution la plus simple
consiste à ajouter la ligne suivante à la section «&nbsp;Device&nbsp;» de
<path>/etc/X11/xorg.conf</path>&nbsp;:
</p>

<pre caption="Forcer le mode PCI pour carte AGP">
Option       "ForcePCIMode"
</pre>

<p>
Il y a quelques problèmes connus avec les extensions composite et damage incluses
dans les dernières versions de X.org. Il vous faudra les désactiver si vous
rencontrez des problèmes.
 </p>

</body>
</section>

<section>
<title>Comment puis-je faire fonctionner le son&nbsp;?</title>
<body>

<p>
Deux approches possibles sont disponibles, en utilisant au choix OSS ou ALSA.
OSS est l'ancienne option et a été déclarée désuète, mais continue de
fonctionner très bien sur de nombreux anciens Macs. ALSA est la méthode récente
et elle continuera d'être supportée dans le futur. Nous vous recommandons
d'utiliser ALSA, sauf si vous rencontrez des problèmes avec.
</p>

<note>
Si vous incluez les pilotes OSS dans votre noyau, les pilotes ALSA ne se
chargeront pas.
</note>

<p>
En plus de la configuration du noyau, les utilisateurs qui doivent avoir accès
aux périphériques audio doivent être ajoutés au groupe approprié, avec la
commande&nbsp;:
</p>

<pre caption="Ajouter un utilisateur au groupe audio">
# <i>gpasswd -a nomUtilisateur audio</i>
</pre>

<p>
Si le noyau a été correctement configuré, mais que vous n'entendez toujours
aucun son, assurez-vous que le volume principal du mixeur est suffisant et que
le dispositif n'est pas mis en position muette&nbsp;!
</p>

<note>
Actuellement, aucun support des cartes son n'est fourni pour les G5. Le Mac
Mini n'est actuellement supporté qu'à l'aide d'un <e>hack</e>. Pour plus
d'information sur le Mac Mini, veuillez lire <uri
link="http://forums.gentoo.org/viewtopic-t-297244.html">cette discussion</uri>
des forums Gentoo.
</note>

</body>
</section>
<section>
<title>Configuration du son avec ALSA</title>
<body>

<p>
Pour ALSA, nous allons activer à la fois les pilotes ALSA habituels et la couche
d'émulation OSS afin de toujours pouvoir utiliser les programmes ne fonctionnant
qu'avec OSS. Dans votre <c>make menuconfig</c> vous devez sélectionner&nbsp;:
</p>

<pre caption="Options du noyau pour le son avec ALSA">
Device Drivers - Sound ---&gt;
&lt;*&gt; Sound card support
    Advanced Linux Sound Architecture ---&gt;
    &lt;*&gt;   PowerMac DMA sound support
      &lt;*&gt; Advanced Linux Sound Architecture
      &lt;*&gt; Sequencer support
      &lt;*&gt; Sequencer dummy client
      &lt;*&gt; OSS Mixer API
      &lt;*&gt; OSS PCM (digital audio) API
      [*] OSS Sequencer API
          ALSA PowerMac devices ---&gt;
           &lt;*&gt; PowerMac (AWACS, DACA, Burgundy, Tumbler, Keywest)
</pre>

<p>
(Vous pouvez également configurer l'ensemble en modules et vous assurer qu'ils
sont chargés au démarrage).
</p>

<note>
Assurez-vous que l'option <c>PowerMac DMA sound support</c> est désactivée,
sinon le module ALSA ne pourra pas se charger.
</note>

</body>
</section>

<section>
<title>Configuration du son avec OSS</title>
<body>
<p>
Dans votre <c>make menuconfig</c> vous devrez sélectionner&nbsp;:
</p>

<pre caption="Options du noyau pour le son avec OSS">
&lt;*&gt; Sound card support
  &lt;*&gt;   PowerMac DMA sound support
</pre>

<p>
(Vous pouvez également configurer l'ensemble en modules et vous assurer qu'ils
sont chargés au démarrage).
</p>

<p>
Si le module <c>dmasound_pmac</c> n'est pas chargé, vous devrez probablement
activer l'option <c>i2c-core</c> dans le noyau en dur ou comme module.
</p>

</body>
</section>

<section>
<title>Comment puis-je écouter un CD audio&nbsp;?</title>
<body>

<p>
Les machines «&nbsp;New World&nbsp;» n'ont pas de connexion audio entre le
lecteur de CD-ROM et le périphérique audio. Les informations audio doivent donc
être lues comme des données et puis envoyées vers la carte son. C'est possible en
utilisant <e>xmms</e> et le plugin <e>xmms-cdread</e> qui lit l'audio du CD sur
le câble ATA, le décode de façon logicielle et l'envoie vers la carte son par
le bus PCI comme des données numériques. Si vous voulez un vrai lecteur de CD,
vous devez suivre les étapes suivantes&nbsp;:
</p>

<p>
Premièrement, vous devez recompiler votre noyau avec les options
suivantes&nbsp;:
</p>

<pre caption="Options du noyau pour les CD audio">
<codenote>Dans "ATA/IDE/MFM/RLL Support"</codenote>
<codenote>Dans "IDE, ATA, and ATAPI Block Devices"</codenote>
&lt; &gt; Include IDE/ATAPI CDROM support  <codenote>À désactiver</codenote>
&lt;M&gt; SCSI emulation support           <codenote>À compiler comme module</codenote>

<codenote>Dans "SCSI Support"</codenote>
&lt;M&gt; SCSI support                     <codenote>À compiler comme module</codenote>
&lt;M&gt; SCSI CD-ROM support              <codenote>À compiler comme module</codenote>
</pre>

<p>
Puis, ajoutez <c>hdX=ide-scsi</c> à votre description de l'image du noyau dans
<path>/etc/yaboot.conf</path> où <c>hdX</c> est le périphérique IDE
correspondant à votre lecteur CD. C'est en général <c>hdc</c>. Tapez <c>ybin
-v</c> pour installer les paramètres du nouveau yaboot.conf. Éditez
<path>/etc/group</path> pour ajouter au groupe <c>cdrom</c> des utilisateurs
qui pourront écouter des CD. Vous devez redémarrer votre système pour que les
changements apportés au noyau prennent effet.
</p>

<p>
Apres le redémarrage, tapez <c>su</c> pour devenir root et changez les
permissions sur le périphérique du CD-ROM, puis installez xmms&nbsp;:
</p>

<pre caption="Changer les permissions pour le cdrom et installer xmms-read">
# <i>chown root:cdrom /dev/scsi/host0/bus0/target0/lun0/cd</i>
# <i>chmod 660 /dev/scsi/host0/bus0/target0/lun0/cd</i>
# <i>emerge xmms xmms-cdread</i>
</pre>

<note>
Vérifier que vous utilisez le chemin correpondant au lecteur CD de votre
machine.
</note>

<p>
Pour écouter un CD, lancez <c>xmms</c> et entrez <c>/dev/cdrom</c> comme
fichier à écouter.
</p>

</body>
</section>

<section>
<title>Puis-je lancer Mac OS ou Mac OS X sous Gentoo Linux&nbsp;?</title>
<body>

<p>
Oui, à condition d'utiliser Gentoo Linux/PPC sur du matériel Apple (ou un clone
de Mac). Vous devez exécuter <uri
link="http://www.maconlinux.org/">Mac-on-Linux</uri>. Faites seulement
<c>emerge mol</c>. Mac On Linux supporte Mac OS de 7.5.2 à 9.2.2 et toutes les
versions de Mac OS X. Il peut être lancé en plein écran ou dans une fenêtre.
</p>

<note>
Pour exécuter MOL en plein écran, vous devrez compiler MOL avec le paramètre USE
fbcon.
</note>

<p>
Pour ce qui est du réseau et du son, vous devrez installer les pilotes dans le
répertoire <path>MOL-Install</path> sur votre bureau Mac OS X. Si des erreurs
avec le réseau surviennent, vérifiez que vous avez activé les options suivantes
dans le noyau&nbsp;:
</p>

<p>Pour le serveur DHCP&nbsp;:</p>

<ul>
<li>Socket Filtering (CONFIG_FILTER)</li>
<li>Packet Socket (CONFIG_PACKET)</li>
</ul>

<p>Pour le NAT&nbsp;:</p>

<ul>
<li>Network packet filtering (CONFIG_NETFILTER)</li>
<li>Connection tracking (CONFIG_IP_NF_CONNTRACK)</li>
<li>IP tables support (CONFIG_IP_NF_IPTABLES)</li>
<li>Packet filtering (CONFIG_IP_NF_FILTER)</li>
<li>Full NAT (CONFIG_IP_NF_NAT)</li>
<li>MASQUERADE target support (CONFIG_IP_NF_TARGET_MASQUERADE)</li>
</ul>

</body>
</section>

<section>
<title>Quels sont les options de USE pour Portage qui ne fonctionnent pas avec
une machine PowerPC&nbsp;?</title>
<body>

<p>
Consultez la liste dans <path>/etc/make.profile/make.defaults</path>.
</p>

</body>
</section>

<section>
<title>Comment puis-je utiliser distcc avec une machine x86&nbsp;?</title>
<body>

<p>
Si vous disposez d'une seconde machine relativement rapide, vous pouvez
l'utiliser avec distcc pour compiler des binaires pour votre processeur ppc.
Il est préférable de compiler le plus de binaires possibles sur la machine
la plus rapide. Vous pouvez même ne pas compiler sur l'ordinateur le plus lent.
Voici deux liens qui vous permettront de mettre en place ceci&nbsp;:
<uri>http://dev.gentoo.org/~vapier/CROSS-COMPILE-HOWTO</uri> et
<uri>http://www.sable.mcgill.ca/~dbelan2/crossdev/crossdev-powerpc-i686.html</uri>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Ressources</title>
<section>
<title>Puis-je acheter un CD de Gentoo Linux/PPC&nbsp;?</title>
<body>

<p>
Oui&nbsp;! nous vendons Gentoo sur CD-ROM dans notre <uri
link="http://store.gentoo.org/">boutique Gentoo</uri>. Vous pouvez choisir
entre différents CD avec des paquets pré-compilés pour du matériel ppc
générique ou optimisés pour processeurs G3 et G4, ou un LiveCD KDE/GNOME qui
démarre directement dans un environnement Gentoo/Linux.
</p>

</body>
</section>

<section>
<title>Cette FAQ n'a pas repondu à mes questions. Que puis-je faire
maintenant&nbsp;?</title>
<body>

<p>
La première chose à faire est de naviguer parmi <uri
link="/doc/fr/index.xml">la documentation sur www.gentoo.org</uri>. Deux <uri
link="/main/en/lists.xml">listes de diffusion</uri> spécifiques au PPC existent
déjà, gentooppc-dev et gentooppc-user. <uri
link="http://forums.gentoo.org/viewforum.php?f=24">Gentoo sur PPC</uri> (sur
forums.gentoo.org) est un forum ouvert pour les discussions sur tous les types
de PowerPC. Il y a aussi une discussion en direct sur IRC. Rejoignez-nous sur
<c>#gentoo-ppc</c> de <c>irc.freenode.net</c>.
</p>

<p>
Des informations générales à propos de Linux sur PowerPC se trouvent sur <uri
link="http://penguinppc.org/">penguinppc.org</uri>. Des informations générales
sur Linux sont disponibles sur <uri
link="http://www.linuxdoc.org/">www.linuxdoc.org</uri>.
</p>

</body>
</section>
</chapter>
</guide>
