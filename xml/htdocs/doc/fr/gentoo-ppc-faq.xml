<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fr/gentoo-ppc-faq.xml,v 1.25 2005/09/29 12:29:15 neysx Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fr/gentoo-ppc-faq.xml" lang="fr">

<title>Foire Aux Questions (FAQ) Gentoo Linux/PowerPC</title>

<author title="Auteur">
  <mail link="rajiv@gentoo.org">Rajiv Manglani</mail>
</author>
<author title="Auteur">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Correcteur">
   <mail link="sejo@gentoo.org">Jochen Maes</mail>
</author>
<author title="Correcteur">
    <mail link="josejx@gentoo.org">Joseph Jezak</mail>
</author>
<author title="Traducteur">
  <mail link="frederic.baujard@dev.gaeia.org">Frédéric Baujard</mail>
</author>
<author title="Traducteur">
  <mail link="clement@varaldi.org">Clément Varaldi</mail>
</author>

<abstract>
Cette FAQ est un ensemble de questions/réponses collectées depuis la liste de
distribution gentoo-ppc-dev et depuis IRC. Si vous avez des questions (ou des
réponses&nbsp;!) à ajouter, veuillez contacter soit un auteur, soit un membre
de l'équipe de documentation.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.22</version>
<date>2005-08-22</date>

<chapter>
<title>Installation</title>

<section>
<title>Comment puis-je vérifier avec Mac OS X que l'ISO téléchargé n'est pas
corrompu&nbsp;?</title>
<body>

<p>
D'abord, vérifiez que vous n'avez pas monté le serveur ftp avec <e>Finder</e>
puis copié le fichier par glisser/déposer. Cela peut corrompre l'ISO.
Utilisez plutôt <c>curl</c> (avec <c>curl -O http://chemin/vers/iso</c>).
</p>

<p>
Vous pouvez vérifier votre MD5 avec l'utilitaire <c>md5sum</c> proposé sous OSX.
Pour les versions de OSX sans md5sum, vous pouvez utiliser les possibilités
offertes par <c>openssl</c> pour construire une somme md5.
</p>

<pre caption="md5sum avec openssl">
<comment>Cela peut prendre un moment en fonction de la taille de l'ISO et de votre CPU.</comment>
$ <i>openssl md5 /chemin/vers/iso</i>
</pre>

<p>
Maintenant, comparez l'affichage avec le contenu du fichier correspondant avec
l'extension <path>.md5</path> sur le serveur. Si c'est le même, votre
téléchargement est correct. Vérifiez que vous ne l'avez pas déjà monté (par
ex.&nbsp;: avec Disk Copy)&nbsp;!
</p>

</body>
</section>

<section>
<title>Puis-je faire un dual-boot entre Gentoo Linux et Mac OS X&nbsp;?</title>
<body>

<p>
Oui, vous pouvez&nbsp;! En fait, <e>yabootconfig</e> détectera automatiquement
et installera <path>/etc/yaboot.conf</path> avec Linux, Mac OS X et même les
Mac OS classiques (voir le <uri
link="/doc/fr/handbook/handbook-ppc.xml?part=1&amp;chap=9#yaboot">Manuel
Gentoo</uri> pour les détails de yabootconfig). L'astuce est dans la façon de
partitionner votre disque dur. Avant l'installation de Gentoo, démarrez avec le
CD de Mac OS X. Utilisez le <c>Disk Utility</c> pour partitionner le disque de
votre machine en deux ou trois partitions. Vous pouvez aussi utiliser
<c>parted</c> depuis un CD-ROM d'installation récent pour pouvoir manipuler les
partitions HFS et HFS+. En outre, il est capable de réduire une partition, vous
pouvez donc ne pas avoir à effacer tout le disque. La première partition doit
être suffisamment grande pour contenir les différentes partitions Linux
(root+swap+/home etc.). Le format de cette partition importe peu. La seconde
partition sera pour Mac OS X. La troisième partition (optionnelle) sera pour le
Mac OS classique. Cela n'est recommandé que si vous souhaitez avoir Mac OS 9 en
plus des autres systèmes d'exploitation. En effet, OS9 doit être installé sur
une partition séparée par rapport à OSX pour pouvoir fonctionner.
</p>

<p>
Apres avoir partitionné, installez Mac OS X et Mac OS 9 dans leur partitions
respectives. Une fois l'installation terminée, démarrez en suivant les
indications du <uri link="/doc/fr/handbook/handbook-ppc.xml">Manuel
Gentoo</uri>. Au moment de partitionner, utilisez <c>mac-fdisk</c>
pour <e>supprimer</e> la grande partition que vous avez créée pour Gentoo. Dans
cet espace, créez une partition bootstrap, root, swap et toute autre partition
que vous souhaitez utiliser avec Gentoo.
</p>

<p>
Si vous avez un Mac «&nbsp;OldWorld&nbsp;» (pre-iMac), suivez une procédure
similaire à celle décrite ci-dessus. Cependant, utilisez le CD d'installation de
Mac OS 9 et l'utilitaire <c>Drive Setup</c>. Les machines «&nbsp;OldWorld&nbsp;»
n'ont pas besoin de partition bootstrap.
</p>

<note>
Si yabootconfig ne détecte pas vos partitions MacOS, vous pouvez toujours les
ajouter manuellement dans votre configuration de yaboot. Voyez l'exemple de
yaboot.conf dans le
<uri link="/doc/fr/handbook/handbook-ppc.xml?part=1&amp;chap=10#doc_chap_pre6">manuel</uri>
pour plus de détails.
</note>

</body>
</section>
<section>
<title>
  J'ai un nouveau Mac NewWorld, un G3 bleu ou blanc. Il devrait être compatible
  avec le LiveCD mais en démarrant dessus j'obtiens l'erreur «&nbsp;Unknown or
  corrupt filesystem&nbsp;».
</title>
<body>

<p>
Pour détourner ce problème, démarrez sur l'Open Firmware en maintenant appuyées
les touches Pomme + Option + O + F au demarrage. À l'invite de commandes,
tapez&nbsp;:
</p>

<pre caption="Démarrage sur le CD pour les machines Mac NewWorld récentes">
<i>boot cd:,\\yaboot</i>
</pre>

<p>
Le CD-ROM devrait alors démarrer comme nous le souhaitions. Merci à John Plesmid
pour cette astuce.
</p>

</body>
</section>

<section>
<title>J'ai un Mac «&nbsp;OldWorld&nbsp;» et j'ai besoin d'utiliser BootX.
Cependant, je ne peux pas ouvrir l'archive de l'installeur de BootX. Que puis-je
faire&nbsp;?</title>
<body>

<p>
Vous avez besoin d'une nouvelle version de StuffIt Expander pour ouvrir cette
archive. Vous pouvez la télécharger
<uri link="http://www.stuffit.com/expander/download.html">ici</uri>
gratuitement.
</p>

</body>
</section>
<section>
<title>
J'ai une machine G3 beige. Puis-je installer Gentoo Linux/PPC sur un
second disque IDE&nbsp;?
</title>
<body>

<p>
Les premières machines G3 beiges (celles avec une carte mère «&nbsp;Rev 1&nbsp;»
avec un chipset ATI RageII+) ne supportent pas les disques esclaves en IDE. Pour
utiliser un second disque dur avec cette machine, vous devrez le brancher sur un
connecteur SCSI interne ou externe ou installer une carte PCI IDE. Les machines
G3 plus récentes n'ont plus cette limitation. Consultez
<uri>http://www.xlr8yourmac.com/G3-ZONE/IDE/index.html</uri> pour plus
d'information.
</p>

</body>
</section>

<section>
<title>Quand j'essaie d'installer Gentoo sur mon PowerBook ou iBook le disque
dur interne n'est pas visible. Que puis-je faire&nbsp;?</title>
<body>

<p>
Pour un PowerBook, passez le paramètre <c>hda=1,1,1</c> au noyau au moment du
démarrage. Cela devrait résoudre vos problèmes. Vous pouvez faire cela au
prompt de <e>yaboot</e> en tapant <c>boot hda=1,1,1</c>. Certains iBooks ont
besoin de <c>hda=16383,16,64</c>.
</p>

</body>
</section>

<section>
<title>
J'utilise une révision A ou B d'iMac. J'ai remplacé le disque dur par un nouveau
plus grand, mais je ne peux plus démarrer sur rien&nbsp;!
</title>
<body>

<p>
Sur ces machines il existe une limitation de la taille de la partition racine
qui est de 8Go. Assurez-vous que votre partition racine fait bien moins de 8Go
et tout devrait fonctionner comme vous le souhaitiez. Cela s'applique aussi à
OS X et aux versions de OS 9.
</p>

</body>
</section>
<section>
<title>
Mon fichier /etc/fstab contient /dev/BOOT. Ai-je besoin de rajouter
cette ligne pour ma partition bootstrap&nbsp;?
</title>
<body>

<p>
Non. Si vous n'utilisez pas de partition de démarrage séparée
(<path>/boot</path>), alors vous n'avez pas besoin de cette ligne et pouvez
l'effacer de votre <path>/etc/fstab</path>. La partition bootstrap <e>n'est
pas</e> <path>/boot</path> et il n'y a pas de relation entre les deux. En
general, les machines PowerPC n'ont pas besoin d'une partition
<path>/boot</path> séparée et la partition bootstrap ne devrait jamais être
montée.
</p>

</body>
</section>
<section>
<title>
Quand j'ai redémarré, yaboot n'a pas fonctionné, et maintenant je suis
coincé&nbsp;! Que faire&nbsp;?
</title>
<body>

<p>
C'est probablement dû à une mauvaise configuration de yaboot.conf. La meilleure
façon de le corriger est de démarrer de nouveau sur le CD-ROM d'installation,
monter vos partitions Gentoo et chercher les erreurs dans le fichier
yaboot.conf. Vous devrez également lancer la commande <c>ybin -v -C
/mnt/gentoo/etc/yaboot.conf</c> pour mettre à jour votre chargeur de démarrage
une fois les corrections effectuées. Cela peut être réalisé sans avoir besoin de
revenir en environnement chroot dans vos partitions Gentoo.
</p>

<note>
Si vous n'avez <e>vraiment</e> qu'envie de retourner à OSX, essayez de maintenir
la touche Option de votre clavier appuyée lors du démarrage. Cela devrait vous
donner accès à une interface graphique de sélection des disques sur lesquels
vous pouvez démarrer. Choisissez OSX et souvenez-vous que vous devrez corriger
le problème plus tard.
</note>

</body>
</section>
<section>
<title>
L'installation est maintenant terminée. Cependant, après le redémarrage,
j'obtiens des caractères différents de ceux de mon clavier. Que puis-je
faire&nbsp;?
</title>
<body>

<p>
Si la disposition de votre clavier est anglaise, il y a probablement un
problème dans la configuration de votre noyau. Vous devez recompiler votre
noyau avec les options suivantes&nbsp;:
</p>

<pre caption="Options Input core support">
<comment>(Par défaut, mais vérifiez-les quand même.)</comment>
&lt;*&gt; Input core support
&lt;*&gt;   Keyboard support
&lt;*&gt;   Mouse support
(1024)   Horizontal screen resolution
(768)    Vertical screen resolution
&lt; &gt;   Joystick support
&lt;*&gt;   Event interface support
</pre>

<pre caption="Macintosh Device Drivers">
 [*] Apple Desktop Bus (ADB) support
 [*]    Use input layer for ADB devices
 [*]      Support for mouse button 2+3 emulation
</pre>

<p>
De cette manière, vous serez toujours capable d'utiliser
<path>/proc/sys/dev/mac_hid</path> pour émuler les boutons 2 et 3 de la souris
(voir la question suivante).
</p>

<p>
Si, pour une raison quelconque, vous ne pouvez pas recompiler votre noyau,
ajoutez <c>keyboard_sends_linux_keycodes=1</c> aux arguments du noyau dans
<path>yaboot.conf</path>. Cela va aussi corriger le problème, mais cela va
peut-être en introduire d'autres.
</p>

<p>Merci à Joe McMahon pour son aide avec cette réponse.</p>

</body>
</section>

<section>
<title>Ma souris n'a qu'un bouton. Comment puis-je définir les boutons 2 et 3
puisque Ctrl-Bouton ne marche pas&nbsp;?</title>
<body>

<p>
Il n'est pas possible d'utiliser Ctrl-Bouton comme avec Mac OS X, mais vous
pouvez définir n'importe quelle touche ou combinaison de touches pour émuler
les boutons 2 et 3. Utilisez la commande <c>showkey</c> pour connaître les
codes des touches. Notez que cette commande ne fonctionne pas correctement
depuis un serveur X et doit donc être lancée depuis la console. En plus de la
configuration noyau précisée dans le chapitre précédent, vous devrez configurer
les valeurs pour vos touches émulant les boutons de la souris dans le fichier
<path>/etc/sysctl.conf</path>. Voici un exemple qui utilise F11 et F12&nbsp;:
</p>

<pre caption="Émuler les boutons 2 et 3 avec F11 et F12">
<comment># Enable mouse button emulation</comment>
dev.mac_hid.mouse_button_emulation = 1
<comment># Set 2nd button to 87 - F11</comment>
dev.mac_hid.mouse_button2_keycode = 87
<comment># Set 3rd button to 88 - F12</comment>
dev.mac_hid.mouse_button3_keycode = 88
</pre>

<p>
D'autres codes utilisés fréquemment sont le 125 (la touche Pomme) et 96 (la
touche entrée du pavé numérique).
</p>

<note>
Le meilleur moyen d'activer cette configuration est de redémarrer votre système
après modifications.
</note>

</body>
</section>

<section>
<title>L'installation est maintenant terminée. Cependant, après le démarrage
de ma machine sous Gentoo, j'essaie d'installer un programme avec emerge et je
vois des erreurs disant qu'il ne peut pas «&nbsp;stat&nbsp;» un fichier. Que se
passe-t-il&nbsp;?</title>
<body>

<p>
Vérifiez que l'heure est correctement configurée. Mettez votre machne à l'heure
et définissez le lien <path>/etc/localtime</path> vers votre fuseau horaire
(dans <path>/usr/share/zoneinfo</path>)&nbsp;; cela devrait résoudre votre
problème. Vérifiez aussi que vous <e>n'avez pas</e> activé l'option <e>Enhanced
RTC</e> dans la section <e>Character devices</e> de la configuration du noyau
(comme indiqué dans le guide d'installation).
</p>

</body>
</section>
</chapter>

<chapter>
<title>Support des portables</title>
<section>
<title>Comment puis-je activer la vitesse maximale de mon processeur sur mon
PowerBook sous Linux&nbsp;?</title>
<body>

<note>
Certains (si ce n'est pas tous) processeurs, grâce aux nouveaux noyaux,
fonctionneront à la bonne vitesse. Si vous continuez à avoir des problèmes vous
devriez mettre à jour votre noyau à la dernière version et essayer de nouveau.
N'utilisez cette solution que comme une solution de secours.
</note>

<p>
Certains processeurs de PowerBooks démarrent à une vitesse plus faible que
celle à laquelle ils sont censés tourner. En tournant à cette vitesse plus
lente, ils augmentent la durée de fonctionnement sur la batterie mais diminuent
les performances. Le système d'exploitation de la machine doit ordonner au
matériel de tourner à la vitesse maximale. Dans Mac OS X, cela s'appelle
«&nbsp;Reduced processor performance&nbsp;», ou «&nbsp;CPU Scaling&nbsp;», sous
Linux. Pour vérifier la vitesse actuelle de votre processeur sous Linux, tapez
<c>cat /proc/cpuinfo</c>. Dans Mac OS X, vous devez d'abord désactiver
«&nbsp;Reduce processor performance&nbsp;» dans «&nbsp;Options&nbsp;» du
tableau dans le menu préférences du système de gestion de l'énergie. Ensuite,
lancez le profileur système d'Apple (dans Applications--&gt;Utilities).
</p>

<warn>
Ne pas utiliser cette méthode pour surcadencer («&nbsp;overclocker&nbsp;»)
votre machine. Les résultats sont imprévisibles si vous utilisez une mauvaise
valeur. Nous ne sommes pas responsables si vous grillez votre machine&nbsp;!
</warn>

<p>
Si le profileur système d'Apple vous donne une valeur supérieure à ce que vous
avez quand vous êtes sous linux, vous pouvez activer la vitesse maximale du
processeur avec une simple commande. Premièrement, votre machine a besoin de
tourner avec un noyau <c>2.4.20-pre9-ben0</c> ou plus récent. Les noyaux plus
anciens n'ont pas le code nécessaire pour changer la vitesse du processeur.
Deuxièmement, vous aurez besoin de compiler votre noyau avec l'option <c>CPU
Frequency scaling</c> <e>désactivée</e>. Finalement, lancez la commande ad hoc
comme dans l'exemple ci-dessous.
</p>

<pre caption="« CPU Frequency scaling »">
<comment>(Ce sont des exemples.)</comment>
<comment>(Utilisez les valeurs appropriées selon votre machine.)</comment>

<comment>(Pour un PowerBook G4 à 1 GHz)</comment>
echo "0:667000:1000000:performance" > /proc/cpufreq

<comment>(Pour un PowerBook G4 à 800 Mhz)</comment>
echo "0:667000:800000:performance" > /proc/cpufreq

<comment>(Avec un noyau 2.6, /proc/cpufreq a été remplacé par le chemin suivant)</comment>
echo "0:667000:1000000:performance" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_setspeed
</pre>

<p>
La plupart des utilisateurs voudront ajouter cette commande à la fin du fichier
<path>/etc/conf.d/local.start</path>. Ce fichier est lu à chaque fois que la
machine démarre sous Linux.
</p>

</body>
</section>

<section>
<title>J'utilise Gentoo sur un portable PowerPC. Quels paquets dois-je installer
pour activer les fonctionnalités de mon portable&nbsp;?</title>
<body>

<p>Vous devez installer 4 paquets principaux&nbsp;:</p>

<ul>
  <li>
    <e>pbbuttonsd</e> vous permet d'utiliser les différents boutons présents sur
    le portable, par exemple pour le volume et la luminence sur la plupart des
    portables PPC actuels. La version actuelle gère aussi l'énergie.
  </li>
  <li>
    <e>gtkpbbuttons</e> vous donne une interface gtk pour pbbuttonsd (retour
    visuel de la pression du bouton sous X). <e>gtkpbbuttons</e> requiert gtk et
    devrait être ajouté à votre fichier de session X (<path>~/.Xsession</path>)
    pour de meilleurs résultats (pour qu'il tourne en permanence sous X).
  </li>
  <li>
    <e>powerprefs</e> s'utilise avec pbbuttonsd et vous permet d'éditer les
    paramètres comme celui du «&nbsp;trackpad&nbsp;» et de la gestion de
    l'énergie ainsi que d'autres préférences.
  </li>
  <li>
    <e>cpudyn</e> permet d'adapter la vitesse du processeur pour préserver la
    durée de vie de votre batterie. D'autres paquets proposent les mêmes
    fonctionnalités, comme <e>powernowd</e>, <e>cpufreqd</e> et
    <e>speedfreq</e>.
  </li>
</ul>

<p>
Ces paquets peuvent être installés avec les commandes appropriées de la liste
ci-dessous&nbsp;:
</p>

<pre caption="Installer les paquets spécifiques aux portables">
# <i>emerge pbbuttonsd; rc-update add pbbuttonsd default</i>
# <i>emerge gtkpbbuttons</i>
# <i>emerge powerprefs</i>
# <i>emerge cpudyn</i>
</pre>

<note>
Vous devriez éditer votre <path>/etc/pbbuttonsd.conf</path> pour définir vos
préférences. Vous avez la possibilité de contrôler les actions réalisées avec
les touches Fx, et vous disposez également de nombreuses options concernant la
mise en veille. Pour récupérer les actions utilisées par OSX sur les touches Fx,
vous devez mettre la variable KBDMode à fkeyslast. Vous pouvez désactiver le
touchpad de votre portable en configurant la variable TPMode à notap. D'autres
options sont disponibles. Lisez le fichier pbbuttonsd.conf pour plus de détails.
</note>

<p>
Il est utile d'ajouter pbbuttonsd et cpudyn au niveau de démarrage <e>boot</e>
afin qu'ils soient exécutés dès que votre ordinateur démarre. Pour faire
cela&nbsp;:
</p>

<pre caption="Ajouter pbbuttonsd et cpudyn au niveau de démarrage boot">
# <i>rc-update add pbbuttonsd boot</i>
# <i>rc-update add cpudyn boot</i>
</pre>

</body>
</section>

<section>
<title>Comment puis-je configurer mon Airport ou une autre carte Wi-Fi sur ma
machine &nbsp;?</title>
<body>

<p>
Vérifiez que vous avez le support de la carte Airport compilé dans le noyau
ou qu'il est compilé comme un module et chargé. Vous pouvez changer votre
configuration sans fil avec la commande iwconfig. Elle fait partie du paquet
<c>wireless-tools</c>.
</p>

<p>
Par exemple, pour donner à SSID la valeur home_ssid avec iwconfig, faites&nbsp;:
</p>

<pre caption="Configurer un SSID">
# <i>iwconfig wlan0 essid home_ssid</i>
</pre>

<p>
Où wlan0 est le nom de votre dispositif sans fil. Pour les utilisateurs de carte
Airport, le dispositif wifi est souvent nommé eth1. Pour plus de détails sur
l'utilisation de iwconfig, référez-vous à sa page de manuel.
</p>

<note>
Les cartes Airport Extreme ne sont pas encore supportées par Linux, mais il
existe désormais une astuce permettant de l'utiliser. Lisez cet article sur le
forum pour plus d'informations&nbsp;:
<uri>http://forums.gentoo.org/viewtopic-t-365647.html</uri>
</note>

</body>
</section>

<section>
<title>Est-ce que le modem interne dans un iBook2 ou PowerBook
fonctionne&nbsp;?</title>
<body>

<note>
Si vous n'avez pas acheté de clef d'accès auprès de Linuxant, le pilote ne
fonctionnera qu'à 14.4 Kb et ne supportera pas le mode FAX.
</note>

<p>
<c>emerge <path>net-dialin/hcfusbmodem</path></c> vous donnera
<path>/dev/ttySHCF0</path>. Puis, configurez ppp comme habituellement. De plus
amples informations sur l'installation peuvent être trouvées à
<uri>http://www.linuxant.com/drivers/hcf/install.html</uri>
</p>

</body>
</section>

<section>
<title>Est-ce que la commande sleep fonctionne sur mon
iBook/PowerBook&nbsp;?</title>
<body>

<p>
La commande sleep (suspendre l'utilisation en RAM) fonctionne très bien sur tous
les iBooks G3 et les TiBooks G3. Récemment, un correctif au noyau a été mis à
disposition qui propose le support de sleep sur les iBooks G4 et les *Books
utilisant des cartes vidéo Radeon. Si vous disposez d'un portable de ce type,
utilisez le noyau vanilla-sources-2.6.12 ou gentoo-sources-2.6.11 pour en avoir
le support.
</p>

<note>
Vous remarquerez que les PowerBook 12" ne sont toujours pas supportés, parce
qu'ils utilisent un chipset nVidia.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Applications</title>
<section>
<title>
Je ne peux pas installer de paquet ou j'obtiens une erreur indiquant qu'il est
masqué. Que puis-je faire&nbsp;?
</title>
<body>

<p>
Deux raisons principales peuvent être à l'origine de ce problème. Soit il n'a
pas été testé sur une architecture PPC, soit il a été testé, mais n'a pas
encore été marqué comme stable.
</p>

<p>
Si votre paquet n'a pas encore été testé sur PPC, vous devez tout d'abord
marquer l'ebuild du mot-clef ppc. Vous pouvez le faire en utilisant l'outil
ekeyword qui est dans le paquet gentoolkit-dev. Exécutez alors la
commande&nbsp;:
</p>

<pre caption="Ajouter le mot-clef ppc à app-foo/bar">
# <i>ekeyword ppc /usr/portage/app-foo/bar/bar-1.0.ebuild</i>
</pre>

<p>
Une fois que l'ebuild aura été marqué, vous pourrez alors l'installer
normalement. Testez l'application et, si elle fonctionne, <b>s'il vous
plaît</b> faites un rapport de bogue pour indiquer aux développeurs qu'ils
peuvent ajouter le mot-clef.
</p>

<note>
Cette modification ne restera que jusqu'à la prochaine synchronisation de
Portage. Si vous voulez une modification plus permanente, vous devrez utiliser
l'<e>overlay</e> de Portage. Lisez la documentation de Portage pour plus
d'information.
</note>

<p>
Si votre paquet a déjà le mot-clef ~ppc, vous avez deux options. Soit vous
suivez les instructions ci-dessus et remplacez ~ppc par ppc, soit vous utilisez
le répertoire <path>/etc/portage</path> pour démasquer le paquet en question.
</p>

<pre caption="Utiliser /etc/portage pour démasquer app-foo/bar">
# <i>echo "=app-foo/bar-1.0 ~ppc" &gt; /etc/portage/package.keywords</i>
</pre>

<note>
Si le répertoire <path>/etc/portage</path> n'existe pas, vous devrez d'abord le
créer.
</note>

<p>
Maintenant, installez normalement le paquet. Une fois que vous êtes sûr que le
paquet est stable, <b>merci</b> de nous faire un rapport de bogue pour demander
aux développeurs d'ajouter le mot-clef.
</p>

</body>
</section>
<section>
<title>Est-ce que Gentoo/PPC fournit un support pour Flash&nbsp;?</title>
<body>

<p>
En fait, pas vraiment. Macromedia n'a jamais mis à disposition de binaire pour
Linux/ppc et les implémentations libres actuellement disponibles sont encore
incomplètes et boguées. Deux projets travaillent sur le problème&nbsp;:
<uri link="http://gplflash.sf.net">gplflash2</uri> et
<uri link="http://swfdec.sf.net">swfdec</uri>. Vous devez donc chercher les
informations souhaitées sur ces sites. Une astuce actuellement disponible est
d'utiliser qemu (un émulateur x86) pour lancer le lecteur autonome Flash Player
de Macromedia. Le procédé est décrit dans les forums&nbsp;:
<uri>http://forums.gentoo.org/viewtopic.php?t=117774</uri>
</p>

</body>
</section>

<section>
<title>Est-ce que Gentoo/PPC dispose d'un plugin java&nbsp;?</title>
<body>

<p>
Non, pas pour le moment. L'ancien plugin java n'est plus compatible avec le
nouveau système de plugin de Mozilla et aucun nouveau plugin n'a été écrit
depuis.
</p>

</body>
</section>

<section>
<title>Y a-t-il une façon simple de configurer X&nbsp;?</title>
<body>

<p>
Vous pouvez faire <c>emerge Xorgautoconfig</c>, tout simplement. Une fois que le
paquet est installé, exécutez Xorgautoconfig pour générer la configuration pour
votre installation. Si vous voulez utiliser un paramétrage clavier particulier
vous pouvez utiliser l'option --keymap. Notez que Xorgautoconfig ne supporte pas
le DRM pour la plupart des utilisateurs, vous devrez donc probablement changer
votre configuration noyau pour en avoir le support.
</p>

</body>
</section>

<section>
<title>
Comment puis-je activer le Direct Rendering (DRM) sur une rage128 ou une carte
radeon&nbsp;?
</title>
<body>

<p>
Vérifiez que la configuration de votre noyau contient les options
suivantes&nbsp;:
</p>

<pre caption="Configuration noyau pour le support DRM">
Device Drivers - Character devices ---&gt;
&lt;*&gt; /dev/agpgart (AGP Support)
[*] Apple UniNorth support
[*] Direct Rendering Manager (DRI support)
&lt; &gt; ATI Rage 128
&lt; &gt; ATI Radeon
Device Drivers - Graphics Support ---&gt;
 &lt;*&gt;   ATI Rage 128 display support
 &lt;*&gt;   ATI Radeon display support
</pre>

<p>
Recompilez et installez le noyau si nécessaire. Après cela, vérifiez que vous
démarrez sur le «&nbsp;framebuffer&nbsp;» natif (comme radeonfb ou atyfb et
<e>non</e> depuis offb ou ofonly) et lancez <c>Xorgautoconfig</c>.
</p>

<impo>
Vous devrez éditer votre fichier <path>/etc/X11/xorg.conf</path> en fonction de
votre carte vidéo. Assurez-vous que le pilote choisi est soit ati, soit un
pilote spécifique à votre carte (r128 ou radeon). Vérifiez également que
l'extension DRI est chargée et non commentée.
</impo>

<note>
Il n'y a actuellement aucun support DRI pour les chipsets R300/R400. Un projet
a démarré sur <uri>http://r300.sourceforge.net</uri>. Le support initial du
chipset devrait être inclu dans la prochaine version majeure de X.org. En effet
le projet r300 fait maintenant partie du projet DRI. Les chipsets Les chipsets
nVidia sont également généralement non supportées sur PPC. Un support de base
est fourni avec le pilote nv, mais il ne propose aucune accélération 3D.
</note>

</body>
</section>

<section>
<title>J'ai récemment installé Xorg, mais quand je l'utilise, mon clavier
international ne marche pas correctement. Les touches principales fonctionnent
bien mais je ne peux pas entrer de symboles spéciaux comme l'arobase. La sortie
de la commande startx dit quelque chose comme «&nbsp;could not load keymap,
falling back to default keymap&nbsp;». Que puis-je faire&nbsp;?</title>
<body>

<p>
Vérifiez que les permissions sur <path>/var/tmp</path> sont mises à
<path>drwxrwxrwx</path>. Si ce n'est pas le cas, changez-les en tapant <c>chmod
a+rwx /var/tmp</c>. Cela permettra à Xorg de charger les keymaps correctement.
</p>

</body>
</section>

<section>
<title>Lors de l'utilisation de OpenGL DRI ou en visionnant des films,
le système se bloque à l'improviste. Que puis-je y faire&nbsp;?</title>
<body>

<p>
Votre système ne gère pas proprement le support AGP. La solution la plus simple
consiste à ajouter la ligne suivante à la section «&nbsp;Device&nbsp;» de
<path>/etc/X11/xorg.conf</path>&nbsp;:
</p>

<pre caption="Forcer le mode PCI pour carte AGP">
Option       "ForcePCIMode"
</pre>

<p>
Il y a quelques problèmes connus avec les extensions composite et damage
incluses dans les dernières versions de X.org. Il vous faudra les désactiver si
vous rencontrez des problèmes.
</p>

</body>
</section>

<section>
<title>Comment puis-je faire fonctionner le son&nbsp;?</title>
<body>

<p>
Deux approches possibles sont disponibles, en utilisant au choix OSS ou ALSA.
OSS est l'ancienne option et a été déclarée désuète, mais continue de
fonctionner très bien sur de nombreux anciens Macs. ALSA est la méthode récente
et elle continuera d'être supportée dans le futur. Nous vous recommandons
d'utiliser ALSA, sauf si vous rencontrez des problèmes avec.
</p>

<note>
Si vous incluez les pilotes OSS dans votre noyau, les pilotes ALSA ne se
chargeront pas.
</note>

<p>
En plus de la configuration du noyau, les utilisateurs qui doivent avoir accès
aux périphériques audio doivent être ajoutés au groupe approprié, avec la
commande&nbsp;:
</p>

<pre caption="Ajouter un utilisateur au groupe audio">
# <i>gpasswd -a nomUtilisateur audio</i>
</pre>

<p>
Si le noyau a été correctement configuré, mais que vous n'entendez toujours
aucun son, assurez-vous que le volume principal du mixeur est suffisant et que
le dispositif n'est pas mis en position muette&nbsp;!
</p>

<note>
Si vous utilisez un G5 ou un mac-mini, vous pouvez suivre le guide de
configuration de ALSA pour Gentoo pour installer les dernières versions des
pilotes ALSA en lieu et place de celles proposées par le noyau.
</note>

</body>
</section>

<section>
<title>Configuration du son avec ALSA</title>
<body>

<p>
Pour ALSA, nous allons activer à la fois les pilotes ALSA habituels et la couche
d'émulation OSS afin de toujours pouvoir utiliser les programmes ne fonctionnant
qu'avec OSS. Dans votre <c>make menuconfig</c> vous devez sélectionner&nbsp;:
</p>

<pre caption="Options du noyau pour le son avec ALSA">
Device Drivers - Sound ---&gt;
&lt;*&gt; Sound card support
    Advanced Linux Sound Architecture ---&gt;
    &lt;*&gt;   PowerMac DMA sound support
      &lt;*&gt; Advanced Linux Sound Architecture
      &lt;*&gt; Sequencer support
      &lt;*&gt; Sequencer dummy client
      &lt;*&gt; OSS Mixer API
      &lt;*&gt; OSS PCM (digital audio) API
      [*] OSS Sequencer API
          ALSA PowerMac devices ---&gt;
           &lt;*&gt; PowerMac (AWACS, DACA, Burgundy, Tumbler, Keywest)
</pre>

<p>
(Vous pouvez également configurer l'ensemble en modules et vous assurer qu'ils
sont chargés au démarrage).
</p>

<note>
Assurez-vous que l'option <c>PowerMac DMA sound support</c> est désactivée,
sinon le module ALSA ne pourra pas se charger.
</note>

</body>
</section>

<section>
<title>Configuration du son avec OSS</title>
<body>

<note>
Encore une fois, ne l'utilisez que si vous n'utilisez pas ALSA.
</note>

<p>
Dans votre <c>make menuconfig</c> vous devrez sélectionner&nbsp;:
</p>

<pre caption="Options du noyau pour le son avec OSS">
&lt;*&gt; Sound card support
  &lt;*&gt;   PowerMac DMA sound support
</pre>

<p>
(Vous pouvez également configurer l'ensemble en modules et vous assurer qu'ils
sont chargés au démarrage).
</p>

<p>
Si le module <c>dmasound_pmac</c> n'est pas chargé, vous devrez probablement
activer l'option <c>i2c-core</c> dans le noyau en dur ou comme module.
</p>

</body>
</section>

<section>
<title>Comment puis-je écouter un CD audio&nbsp;?</title>
<body>

<p>
Les machines «&nbsp;New World&nbsp;» n'ont pas de connexion audio entre le
lecteur de CD-ROM et le périphérique audio. Les informations audio doivent donc
être lues comme des données et puis envoyées vers la carte son. C'est possible en
utilisant <e>xmms</e> et le plugin <e>xmms-cdread</e> qui lit l'audio du CD sur
le câble ATA, le décode de façon logicielle et l'envoie vers la carte son par
le bus PCI comme des données numériques. Si vous voulez un vrai lecteur de CD,
vous devez suivre les étapes suivantes&nbsp;:
</p>

<p>
Premièrement, vous devez recompiler votre noyau avec les options
suivantes&nbsp;:
</p>

<pre caption="Options du noyau pour les CD audio">
<comment>(Dans "ATA/IDE/MFM/RLL Support")</comment>
<comment>(Dans "IDE, ATA, and ATAPI Block Devices")</comment>
&lt; &gt; Include IDE/ATAPI CDROM support  <comment>(À désactiver)</comment>
&lt;M&gt; SCSI emulation support           <comment>(À compiler comme module)</comment>

<comment>(Dans "SCSI Support")</comment>
&lt;M&gt; SCSI support                     <comment>(À compiler comme module)</comment>
&lt;M&gt; SCSI CD-ROM support              <comment>(À compiler comme module)</comment>
</pre>

<p>
Puis, ajoutez <c>hdX=ide-scsi</c> à votre description de l'image du noyau dans
<path>/etc/yaboot.conf</path> où <c>hdX</c> est le périphérique IDE
correspondant à votre lecteur CD. C'est en général <c>hdc</c>. Tapez <c>ybin
-v</c> pour installer les paramètres du nouveau yaboot.conf. Éditez
<path>/etc/group</path> pour ajouter au groupe <c>cdrom</c> des utilisateurs
qui pourront écouter des CD. Vous devez redémarrer votre système pour que les
changements apportés au noyau prennent effet.
</p>

<p>
Apres le redémarrage, tapez <c>su</c> pour devenir root et changez les
permissions sur le périphérique du CD-ROM, puis installez xmms&nbsp;:
</p>

<pre caption="Changer les permissions pour le cdrom et installer xmms-read">
# <i>chown root:cdrom /dev/scsi/host0/bus0/target0/lun0/cd</i>
# <i>chmod 660 /dev/scsi/host0/bus0/target0/lun0/cd</i>
# <i>emerge xmms xmms-cdread</i>
</pre>

<note>
Vérifier que vous utilisez le chemin correpondant au lecteur CD de votre
machine.
</note>

<p>
Pour écouter un CD, lancez <c>xmms</c> et entrez <c>/dev/cdrom</c> comme
fichier à écouter.
</p>

</body>
</section>

<section>
<title>Puis-je lancer Mac OS ou Mac OS X depuis Gentoo Linux&nbsp;?</title>
<body>

<p>
Oui, à condition d'utiliser Gentoo Linux/PPC sur du matériel Apple. Vous devez
utiliser <uri link="http://www.maconlinux.org/">Mac-on-Linux</uri> qui permet
de lancer une instance de OS9, OSX ou Linux en tant que processus de Linux.
Faites seulement <c>emerge mol</c>. Mac On Linux supporte Mac OS de 7.5.2 à
9.2.2 et toutes les versions de Mac OS X à l'exception de Tiger (dont le
support est en cours de développement). Il peut être lancé en plein écran dans
une console avec framebuffer ou dans une fenêtre sur un serveur X.
</p>

<note>
Pour exécuter MOL en plein écran, vous devrez compiler MOL avec le paramètre USE
fbcon et lancer l'application depuis une console en framebuffer.
</note>

<p>
Pour ce qui est du réseau et du son, vous devrez installer les pilotes dans le
répertoire <path>MOL-Install</path> sur votre bureau Mac OS X. Si des erreurs
avec le réseau surviennent, vérifiez que vous avez activé les options suivantes
dans le noyau&nbsp;:
</p>

<p>Pour le serveur DHCP&nbsp;:</p>

<ul>
<li>Socket Filtering (CONFIG_FILTER)</li>
<li>Packet Socket (CONFIG_PACKET)</li>
</ul>

<p>Pour le NAT&nbsp;:</p>

<ul>
  <li>Network packet filtering (CONFIG_NETFILTER)</li>
  <li>Connection tracking (CONFIG_IP_NF_CONNTRACK)</li>
  <li>IP tables support (CONFIG_IP_NF_IPTABLES)</li>
  <li>Packet filtering (CONFIG_IP_NF_FILTER)</li>
  <li>Full NAT (CONFIG_IP_NF_NAT)</li>
  <li>MASQUERADE target support (CONFIG_IP_NF_TARGET_MASQUERADE)</li>
</ul>

</body>
</section>
<section>
<title>Puis-je accéder à mes partitions ext2/ext3 depuis OSX&nbsp;?</title>
<body>

<p>
OSX support la lecture et l'écriture sur des partitions ext2/ext3 si vous
utilisez l'extension noyau proposée par le projet
<uri link="http://sourceforge.net/projects/ext2fsx">ext2fsx</uri>.
</p>

<note>
Si vous utilisez MOL, vous ne pourrez pas accéder à une partition déjà utilisée
par Linux.
</note>

</body>
</section>
<section>
<title>Quels sont les options de USE pour Portage qui ne fonctionnent pas avec
une machine PowerPC&nbsp;?</title>
<body>

<p>
Si vous utilisez un profil ancien (désuet, ne concerne que les versions
antérieures à 2005.0), alors consultez la liste dans
<path>/etc/make.profile/make.mask</path>.
</p>

<p>
Si vous utilisez les profils avec cascade (version 2005.0 et supérieur), jetez
un œil à la liste dans
<path>/usr/portage/profiles/default-linux/ppc/use.mask</path>.
</p>

</body>
</section>

<section>
<title>Comment puis-je utiliser distcc avec une machine x86&nbsp;?</title>
<body>

<p>
Si vous disposez d'une seconde machine relativement rapide, vous pouvez
l'utiliser avec distcc pour compiler des binaires pour votre processeur ppc.
Il est préférable de compiler le plus de binaires possibles sur la machine
la plus rapide. Vous pouvez même ne pas compiler sur l'ordinateur le plus lent.
Voici deux liens qui vous permettront de mettre en place ceci&nbsp;:
<uri>http://dev.gentoo.org/~vapier/CROSS-COMPILE-HOWTO</uri> et
<uri>http://www.sable.mcgill.ca/~dbelan2/crossdev/crossdev-powerpc-i686.html</uri>.
</p>

</body>
</section>

<section>
<title>Pourquoi est-ce que gcc n'arrête pas de faire des erreurs de segmentation
lors de mes compilations&nbsp;?</title>
<body>

<p>
Si gcc fait des erreurs de segmentation lors de la compilation des ebuilds cela
ne provient probablement pas d'un bogue de gcc et n'est pas un problème de
matériel. La plupart du temps, ce problème est dû à l'activation du mode
préemptif dans le noyau. En effet si cette option est utilisable sur
architectures x86 elle peut corrompre la cache sur PPC et c'est la raison pour
laquelle vous obtenez des avertissements fréquents lors des compilations. Pour
éviter cela vous devrez simplement recompiler votre noyau en désactivant le
mode préemptif. Pour vérifier s'il est actif&nbsp;:
</p>

<pre caption="Vérifier si le mode préemptif est activé">
$ <i>grep PREEMPT /usr/src/linux/.config</i>
</pre>

<p>
Si vous obtenez&nbsp;: «&nbsp;# CONFIG_PREEMPT is not set&nbsp;» alors vous
devez faire un rapport de bogue pour l'erreur de segmentation.
</p>
<p>
Si vous obtenez&nbsp;: «&nbsp;CONFIG_PREEMPT=y&nbsp;» alors vous devez le
désactiver puis reconstruire votre noyau.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Ressources</title>
<section>
<title>Puis-je acheter un CD de Gentoo Linux/PPC&nbsp;?</title>
<body>

<p>
Oui&nbsp;! nous vendons Gentoo sur CD-ROM dans notre <uri
link="http://store.gentoo.org/">boutique Gentoo</uri>.
</p>

</body>
</section>
<section>
<title>Cette FAQ n'a pas repondu à mes questions. Que puis-je faire
maintenant&nbsp;?</title>
<body>

<p>
La première chose à faire est de naviguer parmi <uri
link="/doc/fr/index.xml">la documentation sur www.gentoo.org</uri>. Deux <uri
link="/main/en/lists.xml">listes de diffusion</uri> spécifiques au PPC existent
déjà, gentooppc-dev et gentooppc-user. <uri
link="http://forums.gentoo.org/viewforum.php?f=24">Gentoo sur PPC</uri> (sur
forums.gentoo.org) est un forum ouvert pour les discussions sur tous les types
de PowerPC. Il y a aussi une discussion en direct sur IRC. Rejoignez-nous sur
<c>#gentoo-ppc</c> de <c>irc.freenode.net</c>.
</p>

<p>
Des informations générales à propos de Linux sur PowerPC se trouvent sur <uri
link="http://penguinppc.org/">penguinppc.org</uri>. Des informations générales
sur Linux sont disponibles sur <uri
link="http://www.linuxdoc.org/">www.linuxdoc.org</uri>.
</p>

</body>
</section>
</chapter>
</guide>
