<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pl/gentoo-x86-quickinstall.xml,v 1.1 2005/07/04 16:09:31 neysx Exp $ -->

<!-- Orig revision 1.37 -->
<!-- Translator: rane <rane@gentoo.pl> -->
<!-- Title: Szybka instalacja Gentoo na x86 -->
<!-- Status: Release -->
<!-- $Id: gentoo-x86-quickinstall.xml,v 1.1 2005/07/04 16:09:31 neysx Exp $ -->

<guide link="/doc/pl/gentoo-x86-quickinstall.xml" lang="pl">

<title>Szybka instalacja Gentoo na x86</title>

<author title="Autor">
  Steven Wagner
</author>
<author title="Redaktor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Tłumaczenie">
  <mail link="rane@gentoo.pl">Łukasz Damentko</mail>
</author>

<abstract>
Skrócony opis instalacji Gentoo przeznaczony dla jego bardziej doświadczonych
użytkowników.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.29</version>
<date>2005-06-12</date>

<chapter>
<title>Szybka instalacja</title>
<section>
<body>

<p>
Pliki ISO znajdują się na naszych <uri link="/main/en/mirrors.xml">serwerach
lustrzanych</uri>. Ich dokładne opisy znajdują się na stronach <uri
link="http://store.gentoo.org">Sklepu Gentoo</uri>. Uniwersalna płyta
instalacyjna zawiera wszystko co potrzebne do zainstalowania Gentoo w szybki
sposób i bez połączenia z Internetem. Płyta Package CD zawierająca
prekompilowane pakiety jest opcjonalnym dodatkiem i zawiera zbudowane
duże pakiety takie jak KDE, GNOME, OpenOffice, Mozilla i Evolution oraz wiele
innych.
</p>

<p>
Po pierwsze uruchamiamy płytę instalacyjną. Wciskamy &lt;F1&gt; i/lub
&lt;F2&gt; żeby poznać dostępne opcje uruchamiania. Potem naciskamy
&lt;ENTER&gt;, aby system wystartował z domyślnego jądra. Pojawi się znak
zachęty.
</p>

<pre caption="Wstępne ustawienia">
# <i>date</i> (Należy się upewnić, że data i godzina są ustawione
prawidłowo, jeśli nie są to należy poprawić je przy pomocy polecenia <i>date
MMDDhhmmCCYY</i>)
# <i>modprobe nazwa_modułu</i> <comment>(Opcjonalnie - ładujemy niezbędne moduły)</comment>
# <i>net-setup eth0</i> <comment>(Konfigurowanie sieci)</comment>
# <i>fdisk /dev/hda</i> <comment>(Partycjonowanie dysku)</comment>
</pre>

<p>
Zalecana konfiguracja to 64 MB partycja /boot z systemem plików ext2, partycja
wymiany o rozmiarze podwojonej ilości pamięci RAM i reszta dysku przeznaczona
na partycję główną, pod kontrolą ReiserFS.
</p>

<p>
Partycje tworzy się za pomocą programów <c>mke2fs</c> (Ext2), <c>mke2fs -j</c>
(Ext3), <c>mkreiserfs</c> (ReiserFS), <c>mkfs.xfs</c> (XFS), <c>mkfs.jfs</c>
(JFS) i <c>mkswap</c> (partycja wymiany). Na przykład: <c>mke2fs -j
/dev/hda3</c>.
</p>

<p>
Wszystkie partycje należy zamontować, a następnie rozpakować odpowiedni plik
stage.
</p>

<warn>
Partycje ext3 montuje się za pomocą polecenia <c>mount -t ext3</c>. Związane
jest to z błędem w pakiecie e2fsprogs.
</warn>

<pre caption="Preparing the Installation">
(Aktywowanie partycji wymiany)   # <i>swapon /dev/hdax</i>
(Montowanie głównej partycji)    # <i>mount /dev/hdax /mnt/gentoo</i>
(Tworzenie p. montowania /boot)  # <i>mkdir /mnt/gentoo/boot</i>
(Montowanie partycji głównej)    # <i>mount /dev/hdax /mnt/gentoo/boot</i>
(Przechodzenie do punktu mont.)  # <i>cd /mnt/gentoo</i>
(Rozpakowywanie pliku stage...)  # <i>tar -xvjpf /mnt/cdrom/stages/stage&lt;plik stage&gt;.tar.bz2</i>
(<comment>lub</comment> pobieranie najnowszego pliku stage...)
                                 # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(    ... i rozpakowywanie)       # <i>tar -xvjpf stage&lt;plik stage&gt;.tar.bz2</i>
(Opcjonalnie: drzewo Portage)    # <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 \
                                   -C /mnt/gentoo/usr</i>
(Opcjonalnie: pliki instalacujne)# <i>cd /mnt/gentoo/usr/portage; mkdir distfiles;</i>
                                 # <i>cp /mnt/cdrom/distfiles/* distfiles/</i>
(Wybór serwera lustrzanego)      # <i>mirrorselect -a -s4 -o | grep 'GENTOO_MIRRORS=' \
                                   &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Kopiowanie informacji o serwerach nazw)
                                 # <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Montowanie systemu plików proc) # <i>mount -t proc none /mnt/gentoo/proc</i>
(Chrootowanie się do nowego środowiska)
                                 # <i>chroot /mnt/gentoo /bin/bash</i>
(Odświeżanie zmiennych)          # <i>env-update; source /etc/profile</i>
(Tylko gdy działa połączenie sieciowe, nie dla użytkowników GRP, pobieranie najnowszego drzewa Portage)
                                 # <i>emerge --sync</i>
</pre>

<p>
Teraz można ustawić odpowiedni profil i zainstalować Gentoo. Profil zawiera
wszystkie informacje służące do budowy systemu. Nie tylko ustawia domyślne
wartości dla CHOST, CFLAGS i innych ważnych zmiennych, ale też określa wersje
pakietów jakie muszą być w systemie zainstalowane. Wszystkie te informacje są
definiowane przez developerów Gentoo.
</p>

<pre caption="Instalowanie Gentoo">
(Weryfikowanie obecnego profilu)  # <i>ls -l /etc/make.profile</i>
(Zmiana TYLKO dla użytkowników jądra 2.4)
                                  # <i>ln -snf /usr/portage/profiles/default-linux/x86/2005.0/2.4 /etc/make.profile</i>
(Należy zmienić USE, CFLAGS i CXXFLAGS. Jeśli to instalacja ze stage1 to należy zmienić również CHOST)
                                  # <i>nano -w /etc/make.conf</i>
(Tylko stage1: bootstrap systemu) # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Dla stage1 i stage2: Instalacja systemu podstawowego. Należy użyć --emptytree jeśli modyfikowano zmienną CFLAGS,
--newuse jeśli modyfikowano zmienną USE. Jedno z nich jest konieczne.
                                  # <i>emerge --emptytree system</i> <comment>lub</comment> <i>emerge --newuse system</i>
</pre>

<p>
Pora na wprowadzenie odpowiednich zmian w plikach konfiguracyjnych:
</p>

<pre caption="Zmiany w plikach konfiguracyjnych">
(Ustawianie strefy czasowej) # <i>ln -sf /usr/share/zoneinfo/<comment>&lt;path to time zone file&gt;</comment> /etc/localtime</i>
(Zmiany w pliku fstab)          # <i>nano -w /etc/fstab</i>
</pre>

<p>
Poniżej znajduje się <e>szablon</e> pliku <path>/etc/fstab</path>, nie należy
go bezmyślnie kopiować, tylko wprowadzić odpowiednie zmiany dla określonej
konfiguracji.
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;          &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/hdax       /boot           ext2            defaults,noatime        1 2
/dev/hdax       none            swap            sw                      0 0
/dev/hdax       /               reiserfs        noatime                 0 1
/dev/cdroms/cdrom0 /mnt/cdrom   auto            noauto,user             0 0
none            /proc           proc            defaults                0 0
none            /dev/shm        tmpfs           nodev,nosuid,noexec     0 0
</pre>

<p>
Kolejny etap to instalacja jądra:
</p>

<pre caption="Instalowanie jądra">
(Instalowanie źródeł jądra)    # <i>emerge <comment>&lt;pakiet-źródeł-jądra&gt;</comment></i>
(Konfigurowanie jądra za pomocą programu genkernel...)
                                # <i>emerge genkernel; genkernel --udev --menuconfig all</i>
(<comment>lub</comment> (1) ręczna konfiguracja jądra)
                                # <i>cd /usr/src/linux; make menuconfig;</i>
(   (2) Włączenie systemów plików VM i /proc)
(   (3) Kompilowanie jądra)
           (dla jądra 2.6)      # <i>make &amp;&amp; make modules_install</i>
           (dla jądra 2.4)      # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
(   (4) Kopiowanie jądra)       # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
Później trzeba zainstalować rozmaite programy systemowe:
</p>

<pre caption="Instalowanie narzędzi systemowych">
(Instalowanie loggera systemowego. Należy wybrać pomiędzy: sysklogd, metalog, msyslog i syslog-ng)
                                          # <i>emerge syslog-ng </i>
(Automatyczne uruchamienie loggera systemowego przy uruchamianiu systemu)
                                          # <i>rc-update add syslog-ng default</i>
(Instalowanie demona cron, Należy wybrać pomiędzy: vixie-cron, dcron, fcron)
                                          # <i>emerge vixie-cron</i>
(Automatyczne uruchamienie demona cron przy uruchamianiu systemu)
                                          # <i>rc-update add vixie-cron default</i>
(dla użytkowników genkernel: instalacja *plug)
                                          # <i>emerge coldplug hotplug</i>
(dla użytkowników genkernel: automatyczne uruchamianie coldplug przy uruchamianiu systemu)
                                          # <i>rc-update add coldplug boot</i>
(Dla użytkowników systemów plików innych niż ext2,ext3. Instalacja odpowiednio: reiserfsprogs, xfsprogs lub jfsutils)
                                          # <i>emerge reiserfsprogs</i>
(Opcjonalnie: Instalacja klienta DHCP)    # <i>emerge dhcpcd</i>
(Skrypt startowy dla nazw domen)          # <i>rc-update add domainname default</i>
</pre>

<p>
Później instalujemy ebuildy z dodatkowymi modułami dla jądra:
</p>

<pre caption="Instalacja dodatkowych sterowników">
# <i>emerge pcmcia-cs</i> (lub <i>nforce-audio</i>, <i>e100</i>, <i>e1000</i>, <i>ati-drivers</i>, <i>rp-pppoe</i>)
# <i>VIDEO_CARDS="nazwa_karty" emerge x11-drm</i>   (dla kart ATI Radeon do modelu 9200, Rage128, Matrox, Voodoo i innych)
</pre>

<p>
Finalizowanie instalacji Gentoo:
</p>

<pre caption="Finalizowanie instalacji Gentoo">
(Ustawienie hasła roota)     # <i>passwd</i>
(Dodanie konta użytkownika)  # <i>useradd nazwa_użytkownika -m -G users,wheel,audio -s /bin/bash</i>
(Hasło dla niego)            # <i>passwd nazwa_użytkownika</i>
(Ustawienie hostname)        # <i>echo mymachine &gt; /etc/hostname</i>
(Ustawienie domainname)      # <i>echo mydomain.com &gt; /etc/dnsdomainname</i>
(Ustawienie w pliku host, np. "127.0.0.1 localhost mymachine")
                             # <i>nano -w /etc/hosts</i>
(Konfigurowanie podstawowych ustawień systemu, na podstawie komentarzy wewnątrz pliku)
                             # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption="Konfigurowanie połączenia sieciowego">
(Konfiguracja sieci: użytkownicy dhcp powinni ustawić iface_eth0="dhcp")
                              # <i>nano -w /etc/conf.d/net</i>
(Lista modułów jakie mają być ładowane w trakcie uruchamiania systemu)
                              # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;wersja&gt;</comment></i>
(Jeśli nie ma PCMCIA - uruchamianie sieci przy starcie komputera)
# <i>rc-update add net.eth0 default</i>
(Dla kilku interfejsów sieciowych)
   (1) Tworzenie skryptu startowego dla każdego interfejsu)
                              # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Automatyczne uruchamianie przy starcie, dla kart nie na PCMCIA)
                              # <i>rc-update add net.ethx default</i>
(Dla PCMCIA: sprawdzanie /etc/conf.d/pcmcia i ładowanie PCMCIA przy uruchomieniu komputera)
                              # <i>rc-update add pcmcia default</i>
</pre>

<p>
Instalowanie programu ładującego.
</p>

<pre caption="Instalacja i konfiguracja programu GRUB">
# <i>emerge grub</i>
# <i>grub</i>
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup (hd0)</i>
grub&gt; <i>quit</i>
# <i>nano -w /boot/grub/grub.conf</i>
default 0
timeout 15
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux
  root (hd0,0)
  <comment># dla użytkowników genkernel:</comment>
  kernel /kernel-<comment>&lt;wersja jądra&gt;</comment> root=/dev/ram0 init=/linuxrc real_root=/dev/hda3 ramdisk=8192 udev
  initrd /initrd-<comment>&lt;wersja jądra&gt;</comment>
  <comment># dla pozostałych:</comment>
  kernel /kernel-<comment>&lt;wersja jądra&gt;</comment> root=/dev/hda3 udev
</pre>

<pre caption="Instalowanie i konfigurowanie programu LILO">
# <i>emerge lilo</i>
# <i>nano -w /etc/lilo.conf</i>
boot=/dev/hda
prompt
timeout=50
default=gentoo

image=/boot/kernel-<comment>&lt;wersja jądra&gt;</comment>
  label=gentoo
  read-only
  <comment># użytkownicy genkernel:</comment>
  append="init=/linuxrc real_root=/dev/hda3 ramdisk=8192 udev"
  root=/dev/ram0
  initrd=/boot/initrd-<comment>&lt;kernel version&gt;</comment>
  <comment># pozostali:</comment>
  append="udev"
  root=/dev/hda3

# <i>/sbin/lilo</i>
</pre>

<p>
Następnie odmontowujemy wszystkie partycje i ponownie uruchamiamy komputer:
</p>

<pre caption="Wykańczanie instalacji Gentoo">
(Opuszczanie chroota)        # <i>exit</i>
                             # <i>cd /</i>
(Odmontowywanie partycji)    # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
(Ponowne uruchomienie komputera, należy wyjąć płytę z napędu)
                             # <i>reboot</i>
(Po ponownym uruchomieniu)
(dla użytkowników ADSL)      # <i>adsl-setup</i>
(Dla korzystających z GRP)
  (1) Montowanie Package CD  # <i>mount /dev/cdrom /mnt/cdrom</i>
  (2) Kopiowanie pakietów    # <i>mkdir /usr/portage/packages</i>
                             # <i>cp -a /mnt/cdrom/* /usr/portage/packages/</i>
  (3) Instalowanie dodatkowych programów
                             # <i>USE="bindist" emerge -k xorg-x11 gnome kde mozilla openoffice-bin</i>
  (4) Konfiguracja serwera X # <i>/usr/X11R6/bin/xorgconfig</i>
</pre>

<p>
Więcej informacji znajduje się w <uri link="/doc/pl/index.xml">Dokumentacji Gentoo</uri>.
</p>

</body>
</section>
</chapter>
</guide>
