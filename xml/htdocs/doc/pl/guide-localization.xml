<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pl/guide-localization.xml,v 1.9 2005/09/10 11:56:08 rane Exp $ -->

<guide link="/doc/pl/guide-localization.xml" lang="pl">
<title>Lokalizacja Gentoo Linux</title>
<author title="Autor">
  Alexander Holler
</author>
<author title="Tłumacz/Redaktor">
  <mail link="slucy@uchicago.edu">Steven Lucy</mail>
</author>
<author title="Redaktor">
  <mail link="bennyc@gentoo.org">Benny Chuang</mail>
</author>
<author title="Redaktor">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Redaktor">
  <mail link="dertobi123@gentoo.org">Tobias Scherbaum</mail>
</author>
<author title="Redaktor">
  <mail link="flammie@gentoo.org">Flammie Pirinen</mail>
</author>
<author title="Tłumaczenie">
  Paweł Kilian
</author>

<abstract>
Tekst opisujący wszystkie czynności związane ze spolszczeniem systemu Gentoo Linux.
</abstract>

<version>1.22</version>
<date>2005-08-22</date>

<chapter>
<title>Strefa czasowa</title>
<section>
<body>

<p>
Aby czas był ustawiany poprawnie, dowiązanie <path>/etc/localtime</path> musi
wskazywać na plik prawidłowej strefy czasowej. Należy przeszukać katalog
<path>/usr/share/zoneinfo/</path> i odnaleźć odpowiedni plik dla kraju
(kontynentu) i najbliższego dużego miasta. Należy unikać stref czasowych o
nazwie <path>/usr/share/zoneinfo/Etc/GMT*</path>, ponieważ ich nazwy mogą być
mylące, na przykład <path>GMT-8</path> jest w rzeczywistości GMT+8.
</p>

<pre caption="Konfiguracja strefy czasowej">
# <i>ln -sf /usr/share/zoneinfo/Europe/Warsaw /etc/localtime</i>
# <i>date</i>
pią sie 19 03:09:58 CEST 2005
</pre>

<note>
Należy sprawdzić czy trzy lub cztery litery kodu strefy czasowej są poprawne (w
naszym polskim przypadku będą to "CEST" (Central European Summer Time) latem lub
"CET" (Central European Time) zimą).
</note>

<note>
Można ustawić wartość <c>TZ</c> (również wziętą z
<path>/usr/share/zoneinfo</path>_ w pliku rc (<path>.bash_profile</path> dla
basha), aby skonfigurować strefę czasową tylko dla jednego użytkownika. W naszym
przypadku może to być <c>TZ="Europe/Warsaw"</c>.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Zegar sprzętowy</title>
<section>
<body>

<p>
W większości systemów Gentoo Linux, zegar sprzętowy jest ustawiony na UTC (lub
GMT, Greenwhich Mean Time), a następnie strefa czasowa jest brana pod uwagę przy
ustalaniu konkretnej godziny. Jeżeli z jakichś powodów zegar sprzętowy nie jest
ustawiony na UTC, to należy wyedytować <path>/etc/rc.conf</path> i zmienić
wartość zmiennej <c>CLOCK</c>.
</p>

<pre caption="Zegar lokalny vs. GMT">
<comment>Rekomendowany:</comment>
CLOCK="UTC"
<comment>Alternatywny:</comment>
CLOCK="local"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>System lokalizacji</title>
<section>
<title>Co to jest lokalizacja?</title>
<body>

<p>
Lokalizacje są zbiorem informacji dla większości programów pozwalającym na
ustalenie kraju i języka. Lokalizacje i informacje o nich są częścią biblioteki
systemowej i możesz je znaleźć w <path>/usr/share/locale</path> w większości
systemów. Nazwy lokalizacji mają postać <c>ab_CD</c>, gdzie <c>ab</c> jest dwu
lub trzyliterowym kodem języka (jak określono w ISO-639), a <c>CD</c>
dwuliterowym kodem kraju (z ISO-3199).
</p>

</body>
</section>
<section>
<title>Zmienne środowiskowe dla lokalizacji</title>
<body>

<p>
Ustawienia lokalizacji są zapisywane w zmiennych środowiskowych, które ustawia
się w pliku <path>/etc/env.d/02locale</path> (dla ustawień całego systemu) i
pliku <path>~/.bashrc</path> (dla użytkownika). Zmienne kontrolują różne aspekty
ustawień lokalizacji, omawiamy je w tabeli poniżej, te z większym priorytetem są
na górze tabelki. Ustawienia o większym priorytecie nadpiszą te z priorytetem
mniejszym. Wszystkie zmienne mają jeden format lokalizacji <c>ab_CD</c> - tak
jak opisano to powyżej.
</p>

<table>
<tr>
  <th>Nazwa zmiennej</th>
  <th>Opis</th>
</tr>
<tr>
  <ti>LC_ALL</ti>
  <ti>
    Definiuje wszystkie ustawienia w lokalizacji naraz. Jest to najwyższy poziom
    ustawień dla lokalizacji i zastąpi wszystkie inne ustawienia.
  </ti>
</tr>
<tr>
  <ti>LC_COLLATE</ti>
  <ti>
    Definiuje porządek alfabetyczny. Może mieć efekt na np. wyświetlenie
    zawartości katalogów.
  </ti>
</tr>
<tr>
  <ti>LC_CTYPE</ti>
  <ti>
   Definiuje zarządzanie ustawieniami znaków dla systemu. Np. które
   znaki są widziane jako część alfabetu, a które jako numeryczne. Czasami
   ustawia to również zestaw używanych znaków.
  </ti>
</tr>
<tr>
  <ti>LC_MESSAGES</ti>
  <ti>
  Ustawienie dla aplikacji, które używają zmiennych lokalizacji do wyświetlania
  wiadomości (większość programów GNU, więcej informacji w następnym rozdziale).
  </ti>
</tr>
<tr>
  <ti>LC_MONETARY</ti>
  <ti>Definiuje jednostkę waluty i jej format numeryczny.</ti>
</tr>
<tr>
  <ti>LC_NUMERIC</ti>
  <ti>
   Definiuje formatowanie wartości numerycznych które nie są walutą. Ustala np.
   separatory tysięcy i dziesiątek.
  </ti>
</tr>
<tr>
  <ti>LC_TIME</ti>
  <ti>Definiuje format daty i czasu.</ti>
</tr>
<tr>
  <ti>LC_PAPER</ti>
  <ti>Definiuje domyślny rozmiar papieru.</ti>
</tr>
<tr>
  <ti>LANG</ti>
  <ti>
    Definiuje wszystkie lokalne ustawienia. Te ustawienia mogą być nadpisane
    przez indywidualne ustawienia LC_* powyżej lub nawet przez LC_ALL.
  </ti>
</tr>
</table>

<note>
Mimo, że większość programów współpracuje jedynie z LC_ALL warto również ustawić
zmienną LANG, bez której część z nich może się dziwnie zachowywać.
</note>

<p>
Większość użytkowników ustawia zmienne LANG i LC_CTYPE na poziomie użytkownika
przez ręczne dodanie definicji zmiennych do skryptów startowych powłok.
</p>

<pre caption="ustawianie polskiej lokalizacji">
export LANG="pl_PL@euro"
</pre>

<note>
Dodajemy <c>@euro</c> do lokalizacji jeżeli chcemy używać symbolu tej waluty (&#8364;).
</note>

<p>
Aby wiadomości w programach działały jak należy, konieczne będzie skompilowanie
ich z obsługą <c>nls</c> (native language support), którą zapewnia flaga USE o
tej samej nazwie. W takim wypadku do wyświetlania właściwych wiadomości
konieczna będzie biblioteka gettext. Portage zainstaluje ją automatycznie kiedy
tylko będzie potrzebna.
</p>

</body>
</section>
<section>
<title>Generowanie specyficznych lokalizacji</title>
<body>

<p>
Do wygenerowania lokalizacji innych niż domyślne służy program <c>localedef</c>.
Na przykład:
</p>

<pre caption="Generowanie lokalizacji za pomocą localedef">
# <i>localedef -c -i pl_PL -f ISO-8859-2 pl_PL.ISO-8859-2</i>
</pre>

<p>
Po wygenerowaniu lokalizacji, można je wyeksportować jako zmienną LANG.
</p>

<pre caption="Eksportowanie zmiennej LANG">
# <i>export LANG="pl_PL.ISO-8859-2"</i>
</pre>

</body>
</section>
<section>
<title>Lokalizacja dla użytkownika, flaga USE</title>
<body>

<p>
Zwykle w systemie korzysta się z jednej, góra dwóch lokalizacji. Do niedawna
przy kompilacji biblioteki <c>glibc</c> był tworzony ich pełny zestaw. Teraz,
poprzez flagę USE <c>userlocales</c>, można wybrać tylko te, z których zamierza
się korzystać. Wybrane lokalizacje należy wpisać do pliku
<path>/etc/locales.build</path>.
</p>

<pre caption="Włączanie flagi userlocales dla glibc">
# <i>echo "sys-libs/glibc userlocales" >> /etc/portage/package.use</i>
</pre>

<p>
Następnie należy wybrać lokalizacje, których zamierza się używać:
</p>

<pre caption="Dodawanie wpisów do pliku /etc/locales.build">
en_US/ISO-8859-1
en_US.UTF-8/UTF-8
pl_PL/ISO-8859-2
pl_PL@euro/ISO-8859-2
</pre>

<p>
Kolejnym krokiem jest przekompilowanie <c>glibc</c>. Oczywiście można z tym
poczekać i zrobić dopiero gdy nowe <c>glibc</c> będzie dostępne.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Ustawienia klawiatury dla konsoli</title>
<section>
<body>

<p>
Ustawienie klawiatury używane przez konsole jest konfigurowane w pliku
<path>/etc/conf.d/keymaps</path> przez zmienną <c>KEYMAP</c>.  Poprawne wartości
można znależć w <path>/usr/share/keymaps/<c>{arch}</c>/</path>.
<path>i386</path> ma podgromady (<path>qwerty/</path>, <path>azerty/</path>...).
Niektóre języki mają kilka opcji, należy na drodze eksperymentów wybrać
najlepsze ustawienia.
</p>

<pre caption="Ustawianie mapowania klawiatury dla konsoli">
KEYMAP="pl"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Mapowanie klawiatury dla serwera X</title>
<section>
<body>

<p>
Mapowanie klawiatury używane przez serwer X jest ustawianie w pliku
<path>/etc/X11/xorg.conf</path> w zmiennej <c>XkbLayout</c>.
</p>

<pre caption="Ustawianie mapowania dla X">
 Section "InputDevice"
     Identifier  "Keyboard1"
     ...
     Option "XkbLayout"    "<i>pl2</i>"
     # Option "XkbVariant"  "nodeadkeys"
     ...
</pre>

</body>
</section>
</chapter>

<chapter>
<title>KDE</title>
<section>
<body>

<p>
W celu spolszczenia KDE należy zainstalować pakiet kde-i18n. Sporo ułatwi
ustawienie wcześniej zmiennej LINGUAS, która pozwoli na zbudowanie pakietu tylko
z wybranymi językami.
</p>

<pre caption="Instalowanie lokalizacji dla KDE">
# <i>nano -w /etc/make.conf</i>
<comment>(Dodajemy zmienną LINGUAS. Na przykład dla języka polskiego i angielskiego)</comment>
LINGUAS="pl en"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Symbol Euro w konsoli</title>
<section>
<body>

<p>
Aby wyświetlał się symbol Euro, należy ustawić zmienną <c>CONSOLEFONT</c> w
<path>/etc/rc.conf</path>. Wartość jaką należy do niej wpisać można odnaleźć w
katalogu <path>/usr/share/consolefonts/</path>. Należy wybrać nazwę czcionki i
opuścić rozszerzenie pliku (<c>.psfu.gz</c>). Symbol euro znajduje się na
przykład w czcionce <c>lat2a-16</c>.
</p>

<pre caption="ustawienie fontów dla konsoli">
CONSOLEFONT="lat2a-16"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Symbol Euro w X</title>
<section>
<title>Większość aplikacji</title>
<body>

<p>
Zmuszenie X-ów do wyświetlania symbolu Euro jest trochę trudniejsze. Pierwszą
rzeczą, jaką należy zrobić jest zmiana definicji <c>fixed</c> i <c>variable</c>
w pliku <path>/usr/X11R6/lib/X11/fonts/misc/fonts.alias</path> tak, by kończyły
się ciągiem <c>iso8859-2</c> zamiast <c>iso8859-1</c>.
</p>

<pre caption="Ustawienie domyślnych czcionek dla X">
fixed        -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-2
variable     -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-2
</pre>

<p>
Niektóre aplikacje używają własnych czcionek i należy skonfigurować je
oddzielnie do używania takich z symbolem Euro. Można to zrobić na poziomie
użytkownika w pliku <path>.Xdefaults</path> (plik można skopiować do
<path>/etc/skel/</path>, aby stał się domyślnym dla nowych użytkowników) lub na
poziomie globalnym dla każdej aplikacji w plikach
<path>/usr/X11R6/lib/X11/app-defaults/</path> (jak xterm). W tych plikach
generalnie trzeba zmienić istniejącą linię, niż dodawać nową. Na przykład, aby
zmienić czcionkę dla xterma:
</p>

<pre caption="Ustawianie czcionek dla xterm">
<comment>(W katalogu domowym)</comment>
# <i>echo 'XTerm*font: fixed' >> .Xresources </i>
# <i>xrdb -merge .Xresources</i>
</pre>

</body>
</section>
<section>
<title>Symbol Euro w (X)Emacs</title>
<body>

<p>
Aby używać symbolu Euro w (X)Emacs, należy dodać poniższą linijkę do pliku
<path>.Xdefaults</path>:
</p>

<pre caption="Ustawianie czcionek dla emacsa">
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-2
</pre>

<p>
Dla XEmacs (nie Emacs), należy dokonać więcej zmian i dodać następujący wpis w
pliku <path>/home/user/.xemacs/init.el</path>:
</p>

<pre caption="Ustawianie czcionek dla xemacs">
(define-key global-map '(EuroSign) '[&#8364;])
</pre>

<note>
Symbol w [] jest symbolem Euro.
</note>

</body>
</section>
<section>
<title>Język dla OpenOffice.org</title>
<body>

<note>
W pakiecie openoffice-bin nie można zmienić języka. Jedynym dostępnym językiem w
openoffice-bin jest ENUS.
</note>

<p>
Warto zauważyć, że pakiet openoffice również korzysta ze zmiennej LINGUAS. Stary
sposób z LANGUAGE=ENUS|PORT już <e>nie działa</e>. Głównym językiem dla
OpenOffice jest "US English". Aby zmienić język w OpenOffice należy odnaleźć w
jego ebuildzie odpowiedni kod języka.
</p>

<pre caption="Przykład: emerge openoffice dla polskiego środowiska">
# <i>nano -w /etc/make.conf</i>
<comment>(Dodajemy zmienną LINGUAS dla języka polskiego i angielskiego)</comment>
LINGUAS="pl en"
<comment>(I instalujemy openoffice)</comment>
# <i>emerge openoffice</i>
</pre>

</body>
</section>
</chapter>
</guide>
