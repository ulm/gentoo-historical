<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<!-- Orig revision: 1.14 -->
<!-- Translator: volt3r <volt3r@pf.pl> -->
<!-- Title: Przewodnik po konfiguracji serwera X. -->
<!-- Status: Do korekty -->
<!-- $Id: xorg-config.xml,v 1.3 2005/06/26 20:04:53 smithj Exp $ -->

<guide link="/doc/pl/xorg-config.xml" lang="pl">

<title>Przewodnik po konfiguracji serwera X.</title>

<author title="Autor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Tłumacz">
  Robert Frączek
</author>
  
<abstract>
Xorg jest serwerem X Window, który pozwala użytkownikom na posiadanie
graficznego środowiska. Ten przewodnik wyjaśnia czym tak naprawdę jest Xorg, jak
go zainstalować i jakie są różne warianty jego konfiguracji.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->
<license/>

<version>1.12</version>
<date>2005-05-23</date>

<chapter>
<title>Czym jest serwer X Window?</title>
<section>
<title>Środowisko graficzne przeciw tekstowemu.</title>
<body>

<p>
Przeciętny użytkownik może być przestraszony wizją wpisywania różnych komend.
Dlaczego nie miałby tylko wskazać i kliknąć ? Więc *duży uśmiech*, jesteśmy w
stanie zrobić, aby właśnie tak było :-) Linux oferuje szeroką gamę środowisk
graficznych, które możesz zainstalować na swoim systemie.
</p>

<p>
To może być dużym zaskoczeniem dla nowych użytkowników: graficzny interfejs
użytkownika nie jest niczym więcej jak tylko kolejną aplikacją uruchamianą w
systemie. To <e>nie jest</e> w żadnym wypadku część jądra Linuksa lub
jakiejś innej wewnętrznej części systemu. Jest to potężne narzędzie, które w
pełni otwiera możliwości graficzne naszej stacji roboczej.
</p>

<p>
Ponieważ standardy są istotne, należy zaznaczyć, że standardem dla rysowania i
przemieszczania okien na ekranie, interakcji z użytkownikiem przy pomocy myszy, 
klawiatury i innych fundamentalnych aspektów został stworzony i nazwany
<e>System X Window</e>, zwykle nazywany skrótowo <e>X11</e> lub poprostu
<e>X</e>. Używany jest on na systemach Unix, Linux oraz pochodnych Uniksa na
całym świecie.
</p>

<p>
Aplikacją, dającą użytkownikom Linuksa zdolność użytkowania graficznego
interfejsu użytkownika i w ten sposób używania standardu X11 jest Xorg-X11,
gałąź powstała z projektu XFree86. Projektanci XFree86 w pewnym momencie
zdecydowali się zmienić licencję na taką, która nie jest do końca zgodna z licencją
GPL; użytkowanie Xorg jest więc zalecane. Oficjalne drzewo Portage nie zawiera
aktualnie żanej wersji pakietu XFree86.
</p>

</body>
</section>
<section>
<title>Projekt X.org.</title>
<body>

<p>
Projekt <uri link="http://www.x.org">X.org</uri> został stworzony i jest
utrzymywany jako wolno dostępna i bezpłatna implementacja systemu X11. Jest to
infrastruktura o otwartym kodzie źródłowym bazująca na systemie X11.
</p>

<p>
Xorg udostępnia interfejs pomiędzy twoim sprzętem oraz graficznym
oprogramowaniem, które możesz chcieć wykorzystywać. Ponadto, Xorg jest w pełni
gotowy do pracy w sieci, to znaczy pozwala ci na uruchamianie aplikacji na
jednym z systemów, oglądając wyniki jej pracy na zupełnie innym.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Instalacja Xorg.</title>
<section>
<title>Używamy emerge.</title>
<body>

<p>
Wystarczy tych pogaduszek, zabierzmy się wkońcu do roboty, ok? Aby zainstalować
Xorg, musisz tylko wydać polecenie <c>emerge xorg-x11</c>. Instalacja Xorg może
trochę potrwać, więc najlepiej jak pójdziesz coś przegryźć w tym czasie.
</p>

<pre caption="Instalacja Xorg">
# <i>emerge xorg-x11</i>
</pre>

<p>
Kiedy instalacja zostanie zakończona, może być konieczne przeładowanie zmiennych
środowiskowych zanim będziemy mogli kontynuować. Poprostu uruchom
<c>env-update</c>, a następnie <c>source /etc/profile</c> i już wszystko będzie
gotowe. Nie musisz się obawiać, to w żaden sposób nie uszkodzi twojego systemu.
</p>

<pre caption="Przeładowanie zmiennych środowiskowych">
# <i>env-update</i>
# <i>source /etc/profile</i>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>Konfiguracja Xorg.</title>
<section>
<title>Plik xorg.conf.</title>
<body>

<p>
Głównym plikiem konfiguracyjnym Xorg jest <path>xorg.conf</path> znajdujący się 
w <path>/etc/X11</path>. Pakiet Xorg-X11 udostępnia nam przykładowy plik
konfiguracyjny <path>/etc/X11/xorg.conf.example</path>, który może być użyty do
stworzenia własnego. Jest on bardzo dobrze opisany, lecz jeśli będziesz w
potrzebie skorzystania z szerszej dokumentacji, nie wahaj się zajrzeć na strony
podręcznika systemowego:
</p>

<pre caption="Strony podręcznika systemowego xorg.conf">
# <i>man 5 xorg.conf</i>
</pre>

<p>
Miłego czytania dla tych, którzy się zdecydują. My napewno nie, więc kontynujmy
sprawdzając jak możemy stworzyć taki plik konfiguracyjny automatycznie.
</p>

</body>
</section>
<section>
<title>Domyślnie: Automatyczne generowanie pliku xorg.conf.</title>
<body>

<p>
Xorg jest w stanie samodzielnie odgadnąć większość parametrów twojego 
komputera i w większości przypadków, potrzebna będzie jednynie zmiana kilku 
linijek w celu ustawienia rządanej rozdzielczości. Jeżeli zainteresuje cię 
poznanie bardziej dogłębnych ustawień, sprawdź jakie istnieją inne zasoby 
dokumentacji podane na końcu tego przewodnika. Lecz najpierw, zajmijmy się 
wygenerowaniem (miejmy nadzieję działającego) pliku konfiguracyjnego Xorg.
</p>

<pre caption="Generowanie pliku konfiguracyjnego xorg.conf">
# <i>Xorg -configure</i>
</pre>

<p>
Kiedy zakończy się detekcja sprzętu, pamiętaj, aby dokładnie przeczytać 
ostatnią linijkę wydrukowaną na ekranie. Jeżeli będzie ona
mówiła o jakimkolwiek błędzie, konieczne będzie samodzielne napisanie pliku
konfiguracyjnego <path>xorg.conf</path>. Jeśli żaden błąd się nie pojawił, ukaże
się informacja o stworzeniu pliku <path>/root/xorg.conf.new</path> gotowego do
testów. Więc nie czekajmy i bierzmy się wkońcu za testy :)
</p>

<pre caption="Testowanie xorg.conf.new">
# <i>X -config /root/xorg.conf.new</i>
</pre>

<p>
Jeśli wszystko poszło dobrze powinien pojawić się prosty czarno-biały obraz.
Należy sprawdzić czy działa myszka oraz czy ustawiono prawidłową rozdzielczość.
Nie można wprawdzie dokładnie stwierdzić jaka jest używana, ale na pewno
łatwo zauważyć, że jest za niska. W każdej chwili można opuścić to środowisko
przy pomocy kombinacji klawiszy Ctrl-Alt-Backspace.
</p>

<p>
Jeżeli <c>twm</c> nie został załadowany, nie przejmuj się - załaduje się kiedy
odpalisz serwer X standardowym poleceniem <c>startx</c>. Sprawdź czy myszka
pracuje poprawnie, oraz czy rozdzielczość jest satysfakcjonująca. Możesz nie być
w stanie wywnioskować dokładnej rozdzielczości, ale z pewnością będziesz w
stanie zobaczyć czy nie jest ona przypadkiem zbyt mała. Możesz w każdej chwili zabić
serwer X poprzez poznaną już kombinację Ctrl-Alt-Backspace.
</p>

</body>
</section>
<section>
<title>Poł-automatyczne generowanie pliku xorg.conf.</title>
<body>

<p>
Xorg udostępnia narzędzie <c>xorgconfig</c>, które zadając różne pytania
dotyczące posiadanego sprzętu (karty graficznej, klawiatury, ...), wygereneruje
odpowienio plik <path>xorg.conf</path>.
</p>

<pre caption="Pół-automatyczne generowanie pliku xorg.conf">
# <i>xorgconfig</i>
</pre>

<p>
Kolejnym narzędziem, także wchodzącym w skład pakietu Xorg jest <c>xorgcfg</c>,
który najpierw uruchamia <c>Xorg -configure</c>, a następnie uruchamia serwer X
umożliwiając tym samym dodatkowe zmiany. 
</p>

<pre caption="Użycie xorgcfg">
# <i>xorgcfg</i>
<comment>(Jeśli X się nie uruchomi prawidłowo:)</comment>
# <i>xorgcfg -textmode</i>
</pre>

</body>
</section>
<section>
<title>Kopiowanie pliku xorg.conf</title>
<body>

<p>
Na początek nadpiszmy naszym nowym plikiem <path>xorg.conf.new</path> plik 
<path>/etc/X11/xorg.conf</path>, tak abyśmy nie musieli ciągle wpisywać <c>Xorg 
-config</c> -- <c>startx</c> jest dużo prostsze :)
</p>

<pre caption="Nadpisywanie pliku xorg.conf">
# <i>cp /root/xorg.conf.new /etc/X11/xorg.conf</i>
</pre>

</body>
</section>
<section id="using_startx">
<title>Użycie startx</title>
<body>

<p>
Następnie wpisujemy polecenie <c>startx</c> w celu uruchomienia serwera.
<c>startx</c> to skrypt który uruchamia <e>sesję X</e>, która zajmuje się
uruchamianie poszczególnych serwerów, a na nich poszczególnych aplikacji. Wybór
aplikacji dokonywany jest na podstawie:
</p>
	 
<ul>
  <li>
    Jeśli w katalogu domowym użytkownika znajduje się plik o nazwie
    <path>.xinitrc</path> zostaną uruchomione polecenia znajdujące się w nim. 
  </li>
  <li>
    W innym przypadku zostanie wczytana wartość zmiennej XSESSION i zostanie
    uruchomiona jedna z sesji z pliku <path>/etc/X11/Sessions/</path>. Wartość
    zmiennej XSESSION można skonfigurować w pliku <path>/etc/rc.conf</path>, co
    uczyni ją domyślną dla wszystkich użytkowników.
  </li>
  <li>
    Jeśli obie metody zawiodą zostanie uruchomiony prosty menedżer okien,
    najprawdopodobniej <c>twm</c>.
  </li>
</ul>

<pre caption="Uruchomienie serwera X">
# <i>startx</i>
</pre>

<p>
Jeśli na ekranie pojawi się bardzo brzydki menedżer okien to jest to <c>twm</c>.
Aby zamknąć jego sesję należy wpisać <c>exit</c> lub wcisnąć CTRL+D w xtermie,
który się pojawi. Można również zamknąć go za pomocą kombinacji
Ctrl-Alt-Backspace, nie jest to jednak najbardziej elegancka metoda.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Konfigurowanie xorg.conf</title>
<section>
<title>Ustawiamy rozdzielczość.</title>
<body>

<p>
Jeśli czujesz, że rozdzielczość ekranu nie jest satysfakcjonująca, musisz
sprawdzić dwie sekcje pliku konfiguracyjnego. Pierwsza sekcja <e>Screen</e>
zawiera listę rozdzielczości, z którymi serwer X ma będzie pracował. Jeżeli 
nie zawiera ona żadnych, Xorg obliczy sobie z jaką powinien się uruchomić 
bazując na informacjach w drugie sekcji <e>Monitor</e>.
</p>

<p>
Xorg używa ustawień wartości <c>HorizSync</c> oraz <c>VertRefresh</c> w sekcji
<e>Monitor</e> do obliczenia rozdzielczości. Jak narazie zostaw te wartości nie
zmienione. Tylko w przypadku, gdy zmiany w sekcji <e>Screen</e> (którą opiszemy
za minutkę) nie będą działały, konieczne będzie zajrzenie do specyfikacji
monitora i wpisanie poprawnych wartości. Możesz także użyć specjalnego
narzędzia, które wyszuka te wartości, np. <c>sys-apps/ddcxinfo-knoppix</c>.
</p>

<warn>
<b>Nigdy</b> nie zmieniaj tych wartości ot tak sobie, bez sprawdzenia
specyfikacji technicznej swojego monitora. Ustawienie nie odpowiednich wartości
w najlepszym wypadku prowadzi do błędów out-of-sync, a w najgorszym do spalenia
monitora.
</warn>

<p>
A teraz zmieńmy sobie wkońcu rozdzielczość. W następnym przykładzie dodamy do
<path>/etc/X11/xorg.conf</path> linię <c>Modes</c> oraz <c>DefaultDepth</c> tak,
aby serwer X uruchamiał się domyślnie w rozdzielczości 1024x768 i 24 bitowej
palecie kolorów. To tylko przykład i zapewne zechcesz dostosować go do swoich
potrzeb.
</p>

<pre caption="Zmiana rozdzielczości w sekcji Screen pliku /etc/X11/xorg.conf">
Section "Screen"
  Identifier  "Default Screen"
  Device    "S3 Inc. ProSavage KN133 [Twister K]"
  Monitor   "Generic Monitor"
  <i>DefaultDepth  24</i>
  <comment># Pomijamy kilka linijek w celu zwiększenia czytelności</comment>
  SubSection "Display"
    Depth   24
    <i>Modes   "1024x768"</i>
  EndSubSection
EndSection
</pre>

<p>
Włącz serwer X (<c>startx</c>), aby odkryć że używa on dokładnie tej
rozdzielczości, którą właśnie ustawiliśmy :)
</p>

</body>
</section>
<section>
<title>Konfiguracja klawiatury.</title>
<body>

<p>
Aby skonfigurować serwer X do używania odpowiedniego układu klawiatury, odszukaj
sekcję <e>InputDevice</e>, która odpowiada za konfigurację klawiatury i dodaj
opcję <c>XkbLayout</c>, która będzie mówiła jaki układ klawiatury ma być użyty.
W przykładzie poniżej, pokazujemy jak ustawić polski:
</p>

<pre caption="Zmiana układu klawiatury">
Section "InputDevice"
  Identifier  "Generic Keyboard"
  Driver    "keyboard"
  Option    "CoreKeyboard"
  Option    "XkbRules"  "xorg"
  Option    "XkbModel"  "pc105"
  <i>Option    "XkbLayout" "pl"</i>
EndSection
</pre>

</body>
</section>
<section>
<title>Konfiguracja myszy.</title>
<body>

<p>
Jeżeli mysz nie działa, po pierwsze konieczne będzie sprawdzenie czy jest
ona wykrywana przez jądro. Myszy są (w pojęciu urządzeń Linuksa)
widziane jako <path>/dev/input/mouse0</path> (lub <path>/dev/input/mice</path>,
jeśli jest ich kilka). W niektórych przypadkach system może również korzystać z
<path>/dev/psaux</path>. Tego które z tych urządzeń jest właściwe można się
dowiedzieć dzięki zawartości tych plików w trakcie poruszania myszką. Aby
zakończyć zabawę należy nacisnąć <c>Ctrl-C</c>.
</p>

<pre caption="Sprawdzanie pliku urządzenia">
 # <i>cat /dev/input/mouse0</i>
<comment>(Pamiętaj, że aby zakończyć należy użyć kombinacji Ctrl-C)</comment>
</pre>

<p>
Jeżeli twoja mysz nie została wykryta, sprawdź czy wszystkie potrzebne moduły
jądra zostały załadowane.
</p>

<p>
Jeżeli twoja mysz została wykryta, wpisz odpowiednią nazwę pliku urządzenia do
sekcji <e>InputDevice</e>. W poniższym przykładzie zobaczysz, że wpiszemy także
dwie inne opcje: <c>Protocol</c> (która podaje, jakiego protokołu będzie używała
nasza mysz - większość użytkowników używa PS/2 lub IMPS/2), oraz
<c>ZAxisMapping</c> (która pozwala na używanie rolek myszy (jeśli takie
występują)).
</p>

<pre caption="Zmiana ustawień myszy">
Section "InputDevice"
  Identifier  "TouchPad Mouse"
  Driver    "mouse"
  Option    "CorePointer"
  <i>Option    "Device"    "/dev/input/mouse0"</i>
  <i>Option    "Protocol"    "IMPS/2"</i>
  <i>Option    "ZAxisMapping"    "4 5"</i>
EndSection
</pre>

<p>
Wykonaj teraz <c>startx</c> i ciesz się z rezultatów :) Gratulacje, masz teraz
(miejmy nadzieję) w piełni działający serwer X jakim jest Xorg. Następnym
krokiem będzie usunięcie tego ochydnego małego menedżera okien i używanie
jakiegoś wartego uwagi jak np. KDE lub GNOME, ale to temat na inny poradnik :)
</p>

</body>
</section>
</chapter>
<chapter>
<title>Źródła.</title>
<section>
<title>Tworzenie i optymalizacja pliku xorg.conf.</title>
<body>

<p>
Po pierwsze, <c>man 5 xorg.conf</c> szybko udostępni nam kompletną dokumentację
dotyczącą składni używanej w pliku konfiguracyjnym Xorg. Pamiętaj, aby mieć ją
otwartą, gdy przyjdzie ci dokonywać jakichkolwiek zmian w tym pliku.
</p>

<p>
Kolejnym miejscem w jakim znajdziemy zasoby dokumentacji jest
<path>/usr/X11R6/lib/X11/doc</path> z mnóstwem różnych plików
<path>README</path> dla poszczególnych chipsetów kart graficznych.
</p>

<p>
Jest jeszcze wiele dokumentacji dostępnej bezprośrednio w internecie na temat
edycji pliku <path>xorg.conf</path>. Podamy tutaj zaledwie kilka, pamiętaj że
zawsze możesz znaleźć więcej w <uri link="http://www.google.com">Google</uri> :)
Ponieważ zarówno <path>xorg.conf</path> jak i <path>XF86Config</path> (plik
konfiguracyjny projektu XFree86) używają tej samej składni dla większości opcji
konfiguracyjnych, a dużo z dostępnej dokumentacji jest przeznaczona właśnie 
dla XFree86, podamy tutaj także odnośniki i do niej.
</p>

<ul>
  <li>
    <uri link="http://tldp.org/HOWTO/XFree-Local-multi-user-HOWTO/">
    Przewodnik po trybie wieloużytkownikowym.</uri>
  </li>
  <li>
    <uri
    link="http://www-106.ibm.com/developerworks/edu/os-dw-linuxxwin-i.html">Wstęp
    do XFree 4.x</uri> autorstwa Chrisa Housera.
  </li>
</ul>

</body>
</section>
</chapter>
</guide>
