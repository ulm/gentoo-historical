<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pl/gentoo-ppc-faq.xml,v 1.9 2006/02/07 15:26:38 shadoww Exp $ -->

<guide link="/doc/pl/gentoo-ppc-faq.xml" lang="pl">
<title>Gentoo/PPC, często zadawane pytania</title>

<author title="Redaktor">
  <mail link="rajiv@gentoo.org">Rajiv Manglani</mail>
</author>
<author title="Redaktor">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Redaktor">
  <mail link="sejo@gentoo.org">Jochen Maes </mail>
</author>
<author title="Redaktor">
  <mail link="josejx@gentoo.org">Joseph Jezak</mail>
</author>
<author title="Tłumaczenie">
  <mail link="edi15ta@gazeta.pl">Mateusz Kotyrba</mail>
</author>

<abstract>
Ten dokument jest zbiorem pytań i odpowiedzi z listy dyskusyjnej gentoo-ppc-dev
oraz z IRC-a. Wszelkie propozycje pytań (i odpowiedzi) do dodania, proszę
kierować do autora tekstu lub do zespołu dokumentacji Gentoo.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.24</version>
<date>2006-01-04</date>

<chapter>
<title>Pytania</title>
<section>
<title>Wprowadzenie</title>
<body>

<p>
Ten dokument jest zbiorem pytań i odpowiedzi z listy dyskusyjnej gentoo-ppc-dev
oraz z IRC-a. Wszelkie propozycje pytań (i odpowiedzi) do dodania, proszę
kierować do autora tekstu lub do zespołu dokumentacji Gentoo.
</p>

</body>
</section>
<section>
<title>Instalacja</title>
<body>

<ul>
  <li>
    <uri link="#osxverify">Jak pod OSX sprawdzić, że pobrany plik nie jest
     uszkodzony?</uri>
  </li>
  <li>
    <uri link="#dualboot">Czy można mieć jednocześnie zainstalowane Mac OS X i
    Gentoo?</uri>
  </li>
  <li>
    <uri link="#bwof">
      Jestem posiadaczem wczesnych NewWorld Mac takich jak Blue i White G3.
      Powinny one być zgodne z LiveCD, ale w trakcie ładowania systemu zwracany
      jest błąd "Unknown or corrupt filesystem".
    </uri>
  </li>
  <li>
    <uri link="#bootxarchive">
      Posiadacze OldWorld Macintosh powinni używać BootX. Jednakże czasem
      występują problemy z otwarciem archiwum instalatora BootX. Co wtedy
      zrobić?
    </uri>
  </li>
  <li>
    <uri link="#beigehd">
      Mam Beige G3. Czy mogę zainstalować Gentoo na PPC na drugim dysku IDE
      maszyny Beige G3?
    </uri>
  </li>
  <li>
    <uri link="#8gblimit">
      Po wymianie dysku twardego w iMacu serii A lub B na większy nie można
      załadować jakiegokolwiek systemu!
    </uri>
  </li>
  <li>
    <uri link="#fstabboot">
      Plik /etc/fstab zawiera linię /dev/BOOT. Czy należy ustawić tę linię na
      partycję bootstrap?
    </uri>
  </li>
  <li>
    <uri link="#fixit">
      Po ponownym uruchomieniu systemu yaboot nie zadziałał! Jak to naprawić?
    </uri>
  </li>
</ul>

</body>
</section>
<section>
<title>Obsługa sprzętu</title>
<body>

<ul>
  <li>
    <uri link="#laptoppkgs">
      akie pakiety należy zainstalować, pracując na Gentoo na laptopie PowerPC,
      aby załączyć zespół funkcji charakterystycznych dla laptopów?
    </uri>
  </li>
  <li>
    <uri link="#onebutton">
      Jak można używać drugiego i trzeciego przycisku myszy, posiadając mysz z
      jednym przyciskiem (przycisk ctrl nie działa)?
    </uri>
  </li>
  <li>
    <uri link="#airport">Jak skonfigurować kartę Airport?</uri>
  </li>
  <li>
    <uri link="#airportextreme">
      Jak skonfigurować kartę Airport Extreme?
    </uri>
  </li>
  <li>
    <uri link="#modem">
      Czy zadziała modem wewnętrzny?
    </uri>
  </li>
  <li>
    <uri link="#sleep">Czy działa uśpienie w iBooku lub PowerBooku?</uri>
  </li>
  <li>
    <uri link="#sound">Jak uruchomić dźwięk?</uri>
    <ul>
      <li>
        <uri link="#alsa">Ustawienie dźwięku za pomocą ALSA</uri>
      </li>
      <li>
        <uri link="#oss">Ustawienie dźwięku za pomocą OSS</uri>
      </li>
    </ul>
  </li>
  <li>
    <uri link="#wakeon">
      Jak sprawić, aby karta sieciowa uruchamiała się po zaniknięciu zasilania?
    </uri>
  </li>
</ul>

</body>
</section>
<section>
<title>Programy</title>
<body>

<ul>
  <li>
    <uri link="#masked">
      Podczas próby instalacji pakietu wyświetlany jest błąd mówiący o tym, że
      pakiet został zamaskowany. Co należy zrobić?
    </uri>
  </li>
  <li>
    <uri link="#flash">Czy Gentoo na architekturze PPC wspiera Flash?</uri>
  </li>
  <li>
    <uri link="#java">Czy Gentoo na architekturze PPC ma wtyczkę z Javą?</uri>
  </li>
  <li>
    <uri link="#xconf">Czy istnieje prosty sposób konfiguracji środowiska X?</uri>
  </li>
  <li>
    <uri link="#drm">
      Jak załączyć Direct Rendering (DRM) na kartach radeon lub rage128?
    </uri>
  </li>
  <li>
    <uri link="#keymap">
      Międzynarodowy układ klawiatury nie działa poprawnie na zainstalowanym
      Xorgu. Główne klawisze działają dobrze, ale nie da się złożyć żadnego
      znaku specjalnego, chociażby znaku "@". Wyjście startx wyświetla coś w
      rodzaju "could not load keymap, falling back to default keymap". Co jest
      źle?
    </uri>
  </li>
  <li>
    <uri link="#glfreeze">
      Używając OpenGL DRI lub oglądając filmy, czasami system nieoczekiwanie
      blokuje się. Co należy zrobić?
    </uri>
  </li>
  <li>
    <uri link="#audiocd">Jak odtwarzać płyty audio?</uri>
  </li>
  <li>
    <uri link="#mol">Czy można uruchomić Mac OS 9 lub Mac OS X pod
    Gentoo?</uri>
  </li>
  <li>
    <uri link="#ext">Czy mamy dostęp do partycji ext2 lub ext3 spod OSX?</uri>
  </li>
  <li>
    <uri link="#useflags">
      Które flagi USE nie działają na maszynach PowerPC?
    </uri>
  </li>
  <li>
    <uri link="#distcc">Jak ustawić distcc z maszyną opartą na architekturze
    x86?</uri>
  </li>
  <li>
    <uri link="#gccsegfaults">
      Dlaczego gcc wyświetla błędy podczas budowania pakietów?
    </uri>
  </li>
</ul>

</body>
</section>
<section>
<title>Zasoby</title>
<body>

<ul>
  <li>
    <uri link="#cd">Czy można kupić płytę CD z Gentoo na architekturę
    PPC?</uri>
  </li>
  <li>
    <uri link="#notanswered">
      Nie ma tu odpowiedzi na moje pytanie, co robić dalej?
    </uri>
  </li>
</ul>

</body>
</section>
</chapter>

<chapter>
<title>Instalacja</title>
<section id="osxverify">
<title>Jak pod OSX sprawdzić, że pobrany plik nie jest uszkodzony?</title>
<body>

<p>
W pierwszej kolejności należy się upewnić, że nie zamontowaliśmy serwera ftp za
pomocą Findera i nie skopiowaliśmy pliku metodą przeciągnij-i-upuść. To
spowoduje uszkodzenie pliku ISO. Zamiast tego, należy użyć programu curl
(przykładowo curl -O http://ścieżka/do/pliku/iso).
</p>

<p>
Sumy MD5 można skontrolować za pomocą narzędzia md5sum dostarczanego przez OSX.
Na systemach nie zawierających tego programu będziemy musieli używać możliwości
openssl do wytworzenia sum kontrolnych md5. Zatem wpisujemy w terminalu
następujące polecenie:
</p>

<pre caption="Generowanie sum kontrolnych">
<comment>(To może zająć trochę czasu, zależnie od wielkości pliku ISO oraz wydajności procesora)</comment>
$ <i>openssl md5 /path/to/iso</i>
</pre>

<p>
Następnie porównujemy wynik z odpowiednim plikiem (plik z rozszerzeniem .md5)
znalezionym na serwerze, z którego ściągaliśmy plik ISO. Jeśli oba ciągi znaków
są takie same, to obraz ISO został ściągnięty poprawnie. Należy sprawdzić czy
nie został on już zamontowany (przykładowo z Disk Copy).
</p>

</body>
</section>
<section id="dualboot">
<title>Czy można mieć jednocześnie zainstalowane Mac OS X i Gentoo?</title>
<body>

<p>
Tak! W rzeczywistości <e>yabootconfig</e> automatycznie wykryje i ustawi 
<path>/etc/yaboot.conf</path> z systemem Linux, Mac OS X, a nawet z klasycznym
Mac OS (po dodatkowe informacje o yabootconfig należy sięgnąć do <uri
link="/doc/pl/handbook/handbook-ppc.xml?part=1&amp;chap=10">Podręcznika Gentoo
</uri>). Sztuka polega na tym, aby dobrze podzielić dysk na partycje. Przed
instalacją Gentoo, należy uruchomić system za pomocą płyty instalacyjnej Mac
OS X. Używamy <c>Disk Utility</c>, aby podzielić dysk na 2 lub 3 partycje.
Ewentualnie można użyć <c>parted</c> z najnowszej płyty instalacyjnej, ponieważ
obsługuje on partycje HFS i HFS+. Parted potrafi także zmniejszyć partycję,
więc nie ma potrzeby usuwania istniejącej instalacji. Pierwsza partycja powinna
być na tyle duża, aby zmieściły się na niej wszystkie partycje linuksowe
(root+swap+/home itd.). Postać tej partycji nie ma znaczenia. Druga partycja
jest przeznaczona dla Mac OS X. Trzecia (opcjonalna) partycja jest przeznaczona
dla klasycznego Mac OS. Jest ona potrzebna tylko w przypadku, gdy chcemy
umieścić Mac OS 9 na osobnej partycji.
</p>

<p>
Po podzieleniu dysku, czas na instalację Mac OS X i Mac OS 9 na ich
odpowiednich partycjach. Po zakończeniu instalacji, uruchamiamy <uri
link="/doc/pl/handbook/handbook-ppc.xml">Podręcznik Gentoo</uri>. Kiedy
dojdziemy do rozdziału o podziale dysków na partycje, używamy <c>mac-fdisk</c>
do <e>usunięcia</e> dużej partycji dla Gentoo. Na tym miejscu tworzymy
partycję bootstrap, root, swap, i inne partycje, których potrzebujemy
do pracy z Gentoo.
</p>

<p>
Jeśli jesteśmy posiadaczami OldWorld Macintosh (pre-iMac), kierujemy się
podobną procedurą jak wyżej opisana, z tym, że należy użyć płyty instalacyjnej
Mac OS 9 i narzędzia <c>Drive Setup</c>. Maszyny OldWorld nie potrzebują
partycji bootstrap.
</p>

<note>
Jeśli yabootconfig nie wykryje partycji MacOS, możemy ręcznie je dodać do
yaboot.config. Po dodatkowe informacje należy udać się do <uri
link="/doc/pl/handbook/handbook-ppc.xml?part=1&amp;chap=10#doc_chap_pre6">
podręcznika</uri>, gdzie znajduje się przykładowy yaboot.conf.
</note>

</body>
</section>
<section id="bwof">
<title>
Jestem posiadaczem wczesnych NewWorld Mac takich jak Blue i White G3. Powinny
one być zgodne z LiveCD, ale w trakcie ładowania systemu zwracany jest błąd
"Unknown or corrupt filesystem".
</title>
<body>

<p>
Aby to obejść należy załadować Open Firmware, poprzez przytrzymanie
kombinacji klawiszy Apple + Option + O + F, podczas startu systemu. Kiedy
pojawi się znak zachęty wpisujemy:
</p>

<pre caption="Rozwiązanie dla wczesnych NewWorld Mac poprzez Open Firmware">
<i>boot cd:,\\yaboot</i>
</pre>

<p>
Po czym powinna się załadować płyta CD. Wielkie dzięki dla Johna Plesmid, który
podał to rozwiązanie.
</p>

</body>
</section>
<section id="bootxarchive">
<title>
Posiadacze OldWorld Macintosh powinni używać BootX. Jednakże czasem występują
problemy z otwarciem archiwum instalatora BootX. Co wtedy zrobić?
</title>
<body>

<p>
Do otwarcia archiwum potrzebna będzie nowa wersja <e>StuffIt Expander</e>.
Możemy <uri link="http://www.stuffit.com/expander/download.html">ściągnąć
go</uri> za darmo.
</p>

</body>
</section>
<section id="beigehd">
<title>
Czy można zainstalować Gentoo na PPC na drugim dysku IDE maszyny Beige G3?
</title>
<body>

<p>
Wczesne modele Beige G3 (te z płytą główną "Rev 1" oraz układem ATI RageII+)
nie wspierają dysków IDE podpiętych jako slave. Aby używać drugiego dysku na
tej maszynie należy dołączyć do niej wewnętrzne lub zewnętrzne łącze SCSI, po
czym należy zainstalować kartę PCI IDE. Późniejsze maszyny G3 nie posiadają
tych ograniczeń. Po dodatkowe informacje należy zajrzeć na stronę
<uri>http://www.xlr8yourmac.com/G3-ZONE/IDE/index.html</uri>.
</p>

</body>
</section>
<section id="8gblimit">
<title>
Po wymianie dysku twardego w iMacu serii A lub B na większy nie można załadować
jakiegokolwiek systemu!
</title>
<body>

<p>
Te maszyny posiadają ograniczenie na wielkość partycji głównego systemu plików,
która nie może być większa niż 8GB. Należy się upewnić, że główny system plików
ma mniejszy rozmiar niż 8GB, po czym wszystko powinno działać jak należy. To
także ma zastosowanie dla OS X i późniejszych wersji OS 9.
</p>

</body>
</section>
<section id="fstabboot">
<title>
Plik /etc/fstab zawiera linię /dev/BOOT. Czy należy ustawić tę linię na
partycję bootstrap?
</title>
<body>

<p>
Nie. Jeśli nie używamy osobnej partycji rozruchowej (<path>/boot</path>),
wtedy nie należy się przejmować tą linią i można ją bez żadnych obaw usunąć.
Partycja bootstrap <e>nie</e> jest partycją <path>/boot</path>, obie partycje
nie są w żaden sposób powiązane. Ogólnie rzecz biorąc maszyny PowerPC nie
potrzebują osobnej partycji rozruchowej <path>/boot</path>, a partycja
bootstrap nie powinna być zamontowana.
</p>

</body>
</section>
<section id="fixit">
<title>
Po ponownym uruchomieniu systemu yaboot nie zadziałał! Jak to naprawić?
</title>
<body>

<p>
Powodem jest prawdopodobnie źle skonfigurowany yaboot.conf. Najprostszym
sposobem, aby to naprawić jest ponowne uruchomienie komputera za pomocą płyty
LiveCD, po czym montujemy partycję Gentoo i sprawdzamy yaboot.conf w
poszukiwaniu błędów. Po zakończeniu należy wykonać <c>ybin -v -C
/mnt/gentoo/etc/yaboot.conf</c>, aby uaktualnić bootloader. To wszystko może
być wykonane bez przechodzenia do środowiska chroot.
</p>

<note>
Jeśli <e>naprawdę</e> zależy nam na powrocie do OSX, to należy przytrzymać
klawisz Option podczas ładowania systemu. To powinno wyświetlić graficzną listę
wyboru ładowalnych dysków.  Wybieramy OSX, ale pamiętamy o naprawieniu
problemów z ładowaniem systemu później.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Obsługa sprzętu</title>
<section id="laptoppkgs">
<title>
Jakie pakiety należy zainstalować, pracując na Gentoo na laptopie PowerPC, aby
załączyć zespół funkcji charakterystycznych dla laptopów?
</title>
<body>

<p>
Istnieją cztery główne pakiety, które należy zainstalować.
</p>

<ul>
  <li>
    <e>pbbuttonsd</e> jest narzędziem, które załącza klawisze jasności oraz
    głośności na większości laptopów ppc.  Obecne wersje pracują także jako
    menedżery zasilania.
  </li>
  <li>
    <e>gtkpbbuttons</e> jest interfejsem gtk dla pbbuttonsd (wizualizacja
    naciśnięć klawiszy w środowisku X). <e>gtkpbbuttons</e>  wymaga gtk. Aby
    otrzymać jak najlepsze rezultaty należy <e>gtkpbbuttons</e> dodać do pliku
    sesji X (<path>~/.Xsession</path>) (po to, aby było zawsze uruchomione
    podczas pracy w środowisku X).
  </li>
  <li>
    <e>powerprefs</e> łączy w sobie funkcjonalność pbbuttonsd, daje możliwość
    edycji ustawień zarządzania zasilaniem, opcji gładzika i różnych innych
    właściwości.
  </li>
  <li>
    <e>cpudyn</e> pozwala na zmianę częstotliwości procesora, co przynosi
    dłuższą żywotność baterii. Innymi pakietami posiadającymi podobny zespół
    funkcji są <e>powernowd</e>, <e>cpufreqd</e> i <e>speedfreq</e>.
  </li>
</ul>

<p>
Te pakiety można zainstalować poprzez wykonanie odpowiednich poleceń z listy
poniżej:
</p>

<pre caption="Instalacja pakietów charakterystycznych dla laptopów">
# <i>emerge pbbuttonsd; rc-update add pbbuttonsd default</i>
# <i>emerge gtkpbbuttons</i>
# <i>emerge powerprefs</i>
# <i>emerge powernowd</i>
</pre>

<note>
Edytujemy <path>/etc/pbbuttonsd.conf</path> dostosowując go do naszych potrzeb.
Zachowanie klawiszy Fx może być tu kontrolowane tak samo jak wiele opcji
uśpienia. Aby klawisze Fx zachowywały się tak jak pod OSX, należy ustawić
KBDMode na fkeyslast. Możemy wyłączyć podsłuchiwanie tabliczki dotykowej poprzez
ustawienie TPMode na notap. Dostępnych jest także wiele innych opcji, szczegóły
znajdują się w <c>man pbbuttonsd.conf</c>.
</note>

<p>
Pomocne jest dodanie pbbuttonsd i cpudyn do poziomu uruchamiania o nazwie
'boot', po to aby były one uruchamiane podczas ładowania systemu. Wykonujemy:
</p>

<pre caption="Dodajemy pbbuttonsd i cpudyn do poziomu uruchamiania o nazwie 'boot'">
# <i>rc-update add pbbuttonsd boot</i>
# <i>rc-update add powernowd boot</i>
</pre>

</body>
</section>
<section id="onebutton">
<title>
Jak można używać drugiego i trzeciego przycisku myszy, posiadając mysz z jednym
przyciskiem (przycisk ctrl nie działa)?
</title>
<body>

<p>
W Mac OS X nie można korzystać z przycisku ctrl, ale można mapować dowolny inny
klawisz do emulowania drugiego i trzeciego przycisku myszki. Odpowiednie
wartości można uzyskać dzięki programowi <c>showkey</c>, z którego korzysta się
w konsoli, gdyż program ten nie działa w X. Aby skorzystać z tej możliwości,
należy włączyć następujące opcje w jądrze:
</p>

<pre caption="Włączenie obsługi 2 i 3 przycisków myszy">
[*] Apple Desktop Bus (ADB) support
[*]    Use input layer for ADB devices
[*]      Support for mouse button 2+3 emulation
</pre>

<p>
Konieczne będzie także ustawienie mapowania klawiszy klawiatury i myszki w
pliku <path>/etc/sysctl.conf</path>. Poniżej przykład dla F11 i F12:
</p>

<pre caption="Emulowanie przycisków myszki poprzez F11 i F12">
<comment># Włączamy emulację</comment>
dev.mac_hid.mouse_button_emulation = 1
<comment># 2 klawisz, 87 - F11</comment>
dev.mac_hid.mouse_button2_keycode = 87
<comment># 3 klawisz, 88 - F12</comment>
dev.mac_hid.mouse_button3_keycode = 88
</pre>

<note>
Inne popularne kody przycisków to 125 (przycisk Apple) i 96 (Enter z klawiatury
numerycznej).
</note>

<p>
W celu uaktywnienia tych ustawień wpisujemy:
</p>

<pre caption="Zapisywanie ustawień sysctl">
# <i>sysctl -p /etc/sysctl.conf</i> 
</pre>

</body>
</section>
<section id="airport">
<title>Jak skonfigurować kartę Airport?</title>
<body>

<p>
Karty Airport oparte są na chipsecie Lucent Orinoco. Aby skorzystać z takiej
karty pod Linuksem, należy włączyć następujące opcje w jądrze:
</p>

<pre caption="Bezprzewodowy LAN">
[*] Wirless LAN Drivers &amp; Wireless Extensions
&lt;*&gt; Hermes chipset 802.11b support (Orinoco/Prism2/Symbol)
&lt;*&gt;   Apple Airport support (build-in)
</pre>

<p>
Po skonfigurowaniu jądro trzeba zainstalować jeszcze narzędzia do konfiguracji
sieci bezprzewodowej. <c>iwconfig</c> i reszta programów, wchodzą w skład
pakietu <c>wireless-tools</c>.
</p>

<p>
W celu ustawienia ESSID na wartość home_essid należy wpisać:
</p>

<pre caption="Konfiguracja ESSID">
# <i>iwconfig eth1 essid home_essid</i>
</pre>

<p>
Więcej szczegółów dotyczących iwconfig znajduje się na jego stronie man.
</p>

</body>
</section>
<section id="airportextreme">
<title>Jak skonfigurować kartę Airport Extreme?</title>
<body>

<p>
Od kiedy pojawił się natywny sterownik <uri
link="http://bcm43xx.berlios.de">bcm43xx</uri>, z obsługą tych kart nie ma
problemu. Dopókie nie zostanie on jednak dodany do jądra, trzeba zainstalować
go w sposób opisany w <uri
link="http://forums.gentoo.org/viewtopic-t-409194.html">tym wątku na
forum</uri>.
</p>

<p>
Można skorzystać z MOL i OSX, aby zapewnić Linuksowi dostęp do karty Airport
Extreme. Szczegóły znajdują się w <uri
link="http://forums.gentoo.org/viewtopic-t-365647.html">w tym wątku</uri>.
</p>

</body>
</section>
<section id="modem">
<title>Czy zadziała modem wewnętrzny?</title>
<body>

<p>
W starszych komputerach, wewnętrzny modem jest zwykłym urządzeniem szeregowym.
Aby mógł działać, poza obsługą ppp i i2c, należy zaznaczyć w jądrze także
następujące opcje:
</p>

<pre caption="Sterowniki urządzeń szeregowych">
&lt;*&gt; PowerMac z85c30 ESCC support (CONFIG_SERIAL_PMACZILOG)
</pre>

<p>
Nowsze komputery korzystają z urządzenia USB, dla których jedyne dostępne
sterowniki pochodzą od Linuxant. Jeśli nie kupi się klucza od Linuxant,
sterownik zezwoli jedynie na transfery z prędkością 14.4 i nie pozwoli na
korzystanie z FAX-u. Sterownik ten wchodzi w skład pakietu
<c>net-dialin/hcfusbmodem</c>, który tworzy również <path>/dev/ttySHCF0</path>.
Po zainstalowaniu pakietu należy skonfigurować ppp w tradycyjny sposób.
Dodatkowe informacje znajdują się pod adresem
<uri>http://www.linuxant.com/drivers/hcf/install.html</uri>.
</p>

</body>
</section>
<section id="sleep">
<title>Czy działa uśpienie w iBooku lub PowerBooku?</title>
<body>

<p>
Uśpienie (zrzucenie wszystkich potrzebnych informacji do pamięci RAM) działa
bardzo dobrze na wszystkich iBookach i TiBookach G3. Ostatnio została
udostępniona łatka na jądro, która dodaje wsparcie uśpienia dla iBooków i
AlBooków G4 opartych na kartach graficznych Radeon. Jeśli posiadamy jeden z
tych laptopów, to aby posiadać wbudowane wsparcie w jądrze, należy używać jądra
vanilla-sources-2.6.12 lub gentoo-sources 2.6.11.
</p>

<note>
Należy zauważyć, że 12" PowerBook nie jest wspierany, gdyż posiada układ
nVidii.
</note>

</body>
</section>
<section id="sound">
<title>Jak uruchomić dźwięk?</title>
<body>

<p>
W nowoczesnych jądrach istnieją dwa podejścia do tego zagadnienia. Są nimi OSS
i ALSA. OSS jest starszym rozwiązaniem, które straciło na wartości, ale nadal
dobrze funkcjonuje na starszych Mac-ach. ALSA jest nowszym podejściem, które
jest i będzie w przyszłości wspierane. Zalecane jest używanie ALSA dopóki nie
napotkamy na problemy.
</p>

<note>
Jeśli wkompilujemy w jądro sterownik OSS, sterownik ALSA nie załaduje się.
</note>

<p>
Oprócz konfiguracji jądra, należy także dodać użytkowników, którzy chcą mieć
dostęp urządzeń dźwiękowych, do odpowiedniej grupy za pomocą polecenia:
</p>

<pre caption="Dodawanie użytkowników do grupy audio">
# <i>gpasswd -a użytkownik audio</i>
</pre>

<p>
Jeśli jądro jest ustawione poprawnie, lecz nie słychać żadnych dźwięków, wtedy
należy się upewnić, że głośność głównego miksera jest zwiększona oraz, że
urządzenie nie jest wyciszone!
</p>

<note>
Użytkownicy G5 lub mac-mini powinni posłużyć się przewodnikiem konfiguracji
ALSA pod Gentoo, aby zainstalować najnowszą wersję sterowników ALSA zamiast
tych, które są dołączone do jądra.
</note>

</body>
</section>
<section id="alsa">
<title>Ustawienie dźwięku za pomocą ALSA</title>
<body>

<p>
Ustawimy standardowe sterowniki ALSA oraz warstwę emulacji OSS, po to abyśmy
mogli nadal korzystać z programów, które używają tylko OSS. W <c>make
menuconfig</c> należy wybrać:
</p>

<pre caption="Opcje jądra dla ALSA">
Device Drivers - Sound ---&gt;
&lt;*&gt; Sound card support
    Advanced Linux Sound Architecture ---&gt;
    &lt; &gt;   PowerMac DMA sound support
      &lt;*&gt; Advanced Linux Sound Architecture
      &lt;*&gt; Sequencer support
      &lt;*&gt; Sequencer dummy client
      &lt;*&gt; OSS Mixer API
      &lt;*&gt; OSS PCM (digital audio) API
      [*] OSS Sequencer API
          ALSA PowerMac devices ---&gt;
     &lt;*&gt; PowerMac (AWACS, DACA, Burgundy, Tumbler, Keywest)
</pre>

<p>
(lub ustawiamy jako moduły, które będą ładowane podczas startu systemu).
</p>

<note>
Należy się upewnić, że opcja <c>PowerMac DMA sound support</c> jest wyłączona,
w przeciwnym wypadku moduł ALSA nie załaduje się.
</note>

<p>
Więcej informacji na temat konfiguracji można znaleźć w dokumencie
zatytułowanym <uri
link="/doc/pl/alsa-guide.xml">Konfiguracja sterowników
ALSA w Gentoo</uri>.
</p>

<note>
Jeśli korzysta się ze sterowników z pakietu alsa-driver zamiast tych
wbudowanych w jądro, należy ustawić zmienną ALSA_CARDS na <c>powermac</c>.
</note>

</body>
</section>
<section id="oss">
<title>Ustawienie dźwięku za pomocą OSS</title>
<body>

<note>
OSS używamy tylko wtedy, jeśli nie używamy ALSA
</note>

<p>
W <c>make menuconfig</c> należy wybrać:
</p>

<pre caption="Opcje jądra dla OSS">
&lt;*&gt; Sound card support
  &lt;*&gt;   PowerMac DMA sound support
</pre>

<p>
(lub ustawiamy jako moduły, które będą ładowane podczas startu systemu).
</p>

<p>
Jeśli nie ładuje się moduł <c>dmasound_pmac</c>, należy zbudować
<c>i2c-core</c> jako moduł.
</p>

</body>
</section>
<section id="wakeon">
<title>
Jak sprawić, aby karta sieciowa uruchamiała się po zaniknięciu
zasilania?
</title>
<body>

<p>
Jednostka zarządzając zasilaniem (and. PMU - Power Management Unit) w
większości przypadków posiada możliwość ponownego uruchomienia karty
sieciowej po zaniknięcu zasilania. Opcja ta kontrolowana jest poprzez opcje
PMU, które można znaleźć w katalogu <path>/proc</path>. Aby ją uaktywnić należy
ustawić zmienną <c>server_mode</c> na wartość 1, aby ją wyłączyć ponownie
zmieniamy wartość wyżej wymienionej zmiennej, tym razem jednak na 0.
</p>

<pre caption="Uaktywnianie opcji ponownego startu po utracie zasilania">
# <i>echo "server_mode=1" > /proc/pmu/options</i>
</pre>

<p>
Niestety, opcja ta zostaje wyłączona przy każdym ponownym uruchomieniu
komputera. Aby mieć pewność, że tak się nie stanie należy dodać powyższy wpis
do pliku <path>/etc/conf.d/local.start</path>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Aplikacje</title>
<section id="masked">
<title>
Podczas próby instalacji pakietu wyświetlany jest błąd mówiący o tym, że pakiet
został zamaskowany. Co należy zrobić?
</title>
<body>

<p>
Najczęściej istnieją dwa powody przez które pakiet nie zemerguje się. Powód
pierwszy, pakiet nie został przetestowany na architekturze PPC, powód drugi,
pakiet był testowany jednakże nie został on jeszcze oznaczony jako stabilny.
</p>

<p>
Jeśli pakiet nie został przetestowany na architekturze PPC, należy dodać słowo
kluczowe ppc do ebuildu. Wykonamy to za pomocą narzędzia ekeyword, które jest
częścią pakietu gentoolkit-dev. Dodawanie słowa kluczowego do ebuildu:
</p>

<pre caption="Dodawanie słowa kluczowego ppc do app-tratata/bla">
$ <i>ekeyword ppc /usr/portage/app-foo/bar/bar-1.0.ebuild</i>
</pre>

<p>
Po czym możemy zemergować pakiet. Testujemy aplikację, jeśli działa, wtedy
<b>proszę</b> wysłać błąd na Bugzillę (wymagana bezpłatna rejestracja), aby
jeden z deweloperów mógł dodać słowo kluczowe do ebuildu.
</p>

<note>
Ta zmiana będzie usunięta podczas najbliższej synchronizacji. Jeśli
potrzebujemy tę poprawkę na dłużej, wtedy można utworzyć portage overlay.
Więcej informacji na ten temat znajduje się w dokumentacji Portage.
</note>

<p>
Jeśli pakiet posiada już słowo kluczowe ~ppc, to mamy dwa wyjścia. Można
zastąpić słowo kluczowe ~ppc przez ppc, lub można użyć
<path>/etc/portage</path>, aby odmaskować dany pakiet.
</p>

<pre caption="Używanie /etc/portage do odmaskowania app-tratata/bla">
$ <i>echo "=app-tratata/bla-1.0 ~ppc" > /etc/portage/package.keywords</i>
</pre>

<note>
Jeśli katalog <path>/etc/portage</path> nie istnieje, należy go najpierw
stworzyć.
</note>

<p>
Następnie emergujemy pakiet. Jeśli jesteśmy pewni, że aplikacja jest stabilna,
wtedy <b>proszę</b> wysłać błąd na Bugzillę (wymagana bezpłatna rejestracja),
aby jeden z deweloperów mógł dodać słowo kluczowe do ebuildu.
</p>

</body>
</section>
<section id="flash">
<title>Czy Gentoo na architekturze PPC wspiera Flash?</title>
<body>

<p>
Raczej nie. Macromedia nie dostarczyła Linuksom na architekturze PPC plików
binarnych, natomiast rozwiązania open source są niekompletne i pełne błędów.
Dwa projekty, które pracują nad tym problemem nazywają się <uri
link="http://gplflash.sf.net">gplflash2</uri> i <uri
link="http://swfdec.sf.net">swfdec</uri>, aby uzyskać więcej informacji należy
zaglądnąć na ich strony domowe. Możliwym obejściem tego problemu jest użycie
qemu (emulator na architekturę x86) w celu uruchomienia niezależnego Macromedia
Flash Player 6. Ten proces był opisany na forum:
<uri>http://forums.gentoo.org/viewtopic.php?t=117774</uri>
</p>

</body>
</section>
<section id="java">
<title>Czy Gentoo na architekturze PPC ma wtyczkę z Javą</title>
<body>

<p>
Tak, można skorzystać z pluginu Java autorstwa IBM w wersji 1.5 beta.
</p>

</body>
</section>
<section id="xconf">
<title>Czy istnieje prosty sposób konfiguracji środowiska X?</title>
<body>

<p>
Po prostu emergujemy <c>Xautoconfig</c>.  Po zainstalowaniu tego pakietu,
wykonujemy polecenie Xautoconfig, aby stworzyć plik konfiguracyjny z naszymi
ustawieniami. Aby wybrać mapowanie klawiatury, należy wykorzystać flagę
--keymap. <c>Xorgautoconfig</c> nie ustawi DRM dla większości użytkowników,
zwykle trzeba będzie poprawić w tym celu konfigurację jądra.
</p>

</body>
</section>
<section id="drm">
<title>
Jak załączyć Direct Rendering (DRM) na kartach radeon lub rage128?
</title>
<body>

<p>
Jądro należy mieć skompilowane z następującymi opcjami:
</p>

<pre caption="Konfiguracja jądra">
Device Drivers - Character devices ---&gt;
  &lt;*&gt; /dev/agpgart (AGP Support)
  [*] Apple UniNorth support
  [*] Direct Rendering Manager (DRI support)
  &lt;*&gt;   ATI Rage 128
  &lt;*&gt;   ATI Radeon
Device Drivers - Graphics Support ---&gt;
  &lt;*&gt;   ATI Rage 128 display support
  &lt;*&gt;   ATI Radeon display support
</pre>

<p>
Jeśli zachodzi taka potrzeba, kompilujemy ponownie i instalujemy jądro.  Potem
należy się upewnić, że załadowaliśmy system używając rodzimego bufora ramki
(np.  radeonfb lub atyfb, ale <e>nie</e> za pomocą offb lub ofonly video), a
następnie wykonujemy <c>Xorgautoconfig</c>.
</p>

<impo>
Może być również potrzebna edycji pliku <path>/etc/X11/xorg.conf</path>
zależnie od ustawień karty. Należy się upewnić, że wybranym sterownikiem
urządzenia jest ati lub inny specyficzny dla naszej karty (r128 lub radeon).
Należy również się upewnić, że rozszerzenie DRI jest załadowane,
niezakomentowane.
</impo>

<note>
Jak na razie DRI nie wspiera układów R300 lub R400, w tym celu został
uruchomiony projekt na <uri>http://r300.sourceforge.net</uri>. Obsługa pojawi
się w następnym większym wydaniu X.org, projekt zajmujący się obsługą R300
wchodzi teraz w skład projektu DRI. Większość układów nVidii również jest nie
wspieranych na architekturze PPC, sterownik nv dostarcza podstawowej
akceleracji 2D, ale już nie 3D.
</note>

</body>
</section>
<section id="keymap">
<title>
Międzynarodowy układ klawiatury nie działa poprawnie na zainstalowanym Xorgu.
Główne klawisze działają dobrze, ale nie da się złożyć żadnego znaku
specjalnego, chociażby znaku "@". Wyjście startx wyświetla coś w rodzaju "could
not load keymap, falling back to default keymap". Co jest źle?
</title>
<body>

<p>
Należy sprawdzić czy uprawnienia do katalogu <path>/var/tmp</path> są ustawione
na <path>drwxrwxrwx</path>. Jeśli nie, należy je zmienić poprzez wpisanie
<c>chmod a+rwx /var/tmp</c>. To pozwoli Xorgowi ponownie ładować poprawne
układy
klawiszy.
</p>

</body>
</section>
<section id="glfreeze">
<title>
Używając OpenGL DRI lub oglądając filmy, czasami system nieoczekiwanie blokuje
się. Co należy zrobić?
</title>
<body>

<p>
System może nieprawidłowo radzić sobie z wsparciem dla AGP. Najłatwiejszym
rozwiązaniem jest dodanie następującej linii do części "Device" w pliku
<path>/etc/X11/xorg.conf</path>:
</p>

<pre caption="Przymusowy tryb PCI dla kard AGP">
Option       "ForcePCIMode"
</pre>

<p>
Istnieją również problemy z rozszerzeniem composite i innymi rozszerzeniami
załączonymi do nowszych wydań pakietu X.org.
</p>

</body>
</section>
<section id="audiocd">
<title>Jak odtwarzać płyty audio?</title>
<body>

<p>
Komputery NewWorld nie posiadają połączenia pomiędzy napędem CD-ROM, a kartą
dźwiękową. W związku z tym muzykę trzeba odczytywać jak zwykłe dane, a potem
przekierowywać do karty. Umożliwia to plugin <e>xmms-cdread</e> programu
<e>xmms</e>. Odczytuje on dźwięk z CD poprzez kabel ATA, dekoduje go i przesyła
do karty dźwiękowej w formie cyfrowej poprzez szynę PCI.
</p>

<pre caption="Instalacja XMMS z obsługą audiocd">
# <i>emerge xmms xmms-cdread</i>
</pre>

<note>
Należy się upewnić, że poniższa ścieżka odpowiada urządzeniu CD-ROM w
komputerze.
</note>

<p>
Aby przesłuchać płytę, wystarczy uruchomić <c>xmms</c> i podać
<c>/dev/cdrom</c> jako nazwę pliku do odtwarzania.
</p>

</body>
</section>
<section id="mol">
<title>Czy można uruchomić Mac OS 9 lub Mac OS X pod Gentoo?</title>
<body>

<p>
Tak, pod warunkiem, że pracujemy na Gentoo na architekturze PPC, możemy użyć
<uri link="http://www.maconlinux.org/">Mac-on-Linux</uri>, który pozwala
uruchomić instancję systemu OS 9, OS X lub Linux jako proces Linuksa. Aby
zainstalować ten pakiet, wykonujemy <c>emerge mol</c>. MOL wspiera Mac OS 7.5.2
aż do wersji 9.2.2, a także wersje OS X za wyjątkiem wersji Tiger (dla której
wsparcie jest obecnie w trakcie realizacji). Może zostać uruchomiony spod
bufora ramki konsoli lub w oknie środowiska X.
</p>

<note>
Aby uruchomić MOL w trybie pełnoekranowym, należy go skompilować z załączoną
flagą USE 'fbcon' i uruchomić w spod bufora ramki konsoli.
</note>

<p>
Sterowniki sieciowe oraz dźwięku instalujemy w katalogu
<path>MOL-Install</path> na pulpicie w Mac OS X. Jeśli wystąpią problemy z
siecią, należy się upewnić, że następujące opcje mamy wkompilowane w jądro:
</p>

<p>
Dla sieci w OSX:
</p>

<ul>
  <li>Universal TUN/TAP device driver support (CONFIG_TUN)</li>
</ul>

<p>
Dla serwera DHCP:
</p>

<ul>
  <li>Socket Filtering (CONFIG_FILTER)</li>
  <li>Packet Socket (CONFIG_PACKET)</li>
</ul>

<p>
Dla NAT:
</p>

<ul>
  <li>Network packet filtering (CONFIG_NETFILTER)</li>
  <li>Connection tracking (CONFIG_IP_NF_CONNTRACK)</li>
  <li>IP tables support (CONFIG_IP_NF_IPTABLES)</li>
  <li>Packet filtering (CONFIG_IP_NF_FILTER)</li>
  <li>Full NAT (CONFIG_IP_NF_NAT)</li>
  <li>MASQUERADE target support (CONFIG_IP_NF_TARGET_MASQUERADE)</li>
</ul>

</body>
</section>
<section id="ext">
<title>Czy mamy dostęp do partycji ext2 lub ext3 spod OSX?</title>
<body>

<p>
OSX wspiera odczyt oraz zapis na partycji ext2 lub ext3 poprzez rozszerzenie
jądra dostarczone przez <uri
link="http://sourceforge.net/projects/ext2fsx">projekt ext2fsx</uri>.
</p>

<note>
Używając MOL, nie posiadamy dostępu do partycji obecnie używanych przez
Linuksa.
</note>

</body>
</section>
<section id="useflags">
<title>Które flagi USE nie działają na maszynach PowerPC?</title>
<body>

<p>
Jeśli używamy starego profilu (sprzed 2005.0) to, aby sprawdzić listę tych
flag, należy spojrzeć do pliku <path>/etc/make.profile/use.mask</path>.
</p>

<p>
Jeśli używamy kaskadowego profilu (2005.0 i późniejszych) wtedy, aby zobaczyć
listę tych flag, zaglądamy do pliku
<path>/usr/portage/profiles/default-linux/ppc/use.mask</path>.
</p>

</body>
</section>
<section id="distcc">
<title>Jak można ustawić distcc z maszyną opartą na architekturze x86?</title>
<body>

<p>
Jeśli posiadamy inny szybszy komputer, możemy założyć distcc, aby kompilować
pliki binarne dla wolniejszego procesora na architekturze ppc. Najlepiej, aby
jak najwięcej kompilacji odbywało się na szybszym komputerze, oczywiście jeśli
to jest możliwe. Nawet nie warto niczego kompilować na wolniejszym komputerze.
Dodatkowe informacje znajdziemy na stronach:
<uri>http://dev.gentoo.org/~vapier/CROSS-COMPILE-HOWTO</uri> i <uri>
http://www.sable.mcgill.ca/~dbelan2/crossdev/crossdev-powerpc-i686.html</uri>
</p>

</body>
</section>
<section id="gccsegfaults">
<title>Dlaczego gcc wyświetla błędy podczas budowania pakietów?</title>
<body>

<p>
Jeśli gcc wyświetla błędy naruszenia ochrony pamięci, prawdopodobnie nie jest
to błąd gcc i nie jest to nawet problem sprzętu. W większości przypadków jest
to spowodowane włączeniem wywłaszczenia jądra (ang. kernel preemption). Pomimo,
że ta opcja jest bezpieczna na architekturze x86, to właśnie ona może być
powodem uszkodzenia cache'a na PPC co jest najczęściej zauważanym błędem
podczas kompilacji. Aby temu zapobiec, kompilujemy ponownie jądro z wyłączoną
opcją wywłaszczania. Sprawdzamy czy wywłaszczanie jest załączone:
</p>

<pre caption="Sprawdzanie czy wywłaszczanie jest załączone">
$ <i>grep PREEMPT /usr/src/linux/.config</i>
</pre>

<p>
Jeśli zostanie zwrócone: "# CONFIG_PREEMPT is not set", wtedy należy zgłosić
ten błąd.
</p>

<p>
Jeśli zwróci: "CONFIG_PREEMPT=y", wtedy należy wyłączyć tę opcję i ponownie
skompilować jądro.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Zasoby</title>
<section id="cd">
<title>Czy można kupić płytę CD z Gentoo na architekturę PPC?</title>
<body>

<p>
Tak! Sprzedajemy Gentoo na płytach CD w naszym <uri
link="http://store.gentoo.org/">sklepie Gentoo</uri>.
</p>

</body>
</section>
<section id="notanswered">
<title>Nie ma tu odpowiedzi na moje pytanie, co robić dalej?</title>
<body>

<p>
Po pierwsze należy przeszukać <uri link="/doc/pl/index.xml">dokumentację na
www.gentoo.org</uri>. Obecnie istnieją dwie <uri
link="/main/pl/lists.xml">listy dyskusyjne</uri> związane z architekturą PPC,
gentoo-ppc-dev oraz gentoo-ppc-user. <uri
link="http://forums.gentoo.org/viewforum.php?f=24">Gentoo na PPC</uri> (na
forums.gentoo.org) jest forum dyskusyjnym związanym problemami na PowerPC. Jak
zwykle istnieje również gorąca dyskusja na kanale IRC (<c>#gentoo-ppc</c> sieci
<c>irc.freenode.net</c>).
</p>

<p>
Ogólne informacje o Linuksach na PowerPC mogą być znalezione na stronie <uri
link="http://penguinppc.org/">penguinppc.org</uri>. Ogólne informacje o
Linuksie są na stronie <uri
link="http://www.linuxdoc.org/">www.linuxdoc.org</uri>.
</p>

</body>
</section>
</chapter>
</guide>
