<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pl/handbook/hb-portage-files.xml,v 1.1 2004/12/24 10:55:12 neysx Exp $ -->

<sections>

<version>1.4</version>
<date>2004-10-23</date>

<section>
<title>Pliki Portage.</title>
<subsection>
<title>Dyrektywy konfiguracji.</title>
<body>

<p>
Domyślna konfiguracja Portage znajduje się w pliku 
<path>/etc/make.globals</path>. Gdy mu się przyjrzysz zauważysz, że
Portage jest konfigurowane za pomocą zmiennych. Znaczenie
poszczególnych zmiennych omówimy w dalszych rozdziałach.
</p>

<p>
Portage  ma również domyślny plik konfiguracyjny wewnątrz Twojego profilu:
<path>/etc/make.profile/make.defaults</path>, ponieważ większość dyrektyw
konfiguracji zależy od architektury. O katalogu <path>/etc/make.profile</path>
i ogólnie o profilach porozmawiamy szerzej w dalszych rozdziałach podręcznika.
</p>

<p>
Jeśli chcesz zmienić konfigurację zmiennej, <e>nie</e> edytuj
<path>/etc/make.globals</path> ani <path>/etc/make.profile/make.defaults</path>. 
Zamiast tego skorzystaj z <path>/etc/make.conf</path>, który jest nadrzędny nad
w/w plikami i jest jedynym odpowiednim miejscem do wprowadzania jakichkolwiek
zmian do konfiguracji. Jeśli brak Ci inspiracji i nie wiesz co wpisać do tego
pliku przejrzyj przykładowy <path>/etc/make.conf.example</path>.
</p>

<p>
Masz również możliwość zdefiniowania konfiguracyjnej zmiennej Portage jako
zmiennej środowiskowej, ale nie jest to zalecana metoda.
</p>

</body>
</subsection>
<subsection>
<title>Informacje specyficzne dla profilu.</title>
<body>

<p>
Wspominaliśmy już o katalogu <path>/etc/make.profile</path>. Nie jest to de
facto katalog, lecz symboliczne dowiązanie do Twojego profilu znajdującego się
wewnątrz <path>/usr/portage/profiles</path>. Profile mogą znajdować się
w dowolnym miejscu na dysku, wystarczy, że to dowiązanie wskazuje na prawidłowy
katalog.
</p>

<p>
Każdy Profil zawiera informacje specyficzne dla danej architektury. Należą do nich
między innymi lista pakietów niezbędnych dla danego systemu oraz lista pakietów niedziałających (bądź
zamaskowanych) na danym systemie.
</p>

</body>
</subsection>
<subsection>
<title>Konfiguracja specyficzna dla użytkownika.</title>
<body>

<p>
Kiedy zechcesz zmienić związane z instalacją pakietów zachowanie Portage
będziesz musiał udać się do katalogu <path>/etc/portage</path>. Polecamy
wpisywanie tam całej własnej konfiguracji, nalegamy też abyście zrezygnowali z
konfigurowania Portage przez zewnętrzne zmienne środowiskowe.
</p>

<p>
Wewnątrz <path>/etc/portage</path> możesz stworzyć następujące pliki:
</p>

<ul>
  <li>
   <path>package.mask</path>, w którym znajduje się lista pakietów, których nigdy nie będziesz
   chciał instalować.
  </li>
  <li>
    <path>package.unmask</path>, w którym znajduje się lista pakietów, które mają
    być instalowane wbrew zaleceniom developerów.
  </li>
  <li>
    <path>package.keywords</path>, w którym znajduje się lista pakietów, które chcesz 
    instalować pomimo faktu, że nie są do końca kompatybilne z Twoim systemem
    bądź architekturą.
  </li>
  <li>
    <path>package.use</path>, w którym znajduje się lista flag USE, których chcesz
    używać dla określonych pakietów, a które różnią się od tych ustawionych
    globalnie w systemie.
  </li>
</ul>

<p>
Więcej informacji o katalogu <path>/etc/portage</path> oraz pełną listę plików, które
możesz tam stworzyć znajdziesz w man'ie Portage:
</p>

<pre caption="Czytanie strony man dla Portage">
$ <i>man portage</i>
</pre>

</body>
</subsection>
<subsection>
<title>Zmiana lokalizacji plików i katalogów należących do Portage.</title>
<body>

<p>
Omówione przed chwilą pliki zawsze muszą znajdować się w tym samym,
określonym miejscu, gdyż tylko tam Portage będzie ich szukało. Możesz
jednak zmienić lokalizację innych katalogów używanych przez system, takich jak
na przykład miejsce zapisywania kodów źródłowych, katalog, w którym budowane są
programy, czy miejsce, w którym znajduje się drzewo Portage. 
</p>

<p>
Domyślne miejsca tych wszystkich akcji są wspólne i doskonale znane wszystkim
użytkownikom Gentoo. Jeśli jednak z jakichś względów chcesz je zmienić możesz to
zrobić poprzez plik <path>/etc/make.conf</path>. W pozostałej części tego
rozdziału omówimy wszystkie specjalne lokalizacje w jakich działa Portage oraz
sposoby ich zmieniania.
</p>

<p> 
Wszystkie zawarte w tym dokumencie informacje można uzyskać czytając many'y
Portage i <path>make.conf</path>. 
</p>

<pre caption="Czytanie stron man Portage i pliku make.conf">
$ <i>man portage</i>
$ <i>man make.conf</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Zapisywanie plików.</title>
<subsection>
<title>Drzewo Portage.</title>
<body>

<p>
Domyślnie drzewo Portage znajduje się w katalogu <path>/usr/portage</path>,
który definiowany jest przez zmienną PORTDIR. Jeśli kiedykolwiek zechcesz
zmienić tą zmienną pamiętaj również o wprowadzeniu odpowiednich zmian w
<path>/etc/make.profile</path>.
</p>

<p>
Jeśli zmodyfikujesz zmienną PORTDIR to powinieneś poprawić też zmienne
PKGDIR, DISTDIR i RPMDIR, gdyż programy zauważą zmiany PORTDIR i akcje wykorzystujące te
zmienne będą dalej wykonywane wewnątrz dawnego miejsca rezydowania drzewa
Portage.
</p>

</body>
</subsection>
<subsection>
<title>Prekompilowane pakiety.</title>
<body>

<p>
Domyślnie Portage nie korzysta z prekompilowanych pakietów. Posiada jednak
wsparcie dla nich i masz możliwość korzystania z nich wedle potrzeb. Jeśli
zażądasz od Portage zbudowania takiej paczki trafi ona do
<path>/usr/portage/packages</path>. Ścieżka ta przechowywana jest w zmiennej
PKGDIR.
</p>

</body>
</subsection>
<subsection>
<title>Kody źródłowe.</title>
<body>

<p>
Domyślnie pobrane kody źródłowe instalowanych aplikacji są przechowywane
wewnątrz <path>/usr/portage/distfiles</path>. Tę lokalizację przechowuje zmienna
DISTDIR.
</p>

</body>
</subsection>
<subsection>
<title>Pliki RPM.</title>
<body>

<p>
Portage umożliwia wygenerowanie plików RPM przy pomocy polecenia <c>ebuild</c>
(zobacz <uri link="?part=3&amp;chap=6">Aplikacja Ebuild</uri>). Domyślnym
miejscem zapisu wygenerowanych RPM'ów jest <path>/usr/portage/rpm</path>,
przechowywany w zmiennej RPMDIR.
</p>

</body>
</subsection>
</section>
<section>
<title>Budowanie programów.</title>
<subsection>
<title>Tymczasowe pliki Portage.</title>
<body>

<p>
Tymczasowe pliki Portage zapisywane są domyślnie w
katalogu<path>/var/tmp</path>, do którego ścieżkę przechowuje zmienna
PORTAGE_TMPDIR.
</p>

<p>
Zmiana PORTAGE_TMPDIR powinna nieść ze sobą zmianę szeregu innych
zmiennych, które przechowują ścieżki do katalogów wewnątrz starej lokalizacji
tymczasowego folderu. Spowodowane jest to sposobem zarządzania zmiennymi
BUILD_PREFIX przez Portage.
</p>

</body>
</subsection>
<subsection>
<title>Tworzenie katalogów.</title>
<body>

<p>
Tymczasowe, osobne dla każdego budowanego pakietu katalogi powstają w
<path>/var/tmp/portage</path>. Miejsce to zapisane jest w zmiennej BUILD_PREFIX.
</p>

</body>
</subsection>
<subsection>
<title>Lokalizacja systemu plików.</title>
<body>

<p>
Domyślnie Portage instaluje pakiety w bieżącym systemie plików (<path>/</path>),
możesz jednak to zmienić ustawiając zmienną środowiskową ROOT. Przydaje się to,
gdy chcesz stworzyć nowe obrazy budowy.
</p>

</body>
</subsection>
</section>
<section>
<title>Logowanie zdarzeń.</title>
<subsection>
<title>Logowanie Ebuild</title>
<body>

<p>
Portage może tworzyć osobne logi dla każdego ebuildu tylko wtedy, gdy zmienna
PORT_LOGDIR wskazuje na katalog, do którego grupa portage (z której prawami
uruchamiane są wszystkie procesy) ma prawa zapisu. Domyślnie zmienna ta nie jest
ustawiona.
</p>

</body>
</subsection>
</section>
</sections>
