<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pl/handbook/hb-portage-configuration.xml,v 1.9 2005/09/14 01:24:12 rane Exp $ -->

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<sections>

<version>1.4</version>
<date>2005-01-22</date>

<section>
<title>Konfiguracja Portage</title>
<subsection>
<body>

<p>
Portage konfiguruje się poprzez zmienne, znajdujące się na ogół w pliku
<path>/etc/make.conf</path>. Dla uzyskania pełnych informacji nt. tego pliku
zalecamy przeczytanie jego man'a: </p>

<pre caption="Wywoływanie man make.conf">
$ <i>man make.conf</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Opcje budowania programów</title>
<subsection>
<title>Opcje kompilacji</title>
<body>

<p>
W trakcie budowania programu Portage przekazuje kompilatorowi następujące zmienne:
</p>

<ul>
<li>
Zmienna CFLAGS &amp; CXXFLAGS definiują żądane flagi dla kompilacji kodu C i C++.
</li>
<li>
Zmienna CHOST zawiera informację o hoście na którym budowany jest program.
</li>
<li>
Zmienna MAKEOPTS jest przekazywana do polecenia <c>make</c> i jej wartość jest
najczęściej ilością równoległych zadań podczas kompilacji.
</li>
</ul>

<p>
Również zmienne USE są używane podczas budowania programów przez Portage, ale
zostały już szczegółowo omówione w poprzednich rozdziałach, więc nie ma potrzeby
omawiania ich tutaj po raz kolejny.
</p>

</body>
</subsection>
<subsection>
<title>Opcje emergowania</title>
<body>

<p>
Kiedy Portage emerguje nowszą wersję danego programu usuwa przestarzałe pliki z
systemu. Usunięcie to jest poprzedzone odpowiednim komunikatem, a użytkownik ma
5 sekund na przerwanie całej operacji i pozostanie przy
aktualnej wersji programu. Owe 5 sekund definiowanie jest zmienną CLEAN_DELAY.
</p>

</body>
</subsection>
</section>
<section>
<title>Ochrona plików konfiguracyjnych</title>
<subsection>
<title>Chronione przez Portage katalogi</title>
<body>

<p>
Jeśli plik nie znajduje się w lokacji <e>chronionej</e> przez Portage to przy
instalowaniu nowszej wersji programu, do którego należy zostanie po prostu
nadpisany. Te chronione katalogi również możemy skonfigurować, są one
przechowywane w zmiennej CONFIG_PROTECT.
</p>

<p>
Plik znajdujący się w takiej chronionej lokacji nie zostanie nadpisany, Portage
zapisze nowy plik pod inną nazwą i poinformuje użytkownika o pojawieniu się
nowszej wersji.
</p>

<p>
Więcej informacji nt. swojego aktualnego ustawienia zmiennej CONFIG_PROTECT
dostaniemy po wpisaniu komendy <c>emerge --info</c>:
</p>

<pre caption="Znajdowanie aktualnego ustawienie zmiennej CONFIG_PROTECT">
$ <i>emerge --info | grep 'CONFIG_PROTECT='</i>
</pre>

<p>
Więcej informacji na temat ochrony plików konfiguracyjnych w Portage uzyskamy
wpisując: </p>

<pre caption="Więcej informacji nt. ochrony plików konfiguracyjnych w Portage">
$ <i>emerge --help config</i>
</pre>

</body>
</subsection>
<subsection>
<title>Odsłanianie chronionych katalogów</title>
<body>

<p>
Żeby odsłonić konkretny chroniony katalog i umożliwić w nim bezpośrednie
nadpisywanie plików dodajmy go do zmiennej CONFIG_PROTECT_MASK.
</p>

</body>
</subsection>
</section>
<section>
<title>Opcje pobierania</title>
<subsection>
<title>Serwery</title>
<body>

<p>
Jeśli potrzebne są jakieś pliki lub informacje, których nie znajdują się na
dysku to Portage będzie zmuszone pobrać je z Internetu. Miejsca, w których
program będzie ich szukał definiujemy w następujących zmiennych:
</p>

<ul>
<li>
GENTOO_MIRRORS zawiera adresy serwerów lustrzanych z kodami źródłowymi
(distfiles) programów z Portage.
</li>
<li>
PORTAGE_BINHOST zawiera adresy serwerów z prekompilowanymi pakietami.
</li>
</ul>

<p>
Kolejna zmienna zawiera adres serwera rsync, z którego pobierane będą
aktualizacje drzewa Portage:
</p>

<ul>
<li>
Zmienna SYNC zawiera nazwę serwera, z którego Portage będzie pobierało
aktualizacje drzewa Portage.
</li>
</ul>

<p>
Zmienne GENTOO_MIRRORS i SYNC mogą zostać ustawione przy pomocy programu
<c>mirrorselect</c>. Aby móc go używać należy go zainstalować, robimy to
poleceniem <c>emerge mirrorselect</c>. Więcej informacji o programie uzyskamy
wpisując:
</p>

<pre caption="Więcej informacji o mirrorselect">
# <i>mirrorselect --help</i>
</pre>

<p>
Jeśli dodatkowo chcemy korzystać z serwera proxy, używamy do tego zmiennych
HTTP_PROXY, FTP_PROXY, RSYNC_PROXY.
</p>


</body>
</subsection>
<subsection>
<title>Komendy pobierania</title>
<body>

<p>
Do pobierania kodów źródłowych Portage domyślnie używa programu <c>wget</c>.
Możemy to zmienić poprzez zmienną FETCHCOMMAND.
</p>

<p>
Portage jest w stanie wznowić przerwany transfer. Używa w takim przypadku jednej
z możliwości programu <c>wget</c>. Jeśli chcemy to zmienić to wystarczy
wyedytować zmienną RESUMECOMMAND.
</p>

<p>
Należy upewnić się, że wybrane przez nas nowe polecenia FETCHCOMMAND i
RESUMECOMMAND umieszczają kody źródłowe w odpowiednich miejscach. Wewnątrz
zmiennych powinno się umieścić \${URI} i \${DISTDIR} odpowiednie dla lokacji
kodów źródłowych i distfiles.
</p>

<p>
Można również wybrać osobne komendy pobierania w zależności od protokołu, który
akurat jest używany, służą do tego zmienne: FETCHCOMMAND_FTP,
RESUMECOMMAND_HTTP, RESUMECOMMAND_FTP, itd.
</p>

</body>
</subsection>
<subsection>
<title>Ustawienia rsync</title>
<body>

<p>
Nie można wprawdzie zastąpić innym polecenia rsync używanego do aktualizowania
drzewa Portage, ale mamy za to do dyspozycji kilka zmiennych, dzięki którym
można dostosować niektóre parametry jego działania.
</p>

<ul>
<li>
RSYNC_EXCLUDEFROM wskazuje konkretne paczki, lub kategorie paczek, które będą
ignorowane w procesie uaktualniania.
</li>
<li>
RSYNC_RETRIES definiuje jak wiele razy rsync będzie próbował wznowić połączenie
zanim zrezygnuje, domyślnie jest to 3.
</li>
<li>
RSYNC_TIMEOUT definiuje przez ile sekund rsync może pozostawać w stanie
bezczynności zanim uzna, że czas oczekiwania minął. Domyślnie jest to 180, ale
użytkownicy modemów zapewne zechcą przestawić tą opcję na wartość 300 lub
więcej.
</li>
</ul>

</body>
</subsection>
</section>
<section>
<title>Konfiguracja Gentoo</title>
<subsection>
<title>Wybór gałęzi</title>
<body>

<p>
Wyboru gałęzi dokonujemy poprzez zmianę zmiennej ACCEPT_KEYWORDS. Domyślnie jest
to stabilna gałąź naszej architektury, więcej informacji o innych gałęziach
znaleźć można w dalszych rozdziałach podręcznika.
</p>

</body>
</subsection>
<subsection>
<title>Portage Features</title>
<body>

<p>
Przy pomocy zmiennej FEATURES aktywujemy rozmaite dodatkowe możliwości Portage,
które szerzej są omawiane w poświęconym im rozdziale <uri
link="?part=2&amp;chap=3">Możliwości Portage</uri>.
</p>

</body>
</subsection>
</section>
<section>
<title>Zachowanie Portage</title>
<subsection>
<title>Zarządzanie zasobami</title>
<body>

<p>
Zmienna PORTAGE_NICENESS służy do zwiększania, bądź zmniejszania wartości nice z
jaką działa Portage. Wartość ze zmiennej PORTAGE_NICENESS jest <e>dodawana</e>
do aktualnej wartości nice.
</p>

<p>
Więcej informacji o wartościach nice znajdziesz w man'ie programu nice:
</p>

<pre caption="Więcej informacji o nice">
$ <i>man nice</i>
</pre>

</body>
</subsection>
<subsection>
<title>Konfiguracja danych wyjściowych</title>
<body>

<p>
Zmienna NOCOLOR, domyślnie ustawiona na "false" (fałsz), przestawiona na
"true" zakaże Portage kolorowania danych wyjściowych.
</p>

</body>
</subsection>
</section>
</sections>
