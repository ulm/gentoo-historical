<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/pl/handbook/hb-install-ppc-bootloader.xml,v 1.2 2004/12/31 17:14:15 swift Exp $ -->

<sections>

<version>1.16</version>
<date>2004-12-22</date>

<section>
<title>Podejmowanie decyzji.</title>
<subsection>
<title>Wstęp.</title>
<body>

<p>
Gdy skonfigurowałeś jądro i zmodyfikowałeś odpowiednio niezbędne systemowe
pliki konfiguracyjne, nadeszła pora zainstalowania programu, który uruchomi jądro
w momencie startu systemu. Taki program nazywa się <e>bootloader</e>.
</p>

<p>
Dla Linux/PPC istnieje kilka bootloaderów. Zaliczają się do nich min. <uri
link="#yaboot">Yaboot</uri> (dla maszyn NewWorld Apple i IBM) oraz <uri
link="#bootx">BootX</uri> (dla maszyn OldWorld Apple i IBM). Pegasos nie
potrzebuje bootloadera. Nie możesz używać na nim ani Yaboot, ani BootX'a. Jeśli
jesteś użytkownikiem Pegasosa przejdź teraz do sekcji <uri
link="#reboot">Ponowne uruchamianie systemu</uri>.
</p>

</body>
</subsection>
</section>
<section id="yaboot">
<title>Domyślnie: Używanie yaBoot.</title>
<subsection>
<title>Wprowadzenie.</title>
<body>

<impo>
yaBoot może być używany tylko na systemach klasy NewWorld PPC!
</impo>

    
<p>
Dla poprawnej instalacji bootloadera najpierw musimy utworzyć odpowiednie pliki
<path>/dev</path>. Najprościej zrobić to przez dowiązanie systemu plików
<path>/dev</path> z LiveCD do naszego nowego systemu.
</p>

<pre caption="Dowiązywanie systemu plików /dev">
# <i>exit </i> # opuszczamy chroot
# <i>mount -o bind /dev /mnt/gentoo/dev</i>
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>/usr/sbin/env-update &amp;&amp; source /etc/profile </i>
</pre>

<p>
Są dwa sposoby konfiguracji yaBoot. Możesz wykonać konfigurację
yaboot automatycznie za pomocą nowego i poprawionego narzędzia
<c>yabootconfig</c> zawartego w wersji <path>yaboot-1.3.8-r1</path>
i późniejszych. Jeśli z jakiegoś powodu nie chcesz uruchamiać
<c>yabootconfig</c> do automatycznego tworzenia <path>/etc/yaboot.conf</path>
lub instalujesz Gentoo na G5 (na którym <c>yabootconfig</c> nie zawsze chce działać),
możesz najzwyczajniej w świecie wyedytować wzorcowy plik już zainstalowany w systemie.
</p>

<ul>
 <li><uri link="#doc_chap8_sect2">Domyślnie: Użycie yabootconfig</uri>.</li>
 <li><uri link="#doc_chap8_sect3">Alternatywnie: Ręczna konfiguracja
 yaBoot</uri>.</li>
</ul>
	  
</body>
</subsection>
<subsection id="yabootconfig">
<title>Domyślnie: Użycie yabootconfig.</title>
<body>

<p>
<c>yabootconfig</c> automatycznie wykryje partycje na Twoim komputerze
i umożliwi uruchamianie wybranego z dwóch lub trzech systemów, którymi mogą
być Linux, Mac OS, and Mac OS X.
</p>

<p>
Przed użyciem <c>yabootconfig</c>, musisz mieć na dysku partycję bootstrap
oraz odpowiednie wpisy dotyczące partycji Linuksa w <path>/etc/fstab</path>.
Obydwa warunki powinny być już spełnione, wszystko opisaliśmy w poprzednich
rozdziałach. Upewnij się, że masz zainstalowaną najnowszą wersję yaboot wykonując
polecenie <c>emerge --update yaboot</c>. Jest to wymagane, gdyż aktualna
wersja bedzie dostępna poprzez Portage, ale może jej jeszcze nie być w plikach
stage.
</p>

<pre caption = "Instalowanie yaboot">
# <i>emerge --usepkg --update yaboot</i>
</pre>

<pre caption = "Installing yaboot with GRP">
# <i>emerge --usepkg --update yaboot</i>
</pre>

<p>
Następnie opuść chroot i wykonaj polecenie <c>yabootconfig --chroot
/mnt/gentoo</c>. Uruchomi się program i potwierdzi lokalizację partycji
bootstrap. Wciśnij <c>Y</c> jeśli wszystko się zgadza. Jeśli jest inaczej,
sprawdź dwa razy <path>/etc/fstab</path>. yabootconfig przeskanuje Twoje
ustawienia, utworzy <path>/etc/yaboot.conf</path> i uruchomi <c>mkofboot</c>.
<c>mkofboot</c> służy do formatowania partycji bootstrap i umieszczenia na niej
pliku konfiguracyjnego yaboot. Następnie z powrotem wejdź do chroota.
</p>

<pre caption="Powrót w chroot">
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>/usr/sbin/env-update &amp;&amp; source /etc/profile</i>
</pre>

<p>
Zweryfikuj zawartość <path>/etc/yaboot.conf</path>. Jeśli zmienisz
<path>/etc/yaboot.conf</path> (choćby ustawienia domyślnie startującego
OS), uruchom <c>ybin -v</c> aby zmiany odniosły skutek na partycji bootstrap.
</p>

<p>
Kiedy skończysz przejdź do rozdziału <uri link="?part=1&amp;chap=10">Instalacja
niezbędnych narzędzi systemowych</uri>.
</p>

</body>
</subsection>
<subsection id="manual_yaboot">
<title>Alternatywnie: Ręczna konfiguracja yaBoot.</title>
<body>

<p>
Po pierwsze upewnij się, że masz zainstalowaną aktualną wersję
<c>yaboot</c>:
</p>

<pre caption = "Instalowanie yaboot">
# <i>emerge --usepkg --update yaboot</i>
</pre>

<p>
Poniżej znajdziesz kompletny plik <path>yaboot.conf</path>.
Oczywiście powienieneś dostosować go do swoich potrzeb. Posiadacze G5 muszą
pamiętać, że ich dyski są w standardzie Serial ATA, przez co jądro Linux widzi
je jako dyski SCSI (a więc muszą zamienić wszystkie <path>/dev/hda</path> na
<path>/dev/sda</path>).
</p>

<pre caption = "/etc/yaboot.conf">
<comment>## /etc/yaboot.conf
##
## uruchom: "man yaboot.conf" by poznać szczegóły. Nie zmieniaj nic, jeśli nie musisz!!
## dodatkowe przykłady możesz obejrzeć w: /usr/share/doc/yaboot/examples
##
## W celu uruchamiania innych systemów, dodaj jedną lub więcej pozycji spośród:
## bsd=/dev/hdaX, macos=/dev/hdaY, macosx=/dev/hdaZ

## nasza partycja bootstrap:</comment>

boot=/dev/hda9


<comment>## ofboot w openfirmware służy do wyboru partycji startowej.
## Jeśli tego parametru nie będzie, yaboot nie zadziała na G5
## (dopóki nie przekażesz odpowiednich opcji do programu mkofboot/ybin).
## hd:X oznacza /dev/sdaX (lub /dev/hdaX).
##
## Posiadacze G5 powinni odkomentować tą linię !!

#ofboot=hd:9</comment>

<comment>##hd: w terminologii openfirmware oznacza hda</comment>
device=hd:
partition=11

delay=5
defaultos=macosx
timeout=30
install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot

<comment>#################
## Ta część może być powielona, jeśli masz więcej niż jeden kernel lub zestaw
## parametrów startowych
#################</comment>
image=/boot/vmlinux
label=Linux
root=/dev/hda11
sysmap=/boot/System.map
read-only
<comment>##################</comment>
<comment>## Posiadacze G5 powinni ustawić
##   macos=hd:13
##   macosx=hd:12
## zamiast wartości przykładowych.</comment>
macos=/dev/hda13
macosx=/dev/hda12
enablecdboot
enableofboot
</pre>

<p>
Gdy <path>yaboot.conf</path> jest ustawiony w sposób, który Cię zadowala,
uruchom <c>mkofboot -v</c> by zmiany odniosły skutek na partycji bootstrap.
<e>Nie zapomnij o tym!</e> Jeśli wszystko poszło pomyślnie i wprowadziłeś takie
same opcje jak w przykładzie powyżej po restarcie ujrzysz proste menu z pięcioma
pozycjami. Dokonując w przyszlości poprawek uruchom tylko <c>ybin -v</c>
by zaktualizować partycję bootstrap - <c>mkofboot</c> używa się tylko
za pierwszym razem.
</p>

<p>
Więcej informacji o programie yaboot, uzyskasz na stronach
<uri link="http://penguinppc.org/projects/yaboot">projektu yaboot</uri>.
Kiedy skończysz przejdź do rozdziału <uri link="?part=1&amp;chap=10">Instalacji
Niezbędnych Narzędzi Systemowych</uri>.
</p>

</body>
</subsection>
</section>
<section>
<title>Alternatywnie: BootX.</title>
<body>

<impo>
BootX może być używany tylko na systemach klasy OldWorld PPC!
</impo>

<p>
BootX wymaga zrestartowania komputera. Zróbmy to.
</p>

<p>
Po pierwsze opuść chroot, a następnie odmontuj wszystkie zamontowane partycje.
Wreszcie wpisz komendę <c>reboot</c>.
</p>

<pre caption="Opuszczanie chroota, odmontowywanie partycji i rebootowanie">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

<p>
Nie zapomnij wyjąć LiveCD z napędu, jeśli tego nie zrobisz zabootuje się system z LiveCD zamiast MacOS.
</p>

<p>
Kiedy już uruchomisz MacOS otwórz panel sterowania BootX. Wybierz <c>Options</c>
i odznacz <c>Used specified RAM disk</c>. Kiedy wrócisz do głównego ekranu BootX
znajdziesz tam opcję dzięki której będziesz mógł ustawić dysk i partycję
systemową. Wypełnij oba pola odpowiednimi ścieżkami.
</p>

<p>
BootX można skonfigurować tak, aby automatycznie startował Linuksa. Jeśli to
zrobisz najpierw zobaczysz ekran ładowania MacOS, a następnie już w trakcie
wczytywania systemu BootX załaduje i wystartuje Linuksa. Więcej informacji
uzyskasz na <uri link="http://penguinppc.org/bootloaders/bootx/">Stronie domowej
BootX</uri>.
</p>

<p>
Następnie po raz kolejny ponownie uruchom komputer i załaduj Linuksa. Następnie
przejdź do rozdziału <uri link="?part=1&amp;chap=11">Finalizowanie instalacji
Gentoo</uri>.
</p>

</body>
</section>
<section id="reboot">
<title>Ponowne uruchamianie komputera.</title>
<subsection>
<body>

<p>
Po pierwsze opuść chroot, a następnie odmontuj wszystkie zamontowane partycje.
Wreszcie wpisz komendę <c>reboot</c>.
</p>

<pre caption="Opuszczanie chroota, odmontowywanie partycji i rebootowanie">
# <i>exit</i>
livecd ~# <i>umount /mnt/gentoo/proc /mnt/gentoo/dev /mnt/gentoo</i>
livecd ~# <i>reboot</i>
</pre>

<p>
Nie zapomnij o wyjęciu LiveCD z napędu, bo zabootujesz system z płyty zamiast
swojego nowego Gentoo.
</p>

<p>
Po ponownym uruchomieniu komputera w celu dokończenia instalacji Gentoo przejdź
do rozdziału <uri link="?part=1&amp;chap=11">Finalizowanie instalacji
Gentoo</uri>.
</p>

</body>
</subsection>
</section>
</sections>
