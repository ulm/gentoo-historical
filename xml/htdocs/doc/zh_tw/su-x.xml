<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/zh_tw/Attic/su-x.xml,v 1.1 2004/10/21 01:42:48 ccpz Exp $ -->
<guide link="su-x.xml">
<title>X 環境下 su 指南</title>
<author title="Author">
  <mail link="joshua@sungentoo.homeunix.com">Joshua Preston</mail>
</author>
<author title="Translator">
  <mail link="ccpz@gentoo.org">YiDa Chiang</mail>
</author>
  

<!-- rev 1.2 by ccpz -->
<abstract>
這份指南列出一些要決，用一般使用者登入 X 時如何 su 成 root。
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->
<license/>

<version>1.1</version>
<date>2004年7月31日</date>

<chapter>
<title>介紹</title>
<section>
<title>目的</title>
<body>

<p>
我們都在這裡使用一般使用者登入，而我們有時候需要使用 root 身份執行 X 應用程式。
例如我們想要使用 <e>make xconfig</e> 設定核心，但是當我們做時卻看到了錯誤。
</p>

<pre caption="一個 X 錯誤範例">
<comment>(當執行 xterm 時)</comment>
 $ <i>su -</i>
Password:
 # <i>xlogo -render</i>
Xlib: connection to ":0.0" refused by server
Xlib: No protocol specified

Error: Can't open display: :0.0
</pre>

<p>
幸運地，仍然有一些方法可以做這些事。這裡的一些建議或許不是那麼安全，可能會變成
系統漏洞。你需要自己決定那一種最符合你的需要。
</p>

</body>
</section>
<section>
<title>使用 root 身份執行 X</title>
<body>

<p>
如果文件中沒有警告的話，這篇文件會變成什麼樣子？在開始前我們會扼要的提供一些警
告及問題。
</p>

<p>
一般而言，用 root(超級使用者) 執行 X 完全是一個壞主意。甚至用 root 執行 X 程式
都是一個熱烈討論中的主題。
</p>

<p>
底下的安全問題都和使用 root 身份執行 X 有關：
</p>

<ul>
  <li>資料破壞</li>
  <li>未經授權的存取</li>
  <li>洩密危險</li>
</ul>

<p>
雖然這些大部分是因為不適當的 X 系統設定引起，使用 root 執行 X 仍然被視為一個壞
主意。
</p>

<p>
剛剛使用 Linux 的使用者，通常都是犯下使用 root 執行 X 錯誤的人。
</p>

<p>
來看看一個例子。我習慣一個禮拜查看幾次 Gentoo IRC 頻道。通常都有使用 roor 執行
IRC 的人加入頻道。談談淺在的危險！決定於他所使用的連線軟體，我可以背地裡作一些
下流的事。例如說，用 DCC 送一個檔案給他，像是 <path>.bashrc</path>。
</p>

<pre caption="一個惡意的 .bashrc">
#!/bin/sh
logout
</pre>

<p>
如果說他設定自動啟動 DCC 傳輸的話會怎樣？如果他也有一個預設的使用者目錄
<path>~/</path> ？看起來我們的 .bashrc 會覆蓋原本的！所以當使用者下次登入時，他
會馬上登出。
</p>

<p>
聽起來很難達到？再想一次！這只是為什麼使用 root 執行 X 仍然被視為一個壞主意的其
中一個例子，現在混合了內部的運作及 X 的複雜性，你可以發現我們進退兩難的窘境。
</p>

</body>
</section>
</chapter>

<chapter>
<title>解決方法</title>
<section>
<title>x11-misc/sux</title>
<body>

<p>
Sux 在 <uri link="http://fgouget.free.fr/sux/sux-readme.shtml">他的首頁</uri> 說
明的最好，這說明就列在下面：
</p>

<note>
Sux 是一個標準 su 指令的包裝，會把 X 信任憑證傳給目標使用者。Sux 以 X11 授權條
款發表。
</note>

<p>
安裝 sux 就只要輕鬆的 emerge 就好了！
</p>

<pre caption="安裝 Sux">
# <i>emerge x11-misc/sux</i>
</pre>

<p>
底下是一些 Sux 的例子。
</p>

<pre caption="以 root 執行 X 程式">
$ <i>sux -c /usr/bin/X11/xlogo -render</i>
Password: <comment>(輸入 root 密碼然後按下 enter)</comment>
</pre>

<pre caption="以 root 執行 shell">
$ <i>sux -</i>
Password: <comment>(輸入 root 密碼然後按下 enter)</comment>
# <i>xlogo -render</i>
</pre>

<impo>
使用 sux 執行 root 身份的 shell 可以讓你只輸入 X 應用程式，然後他就會執行。
</impo>

</body>
</section>
<section>
<title>KDE 使用者</title>
<body>

<p>
KDE 使用者有別的選擇。<c>kdesu</c> 是 su 的 KDE 版本。他就像 Sux 允許你使用目前
的使用者執行 X 應用程式，然而他會跳出一個視窗要求你輸入密碼並且不會執行 console
程式。
</p>

<impo>
<c>kdesu</c> 設計成只能執行 X 應用程式。
</impo>

<p>
<c>kdesu</c> 使用方式如底下所示：
</p>

<pre caption="加上 X 程式的參數使用 root 執行 X 程式">
# <i>kdesu -c "/usr/bin/X11/xlogo -render"</i>
<comment>(你也可以指定不同的使用者，如 diffuser)</comment>
# <i>kdesu -u diffuser -c "/usr/bin/X11/xlogo -render"</i>
</pre>

<pre caption="不加上 X 程式的參數以 root 執行 X 程式">
# <i>kdesu /usr/bin/X11/xlogo</i>
<comment>(你也可以指定不同的使用者，如 diffuser)</comment>
# <i>kdesu -u diffuser /usr/bin/X11/xlogo</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>結論</title>
<section>
<title>作個總結</title>
<body>

<p>
這裡還有其他許多方法可以做到，但是我覺得上面這些是最簡單的方法。
</p>

<p>
我希望你覺得這篇文章很有用，並且祝你好運。
</p>

</body>
</section>
</chapter>

</guide>
