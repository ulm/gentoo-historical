<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/zh_tw/handbook/hb-install-mips-medium.xml,v 1.8 2005/10/02 05:10:35 ccpz Exp $ -->

<!-- rev 1.14 by ccpz -->

<sections>

<version>1.9</version>
<date>2005-07-11</date>

<section>
<title>硬體需求</title>
<subsection>
<title>介紹</title>
<body>

<p>
開始前，我們將先列出能成功安裝 Gentoo Linux 的硬體清單。
</p>

</body>
</subsection>
<subsection>
<title>硬體需求</title>
<body>
<table>
<tr>
  <th>記憶體</th>
  <ti>64 MB</ti>
</tr>
<tr>
  <th>磁碟空間</th>
  <ti>1.5 GB (不包含置換分割區)</ti>
</tr>
<tr>
  <th>置換分割區</th>
  <ti>至少 256 MB</ti>
</tr>
</table>

<p>
你也要去查看網們網站上的 <uri link="/doc/en/mips-requirements.xml">MIPS
硬體需求</uri>。
</p>

</body>
</subsection>
</section>

<!-- Only the stuff about the stages is replicated from the
hb-install-x86-medium.xml file since MIPS uses netbooting
-->
<!-- START -->

<section>
<title>Gentoo 安裝過程</title>
<subsection>
<title>介紹</title>
<body>

<p>
Gentoo Linux 可以使用三個 <e>stage</e> 壓縮檔之一來安裝。stage 檔是包含了最小環
境的壓縮檔。
</p>

<ul>
  <li> 
  stage1 檔案中只包含了編譯器(只有 C，不含 C++)，Portage (Gentoo 的軟體管理系統)
  以及一些編譯器及 Portage 需要的套件。
  </li> 
  <li> 
  stage2 檔案包含所謂 bootstrap 好的系統，提供一個可以開始編譯其他應用程式，讓
  Gentoo 完全弄好的最小環境。
  </li> 
  <li> 
  stage3 檔案包含預先編譯好的最小系統，幾乎可以使用了。只要選擇某類程式中要安裝
  哪一個程式。
  </li> 

</ul>

<p>
為了幫你決定要用哪個 stage 檔，我們寫下了每一個 stage 檔主要的優點及缺點。
</p>

</body>
</subsection>
<subsection>
<title>使用 Stage1 安裝</title>
<body>

<p>
當你想要從頭 bootstrap 及編譯整個系統時使用 <e>stage1</e>。
</p>

<p>
從 stage1 開始，您將擁有完全的自訂設定以及選擇性的編譯功能的系統。這將讓
<e>stage1</e> 的安裝適合高階使用者。如果您想要知道 Gentoo Linux 是如何架構的，您
也應該要使用 <e>stage1</e>。
</p>

<table>
<tr>
  <th>Stage1</th>
  <th>優點及缺點</th>
</tr>
<tr>
  <th>+</th>
  <ti>
    讓您可以完全自訂和將系統的效能完全依照您的需求
  </ti>
</tr>
<tr>
  <th>+</th>
  <ti>適合知道自己在做些什麼的高階使用者</ti>
</tr>
<tr>
  <th>+</th>
  <ti>讓您了解 Gentoo 的內部架構</ti>
</tr>
<tr>
  <th>-</th>
  <ti>需要長時間完成安裝</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    如果您不打算調整系統設定，這樣是浪費時間
  </ti>
</tr>
<tr> 
  <th>-</th> 
  <ti> 
    安裝時需要網路連線
  </ti> 
</tr> 

</table>

</body> 
</subsection> 
<subsection> 
<title>使用 Stage2 安裝</title> 
<body> 

<p>
<e>stage2</e> 是從 bootstrap 好的 "半編譯完成" 環境建立整個系統。
</p>

<p>
Stage2 安裝讓你可以掠過 bootstrap 過程，如果你對於我們的最佳化設定滿意的話就用
他吧。
</p>

<table>
<tr>
  <th>Stage2</th>
  <th>優點及缺點</th>
</tr>
<tr>
  <th>+</th>
  <ti>不需要 bootstrap</ti>
</tr>
<tr>
  <th>+</th>
  <ti>和 stage1 比較來快速許多</ti>
</tr>
<tr>
  <th>+</th>
  <ti>您還是可以最佳化系統設定</ti>
</tr>
<tr>
  <th>-</th>
  <ti>您無法像在 stage1 時自訂那麼多設定</ti>
</tr>
<tr>
  <th>-</th>
  <ti>仍然不是最快安裝 Gentoo 的方法</ti>
</tr>
<tr>
  <th>-</th>
  <ti>您將要接受我們為您調整過的 bootstrap</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    安裝時需要網路連線
  </ti>
</tr>
</table>
</body> 
</subsection> 
<subsection> 
<title>使用 Stage3 安裝</title> 
<body> 
    
<p> 
<e>stage3</e> 安裝檔包含了基本已編譯好的 Gentoo 系統。你只需要選擇編譯一些我們
沒有決定，留給你自己決定的套件。
</p> 

<p>
選擇使用 stage3 將會是安裝 Gentoo Linux 最快的一個方法，這也代表著您將要選擇我
們為您所做的系統調整以及設定（老實說，我們完善的設定足以讓系統保持在完好的效率
以及穩定度下）。如果您想要使用已編譯完成的套件或是在無網路連線的情況下，您將需
要 stage3。
</p>

<table>
<tr>
  <th>Stage3</th>
  <th>優點及缺點</th>
</tr>
<tr>
  <th>+</th>
  <ti>安裝 Gentoo Linux 最快速的方法</ti>
</tr>
<tr>
  <th>-</th>
  <ti>您無法為系統進行調整 - 已經編譯好了</ti>
</tr>
</table>

<p>
您或許有興趣知道，如果您決定要在安裝完成後使用不同的自訂設定，您將需要重新編譯
整個系統來套用新的自訂設定。
</p>


</body>
</subsection>
<subsection>
<title>關於處理器架構的提醒</title>
<body>
  	 
<p>
在許多架構中，處理器都有許多不同的世代，每個新世代都以前一代為基處製作出來。
MIPS 也不外乎如此。在 MIPS 架構下包含了多種的 CPU 世代。為了要正確選擇適合的
netboot 影像檔及 <c>CFLAGS</c>，你需要注意你的 CPU 是屬於那一族的。這種分類方式
稱為 <b>I</b>nstruction <b>S</b>et <b>A</b>rchitecture (指令集架構)。
</p>
  	 
<table>
<tr>
  <th>MIPS ISA</th>
  <th>32/64-bit</th>
  <th>包含的 CPU</th>
</tr>
<tr>
  <ti>MIPS 1</ti>
  <ti>32-bit</ti>
  <ti>
    <uri link="http://www.linux-mips.org/wiki/index.php/R2000">R2000</uri>,
    <uri link="http://www.linux-mips.org/wiki/index.php/R2000">R3000</uri>
  </ti>
</tr>
<tr>
  <ti>MIPS 2</ti>
  <ti>32-bit</ti>
  <ti>
    <uri link="http://www.linux-mips.org/wiki/index.php/R6000">R6000</uri>
  </ti>
</tr>
<tr>
  <ti>MIPS 3</ti>
  <ti>64-bit</ti>
  <ti>
    <uri link="http://www.linux-mips.org/wiki/index.php/R4000">R4000</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/R4000">R4400</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/R4000">R4600</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/R4000">R4700</uri>
  </ti>
</tr>
<tr>
  <ti>MIPS 4</ti>
  <ti>64-bit</ti>
  <ti>
    <uri link="http://www.linux-mips.org/wiki/index.php/R5000">R5000</uri>,
    <uri link="http://www.linux-mips.org/wiki/index.php/R5000">RM5000</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/RM7000">RM7000</uri>
  	<uri link="http://www.linux-mips.org/wiki/index.php/R8000">R8000</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/R10000">R10000</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/R10000">R12000</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/R10000">R14000</uri>,
  	<uri link="http://www.linux-mips.org/wiki/index.php/R10000">R16000</uri>
  </ti>
</tr>
<tr>
  <ti>MIPS 5</ti>
  <ti>64-bit</ti>
  <ti>
  	 目前沒有
  </ti>
</tr>
</table>
  	 
<p>
此外，還有一個 <b>endianness</b> 的觀念要注意。Endianness 是指 CPU 從主記憶體讀
取字元的方法。一組字元可以視為 <e>big</e> endian (先讀取 most significant bit)，
或是 <e>little</e> endian (先讀取 least significant bit)。Intel x86 的機器一般是
Little endian，而 Apple 及 Sparc 機器是 Big Endian。對 MIPS 來說，這兩種都有可能
。為了要作區別，我們在架構名稱後加上 <c>el</c> 代表little endian。
</p>
  	 
<table>
  <tr>
    <th>架構</th>
    <th>32 或 64 位元</th>
    <th>Endianness</th>
    <th>包含的機器</th>
  </tr>
  <tr>
    <ti><c>mips</c></ti>
    <ti>32 位元</ti>
    <ti>Big Endian</ti>
    <ti>Silicon Graphics</ti>
  </tr>
  <tr>
    <ti><c>mipsel</c></ti>
    <ti>32 位元</ti>
    <ti>Little Endian</ti>
    <ti>DECStations, Cobalt Servers, PlayStation 2</ti>
  </tr>
  <tr>
    <ti><c>mips64</c></ti>
    <ti>64 位元</ti>
    <ti>Big Endian</ti>
    <ti>Silicon Graphics</ti>
  </tr>
  <tr>
    <ti><c>mips64el</c></ti>
    <ti>64 位元</ti>
    <ti>Little Endian</ti>
    <ti>Cobalt Servers, PlayStation 2</ti>
  </tr>
</table>
  	 
<p>
如果你想要知道更多關於 ISA 的事情，底下這些網站可以參考。
</p>
  	 
<ul>
  <li>
    <uri link="http://www.linux-mips.org/wiki/index.php/Instruction_Set_Architecture">
    Linux/MIPS Website: MIPS ISA
    </uri>
  </li>
  <li>
    <uri link="http://www.linux-mips.org/wiki/index.php/Endianess">
    Linux/MIPS Website: Endianness
    </uri>
  </li>
  <li>
    <uri link="http://www.linux-mips.org/wiki/index.php/Processors">
    Linux/MIPS Website: Processors
    </uri>
  </li>
  <li>
    <uri link="http://en.wikipedia.org/wiki/Instruction_set">
    Wikipedia: Instruction Set
    </uri>
  </li>
</ul>
  	 
</body>
</subsection>
</section>
<section>
<title>網路開機</title>
<subsection>
<title>MIPS 網路開機映像檔</title>
<body>

<p>
如果您的系統有網路介面和 BIOS/ROM 支援網路開機（PXE），您將可以利用它下載一個小
的系統並且進行安裝。
</p>

<p>
您將要有一個可用的DHCP 和 TFTP 伺服器。相關的設定可以在 <uri
link="/doc/en/diskless-howto">Diskless-HOWTO</uri> 裡面的
<uri link="/doc/en/diskless-howto.xml#doc_chap3">DHCP server</uri>， <uri
link="/doc/en/diskless-howto.xml#doc_chap4">TFTP server</uri>找到。
</p>

<p>
依照您的設定，您將需要建立或是下載您的系統所需要的核心。
</p>

</body>
</subsection>
<subsection>
<title>經由網路開機</title>
<body>

<p>
要可以安裝 Gentoo，您從 TFTP 下載的伺服器應該要提供相關的工具來建立檔案系統，
建立和掛載分割區，解開壓縮檔和 chroot。您可以下載已存在這些工具的網路開機映像檔
﹍
</p>

<p>
首先請先從我們的<uri link="/main/en/mirrors.xml">鏡像站</uri>其中之一下載網路開機
映像檔。網路開機映像檔放在 <path>experimental/mips/netboot</path> 目錄中。
</p>

<p>
現在請設定您的 DHCP 伺服器讓他傳送此檔給要開機的用戶端。 SGI 的機器需要做一些調
整才能接受 TFTP 的傳送：
</p>

<pre caption="SGI 機器的調整來接受 TFTP 的傳送">
<comment>（停用 "Path Maximum Transfer Unit"，不然 SGI Prom 會找不到核心）</comment>
# <i>echo 1 &gt; /proc/sys/net/ipv4/ip_no_pmtu_disc</i>
<comment>（設定 SGI Prom 使用的 Port 長度）</comment>
# <i>echo "2048 32767" &gt; /proc/sys/net/ipv4/ip_local_port_range</i>
</pre>

<p>
現在開啟您的機器，進入 PROM 觀察器然後輸入指令透過網路執行核心：
</p>

<pre caption="MIPS 網路開機">
        Running power-on diagnostics

System Maintenance Menu

1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor. Type "exit" to return to the menu.
&gt;&gt; <i>bootp(): root=/dev/ram0</i>
</pre>

<note>
您將需要按下 Esc 鍵來取得以上的選單，不然系統會直接開啟系統。
</note>

<p>
有時候網路開機也可以很狡猾。以下的 PROM 指令或許能幫助您，但是我們不保證。如果您
的機器不願意網路開機，請檢查主 TFTP 的機器：
</p>

<ul>
  <li>dhcpd 有提供 IP 位置給 SGI 的機器</li>
  <li>
    tftp 內的權限有設定好（通常在<path>/tftpboot</path>）
  </li>
  <li>
    檢查系統記錄器看看 tftp 伺服器有無申報錯誤
  </li>
  <li>
    向萬能的企鵝禱告（這有時會有用，但是不是官方的支援技術）
  </li>
</ul>

<pre caption="網路開機技巧">
&gt;&gt; <i>resetenv</i>
&gt;&gt; <i>unsetenv netaddr</i>
&gt;&gt; <i>unsetenv dlserver</i>
&gt;&gt; <i>init</i>
&gt;&gt; <i>bootp(): root=/dev/ram0</i>
</pre>

<p>
如果一切順利，您將會被帶到 busybox 的 <c>ash</c> shell。
現在請繼續到 <uri link="?part=1&amp;chap=3">設定您的網路</uri>。
</p>

</body>
</subsection>
</section>
</sections>
