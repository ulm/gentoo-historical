<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Id: hb-install-system.xml,v 1.8 2006/07/19 22:46:18 neysx Exp $ -->

<sections>

<version>2.22</version>
<date>2006-07-18</date>

<section>
<title>Chroot</title>
<subsection>
<title>Opsional: Memilih Mirror</title>
<body>

<p>
Untuk mendownload source code dengan cepat, anda dianjurkan untuk memilih
sebuah mirror yang kencang. Portage akan memeriksa variable GENTOO_MIRRORS
di <path>make.conf</path> anda dan menggunakan mirror yang tercantum. Anda
bisa melihat <uri link="/main/en/mirrors.xml">daftar mirror</uri> kami dan
mencari sebuah mirror (atau lebih) yang dekat dengan anda (karena biasanya
inilah yang paling kencang), tapi kami menyediakan sebuah utilitas bernama
<c>mirrorselect</c> yang menyediakan interface bagus bagi anda untuk memilih
mirror yang anda inginkan.
</p>

<pre caption="Menggunakan mirrorselect untuk variabel GENTOO_MIRRORS">
# <i>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<warn>
Jangan memilih mirror IPv6 apapun. Stage kami untuk saat ini belum
mendukung IPv6.
</warn>

<p>
Setting kedua yang penting adalah SYNC di <path>make.conf</path>. Variabel
ini berisi server rsync yang ingin anda gunakan ketika meng-update pohon
Portage anda (kumpulan ebuild, skrip yang berisi seluruh informasi yang
dibutuhkan Portage untuk mendownload dan menginstal software). Walaupun anda
bisa saja memasukkan sebuah server SYNC secara manual, <c>mirrorselect</c>
dapat memudahkannya untuk anda:
</p>

<pre caption="Memilih mirror rsync dengan mirrorselect">
# <i>mirrorselect -i -r -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<p>
Setelah menjalankan <c>mirrorselect</c>, anda dianjurkan untuk memeriksa
kembali setting di <path>/mnt/gentoo/etc/make.conf</path> !
</p>

</body>
</subsection>
<subsection>
<title>Copy Informasi DNS</title>
<body>

<p>
Satu hal yang masih harus dilakukan sebelum kita memasuki lingkungan baru
adalah meng-copy informasi DNS di file <path>/etc/resolv.conf</path>. Anda
perlu melakukan langkah ini untuk memastikan koneksi jaringan anda tetap
berfungsi setelah memasuki lingkungan baru. File <path>/etc/resolv.conf</path>
mengandung nameserver-nameserver untuk jaringan anda.
</p>

<pre caption="Copy Informasi DNS">
<comment>(Opsi "-L" diperlukan untuk memastikan kita tidak meng-copy link simbolik)</comment>
# <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
</pre>

</body>
</subsection>
<subsection>
<title>Mount Filesystem /proc dan /dev</title>
<body>

<p>
Mount filesystem <path>/proc</path> ke <path>/mnt/gentoo/proc</path> agar
proses instalasi dapat menggunakan informasi dari kernel walaupun berada di
lingkungan chroot, kemudian mount-bind filesystem <path>/dev</path>.
</p>

<pre caption="Mount /proc dan /dev">
# <i>mount -t proc none /mnt/gentoo/proc</i>
# <i>mount -o bind /dev /mnt/gentoo/dev</i>
</pre>

</body>
</subsection>
<subsection>
<title>Memasuki Lingkungan Baru</title>
<body>

<p>
Setelah semua partisi tercipta dan lingkungan dasar terinstal, sekarang
saatnya untuk memasuki lingkungan instalasi baru kita dengan melakukan
<e>chroot</e> ke dalamnya. Artinya, kita berpindah tempat dari lingkungan
instalasi kita saat ini (CD Instalasi atau media instalasi lain) ke sistem
instalasi anda (yaitu partisi-partisi yang baru diciptakan).
</p>

<p>
Proses chroot ini dilakukan dalam tiga langkah. Pertama, kita akan memindahkan
root dari <path>/</path> (di media instalasi) ke <path>/mnt/gentoo</path>
(di partisi anda) menggunakan perintah <c>chroot</c>. Lalu, kita akan
menciptakan sebuah lingkungan baru menggunakan perintah <c>env-update</c>,
yang akan menciptakan variabel-variabel lingkungan. Terakhir, kita akan
me-load variabel-variabel tersebut menggunakan perintah <c>source</c>.
</p>

<pre caption = "Melakukan chroot ke lingkungan baru">
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>env-update</i>
>> Regenerating /etc/ld.so.cache...
# <i>source /etc/profile</i>
# <i>export PS1="(chroot) $PS1"</i>
</pre>

<p>
Selamat! Anda sekarang berada di lingkungan Gentoo Linux anda. Tentu saja,
ini masih jauh dari selesai, karena itu proses instalasi masih memiliki
beberapa bagian lagi :-)
</p>

</body>
</subsection>
</section>

<section>
<title>Mengkonfigurasi Portage</title>
<subsection>
<title>Update pohon Portage</title>
<body>

<p>
Sekarang anda harus meng-update pohon Portage anda ke versi yang paling baru.
<c>emerge --sync</c> akan melakukannya untuk anda.
</p>

<pre caption="Update Portage tree">
# <i>emerge --sync</i>
<comment>(Jika anda menggunakan terminal (konsol) yang lambat seperti beberapa
konsol framebuffer atau sebuah konsol serial, anda dapat menambahkan opsi
--quiet untuk mempercepat proses ini:)</comment>
# <i>emerge --sync --quiet</i>
</pre>

<p>
Jika anda menggunakan firewall yang menghalangi jalur rsync, anda dapat
menggunakan "emerge-webrsync" yang akan mendownload dan menginstal snapshot
portage untuk anda.
</p>

<p>
Jika anda mendapat peringatan bahwa versi Portage yang lebih baru tersedia dan
anda sebaiknya mengupdate Portage, anda harus melakukannya sekarang dengan
perintah <c>emerge portage</c>.
</p>

</body>
</subsection>
<subsection>
<title>Memilih Profil yang Benar</title>
<body>

<p>
Pertama, penjelasan kecil tentang Profil
</p>

<p>
Sebuah profil merupakan sebuah blok bangunan bagi sitem Gentoo. Profil
tidak hanya menentukan nilai-nilai default untuk CHOST, CFLAGS dan variabel
penting lainnya, tapi juga mengunci sistem di versi-versi paket dalam
tingkatan tertentu.
</p>

<p>
Sebelumnya, profil jarang sekali disentuh oleh user. Tapi, user x86, hppa dan
alpha dapat memilih andata dua profil, satu untuk kernel 2.4 dan yang lainnya
untuk kernel 2.6. Hal ini diadakan untuk meningkatkan integrasi kernel 2.6.
Arsitektur ppc dan ppc64 juga memiliki beberapa profil yang tersedia. Kita
akan membicarakannya nanti.
</p>

<p>
Anda dapat melihat profil apa yang sedang anda gunakan sekarang dengan
perintah berikut:
</p>

<pre caption="Memeriksa profil sistem">
# <i>ls -FGg /etc/make.profile</i>
lrwxrwxrwx  1 48 Apr  8 18:51 /etc/make.profile -> ../usr/portage/profiles/default-linux/x86/2006.0/
</pre>

<p>
Jika anda menggunakan salah satu dari tiga arsitektur tersebut di atas, maka
profil default akan menyediakan sistem berbasis kernel 2.6 untuk anda. Inilah
profil default, tapi anda juga memiliki opsi untuk memilih profil yang lain.
</p>

<p>
Sebagian user mungkin ingin menggunakan sistem yang berbasis profil Linux 2.4
yang lebih lama. Jika anda punya alasan baik untuk ini, maka pertama anda harus
memeriksa apakah profil lain tersedia. Pada x86, kita bisa melakukannya dengan
perintah berikut:
</p>

<pre caption="Memeriksa apakah profil lain tersedia">
# <i>ls -d /usr/portage/profiles/default-linux/x86/no-nptl/2.4</i>
/usr/portage/profiles/default-linux/x86/no-nptl/2.4
</pre>

<p>
Contoh di atas menunjukkan bahwa profil 2.4 tersedia (karena tidak ada
komplain tentang file atau direktori yang kurang). Anda dianjurkan untuk tetap
menggunakan profil default, tapi jika anda ingin menggantinya, lakukan dengan
seperti ini:
</p>

<pre caption="Pindah ke profil 2.4">
<comment>(Pastikan anda menggunakan arsitektur yang benar, contoh di bawah ini untuk x86)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/x86/no-nptl/2.4 /etc/make.profile</i>
<comment>(Melihat file di profil 2.4)</comment>
# <i>ls -FGg /etc/make.profile/</i>
total 12
-rw-r--r--  1 939 Dec 10 14:06 packages
-rw-r--r--  1 347 Dec  3  2004 parent
-rw-r--r--  1 573 Dec  3  2004 virtuals
</pre>

<p>
Untuk ppc, ada beberapa profil baru yang tersedia di versi 2006.0
</p>

<pre caption="Profil-profil PPC">
<comment>(Profil generic PPC, untuk semua mesin PPC, minimal)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0 /etc/make.profile</i>
<comment>(Profil G3)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G3 /etc/make.profile</i>
<comment>(Profil G3 Pegasos)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G3/Pegasos/ /etc/make.profile</i>
<comment>(Profil G4 (Altivec))</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G4 /etc/make.profile</i>
<comment>(Profil G4 (Altivec) Pegasos)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc32/2006.0/G4/Pegasos/ /etc/make.profile</i>
</pre>

<p>
Untuk ppc64, ada beberapa profil baru yang tersedia di versi 2006.0
</p>

<pre caption="Profil-profil PPC64">
<comment>(Profil generic 64bit userland PPC64, untuk semua mesin PPC64)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/64bit-userland /etc/make.profile</i>
<comment>(Profil generic 32bit userland PPC64, untuk semua mesin PPC64)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/32bit-userland /etc/make.profile</i>
<comment>(Setiap tipe userland memiliki sub profil seperti di bawah ini, dengan (userland) digantikan oleh userland yang dipilih dari atas)</comment>
<comment>(Profil 970 untuk JS20)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/970 /etc/make.profile</i>
<comment>(Profil G5)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/970/pmac /etc/make.profile</i>
<comment>(Profil POWER3)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/power3 /etc/make.profile</i>
<comment>(Profil POWER4)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/power4 /etc/make.profile</i>
<comment>(Profil POWER5)</comment>
# <i>ln -snf /usr/portage/profiles/default-linux/ppc/ppc64/2006.0/(userland)/power5 /etc/make.profile</i>
<comment>(Profil multilib belum dianggap stabil di release ini.)</comment>
</pre>

</body>
</subsection>
<subsection id="configure_USE">
<title>Konfigurasi variabel USE</title>
<body>

<p>
<c>USE</c> merupakan salah satu variabel yang paling mengagumkan yang
disediakan oleh Gentoo untuk para penggunanya. Beberapa program dapat
dikompilasi dengan atau tanpa dukungan tambahan terhadap beberapa hal.
Sebagai contoh, beberapa program dapat dikompilasi dengan dukungan gtk, atau
dengan dukungan qt. Program-program lainnya dapat dikompilasi dengan atau
tanpa dukungan SSL. Beberapa program bahkan dapat dikompilasi dengan dukungan
framebuffer (svgalib) sebagai ganti X11 (X-server).
</p>

<p>
Kebanyakan distro linux mengkompilasi paket-paket mereka dengan dukungan
sebanyak mungkin, sehingga meningkatkan ukuran program dan waktu yang
diperlukan untuk menjalankan program tersebut, dan juga banyak sekali
dependency yang diperlukan. Dengan Gentoo, anda dapat mendefenisikan
opsi-opsi apa saja yang harus dikompilasi di sebuah paket. Di sinilah
variabel <c>USE</c> berperan penting.
</p>

<p>
Di variabel <c>USE</c>, anda mendefenisikan keyword-keyword yang tertuju
ke opsi kompilasi. Sebagai contoh, <e>ssl</e> akan mengkompilasi dukungan
ssl ke program yang mendukungnya. <e>-X</e> akan menonaktifkan dukungan
X-server (perhatikan tanda minus di depannya). <e>gnome gtk -kde -qt</e> akan
mengkompilasi program-program anda dengan dukungan gnome (dan gtk), tanpa
dukungan kde (dan qt), sehingga sistem anda akan lebih ramping untuk GNOME.
</p>

<p>
Setting-setting <c>USE</c> default disimpan di file
<path>/etc/make.profile/make.defaults</path>. Apa yang anda simpan di file
<path>/etc/make.conf</path> dikalkulasi terhadap setting default. Jika anda
menambahkan sebuah keyword ke setting <c>USE</c>, keyword tersebut akan
ditambahkan ke daftar default. Jika anda menghapus sebuah keyword dari setting
<c>USE</c> (dengan menambahkan tanda minus di depannya), keyword tersebut
akan dihapus dari daftar default (tentu saja, jika sebelumnya keyword tersebut
berada di daftar default). <e>Jangan pernah</e> mengubah sesuatu di dalam
direktori <path>/etc/make.profile</path>; isi direktori tersebut ditimpa
setiap kali anda mengupdate Portage!
</p>

<p>
Deskripsi variabel <c>USE</c> yang lengkap dapat ditemukan di bagian dua
Buku Panduan Gentoo, <uri link="?part=2&amp;chap=2">Flag USE</uri>.
Deskripsi lengkap tentang flag-flag USE yang tersedia dapat ditemukan di
sistem anda di file <path>/usr/portage/profiles/use.desc</path>.
</p>

<pre caption="Melihat flag-flag USE yang tersedia">
# <i>less /usr/portage/profiles/use.desc</i>
<comment>(Anda dapat men-skrol menggunakan tanda panah, keluar dengan
menekan 'q')</comment>
</pre>

<p>
Sebagai contoh, kita akan melihat setting <c>USE</c> untuk sistem berbasis
KDE dengan dukungan DVD, ALSA dan CD-Recording:
</p>

<pre caption="Membuka file /etc/make.conf">
# <i>nano -w /etc/make.conf</i>
</pre>

<pre caption="Setting USE">
USE="-gtk -gnome qt kde dvd alsa cdr"
</pre>

</body>
</subsection>
<subsection>
<title>Opsional: Locales GLIBC</title>
<body>

<p>
Anda mungkin hanya ingin menggunakan satu atau dua locales di sistem anda.
Anda dapat menentukan locales yang akan anda butuhkan di
<path>/etc/locale.gen</path>.
</p>

<pre caption="Membuka file /etc/locale.gen">
# <i>nano -w /etc/locale.gen</i>
</pre>

<p>
Locales di bawah ini merupakan contoh untuk mendapatkan locales English
(United States) dan German (Germany) bersama format karakternya
(seperti UTF-8).
</p>

<pre caption="Menentukan locales anda">
en_US/ISO-8859-1
en_US.UTF-8/UTF-8
de_DE/ISO-8859-1
de_DE@euro/ISO-8859-15
</pre>

<p>
Langkah berikutnya adalah menjalankan <c>locale-gen</c>. Perintah ini akan
mengaktifkan semua locales yang telah anda tentukan di file
<path>/etc/locale.gen</path>.
</p>

<p>
Sekarang lanjutkan ke <uri link="?part=1&amp;chap=7">Mengkonfigurasi
Kernel</uri>
</p>

</body>
</subsection>
</section>
</sections>
