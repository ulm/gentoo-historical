<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Id: hb-install-stage.xml,v 1.13 2006/07/19 22:46:18 neysx Exp $ -->

<sections>

<version>2.11</version>
<date>2006-05-27</date>

<section>
<title>Menginstal sebuah Stage</title>
<subsection>
<title>Set Tanggal/Waktu yang Benar</title>
<body>

<p>
Sebelum anda melanjutkan, anda perlu memeriksa tanggal/waktu anda dan
memperbaharuinya. Jam yang tidak terkonfigurasi dengan benar dapat
menyebabkan hasil yang aneh nantinya!
</p>

<p>
Untuk memastikan tanggal/waktu saat ini, jalankan <c>date</c>:
</p>

<pre caption="Memeriksa tanggal/waktu">
# <i>date</i>
Fri Mar 29 16:21:18 UTC 2005
</pre>

<p>
Jika tanggal/waktu yang ditampilkan salah, update-lah menggunakan sintaks
<c>date MMDDhhmmYYYY</c> (<b>M</b>onth, <b>D</b>ay, <b>h</b>our,
<b>m</b>inute, dan <b>Y</b>ear). Untuk saat ini anda harus menggunakan
waktu UTS. Anda dapat menentukan zona waktu anda nanti. Misalnya, untuk men-set
tanggal menjadi 29 Maret, 16:21 di tahun 2005:
</p>

<pre caption="Set tanggal/waktu UTC">
# <i>date 032916212005</i>
</pre>

</body>
</subsection>
<subsection>
<title>Memutuskan Pilihan Anda</title>
<body>

<p>
Langkah selanjutnya yang perlu anda lakukan adalah menginstal tarbal
<e>stage3</e> ke sistem anda. Anda memiliki pilihan untuk mendownload tarbal
yang diperlukan lewat internet atau, jika anda boot dari salah satu
CD Instalasi Universal Gentoo, copy stage tersebut dari CD. Jika anda
memiliki sebuah CD Universal dan stage yang anda inginkan tersedia di CD,
download lagi melalui internet hanya menyia-nyiakan bandwidth karena file
stage tersebut biasanya sama. Perintah <c>uname -m</c> dapat digunakan
untuk membantu anda memutuskan stage mana yang harus didownload.
</p>

<ul>
<li><uri link="#doc_chap2">Default: Menggunakan Stage dari Internet</uri></li>
<li>
  <uri link="#doc_chap3">Alternatif: Menggunakan Stage dari CD Instalasi</uri>
</li>
</ul>

</body>
</subsection>
</section>
<section>
<title>Default: Menggunakan Stage dari Internet</title>
<subsection>
<title>Mendownload Tarbal Stage</title>
<body>

<p>
Masuklah ke mountpoint Gentoo tempat anda me-mount filesystem anda
(kemungkinan besar <path>/mnt/gentoo</path>):
</p>

<pre caption="Masuk ke mountpoint Gentoo">
# <i>cd /mnt/gentoo</i>
</pre>

<p>
Tergantung pada media instalasi anda, tersedia beberapa tool untuk
mendownload sebuah stage. Jika program <c>links</c> tersedia, maka anda dapat
langsung masuk ke <uri link="/main/en/mirrors.xml">daftar mirror Gentoo</uri>
dan memilih sebuah mirror yang dekat dengan anda.
</p>

<p>
Jika <c>links</c> tidak tersedia, anda seharusnya memiliki <c>lynx</c>. Jika
anda harus melewati proxy, export-lah variabel <c>http_proxy</c> dan
<c>ftp_proxy</c>:
</p>

<pre caption="Set informasi proxy untk lynx">
# <i>export http_proxy="http://proxy.server.com:port"</i>
# <i>export ftp_proxy="http://proxy.server.com:port"</i>
</pre>

<p>
Sekarang kami anggap anda telah memiliki <c>links</c>.
</p>

<p>
Masuk ke direktori <path>releases/</path>, diikuti oleh arsitektur anda
(mis. <path>x86/</path>) dan versi Gentoo (<path>2006.0</path>), dan terakhir
masuk ke direktori <path>stages/</path>. Di sana, anda seharusnya akan
melihat semua file stage yang tersedia bagi arsitektur anda (mungkin disimpan
di dalam subdirektori tiap sub arsitektur). Pilih satu dan tekan <c>D</c> untuk
mendownloadnya. Setelah selesai, tekan <c>Q</c> untuk keluar dari browser.
</p>

<pre caption="Browse daftar mirror menggunakan links">
# <i>links http://www.gentoo.org/main/en/mirrors.xml</i>

 <comment>(Jika anda butuh dukungan proxy dengan links:)</comment>
# <i>links -http-proxy proxy.server.com:8080 http://www.gentoo.org/main/en/mirrors.xml</i>
</pre>

<p>
Pastikan anda mendownload sebuah tarbal <b>stage3</b> - instalasi dengan
tarbal stage1 atau stage2 sudah tidak lagi didukung.
</p>

<p>
Jika anda ingin memeriksa keadaan tarbal stage yang anda download, gunakan
program <c>md5sum</c> dan bandingkan tampilannya dengan checksum MD5 yang
disediakan di mirror. Sebagai contoh, untuk memeriksa keadaan tarbal stage x86:
</p>

<pre caption="Contoh pemeriksaan keadaan tarbal stage">
# <i>md5sum -c stage3-x86-2006.0.tar.bz2.DIGESTS</i>
stage3-x86-2006.0.tar.bz2: OK
</pre>

</body>
</subsection>
<subsection>
<title>Mengekstrak Tarbal Stage</title>
<body>

<p>
Sekarang ekstrak stage yang telah anda download ke sistem anda. Kita akan
menggunakan <c>tar</c>, karena metode ini paling mudah:
</p>

<pre caption="Mengekstrak stage">
# <i>tar xvjpf stage3-*.tar.bz2</i>
</pre>

<p>
Pastikan anda menggunakan opsi-opsi yang sama (<c>xvjpf</c>). Opsi <c>x</c>
merupakan singkatan dari <e>Extract</e>, opsi <c>v</c> adalah <e>verbose</e>
untuk melihat apa saja yang sedang terjadi ketika proses ekstrak berlangsung
(opsional), opsi <c>j</c> adalah <e>Decompress with bz2</e>, opsi <c>p</c>
adalah <e>Preserve permissions</e> dan opsi <c>f</c> artinya ekstrak sebuah
file, bukan standard input.
</p>

<note>
CD Instalasi dan imej boot untuk beberapa arsitektur (mis. MIPS) bergantung
pada <c>tar</c> yang di-built di dalam BusyBox yang untuk saat ini belum
mendukung opsi <c>v</c>. Untuk itu gunakan opsi <c>xjpf</c>.
</note>

<p>
Setelah stage terinstal, lanjutkan ke <uri
link="#installing_portage">Menginstal Portage</uri>.
</p>

</body>
</subsection>
</section>
<section>
<title>Alternatif: Menggunakan Stage dari CD Instalasi</title>
<subsection>
<title>Ekstrak Tarbal Stage</title>
<body>

<impo>
Jika anda menggunakan Installer LiveCD pada x86, anda <e>tidak</e> akan
memiliki stage di CD anda. Anda harus mengikuti petunjuk di <uri
link="#doc_chap2">Menggunakan sebuah tarbal stage dari Internet</uri>.
</impo>

<p>
Stage-stage di CD berada di direktori <path>/mnt/cdrom/stages</path>. Untuk
menampilkan daftar stage-stage yang tersedia, gunakan perintah <c>ls</c>:
</p>

<pre caption="Menampilkan stage-stage yang tersedia">
# <i>ls /mnt/cdrom/stages</i>
</pre>

<p>
Jika sistem anda menampilkan pesan error, anda mungkin perlu me-mount
CD-ROM anda dahulu:
</p>

<pre caption="Mount CD-ROM">
# <i>ls /mnt/cdrom/stages</i>
ls: /mnt/cdrom/stages: No such file or directory
# <i>mount /dev/cdroms/cdrom0 /mnt/cdrom</i>
# <i>ls /mnt/cdrom/stages</i>
</pre>

<p>
Sekarang masuklah ke mountpoint Gentoo (biasanya <path>/mnt/gentoo</path>):
</p>

<pre caption="Masuk ke /mnt/gentoo">
# <i>cd /mnt/gentoo</i>
</pre>

<p>
Sekarang kita akan mengekstrak tarbal stage pilihan anda menggunakan
<c>tar</c>. Pastikan anda menggunakan opsi-opsi yang sama (<c>-xvjpf</c>).
Argumen <c>v</c> merupakan opsional dan tidak didukung di beberapa versi
<c>tar</c>. Pada contoh berikut ini, kita mengekstrak tarbal stage
<path>stage3-&lt;subarch&gt;-2006.0.tar.bz2</path>. Pastikan unuk mengganti
nama tarbal tersebut dengan stage anda.
</p>

<pre caption="Mengekstrak tarbal stage">
# <i>tar xvjpf /mnt/cdrom/stages/stage3-&lt;subarch&gt;-2006.0.tar.bz2</i>
</pre>

<p>
Setelah stage terinstal, lanjutkan ke <uri
link="#installing_portage">Menginstal Portage</uri>.
</p>

</body>
</subsection>
</section>
<section id="installing_portage">
<title>Menginstal Portage</title>
<subsection>
<title>Menginstal Snapshot Portage</title>
<body>

<p>
Sekarang anda harus menginstal sebuah snapshot Portage, yaitu sebuah kumpulan
file yang menginformasikan Portage software apa saja yang dapat anda instal,
profile apa saja yang tersedia,dll
</p>

</body>
</subsection>
<subsection id="installing_from_Internet">
<title>Download dan Instal Snapshot Portage</title>
<body>

<p>
Masuklah ke mountpoint tempat anda me-mount filesystem anda. (biasanya di
<path>/mnt/gentoo</path>):
</p>

<pre caption="Masuk ke mountpoint Gentoo">
# <i>cd /mnt/gentoo</i>
</pre>

<p>
Jalankan <c>links</c> (atau <c>lynx</c>) kemudian masuk ke <uri
link="/main/en/mirrors.xml">daftar mirror Gentoo</uri>. Pilih sebuah mirror
yang dekat dengan anda kemudian masuk ke direktori <path>snapshots/</path>.
Dari sana, download-lah snapshot Portage terbaru dengan memilih, kemudian
menekan <c>D</c>.
</p>

<pre caption="Browsing daftar mirror Gentoo">
# <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
</pre>

<p>
Sekarang keluar dari browser dengan menekan <c>Q</c>. Anda telah memiliki
snapshot Portage di <path>/mnt/gentoo</path>.
</p>

<p>
Jika anda ingin memeriksa integritas snapshot yang baru di-download, gunakan
<c>md5sum</c> kemudian bandingkan output-nya dengan MD5 checksum yang tersedia
di mirror.
</p>

<pre caption="Memeriksa integritas snapshot Portage">
# <i>md5sum -c portage-latest.tar.bz2.md5sum</i>
portage-latest.tar.bz2: OK
</pre>

<p>
Di langkah selanjutnya, kita akan mengekstrak snapshot Portage ke filesystem
anda. Pastikan anda menggunakan perintah yang sama; opsi terakhir merupakan
huruf kapital <c>C</c>, bukan <c>c</c>.
</p>

<pre caption="Ekstrak snapshot Portage">
<comment>(Ganti &lt;date&gt; dengan datestamp yang ada pada snapshot)</comment>
# <i>tar xvjf /mnt/gentoo/portage-&lt;date&gt;.tar.bz2 -C /mnt/gentoo/usr</i>
</pre>

</body>
</subsection>
</section>

<section id="compile_options">
<title>Mengkonfigurasi Opsi Kompilasi</title>
<subsection>
<title>Pendahuluan</title>
<body>

<p>
Untuk mengoptimasi Gentoo, anda dapat mengeset beberapa variabel yang
mengendalikan tingkah laku Portage. Variabel-variabel tersebut dapat diset
sebagai variabel environment (menggunakan perintah <c>export</c>) tetapi
tidak permanen. Untuk menyimpan setting anda, Portage menyediakan file
<path>/etc/make.conf</path>, yaitu file konfigurasi Portage. File inilah yang
akan kita edit sekarang.
</p>

<note>
Daftar variabel-variabel lengkap yang ter-comment dapat ditemukan di file
<path>/mnt/gentoo/etc/make.conf.example</path>. Agar proses instalasi
Gentoo anda sukses, anda hanya perlu mengeset variabel-variabel yang
dijelaskan di bawah ini.
</note>

<p>
Jalankan editor favorit anda (di dokumentasi ini, kita menggunakan <c>nano</c>)
agar kita dapat mengubah variabel-variabel optimasi yang akan kita jelaskan.
</p>

<pre caption="Membuka /etc/make.conf">
# <i>nano -w /mnt/gentoo/etc/make.conf</i>
</pre>

<p>
Seperti yang anda lihat, file <path>make.conf.example</path> diurutkan dengan
cara yang umum: baris-baris yang ter-comment mulai dengan tanda "#",
baris-baris lain mendefenisikan variabel menggunakan sintaks
<c>VARIABLE="content"</c>. File <path>make.conf</path> menggunakan
sintaks yang sama. Beberapa dari variabel tersebut akan kita diskusikan nanti.
</p>

</body>
</subsection>
<subsection>
<title>CHOST</title>
<body>

<p>
Variabel <c>CHOST</c> mendefenisikan untuk arsitektur apa <c>gcc</c> harus
mengkompilasi program. Variabel ini seharusnya telah diset dengan nilai yang
benar.<brite>Jangan diedit</brite> karena bisa menrusak sistem anda. Jika
menurut anda variabel <c>CHOST</c> tidak benar, anda mungkin menggunakan
tarbal stage3 yang salah.
</p>

</body>
</subsection>
<subsection>
<title>CFLAGS dan CXXFLAGS</title>
<body>

<p>
Variabel <c>CFLAGS</c> dan <c>CXXFLAGS</c> mendefenisikan flag-flag optimasi
untuk compiler C dan C++ <c>gcc</c> berturut-turut. Walaupun kita
mendefenisikan variabel tersebut secara umum di sini, anda hanya akan
mendapatkan performa maksimal jika anda mengoptimasi flag-flag ini untuk
setiap program secara terpisah. Alasannya adalah karena setiap program
berbeda.
</p>

<p>
Di file <path>make.conf</path>, anda sebaiknya mendefenisikan flag-flag
optimasi yang anda rasa akan membuat sistem anda lebih responsif
<e>secara umum</e>. Jangan menggunakan setting-setting percobaan ke
variabel ini; optimasi yang terlalu tinggi dapat membuat program bertingkah
laku aneh (crash, atau bahkan, tidak dapat berfungsi).
</p>

<p>
Kami tidak akan menjelaskan semua opsi-opsi optimasi. Jika anda ingin
mengetahui opsi-opsi tersebut, baca <uri
link="http://gcc.gnu.org/onlinedocs/">Manual Online GNU</uri>
atau halaman info <c>gcc</c> (<c>info gcc</c> -- hanya berfungsi di sistem
Linux). File <path>make.conf.example</path> sendiri memiliki banyak contoh
dan informasi; jangan lupa untuk membaca file ini juga.
</p>

<p>
Setting pertama adalah flag <c>-march=</c>, yang mendefenisikan nama
arsitektur. Opsi-opsi yang mungkin dipakai dijelaskan di file
<path>make.conf.example</path> (sebagai komentar). Sebagai contoh, untuk
arsitektur x86 Athlon XP:
</p>

<pre caption="Setting march GCC">
<comment># Pengguna AMD64 yang ingin menggunakan sistem asli 64 bit sebaiknya menggunakan -march=k8</comment>
<comment># Pengguna EM64T sebaiknya menggunakan -march=nocona</comment>
-march=athlon-xp
</pre>

<p>
Yang kedua adalah flag <c>-O</c> (O adalah huruf besar O, bukan nol), yang
mendefenisikan kelas optimasi <c>gcc</c>. Kelas-kelas yang tersedia adalah
<c>s</c> (optimasi size/ukuran), <c>0</c> (nol - tidak dioptimasi), <c>1</c>,
<c>2</c> atau <c>3</c> untuk optimasi kecepatan (setiap kelas memiliki
flag-flag yang sama dari kelas sebelumnya, ditambah beberapa tambahan).
Sebagai contoh, untuk optimasi kelas 2:
</p>

<pre caption="setting O GCC">
-O2
</pre>

<p>
Flag-flag optimasi populer lainnya adalah <c>-pipe</c> (gunakan pipe
daripada file-file sementara untuk berkomunikasi antara berbagai stage
sewaktu kompilasi).
</p>

<p>
Kami ingatkan anda bahwa penggunaan <c>-fomit-frame-pointer</c> (tidak
menyimpan pointer frame di register untuk function-function yang tidak
memerlukannya) kemungkinan bisa berakibat serius ketika melakukan debugging
pada beberapa aplikasi!
</p>

<p>
Sewaktu anda mendefenisikan variabel <c>CFLAGS</c> dan <c>CXXFLAGS</c>,
anda sebaiknya mengkombinasikan beberapa flag-flag optimasi, misalnya:
</p>

<pre caption="Defenisi variabel CFLAGS dan CXXFLAGS">
CFLAGS="-march=athlon-xp -pipe -O2"   <comment># Pengguna AMD64 sebaiknya menggunakan -march=k8</comment>
                                      <comment># Pengguna EM64T sebaiknya menggunakan -march=nocona</comment>
CXXFLAGS="${CFLAGS}"                  <comment># Gunakan setting yang sama untuk kedua variabel</comment>
</pre>

</body>
</subsection>
<subsection>
<title>MAKEOPTS</title>
<body>

<p>
Di variabel <c>MAKEOPTS</c>, anda dapat mendefenisikan berapa banyak
kompilasi paralel yang berjalan sewaktu anda menginstal sebuah paket. Pilihan
yang bagus adalah banyak CPU di sistem anda tambah satu, tetapi aturan ini
tidaklah selalu sempurna.
</p>

<pre caption="MAKEOPTS untuk sistem 1 CPU umum">
MAKEOPTS="-j2"
</pre>

</body>
</subsection>
<subsection>
<title>Ready, Set, Go!</title>
<body>

<p>
Update file <path>/mnt/gentoo/etc/make.conf</path> sesuai keinginan anda
dan simpan (pengguna <c>nano</c> akan menekan <c>Ctrl-X</c>). Anda sekarang
dapat melanjutkan ke <uri
link="?part=1&amp;chap=6">Menginstal Sistem Dasar Gentoo</uri>.
</p>

</body>
</subsection>
</section>
</sections>
