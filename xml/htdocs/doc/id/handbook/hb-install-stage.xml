<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- English doc rev. 1.60 -->

<sections>
<section>
<title>Menginstal sebuah Stage</title>
<subsection>
<title>Set Tanggal/Waktu yang Benar</title>
<body>

<p>
Sebelum anda melanjutkan, anda perlu memeriksa tanggal/waktu anda dan
memperbaharuinya. Jam yang tidak terkonfigurasi dengan benar dapat menyebabkan
hasil yang aneh nantinya!
</p>

<p>
Untuk memastikan tanggal/waktu saat ini, jalankan <c>date</c>:
</p>

<pre caption="Memeriksa tanggal/waktu">
# <i>date</i>
Sun Apr 25 16:21:18 CEST 2004
</pre>

<p>
jika tanggal/waktu yang ditampilkan salah, update-lah menggunakan sintaks
<c>date MMDDhhmmYYYY</c> (<b>M</b>onth, <b>D</b>ay, <b>h</b>our,
<b>m</b>inute, dan <b>Y</b>ear). Misalnya, untuk men-set
tanggal menjadi 25 April, 16:21 di tahun 2004:
</p>

<pre caption="Set tanggal/waktu">
# <i>date 042516212004</i>
</pre>

</body>
</subsection>
<subsection>
<title>Memutuskan Pilihan Anda</title>
<body>

<p>
Langkah selanjutnya yang perlu anda lakukan adalah menginstal tarbal
<e>stage</e> pilihan anda ke sistem anda. Anda memiliki pilihan untuk
mendownload tarbal yang diperlukan lewat internet atau, jika anda boot dari
salah satu LiveCD Universal Gentoo, copy stage tersebut dari CD. Jika anda
memiliki sebuah CD Universal dan stage yang anda inginkan tersedia di
CD, download lagi melalui internet hanya menyia-nyiakan bandwidth karena
file stage tersebut sama.
</p>

<ul>
<li><uri link="#doc_chap2">Default: Menggunakan Stage dari Internet</uri></li>
<li><uri link="#doc_chap3">Alternatif: Menggunakan Stage dari LiveCD</uri></li>
</ul>

</body>
</subsection>
</section>
<section>
<title>Default: Menggunakan Stage dari Internet</title>
<subsection>
<title>Mendownload Tarbal Stage</title>
<body>

<p>
Masuklah ke mountpoint Gentoo dimana anda me-mount filesystem anda
(kemungkinan besar <path>/mnt/gentoo</path>):
</p>

<pre caption="Masuk ke mountpoint Gentoo">
# <i>cd /mnt/gentoo</i>
</pre>

<p>
Tergantung media instalasi anda, tersedia beberapa utilitas untuk mendownload
sebuah stage. Jika program <c>links2</c> tersedia, maka anda dapat langsung
masuk ke <uri link="/main/en/mirrors.xml">daftar mirror Gentoo</uri> dan
memilih sebuah mirror yang dekat dengan anda. Lalu, masuk ke direktori
<path>releases/</path>, diikuti oleh arsitektur anda (mis. <path>x86/</path>)
dan versi Gentoo (<path>2004.2</path>), dan terakhir masuk ke direktori
<path>stages/</path>. Di sana, anda seharusnya akan melihat semua file stage
yang tersedia bagi arsitektur anda. Pilih satu dan tekan <c>D</c> untuk
mendownloadnya. Setelah selesai, tekan <c>Q</c> untuk keluar dari browser.
</p>

<pre caption="Browse daftar mirror menggunakan links2">
<comment>(Tanpa proxy)</comment>   # <i>links2 http://www.gentoo.org/main/en/mirrors.xml</i>
<comment>(Dengan proxy)</comment>  # <i>links2 -http-proxy proxy.server.com:8080 http://www.gentoo.org/main/en/mirrors.xml</i>
</pre>

<p>
Jika anda ingin memeriksa keadaan tarbal stage yang anda download, gunakan
program <c>md5sum</c> dan bandingkan tampilannya dengan checksum MD5 yang
disediakan di mirror. Sebagai contoh, untuk memeriksa keadaan tarbal stage x86:
</p>

<pre caption="Contoh pemeriksaan keadaan tarbal stage">
# <i>md5sum -c stage1-x86-2004.2.tar.bz2.md5</i>
stage1-x86-2004.2.tar.bz2: OK
</pre>

</body>
</subsection>
<subsection>
<title>Mengekstrak Tarbal Stage</title>
<body>

<p>
Sekarang ekstrak stage yang telah anda download ke sistem anda. Kita akan
menggunakan program GNU <c>tar</c>, karena metode ini paling mudah:
</p>

<pre caption="Mengekstrak stage">
# <i>tar -xvjpf stage?-*.tar.bz2</i>
</pre>

<p>
Pastikan anda menggunakan opsi-opsi yang sama (<c>-xvjpf</c>). Opsi <c>x</c>
merupakan singkatan dari <e>Extract</e>, opsi <c>v</c> adalah <e>verbose</e>
(ok, yang ini merupakan opsional), opsi <c>j</c> adalah <e>Decompress with
bz2</e>, opsi <c>p</c> adalah <e>Preserve permissions</e> dan opsi <c>f</c>
artinya ekstrak sebuah file, bukan standard input.
</p>

<p>
Setelah stage terinstal, lanjutkan ke <uri link="#installing_portage">
Menginstal Portage</uri>.
</p>

</body>
</subsection>
</section>
<section>
<title>Alternatif: Menggunakan Stage dari LiveCD</title>
<subsection>
<title>Ekstrak Tarbal Stage</title>
<body>

<p>
Stage-stage di CD berada di direktori <path>/mnt/cdrom/stages</path>. Untuk
menampilkan daftar stage-stage yang tersedia, gunakan perintah <c>ls</c>:
</p>

<pre caption="Menampilkan stage-stage yang tersedia">
# <i>ls /mnt/cdrom/stages</i>
</pre>

<p>
Jika sistem anda menampilkan pesan error, anda mungkin perlu me-mount
CD-ROM anda dahulu:
</p>

<pre caption="Mount CD-ROM">
# <i>ls /mnt/cdrom/stages</i>
ls: /mnt/cdrom/stages: No such file or directory
# <i>mount /dev/cdroms/cdrom0 /mnt/cdrom</i>
# <i>ls /mnt/cdrom/stages</i>
</pre>

<p>
Sekarang masuklah ke mountpoint Gentoo (biasanya <path>/mnt/gentoo</path>):
</p>

<pre caption="Masuk ke /mnt/gentoo">
# <i>cd /mnt/gentoo</i>
</pre>

<p>
Sekarang kita akan mengekstrak tarbal stage pilihan anda menggunakan utilitas
GNU <c>tar</c>. Pastikan anda menggunakan opsi-opsi yang sama
(<c>-xvjpf</c>)! Di contoh berikut ini, kita mengekstrak tarbal stage
<path>stage3-&lt;subarch&gt;-2004.2.tar.bz2</path>. Gantikan nama
tarbal tersebut dengan stage pilihan anda.
</p>

<pre caption="Mengekstrak tarbal stage">
# <i>tar -xvjpf /mnt/cdrom/stages/stage3-&lt;subarch&gt;-2004.2.tar.bz2</i>
</pre>

<p>
Setelah stage terinstal, lanjutkan ke <uri link="#installing_portage">
Menginstal Portage</uri>.
</p>

</body>
</subsection>
</section>
<section id="installing_portage">
<title>Menginstal Portage</title>
<subsection>
<title>Dengan atau Tanpa Jaringan (Internet)?</title>
<body>

<p>
Jika anda tidak memiliki koneksi jaringan (internet), anda harus menginstal
snapshot portage yang disediakan oleh salah satu LiveCD Gentoo. Hal ini
secara otomatis menganggap anda menginstal dari tarbal <e>stage3</e>
(karena stage tersebut merupakan satu-satunya tarbal yang didukung untuk
instalasi tanpa-jaringan). Jika anda
ingin menggunakan paket-paket prebuilt nantinya untuk mempersingkat
proses instalasi, anda <e>harus</e> menggunakan snapshot portage dari
LiveCD. Pengguna lainnya akan mendownload Portage
tree yang up-to-date menggunakan <c>emerge</c> di bab berikutnya.
</p>

<p>
Lanjutkan ke tahap yang tepat:
</p>

<ul>
  <li>
    <uri link="#installing_from_LiveCD">Menginstal Snapshot Portage dan
    Source Code dari LiveCD</uri> (bagi pengguna tanpa koneksi internet atau
    instalasi GRP)
  </li>
  <li>
    <uri link="#compile_options">Mengkonfigurasi Opsi Kompilasi</uri> (semua
    metode instalasi lain)
  </li>
</ul>

</body>
</subsection>
<subsection id="installing_from_LiveCD">
<title>Menginstal Snapshot Portage dan Source Code dari LiveCD</title>
<body>

<p>
Snapshot Portage tersedia di LiveCD Universal. Karena anda membaca bagian
ini, kami anggap anda menggunakan salah satu LiveCD tersebut. Untuk menginstal
snapshot tersebut, periksalah direktori <path>/mnt/cdrom/snapshots/</path>
untuk melihat snapshot apa yang tersedia:
</p>

<pre caption="Memeriksa isi /mnt/cdrom/snapshots">
# <i>ls /mnt/cdrom/snapshots</i>
</pre>

<p>
Sekarang ekstrak snapshot tersebut menggunakan perintah berikut. Lagi, pastikan
anda menggunakan opsi-opsi yang tepat bagi <c>tar</c>. Dan juga, opsi <c>-C</c>
adalah huruf <c>C</c> besar, bukan <c>c</c>. Di contoh berikutnya, kita
menggunakan <path>portage-20040710.tar.bz2</path> sebagai file snapshot.
Gantikan dengan snapshot yang anda gunakan.
</p>

<pre caption="Ekstrak snapshot Portage">
# <i>tar -xvjf /mnt/cdrom/snapshots/portage-20040710.tar.bz2 -C /mnt/gentoo/usr</i>
</pre>

<p>
Anda dapat juga meng-copy seluruh source code dari CD:
</p>

<pre caption="Copy source code">
# <i>mkdir /mnt/gentoo/usr/portage/distfiles</i>
# <i>cp /mnt/cdrom/distfiles/* /mnt/gentoo/usr/portage/distfiles/</i>
</pre>

<p>
Setelah snapshot Portage anda terinstal, lanjutkan ke <uri
link="#compile_options">Mengkonfigurasi Opsi Kompilasi</uri>.
</p>

</body>
</subsection>
</section>

<section id="compile_options">
<title>Mengkonfigurasi Opsi Kompilasi</title>
<subsection>
<title>Pendahuluan</title>
<body>

<p>
Untuk mengoptimasi Gentoo, anda dapat mengeset beberapa variabel yang
mengendalikan tingkah laku Portage. Variabel-variabel tersebut dapat diset
sebagai variabel environment (menggunakan perintah <c>export</c>) tetapi
tidak permanen. Untuk menyimpan setting anda, Portage menyediakan file
<path>/etc/make.conf</path>, yaitu file konfigurasi Portage. File inilah yang
akan kita edit sekarang.
</p>

<note>
Daftar variabel-variabel lengkap yang ter-comment dapat ditemui di file
<path>/mnt/gentoo/etc/make.conf.example</path>. Agar proses instalasi
Gentoo anda sukses, anda hanya perlu mengeset variabel-variabel yang dijelaskan
di bawah ini.
</note>

<p>
Jalankan editor favorit anda (di dokumentasi ini, kita menggunakan <c>nano</c>)
agar kita dapat mengubah variabel-variabel optimasi yang akan kita jelaskan.
</p>

<pre caption="Membuka /etc/make.conf">
# <i>nano -w /mnt/gentoo/etc/make.conf</i>
</pre>

<p>
Seperti yang anda lihat, file <path>make.conf.example</path> diorganisasi
menggunakan cara yang umum: baris-baris yang ter-comment mulai dengan tanda
"#", baris-baris lain mendefenisikan variabel menggunakan sintaks
<c>VARIABLE="content"</c>. File <path>make.conf</path> menggunakan
sintaks yang sama. Beberapa dari variabel tersebut akan kita diskusikan
di bagian selanjutnya.
</p>

</body>
</subsection>
<subsection>
<title>CHOST</title>
<body>

<warn>
Walaupun variabel ini sering menggoda pengguna non-stage1, mereka sebaiknya
<e>tidak</e> mengubah setting <c>CHOST</c> di file <path>make.conf</path>.
Jika diubah, sistem mereka tidak akan berfungsi. Lagi: hanya ubah variabel ini jika
anda menggunakan instalasi <e>stage1</e>.
</warn>

<p>
Variabel <c>CHOST</c> mendefenisikan untuk arsitektur apa <c>gcc</c> harus
mengkompilasi program. Nilai yang memungkinkan adalah:
</p>

<table>
<tr>
  <th>Arsitektur</th>
  <th>Subarsitektur</th>
  <th>Setting CHOST</th>
</tr>
<tr>
  <ti>x86</ti>
  <ti>i386</ti>
  <ti>i386-pc-linux-gnu</ti>
</tr>
<tr>
  <ti>x86</ti>
  <ti>i486</ti>
  <ti>i486-pc-linux-gnu</ti>
</tr>
<tr>
  <ti>x86</ti>
  <ti>i586</ti>
  <ti>i586-pc-linux-gnu</ti>
</tr>
<tr>
  <ti>x86</ti>
  <ti>i686 dan ke atas (termasuk athlon)</ti>
  <ti>i686-pc-linux-gnu</ti>
</tr>
<tr>
  <ti>alpha</ti>
  <ti></ti>
  <ti>alpha-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>ppc</ti>
  <ti></ti>
  <ti>powerpc-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>ppc64</ti>
  <ti></ti>
  <ti>powerpc64-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>sparc</ti>
  <ti></ti>
  <ti>sparc-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>hppa</ti>
  <ti>(umum)</ti>
  <ti>hppa-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>hppa</ti>
  <ti>pa7000</ti>
  <ti>hppa1.1-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>hppa</ti>
  <ti>pa8000 and above</ti>
  <ti>hppa2.0-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>mips</ti>
  <ti></ti>
  <ti>mips-unknown-linux-gnu</ti>
</tr>
<tr>
  <ti>amd64</ti>
  <ti></ti>
  <ti>x86_64-pc-linux-gnu</ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>CFLAGS dan CXXFLAGS</title>
<body>

<p>
Variabel <c>CFLAGS</c> dan <c>CXXFLAGS</c> mendefenisikan flag-flag optimasi
untuk compiler C dan C++ <c>gcc</c> berturut-turut. Walaupun kita mendefenisikan
variabel tersebut secara umum di sini, anda hanya akan mendapatkan performa
maksimal jika anda mengoptimasi flag-flag ini untuk setiap program secara
terpisah. Alasannya adalah karena setiap program berbeda.</p>

<p>
Di file <path>make.conf</path> anda sebaiknya mendefenisikan flag-flag optimasi
yang anda rasa akan membuat sistem anda lebih responsif <e>secara umum</e>.
Jangan menggunakan setting-setting percobaan ke variabel ini; optimasi yang
terlalu tinggi dapat membuat program bertingkah laku aneh (crash, atau kadang,
tidak dapat berfungsi).
</p>

<p>
Kami tidak akan menjelaskan semua opsi-opsi optimasi. Jika anda ingin
mengetahui opsi-opsi tersebut, baca <uri 
link="http://gcc.gnu.org/onlinedocs/">Manual Online GNU</uri>
atau halaman info <c>gcc</c> (<c>info gcc</c> -- hanya berfungsi di sistem
Linux). File <path>make.conf.example</path> sendiri memiliki banyak contoh
dan informasi; jangan lupa untuk membaca file ini juga.
</p>

<p>
Setting pertama adalah flag <c>-march=</c>, yang mendefenisikan nama
arsitektur. Opsi-opsi yang mungkin dipakai dijelaskan di file
<path>make.conf.example</path> (sebagai komentar). Sebagai contoh, untuk
arsitektur x86 Athlon XP:
</p>

<pre caption="setting march GCC">
<comment># Pengguna AMD64 yang ingin menggunakan sistem natif 64 bit sebaiknya tidak menggunakan athlon-xp</comment>
-march=athlon-xp
</pre>

<p>
Yang kedua adalah flag <c>-O</c> (O adalah huruf besar O, bukan nol), yang
mendefenisikan kelas optimasi <c>gcc</c>. Kelas-kelas yang tersedia adalah
<c>s</c> (optimasi size/besar), <c>0</c> (nol - tidak dioptimasi), <c>1</c>,
<c>2</c> atau <c>3</c> untuk optimasi kecepatan (setiap kelas memiliki
flag-flag yang sama dari kelas sebelumnya, ditambah beberapa tambahan).
Sebagai contoh, untuk optimasi kelas 2:
</p>

<pre caption="setting O GCC">
-O2
</pre>

<p>
Flag-flag optimasi populer lainnya adalah <c>-pipe</c> (gunakan pipe daripada
file-file sementara untuk berkomunikasi antara berbagai stage sewaktu
kompilasi) dan <c>-fomit-frame-pointer</c> (tidak menyimpan pointer frame
di register untuk function-function yang tidak memerlukannya).
</p>

<p>
Sewaktu anda mendefenisikan variabel <c>CFLAGS</c> dan <c>CXXFLAGS</c>,
anda sebaiknya mengkombinasikan beberapa flag-flag optimasi, misalnya:
</p>

<pre caption="Defenisi variabel CFLAGS dan CXXFLAGS">
CFLAGS="-march=athlon-xp -pipe -O2"   <comment># Pengguna AMD64 sebaiknya tidak menggunakan athlon-xp</comment>
CXXFLAGS="${CFLAGS}"                  <comment># Gunakan setting yang sama untuk kedua variabel</comment>
</pre>

</body>
</subsection>
<subsection>
<title>MAKEOPTS</title>
<body>

<p>
Di variabel <c>MAKEOPTS</c>, anda dapat mendefenisikan berapa banyak
kompilasi paralel yang berjalan sewaktu anda menginstal sebuah paket. Nomor
yang kami sarankan adalah banyak CPU di sistem anda tambah satu.
</p>

<pre caption="MAKEOPTS untuk sistem 1 CPU umum">
MAKEOPTS="-j2"
</pre>

</body>
</subsection>
<subsection>
<title>Ready, Set, Go!</title>
<body>

<p>
Update file <path>/mnt/gentoo/etc/make.conf</path> sesuai kebutuhan anda
dan simpan (pengguna <c>nano</c> akan menekan <c>Ctrl-X</c>). Anda sekarang
dapat melanjutkan ke <uri
link="?part=1&amp;chap=6">Menginstal Sistem Dasar Gentoo</uri>.
</p>

</body>
</subsection>
</section>
</sections>
