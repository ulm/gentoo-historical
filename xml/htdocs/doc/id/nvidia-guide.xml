<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Id: nvidia-guide.xml,v 1.5 2007/03/27 11:06:01 neysx Exp $ -->

<guide link="/doc/id/nvidia-guide.xml" lang="id">
<title>Panduan nVidia Gentoo Linux</title>

<author title="Author">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Editor">
  <mail link="curtis119@gentoo.org">M Curtis Napier</mail>
</author>
<author title="Editor">
  <mail link="nightmorph@gentoo.org">Joshua Saddler</mail>
</author>
<author title="Editor">
  <mail link="wolf31o2@gentoo.org">Chris Gianelloni</mail>
</author>
<author title="Translator">
  <mail link="kucrut.dz@gmail.com">Dzikri Aziz</mail>
</author>

<abstract>
Banyak pengguna Gentoo yang menggunakan chipset nVidia pada sistem mereka.
nVidia menyediakan driver khusus Linux untuk meningkatkan performa kartu anda.
Panduan ini akan menuntun anda dalam proses instalasi dan konfigurasi
driver ini.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.29</version>
<date>2007-02-08</date>

<chapter>
<title>Pendahuluan</title>
<section>
<body>

<p>
Driver-driver nVidia di portage dirilis oleh nVidia dan dibangun dengan
menggunakan kernel Linux. Driver-driver ini mengandung <e>binary blob</e>
yang bertugas untuk mengendalikan kartu video. Masing-masing berisi dua
bagian, modul kernel dan driver X11. Kedua bagian ini dibungkus dalam satu
paket. Karena adanya perbedaan dalam cara nVidia memaketkan drivernya yang
lama dengan yang baru, anda perlu menentukan beberapa pilihan sebelum anda
menginstal driver. Saat ini tersedia dua jenis paket driver di portage.
Pertama, <c>nvidia-drivers</c>, merupakan driver terbaru dari nVidia dan berisi
dukungan untuk kartu-kartu nVidia terbaru. Kedua, <c>nvidia-legacy-drivers</c>,
mendukung kartu-kartu lama dari TNT asli sampai GeForce 6800. Namun, driver
kedua tidak menyediakan fitur-fitur yang terdapat pada driver untuk kartu-kartu
baru. Anda hanya perlu menggunakannya jika kartu anda tidak didukung oleh
<c>nvidia-drivers</c>.
</p>

<note>
Sebelumnya, Gentoo menyediakan ebuild terpisah untuk modul kernel nVidia
(<c>nvidia-kernel</c>) dan pustaka X11 GLX (<c>nvidia-glx</c>). Ebuild-ebuild
ini telah dihapus dari Portage dan digantikan oleh <c>nvidia-drivers</c> dan
<c>nvidia-legacy-drivers</c>. Jika anda masih menggunakan <c>nvidia-kernel</c>
dan <c>nvidia-glx</c>, maka anda harus segera berpindah untuk menggunakan
paket yang baru.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Kompatibilitas Driver</title>
<section>
<title>nvidia-legacy-drivers</title>
<body>

<p>
Cabang <c>nvidia-legacy-drivers</c> mendukung kartu nVidia lama yang
tidak lagi didukung oleh driver terbaru. Cabang ini didasarkan pada basis kode
driver nVidia lama, dan mendukung versi kernel juga X.Org terbaru. Anda harus
menggunakan driver ini jika anda menggunakan kartu TNT, TNT2, GeForce, atau
GeForce seri 2. Informasi kompatibilitas driver bisa anda dapatkan di Appendix
A dari
<uri>http://download.nvidia.com/XFree86/Linux-x86/1.0-7184/README/readme.txt</uri>.
</p>

</body>
</section>
<section>
<title>nvidia-drivers</title>
<body>

<p>
Cabang <c>nvidia-drivers</c> mendukung fitur-fitur terbaru yang terdapat pada
kartu nVidia baru. Versi terbaru driver ini tidak lagi mengikutsertakan
dukungan untuk kartu berbasis NV2x. Jika anda memiliki kartu seri GeForce 3
atau GeForce 4, anda harus menambahkan
<c>>=x11-drivers/nvidia-drivers-1.0.9700</c> di file
<path>/etc/portage/package.mask</path>. Ini akan mencegah instalasi driver baru
yang tidak cocok dengan kartu anda. Anda dapat memeriksa kompatibilitas driver
untuk kartu anda apakah didukung oleh driver terbaru di
<uri>http://us.download.nvidia.com/XFree86/Linux-x86/1.0-9746/README/appendix-a.html</uri>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Konfigurasi Kartu Video</title>
<section>
<title>Konfigurasi Kernel</title>
<body>

<p>
Seperti yang telah dijelaskan di atas, driver kernel nVidia terinstal dan
dijalankan oleh kernel anda saat ini. Driver ini dibangun sebagai modul, jadi
sangat masuk akal jika kernel anda harus memiliki dukungan untuk memuat modul.
Jika anda telah menggunakan <c>genkernel_all</c> untuk mengkonfigurasi kernel,
berarti anda telah siap untuk melanjutkan. Jika tidak, periksa kembali apakah
kernel anda memiliki dukungan ini:
</p>

<pre caption="Mengaktifkan dukungan kernel untuk memuat modul">
Loadable module support ---&gt;
  [*] Enable loadable module support
</pre>

<p>
Anda juga perlu mengaktifkan <e>Memory Type Range Register</e> di kernel:
</p>

<pre caption="Mengaktifkan MTRR">
Processor and Features ---&gt;
  [*] MTRR (Memory Type Range Register) support
</pre>

<p>
Jika anda memiliki kartu video AGP, anda dapat mengaktifkan dukungan
<c>agpgart</c> untuk kernel, boleh di dalam kernel maupun sebagai modul. Jika
anda tidak menggunakan agpgart di dalam kernel, maka driver akan menggunakan
implementasi agpgart-nya sendiri, yang bernama <c>NvAGP</c>. pada beberapa
sistem, implementasi ini memiliki performa yang lebih baik dibandingkan dengan
agpgart dari kernel, namun pada sistem lainnya lebih jelek. Anda perlu
mengujinya sendiri pada sistem anda untuk mendapatkan performa terbaik. Jika
anda tidak yakin dengan pilihan yang harus diambil, gunakan saja agpgart
dari kernel.
</p>

<pre caption="Mengaktifkan agpgart">
Device Drivers ---&gt;
Character devices ---&gt;
&lt;*&gt; /dev/agpgart (AGP Support)
</pre>

<note>
Pada AMD64, IOMMU mengendalikan pengaturan agpgart.
</note>

</body>
</section>
<section>
<title>Catatan Khusus untuk Arsitektur Tertentu</title>
<body>

<impo>
Untuk prosesor x86 dan AMD64, driver di dalam kernel akan konflik dengan binari
dari nVidia. Jika anda akan mengkompilasi kernel untuk prosesor ini, anda harus
meniadakan dukungan untuk driver di dalam kernel seperti yang ditunjukkan
di bawah ini:
</impo>

<pre caption="Meniadakan dukungan driver di dalam kernel">
Device Drivers ---&gt;
Graphics Support ---&gt;
&lt; &gt;   nVidia Framebuffer Support
&lt; &gt;   nVidia Riva support
</pre>

<p>
Alternatif framebuffer yang bagus adalah <c>VESA</c>:
</p>

<pre caption="Mengaktifkan dukungan VESA">
Device Drivers ---&gt;
Graphics Support ---&gt;
&lt;*&gt;   VESA VGA graphics support
</pre>

<p>
Kemudian, di bawah "VESA driver type" pilih <c>vesafb</c> atau
<c>vesafb-tng</c>. Jika anda menggunakan AMD64, anda perlu memilih
<c>vesafb</c>:
</p>

<pre caption="Pilih tipe framebuffer">
(X) vesafb
( ) vesafb-tng
</pre>

<p>
Untuk info lebih lanjut, silahkan baca
<path>/usr/src/linux/Documentation/fb/vesafb.txt</path> jika anda
menggunakan <c>vesafb</c> atau cari dokumentasi framebuffer anda di
<path>/usr/src/linux/Documentation/fb/</path>.
</p>

</body>
</section>
<section>
<title>Melanjutkan Konfigurasi Kernel</title>
<body>

<p>
Ebuild <c>nvidia-drivers</c> dan <c>nvidia-legacy-drivers</c> secara otomatis
mencari versi kernel anda berdasarkan symlink <path>/usr/src/linux</path>.
Pastikan agar symlink ini menunjuk ke kernel yang benar dan telah
dikonfigurasi. Bacalah bagian Konfigurasi Kernel dari <uri
link="/doc/id/handbook/">Buku Pegangan Instalasi</uri> untuk penjelasan lebih
mendalam tentang konfigurasi kernel.
</p>

<p>
Jika anda menggunakan gentoo-sources-2.6.11-r6, direktori
<path>/usr/src</path> anda akan terlihat seperti ini:
</p>

<pre caption="Pemeriksaan symlink /usr/src/linux">
# <i>cd /usr/src</i>
# <i>ls -l</i>
<comment>(Pastikan agar linux menunjuk ke direktori yang benar)</comment>
lrwxrwxrwx   1 root root   22 Apr 23 18:33 linux -&gt; linux-2.6.11-gentoo-r6
drwxr-xr-x   4 root root  120 Apr  8 18:56 linux-2.4.26-gentoo-r4
drwxr-xr-x  18 root root  664 Dec 31 16:09 linux-2.6.10
drwxr-xr-x  18 root root  632 Mar  3 12:27 linux-2.6.11
drwxr-xr-x  19 root root 4096 Mar 16 22:00 linux-2.6.11-gentoo-r6
</pre>

<p>
Pada contoh di atas, anda akan melihat bahwa symlink <c>linux</c> menunjuk
ke kernel <c>linux-2.6.11-gentoo-r6</c>.
</p>

<p>
Jika symlink tidak menunjuk ke source kernel yang benar, anda perlu memperbarui
link tersebut seperti ini:
</p>

<pre caption="Menciptakan/memperbarui symlink /usr/src/linux">
# <i>cd /usr/src</i>
# <i>ln -snf linux-2.6.11-gentoo-r6 linux</i>
</pre>

</body>
</section>
<section>
<title>Opsional: Periksa Dukungan untuk Kartu Jenis Lama</title>
<body>

<note>
Sayangnya, beberapa kartu lama tidak didukung oleh versi terbaru
<c>nvidia-drivers</c>. nVidia menyediakan sebuah <uri
link="http://www.nvidia.com/object/IO_18897.html">daftar kartu yang
didukung</uri>. Periksalah daftar ini sebelum menginstal driver.
</note>

<p>
Berikut ini adalah daftar kartu video yang <b>tidak didukung</b>:
</p>

<pre caption="Kartu-kartu yang tidak didukung">
TNT
TNT2
TNT2 Pro
TNT2 Ultra
TNT2 Model 64 (M64)
TNT2 Model 64 (M64) Pro
Vanta
Vanta LT
GeForce 256
GeForce DDR
GeForce2 GTS
GeForce2 Pro
GeForce2 Ti
GeForce2 Ultra
GeForce2 MX Integrated graphics
Quadro
Quadro2 Pro
Quadro2 EX
</pre>

<p>
Jika anda memiliki salah satu dari kartu-kartu video di atas, anda harus
menginstal paket <c>nvidia-legacy-drivers</c> untuk mendapatkan dukungan 3D.
</p>

</body>
</section>
<section>
<title>Instalasi Driver yang Tepat</title>
<body>

<p>
Sekarang saatnya untuk menginstal driver.
</p>

<pre caption="Instalasi driver nVidia">
<comment>(Jika anda memiliki kartu yang tidak tertera pada daftar di atas)</comment>
# <i>emerge nvidia-drivers</i>
<comment>(Jika kartu anda tertera pada daftar di atas)</comment>
# <i>emerge nvidia-legacy-drivers</i>
</pre>

<impo>
Setiap kali anda <uri link="/doc/id/kernel-upgrade.xml">mengkompilasi kernel
baru</uri> atau mengkompilasi ulang kernel anda saat ini, anda harus menjalankan
<c>emerge nvidia-drivers</c> atau <c>emerge nvidia-legacy-drivers</c> untuk
menginstal kembali modul-modul nVidia.
</impo>

<p>
Ketika instalasi telah selesai, jalankan <c>modprobe nvidia</c> untuk memuat
modul kernel ke memori. Jika anda melakukan upgrade, anda perlu membuang modul
yang lama terlebih dahulu.
</p>

<pre caption="Load modul kernel">
# <i>lsmod | grep nvidia &amp;&amp; rmmod nvidia</i>
# <i>modprobe nvidia</i>
</pre>

<p>
Agar anda tidak perlu memuat modul ini setiap kali sistem dinyalakan, mungkin
anda ingin agar modul ini dimuat secara otomatis. Untuk itu, edit file
<path>/etc/modules.autoload.d/kernel-2.6</path> (atau <path>kernel-2.4</path>,
tergantung versi kernel yang anda gunakan) lalu tambahkan <c>nvidia</c>.
Jangan lupa untuk menjalankan <c>modules-update</c> setelah selesai.
</p>

<impo>
Jika anda mengkompilasi <c>agpgart</c> sebagai modul, anda perlu menambahkannya
ke <path>/etc/modules.autoload.d/kernel-2.6</path> (atau 
<path>kernel-2.4</path>).
</impo>

<pre caption="Menjalankan modules-update">
# <i>modules-update</i>
</pre>

</body>
</section>
<section>
<title>Konfigurasi Server X</title>
<body>

<p>
Jika driver yang benar telah terinstal, anda perlu mengkonfigurasi Server X
agar menggunakan driver <c>nvidia</c> sebagai ganti dari driver default, yaitu
driver <c>nv</c>.
</p>

<p>
Bukalah file <path>/etc/X11/xorg.conf</path> dengan editor favorit anda (mis.
<c>nano</c> atau <c>vim</c>) lalu masuki seksi <c>Device</c>. Pada seksi ini,
gantilah baris <c>Driver</c>:
</p>

<pre caption="Mengganti nv ke nvidia pada konfigurasi Sever X">
Section "Device"
  Identifier "nVidia Inc. GeForce2"
  <i>Driver     "nvidia"</i>
  VideoRam   65536
EndSection
</pre>

<p>
Kemudian masuki seksi <c>Module</c> dan pastikan agar modul <c>glx</c>
dimuat, sedangkan <c>dri</c> tidak dimuat:
</p>

<pre caption="Memperbarui seksi Module">
Section "Module"
  <comment>(...)</comment>
  <i># Load  "dri"
  Load  "glx"</i>
  <comment>(...)</comment>
EndSection
</pre>

<p>
Selanjutnya, pada seksi <c>Screen</c>, pastikan agar <c>DefaultDepth</c>
diatur ke 16 atau 24, atau, anda hanya memiliki sub-seksi <c>Display</c>
dengan <c>Depth</c> diatur ke 16 atau 24. Tanpa pengaturan ini, ekstensi
nvidia-glx tidak akan berfungsi.
</p>

<pre caption="Memperbarui seksi Screen">
Section "Screen"
  <comment>(...)</comment>
  <i>DefaultDepth 16</i>
  Subsection "Display"
  <comment>(...)</comment>
EndSection
</pre>

<p>
Jalankan <c>eselect</c> agar Server X menggunakan librari GLX nVidia:
</p>

<pre caption="Menjalankan eselect">
# <i>eselect opengl set nvidia</i>
</pre>

</body>
</section>
<section>
<title>Menambahakan User ke Grup Video</title>
<body>

<p>
Anda harus menambahkan user anda ke grup <c>video</c> agar ia bisa mengakses
file perangkat nvidia:
</p>

<pre caption="Menambahakan user ke grup video">
# <i>gpasswd -a nama-user video</i>
</pre>

<p>
Langkah ini mungkin tidak terlalu diperlukan jika anda tidak menggunakan
<c>udev</c>, tetapi juga tidak akan merusak sistem anda, malahan akan
menjadikannya lebih handal.
</p>

</body>
</section>
<section>
<title>Mengujio Katu Video</title>
<body>

<p>
Untuk menguji kartu nVidia anda, nyalakan X lalu jalankan perintah <c>glxinfo
| grep direct</c>. Perintah ini seharusnya mengatakan bahwa "direct rendering"
telah diaktifkan:
</p>

<pre caption="Memeriksa status direct rendering">
$ <i>glxinfo | grep direct</i>
direct rendering: Yes
</pre>

<p>
Untuk memonitor FPS, jalankan <c>glxgears</c>.
</p>

</body>
</section>
<section>
<title>Mengaktifkan Dukungan nvidia</title>
<body>

<p>
Beberapa program seperti <c>mplayer</c> dan <c>xine-lib</c>, menggunakan flag
USE lokal bernama "nvidia" yang akan mengaktifkan dukungan XvMCNVIDIA nvidia,
berguna ketika anda memutar film dengan resolusi tinggi. Tambahkan "nvidia" ke
variabel USE anda di file <path>/etc/make.conf</path> atau tambahkan sebagai
flag USE untuk <c>media-video/mplayer</c> dan/atau <c>media-libs/xine-lib</c>
di <path>/etc/portage/package.use</path>.
</p>

<p>
Kemudian, jalankan <c>emerge -uD --newuse world</c> untuk menginstal ulang
aplikasi yang terpengaruh dengan pergantian flag USE.
</p>

</body>
</section>
<section>
<title>Menggunakan Utilitas NVidia Settings</title>
<body>

<p>
Sejak driver versi 1.0.6106, nVidia juga menyediakan sebuah utilitas
pengaturan. Dengan utilitas ini, anda dapat merubah pengaturan X tanpa
harus me-restart server X. Tersedia di Portage dengan nama
<c>media-video/nvidia-settings</c>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Pemecahan Masalah</title>
<section>
<title>Mendapatkan akselerasi 2D di komputer dengan memori 4Gb atau lebih</title>
<body>

<p>
Jika anda mendapatkan masalah dengan akselerasi 2D nVidia, kemungkinan besar
anda tidak dapet mengatur <e>write-combining range</e> dengan MTRR. Untuk
memastikan, periksa isi file <path>/proc/mtrr</path>:
</p>

<pre caption="Periksa apakah write-combining telah aktif">
# <i>cat /proc/mtrr</i>
</pre>

<p>
Setiap baris harus berisi "write-back" atau "write-combining". Jika anda
melihat baris yang berisi "uncachable", anda harus memperbaiki pengaturan MTRR
di BIOS.
</p>

<p>
Reboot dan masuki BIOS, untuk memasuki pengaturan MTRR (kemungkinan di dalam
"CPU Settings"). Ganti dari "continuous" ke "discrete" lalu boot kembali ke
Linux. Anda tidak akan menemukan lagi entri "uncachable", dan akselerasi 2D
sekarang telah berfungsi dengan benar.
</p>

</body>
</section>
<section>
<title>
  Ketika saya mencoba untuk memuat modul kernel, saya mendapatkan pesan
  "no such device"
</title>
<body>

<p>
Masalah ini biasanya terjadi ketika anda tidak memiliki kartu video yang cocok
dengan driver. Pastikan bahwa anda memiliki kartu nVidia (anda dapat memeriksa
ulang dengan menggunakan <c>lspci</c>).
</p>

<p>
Jika anda yakin bahwa anda memiliki kartu nVidia, Periksa BIOS anda dan lihat
apakah <e>Assign IRQ to VGA</e> telah diatur.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Konfigurasi Lanjutan</title>
<section>
<title>Dokumentasi</title>
<body>

<p>
Paket driver nVidia juga menyediakan dokumentasi lengkap. Dokumentasi ini
ditempatkan di <c>/usr/share/doc</c> dan dapat anda baca dengan perintah
berikut:
</p>

<pre caption="Membaca dokumentasi NVIDIA">
<comment>(untuk nvidia-drivers)</comment>
$ <i>less /usr/share/doc/nvidia-drivers-*/README.gz</i>
<comment>(untuk nvidia-legacy-drivers)</comment>
$ <i>less /usr/share/doc/nvidia-legacy-drivers-*/README.gz</i>
</pre>

</body>
</section>
<section>
<title>Parameter modul kernel</title>
<body>

<p>
Modul kernel <c>nvidia</c> menerima sejumlah parameter (opsi) yang dapat anda
gunakan untuk men-<e>tweak</e> tingkah laku driver. Kebanyakan dari parameter
ini dijelaskan di dokumentasi. Untuk menambahkan atau mengganti parameter ini,
edit file <c>/etc/modules.d/nvidia</c>. Jangan lupa untuk menjalankan
<c>modules-update</c> setelah anda merubah isi file ini, dan ingat bahwa anda
perlu memuat ulang modul nvidia agar pengaturan baru anda diterapkan.
</p>

<pre caption="Merubah opsi nvidia">
<comment>(Edit /etc/modules.d/nvidia dengan editor favorit anda)</comment>
# <i>nano -w /etc/modules.d/nvidia</i>
<comment>(Perbarui informasi modul)</comment>
# <i>modules-update</i>
<comment>(Buang modul nvidia ...)</comment>
# <i>modprobe -r nvidia</i>
<comment>(...lalu muat ulang)</comment>
# <i>modprobe nvidia</i>
</pre>

</body>
</section>
<section>
<title>Konfigurasi X Lanjutan</title>
<body>

<p>
Lapisan GLX juga memiliki beberapa opsi yang dapat anda konfigurasi. Opsi ini
mengendalikan konfigurasi untuk TV Out, <e>dual display</e>, deteksi frekuensi
monitor, dll. Semua opsi yang tersedia juga dijelaskan di dokumentasi.
</p>

<p>
Jika anda ingin menggunakan opsi-opsi ini, anda perlu mendaftarkannya di seksi
"Device" dari file konfigurasi X anda (biasanya <c>/etc/X11/xorg.conf</c>).
Sebagai contoh, penulis ingin menonaktifkan logo splash nVidia:
</p>

<pre caption="Konfigurasi X lanjutan">
Section "Device"
  Identifier "nVidia Inc. GeForce2"
  Driver     "nvidia"
  <i>Option     "NoLogo" "true"</i>
  VideoRam   65536
EndSection
</pre>

</body>
</section>
</chapter>

</guide>
