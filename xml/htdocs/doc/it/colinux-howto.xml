<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/Attic/colinux-howto.xml,v 1.5 2006/03/10 14:03:08 neysx Exp $ -->

<guide link="/doc/it/colinux-howto.xml" lang="it">
<title>Guida alla configurazione di coLinux per utilizzare Gentoo</title>
<author title="Autore">
  IWBCMAN
</author>
<author title="Autore">
  janlaur
</author>
<author title="Edizione">
  <mail link="joshua@sungentoo.homeunix.com">Joshua Preston</mail>
</author>

<author title="Edizione">
  	   <mail link="avenj@gentoo.org">Jon Portnoy</mail>
</author>
<author title="Traduzione">
  <mail link="doom@ngi.it"> 
Gianmaria Visconti</mail>
</author>

<abstract>
Lo scopo di questo HOWTO è di configurare coLinux per permettere
a una macchina Windows di eseguire Linux come un suo processo.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.4</version>
<date>2005-07-26</date>

<chapter>
<title>Introduzione</title>
<section>
<title>Cos'è coLinux?</title>
<body>

<p>
coLinux è un demone per Windows. Il suo scopo è di far girare il kernel Linux
come un thread nativo di Windows, ovvero di permettere l'esecuzione nativa di
Linux all'interno di Windows.
</p>

<p>
Il problema principale sono probabilmente le performance.  Le performance di
un'applicazione grafica sono basse, sebbene questa risulti utilizzabile,
mentre quelle di applicazioni non grafiche sono pari a quelle di un ambiente
Linux reale.  Nei fatti il tool "genlop" ha dimostrato che spesso i comandi
"emerge" sono tanto veloci in coLinux quanto in un ambiente Gentoo Linux
nativo.
</p>

<warn>
coLinux è ancora in fase sperimentale. Funziona generalmente bene, ma ci sono
diverse funzionalità non ancora supportate.
</warn>

<p>
Questa guida è basata sull'unione, in seguito completata, di due HOWTO
eccellenti, forniti nel <uri link="http://forums.gentoo.org">Forum di
Gentoo</uri> da IWBCMAN e janlaur.  I link a queste discussioni sono:
</p>

<ul>
  <li>
		<uri link="http://forums.gentoo.org/viewtopic.php?t=162420">Parte di
		IWBCMAN</uri>
	</li>
  <li>
		<uri link="http://forums.gentoo.org/viewtopic.php?t=163154">Parte di
		janlaur</uri>
	</li>
</ul>

</body>
</section>
</chapter>
<chapter>
<title>Installazione</title>
<section>
<title>Ottenere coLinux</title>
<body>

<warn>
Per l'uso di coLinux è necessario utilizzare un ambiente Windows 2000, 2003 o
XP (sia Home che Professional)
</warn>

<p>
E' necessario solamente ottenere lo snapshot piú recente di coLinux dal sito
del progetto <uri link="http://colinux.org/snapshots/">coLinux.org</uri>.
</p>

<note>
Durante la realizzazione di questa guida è stato utilizzato
coLinux-20040417.exe.
Gli snapshots includono diversi bugfixes, per questo se ne raccomanda l'uso.
</note>

<p>
Il file .EXE è un programma di installazione in grado di scaricare
un'immagine basilare di diverse distribuzioni da SourceForge (Gentoo / Debian
/ Fedora)
</p>

<p>
Lanciare il file .EXE, lasciando i valori di default, eccetto ovviamente la
scelta della distribuzione che si desidera utilizzare, che dev'essere
Gentoo.
</p>

<p>
L'immagine della distribuzione sarà scaricata nella cartella di installazione
e si chiamerà
<path>gentoo-i586-ext3-2g-deluxe.bz2</path>.
</p>

<p>
Questo nuovo file rappresenta una partizione virtuale, e contiene
un'installazione di Gentoo.  Questa installazione comprende un sistema
stage3, e inoltre XFree86, XFCE4, Firefox, GAIM, e xchat.  La partizione
virtuale è formattata col filesystem ext3.
</p>

<ul>
  <li>
    Estrarre il file in un qualunque drive di Windows che abbia almeno
    2 gigabyte di spazio libero
  </li>
  <li>Il path completo al file non deve contenere spazi vuoti</li>
  <li>Opzionalmente si può rimuovere il file .bz2 una volta estratto</li>
</ul>

<p>
Per la scompattazione occorre uno strumento adeguato in Windows, come Winrar.
Alla pagina <uri link="http://wiki.colinux.org/cgi-bin/NiceTools">"coLinux
Nice Tools page"</uri> si possono trovare gli strumenti per estrarre i file
immagine, e per creare le partizioni di swap virtuali.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Configurazione</title>
<section>
<title>Modificare il file di configurazione</title>
<body>

<p>
C'è un solo file di configurazione da modificare, lo si trova nella directory
di installazione col nome <path>default.colinux.xml</path>.  Lo si apra con
un editor di testo qualunque, e lo si modifichi come segue:
</p>

<pre caption="default.colinux.xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;colinux&gt;
    <comment>&lt;!-- Il path può differire leggermente --&gt;</comment>
    &lt;block_device index="0" path="\DosDevices\e:\gentoo-i586-ext3-2g-deluxe" enabled="true"&gt;&lt;/block_device&gt;
    &lt;bootparams&gt;root=/dev/cobd0&lt;/bootparams&gt;
    &lt;image path="vmlinux"&gt;&lt;/image&gt;
    <comment>&lt;!-- Modificare la dimensione secondo le proprie esigenze --&gt;</comment>
    &lt;memory size="256"&gt;&lt;/memory&gt;
		<comment>&lt;!-- Verificare il nome esatto del device TAP nelle
		connessioni di rete --&gt;</comment>
    &lt;network index="0" type="tap" name="TAP"&gt;&lt;/network&gt;
&lt;/colinux&gt;
</pre>

<p>
Cambiare il path, ponendolo uguale a quello in cui si trova l'immagine
scompattata, e quindi configurare quanta memoria si vuole
allocare a
coLinux.
</p>

</body>
</section>
<section>
<title>Configurazione della rete</title>
<body>

<p>
Per avviare coLinux bisogna fare un doppio-click sul file
colinux-daemon.exe. 
Prima di farlo, però se si intende utilizzare la rete, la si deve configurare.
Per farlo anzitutto bisogna installare la scheda di rete virtuale.
</p>

<ul>
  <li>
		Si selezioni "Installazione hardware" dal pannello di controllo di
		Windows e si clicki "Avanti" nella prima schermata
	</li>
  <li>
		Si Clicki "Si", quando richiesto se l'hardware sia già collegato e quindi
		"Avanti"
  </li>
  <li>
    Nella finestra seguente si scorra la lista fino in fondo e si selezioni
    "Aggiungi una nuova periferica hardware" e quindi "Avanti"
  </li> 
  <li>
		Si selezioni "Installa l'hardware selezionato manualmente da un elenco" e
		quindi si clicki "Avanti"
  </li>
  <li>Si selezioni "Schede di rete" e quindi "Avanti"</li>
  <li>
		Si clicki "Disco driver" e ci si posizioni nella cartella dove si è
		installato coLinux.  Si entri quindi nella cartella "netdriver", dove si
		trova un file.
  </li>
  <li>Lo si selezioni e si clicki "Apri"</li>
</ul>

<p>
Ora la scheda di rete virtuale è installata, la si può configurare come una
qualunque altra scheda di rete del sistema.
</p>

<ul>
  <li>
		Si apra il pannello di controllo di Windows, e quindi si entri in
		"Connessioni di rete"
	</li>
  <li>
	  Si clicki sulla propria connessione a internet, e quindi si clicki tenendo
	  premuto CTRL sulla nuova connessione di rete virtuale, ovvero quella che
	  usa TAP-Win32 Driver.
  </li>
  <li>
	  Si clicki col tasto destro, e si scelga "Connessioni con bridging".
	</li>
</ul>

<p>
Windows dovrebbe creare un bridge di rete. Se la connessione a internet è
attiva, anche la scheda di rete virtuale dovrebbe avere accesso a internet.
</p>

</body>
</section>
<section>
<title>Avvio</title>
<body>

<p>
Ora si può lanciare colinux-daemon.exe questo esegue il
boot in
un'installazione Gentoo basilare, con già diversi programmi
fondamentali a
disposizione, fra cui XFree86, XFCE4, GAIM e il kernel 2-4.26.
</p>

<p>
Dopo l'avvio si eseguano i seguenti passi:
</p>

<ul>
  <li>
	  Si effettui il login come root senza password, e la si
    cambi col comando passwd
	</li>
  <li>Si verifichi il funzionamento della rete</li>
  <li>
		Opzionalmente si può avviare sshd, per poter lavorare nell'ambiente
		coLinux usando ssh con Putty (scegliendo cygwin come tipo di terminale)
  </li>
</ul>

<p>
Per aggiornare il sistema si esegua:
</p>

<pre caption="Passi finali">
# <i>emerge --sync</i>
# <i>env-update &amp;&amp; source /etc/profile</i>
<comment>(se si desidera usare vnc)</comment>
# <i>emerge tightvnc</i>
</pre>

<p>
Ora bisogna configurare X. Si può copiare semplicemente il file
<path>/etc/X11/XF86Config</path> da un'installazione Linux funzionante
dentro coLinux
</p>

<note>
Si possono usare solo driver forniti dal server X
(ad esempio non nvidia-glx/kernel) e solo con profondità di colore 16 bit,
quindi bisogna modificare il file XF86Config, secondo queste limitazioni.
Se non si dispone di un file XF86Config funzionante, si può effettuare il boot
di una distribuzione live come Knoppix, e usare il file che questa crea.
</note>

<p>
Una volta fatto ciò si crei il file <path>~/.vnc/xstartup</path>:
</p>

<pre caption="Esempio di ~/.vnc/xstartup">
startxfce4 &amp;
</pre>

<p>
Ora si lanci il server VNC con le opzioni desiderate, verrà richiesta una
password per l'accesso al server stesso.
</p>

<pre caption="Avvio di vncserver">
$ <i>vncserver -geometry "1024x768" -depth 16</i>
</pre>

<p>
Ora si scarichi VNC per windows e si lanci il client VNC.  Come IP a cui
collegarsi si introduca quello dell'interfaccia di rete virtuale (ad esempio
192.168.0.X:1) e si specifichi la password scelta appena prima.  A questo
punto dovrebbe comparire XFCE4 sul proprio desktop
</p>

</body>
</section>
</chapter>
<chapter>
<title>Argomenti avanzati</title>
<section>
<title>Aggiunta di una partizione di swap</title>
<body>

<p>
E' necessario scaricare uno swapfile da <uri
link="http://gniarf.nerim.net/colinux/swap/">questo sito</uri> (il nome del
file indica la dimensione della partizione di swap virtuale).  Quindi lo si
estragga in un qualunque punto dove ci sia abbastanza spazio, e si aggiunga
quanto segue al file <path>default.colinux.xml</path>:
</p>

<pre caption="Aggiunta di un disco di SWAP">
		<comment>&lt;-- index="1" significa che il disco di swap sarà mappato con
		/dev/cobd1 --&gt;</comment>
    &lt;block_device index="1" path="\DosDevices\e:\swap-file" enabled="true"&gt;&lt;/block_device&gt;
</pre>

<p>
(Ri)avviare coLinux, e lanciare <c>mkswap</c>:
</p>

<pre caption="Setup della partizione di swap">
# <i>mkswap /dev/cobd1</i>
</pre>

<p>
Inoltre si deve modificare il file <path>/etc/fstab</path> aggiungendo quanto
segue:
</p>

<pre caption="Aggiunta a /etc/fstab">
/dev/cobd1	none	swap	sw	0 0
</pre>

<p>
Ora, senza riavviare, si attivi la partizione di swap.
</p>

<pre caption="Attivazione dello swap">
# <i>swapon -a</i>
</pre>

</body>
</section>
<section>
<title>Accedere a partizioni Linux esistenti da coLinux</title>
<body>

<p>
Il sito di coLinux fornisce un documento che copre le <uri
link="http://wiki.colinux.org/cgi-bin/GettingStarted">basi</uri> per
l'accesso a partizioni Linux esistenti.  La lettura aiuta a configurare
default.colinux.xml come segue:
</p>

<pre caption="Il nuovo default.colinux.xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;colinux&gt;
    &lt;block_device index="0" path="\DosDevices\e:\gentoo-i586-ext3-2g-deluxe" enabled="true"&gt;&lt;/block_device&gt;
    &lt;block_device index="1" path="\DosDevices\e:\swap-file" enabled="true"&gt;&lt;/block_device&gt;
    <comment>&lt;!-- Il path cambierà a seconda della situazione dei propri dischi --&gt;</comment>
    &lt;block_device index="2" path="\Device\Harddisk0\Partition5" enabled="true"&gt;&lt;/block_device&gt; 
    &lt;bootparams&gt;root=/dev/cobd0&lt;/bootparams&gt;
    &lt;image path="vmlinux"&gt;&lt;/image&gt;
    &lt;memory size="256"&gt;&lt;/memory&gt;
    &lt;network index="0" type="tap" name="TAP"&gt;&lt;/network&gt;
&lt;/colinux&gt;
</pre>


<p>
Bisogna (ri)avviare coLinux, per applicare le modifiche.  Sarà ora possibile
accedere a "\Device\Harddisk0\Partition5" tramite il device /dev/cobd2 in
coLinux.
</p>

<pre caption="Montaggio">
# <i>mount /dev/cobd2 /mnt/linux</i>
</pre>

<impo>
Si deve notare che questo meccanismo funziona solo per partizione che non sono
in uso da parte di Windows.
Per accedere a una partizione utilizzata da Windows, bisogna utilizzare 
smbfs.
</impo>

</body>
</section>
</chapter>
<chapter>
<title>Q&amp;A</title>
<section>
<title>Quali flag di USE bisogna impostare?</title>
<body>

<p>
Si impostino le stesse variabili di USE cheuserebberobero in un sistema nativo
</p>

</body>
</section>
<section>
<title>E' possibile utilizzare una connessione dial-up?</title>
<body>

<p>
Dovrebbe essere possibile utilizzare la connessione dial-up utilizzando
Internet Connection Sharing.
</p>

</body>
</section>
<section>
<title>Il kernel Linux può accedere all'hardware?</title>
<body>

<p>
coLinux emula ogni tipo di hardware fondamentale.  Ci sono dischi emulati,
rete, etc. Non è ancora disponibile invece l'accesso diretto a USB, schede
grafiche, o schede audio. Il supporto USB è in fase di sviluppo. 
</p>

</body>
</section>
<section>
<title>Esistono alternative a coLinux?</title>
<body>

<p>
Alcune alternative sono:
</p>

<ul>
<li><uri link="http://www.vmware.com/">VMWare</uri></li>
<li><uri link="http://bochs.sourceforge.net/">Bochs</uri></li>
</ul>

</body>
</section>
<section>
<title>coLinux funziona col kernel 2.6?</title>
<body>

<p>
Allo stato attuale non è possibile utilizzare il kernel 2.6, visto che coLinux
utilizza un kernel 2.4 patchato per poter utilizzare dispositivi emulati e
le risorse condivise con Windows.
</p>

</body>
</section>
<section>
<title>Perché non funziona X</title>
<body>

<p>
Non è ancora disponibile il supporto nativo a X. Si può utilizzare vnc come
illustrato in questa Guida, o in alternativa Cygwin-X11
</p>

</body>
</section>
</chapter>
<chapter>
<title>Conclusioni</title>
<section>
<body>

<p>
Le possibilità di coLinux sono molteplici, si possono utilizzare apache,
samba, dhcp, mail, distcc, nfs etc..  Fatta eccezione per il supporto ai
device, e l'accesso al disco non si nota la differenza fra un ambiente nativo
Linux, e un ambiente emulato all'interno di Windows.
</p>

</body>
</section>
</chapter>
</guide>
