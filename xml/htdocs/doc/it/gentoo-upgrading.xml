<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/gentoo-upgrading.xml,v 1.11 2006/02/01 23:14:50 so Exp $ -->

<guide link="/doc/it/gentoo-upgrading.xml" lang="it">
<title>Guida all'aggiornamento di Gentoo</title>

<author title="Autore">
  <mail link="greg_g@gentoo.org">Gregorio Guidi</mail>
</author>

<author title="Traduzione">
  <mail link="ludovico.poggioli@tiscali.it">Ludovico Poggioli</mail>
</author>

<abstract>
Questo documento spiega come una nuova release di Gentoo modifica le
installazioni esistenti.
</abstract>

<!-- Il contenuto di questo documento è rilasciato sotto la licenza CC-BY-SA -->
<!-- Vedi http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>2.15</version>
<date>2005-12-19</date>

<chapter>
<title>Gentoo e gli Aggiornamenti</title>
<section>
<title>Filosofia</title>
<body>

<p>
In Gentoo il concetto di aggiornamento differisce leggermente rispetto alle
altre distribuzioni Linux. Probabilmente è già noto che Gentoo non è mai
stato in linea con il metodo classico di aggiornare il software di una
distribuzione all'ultima versione: aspettare per una nuova versione, fare il
download, masterizzarla, inserire il cdrom e seguire le istruzioni per
l'aggiornamento.
</p>

<p>
Si è già a conoscenza di quanto questo metodo sia estremamente frustrante
per quegli utenti avanzati che vogliono sempre avere l'ultima versione del
software. Anche gli utenti avanzati di altre distribuzioni condividono gli
stessi sentimenti, dando popolarità a strumenti come apt-rpm, che rendono
possibili aggiornamenti frequenti e veloci. Tuttavia nessuna distribuzione è
più adatta di Gentoo a soddisfare questa categoria di utenti poichè Gentoo è
stata progettata sin dall'inizio attorno al concetto di aggionamenti rapidi,
incrementali.
</p>

<p>
Idealmente, una volta eseguita l'installazione non c'è più motivo di
preoccuparsi riguardo alla versione: Si devono solamente seguire le istruzioni
in <uri link="/doc/it/handbook/handbook-x86.xml?part=2&amp;chap=1">
Introduzione a Portage</uri> del <uri link="/doc/it/handbook/">
Manuale Gentoo</uri> che spiega come tenere aggiornato il proprio sistema.
Sebbene questa sia la norma, può accadere che talvolta gli sviluppatori
inseriscano, con una nuova versione, degli aggiornamenti che modificano il
cuore del sistema, e che richiedono richiedono interventi manuali da parte
dell'utente.
</p>

</body>
</section>
<section>
<title> Versioni e Profili</title>
<body>

<p>
Una domanda ricorrente riguardo al processo di rilascio di Gentoo è: "Perchè
rilasciare frequentemente nuove versioni, se non servono agli utenti per
aggiornare il software?". Ci sono varie ragioni:
</p>

<ul>
  <li>
    Una nuova versione significa nuovi CD di installazione con bug risolti e
    nuove feature.
  </li>
  <li>
    Una nuova versione fornisce un'inseme di pacchetti GRP aggiornato, così
    che gli utenti che scelgono "la via più veloce" per installare (stage3
    + pacchetti precompilati) non si trovino con un sistema già vecchio.
  </li>
  <li>
    Infine, una nuova versione potrebbe, di quando in quando, implementare
    delle caratteristiche incompatibili con le versioni precedenti.
  </li>
</ul>

<p>
Quando una nuova versione fornisce caratteristiche incompatibili, o un'insieme
di pacchetti e configurazioni  che modificano profondamente il comportamento
del sistema, diciamo che fornisce un nuovo <e>profilo</e>.
</p>

<p>
Un <e>profilo</e> è un'insieme di file di configurazione, allocati in una
sottodirectory di <path>/usr/portage/profiles/</path>, che descrive cose come
gli ebuilds che fanno parte dei pacchetti di <e>system</e>, le flag USE di
default, lo schema di default dei pacchetti virtuali, e l'architettura su
cui un sistema è installato.
</p>

<p>
Il profilo in uso è determinato dal link simbolico
<path>/etc/make.profile</path>, che punta alla sottodirectory di
<path>/usr/portage/profiles</path> nella quale sono contenuti i file
dei profili, ad esempio il profilo x86 di default per 2005.1 può essere
trovato in <path>/usr/portage/profiles/default-linux/x86/2005.1</path>. I file
contenuti nelle sottodirectory sono parte del profilo (e quindi condivise da
differenti sottoprofili). Questo è il motivo per cui vengono chiamati
<e>cascaded profiles</e>.
</p>

<p>
I profili resi obsoleti dai nuovi sono mantenuti in
<path>/usr/portage/profiles</path> come i nuovi, ma sono marcati come
deprecated. Quando ciò accade un file evidenziato come <path>deprecated</path>
viene inserito nella directory dei profili. Il contenuto di questo file è
il nome del profilo che deve essere aggiornato; portage usa questa informazione
per avvisarvi automaticamente del nuovo profilo esistente.
</p>

<p>
Ci sono vari motivi che giustificano la creazione di un nuovo profilo; il
rilascio di nuove versioni di pacchetti fondamentali (come ad esempio
<c>baselayout</c>, <c>gcc</c> o <c>glibc</c>) incompatibili con le versioni
precedenti, un cambiamento nelle flag USE di default, o nei pacchetti virtuali,
oppure un cambiamento nei parametri fondamentali del sistema.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Mantenersi aggiornati con le nuove versioni</title>
<section>
<title>Versioni senza cambiamento di profilo</title>
<body>

<p>
Se viene rilasciata una nuova versione di Gentoo che non include un nuovo
profilo, l'utente potrà stare tranquillo poichè non accade niente.
</p>

<p>
Se si procede all'aggiornamento dei pacchetti installati
<uri link="/doc/it/handbook/handbook-x86.xml?part=2&amp;chap=1">come spiegato
nel Manuale Gentoo</uri>, il sistema sarà esattamente come quello di chi ha
eseguito l'installazione utilizzando la nuova release.
</p>

</body>
</section>
<section>
<title>Versioni con cambio di profilo</title>
<body>

<p>
Se una nuova versione (come la 2005.1) introduce un nuovo profilo, l'utente ha
la possibilità di scegliere se effettuare o meno il passaggio al nuovo
profilo.
</p>

<p>
Naturalmente non si è obbligati a farlo, e si può continuare ad utilizzare il
vecchio profilo semplicemente continuando ad aggiornare i pacchetti installati
<uri link="/doc/it/handbook/handbook-x86.xml?part=2&amp;chap=1">
come spiegato nel Manuale Gentoo</uri>.
</p>

<p>
In ogni modo, Gentoo raccomanda fortemente la migrazione se il profilo viene
evidenziato come deprecated. Quando questo accade significa che gli
sviluppatori di Gentoo non pensano di supportare il profilo in futuro.
Utilizzando la tabella sottostante, si può velocemente controllare quali
profili sono attualmente supportati.
</p>

<p>
Se l'utente opta per la migrazione al nuovo profilo, potrebbe dover eseguire
manualmente l'aggiornamento. Il modo in cui effettuare l'aggiornamento potrebbe
variare molto da versione a versione, tutto dipende da quanto profondi saranno
i cambiamenti apportati dal nuovo profilo.
</p>

<p>
Nel caso più semplice l'utente deve solamente cambiare il link
<path>/etc/make.profile</path>, nel caso peggiore deve ricompilare il proprio
sistema da zero. La migrazione è solitamente spiegata nelle note di rilascio.
Potrete anche trovare <uri link="#instructions">istruzioni</uri> alla fine di
questa guida.
</p>

</body>
</section>
<section>
<title>Profili Supportati</title>
<body>

<p>
I seguenti profili sono ufficialmente supportati dagli sviluppatori Gentoo:
</p>

<table>
<tr>
  <th>Architettura</th>
  <th>Ultimi profili</th>
  <th>Altri profili supportati</th>
</tr>
<tr>
  <th>alpha</th>
  <ti>2005.0, 2005.0/2.4</ti>
  <ti></ti>
</tr>
<tr>
  <th>arm</th>
  <ti>2004.3</ti>
  <ti></ti>
</tr>
<tr>
  <th>amd64</th>
  <ti>2005.1, 2005.1/no-multilib</ti>
  <ti>2005.0, 2005.0/no-multilib, 2004.3</ti>
</tr>
<tr>
  <th>hppa</th>
  <ti>2005.0, 2005.0/2.4</ti>
  <ti>2004.3, 2004.2</ti>
</tr>
<tr>
  <th>ia64</th>
  <ti>2005.0</ti>
  <ti>2004.3</ti>
</tr>
<tr>
  <th>ppc</th>
  <ti>2005.1</ti>
  <ti>2005.0, 2004.3, 2004.0</ti>
</tr>
<tr>
  <th>mips</th>
  <ti>2005.0</ti>
  <ti>2004.2</ti>
</tr>
<tr>
  <th>s390</th>
  <ti>2004.3</ti>
  <ti></ti>
</tr>
<tr>
  <th>sparc</th>
  <ti>2005.1</ti>
  <ti>2005.0</ti>
</tr>
<tr>
  <th>x86</th>
  <ti>2005.1, 2005.1/2.4</ti>
  <ti>2005.0, 2005.0/2.4</ti>
</tr>

</table>

</body>
</section>
</chapter>

<chapter id="instructions">
<title>Istruzioni per l'aggiornamento del profilo</title>
<section>
<title>Aggiornamento a 2005.1</title>
<body>

<p>
Per aggiornare il sistema al profilo 2005.1, puntare il symlink
<path>/etc/make.profile</path> alla nuova posizione. Assicurarsi che
Portage sia aggiornato prima di 
effettuare la variazione.
</p>

<pre caption="Aggiornamento a 2005.1">
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/</i>&lt;selected profile&gt;<i> /etc/make.profile</i>
</pre>

<p>
<b>Tutte le architetture</b> - Non ci sono cambiamenti fondamentali in questo
profilo. Non ci sono azioni specifiche da intraprendere.
</p>

<p>
<b>ppc</b> - Con il rilascio del profilo 2005.1 , i profili ppc e ppc64 sono
stati riuniti e sono stati creati un certo numero di sottoprofili speficifi
per sottoarchitetture. Assicurarsi di scegliere il sottoprofilo corretto per
il proprio sistema per la migrazione al profilo 2005.1.
</p>

</body>
</section>
<section>
<title>Aggiornamento a 2005.0</title>
<body>

<p>
Con l'introduzione del profilo 2005.0, vare architetture hanno deciso di
definire profili addizionali. Si legga attentamente la descrizione di detti
profili prima di decidere per la migrazione ad uno di essi. La maggior parte
delle architetture scelgono ora di default il kernel del ramo 2.6 al posto del
ramo 2.4.
</p>

<p>
Alcune architetture richiedono di effettuare alcune azioni in più per
converire da un profilo ad un'altro. Se questo è il caso, troverete delle
guide passo-passo dai link della tabella.
</p>

<table>
<tr>
  <th>Profilo</th>
  <th>Descrizione</th>
  <th>Guida Specifica per l'Aggiornamento</th>
</tr>
<tr>
  <ti>default-linux/alpha/2005.0</ti>
  <ti>Profilo 2005.0 di default per Alpha 2005.0 con kernel 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/alpha/2005.0/2.4</ti>
  <ti>Profilo 2005.0 per Alpha 2005.0 con kernel 2.4</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/amd64/2005.0</ti>
  <ti>Profilo 2005.0 di default per AMD64 con kernel 2.6</ti>
  <ti>
    <uri
    link="/proj/en/base/amd64/howtos/index.xml?part=1&amp;chap=1#doc_chap1">
    Aggiornamento a 2005.0</uri>
  </ti>
</tr>
<tr>
  <ti>default-linux/amd64/2005.0/no-multilib</ti>
  <ti>Profilo 2005.0 per AMD64 per installazioni multilib-disabled</ti>
  <ti>
    <uri
    link="/proj/en/base/amd64/howtos/index.xml?part=1&amp;chap=1#doc_chap5">
    Aggiornamento a 2005.0</uri>
  </ti>
</tr>
<tr>
  <ti>default-linux/arm/2005.0</ti>
  <ti>Profilo 2005.0 di default per ARM con kernel 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/hppa/2005.0</ti>
  <ti>Profilo 2005.0 di default per HPPA con kernel 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/hppa/2005.0/2.4</ti>
  <ti>Profilo 2005.0 per HPPA con kernel 2.4</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/2005.0</ti>
  <ti>Profilo 2005.0 di default per MIPS</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/cobalt/2005.0</ti>
  <ti>Profilo 2005.0 specifico per Cobalt MIPS</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/mips64/n32/2005.0</ti>
  <ti>Profilo 2005.0 per piattaforme MIPS con supporto n32</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/mips64/ip28/2005.0</ti>
  <ti>Profilo 205.0 specifico per Indigo2 Impact 64-bit</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/mips64/2005.0</ti>
  <ti>Profilo 2005.0 per MIPS 64-bit</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/ppc/2005.0</ti>
  <ti>Profilo 2005.0 di default per PPC con kernel 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/ppc64/2005.0</ti>
  <ti>Profilo 2005.0 di Default per PPC64 con kernel 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/s390/2005.0</ti>
  <ti>Profilo 2005.0 di default per S390</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/sparc/sparc32/2005.0</ti>
  <ti>Profilo 2005.0 di default per Sparc 32-bit</ti>
  <ti></ti>
</tr>
<!-- http://dev.gentoo.org/~dsd/kernel-2.6.htm 
     No subprofiles for sparc
<tr>
  <ti>default-linux/sparc/sparc32/2005.0/2.6</ti>
  <ti>Profilo 2005.0 per Sparc 32-bit con kernel 2.6</ti>
  <ti></ti>
</tr>
-->
<tr>
  <ti>default-linux/sparc/sparc64/2005.0</ti>
  <ti>Profilo 2005.0 di default per Sparc 64-bit</ti>
  <ti></ti>
</tr>
<!-- http://dev.gentoo.org/~dsd/kernel-2.6.htm
     No subprofiles for sparc
<tr>
  <ti>default-linux/sparc/sparc64/2005.0/2.6</ti>
  <ti>Profilo 2005.0 per Sparc 64-bit con kernel 2.6</ti>
  <ti></ti>
</tr>
-->
<tr>
  <ti>default-linux/x86/2005.0</ti>
  <ti>Profilo 2005.0 di default con kernel 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/x86/2005.0/2.4</ti>
  <ti>Profilo 2005.0 per x86 con kernel 2.4</ti>
  <ti></ti>
</tr>
</table>

<p>
Per effettuare l'aggiornamento al profilo scelto, fate puntare il symlink
<path>/etc/make.profile</path> alla nuova posizione, Assicuratevi che il 
vostro Portage sia aggiornato prima di cambiare profilo!
</p>

<pre caption="Changing to a 2005.0 profile">
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/</i>&lt;selected profile&gt;<i> /etc/make.profile</i>
</pre>

<p>
Se state utilizzando un systema Linux 2.4 ma volete migrare ad un kernel 2.6,
assicuratevi di leggere la <uri link="/doc/en/migration-to-2.6.xml">Gentoo
Linux 2.6 Migration Guide</uri>.
</p>

</body>
</section>
<section>
<title>Aggiornamento a 2004.3</title>
<body>

<p>
Con l'introduzione dei profili 2004.3, gli utenti non vedranno grandi
modifiche ai loro sistemi (vedere sotto per i dettagli). Comunque sia, gli
sviluppatori di Gentoo hanno deciso di pubblicare questi nuovi profili e di
marcare come deprecati alcuni dei vecchi profili per accellerare l'adozione
degli <e>stacked profiles</e>, che sono in sostanza i profili che seguono il
nuovo layout della directory <path>/usr/portage/profiles</path>,
ad esempio, <path>/usr/portage/profiles/default-linux/x86/2004.3</path>
(supportato da Portage 2.0.51 o successivi).
</p>

<p>
Per effettuare l'aggiornamento al profilo 2004.3, fate puntare il symlink
<path>/etc/make.profile</path> alla nuova posizione:
</p>

<warn>
Non dimenticate di aggiornare Portage <e>prima</e> di cambiare il vostro
profilo!
</warn>

<pre caption="Aggiornare il symlink /etc/make.profile">
<comment>sostituite &lt;arch&gt; con la vostra architettura</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-linux/&lt;arch&gt;/2004.3 /etc/make.profile</i>
</pre>

<p>
<b>Tutte le architetture</b> - Come detto in precedenza, non ci sono grandi
cambiamenti introdotti da questo profilo. Comunque, va fatto notare che
<c>sys-apps/slocate</c> e <c>net-misc/dhcpcd</c> non sono più considerati
pacchetti di sistema. Questo significa che lanciando <c>emerge --depclean</c>,
Portage tenterà cancellarli dal sistema. Se si desiderano tali pacchetti, essi
andranno aggiunti a <path>/var/lib/portage/world</path> dopo il cambiamento
di profilo, o si dovrà utilizzare manualmente emerge per installarli.
</p>

<p>
<b>ppc</b> - <c>sys-fs/udev</c> è attualmente la scelta di default in luogo di
<c>sys-fs/devfs</c> per le nuove installazioni. Questo non avrà comunque
effetto per i sistemi già installati.
</p>

</body>
</section>
<section>
<title>Aggiornare Portage per il Supporto ai Cascading Profiles</title>
<body>

<p>
Anche se questa sezione non sembra integrarsi bene in questa quida
all'aggiornamento, e' abbastanza importante. Ogni profilo descitto
precedentemente richiede una versione di Portage che supporti i cascading
profiles. Tuttavia, alcuni profili considerati obsoleti non consentono
all'utente di aggiornare Portage, o nel caso che l'utente utilizzi un profilo
non piu' disponibile - ogni tentativo di aggiornare Portage non andra' a buon
fine.
</p>

<p>
Per risolvere questo problema, gli utenti possono creare un symlink temporaneo
al profilo <e>obsoleto</e>, che gli permettera' di aggiornare Portage,
dopodiche' potranno continuare con la procedura di aggiornamento descritta
in questa guida. Sostituire <c>&lt;arch&gt;</c> con l'architettura utilizzata:
</p>

<pre caption="Aggiornare Portage con il profilo obsolete">
# <i>rm /etc/make.profile</i>
# <i>cd /etc</i>
# <i>ln -sf ../usr/portage/profiles/obsolete/&lt;arch&gt; make.profile</i>
# <i>emerge -n '>=sys-apps/portage-2.0.51'</i>
</pre>

</body>
</section>
<section>
<title>Aggiornare a 2004.2</title>
<body>

<p>
Per effettuare l'aggiornamento al profilo 2004.2, fate puntare il symlink
<path>/etc/make.profile</path> alla nuova posizione:
</p>

<warn>
Non dimenticate di aggiornare Portage <e>prima</e> di cambiare il vostro
profilo!
</warn>

<pre caption="Aggiornare il symlink /etc/make.profile">
<comment>sostituite &lt;arch&gt; con la vostra architettura</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-linux/&lt;arch&gt;/2004.2 /etc/make.profile</i>
</pre>

<p>
<b>x86</b> - Questo profilo cambia l'implementazione X11 di default da
<c>x11-base/xfree</c> a <c>x11-base/xorg-x11</c>.Questa modifica tocca
solamente il valore di <e>default</e>, ed è rilevante solamente per coloro che
non hanno ancora installato un server X. Se l'utente ha già un server X
installato, questo cambiamento non comporterà niente; l'utente sarà libero di
cambiare da un server X a un altro esattamente come prima.
</p>

<p>
<b>amd64</b> - Non ci sono differenze fondamentali rispetto ai precedenti
profili, ne azioni specifiche da intraprendere.
</p>

</body>
</section>
<section>
<title>Aggiornare a 2004.0</title>
<body>

<p>
Per effettuare l'aggiornamento al profilo 2004.0, fate puntare il symlink
<path>/etc/make.profile</path> alla nuova posizione:
</p>

<pre caption="Aggiornare il symlink /etc/make.profile">
<comment>sostituite &lt;arch&gt; con la vostra architettura</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-&lt;arch&gt;-2004.0 /etc/make.profile</i>
</pre>

<p>
<b>Tutte le architetture</b> - Non ci sono differenze fondamentali rispetto
ai precedenti profili, ne azioni specifiche da
intraprendere.
</p>

</body>
</section>
<section>
<title>Aggiornare da profili precedenti di 1.4 a 1.4</title>
<body>

<p>
Le istruzioni per questo aggiornamento sono abbastanza
complesse, e possono essere consultate
<uri link="/doc/it/new-upgrade-to-gentoo-1.4.xml">qui</uri>.
</p>

</body>
</section>
</chapter>

</guide>
