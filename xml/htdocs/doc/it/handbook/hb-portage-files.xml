<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/handbook/hb-portage-files.xml,v 1.6 2006/03/16 21:17:23 so Exp $ -->

<sections>

<version>1.7</version>
<date>2005-06-27</date>

<section>
<title>I file del Portage</title>
<subsection>
<title>Direttive per la configurazione</title>
<body>

<p>
Portage usa le configurazioni predefinite memorizzate in <path>/etc/make.globals</path>.
Scorrendo questo file, si noterà che tutta la configurazione del Portage è
gestita da variabili. Quali sono queste variabili ed il loro significato
è descritto in seguito.
</p>

<p>
Dato che molte direttive di configurazione differiscono da architettura
ad architettura, Portage ha dei file di configurazione predefiniti che fanno 
parte del proprio profilo.
Il proprio profilo è indicato dal link simbolico <path>/etc/make.profile</path>; le configurazioni del Portage sono definite dai file in <path>make.defaults</path> del proprio profilo e dei profili parenti.
Verranno presi in considerazione i profili e la directory
<path>/etc/make.profile</path>.
</p>

<p>
Se si sta pianificando la modifica di una variabile di configurazione
<e>non</e> alterate <path>/etc/make.globals</path> o  <path>make.defaults</path>.
Usare invece <path>/etc/make.conf</path> che ha la precedenza sui file
precedenti. Un file di esempio che non viene preso in considerazione dal Portage, si trova in <path>/etc/make.conf.example</path>.  
</p>

<p>
Si può anche definire una variabile di configurazione del Portage come una
variabile ambiente, ma non è raccomandato.
</p>

</body>
</subsection>
<subsection>
<title>Informazioni specifiche sul profilo</title>
<body>

<p>
Si è già avuto a che fare con la directory <path>/etc/make.profile</path>.
Questa non è esattamente una directory ma un link simbolico ad un profilo,
di default uno all'interno di  <path>/usr/portage/profiles</path> anche
se potete crearne uno vostro e farlo puntare a questo.
Il profilo cui punta il link è il profilo al quale aderisce il sistema.
</p>

<p>
Un profilo contiene informazioni specifiche dell'architettura così come
una lista di pacchetti che appartengono al sistema che corrisponde a 
questo profilo, una lista di pacchetti che non girano su questo profilo
(o sono mascherati), ecc.
</p>

</body>
</subsection>
<subsection>
<title>Informazioni specifiche dell'utente</title>
<body>

<p>
Quando si vuole sovrascrivere il comportamento del Portage riguardo
l'installazione del software, si dovrnno editare file all'interno di
 <path>/etc/portage</path>. 
Si è incoraggiati ad usare i file all'interno di <path>/etc/portage</path> e
scoraggiati ad usare variabili ambiente.
</p>

<p>
All'interno di <path>/etc/portage</path> si possono creare i seguenti file:
</p>

<ul>
  <li>
    <path>package.mask</path> una lista di pacchetti che si vuole che il Portage
non installi
  </li>
  <li>
    <path>package.unmask</path> una lista di pacchetti che si vuole installare
anche se gli sviluppatori di Gentoo scoraggiano dal farlo
  </li>
  <li>
    <path>package.keywords</path> una lista di pacchetti che si vuole installare
anche se il pacchetto  non è stato trovato disponibile per l'architettura
del sistema
  </li>
  <li>
    <path>package.use</path> una lista di flag USE che si vuole usare per
certi pacchetti senza che l'intero sistema ne sia coinvolto 
  </li>
</ul>

<p>
Maggiori informazioni sulla directory  <path>/etc/portage</path> 
e la lista completa dei file che vi si possono creare, può essere
trovata nella pagina man del Portage:
</p>

<pre caption="Leggere la pagina man del Portage">
$ <i>man portage</i>
</pre>

</body>
</subsection>
<subsection>
<title>Modificare l'ubicazione dei file e delle directory del Portage</title>
<body>

<p>
Come menzionato precedentemente i file di configurazione non possono 
essere memorizzati in directory diverse da quelle predefinite.
Comunque, Portage usa molte altre ubicazioi per vari scopi: memorizzazione
del codice sorgente, directory di compilazione, albero del Portage, ...
</p>

<p>
Tutti questi scopi hanno ubicazioni predefinite ma che possono essere alterate
attraverso <path>/etc/make.conf</path>. 
Il resto di questo capitolo spiega quali sono le ubicazioni per scopi speciali
usate dal Portage e come alterare la loro collocazione nel filesystem.
</p>

<p>
Questo documento non deve essere usato come un riferimento. Se si desidera
avere una panoramica, fare riferimento alle pagine man del Portage e di
 <path>make.conf</path>:
</p>

<pre caption="Leggere le pagine man del Portage e del make.conf">
$ <i>man portage</i>
$ <i>man make.conf</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Ubicazione dei file</title>
<subsection>
<title>L'albero del Portage</title>
<body>

<p>
L'ubicazione predefinita per l'albero del Portage è <path>/usr/portage</path>.
Questo è definito dalla variabile PORTDIR. Se si vuole mettere l'albero del
Portage da qualche altra parte (alterando questa variabile), non ci si 
deve dimenticare di modificare il link simbolico <path>/etc/make.profile</path>
in accordo con la nuova ubicazione.
</p>

<p>
Se si altera la variabile PORTDIR, si possono voler modificare anche le seguenti
variabili in quanto non noteranno il cambio di PORTDIR (a causa del modo
di gestire le variabili del Portage): PKGDIR, DISTDIR, RPMDIR.
</p>

</body>
</subsection>
<subsection>
<title>Binari precompilati</title>
<body>

<p>
Anche se Portage non usa pacchetti precompilati di default, ha comunque
un supporto esteso anche per questi. Quando si chiede al Portage di usare
pacchetti precompilati, questi verranno cercati nella directory 
<path>/usr/portage/packages</path>. Questa ubicazione è definita
dalla variabile PKGDIR.
</p>

</body>
</subsection>
<subsection>
<title>Codice Sorgente</title>
<body>

<p>
Il codice sorgente delle applicazioni è memorizzato, di default, in <path>/usr/portage/distfiles</path>. Questa ubicazione è definita dalla variabile DISTDIR.
</p>

</body>
</subsection>
<subsection>
<title>File RPM</title>
<body>

<p>
Ancge se Portage non usa file RPM, è possibile generarli usando il
comando <c>ebuild</c> 
(vedere <uri link="?part=3&amp;chap=6">L'applicazione ebuild</uri>).
L'ubicazione di default per i file RPM è
<path>/usr/portage/rpm</path> ed è definita dalla variabile RPMDIR.
</p>

</body>
</subsection>

	 <subsection>
  	 <title>Portage Database</title>
  	 <body>
  	 
  	 <p>
Portage memorizza il proprio stato (quali pacchetti sono installati, che file appartengono ad un dato pacchetto, ...) in <path>/var/db/pkg</path>.
<e>Non</e> alterare questi file manualmente! Si potrebbe alterare la conoscenza che il Portage ha del proprio sistema.
  	 </p>
  	 
  	 </body>
  	 </subsection>
 <subsection>	
 	 <title>Portage Cache</title>	
 	 <body>	
 	 	
 	 <p>	
        La cache di Portage (con la data di modifica, i pacchetti virtuali,
l'informazione sull'albero delle dipendenze,...) viene memorizzata in
 	 <path>/var/cache/edb</path>. Questa locazione è realmente
una cache: la si può rimuovere se non si sta eseguendo nessuna applicazione
collegata al portage.
 	 </p>	
 	 	
 	 </body>	
 	 </subsection>
</section>


<section>
<title>Compilare il software</title>
<subsection>
<title>File temporanei</title>
<body>

<p>
I file temporanei del Portage sono memorizzati di default in <path>/var/tmp</path>. Questo è definito dalla variabile PORTAGE_TMPDIR.
</p>

<p>
Se si altera la variabile PORTAGE_TMPDIR, si potrebbe voler modificare anche le
seguenti variabili dato che non noteranno la modifica di PORTAGE_TMPDIR (a 
causa di come Portage gestisce le variabili): BUILD_PREFIX.
</p>

</body>
</subsection>
<subsection>
<title>Directory di compilazione</title>
<body>

<p>
Portage crea specifiche directory di compilazione per ogni pacchetto emerso
all'interno di
<path>/var/tmp/portage</path>. Questa ubicazione è definita dalla variabile BUILD_PREFIX.
</p>

</body>
</subsection>
<subsection>
<title>Ubicazione nel filesystem</title>
<body>

<p>
Di default Portage installa tutti i file sul filesystem corrente
(<path>/</path>), ma si può modificare questa definizione usando la variabile ambiante ROOT.  
</p>

</body>
</subsection>
</section>
<section>
<title>Caratteristiche di log</title>
<subsection>
<title>Ebuild Logging</title>
<body>

<p>
Portage può creare file di log per ebuild, ma solo quando la variabile PORT_LOGDIR è definita con una locazione che sia scrivibile dall'utente portage. Il valore predefinito per questa variabile è nullo.
</p>

</body>
</subsection>
</section>
</sections>
