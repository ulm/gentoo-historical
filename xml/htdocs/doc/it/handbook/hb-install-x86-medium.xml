<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/handbook/Attic/hb-install-x86-medium.xml,v 1.9 2005/10/30 15:19:26 m.mascherpa Exp $ -->

<sections>

<version>2.5</version>
<date>2005-10-09</date>

<section>
<title>Richieste Hardware</title>
<subsection>
<title>Introduzione</title>
<body>

<p>
Prima ancora di cominciare vengono elencate le richieste hardware
necessarie per installare Gentoo sulla propria macchina.
</p>

</body>
</subsection>
<subsection>
<title>Requisiti Hardware</title>
<body>

<table>
<tr>
  <th>CPU</th>
  <ti>i486 o successivo</ti>
</tr>
<tr>
  <th>Memoria</th>
  <ti>64 MB</ti>
</tr>
<tr>
  <th>Spazio su disco</th>
  <ti>1.5 GB (escluso lo swap)</ti>
</tr>
<tr>
  <th>Spazio per lo swap</th>
  <ti>Almeno 256 MB</ti>
</tr>
</table>

</body>
</subsection>
</section>
<section>
<title>Approcci all'installazione</title>
<subsection>
<title>Introduzione</title>
<body>

<p>
Gentoo Linux può essere installato utilizzando uno dei tre file <e>stage</e>.
Un file stage è un archivio compresso contenente un ambiente ridotto.
</p>

<ul>
  <li>
  Il file stage1 non contiene altro che un compilatore, Portage (il sistema di gestione
  del software di Gentoo) e un paio di altri pacchetti che servono a questi due.
   </li>
   <li>
   Un file stage2 contiene un sistema ridotto dal quale è possibile compilare
   tutte le altre applicazioni per ottenere un sistema Gentoo completo.
   </li>
   <li>
   Un file stage3 contiene un sistema minimo ma completo già utilizzabile.
   Manca solo delle applicazioni che ciascun utente preferisce scegliere
   in autonomia.
   </li>
</ul>

<p>
Per semplificare la scelta dello stage da usare vengono elencati i principali
vantaggi e svantaggi di ciascuna soluzione.
</p>

</body>
</subsection>
<subsection>
<title>Lo stage 1</title>
<body>

<p>
Lo <e>stage1</e> viene utilizzato quando si desidera costruire l'intero sistema
da zero.
</p>

<p>
Questo approccio consente di compilare personalmente tutti i pacchetti necessari
per il proprio sistema che solitamente vengono preparati dagli sviluppatori Gentoo.
E' il metodo migliore per chi desidera capire in profondità il funzionamento del sistema
e conoscere a fondo le maccaniche del boot e degli strumenti di sistema.
</p>

<p>
In ogni caso se non si desidera modificare le istruzioni contenute nello script
<path>bootstrap.sh</path> un approccio di questo genere non ha alcun particolare vantaggio.
</p>

<table>
<tr>
  <th>Stage1</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>
  Consente di avere completo controllo sulle opzioni di installazione,
  bootstrap ecectera.
  </ti>
</tr>
<tr>
  <th>+</th>
  <ti>Adatto ad utenti esperti o sviluppatori che sanno ciò che stanno facendo</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Impiega molto tempo a terminare l'installazione (è il metodo più lungo)</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Se non si desidera configurare le opzioni è semplicemente una perdita di tempo
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Necessita di una connessione ad Internet durante l'installazione
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>Lo stage 2</title>
<body>

<p>
Lo <e>stage2</e> viene utilizzato per compilare l'intero sistema da un ambiente
ridotto "semi-compilato".
</p>

<p>
Eseguire una installazione da stage2 significa compilare tutti i pacchetti di sistema utilizzando
le proprie impostazioni per <c>USE</c>, <c>CFLAGS</c> e <c>CXXFLAGS</c>. Ogni pacchetto
godrà dei vantaggi di performance secondo le impostazioni spcificate.
</p>

<p>
Purtroppo anche questo sistema è piuttosto lento e se non si ha intenzione di modificare
le <c>CFLAGS</c> e <c>CXXFLAGS</c> che sono state definite di default ha senso solo nel caso
che le prorie flag <c>USE</c> siano notevolmente differenti da qualle suggerite.
</p>

<table>
<tr>
  <th>Stage2</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>Non c'è bisogno di bootstrap</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Più rapido dello stage1</ti>
</tr>
<tr>
  <th>+</th>
  <ti>E' ancora possibile adattare la configurazione</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Non è la via più rapida di installare Gentoo</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Necessita di una connessione ad Internet durante l'installazione
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>A Stage3 Approach</title>
<body>

<p>
L'installazione da <e>stage3</e> contiene un sistema base Gentoo Linux precostruito. L'utente
deve solo compilare alcune applicazioni (logger di sistema supporto di rete..) prima di poter
utilizzare il nuovo sistema Gentoo.
</p>

<p>
La scelta dello stage3 consente la più rapida installazione possibile di
Gentoo Linux, ma implica anche l'accettazione di tutte le configurazioni
di default per il sistema (che comunque sono state accuratamente selezionate
per ottimizzare le performance e garantire la stabilità). Lo stage3 è
necessario anche per installare Gentoo tramite pacchetti precompilati o senza supporto di rete.
</p>

<table>
<tr>
  <th>Stage3</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>E' il metodo più veloce di avere un sistema base Gentoo Linux</ti>
</tr>
<tr>
  <th>-</th>
  <ti>E' ancora possibile ottimizzare il sistema</ti>
</tr>
</table>

<p>
E' interessante sapere che se si decide di utilizzare impostazioni di ottimizzazione
differenti dopo l'installazione di Gentoo, è possibile ricompilare il sistema
per intero con le nuove impostazioni. Lo stesso vale per qualsiasi modifica alle
<c>USE</c> flag. Portage è in grado di capire quali pacchetti siano da ricompilare.
</p>

</body>
</subsection>
</section>
<section>
<title>I CD di Installazione Gentoo</title>
<subsection>
<title>Introduzione</title>
<body>

<p>
I <e>CD di Installazione Gentoo</e> sono CD bootabili che contengono un ambiente Gentoo autonomo.
Consentono di bootare Linux da CD. Durante il processo di boot viene rilevato l'hardware
e vengono caricati i relativi driver. I CD vengono mantenuti dagli sviluppatori Gentoo.
</p>

<p>
Tutti i CD di Installazione consentono di bootare, configurare la rete, inizializzare le partizioni
e iniziare l'installazione di Gentoo da Internet. Al momento vengono resi disponibili
due CD di Installazione che sono entrambi adatti per l'installazione nel momento in cui si desideri
effettuare un'installazione con supporto di rete e installando le utlime versioni
dei pacchetti.
</p>

<p>
Se si desidera installare Gentoo senza supporto di rete è possibile utilizzare le
istruzioni comprese nel <uri link="2005.1/index.xml">manuale Gentoo 2005.1</uri>.
</p>

<p>
I due CD di Installazione sono:
</p>

<ul>
  <li>
    Il CD di Installazione Gentoo <e>Minimale</e>, un CD bootabile molto snello il cui unico scopo
    è di bootare il sistema, configurare la rete e continuare con l'installazione Gentoo.
  </li>
  <li>
    Il CD di Installazione Gentoo <e>Universale</e>, un CD bootabile con le medesime possibilità
    del CD di Installazione Minale. Inoltre contiene uno stage1 e diversi stage3, ottimizzati per le
    varie sottoarchitetture. 
  </li>
</ul>

<p>
Per seguire l'utente nella scelta del CD di Installazione è stata stilata una lista dei
principali vantaggi e svantaggi di ciascun CD di Installazione.
</p>

</body>
</subsection>
<subsection>
<title>CD di Installazione Gentoo Minimale</title>
<body>

<p>
L'immagine del CD di Installazione minimale si chiama <c>install-x86-minimal-2005.1.iso</c>
e occupa solo 52MB di spazio. E' possibile utilizzarlo per installare Gentoo ma
solo nel caso si disponga di una connessione ad Internet.
</p>

<table>
<tr>
  <th>CD di Installazione Minimale</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>Brevissimo download</ti>
</tr>
<tr>
  <th>+</th>
  <ti>
    E' possibile condurre l'installazione da uno qualsiasi degli stage scaricando il pacchetto dalla rete.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>
  Non contiene nè stage, nè snapshot di portage, nè pacchetti GRP, quindi non è adatto ad installazioni
  senza supporto di rete
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>CD di Installazione Gentoo Universale</title>
<body>

<p>
Il LIveCD universale è contenuto nell'immagine <c>install-x86-universal-2005.1.iso</c>
e occupa tutti i 650MB di un CD. E' possibile utilizzare questo CD di Installazione per
installare Gentoo, anche senza una connessione ad Internet.
</p>

<table>
<tr>
  <th>CD di Installazione Universale</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>Contiene tutto ciò di cui c'è bisogno; si può anche fare a meno della rete per l'installazione.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>Download enorme</ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>Altri CD</title>
<body>

<p>
E' possibile trovare il cosiddetto <e>Package CD</e> su uno dei mirror. Non si
tratta di un CD di Installazione ma di una ulteriore risorsa da utilizzare nel caso di
una installazione senza supporto di rete. Contiene pacchetti precompilati (i
cosiddetti GRP) che consentono di installare velocemente e con semplicità altre applicazioni
come OpenOffice.org, KDE, GNOME subito dopo l'installazione di Gentoo.
</p>

<p>
Se si ha intenzione di utilizzare il Package CD per installare rapidamente nuovo
software, è necessario accertarsi di aver scaricato il CD per la stessa
sotto architettura dello stage 3 utilizzato.
</p>


</body>
</subsection>
</section>
<section>
<title>Scaricare, masterizzare e bootare un CD di Installazione Gentoo</title>
<subsection>
<title>Scaricare e masterizzare i CD di Installazione</title>
<body>

<p>
Questa è la sezione che tratta l'utilizzo di un CD di Installazione Gentoo. Si inizia
scaricando uno dei differenti set di CD a cui si è accennato.
</p>

<p>
E' possibile scaricare qualsiasi CD di Installazione (e se si desidera anche un CD di pacchetti) da uno
dei <uri link="/main/en/mirrors.xml">mirror</uri>. Il CD di Installazione
risiedono nella directory <path>releases/x86/2005.1/installcd</path>.
</p>

<p>
All'interno della directory segnalata si possono trovare le cosiddette ISO. Si tratta di
immagini complete di CD che si possono masterizzare.
</p>

<p>
Nel caso che si voglia controllare l'integrità del file che si è scaricato,
è possibile controllare il checksum MD5 e confrontarlo con quelli forniti
(come <path>install-x86-minimal-2005.1.iso.md5</path>). Si può controllare
il checksum con il tool <c>md5sum</c> sotto Linux/Unix o con <uri
link="http://www.etree.org/md5com.html">md5sum</uri> per Windows.
</p>

<p>
Un altro modo di controllare la validità del file scaricato è di utilizzare
GnuPG per verificare la firma che viene fornita. (il file con estensione
<path>.asc</path>). Scaricare il file con la firma e procurarsi la chiave pubblica:
</p>

<pre caption="Otteneree la chiave pubblica">
$ <i>gpg --keyserver pgp.mit.edu --recv-keys 17072058</i>
</pre>

<p>
Verificare la firma:
</p>

<pre caption="Verifica della firma">
$ <i>gpg --verify &lt;file con la firma&gt; &lt;file iso scaricato&gt;</i>
</pre>

<p>
Per masterizzare l'immagine ISO scelta è necessario scegliere la modalità RAW.
Come impostarla dipende dal programma: seguono le istruzioni per <c>cdrecord</c> e
<c>K3B</c>; ulterori informazioni possono essere reperite nelle <uri
link="/doc/it/faq.xml#isoburning">FAQ Gentoo</uri>.
</p>

<ul>
  <li>
  Con cdrecord, scrivere semplicemente <c>cdrecord dev=/dev/hdc &lt;file ISO&gt;</c> (dove
  /dev/hdc è la periferica del masterizzatore).
  </li>
  <li>
    Con K3B, selezionare <c>Tools</c> &gt; <c>CD</c> &gt; <c>Burn Image</c>. Selezionare
    ora l'immagine da masterizzare e cliccare su <c>Start</c>.
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>Bootare i CD di Installazione</title>
<body>

<impo>
Si consiglia la lettura dell'intera
sezione prima di cominciare le operazioni in quanto non sempre c'è il tempo di rileggere
il manuale durante l'installazione.
</impo>

<p>
Una volta masterizzati i CD di installazione è tempo di bootare.
Riavviare il sistema ed entrare nel BIOS, di solito premendo i tasti DEL, F1
o ESC a seconda della marca del BIOS. All'interno del BIOS cambiare l'ordine del
boot in modo tale che il CD-ROM preceda l'hard disk. Spesso questa opzione
si trova sotto "CMOS Setup". Nella maggior parte dei casi saltare questo
passo porta a non poter bootare direttamente da CD.
</p>

<p>
Inserire il CD di installazione nel lettore CD-ROM e riavviare il sistema.
Dovrebbe comparire una graziosa schermata con il logo di Gentoo Linux. A questo
punto, premendo invio è possibile far partire il processo di boot con le
opzioni di default oppure far bootare il CD di Installazione con opzioni personalizzate
specificando un kernel seguito dalle opzioni desiderate e premendo invio.
</p>

<p>
Vengono forniti diversi kernel sui CD di Installazione. Quello di default è <c>gentoo</c>.
Esistono altri kernel per esigenze hardware specifiche
e la variante <c>-nofb</c> che disabilita il framebuffer.
</p>

<p>
Di seguito è possibile consultare una breve descrizione per ognuno dei kernel disponibili:
</p>

<table>
<tr>
  <th>Kernel</th>
  <th>Descrizione</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>Kernel 2.6 di default con supporto per CPU multiple</ti>
</tr>
<tr>
  <ti>gentoo-nofb</ti>
  <ti>Come <c>gentoo</c> ma senza supporto framebuffer</ti>
</tr>
<tr>
  <ti>memtest86</ti>
  <ti>Avvia un controllo della memoria RAM</ti>
</tr>
</table>

<p>
E' possibile anche selezionare opzioni per il kernel. Si tratta di direttive
particolari che possono essere attivate o meno a piacere. La seguente lista
descrive tutte le opzioni del kernel disponibili quando si preme F2.
</p>

<pre caption="Opzioni disponibili per il kernel scelto">
- agpgart       carica agpgart (da utilizzare in caso di problemi con la scheda grafica)
- acpi=on       carica il supporto ACPI
- ide=nodma     disabilita a forza il DMA (da usare nel caso di malfunzionamenti)
- doscsi        ricerca periferiche scsi (disabilita alcune schede ethernet)
- dopcmcia      avvia il servizio pcmcia per i cdrom PCMCIA
- nofirewire    disabilita il supporto firewire in initrd (per cdroms firewire, ecc)
- nokeymap      disabilita la selezione della tastiera per configurazione non US
- docache       memorizza in cache l'ambiente consentendo di smontare /mnt/cdrom
- nodetect      disabilita l'avvio di hwsetup/kudzu e hotplug
- nousb         disabilita il modulo usb da initrd e disabilita hotplug
- nodhcp        dhcp non viene avviato nel caso si rilevi un nic
- nohotplug     disabilita il caricamento di hotplug
- noapic        disabilita apic (da provare nel caso di problemi hardware)
- noevms        disabilita il caricamento dei moduli EVMS2
- nolvm2        disabilita il caricamento dei moduli LVM2
- hdx=stroke    consente di partizionare il drive anche nel caso che il BIOS non
		supporti dischi fissi grandi
- noload=module1,[module2,[...]]
                disabilita il caricamento di specific moduli
</pre>

<p>
Adesso è possibile bootare il CD selezionando il kernel (se non volete utilizzare
quello di default) e le opzioni di boot. Ad esempio ecco come bootare il kernel
<c>gentoo</c>, con il parametro <c>dopcmcia</c>:
</p>

<pre caption="Bootare un CD di Installazione">
boot: <i>gentoo dopcmcia</i>
</pre>

<p>
Si dovrebbe presentare ora un altra schermata con una barra che indica lo svolgersi delle operazioni.
Se si sta installando GEntoo su un sistema privo di tastiera statunitense, assicurarsi
di premere Alt-F1 per passare alla modalità testuale e seguire le operazioni. Se non viene selezionato
nulla, dopo 10 secondi viene automaticamente scelta la tastiera statunitense ed il
boot continua.
Una volta completato il processo di boot si è automaticamente nell'ambiente
Live di Gentoo come &quot;root&quot;, l'utente amministratore. Ci dovrebbe essere
un prompt di root a schermo (&quot;#&quot;) e dovrebbe essere possibile passare
ad altre console premendo Alt-F2, Alt-F3 e Alt-F4 e tornare alla precedente
premendo Alt-F1.
</p>

<p>
Continuare ora con la <uri link="#hardware">Configurazione dell'Hardware</uri>.
</p>

</body>
</subsection>
<subsection id="hardware">
<title>Configurazione dell'hardware</title>
<body>

<p>
Al momento del boot il CD prova a rilevare tutte le periferiche hardware
e caricare i corrispondenti moduli del kernel di supporto. Nella grande
maggior parte dei casi l'operazione va a buon fine. A volte però
potrebbero non essere caricati tutti i moduli necessari. Se la rilevazione
PCI ha saltato qualche periferica, è necessario caricare manualmente
il modulo corrispondente.
</p>

<p>
Nel seguente esempio si prova a caricare il modulo <c>8139too</c> (che supporta
un certo tipo di interfacce di rete):
</p>

<pre caption="Caricamento dei moduli del kernel">
# <i>modprobe 8139too</i>
</pre>

<p>
Se si necessita del supporto PCMCIA è possibile avviare lo script initm <c>pcmcia</c>:
</p>

<pre caption="Avviare lo script initi di PCMCIA">
# <i>/etc/init.d/pcmcia start</i>
</pre>

</body>
</subsection>
<subsection>
<title>Opzionale: Ottimizzazione  delle performance dell'hard disk</title>
<body>

<p>
Alcuni utenti esperti potrebbero voler ottimizzare le performance del
proprio hard disk tramite <c>hdparm</c>. Con le opzioni <c>-tT</c> è possibile
testare le performance del proprio disco (eseguire il test alcune volte
per avere risultati più precisi):
</p>

<pre caption="Test delle performance del disco">
# <i>hdparm -tT /dev/hda</i>
</pre>

<p>
Per l'ottimizzazzione è possibile utilizzare uno dei seguenti esempi
(o una configurazione personalizzata) che usano <path>/dev/hda</path>
come disco (sostituirlo con il proprio):
</p>

<pre caption="Ottimizzazione delle performance del disco">
<comment>Attivare il DMA:</comment>
# <i>hdparm -d 1 /dev/hda</i>
<comment>Attivare il DMA e altre opzioni sicure di ottimizzazione:</comment>
# <i>hdparm -d 1 -A 1 -m 16 -u 1 -a 64 /dev/hda</i>
</pre>

</body>
</subsection>
<subsection id="useraccounts">
<title>Opzionale: Account utente</title>
<body>

<p>
Se si pensa di dare accesso ad altri al proprio ambiente di installazione o si desidera
chattare usando <c>irssi</c> senza i privilegi di amministrazione per motivi di sicurezza,
è necessario creare gli opportuni account utente e cambiare la
password di root.
</p>

<p>
Per cambiare la password di root utilizzare l'utility <c>passwd</c>:
</p>

<pre caption="Cambiare la password di root">
# <i>passwd</i>
New password: <comment>(Inserire la nuova password)</comment>
Re-enter password: <comment>(Inserire nuovamente la nuova password)</comment>
</pre>

<p>
Per creare un account utente è necessario inserire i suoi dati seguiti
dalla sua password. E' possibile utilizzare  <c>useradd</c> e <c>passwd</c>
per farlo, come mostra il prossimo esempio in cui si crea l'utente
&quot;john&quot;.
</p>

<pre caption="Creare un account utente">
# <i>useradd -m -G john</i>
# <i>passwd john</i>
New password: <comment>(Inserire la password di john)</comment>
Re-enter password: <comment>(Inserire nuovamente la password di john)</comment>
</pre>

<p>
E' possibile dunque cambiare utente da root al nuovo utente tramite
<c>su</c>:
</p>

<pre caption="Cambiare utente">
# <i>su john -</i>
</pre>

</body>
</subsection>
<subsection>
<title>Opzionale: Consultare la documentazione durante l'installazione</title>
<body>

<p>
Se si desidera visualizzare il manuale Gentoo (da CD o online) durante l'installazione,
bisogna assicurarsi di aver creato un account utente (consultare la sezione
<uri link="#useraccounts">Opzionale: Account utente</uri>), premere poi <c>Alt-F2</c> per passare
ad un nuovo terminale ed inserire le credenziali.
</p>

<p>
Per consultare la documentazione disponibile sil CD è possibile utilizzare
<c>links2</c> così:
</p>

<pre caption="Visualizzare la documentazione sul CD">
# <i>links2 /mnt/cdrom/docs/html/index.html</i>
</pre>

<p>
E' in ogni caso preferibile consultare il manuale online, visto che sarà
più aggiornato di quello disponibile sul CD. E' possibile visualizzarlo con <c>links2</c>
, ma solo dopo aver completato le fasi descritte nel capitolo riguardante la
<e>Configurazione di rete</e> (in caso contrario potrebbe non essere disponibile la connessione):
</p>

<pre caption="Visualizzare la documentazione online">
# <i>links2 http://www.gentoo.org/doc/en/handbook/handbook-x86.xml</i>
</pre>

<p>
E' possibile ora tornare al terminale originale premendo <c>Alt-F1</c>.
</p>

</body>
</subsection>
<subsection>
<title>Opzionale: Avviare un demone SSH</title>
<body>

<p>
Se si desidera consentire ad altri utenti l'accesso al pc durante
l'installazione di Gentoo (magari perchè qualcuno di essi potrebbe
essere di aiuto o addirittura condurre personalmente l'installazione),
è necessario creare un account per ciascuno di essi o condividere
con loro la password di root (<e>solo se si confida pienamente</e> in
tale utente).
</p>

<p>
Per avviare il demone SSH, eseguire il seguente comando:
</p>

<pre caption="Avviare il demone SSH">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
Per utilizzare sshd è però prima necessario configurare la rete.
Passare ora al capitolo riguardante la <uri 
link="?part=1&amp;chap=3">Configurazione della rete</uri>.
</p>

</body>
</subsection>
</section>
</sections>
