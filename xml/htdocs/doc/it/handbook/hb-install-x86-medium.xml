<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/handbook/Attic/hb-install-x86-medium.xml,v 1.2 2004/05/22 17:55:51 mush Exp $ -->

<sections>
<section>
<title>Richieste Hardware</title>
<subsection>
<title>Introduzione</title>
<body>

<p>
Prima ancora di cominciare vengono elencate le richieste hardware
necessarie per installare Gentoo sulla propria macchina.
</p>

</body>
</subsection>
<subsection>
<title>L'architetture x86</title>
<body>

<ul>
<li>
E' necessario almeno 1 Gb di spazio su disco
</li>
<li>
  Se non si desidera usare pacchetti precompilati sono necessari almeno  300 Mb di memoria (RAM +
  swap)
</li>
<li>
C'è bisogno almeno di un
processore 486 e almeno 64Mb di memoria
</li>
</ul>

</body>
</subsection>
</section>
<section>
<title>La scelta</title>
<subsection>
<title>Introduzione</title>
<body>

<p>
A questo punto è tempo di scegliere la modalità con cui condurre
l'installazione. Esistono varie alternative e tecniche differenti, ma il risultato
è sempre un sistema base Gentoo.
</p>

<p>
I metodi di installazione descritti sono:
</p>

<ul>
<li>I LiveCD Gentoo Minimi</li>
<li>I LiveCD Gentoo Universali</li>
</ul>

<p>
Ogni via presenta vantaggi e svantaggi. Vengono elencati tutti i
pro e i contro di ogni soluzione in modo da disporre di tutta
l'informazione necessaria per effettuare una decisione oculata. Ma prima
di continuare biosogna spiegare cosa siano i tre Stage
dell'installazione.
</p>

</body>
</subsection>
<subsection>
<title>I tre Stage</title>
<body>

<p>
Gentoo Linux può essere installato tramite uno dei tre <e>stage</e>, che sono archivi tar.
La scelta di uno dei tre dipende da quanto del sistema si desidera compilare personalmente.
Lo <e>stage1</e> viene utilizzato quando si desidera fare il bootstrap e compilare tutto
il sistema da zero. Lo <e>stage2</e> serve per compilare l'intero sistema da uno stato
di semi-compilazione dopo il bootstrap. Lo <e>stage3</e> invece contiene già un sistema
Gentoo di base compilato in precedenza. Come viene spiegato in seguito è anche possibile
installare Gentoo senza compilare nulla (tranne il kernel). Se si preferisce quest'ultima strada
è possibile utilizzare lo <e>stage3</e>.
</p>

<p>
Che stage scegliere?
</p>

<p>
Iniziare dallo <e>stage1</e> consente di avere un controllo totale sui parametri
di ottimizzazione e sulle funzionalità opzionali che possono essere attivate sul sistema.
Questo è ciò che rende lo <e>stage1</e> un ottimo strumento di installazione per gli utenti esperti
che sanno perfettamente ciò che stanno facendo. E' anche un comodo metodo per coloro
che desiderino conoscere meglio il funzionamento di Gentoo Linux.
</p>

<table>
<tr>
  <th>Stage1</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>
  Consente di avere completo controllo sulle opzioni di ottimizzazione e
  sull' eventuale installazione del supporto a funzionalità aggiuntive
  </ti>
</tr>
<tr>
  <th>+</th>
  <ti>Adatto ad utenti esperti che sanno ciò che stanno facendo</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Consente di apprendere molto del funzionamento interno di Gentoo</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Impiega molto tempo a terminare l'installazione</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Se non si desidera configurare le opzioni è semplicemente una perdita di tempo
  </ti>
</tr>
</table>

<p>
Lo <e>Stage2</e> evita all'utente il processo di bootstrap, il che è un vantaggio se
le opzioni di ottimizzazione scelte per lo <e>stage2</e> sono già soddisfacenti per il sistema.
</p>

<table>
<tr>
  <th>Stage2</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>Non c'è bisogno di bootstrap</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Più rapido dello stage1</ti>
</tr>
<tr>
  <th>+</th>
  <ti>E' ancora possibile adattare la configurazione</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Non è possibile configurare ogni parametro come nello stage1</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Non è la via più rapida di installare Gentoo</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Bisogna accettare le ottimizzazioni già presenti nel bootstrap</ti>
</tr>
</table>

<p>
La scelta dello <e>stage3</e> consente la più rapida installazione possibile di
Gentoo Linux, ma implica anche l'accettazione di tutte le configurazioni
di default per il sistema (che comunque sono state accuratamente selezionate
per ottimizzare le performance e garantire la stabilità). Lo <e>stage3</e> è
necessario anche per installare Gentoo tramite pacchetti precompilati.
</p>

<table>
<tr>
  <th>Stage3</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>E' il metodo più veloce di avere un sistema base Gentoo Linux</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Non è possibile adattare il sistema, è già compilato</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Non si può vantarsi di aver usato lo stage1 o lo stage2</ti>
</tr>
</table>

<p>
E' interessante sapere che se si decide di utilizzare impostazioni di ottimizzazione
differenti dopo l'installazione di Gentoo, è possibile ricompilare il sistema
per intero con le nuove impostazioni.
</p>

<p>
Seguono ora i metodi disponibili per l'installazione.
</p>

</body>
</subsection>
<subsection>
<title>LiveCD Gentoo</title>
<body>

<p>
I <e>LiveCD Gentoo</e> sono CD bootabili che contengono un ambiente Gentoo autonomo.
Consentono di bootare Linux da CD. Durante il processo di boot viene rilevato l'hardware
e vengono caricati i relativi driver. I CD vengono mantenuti dagli sviluppatori Gentoo.
</p>

<p>
Tutti i LiveCD consentono di bootare, configurare la rete, inizializzare le partizioni
e iniziare l'installazione di Gentoo da Internet. Alcuni CD però
contengono anche tutti i sorgenti necessari o anche i pacchetti binari necessari per
portare a termine l'installazione senza la rete.
</p>

<p>
Si espongono ora i contenuti dei LiveCD.
</p>

</body>
</subsection>
<subsection>
<title>LiveCD Gentoo Minimo</title>
<body>

<p>
Si tratta di un CD bootabile molto snello con l'unico obiettivo di bootare il sistema,
preparare il supporto di rete e continuare l'installazione Gentoo. Non contiene
stage (o in alcuni casi contiene solo lo stage1), pacchetti di sorgenti o precompilati.
Ad esempio l'immagine x86 di questo LiveCD può essere reperita nella directory
<path>universal</path> con il nome <c>install-x86-minimal-2004.0.iso</c>.
</p>

<table>
<tr>
  <th>LiveCD Minimo</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>Brevissimo download</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Adatto ad un'intera architettura</ti>
</tr>
<tr>
  <th>+</th>
  <ti>
    E' possibile condurre l'installazione da uno qualsiasi degli stage scaricando il pacchetto dalla rete.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>
  Non contiene nè stage, nè snapshot di portage, nè pacchetti GRP, quindi non è adatto ad installazioni
  senza supporto di rete
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>LiveCD Gentoo Universale</title>
<body>

<p>
Il liveCD Gentoo Universale è un CD bootabile adatto all'installazione di Gentoo senza
supporto di rete. Contiene uno stage1 e diversi stage3 (ottimizzati per le varie
sottoarchitetture). Ad esempio l'immagine x86 di questo CD può essere trovata nella
directory <path>universal</path> con il nome <c>install-x86-universal-2004.0.iso</c>.
</p>

<p>
Osservando più attentamente la directory <path>livecd</path> si può notare che
alcune architetture dispongono di un <e>Gentoo Package CD</e>. Questo CD,
non bootabile, contiene solo pacchetti precompilati e può essere utilizzato per installare
software in seguito all'installazione di Gentoo. Per l'installazione di Gentoo è
necessario solo il LiveCD Universale, ma se si desidera OpenOffice.org, Mozilla, KDE, GNOME
eccetera senza doverli compilare, è necessario anche il CD con i pacchetti.
A desempio la sottoarchitettura Athlon-XP disponde di un CD di pacchetti
denominato <c>packages-athlon-xp-2004.0.iso</c> che si trova
nella sottodirectory <path>athlon-xp</path>.
</p>

<table>
<tr>
  <th>LiveCD Universale e CD di pacchetti</th>
  <th>Pro e Contro</th>
</tr>
<tr>
  <th>+</th>
  <ti>Ottimizzato per la propria architettura e sottoarchitettura</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Fornisce pacchetti precompilati per una rapida installazione di Gentoo</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Contiene tutto ciò di cui c'è bisogno; si può anche fare a meno della rete per l'installazione.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>Download enorme</ti>
</tr>
</table>

</body>
</subsection>
</section>
<section>
<title>Scaricare, masterizzare e bootare un LiveCD Gentoo</title>
<subsection>
<title>Scaricare e masterizzare i LiveCD</title>
<body>

<p>
Questa è la sezione che tratta l'utilizzo di un LiveCD Gentoo. Si inizia
scaricando uno dei differenti set di CD a cui si è accennato.
</p>

<p>
E' possibile scaricare qualisasi LiveCD (e se si desidera anche un CD di pacchetti) da uno
dei <uri link="/main/en/mirrors.xml">mirror</uri>. Il LiveCD e i CD di pacchetti
risiedono nella directory <path>releases/x86/2004.0/livecd</path>.
</p>

<warn>
Il CD di pacchetti non è un LiveCD, anche se è collocato nella directory
<path>livecd/</path>. Non è possibile bootare da un CD di pacchetti.
</warn>

<p>
All'interno della directory segnalata si possono trovare le cosiddette ISO. Si tratta di
immagini complete di CD che si possono masterizzare.
</p>

<p>
Nel caso che si voglia controllare l'integrità del file che si è scaricato,
è possibile controllare il checksum MD5 e confrontarlo con quelli forniti
(come <path>livecd-x86-cd1-20031029.iso.md5</path>). Si può controllare
il checksum con il tool <c>md5sum</c> sotto Linux/Unix o con <uri
link="http://www.md5summer.org">md5summer</uri> per Windows.
</p>

<note>
Controllare le descrizioni dei CD su <uri link="http://store.gentoo.org">Gentoo
Store</uri> per sapere quale LiveCD o stage è necessario per una particolare CPU.
Un errore comune è scegliere un LiveCD per una CPU più recente di quella in uso
(come "athlon-xp" per un normale AMD Athlon).
</note>

<p>
Per masterizzare l'immagine scelta è necessario scegliere la modalità RAW.
Come impostarla dipende dal programma, ecco alcuni esempi su popolari programmi
di masterizzazione:
</p>

<ul>
  <li>
  Con Easy CD Creator selezionare <c>File</c>, <c>Record CD
    from CD image</c>. Cambiare ora il <c>Tipo di file</c> a <c>ISO image
    file</c>. Cercare poi il file ISO e cliccare su <c>Open</c>. Cliccando poi su
    <c>Start recording</c> si dà inizio alla scrittura sul CD-R.
  </li>
  <li>
  Con Nero Burning ROM, selezionare <c>File</c>, <c>Burn CD image</c>. Selezionare il tipo di
  file a <c>*.*</c> e cercare il file ISO. Le versioni di Nero più vecchie potrebbero non
  riconoscere il formato, confermare comunque. Nella schermata successiva selezionare i seguenti parametri:
    <ul>
      <li>Type of image: <c>Data Mode 1</c></li>
      <li>Block size: <c>2048 bytes</c></li>
      <li>File precursor and length of the image trailer: <c>0 bytes</c></li>
      <li>Scrambled: <c>no</c></li>
      <li>Swapped: <c>no</c></li>
    </ul>
    Adesso cliccare su <c>OK</c> e <c>Burn</c>
  </li>
  <li>
  Con cdrecord, scrivere semplicemente <c>cdrecord dev=/dev/hdc</c> (dove
  /dev/hdc è la periferica del masterizzatore) seguito dal path del file ISO.
  </li>
  <li>
    Con K3B, selezionare <c>Tools</c> &gt; <c>CD</c> &gt; <c>Burn Image</c>. Selezionare
    ora l'immagine da masterizzare e cliccare su <c>Start</c>.
  </li>
</ul>

<p>
Le sezioni seguenti trattano di come bootare il LiveCD per ogni architettura
specifica. Assicurersi di scegliere la sezione corretta per la propria.
</p>

</body>
</subsection>
<subsection>
<title>Bootare i LiveCD</title>
<body>

<impo>
Si consiglia la lettura dell'intera
sezione prima di cominciare le operazioni in quanto non sempre c'è il tempo di rileggere
il manuale durante l'installazione.
</impo>

<p>
Una volta masterizzati i CD di installazione è tempo di bootare.
Riavviare il sistema ed entrare nel BIOS, di solito premendo i tasti DEL, F1
o ESC a seconda della marca del BIOS. All'interno del BIOS cambiare l'ordine del
boot in modo tale che il CD-ROM preceda l'hard disk. Spesso questa opzione
si trova sotto "CMOS Setup". Nella maggior parte dei casi saltare questo
passo porta a non poter bootare direttamente da CD.
</p>

<p>
Inserire il CD di installazione nel lettore CD-ROM e riavviare il sistema.
Dovrebbe comparire una graziosa schermata con il logo di Gentoo Linux. A questo
punto, premendo invio è possibile far partire il processo di boot con le
opzioni di default oppure far bootare il LiveCD con opzioni personalizzate
specificando un kernel seguito dalle opzioni desiderate e premendo invio.
</p>

<p>
Vengono forniti diversi kernel sui LiveCD. Quello di default è <c>gentoo</c>.
Altri kernel disponibili sono <c>smp</c>, che attiva il supporto per sistemi
con più CPU e la variante <c>-nofb</c> che disabilita il framebuffer.
</p>

<p>
Di seguito è possibile consultare una breve descrizione per ognuno dei kernel disponibili:
</p>

<table>
<tr>
  <th>Kernel</th>
  <th>Descrizione</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>Kernel di default con supporto framebuffer</ti>
</tr>
<tr>
  <ti>smp</ti>
  <ti>Kernel con supporto per CPU multiple</ti>
</tr>
<tr>
  <ti>gentoo-nofb</ti>
  <ti>Come <c>gentoo</c> ma senza supporto framebuffer</ti>
</tr>
<tr>
  <ti>smp-nofb</ti>
  <ti>Come <c>smp</c> ma senza supporto framebuffer</ti>
</tr>
</table>

<note>
Alcuni LiveCD forniscomo altri kernel o non forniscono quelli descritti in questo
documento. Per avere la lista dei kernel disponibili al boot è sufficiente
premere F1 alla schermata iniziale.
</note>

<p>
E' possibile anche selezionare opzioni per il kernel. Si tratta di direttive
particolari che possono essere attivate o meno a piacere. La seguente tabella
descrive tutte le opzioni del kernel disponibili.
</p>

<table>
<tr>
  <th>Opzione del Kernel</th>
  <th>Descrizione</th>
</tr>
<tr>
  <ti>acpi</ti>
  <ti>Attiva il supporto ACPI</ti>
</tr>
<tr>
  <ti>doataraid</ti>
  <ti>Attiva il supporto per dispositivi ATA RAID</ti>
</tr>
<tr>
  <ti>dofirewire</ti>
  <ti>Attiva il supporto per dispositivi FireWire</ti>
</tr>
<tr>
  <ti>dokeymap</ti>
  <ti>Chiede all'utente il tipo di tastiera (default: us)</ti>
</tr>
<tr>
  <ti>dopcmcia</ti>
  <ti>Attiva il supporto PCMCIA</ti>
</tr>
<tr>
  <ti>doscsi</ti>
  <ti>Attiva il supporto per periferiche SCSI</ti>
</tr>
<tr>
  <ti>noapm</ti>
  <ti>Disattiva il supporto APM</ti>
</tr>
<tr>
  <ti>nodetect</ti>
  <ti>Disattiva la rilevazione automatica dell'hardware (kudzu/hotplug)</ti>
</tr>
<tr>
  <ti>nodhcp</ti>
  <ti>Non utilizza il DHCP per ottenere un indirizzo IP</ti>
</tr>
<tr>
  <ti>noevms</ti>
  <ti>Disattiva il supporto EVMS</ti>
</tr>
<tr>
  <ti>nohotplug</ti>
  <ti>Disattiva l'hotplug (programma per caricare il kernel)</ti>
</tr>
<tr>
  <ti>nousb</ti>
  <ti>Disattiva il supporto USB</ti>
</tr>
<tr>
  <ti>ide=nodma</ti>
  <ti>Disattiva il supporto DMA</ti>
</tr>
</table>

<note>
Alcuni LiveCD prevedono ulteriori opzioni o non prevedono quelle elencate
in questo documento. Per elencare le opzioni disponibili alla schermata
iniziale è sufficiente premere F2.
</note>

<p>
Adesso è possibile bootare il CD selezionando il kernel (se non volete utilizzare
quello di default) e le opzioni di boot. Ad esempio ecco come bootare il kernel
<c>gentoo</c>, con il parametro <c>dopcmcia</c>:
</p>

<pre caption="Bootare un LiveCD">
boot: <i>gentoo dopcmcia</i>
</pre>

<p>
Si dovrebbe presentare ora un altra schermata con una barra che indica lo svolgersi delle operazioni.
Una volta completato il processo di boot si è automaticamente nell'ambiente
Live di Gentoo come &quot;root&quot;, l'utente amministratore. Ci dovrebbe essere
un prompt di root a schermo (&quot;#&quot;) e dovrebbe essere possibile passare
ad altre console premendo Alt-F2, Alt-F3 e Alt-F4 e tornare alla precedente
premendo Alt-F1.
</p>

<p>
Se si sta installando Gentoo da un sistema privo di tastiera statunitense,
utilizzare <c>loadkeys</c> per caricare una keymap adeguata. Per elencare le
keymap disponibili eseguire <c>ls /usr/share/keymaps</c>.
</p>

<pre caption="Elenacare le keymap disponibili">
# <i>ls /usr/share/keymaps</i>
</pre>

<p>
caricare la propria keymap:
</p>

<pre caption="caricare una keymap">
# <i>loadkeys be2-latin1</i>
</pre>


<p>
Continuare ora con la <uri link="#hardware">Configurazione dell'Hardware</uri>.
</p>

</body>
</subsection>
<subsection id="hardware">
<title>Configurazione dell'hardware</title>
<body>

<p>
Al momento del boot il CD prova a rilevare tutte le periferiche hardware
e caricare i corrispondenti moduli del kernel di supporto. Nella grande
maggior parte dei casi l'operazione va a buon fine. A volte però
potrebbero non essere caricati tutti i moduli necessari. Se la rilevazione
PCI ha saltato qualche periferica, è necessario caricare manualmente
il modulo corrispondente.
</p>

<p>
Nel seguente esempio si prova a caricare il modulo <c>8139too</c> (che supporta
un certo tipo di interfacce di rete):
</p>

<pre caption="Caricamento dei moduli del kernel">
# <i>modprobe 8139too</i>
</pre>

</body>
</subsection>
<subsection>
<title>Opzionale: Ottimizzazione  delle performance dell'hard disk</title>
<body>

<p>
Alcuni utenti esperti potrebbero voler ottimizzare le performance del
proprio hard disk tramite <c>hdparm</c>. Con le opzioni <c>-tT</c> è possibile
testare le performance del proprio disco (eseguire il test alcune volte
per avere risultati più precisi):
</p>

<pre caption="Test delle performance del disco">
# <i>hdparm -tT</i>
</pre>

<p>
Per l'ottimizzazzione è possibile utilizzare uno dei seguenti esempi
(o una configurazione personalizzata) che usano <path>/dev/hda</path>
come disco (sostituirlo con il proprio):
</p>

<pre caption="Ottimizzazione delle performance del disco">
<comment>Attivare il DMA:</comment>
# <i>hdparm -d 1 /dev/hda</i>
<comment>Attivare il DMA e altre opzioni sicure di ottimizzazione:</comment>
# <i>hdparm -d 1 -A 1 -m 16 -u 1 -a 64 /dev/hda</i>
</pre>

</body>
</subsection>
<subsection>
<title>Opzionale: Account utente</title>
<body>

<p>
Se si pensa di dare accesso ad altri al proprio ambiente di installazione
è necessario creare gli opportuni account utente e cambiare la
password di root.
</p>

<p>
Per cambiare la password di root utilizzare l'utility <c>passwd</c>:
</p>

<pre caption="Cambiare la password di root">
# <i>passwd</i>
New password: <comment>(Inserire la nuova password)</comment>
Re-enter password: <comment>(Inserire nuovamente la nuova password)</comment>
</pre>

<p>
Per creare un account utente è necessario inserire i suoi dati seguiti
dalla sua password. E' possibile utilizzare  <c>useradd</c> e <c>passwd</c>
per farlo, come mostra il prossimo esemio in cui si crea l'utente
&quot;john&quot;.
</p>

<pre caption="Creare un account utente">
# <i>useradd john</i>
# <i>passwd john</i>
New password: <comment>(Inserire la password di john)</comment>
Re-enter password: <comment>(Inserire nuovamente la password di john)</comment>
</pre>

<p>
E' possibile dunque cambiare utente da root al nuovo utente tremite
<c>su</c>:
</p>

<pre caption="Cambiare utente">
# <i>su john -</i>
</pre>

</body>
</subsection>
<subsection>
<title>Opzionale: Avviare un demone SSH</title>
<body>

<impo>
Solo le architetture x86, amd64, alpha, sparc e ppc consentono di avviare un demone
SSH durante l'installazione.
</impo>

<p>
Se si desidera consentire ad altri utenti l'accesso al pc durante
l'installazione di Gentoo (magari perchè qualcuno di essi potrebbe
essere di aiuto o addirittura condurre personalmente l'installazione),
è necessario creare un account per ciascuno di essi o condividere
con loro la password di root (<e>solo se si confida pienamente</e> in
tale utente).
</p>

<p>
Per avviare il demone SSH, eseguire il seguente comando:
</p>

<pre caption="Avviare il demone SSH">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
Passare ora al capitolo riguardante la <uri 
link="?part=1&amp;chap=3">Configurazione della rete</uri>.
</p>

</body>
</subsection>
</section>
</sections>
