<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/handbook/hb-install-mips-bootloader.xml,v 1.1 2004/12/16 20:46:10 mush Exp $ -->

<sections>

<version>1.5</version>
<date>2004-10-23</date>

<section>
<title>Il MIPS PROM</title>
<subsection>
<body>

<p>
MIPS non richiede l'installazione di un bootloader. Il MIPS PROM gestisce l'avvio, ma si deve installare il kernel come una opzione realizzabile.
</p>

<p>
Installare <c>dvhtool</c>, necessario per copiare il kernel sull'intestazione del volume SGI.
</p>

<pre caption="Installare dvhtool">
# <i>emerge dvhtool</i>
</pre>

<p>
Ora copiare il kernel sull'intestazione del volume SGI. Di default, <c>dvhtool</c> assume che l'intestazione del volume SGI sia su <path>/dev/sda</path>. Se non è così (per esempio quando IRIX è installato su <path>/dev/sda</path> e Gentoo/MIPS su <path>/dev/sdb</path>), si deve usare <c>dvhtool</c> con <c>-d &lt;device&gt;</c>.
</p>

<pre caption="Copiare un kernel sull'intestazione del volume SGI">
# <i>dvhtool --unix-to-vh &lt;kernel name in /boot&gt; &lt;name you want to give in volume header&gt;</i>
</pre>

<p>
Se si desidera vedere tutte le voci disponibili nel volume, usare <c>--print-volume-directory</c>:
</p>

<pre caption="Vedere tutte le voci disponibili nel volume">
# <i>dvhtool --print-volume-directory</i>
</pre>

<p>
Per impostare il sistema per far si che Gentoo/MIPS si avvii, si devono ottimizzare alcune impostazioni nel MIPS PROM.
</p>

<p>
Continuare con <uri link="#reboot">Riavviare il sistema</uri>.
</p>

</body>
</subsection>
</section>
<section id="reboot">
<title>Riavviare il sistema</title>
<subsection>
<body>

<p>
Uscire dall'ambiente in cui si è fatto il chroot e smontare tutte le partizioni montate. Poi digitare il comando <c>reboot</c>.
</p>

<pre caption="Uscire dal chroot, smontare tutte le partizioni e riavviare">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Ottimizzare il MIPS PROM</title>
<subsection>
<body>

<p>
Dopo aver riavviato, andare nel <e>System Maintenance Menu</e> e selezionare <e>Enter Command Monitor</e> (<c>5</c>). Se si desidera fare un test della nuova installazione Gentoo, eseguire <c>boot -f &lt;kernel name&gt;</c>. Per ottenere un sistema che si avvii con Gentoo, si devono impostare alcune variabili nel MIPS PROM:
</p>

<pre caption="Configurare il PROM per avviare Gentoo">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;root device&gt; = partizione di root di Gentoo, per esempio /dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;root device&gt;</i>

<comment>(Per elencare i kernel disponibili, digitare "ls")</comment>
&gt;&gt; <i>setenv OSLoader &lt;kernel name&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;kernel name&gt;</i>

<comment>(Dichiarare i parametri del kernel che si desiderano usare)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;kernel parameters&gt;</i>

<comment>(Fornire la posizione dell'intestazione del volume)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(Avviare automaticamente Gentoo)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(Impostare la timezone)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(Usare la console seriale - gli utenti con adattatore grafico dovrebbero avere "g" invece di "d1" (uno))</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
Ora si ha installato un sistema Gentoo. Avviare in Gentoo, e finire con <uri link="?part=1&amp;chap=11">Termine dell'installazione Gentoo</uri>.
</p>

</body>
</subsection>
</section>
</sections>
