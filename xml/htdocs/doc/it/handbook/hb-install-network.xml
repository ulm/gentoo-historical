<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<sections>
<section>
<title>Si può fare senza, ma...</title>
<subsection>
<title>Chi può fare senza?</title>
<body>

<p>
Secondo la modalità che si è scelta per installare Gentoo, si può continuare o meno senza rete (e Internet). No, non si sta giocando con la mente =)
</p>

<p>
Generalmente si deve installare la rete (e Internet). Tuttavia, Gentoo fornisce la possibilità di essere installato senza un collegamento di rete. Questa eccezione è possibile soltanto con le seguenti modalità di installazione:
</p>

<ul>
  <li>
    Set Gentoo x86 2-CD LiveCD di Installazione (compreso x86, i686, pentium3, pentium4 e athlon-xp)
  </li>
  <li>
    Set Gentoo PPC 2-CD LiveCD di Installazione (compreso G3 e G4)
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>Perchè si ha bisogno della rete?</title>
<body>

<p>
L'installazione di Gentoo da Internet risulta come un'installazione di Gentoo completamente aggiornata. Si avrà un'installazione basata sul più recente Portage tree (che è l'insieme di pacchetti che si fornisce con i tool per controllare il software). Questo è il motivo del perchè è preferita un'installazione con la rete. Tuttavia, alcune persone non possono o non vogliono installare Gentoo su un sistema con una connessione Internet funzionante.
</p>

<p>
Se si è in questa situazione bisogna usare il set di 2 CD. Questi set includono il codice sorgente, uno snapshot del portage tree e i tool per installare un sistema base di Gentoo e oltre. Questo metodo ha un prezzo da pagare: Non si hanno gli ultimi software, sebbene le differenze saranno minime.
</p>

<p>
Se si vuole seguire questa installazione senza rete si deve usare un set di 2 CD, saltare il resto di questo capitolo e continuare con <uri link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>. Altrimenti, continuare con la sezione di configurazione di rete qui sotto.
</p>

</body>
</subsection>
<subsection>
<title>Opzionale: Configurare il Proxy</title>
<body>

<p>
Se l'accesso a Internet è attraverso un proxy, si potrebbe aver bisogno di configurare l'informazione del proxy durante l'installazione. E' molto facile definire un proxy: basta definire una variabile che contiene l'informazione del proxy server.
</p>

<p>
Nella maggior parte dei casi, si definisce la variabile usando l'hostname del server. Come esempio, si assuma che il proxy sia chiamato <e>proxy.gentoo.org</e> e che la porta sia la 8080.
</p>

<pre caption="Definire i proxy servers">
<comment>(Se il proxy filtra il traffico HTTP)</comment>
# <i>export http_proxy="http://proxy.gentoo.org:8080"</i>
<comment>(Se il proxy filtra il traffico FTP)</comment>
# <i>export ftp_proxy="ftp://proxy.gentoo.org:8080"</i>
<comment>(Se il proxy filtra il traffico RSYNC)</comment>
# <i>export rsync_proxy="rsync://proxy.gentoo.org:8080"</i>
</pre>

<p>
Se il proxy richiede una username e una password, si dovrebbe usare la seguente sintassi per la variabile:
</p>

<pre caption="Aggiungere username/password alla variabile del proxy">
http://username:password@server
</pre>

<p>
Per esempio, per HTTP proxying con il precedente proxy server e come username "john" e come password "f00b_r" si userebbe:
</p>

<pre caption="Proxy Autenticato">
# <i>export http_proxy="http://john:f00b_r@proxy.gentoo.org:8080"</i>
</pre>

</body>
</subsection>
<subsection>
<title>Rete dalle Modalità di Installazione non-Gentoo</title>
<body>

<p>
La maggior parte delle informazioni in questa sezione è intesa per gli utenti che fanno il boot da un LiveCD. Tuttavia, si può installare Gentoo con molte altre modalità. Se si è in questa situazione, assicurarsi che la modalità usata ha una connessione a Internet attiva (informazioni disponibili in <uri link="#doc_chap4_sect2">Usare DHCP</uri> o <uri link="#doc_chap4_sect3">Comprendere la Terminologia di Rete</uri> potrebbero essere utili) e continuare con <uri link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>.
</p>

</body>
</subsection>
</section>
<section>
<title>Rilevazione Automatica della Rete</title>
<subsection>
<title>Forse funziona?</title>
<body>

<p>
Se il sistema è inserito in una rete Ethernet con un server DHCP, è molto probabile che la configurazione di rete è già stata fatta automaticamente. Se è così, si dovrebbe potere approfittare di molti comandi inclusi di informazione di rete sul LiveCD come <c>ssh</c>, <c>scp</c>, <c>ping</c>, <c>irssi</c>, <c>wget</c> e <c>links</c>, tra gli altri.
</p>

<p>
Se la rete è stata configurata, il comando <c>/sbin/ifconfig</c> dovrebbe elencare alcune interfacce di rete come lo, e come eth0:
</p>

<pre caption="/sbin/ifconfig per una scheda di rete attiva">
# <i>/sbin/ifconfig</i>
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11 Base address:0xe800 
</pre>

</body>
</subsection>
<subsection>
<title>Testare la Rete</title>
<body>

<p>
Si potrebbe desiderare di fare il ping al server DNS dell'ISP (trovato in <path>/etc/resolv.conf</path>) e a un sito Web a scelta, per assicurarsi che i pacchetti stanno raggiungendo la rete, che la risoluzione del nome del DNS sta funzionando correttamente, ecc..
</p>

<pre caption="Ulteriore test della rete">
# <i>ping -c 3 www.yahoo.com</i>
</pre>

<p>
Si può usare la rete? Se è così, si può saltare il resto di questa sezione e continuare con <uri link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>. Se non è così, sfortunatamente, si deve proseguire un pò più duramente :)
</p>

</body>
</subsection>
</section>
<section>
<title>Configurazione Automatica della Rete</title>
<subsection>
<body>

<p>
Se la rete non funziona immediatamente, alcune modalità di installazione permettono di usare <c>net-setup</c> (per le reti normali), <c>adsl-setup</c> (per gli utenti ADSL) o <c>pptp</c> (per gli utenti PPTP).
</p>

<p>
Se le modalità di installazione non contengono nessuno di questi tool, continuare con la <uri link="#doc_chap4">Configurazione Manuale della Rete</uri>.
</p>

<ul>
  <li>
    I normali utenti Ethernet dovrebbero continuare con <uri link="#doc_chap3_sect2">Default: Usare net-setup</uri>
  </li>
  <li>Gli utenti ADSL dovrebbero continuare con <uri link="#doc_chap3_sect3">Alternativa: Usare RP-PPPoE</uri>
  </li>
  <li>
    Gli utenti PPTP dovrebbero continuare con <uri link="#doc_chap3_sect4">Alternativa: Usare PPTP</uri>
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>Default: Usare net-setup</title>
<body>

<p>
Il modo più semplice di installare la rete se non è configurata automaticamente è eseguire lo script <c>net-setup</c>:
</p>

<pre caption="Eseguire lo script net-setup">
# <i>net-setup eth0</i>
</pre>

<p>
<c>net-setup</c> farà alcune domande sull'ambiente di rete. Quando finisce, si dovrebbe avere una connessione di rete attiva. Si verifichi il collegamento. Se i test sono positivi, congratulazioni! Si è pronti per installare Gentoo. Saltare il resto di questa sezione e continuare con <uri 
link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>.
</p>

<p>
Se la rete ancora non funziona, continuare con la <uri link="#doc_chap4">Configurazione Manuale della Rete</uri>.
</p>


</body>
</subsection>
<subsection>
<title>Alternativa: Usare RP-PPPoE</title>
<body>

<p>
Ammettendo di aver bisogno di PPPoE per connettersi a internet, il LiveCD (qualsiasi versione) ha reso le cose facili includendo <c>rp-pppoe</c>. Usare lo script fornito <c>adsl-setup</c> per configurare la connessione. Si sarà richiamati al prompt per il dispositivo Ethernet che è collegato al modem adsl, per lo username e la password, per gli IP dei server DNS e se si ha bisogno per un firewall di base o meno.
</p>

<pre caption="Usare rp-pppoe">
# <i>adsl-setup</i>
# <i>adsl-start</i>
</pre>

<p>
Se qualcosa è sbagliato, ricontrollare di avere digitato correttamente lo username e la password guardando <path>/etc/ppp/pap-secrets</path> o <path>/etc/ppp/chap-secrets</path> e assicurarsi di stare usando il giusto dispositivo ethernet. Se il dispositivo ethernet non esiste, si dovrà caricare il modulo appropriato di rete. In questo caso si dovrebbe continuare con la <uri link="#doc_chap4">Configurazione Manuale della Rete</uri> dove si spiega come caricare l'appropriato modulo di rete.
</p>

<p>
Se funziona tutto, continuare con <uri link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Alternativa: Usare PPTP</title>
<body>

<p>
Se si ha bisogno del supporto PPTP, si può usare <c>pptpclient</c> che è fornito dai LiveCD. Ma prima bisogna assicurarsi che la configurazione è corretta. Editare <path>/etc/ppp/pap-secrets</path> o <path>/etc/ppp/chap-secrets</path> in modo che così contenga la corretta combinazione username/password:
</p>

<pre caption="Editare /etc/ppp/chap-secrets">
# <i>nano -w /etc/ppp/chap-secrets</i>
</pre>

<p>
Editare se necessario <path>/etc/ppp/options.pptp</path>:
</p>

<pre caption="Editare /etc/ppp/options.pptp">
# <i>nano -w /etc/ppp/options.pptp</i>
</pre>

<p>
Quando si è finito, eseguire <c>pptp</c> (con le opzioni che non si possono settare in <path>options.pptp</path>) per connettere il server:
</p>

<pre caption="Connessione a un server dial-in">
# <i>pptp &lt;server ip&gt;</i>
</pre>

<p>
Ora continuare con <uri link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>.
</p>

</body>
</subsection>
</section>
<section>
<title>Configurazione Manuale della Rete</title>
<subsection>
<title>Caricare gli Appropriati Moduli di Rete</title>
<body>

<p>
Quando si effettua il boot con il Live CD, quest'ultimo prova a rilevare tutti i dispositivi hardware e carica i moduli (driver) appropriati del kernel per supportare l'hardware. Nella grande maggioranza dei casi, fa un buon lavoro. Tuttavia, in alcuni casi, potrebbe non auto-caricare i moduli del kernel di cui si ha bisogno.
</p>

<p>
Se <c>net-setup</c> o <c>adsl-setup</c> fallisce, allora si può di sicuro supporre che la scheda di rete non è stata trovata immediatamente. Ciò significa che si dovranno caricare gli appropriati moduli del kernel manualmente.
</p>

<p>
Per scoprire quali moduli del kernel si forniscono per la rete, usare <c>ls</c>:
</p>

<pre caption="Cercare i moduli forniti">
# <i>ls /lib/modules/`uname -r`/kernel/drivers/net</i>
</pre>

<p>
Se si trova un driver per la scheda di rete, usare <c>modprobe</c> per caricare il modulo del kernel:
</p>

<pre caption="Usare modprobe per caricare un modulo del kernel">
<comment>(Come esempio, si carica il modulo pcnet32)</comment>
# <i>modprobe pcnet32</i>
</pre>

<p>
Per controllare se la scheda di rete è ora rilevata, usare <c>ifconfig</c>. Una scheda di rete rilevata dovrebbe risultare simile a questo:
</p>

<pre caption="Testare la disponibilità della scheda di rete, con successo">
# <i>ifconfig eth0</i>
eth0      Link encap:Ethernet  HWaddr FE:FD:00:00:00:00  
          BROADCAST NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)
</pre>

<p>
Se invece si riceve il seguente errore, la sheda di rete non è rilevata:
</p>

<pre caption="Testare la disponibilità della scheda di rete, senza successo">
# <i>ifconfig eth0</i>
eth0: error fetching interface information: Device not found
</pre>

<p>
Assumendo che si ha una scheda di rete rilevata, si può eseguire di nuovo <c>net-setup</c> o <c>adsl-setup</c> (che adesso dovrebbe funzionare), ma per la gente "hardcore", si spiegherà come configurare la rete manualmente.
</p>

<p>
Ci sono due possibilità. La prima di usare DHCP (recupero automatico dell'IP), la seconda di installare la rete usando i comandi <c>ifconfig</c> e <c>route</c>.
</p>

</body>
</subsection>
<subsection>
<title>Usare DHCP</title>
<body>

<p>
DHCP (Dynamic Host Configuration Protocol) rende possibile ricevere automaticamente informazioni di rete (indirizzo IP, netmask, indirizzo broadcast, gateway, nameserver ecc.). Questo funziona soltanto se si ha un server DHCP nella rete (o se il provider fornisce un servizio DHCP). Per avere una interfaccia di rete che riceve queste informazioni automaticamente, usare <c>dhcpcd</c>:
</p>

<pre caption="Usare dhcpcd">
# <i>dhcpcd eth0</i>
</pre>

<p>
Se funziona (cercare di pingare alcuni server internet, come <uri link="http://www.google.com">Google</uri>), allora si ha tutto settato e si è pronti per continuare. Saltare il resto di questa sezione e continuare con <uri link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>.
</p>

</body>
</subsection>
<subsection>
<title>Comprendere la Terminologia di Rete</title>
<body>

<note>
Se si conosce l'indirizzo IP, l'indirizzo broadcast, netmask e nameserver, allora si può saltare questa sottosezione e continuare con <uri link="#doc_chap4_sect4">Usare ifconfig e route</uri>.
</note>

<p>
Se i tentativi precedenti falliscono, si dovrà configurare la rete manualmente. Non si deve aver paura, non è difficile. Ma è necessario spiegare un pò di argomenti sulla rete per potere essere capaci di configurarla con soddisfazione. Quando si sarà letto questo paragrafo, si saprà che cosa è un <e>gateway</e>, a cosa serve <e>netmask</e>, come è formato un indirizzo <e>broadcast</e> e perchè si ha bisogno dei <e>nameservers</e>.
</p>

<p>
In una rete, gli host sono identificati dai loro <e>indirizzi IP</e> (indirizzi Internet Protocol). Un indirizzo è una combinazione di 4 numeri tra 0 e 255. Almeno è come lo percepiamo. In realtà, un indirizzo IP consiste di 32 bits (1 e 0). Ecco un esempio:
</p>

<pre caption="Esempio di un indirizzo IP">
IP Address (numbers):   192.168.0.2
IP Address (bits):      11000000 10101000 00000000 00000010
                        -------- -------- -------- --------
                           192      168       0        2
</pre>

<p>
Un indirizzo IP è unico per un host per quanto le reti sono accessibili (per esempio tutti gli host che si possono raggiungere devono avere un indirizzo IP unico). Per potere fare una distinzione tra host dentro una rete, e host fuori una rete, l'indirizzo IP è diviso in due parti: la parte di <e>network</e> e la parte di <e>host</e>.
</p>

<p>
La separazione è annotata con il <e>netmask</e>, un insieme di 1 seguito da un insieme di 0. La parte di IP che può essere tracciata sugli 1 è la parte di network, l'altra è la parte di host. Di solito, il netmask può essere scritto come un indirizzo IP.
</p>

<pre caption="Esempio della separazione network/host">
IP-address:    192      168      0         2
            11000000 10101000 00000000 00000010
Netmask:    11111111 11111111 11111111 00000000
               255      255     255        0
           +--------------------------+--------+
                    Network              Host
</pre>

<p>
In altre parole, 192.168.0.14 è ancora parte dell'esempio di network, ma 192.168.1.2 non lo è.
</p>

<p>
L'indirizzo <e>broadcast</e> è un indirizzo IP con la stessa parte di network, ma con solo una parte di host. Ogni host sulla rete ascolta questo indirizzo IP. E' inteso per i pacchetti di broadcasting.
</p>

<pre caption="Indirizzo broadcast">
IP-address:    192      168      0         2
            11000000 10101000 00000000 00000010
Broadcast:  11000000 10101000 00000000 11111111
               192      168      0        255
           +--------------------------+--------+
                     Network             Host
</pre>

<p>
Per potere navigare su internet, si deve conoscere quale host condivide la connessione a Internet. Questo host è chiamato <e>gateway</e>. E' un normale host, ha un normale indirizzo IP (per esempio 192.168.0.1).
</p>

<p>
Precedentemente si è detto che ogni host ha il suo indirizzo IP. Per potere ricevere questo host da un nome (anzichè un indirizzo IP) si ha bisogno di un servizio che traduce un nome (come <e>dev.gentoo.org</e>) in un indirizzo IP (come <e>64.5.62.82</e>). Questo servizio è chiamato name service. Per usarlo, si deve definire il necessario <e>nameserver</e> in <path>/etc/resolv.conf</path>.
</p>

<p>
In alcuni casi, il gateway serve come nameserver. Altrimenti si dovrà entrare nel nameserver fornito dall'ISP.
</p>

<p>
Per riassumere, si ha bisogno delle seguenti informazioni prima di continuare:
</p>

<table>
<tr>
  <th>Terminologia di Rete</th>
  <th>Esempio</th>
</tr>
<tr>
  <ti>Indirizzo IP</ti>
  <ti>192.168.0.2</ti>
</tr>
<tr>
  <ti>Netmask</ti>
  <ti>255.255.255.0</ti>
</tr>
<tr>
  <ti>Broadcast</ti>
  <ti>192.168.0.255</ti>
</tr>
<tr>
  <ti>Gateway</ti>
  <ti>192.168.0.1</ti>
</tr>
<tr>
  <ti>Nameserver(s)</ti>
  <ti>195.130.130.5, 195.130.130.133</ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>Usare ifconfig e route</title>
<body>


<p>
Installare la rete consiste in tre punti. Nel primo si assegna l'indirizzo IP con <c>ifconfig</c>. Nel secondo si installa il routing al gateway con <c>route</c>. Nel terzo si finisce mettendo il nameserver degli IP in <path>/etc/resolv.conf</path>.
</p>

<p>
Per assegnare un indirizzo IP, si avrà bisogno dello stesso indirizzo IP, dell'indirizzo broadcast e del netmask. Eseguire il seguente comando, sostituendo <c>${IP_ADDR}</c> con l'indirizzo IP, <c>${BROADCAST}</c> con l'indirizzo broadcast e <c>${NETMASK}</c> con il netmask:
</p>

<pre caption="Usare ifconfig">
# <i>ifconfig eth0 ${IP_ADDR} broadcast ${BROADCAST} netmask ${NETMASK} up</i>
</pre>

<p>
Ora installare il routing con <c>route</c>. Sostituire <c>${GATEWAY}</c> con l'indirizzo IP del gateway:
</p>

<pre caption="Usare route">
# <i>route add default gw ${GATEWAY}</i>
</pre>

<p>
Aprire <path>/etc/resolv.conf</path> con l'editor favorito (per esempio <c>nano</c>):
</p>

<pre caption="Creare /etc/resolv.conf">
# <i>nano -w /etc/resolv.conf</i>
</pre>

<p>
Inserire i nameserver usando il seguente come esempio. Assicurarsi di sostituire <c>${NAMESERVER1}</c> e <c>${NAMESERVER2}</c> con gli appropriati indirizzi nameserver:
</p>

<pre caption="Esempio /etc/resolv.conf">
nameserver ${NAMESERVER1}
nameserver ${NAMESERVER2}
</pre>

<p>
Testare la rete con il ping di alcuni server Internet (come <uri link="http://www.google.com">Google</uri>). Se funziona, congratulazioni. Si è pronti per installare Gentoo. Continuare con <uri link="?part=1&amp;chap=4">Preparazione dei Dischi</uri>.
</p>

</body>
</subsection>
</section>
</sections>

