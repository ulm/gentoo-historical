<?xml version='1.0' encoding="UTF-8" ?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/desktop.xml,v 1.11 2004/05/26 14:16:35 mush Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/it/desktop.xml">
<title>Gentoo Linux Desktop Configuration Guide</title>
	<author title="Autore"><!-- zhen@gentoo.org -->John P. Davis</author>
	<author title="Autore"><mail link="g2boojum@gentoo.org">Grant Goodyear</mail></author>
	<author title="Autore"><mail link="lu_zero@gentoo.org">Luca Barbato</mail></author>
	<author title="Redazione"><mail link="peesh@gentoo.org">Jorge Paulo</mail></author>
	<author title="Redazione"><mail link="blubber@gentoo.org">Tiemo Kieft</mail></author>
	<author title="Redazione"><mail link="swift@gentoo.org">Sven Vermeulen</mail></author>
	<author title="Traduzione"><mail link="whitenoise@tiscali.it">Giorgio Vielmini</mail></author>
	<author title="Traduzione"><mail link="siggy@siggy.info">Luca Mercuri</mail></author>
	<author title="Traduzione"><mail link="bernardo@linux.it">Bernardo Damele</mail></author>

	<abstract>
		Questa guida mostra come rendere Gentoo Linux un sistema desktop adatto ad ogni esigenza.
		In particolare, viene descritto come installare e configurare X, KDE, GNOME, ALSA (suono), 
		postfix (posta elettronica), samba (interfacciamento unix/windows).
	</abstract>

	<license/>

	<version>1.4.23</version>
	<date>1 Maggio 2004</date>

<chapter>
<title>Preliminari</title>
<section>
<body>

<p>Per prima cosa, ovviamente, bisogna aver installato <uri link="/doc/en/handbook/">Gentoo Linux</uri>.  Una volta terminata la "divertente" fase di installazione, è necessario effettuare il download della base di dati aggiornato di <e>Portage</e>.
E' consigliabile leggere il capitolo <uri link="/doc/it/handbook/handbook-x86.xml?part=2&amp;chap=2">Portage e software</uri> del relativo Gentoo Handbook, ma se avete fretta è sufficiente digitare:
</p>

<pre caption="Aggiornamento">
# <i>emerge sync</i>
</pre>

<p>Una semplice nota riguardo i pacchetti che vengono descritti in questa guida. Gentoo Linux contiene un grande quantità di window managers, programmi per la gestione della posta elettronica, etc., che possono essere installati facilmente. I vari pacchetti che vengono analizzati non sono una scelta di Gentoo Linux,	ma sono pacchetti conosciuti o preferiti dall'autore. In altre parole, sono i pacchetti utilizzati dall'autore.</p>

<impo>A seconda di quale desktop desiderate installare, potreste decidere di disabilitare il supporto per quei desktop che non volete utilizzare. All'interno	del file <path>/etc/make.conf</path>, nella sezione <c>USE</c>, aggiungete <c>-gnome -gtk</c> se volete utilizzare KDE, o aggiungete <c>-kde -qt</c> se preferite utilizzare GNOME.</impo>

<warn>Se trovate un bug all'interno di uno di questi pacchetti, riferitelo a <uri>http://bugs.gentoo.org/</uri>. <e>Non</e> comunicatelo al responsabile del pacchetto (per esempio KDE), saranni gli sviluppatori a diffondere il messaggio, se necessario.</warn>

</body>
</section>
</chapter>

<chapter>
<title>Installazione di XFree86</title>
<section>
<title>Installazione</title>
<body>
<p>La fase di emerge e installazione di X richiede molto tempo anche su macchine veloci. Il sistema è abbastanza grande, per cui preparatevi a leggere un libro, a fare un pisolino, etc.</p>

<p>Per effettuare l'emerge di X, è sufficiente digitare:</p>

<pre caption="Emerge di XFree86">
# <i>emerge xfree</i>
# <i>env-update &amp;&amp; source /etc/profile</i>
</pre>

<p>Una volta terminato questo lungo processo, si procede con la configurazione.	</p>
</body>
</section>

<section>
<title>Configurazione di X</title>
<body>
<p>E' preferibile utilizzare il programma da console <c>xf86config</c> per la configurazione di X, nonostante il file generato (<path>/etc/X11/XF86Config</path>) non risulti molto leggibile. Prima di iniziare, è necessario conoscere le frequenze di refresh (orizzontale e 	verticale) del propio monitor (per il viewsonic G773 dell'autore: orizzontale 30-69 KHz, verticale 55-90 KHZ), il modello e la quantità di memoria installata sulla scheda video (una GeForce con 32768KB, nel caso dell'autore) ed il tipo e modello del proprio mouse (un intellimouse collegato alla porta ps/2 (<path>/dev/psaux</path>)).</p>

<pre caption="Esecuzione di xf86config">
# <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>Poiché uso un mouse a 3 pulsanti ho scelto di non attivare l'emulazione del 3 tasto. Non dimenticate di aggiungere il supporto XKB se necessitate del supporto multilingue. Dovete indicare quale risoluzione preferite e con quale profondità di colore. Personalmente preferisco lavorare a 1280x1024 e 24bpp con il mio viewsonic, ma solo perchè  non supporta risoluzioni maggiori. Se state utilizzando xf86config per la prima volta, non sorprendetevi se dovrete utilizzarlo più volte per correggere qualche parametro.</p>

<p>Un'altro modo possibile per configure XFree86 è utilizzare <c>XFree86 -configure</c>. Questo comando crea un file XF86Config predefinito nella directory home dell'utente root (/root). Dopodichè è possibile modificare questo file a seconda delle proprie necessità e copiarlo in /etc/X11/XF86Config.</p>

<p> E' possibile far riferimento a questo tutorial: <uri>http://www-106.ibm.com/developerworks/edu/os-dw-linuxxwin-i.html</uri> per ottenere maggiori informazioni.	</p>

<note>Se non conoscete le frequenze di refresh del vostro monitor, provate a effettuare una ricerca con google, <uri>http://www.google.com/</uri>, specificando il produttore ed il modello del monitor. Le frequenze di refresh sono generalmente indicate all'interno delle caratteristiche	del monitor.</note>
			
<note>Se state utilizzando una tastiera internazionale che impiega "dead kys" (quali è,é,ò, etc) dovete configurarla prima di lanciare X. Per far questo, deve essere creato /etc/env.d/02locale e aggiungere LC_CTYPE="xx_YY",sostituendo a <c>xx</c> le iniziali della vostra lingua (es. "it") e sostiuendo a "YY" le iniziali della vostra nazione (es. "IT"). Se volete il supporto per l'EURO aggiungete <c>@euro</c> a questa variabile (es. LC_CTYPE="it_IT@euro")). Non dimenticate di eseguire <c>env-update &amp;&amp; source /etc/profile</c> al termine delle modifiche.</note>
			
<p>Se siete degli esperti di X, potreste voler creare un link simbolico dal vostro mouse verso <path>/dev/mouse</path>. Questi link sono causa di problemi con devfs, poiché tendono a sparire dopo un reboot. Gentoo Linux gestisce in modo corretto i link all'interno di <path>/dev</path>. E' sufficiente creare il link simbolico <path>/dev/mouse</path> usando <c>ln -s</c> e verrà conservato anche dopo il riavvio del sistema.</p>

<p>Se volete utilizzare XFS (XFontServer), seguite le istruzioni succesive. L'uso di XFS è fortemente consigliato, e rende la configurazioni dei font <e>molto</e> più semplice. Fate riferimento a questo <uri link="http://www.redhat.com/docs/manuals/linux/RHL-7.3-Manual/ref-guide/s1-x-fonts.html">articolo</uri> di RedHat realtivo a XFS.</p>

<pre caption="Test della configurazione">
# <i>rc-update add xfs default</i>
# <i>/etc/init.d/xfs start</i>
# <i>startx</i>
</pre>

<p>Se X è stato configurato correttamente, eseguendo <c>startx</c> dovrebbe attivarsi un window manager incredibilmente brutto (twm, per la precisione). Se X parte, potete andare avanti. Premete <c>&lt;ctrl&gt;&lt;alt&gt;&lt;backspace&gt;</c> per fermare il server X.</p>

<p><c>xf86config</c> gestisce solo alcune delle possibili configurazioni. Schede grafiche NVIDIA, mouse USB e altre caratteristiche devono essere impostate manualmente. Queste verranno descritte in seguito, ma vorrei che guardaste come è strutturato il file <path>XF86Config</path>. Non è troppo indecifrabile, e potreste essere in grado di modificare alcuni parametri interessanti. Un buon punto di partenza da dove ottenere informazioni per le modifiche potrebbe essere il <uri link="http://www.tldp.org/HOWTO/mini/FDU/">font de-uglification howto</uri>.</p>
</body>
</section>

<section>
<title>Configurazione di un mouse PS/2</title>
<body>
<p>Se avete un mouse con la rotella potreste voler modificare il file XF86Config manualmente</p>

<pre caption="Modificare XF86Config">
# <i>cp /etc/X11/XF86Config /etc/X11/XF86Config.working</i>
# <i>vim /etc/X11/XF86Config</i>
</pre>

<pre caption="Sezione reativi ai dispositivi di puntamento di XF86Config">
Section "InputDevice"

#Identifier and driver

Identifier	"Mouse1"
Driver	"mouse"
<i>Option "Protocol"    "IMPS/2" </i>
Option "Device"      "/dev/psaux"
<i>Option "ZAxisMapping"	"4 5"</i>
</pre>

<p>Poiché possiedo un intellimouse ho cambiato il "Protocol" da "PS/2" a "IMPS/2". Per attivare la rotella è sufficiente aggiungere la riga 'Option "ZAxisMapping" "4 5"', dove '4' e '5' corrispondono ai due sensi di rotazione della rotella.</p>
<p>Se hai un wheelmouse e il <c>PS/2</c> non funziona, prova <c>IMPS/2</c> nel caso non avessi un intellimouse. Alcuni logitech potrebbero avere bisogno di questo.</p>

<note> Netscape 4.x ha la funzione di scroll disabilita di default; è necessario creare un file .Xdefaults. Visita la pagina di <uri link="http://www-sop.inria.fr/koala/colas/mouse-wheel-scroll/">Colas Nahaboo</uri> per maggiori informazioni sulla configurazione di X.Meglio ancora, è possibile utilizzare <c>konqueror</c>, <c>opera</c>,	<c>mozilla</c>, <c>galeon</c>, o altri browser più recenti.</note>

<p>Eseguite nuovamente <c>startx</c>, in moda da accertarsi che X sia ben configurato.</p>
</body>
</section>

<section>
<title>Configurazione di un mouse USB</title>
<body>
<p>Un mouse USB è la soluzione ideale per chi usa monitor ad alte risoluzioni. Il kernel stesso si preoccupa della sua risoluzione, in modo da non dover muovere il mouse 5 volte da una parte all'altra del pad per spostarsi da una parte all'altra dello schermo.</p>
<note>Durante la configurazione del supporto Input Core (all'interno del kernel), assicuratevi di inserire la risoluzione che utilizzerete con X. In questo modo lo scalamento risulterà ben calibrato.</note>

<p>Ora scollegate il mouse e ricollegatelo, e controllate che nel log del vostro kernel compaia un messaggio di questo tipo:</p>

<pre caption="Messaggio del kernel">
hub.c: USB new device connect on bus1/1, assigned device number 2
input0,hiddev0: USB HID v1.00 Mouse [Microsoft Microsoft IntelliMouse Optical] on usb1:2.0
</pre>

<p>Ora che il mouse è stato rilevato, controllate <path>/dev/input</path> per accertarsi che il mouse sia presente e che sia un funzione.</p>

<pre caption="Verifica del mouse USB">
# <i>cd /dev/input</i>
# <i>cat mice</i>
<comment>Muovete il mouse dopo aver effettuate <i>cat</i> sul dispositivo, dovreste vedere molta "spazzatura".
Per uscire premete semplicemente <i>control-C</i>.</comment>
</pre>
<p>Ora che il mouse è stato rilevato e configurato correttamente, è necessario comunicare a X che deve utilizzare un mouse USB. Dobbiamo effettuare alcune semplici modifiche alla configurazione di X per specificare quale dispositivo deve essere utilizzato.</p>

<pre caption="Modifiche a XF86Config">
# <i>cp /etc/X11/XF86Config /etc/X11/XF86Config.working</i>
# <i>nano -w /etc/X11/XF86Config</i>
</pre>

<pre caption="Sezione del puntatore di XF86Config">
Section "InputDevice"

# Identifier and driver

Identifier	"Mouse1"
Driver	"mouse"
<i>Option "Protocol"    "IMPS/2" </i>
Option "Device"      "/dev/input/mice"
<i>Option "ZAxisMapping"	"4 5"</i>
</pre>

<p>Okay, riavviamo X, ed il mouse dorebbe essere già funzionante. </p>

</body>
</section>


<section>
<title>Configurazione di una scheda grafica NVIDIA</title>
<body>

<p>Se avete una scheda NVIDIA, è giunto il momento di installare i driver accelerati NVIDIA.</p>

<note>
Ogni volta che ricompilate il kernel, dovete ricompilare anche <c>nvidia-kernel</c>. 
Qesto perchè il nuovo kernel cancell i vostri moduli nvidia.
</note>

<pre caption="Per chi possiede schede NVIDIA">
# <i>emerge nvidia-glx</i>
# <i>emerge nvidia-kernel</i>
# <i>nano -w /etc/X11/XF86Config</i>
<comment>(Cambiate "nv" in "nvidia" nella Device section)</comment>
# <i>modprobe NVdriver</i>
</pre>

<note>Se si sta utilizzando una versione del kernel diversa dalla 2.4, sostituire 2.4 con il numero di versione corretto.</note>

<pre caption="/etc/modules.autoload.d/kernel-2.4 (Solo per i possessori di schede NVIDIA)">
# <i>nano -w /etc/modules.autoload.d/kernel-2.4</i>
<comment># Aggiungere questa riga al file</comment>
nvidia
</pre>

<pre caption="Abilitazione di GLX in /etc/X11/XF86Config">
Section "Module"

# This loads the GLX module
#    Load       "glx" <comment>(Scommentate questa linea)</comment>
</pre>

<pre caption="Configurazione di X per l'auso dei driver NVIDIA in /etc/X11/XF86Config">
Section "Device"
	Identifier  "NVIDIA GeForce"
	#Driver      "nv"
	Driver      "nvidia"
	#VideoRam    32768
	# Insert Clocks lines here if appropriate
EndSection
</pre>

<pre caption="Abilitazione dell'accelerazione 3D">
# <i>opengl-update nvidia</i>
</pre>

<p>Eseguite <c>startx</c> ancora una volta per essere certi che X si avvii.(questa volta con lo splash screen di NVIDIA, se ne avete installato i driver).</p>

<note>Se avete dei problemi con X, consultate la documentazione di glx contenuta in <path>/usr/share/doc/nvidia-glx-1.0.xxxx/README.gzz</path> Esistono molti parametri di configurazione che possono influenzare le prestazioni del vostro sistema.</note>

</body>
</section>
<section>
<title>Configuring your ATI card</title>
<body>

<p>
Se vi capita di avere una scheda video ATI, ora e' tempo di installare i driver per l'accelerazione.
</p>

<p>
Quasi tutte le schede ATI sono supportate da <uri link="http://www.xfree86.org">XFree86</uri>,
almeno per le potenzialita' offerte dall'accelerazione 2D. Il supporto 3D e' fornito seno' dal
<uri link="http://dri.sf.net">progetto DRI</uri>, che e' gia' presente dentro XFree86, oppure
da drivers a sorgente chiuso
<uri link="http://mirror.ati.com/support/drivers/linux/radeon-linux.html">forniti</uri> dalla
ATI.
</p>

<table>
<tr>
  <th>GPU</th>
  <th>Nome comune</th>
  <th>Supporto</th>
</tr>
<tr>
  <ti>rage128</ti>
  <ti>Rage128</ti>
  <ti>xfree DRI</ti>
</tr>
<tr>
  <ti>r100</ti>
  <ti>Radeon7xxx, Radeon64</ti>
  <ti>xfree DRI</ti>
</tr>
<tr>
  <ti>r200,r250</ti>
  <ti>Radeon8500, Radeon9000</ti>
  <ti>xfree DRI, ATI DRI</ti>
</tr>
<tr>
  <ti>r300, following</ti>
  <ti>Radeon9500, Radeon9800</ti>
  <ti>xfree 2D, ATI DRI</ti>
</tr>
</table>

<p>
<b>Ho una scheda All-In-Wonder/Vivo. Sono supportate le potenzialita' multimediali?</b>
</p>

<p>
Le potenzialita' multimediali sono attualmente supportate dal <uri link="http://gatos.sf.net">progetto GATOS</uri>.
</p>

<warn>
ati-gatos e' attualmente antiquato. Stiamo valutando l'idea di aggiungere il supporto gatos direttamente dentro xfree.
</warn>

<p>
<b>Non uso un x86. Quali opzioni ho?</b>
</p>

<p>
Hai circa lo stesso supporto su piattaforma PPC e Alpha, ma non puoi usare i driver ATI closed-source.
Questo significa che non puoi usufruire al massimo delle potenzialita' 3D della r300.
Se hai una di queste schede e vuoi comunque questo supporto da xfree, puoi contattare la 
<uri link="http://www.ati.com">ATI</uri> e chiedergli di rendere pubbliche le specifiche.
</p>

<p>
<b>Ho un portatile. E' supportato il modello "mobility" della ATI?</b>
</p>

<p>
Dovrebbe esserlo, ma puoi riscontrare problemi di configurazioni dovuti all'OEM PCI id
che tali chip possono avere. Nella maggior parte dei casi dovrai scrivere il file di
configurazione da te stesso oppure usare <c>xf86config</c>.
</p>

<p>
<b>Installazione dei pacchetti</b>
</p>

<p>
L'ebuild di <c>xfree</c> fornisce XFree86. <c>xfree-drm</c> fornisce i moduli del kernel
richiesti da DRI e <c>ati-drivers</c> fornisce i drivers e i moduli del kernel ATI a sorgente
chiuso.
</p>

<impo>
Il tuo kernel deve avere il supporto agpgart e non avere il modulo DRM nativo.
</impo>

<pre caption="Installare i drivers">
<codenote>Se vuoi solo i drivers e i moduli Rage128 installati con xfree</codenote>
# <i>VIDEO_CARDS="rage128" emerge xfree-drm</i>
<codenote>Per avere solo il supporto Radeon</codenote>
<codenote>(r100, r200, r250, ma non ancora r300)</codenote>
# <i>VIDEO_CARDS="radeon" emerge xfree-drm</i>
<codenote>Per installare il driver a sorgente chiuso ATI</codenote>
<codenote>(solo r200, r250 e r300)</codenote>
# <i>emerge ati-drivers</i>
<codenote>Per installare solo XFree86, ma non installare</codenote>
<codenote>nessun modulo del kernel</codenote>
# <i>emerge xfree</i>
</pre>

<p>
<b>Configurazione</b>
</p>

<p>
E' consigliato l'uso di <c>xf86cfg</c>, <c>xf86config</c> oppure direttamente
l'uso dell'opzione di auto configurazione di XFree86:
</p>

<pre caption="Autoconfigurazione di X">
# <i>X -configure</i>
</pre>

<p>
Per maggiori informazioni su come configurare ad un livello base il file
<c>XF86Config</c>, fate riferimento a <uri link="#doc_chap2_sect2">Configurare X</uri>
section.
</p>

<note>
I possessori di ati-drivers possono anche usare <c>fglrxconfig</c>.
</note>

<impo>
I possessori di PPC dovrebbero usare il configuratore standalone <c>Xeasyconf</c> emergiando
l'ebuild <c>xeasyconf</c>.
</impo>

</body>
</section>
</chapter>

<chapter>
<title>Window Managers</title>
<section>
<title>Introduzione</title>
<body>

<p>Generalmente, la prima cosa da fare dopo aver installato X è installare un buon window manager. Potete anche usare twm, se ne desiderate uno brutto ma funzionale.</p>

<p>Esistono molti window manager ta cui scegliere, tra cui KDE, GNOME, Fluxbox, Blackbox,gli altri *box, Windowmaker, Sawfish, etc.
Come potete constatare, Gentoo Linux ne comprende una buona quantità.
</p>
</body>
</section>

<section>
<title>KDE</title>
<body>

<p>Immagino che se state leggendo questa sezione desideriate installare  KDE. KDE è pienamente supportato in Gentoo Linux,  ma ci sono un paio di cose di cui bisogna accertarsi prima di effettuare l'emerge di KDE.</p>
<ul>
<li>Accertatevi che "qt" e "kde" siano comprese nella sezione USE, all'interno di <path>make.conf</path>. </li>
<li>(Opzionale) Accertatevi che "-gnome" e "-gtk" siano comprese nella sezione USE, all'interno di <path>make.conf</path>. </li>
</ul>

<p>Quanto appena detto può essere fatto modificando <path>/etc/make.conf</path> in questo modo: </p>

<pre caption="Modificare make.conf">
# <i>nano -w /etc/make.conf </i>
<comment>All'interno di make.conf</comment>

USE="qt kde -gnome -gtk"
				
</pre>

<p>Per sapere di più delle variabili USE, fate riferimento a <uri link="http://www.gentoo.org/doc/it/use-howto.xml">USE HOWTO</uri>.</p>

<p>E' sempre consigliabile utilizzare il flag <c>--pretend</c> prima di effettuare un <c>emerge</c> per verificare quali dipendenze stanno per essere installate, e nel nostro caso sono molte.</p>

<pre caption="Anteprima dei pacchetti e delle dipendenze di KDE">
# <i>emerge --pretend kde</i>
# <i>emerge kde</i>
# <i>env-update &amp;&amp; source /etc/profile</i>
</pre>

<p>Controllate all'interno di <path>/etc/X11/Sessions/</path> qual'è la sessione esistente di KDE (per esempio <path>kde-3.1.2</path>).
Aprire quindi <path>/etc/rc.conf</path> e modificarlo fino ad ottenere:</p>

<pre caption = "Modifica della variabile XSESSION">
XSESSION="kde-3.1.2"
</pre>
	
<p>Se non volete installare KDE e tutti i suoi componenti (quanto fatto da <c>emerge kde</c>) ma installare solo una parte dei componenti di KDE, potete installarli separatamente. La tabella seguente mostra una serie di possibili pacchetti di KDE. Installate quelli desiderati con il comando <c>emerge nome_pacchetto</c>
</p>

<table>
<tr>
 <th>Pacchetto</th>
 <th>Descrizione</th>
</tr>
<tr><ti>kdeaccessibility</ti><ti>Programmi riguardo l'accessibilità</ti></tr>
<tr>
 <ti>kdebase</ti><ti>Pacchetto base di KDE</ti>
</tr>
<tr>
 <ti>kdeaddons</ti><ti>Varie utiliies vecchie/obsolete di KDE</ti>
</tr>
<tr>
 <ti>kdeadmin</ti><ti>Tools per l'amministrazione del sistema</ti>
</tr>
<tr>
 <ti>kdeartwork</ti><ti>Temi per KDE</ti>
</tr>
<tr>
 <ti>kdeedu</ti><ti>Tools di tipo Educationals</ti>
</tr>
<tr>
 <ti>kdegames</ti><ti>Giochi per KDE</ti>
</tr>
<tr>
 <ti>kdegraphics</ti><ti>Programmi per la grafica</ti>
</tr>
<tr>
 <ti>kdemultimedia</ti><ti>Players e framework per le applicazioni multimendiali di KDE</ti>
</tr>
<tr>
 <ti>kdenetwork</ti><ti>Utilities per la gestione della rete</ti>
</tr>
<tr>
 <ti>kdepim</ti><ti>Utilites PIM, Agenda, BloccoNote etc.</ti>
</tr>
<tr>
 <ti>kdesdk</ti><ti>Tool di sviluppo</ti>
</tr>
<tr>
 <ti>kdetoys</ti><ti>Tools per migliorare l'aspetto del desktop</ti>
</tr>
<tr>
 <ti>kdeutils</ti><ti>Utilities grafiche per il sistema</ti>
</tr>
<tr>
 <ti>kde-i18n</ti><ti>File per le lingue i18n.</ti>
</tr>
</table>

<note>Se avete intenione di utilizzare CUPS per stampare, è consigliabile aggiungere "Cups" all'nterno della sezione USE del file <path>/etc/make.conf</path> prima di installare KDE. Questo può essere fatto anche da linea di comando digitando <c>USE="cups" emerge kde </c>. Fate riferimento alla Print Guide per una spiegazione completa dell'installazione di CUPS.</note>
<note>Il pacchetto kde-i18n controlla la variabile di ambiente LINGUAS per determinare quale pacchetto di lingua dovrebbe essere installato. Per esempio, <c>LINGUAS="fr it"</c> che installerà i pacchetti di lingua sia per il francese che per l'italiano.</note>

<p>Dato che la compilazione KDE impiegherà parecchio tempo potreste aprofittatene per fare una dormita</p>

<note>Se avete un CD con i file binari di Gentoo, potete installare direttamente i pacchetti dal CD.</note>

<pre caption="Installazione dei pacchetti binari da CD">
# <i>export PKGDIR=/mnt/cdrom/gentoo/packages</i>
<comment>(Portage cerca i pacchetti all'interno di /usr/portage/packages)</comment>
# <i>emerge --usepkg /mnt/cdrom/gentoo/packages/All/kdebase-x.y.z.tbz2</i>
<comment>(I flag --usepkg fanno si che i pacchetti binari  vengano utilizzati per le dipendenze (se disponibili).)</comment>
# <i>env-update &amp;&amp; source /etc/profile</i>
</pre>
</body>
</section>

<section>
<title>Configurazione di  KDM</title>
<body>

<p>Una volta che KDE è stato installato, è consigliabile utilizzare un login manager, in questo caso il login manager di KDE, KDM. KDM  compreso nei pacchetti di KDE, per cui eseguirlo è necessario digitare:</p>

<pre caption="Esecuzione di KDM">
# <i>kdm</i>
</pre>

<p>Dovreste essere in grado di effettuare il log e vedere KDM perfettamente in funzione. Il suono potrebbe non essere ancora funzionante, così potreste non aver sentito il suono di avvio di KDE, ma questo verrà sistemato in un attimo. Aprite una console, digitate <c>ls /usr/bin</c> (o qualcos'altro che riempa la finestra di console) e controllate che la rotella del mouse vi permetta di scorrere su e giù all'interno della finestra. Dovrebbe funzionare!</p>
		
<p>Come ultima cosa assicuriamoci che X si avvii ad ogni avvio di Gentoo. Modificate <path>/etc/rc.conf</path> in questo modo:<e>DISPLAYMANAGER="kdm"</e>.</p>
				
<pre caption="Modifiche a /etc/rc.conf">
# <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption="/etc/rc.conf -- setting DISPLAYMANAGER">
# What display manager do you use ?  [ xdm | gdm | kdm ]
DISPLAYMANAGER=kdm
</pre>

<p>Ora abbiamo bisogno di accertarci che lo script di avvio di <e>xdm</e> venga letto all'avvio.</p>

<pre caption="Aggiunta di xdm al runlevel predefinito">
# <i>rc-update add xdm default</i>
</pre>

<p>Effettuate un reboot, e X/KDE si avvieranno automaticamente!</p>
				
<impo>Il comando <c>rc-update</c> è la versione migliorata per Gentoo Linux del vecchio comando	<c>chkconfig</c> per la gestione degli script di init. Digitate <c>rc-update</c> senza parametri per una lista delle opzioni.</impo>
			

</body>
</section>
</chapter>


<chapter>
<title>GNOME</title>
<section>
<title>Installazione</title>
<body>
<p>Prima di iniziare l'installazione dei pacchetti GNOME, potreste voler modificare le vostre variabili USE. In questo modo verrà abilitato il supporto a GNOME per le applicazioni che lo prevedono e che andrete a compilare.</p>
<ul>
<li>Accertatevi che "gtk" e "gnome" siano comprese nella sezione USE, all'interno di <path>make.conf</path>. </li>
<li>(Opzionale) Accertatevi che "-qt" e "-kde" siano comprese nella sezione USE, all'interno di <path>make.conf</path>. </li>
</ul>

<p>Quanto appena detto può essere fatto modificando <path>/etc/make.conf</path> in questo modo: </p>
<pre caption="Modificare make.conf">

# <i>nano -w /etc/make.conf </i>
<comment>(All'interno di make.conf)</comment>

USE="gnome gtk -kde -qt"
</pre>

<p>Per sapere di più delle variabili USE, fate riferimento a <uri link="http://www.gentoo.org/doc/it/use-howto.xml">USE HOWTO</uri>.</p>
<p>Ora installiamo i pacchetti GNOME necessari.</p>

<pre caption="Installazione dei pacchetti GNOME">
# <i>emerge --pretend gnome</i>
# <i>emerge gnome</i>
# <i>emerge xscreensaver</i>
# <i>env-update &amp;&amp; source /etc/profile</i>
</pre>

<p> Questa fase richiede molto tempo, per cui allontanatevi e guardate un film. Glu autori consigliano Pulp Fiction.</p>

<p>La configurazione di GNOME è praticamente identica a quella di KDE, da questo punto in poi. Non esistono file di configurazione specifici di GNOME, ma resta da configurare GDM, il login manager di GNOME:</p>
</body>
</section>

<section>
<title>Configurazione di GDM</title>
<body>
<p>Una volta che GNOME è stato installato, è consigliabile utilizzare un login manager, in questo caso il login manager di GNOME, GDM. GDM è compreso nei pacchetti di GNOME, e per eseguirlo è necessario digitare:</p>

<pre caption="Esecuzione di GDM">
# <i>gdm</i>
</pre>

<p>Dovreste essere in grado di effettuare il log e vedere GDM perfettamente in funzione. Il suono potrebbe non essere ancora funzionante, così potreste non aver sentito il suono di avvio di GNOME, ma verrà sistemato in un attimo. Aprite una console, digitate <c>ls /usr/bin</c> (o qualcos'altro che riempa la finestra di console) e controllate che la rotella del mouse vi permetta di scorrere su e giù all'interno della finestra. Dovrebbe funzionare!</p>

<p>Come ultima cosa assicuriamoci che X si avvii ad ogni avvio di Gentoo.
Modificate <path>/etc/rc.conf</path> in questo modo:
<e>DISPLAYMANAGER="gdm"</e>
</p>

<pre caption="Modificare /etc/rc.conf">
# <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption="/etc/rc.conf -- setting DISPLAYMANAGER">
# What display manager do you use ?  [ xdm | gdm | kdm ]
DISPLAYMANAGER=gdm
</pre>

<p>Ora abbiamo bisogno di accertarci che lo script di avvio di <e>xdm</e> venga letto all'avvio.</p>

<pre caption="Aggiunta di xdm al runlevel predefinito">
# <i>rc-update add xdm default</i>
</pre>

<p>Effettuate un reboot, e X/GNOME si avvieranno automaticamente!</p>

<impo>Il comando <c>rc-update</c> è la versione migliorata per Gentoo Linux del vecchio comando	<c>chkconfig</c> per la gestione degli script di init. Digitate <c>rc-update</c> senza parametri per una lista delle opzioni.</impo>
</body>
</section>
</chapter>

<chapter>
<title>Configurazione del sonoro</title>
<section>
<title>Alsa</title>
<body>
<p>Per l'installazione di ALSA fate riferimento alla <uri link="http://www.gentoo.org/doc/it/alsa-guide.html">Guida per l'installazione di ALSA</uri></p>
</body>
</section>

<section>
<title>Sonoro in KDE</title>
<body>
<p>KDE comprende alcune utility interessanti per il suono, tra cui il mixer <c>kmix</c>.</p>

<note>Se kmix non trova un mixer, probabilmente non è stato abilitato il supporto per il suono.	Effettuate il log out, eliminate <path>~/.kde/share/config/kmixrc</path> e <path>~/.kde/share/config/kmix:*</path> e effettuate un nuovo login. In questo modo kmix dovrebbe funzionare correttamente.</note>
</body>
</section>

<section>
<title>Sonoro e GNOME</title>
<body>
<p>Potresti voler provare a configurare il volume con <c>gnome-alsamixer</c>. Questo è parte del pacchetto <path>media-sound/gnome-alsamixer</path>.</p>
</body>
</section>
</chapter>

<chapter>
<title>Mail</title>
<section>
<title>Postfix -- Installazione e configurazione</title>
<body>

<p>Mi piace il sistema di posta <c>postfix</c> perchè emula <c>sendmail</c> evitandone l'incubo della configurazione.Installeremo anche <c>mutt</c>, un programma per la lettura della posta elettronica,in modo da poter provare anche la configurazione di <c>postfix</c>.</p>

<pre caption="Installazione di postfix e mutt">
# <i>emerge postfix mutt</i>
</pre>

<p>Se avete intenzione di utilizzare il vostro mail server per il solo invio dei messaggi, postfix è configurato.Altrimenti, dovete modificare <path>/etc/postfix/main.cf</path>. Il file <path>main.cf</path> è ben documentato e i valori predefiniti sono pensati per una macchina standalone. Se la vostra workstation è collegata direttamente a internet (per esempio con un indirizzo ip pubblico ed un nome DNS) l'unica modifica che probabilmente dovrete effettuare servirà per abilitare postfix alla ricezione dei messagggi.</p>

<pre caption="Configurazione di main.cf per la ricezione dei messaggi">
# RECEIVING MAIL

# The inet_interfaces parameter specifies the network interface
# addresses that this mail system receives mail on.  By default,
# the software claims all active interfaces on the machine. The
# parameter also controls delivery of mail to user@[ip.address].
#
#inet_interfaces = all
#inet_interfaces = $myhostname
#inet_interfaces = $myhostname, localhost
<i>inet_interfaces = $myhostname, localhost</i>
<i>mydestination = $myhostname, localhost.$mydomain</i>
</pre>
</body>
</section>

<section>
<title>Test di funzionamento di Postfix (con Mutt)</title>
<body>
<p>Verifichiamo il funzionamento</p>

<pre caption="Test di funzionamento di Postfix">
# <i>postfix check</i>
# <i>newaliases</i>
# <i>postfix start</i>
postfix-script: starting the Postfix mail system
# <i>mutt -x root</i>
/root/.maildir does not exist. Create it? ([y]/n): <comment>[rispondere y]</comment>
To:  &lt;root&gt;
Subject: test
(End message with a . on a line by itself)
test
..

# <i>mutt</i>
<comment>[dovrebbe essere visibile il messaggio]</comment>
</pre>

<p>Utilizzando <c>postfix check</c> ci accertiamo che <path>main.cf</path> non contenga errori e che tutte le directory necessarie vengano generate.Eseguendo <c>newaliases</c> vengono configurati gli alias di posta e <c>postfix start</c> attiva il programma. A questo punto ho utilizzato <c>mutt</c> (o <c>mailx</c>, un vecchio programma di posta) per spedirmi un messaggio sulla macchina locale. <c>mutt</c> genera la directory di spool dell'utente (root,in questo caso) <path>~/.maildir</path>. L'esecuzione di <c>mutt</c> in modalità totalmente interattiva  ha fatto si che il mio messaggio venisse visualizzato, per cui la spedizione/ricezione dei messaggi funziona, almeno in locale. Ho poi spedito un messaggio ad un mio indirizzo non locale e verificato che il messaggio sia effettivamente arrivato.</p>

<warn>Se si sta cercando di spedire una mail utilizzando il <path>main.cf</path> predefinito da una macchina su una rete privata, è possibile che non venga mai ricevuta. Molti server di posta rifiutano automaticamente i messaggi ricevuti che provengono da un calcolatore che non	può essere raggiunto da un  procedimento di reverse-DNS.</warn>

<p>Supponendo che tutto sia funzionante, è giunto il momento di far si che postfix si attivi durante la fase di boot.</p>

<pre caption="Configurare postfix per far che venga avviato al boot">
# <i>postfix stop</i>
postfix-script: starting the Postfix mail system
# <i>rc-update add postfix default</i>
 * postfix added to runlevel default...
 * Caching service dependencies...          [ ok ] 
 * rc-update complete.
# <i>/etc/init.d/postfix start</i>
Starting postfix......     [  ok  ]
</pre>

<impo>I veterani di <c>sendmail</c> o di <c>postfix</c> potrebbero essere abituati a memorizzare i messaggi in	<path>/var/spool/mail</path> anzichè nelle directory degli utenti,e questi messaggi vengono infatti memorizzati in formato <e>mbox</e> invece che nel formato <e>maildir</e>. Non è difficile riconfigurare <c>postfix</c> e <c>mutt</c> in modo da utilizzare il formato standard dei sistemi unix per la posta elettronica (<e>mbox</e>). Modificate il file <path>/etc/postfix/main.cf</path> commentando <c>home_mailbox</c> e decommentate <c>mail_spool_directory = /var/spool/mail</c>. Create la directory di spool per le mail con il comando <c>mkdir -p /var/spool/mail</c> e riavviate <c>postfix</c>. Per quanto riguarda il mailer , nel caso di <c>mutt</c> e sufficiente modificare <path>/etc/mutt/Muttrc</path> per utilizzare <e>mbox</e> con <c>set mbox_type = mbox</c> ed il percorso <path>/var/spool/mail</path> con <c>set spoolfile=/var/spool/mail</c>.</impo>

<p>Se preferite un client di posta con un interfaccia grafica, installeremo un server di posta basato su Web, Squirrelmail, più avanti nella guida. In alternativa, Daniel Robbins consiglia vivamente una combinazione di IMAP (che installeremo come requisito di Squirrelmail) ed  il client di posta di KDE, <c>kmail</c> . kmail fa parte del pacchetto <path>kde-base/kdenetwork</path>.</p>
				
<p>In seguito installeremo anche <e>Evolution</e> di Ximian in qualità di programma Personal Information Management, completo del supporto per i dispositivi Palm. E' inoltre un eccellente client di posta elettronica.</p>
</body>
</section>
</chapter>

<chapter>
<title>Samba</title>
<section>
<title>Installazione e configurazione di Samba.</title>
<body>

<p>Samba è un importante pacchetto che permette alla vostra macchina Linux di condividere file e stampanti con macchine MS Windows. Per ottenere informazioni più dettagliate leggete l'articolo di Daniel Robbins disponibili all'indirizzo <uri>http://www-136.ibm.com/developerworks/linux/</uri>.</p>

<pre caption="Installazione di Samba">
# <i>emerge samba</i>
# <i>rc-update add samba default</i>
# <i>cd /etc/samba</i>
# <i>cp smb.conf.example smb.conf</i>
# <i>nano -w smb.conf</i>
</pre>

<pre caption="smb.conf -- workgroup">
# workgroup = NT-Domain-Name or Workgroup-Name, eg: REDHAT4
workgroup = MYGROUP <comment>[modificare con il proprio workgroup]</comment>
</pre>

<pre caption="smb.conf -- stampa per mezzo di CUPS">
# It should not be necessary to specify the print system type unless
# it is non-standard. Currently supported print systems include:
# bsd, sysv, plp, lprng, aix, hpux, qnx
;   printing = bsd
printing = cups
</pre>

<p>
Avrete anche bisogno di attivare il modo RAW printing al fine di poter
stampare anche da Windows.
</p>

<p>
Editate <path>/etc/cups/mime.convs</path> per decommentare alcune linee.
I cambiamenti a mime.convs e a mime.types sono necessari per far si che
CUPS possa stampare anche documenti di tipo Microsoft Office.
</p>

<pre caption="/etc/cups/mime.convs">
<comment>(La seguente linea si trova vicino alla fine del file. Decommentatela)</comment>
application/octet-stream        application/vnd.cups-raw        0
</pre>

<p>
Editate <path>/etc/cups/mime.types</path> per decommentare alcune linee.
</p>

<pre caption="/etc/cups/mime.types">
<comment>(La seguente linea si trova vicino alla fine del file. Decommentatela)</comment>
application/octet-stream
</pre>

<pre caption="smb.conf -- encryption">
# You may wish to use password encryption. Please read
# ENCRYPTION.txt, Win95.txt and WinNT.txt in the Samba documentation.
# Do not enable this option unless you have read those documents
encrypt passwords = yes
</pre>

<p>Ho un bisogno minimo di Samba. Voglio solamente condividere dei files tra le mie macchine linux e windows, e voglio usare la mia macchina linux come server di stampa (utilizzando <c>cups</c>). Terminata l'installazione sono sufficienti poche modifiche al file <path>/etc/samba/smb.conf</path>. In particolare la variabile <e>workgroup</e> deve essere la stessa della rete windows (Spesso utilizzo "OLYMPUS", ma "WORKGROUP" è il valore definito di windows, se non ricordo male), <e>printing</e> deve essere <e>cups</e> e non <e>bsd</e>, e <e>encrypt passwords = yes</e> non deve essere commentata. Le macchine Windows utilizzano di default password criptate, per cui l'ultima modifica è necessaria se non volete modificare il registro di Windows su tutte le vostre macchine <c>[sconsigliato]</c>. Sfortunatamene Windows impiega un differente modo di criptare le password rispetto a quello impiegato da Linux, per cui dovete utilizzare un file di password separato per Samba.</p>
			
<pre caption="Aggiungere utenti di Samba">
# <i>smbpasswd -a grant</i> <comment>[Sostituite "grant" con il vostro nome utente</comment>
New SMB password:
Retype new SMB password:
Added user grant.
</pre>

<note>Per aggiungere un utente al file di password di samba l'utente deve essere nella lista in <path>/etc/passwd</path>.</note>

<p>E' necessario eseguire quanto detto per ogni utente che deve utilizzare samba da una macchina Windows. Samba memorizza le password nel file <path>/etc/samba/private/smbpasswd</path>, che viene generato la prima volta che si esegue il comando <c>smbpasswd</c> command.</p>

<pre caption="Avvio di Samba">
# <i>/etc/init.d/samba start</i>
Starting samba...        [  ok  ]
</pre>

<p>Avviate samba e sarete in grado di raggiungere la vostra macchina Gentoo da una qualunque delle macchine windows e vedere la directory home dell'utente collegato e quali stampanti sono configurate. Se non riusicite a collegarvi date un'occhiata a <path>/usr/share/doc/samba-2.2.5-r1/full_docs/textdocs/DIAGNOSIS.txt.gz</path> per un aiuto in più.</p>
</body>
</section>
</chapter>

<chapter>
<title>Apache e Squirrelmail Webmail</title>
<section>
<title>Apache con SSL e PHP</title>
<body>
<p>Se disponente di un indirizzo IP statico (o avete a disposizione un servizio come dyndns con il vostro indirizzo IP dinamico), potreste voler controllare la vostra posta elettronica quando siete fuori città. Per questo ho deciso di configurare un Webmail server, Squirrelmail, al quale posso accedere in remoto utilizzando un qualunque browser.</p>

<p>Per prima cosa è necessario installare un server web. La maggior parte del mondo usa Apache, e così faremo anche noi. Contemporaneamente installeremo mod_php (supporto PHP per Apache), poichè Squirrelmail è un programma PHP.</p>


<pre caption="Installazione e configurazione di Apache">
# <i>emerge apache mod_php</i>
</pre>


<p>E' consigliabile leggere attentamente il file <path>/etc/apache2/conf/apache2.conf</path>, poichè Apache offre molte possibilità di personalizzazione. Il documento root predefinito di Apache (dove cerca i file html quando vi collegate a http://www.servername.foo o http://localhost) è <path>/var/www/localhost/htdocs</path>; siete liberi di decidere quello che preferite.</p>

<pre caption="/etc/apache2/conf/apache2.conf">
# Do NOT add a slash at the end of the directory path.
#
DocumentRoot "/var/www/localhost/htdocs" <comment>(modificare questa linea,se necessario)</comment>
</pre>

<pre caption="Avvio di Apache durante la fase di boot">
# <i>rc-update add apache default</i>
 * apache added to runlevel default...
 * Caching service dependencies...               [ ok ]
 * rc-update complete.
# <i>nano -w /etc/conf.d/apache2</i>
</pre>

<p>Utilizzate <c>rc-update</c> per aggiungere Apache al runlevel predefinito, e modificate <path>/etc/conf.d/apache2</path> per aggiungere le righe seguenti in modo che Apache attivi automaticamente i moduli SSL e PHP all'avvio.</p>

<pre caption="/etc/conf.d/apache2">
APACHE2_OPTS="-D SSL -D PHP4"
</pre>

<pre caption="Riavvio di Apache">
# <i>/etc/init.d/apache2 start</i>
 * Starting Apache...                            [ OK ]
# <i>links localhost</i>
</pre>

<p>Potete controllare che Apache sia in funzione connettendovi a localhost da un qualunque browser. Per accertarvi che il supporto SSL sia funzionante utilizzate un browser per raggiungere <uri>https://localhost</uri>. Il prefisso <c>https</c> indica al browser che volete effettuare una conessione <e>sicura</e> impiegando SSL. I browser grafici hanno un'icona da qualche parte che indica che la connessione è sicura.</p>

<note>Durante una connessione sicura al vostro server riceverete probabilmente un avvertimento che indica che il certificato di sicurezza del sito che state visitando non è stato riconosciuto. L'ebuild mod_ssl installa un certificato	di sicurezza firmato che deve essere utilizzato solo in fase di test. Leggete il manuale di <c>mod_ssl</c>: 	<path>/usr/share/doc/mod_ssl-2.8.10</path>.  Per uso personale un certifico auto-autenticato è più che sufficiente.</note>

<p>Ora dobbiamo accertarci che anche PHP funzioni correttamente. Per prima cosa dobbiamo creare un file PHP semplice e metterlo nella DocumentRoot directory di Apache.</p>

<pre caption="Test di funzionamento di PHP">
# <i>nano -w /var/www/localhost/htdocs/test.php</i>
&lt;? phpinfo(); ?&gt;
# <i>links http://localhost/test.php</i>
</pre>


<pre caption="Apache e PHP in funzione">
    	                                           phpinfo() (p1 of 26)
                                   	                 PHP Logo
 	
                        	                       PHP Version 4.0.6
 
                                System Linux my.server.edu 2.4.10 #1 Tue Oct 9 16:33:50 Local
                         	    time zone must be set--see zic manuali686 i686 unknown
   	                                            Build Date Oct 16 2001
</pre>

<p>Se vedete qualcosa come sopra, Apache sta interpretando correttamente il codice PHP.</p>

<warn>Se guardate tutto quanto è stato riportato noterete che lo script <path>test.php</path> fornisce <e>molte</e>informazioni relative al vostro sistema. Una volta che siete certi che PHP funzioni correttamente potete eliminare lo script. (Oppure fate come me, digitate <c>mv test.php test.phps</c>.	Apache visualizzerà <path>test.phps</path> come un file di sorgente PHP invece di eseguire lo script)</warn>

</body>
</section>

<section>
<title>Courier IMAP</title>
<body>
<p>Squirrelmail è una applicazione PHP, necessita di un server IMAP e fa da collante tra il web server e la posta elettronica. Poiché Gentoo usa di default le cartelle Maildir, Courier IMAP è una buona scelta.</p>

<pre caption="Installazione e test di Courier-imap">
# <i>emerge courier-imap</i>
# <i>rc-update add courier-imapd default</i>
 * courier-imapd added to runlevel default...
 * Caching service dependencies...                        [ ok ]
 * rc-update complete.
# <i>nano -w /etc/courier-imap/authdaemonrc</i>
# <i>/etc/init.d/courier-imapd start</i>
# <i>telnet localhost 143</i>
Trying 127.0.0.1...
Connected to localhost.localdomain.
Escape character is '^]'.
* OK Courier-IMAP ready. Copyright 1998-2001 Double Precision, Inc.  
See COPYING for distribution information.
1 LOGIN grant passwd <comment>(&lt;-- sostituire "grant" con il proprio username e 
"passwd" con la propria password)</comment>
1 OK LOGIN OK
<comment>(Premere &lt;ctrl&gt;-"]" e digitare "quit" per uscire)</comment>
</pre>

<pre caption="Autorizzazioni corrette /etc/courier-imap/authdaemonrc">
##NAME: authmodulelist:0
#
# The authentication modules that are linked into authdaemond.  The
# default list is installed.  You may selectively disable modules simply
# by removing them from the following list.  The available modules you
# can use are: authcustom authcram authuserdb authpam

#authmodulelist="authcustom authcram authuserdb authpam"
authmodulelist="authpam"
</pre>

<impo>	Courier IMAP generalmente registra il nome della cartella Maildir all'interno dello script di avvio,<path>/usr/lib/courier-imap/imapd.rc</path>, ovvero <path>$HOME/Maildir</path>. Gentoo, invece, impiega $HOME/.maildir, per cui l'ebuild di courier-imap modifica <path>imapd.rc</path> per utilizzare <e>$MAILDIR</e>, che viene ottenuto dall'init script <path>/etc/init.d/courier-imap</path>.
Se scegliete di utilizzare una mailbox diversa da <path>.maildir</path>, dovrete modificare la voce <e>MAILDIR=.maildir</e> nello script di inizializzazione di courier-imap.</impo>

<p>Se desiderate che Courier IMAP comoprenda il supporto per SSL, dovete semplicemente generare un certificaro IMAP SSL (e indicare a courier-imap dove si trova).</p>

<pre caption="Generazione di un certificato SSL per IMAP">
# <i>/usr/sbin/mkimapdcert</i> 
</pre>

<p>dopodichè lanciare imap-ssl.</p>

<pre caption="Inserimnento di Courier IMAP al runlevel default">
# <i>rc-update add courier-imapd-ssl default</i>
# <i>/etc/init.d/courier-imapd-ssl start</i>
</pre>
<p>Per verificare che imap sia in funzione può essere utilizzato un qualsiasi client di posta compatibile con IMAP, quali netscape, kmail o mutt.</p>

<pre caption="Test del server IMAP">
# <i>mutt -f imap://localhost</i>
</pre>

<pre caption="Test del server SLL IMAP">
# <i>mutt -f imaps://localhost</i>
</pre>
</body>
</section>

<section>
<title>Squirrelmail</title>
<body>
<p>Fortunatamente, una volta terminata l'installazione di tutti gli altri componenti l'installazione e la configurazione di Squirrelmail è molto semplice.</p>

<pre caption="Installare Squirrelmail">
# <i>emerge squirrelmail</i>
# <i>cd /var/www/localhost/htdocs</i>
# <i>cd squirrelmail</i>
# <i>./configure</i>
</pre>

<note>Se la DocumentRoot del vostro Apache è diversa da <path>/var/www/localhost/htdocs</path> dovrete modificare l'ebuild di <path>net-mail/squirrelmail</path> in modo che contenga il percorso corretto.</note>

<p>Perchè squirrelmail possa lavorare correttamente, è necessario accertarsi che tutti i file siano di proprietà dell'utente utilizzato da Apache. (l'ebuild di squirrelmail assume sia "apache") Digitate <c>./configure</c> e selezionate l'opzione <e>2</e>.</p>

<pre caption="Configurazione di Squirrelmail -- Server settings">
SquirrelMail Configuration : Read: config.php
---------------------------------------------------------
Server Settings
1.  Domain               : my.server.edu
2.  IMAP Server          : localhost
3.  IMAP Port            : 143
4.  Use Sendmail/SMTP    : SMTP
6.    SMTP Server        : localhost
7.    SMTP Port          : 25
8.    Authenticated SMTP : false
9.  Server               : courier
10. Invert Time          : false
11. Delimiter            : detect

R   Return to Main Menu
C.  Turn color off
S   Save data
Q   Quit
 
Command >>
</pre>

<p>Accertatevi che  <e>Server</e> sa impostato su <e>courier</e>. Ritornate al menu principale e selezionate l'opzione <e>4</e>: General Options.</p>

<pre caption="Configurazione di Squirrelmail -- General options"> 
SquirrelMail Configuration : Read: config.php
---------------------------------------------------------
General Options
1.  Default Charset        : iso-8859-1
2.  Data Directory         : ../data/
3.  Attachment Directory   : /tmp/
4.  Default Left Size      : 150
5.  Usernames in Lowercase : false
 
R   Return to Main Menu
C.  Turn color off
S   Save data
Q   Quit
 
Command >>
</pre>

<p> L'autore utilizza le directory di default del pacchetto, anche se per ragioni di sicurezza sarebbe preferibile impiegarne una esterna a quella di Apache. L'autore impiega anche <path>/tmp</path> come directory dove memorizzare gli allegati.</p>

<p>Come ultima cosa è necessario far ripartire Apache, e il sistema è pronto</p>

<pre caption="Riavvio di Apache">
# <i>/etc/init.d/apache2 restart</i>
</pre>

<p>Ora è possibile raggiungere <uri>https://localhost/squirrelmail/src/login.php</uri>, e tutto dovrebbe essere funzionante!</p>

<pre caption="Test di Squirrelmail">
# <i>links https://localhost/squirrelmail/</i>
</pre>

<pre caption="Pagina di login di Squirrelmail">
                                          SquirrelMail - Login
        	                           [sm_logo.jpg]

       	              SquirrelMail version 1.2.0 [rc2]
           	        By the SquirrelMail Development Team
 
               	             SquirrelMail Login
 
       Name: ____________________
 Password: ____________________
 
   	                               Login
</pre>

<p>L'autore non consiglia di utilizzare lynx per accedere a Squirrelmail ma è comunque possibile!</p>
</body>
</section>
</chapter>

<chapter>
<title>Personal Information Management</title>
<section>

<title>Evolution con supporto per i dispositivi Palm</title>
<body>
<p>Evolution è un'appliazione PIM (Personal Information Management) veramente ben fatta in grado di sincronizzarsi con i dispositivi Palm. Per prima cosa bisogna effettuare l'emerge di Evolution. Se volete utilizzare evolution con un Palm, accertatevi che "pda" sia compreso nelle variabili USE all'interno di <path>/etc/make.conf</path>.	</p>

<pre caption="Installazione di Evolution">
# <i>emerge --pretend evolution</i>
# <i>emerge evolution</i> 
</pre>
<p>Sfortunamente, l'ebuild di evolution richiede un'eternità (noterete che <c>mozilla</c> è annoverato tra le dipendenze); preparate litri di caffè/thè per superare l'attesa.</p>
<p>Durante la compilazione di <c>evolution</c> vengono generati anche i tools relativi ai dispositivi Palm. Per essere certi che anche gli utenti normali possano sincronizzare i propri palmari è necessario modificare i permessi relativi alle porte seriali. Supponendo che il Palm venga collegato alla prima porta seriale (/dev/ttyS0, o /dev/tts/0 con la notazione "devfs").</p>

<pre caption="Configurazione dei dispositivi seriali">
# <i>groupadd serial</i>
# <i>chown root:serial /dev/tts/0</i>
# <i>chmod g+rw /dev/tts/0</i>
# <i>ls -l /dev/tts/0</i>
crw-rw----    1 root     serial     4,  64 Dec 31  1969 /dev/tts/0
# <i>ln -s /dev/tts/0 /dev/pilot</i>
# <i>nano -w /etc/group</i> <comment>(Aggiungere al gruppo serial gli utenti desiderati)</comment>
</pre>

<p>E' stato aggiunto un gruppo "serial" al sistema, e si dovrebbe aggiugere ogni utente che deve accedere alla seriale (ogni utente del sistema che possiede un Palm) a questo gruppo. Sono stati accordati i permessi "rw" a <path>/dev/tts/0</path>, e per comodità è stato	creato il limk simbolico <path>/dev/pilot</path> a <path>/dev/tts/0</path>. Grazie alle	recenti modifiche relative alla gestione di devfs da parte di Gentoo queste modifiche rimaranno attive anche dopo un reboot.</p>

<note>Gli utenti della versione pre-rc6-r13 posso effettuare un upgrade di <path>sys-apps/baselayout</path> e  <path>sys-apps/devfsd</path> (e raccogliere ogni file "._cfg*" in <path>/etc</path>) o semplicemente aggiungere i permessi necessari e creare un link simbolico in <path>/etc/devfsd.conf</path>.</note>

<p>Per utilizzare direttamente dal menu di evolution la voce <path>tools/Pilot settings</path> è necessario configurare il software di Gnome relativo. Non dimenticate di configurare "Pilot Conduits" e "Pilot Link" all'interno del Gnome Control Center.</p>
</body>
</section>
</chapter>
</guide>
