<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/macos-guide.xml,v 1.1 2004/09/15 21:47:20 mush Exp $ -->

<guide link="/doc/it/macos-guide.xml" lang="it">

<title>Guida d'Installazione ed Uso di Gentoo Per Mac OS X</title>

<author title="Autore, Redazione">
  <mail link="alexander@gentoo.org">Alexander Plank</mail>
</author>
<author title="Autore, Redazione">
  <mail link="gongloo@gentoo.org">Hasan Khalil</mail>
</author>
<author title="Autore">
  <mail link="pat2man@comcast.net">Patrick Tescher</mail>
</author>
<author title="Autore">
  <mail link="clement@varaldi.org">Clément Varaldi</mail>
</author>
<author title="Traduzione">
  <mail link="laera@cs.unibo.it">Dario Laera</mail>
</author>

<abstract>
Questa guida aiuta l'utente medio nell'installazione e nell'uso di portage in
Mac OS X.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->
<license/>

<version>1.0</version>
<date>13 Agosto 2004</date>

<chapter>
<title>Installazione</title>
<section>
<title>Requisiti di sistema</title>
<body>

<p>
Per poter installare Gentoo per Mac OS X, devono essere già installati i
seguenti software:
</p>

<ul>
  <li>Mac OS 10.2 o maggiore</li>
  <li>XCode Tools 1.2 o maggiore</li>
</ul>

<note>
Gli XCode Tools possono essere scaricati gratuitamente dall'area membri dell'
<uri link="https://connect.apple.com">Apple Developer Connection</uri>
(iscrizione gratuita richiesta).
</note>

<impo>
Raccomandiamo <e>fortemente</e> di installare XCode con X11 SDK.
</impo>

</body>
</section>
<section>
<title>L'Installer</title>
<body>

<p>
Come primo passo dovete scaricare l'<uri
link="http://www.metadistribution.org/macos">immagine dell'installer di Gentoo
per Mac OS X</uri>. Montando l'immagine dmg (cliccando due volte sull'icona),
il suo contenuto dovrebbe essere visualizzato in una finestra del finder; a
questo punto dovrebbe vedersi l'icona dell'installer. Cliccate su di essa e
seguite le istruzioni sullo schermo.
</p>

</body>
</section>
<section>
<title>Terminal.app</title>
<body>

<p>
Dopo aver terminato la procedura dell'installer, dovete aprire Terminal.app
(o un altro emulatore di terminale). Se un terminale è già aperto, è comunque
necessario aprire un'altra finestra terminale per poter utilizzare il software
installato dall'installer nella sessione corrente.
</p>

<warn>
Attualmente non sono supportate shell diverse da bash, molto probabilmente altre
non funzioneranno. Dovete cambiare la shell di default in Terminal.app cliccando
su Terminal->Preferences (nel menu della barra), scegliendo l'opzione "Esegui
questo comando", ed inserendo <c>/bin/bash</c>.
</warn>

</body>
</section>
<section>
<title>Aggiornare il Portage</title>
<body>

<p>
E' estremamente importante mantenere aggiornato il database di informazioni dei
pacchetti del partage (comunemente chiamato "portage tree"): lo trovate in
<path>/usr/portage</path>. Il portage tree mantiene informazioni su ogni
pacchetto che portage é in grado di installare, incluse le direttive da seguire
per automatizzare l'installazione. E' importante aggiornare queste informazioni
all'ultimo live tree disponibile, in modo da poter continuare con tutte le
informazioni aggiornate di tutti i pacchetti.
</p>

<p>
Una volta acceduta la console bisogna ottenere i privilegi di root per poter
continuare. Se siete un amministratore del computer, ottenerli si traduce in
un semplice uso di sudo.
</p>

<pre caption="Ottenere i privilegi di root">
$ <i>sudo su</i>
Password:
</pre>

<p>
Per essere sicuri di avere gli ultimi fix e le utlime informazioni sui pacchetti
disponibili, dovete sincronizzare il portage tree con quello disponibile sui
server gentoo.
</p>

<pre caption="Aggiornare il portage tree">
# <i>emerge sync</i>
</pre>

</body>
</section>
<section>
<title>Configurazione</title>
<body>

<p>
Ora bisogna comunicare al portage qualche informazione sulla vostra versione di
OSX. Il portage usa i file in <path>/etc/make.profile</path> per determinare
quali pacchetti sono già installati nel Mac OS X, quali sono mascherati per la
stessa versione di Mac OS X ed altre opzioni di default. Dovete usare uno dei
profili forniti, e semplicemente dare al sistema un alias da
<path>/etc/make.profile</path> ad un profilo pre-scritto. Inserite il comando da
uno dei blocchi sottostanti, scegliendo quello appropriato per il vostro
sistema.
</p>

<pre caption="Creare l'alias del profilo per Jaguar/Panther">
# <i>ln -s /usr/portage/profiles/default-macos-10.3 /etc/make.profile</i>
</pre>

<pre caption="Creare l'alias del profilo per Tiger">
# <i>ln -s /usr/portage/profiles/default-macos-10.4 /etc/make.profile</i>
</pre>

<note>
Utenti esperti possono modificare altre configurazioni del portage specificando
opzioni di configurazione in <path>/etc/make.conf</path>. Questo passo é
sconsigliato ad un utente medio.
</note>

</body>
</section>
<section>
<title>Installare il sistema dei pacchetti</title>
<body>

<p>
Successivamente, bisogna 'emergere' il sistema. Questo passo installa altri
pacchetti necessari al portage per lavorare correttamente.
</p>

<pre caption="Emergere il Sistema">
# <i>emerge system</i>
</pre>

<p>
Congratulazioni! Gentoo per Mac OS X ora é pronta per funzionare.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Installare Software Usando il Portage</title>

<section>
<title>Installare Software</title>
<body>

<p>
Tutto quel che serve per installare un pacchetto nel portage é semplicemente
emergerlo. Portage si prenderà cura di tutte le sue dipendenze. Installare un
pacchetto é veramente semplice una volta saputo il suo nome.
</p>

<pre caption="Emergere Lynx">
# <i>emerge lynx</i>
</pre>

</body>
</section>
<section>
<title>Pacchetti mascherati</title>
<body>

<p>
Ora dovreste essere in grado di emergere qualsiasi combinazione di pacchetti 
testati e aggiornati per lavorare con macos. Attualmente, solo un ristretto
numero di pacchetti non sono mascherati. Se un ebuild non ha la keyword macos,
aggiungetela, dovreste ricevere un messaggio simile al seguente.
</p>

<pre caption="Esempio di pacchetto mascherato">
# <i>emerge -p cowsay</i>

These are the packages that I would merge, in order:

Calculating dependencies
!! all ebuilds that could satisfy "cowsay" have been masked.
!! possible candidates are:
- games-misc/cowsay-3.03 (masked by: missing keyword)
</pre>

</body>
</section>
<section>
<title>Testare pacchetti</title>
<body>

<p>
Potreste voler testare un pacchetto voi stessi per vedere se funziona,
indipendentemente dalla mascheratura. Mentre sconsigliamo all'utente medio
operazioni del genere, persone che vogliono aiutare gli sviluppatori nel testare
pacchetti sono libere di cambiare lo stato dei pacchetti e testare gli stessi
nel loro sistema. Questo é possibile aggiungendo la keyword macos al file di
informazione del pacchetto, altrimenti detto 'ebuild'. Per aggiungere la keyword
macos ad un ebuild bisogna usare il comando 'ekeyword', parte del pacchetto
gentoolkit-dev.
</p>

<pre caption="Installare gentoolkit-dev">
# <i>emerge gentoolkit-dev</i>
</pre>

<pre caption="Keywording a package">
# <i>cd /usr/portage/games-misc/cowsay</i>
# <i>ekeyword macos cowsay-3.03.ebuild</i>
</pre>

<p>
Se il pacchetto si compila con successo e funziona correttamente, potete spedire
un bug a <uri link="http://bugs.gentoo.org">Gentoo Bugzilla</uri> (iscrizione
gratuita richiesta) notificandoci che il pacchetto funziona (sentitevi liberi
di assegnare il bug al team di sviluppo Gentoo per Mac OS X, osx@gentoo.org).
Se non funziona, spedite un bug che mostri gli errori che avete ricevuto
(solitamente ci sono una grande quantita di errori; fate copia e incolla dal
primo messaggio che pare un errore, fino alla fine dell'output).
</p>

<p>
Per molti di quei pacchetti che necessitano X11 per l'esecuzione, dovete
installare l'X11 development package. Se non l'avete fatto durante
l'installazione di Xcode, potete installarlo senza difficoltà dal file
<path>X11SDK.pkg</path>, situato nella directory <path>Packages</path> del
vostro cd XCode 1.2 (basta un doppio click per installare). Non é ancora 
possibile emergere il portage dall'ebuild. C'é un
<uri link="#doc_chap6_sect4">workaround</uri> per i pacchetti che dipendono
dal portage (come gentoolkit).
</p>

</body>
</section>
<section>
<title>Pacchetti già installati</title>
<body>

<p>
Se trovate un pacchetto che é già installato, potete scrivere un bug su
<uri link="http://bugs.gentoo.org">Gentoo Bugzilla</uri> (iscrizione gratuita
richiesta). Nel vostro sistema potete aggiungere pacchetti a <path>/etc/portage
package.provided</path> per dire al portage che sono già installati.
</p>

<pre caption="Aggiungere pacchetti a package.provided">
# <i>echo cat-name/package-x.y.z >> /etc/portage/package.provided</i>
</pre>

<note>
Per vedere una lista dei pacchetti che gli sviluppatori hanno giudicato come
preinstallati dalla Apple sulla vostra versione di Mac OS X, potete consultare
il file <path>/etc/make.profile/package.provided</path>.
</note>

<warn>
Si sconsiglia di modificare <path>/etc/make.profile/package.provided</path>
perch il file viene sovrascritto ogni volta che il portage tree viene
aggiornato (via 'emerge sync').
</warn>

</body>
</section>
</chapter>

<chapter>
<title>Usare il CVS</title>
<section>
<title>Problemi con il Case Sensitive</title>
<body>

<p>
Lo script in CVS ha problemi con file system case-insensitive, come HFS(+),
quindi si rende necessario creare un'immagine con file system case-sensitive
(si raccomandano almeno 750MB di dimensione) dove estrarre il portage tree CVS.
Uno dei seguenti comandi può essere usato pe rcreare questa immagine di file
system:
</p>

<pre caption="Creare un'immagine UFS case-sensitive">
<comment>(Sostituire 'gentoo-cvs.dmg' col nome desiderato per il
file,</comment>
<comment>e 'Gentoo-CVS' col nome desiderato per il volume)</comment>
$ <i>hdiutil create -size 750m gentoo-cvs.dmg -volname Gentoo-CVS -fs UFS</i>
</pre>

<pre caption="Creare un'immagine HFS+ case-sensitive">
<comment>(Sostituire 'gentoo-cvs.dmg' col nome desiderato per il file,</comment>
<comment>e 'Gentoo-CVS' col nome desiderato per il volume)</comment>
$ <i>hdiutil create -size 750m gentoo-cvs.dmg -volname Gentoo-CVS -fs HFSX</i>
</pre>

<warn>
Sviluppatori: repoman non funzionerà con spazi nel path del portage tree; non
usare spazi nel nome del volume per la vostra immagine CVS.
</warn>


</body>
</section>
</chapter>

<chapter>
<title>Disinstallazione</title>

<section>
<title>Script di disinstallazione</title>
<body>

<p>
Per disinstallare Gentoo per Mac OS X, potete usare lo
<uri link="http://dev.gentoo.org/~alexander/files/uninstall.pl">
script di disinstallazione</uri>, che vi permette di scegliere se
volete o meno fare un 'unmerge' dei pacchetti installati con Gentoo
per MacOS.
</p>

<pre caption="Disinstallare Gentoo per Mac OS X">
# <i>sudo perl uninstall.pl</i>
</pre>

<note>
Per disinstallare dovete eseguire lo script con privilegi di root.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Pacchetti disponibili</title>

<section>
<title>Overview</title>
<body>

<p>
Ci sono diversi modi per vedere una lista di pacchetti che sono stati marcari
con la keyword 'macos', quindi marcati come stabili su Mac OS X. Finché ci sarà
un grande sviluppo nel marcare stabili pacchetti per Gentoo per Mac OS X,
consigliamo agli utenti di controllare la lista dei pacchetti disponibili
frequentemente.
</p>

</body>
</section>
<section>
<title>Gentoo Fresh Mac OS X Ebuilds</title>
<body>

<p>
Il sito <uri link="http://packages.gentoo.org/archs/macos/stable/">Gentoo Linux
Fresh Mac OS X Ebuilds</uri> é part del sito ufficiale<uri
link="http://packages.gentoo.org">Fresh Gentoo Ebuilds</uri>. Questo non offre
solo un lista con le informazioni per gli attuali ebuild, ma permette anche
ricerche e features più popolari, come RSS feeds (anche sulla base di una
keyword). C'é un <uri
link="http://packages.gentoo.org/archs/macos/stable/gentoo_simple.rss">
RSS feeds per gli ultimi ebuild keyworded 'macos'</uri> disponibile su <uri
link="http://packages.gentoo.org/feeds">Fresh Gentoo Ebuilds Feeds List</uri>.
</p>

</body>
</section>
<section>
<title>Gentoo-Portage.com</title>
<body>

<p>
<uri link="http://www.gentoo-portage.com">Gentoo-Portage.com</uri> una risorsa
non ufficiale per informazioni sul portage tree, simile a <uri
link="http://packages.gentoo.org">Fresh Gentoo Ebuilds</uri>, ma offre più
features su una base per ebuild, come una dipendenza inversa per pacchetto, etc.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Caratteristiche avanzate, e possibili problemi</title>

<section>
<title>Collision Protection</title>
<body>

<p>
Gentoo per MacOS fornisce una protezione dalle collisioni automatica che
previene la riscrittura da parte del portage di file che non ha inserito
lui stesso. Questa funzione può essere disabilitata con
<c>FEATURES="-collision-protect"</c>.
</p>

<pre caption="Permettere al portage di sovrascrivere file di Mac OS X ">
# <i>FEATURES="-collision-protect" emerge autoconf</i>
</pre>

<warn>
Disabilitare il collision protection <e>molto</e> pericoloso e può portare ad
un sistema non funzionante.
</warn>

</body>
</section>
<section>
<title>emerge: command not found</title>
<body>

<p>
L'installer di Gentoo per Mac OS X aggiorna il file <path>/etc/profile</path>
aggiungendo <path>/usr/lib/portage/bin</path> alla variabile d'ambiente
<c>PATH</c>. Per eseguire <c>emerge ...</c>, dovete digitare source
<path>/etc/profile</path> o fare log out ed un nuovo log in per evitare di dover
digitare l'intero path <path>/usr/lib/portage/bin/&lt;toolname&gt;</path> per
eseguire tool del portage.
</p>

</body>
</section>
<section>
<title>Errori con &lt;libreria&gt;.a</title>
<body>

<p>
Quando si installa un file <path>&lt;libreria&gt;.a</path> viene eseguito ranlib
per assicurarsi che la libreria venga riferita al path corretto. Quando viene
eseguito <c>make install</c> in un ebuild, il tutto viene in realtà installato
in <path>/var/tmp/portage&lt;package&gt;/image</path> invece che nell'attuale
live filesystem (livefs). Questo significa che le librerie che vengono
installate con da ebuild hanno riferimenti errati. Questo problema esiste solo
nel kernel darwin con i suo file <path>&lt;libreria&gt;.a</path>, il team di
Gentoo per Mac OS X sta lavorando ad una soluzione.
</p>

<p>
Secondo la politica di Gentoo per Mac OS X, per gli ebuild che installano
librerie bisogna verificare che funzionino correttamente prima di marcarli
'macos'. Spesso la ragione percui una libreria non funziona é perchè c'é un
riferimento ad un path errato. Se vi imbattete in un caso simile c'é un semplice
metodo per aggirare questo problema. Il comando <c>ranlib</c>, tra le altre
cose, risolve la questione dei path errati delle librerie.
</p>

<pre caption="Usare ranlib per correggere librerie non funzionanti">
<comment>(Sostituire '/usr/lib/libjpeg.a' con la libreria in
questione)</comment>
# <i>ranlib /usr/lib/libjpeg.a</i>
</pre>

</body>
</section>
<section>
<title>La dipendenza del portage</title>
<body>

<p>
Alcuni pacchetti hanno bisogno del portage installato. Attualmente c'é un
problema per cui il portage non sa di essere installato. Mentre il team di
Gentoo per Mac OS X sta lavorando su questo bug, esiste un semplice metodo per
aggirare il problema. E' possibile emergere qualsiasi pacchetto senza dover
emergere le sue dipendenze. Questo può essere usato per evitare la dipendenza
del portage, ma non dovrebbe mai essere usato per ogni altra dipendenza.
</p>

<pre caption="Ignorare le dipendenze in un emerge">
# <i>emerge --nodeps gentoolkit</i>
</pre>

</body>
</section>
</chapter>
</guide>
