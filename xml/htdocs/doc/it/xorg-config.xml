<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!--  $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/xorg-config.xml,v 1.13 2007/06/27 18:57:32 scen Exp $ -->

<guide link="/doc/it/xorg-config.xml" lang="it">
<title>Guida alla configurazione di X server</title>

<author title="Autore">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Traduzione">
  <mail link="richard77@libero.it">Federico Della Ricca</mail>
</author>

<abstract>
Xorg è il server X Window che permette agli utenti di avere a disposizione un
ambiente grafico. Questa guida spiega cos'è Xorg, come installarlo e il
significato delle varie opzioni di configurazione.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.17</version>
<date>2007-06-20</date>

<chapter>
<title>Cos'è il server X Window?</title>
<section>
<title>Interfaccia grafica vs. riga di comando</title>
<body>

<p>
L'utente medio può essere intimorito al pensiero di dovere digitare i comandi.
Perché non dovrebbe essere in grado di puntare e cliccare a suo piacimento
nell'ambito della libertà tipica di Gentoo (e in generale di Linux)? Ovviamente,
questo è possibile! Linux offre una grande varietà di comode interfacce utente e
ambienti grafici che è possibile aggiungere ad un'installazione esistente.
</p>

<p>
Una delle più grandi sorprese per gli utenti è che l'interfaccia utente non è
nient'altro che un programma che viene eseguito nel sistema. <e>Non è</e> parte
del kernel di Linux né di altre parti fondamentali del sistema. Essa è un
potente mezzo per sfruttare le capacità grafiche della propria workstation.
</p>

<p>
Data l'importanza degli standard, ne esiste uno per disegnare e muovere le
finestre sullo schermo, interagire con l'utente tramite tastiera e mouse e
gestire altri importanti aspetti di base. Questo standard si chiama <e>X Window
System</e>, solitamente abbreviato in <e>X11</e> o anche solo <e>X</e>. Viene
utilizzato in Unix, Linux e in sistemi operativi tipo Unix in tutto il mondo.
</p>

<p>
L'applicazione che fornisce agli utenti Linux la capacità di eseguire interfacce
utenti grafiche e utilizza lo standard X11 è Xorg-X11, un derivato del progetto
XFree86. XFree86 ha deciso di utilizzare una licenza che potrebbe essere non
compatibile con la licenza GPL, per cui si raccomanda l'uso di Xorg. Il Portage
ufficiale non contiene più nessuna versione di XFree86.
</p>

</body>
</section>
<section>
<title>Il progetto Xorg</title>
<body>

<p>
Il progetto <uri link="http://www.x.org">X.org</uri> ha creato e mantiene una
implementazione open-source liberamente ridistribuibile dello standard X11. Esso
è un'infrastruttura desktop open-source basata su X11.
</p>

<p>
Xorg fornisce un'interfaccia fra l'hardware e il software grafico che si vuole
utilizzare. Oltre a ciò, Xorg è completamente trasparente alla rete, nel senso
che è possibile eseguire un programma su un sistema mentre lo si visualizza su
un altro.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Installare Xorg</title>
<section>
<title>Utilizzando emerge</title>
<body>

<p>
Per installare Xorg, basta eseguire il comando <c>emerge xorg-x11</c>. Porre
attenzione al fatto che l'installazione può impiegare parecchio tempo.
</p>

<p>
Prima di installare Xorg vanno configurate due importanti variabili nel file
<path>/etc/make.conf</path>.
</p>

<p>
La prima è <c>VIDEO_CARDS</c>. Serve a specificare i driver video che si
vogliono usare e di solito dipende dal tipo e marca della propria scheda video.
I valori più comuni sono <c>nvidia</c> per schede Nvidia e <c>fglrx</c> per
schede ATI Radeon. Questi sono i driver proprietari per, rispettivamente, Nvidia
e ATI. Se si preferiscono le versioni open source, usare <c>nv</c> al posto di
<c>nvidia</c> come valore per la variabile, tenendo ben presente che in questo
caso non si avrà l'accelerazione 3d. Il valore analogo per ATI è <c>radeon</c>,
in grado di fornire l'accelerazione 3D per le schede Radeon più datate, ma del
tutto inutile con Radeon recenti. La variabile <c>VIDEO_CARDS</c> può contenere
più di un driver, in questo caso i valori nell'elenco devono essere separati da
spazi.
</p>

<p>
La seconda variabile è <c>INPUT_DEVICES</c> e serve per determinare i driver da
compilare per i dispositivi di input. Nella maggior parte dei casi il valore
<c>keyboard mouse</c> dovrebbe funzionare.
</p>

<p>
A questo punto si devono decidere i driver da usare e modificare di conseguenza
il file <path>/etc/make.conf</path>:
</p>

<pre caption="Righe di esempio per make.conf">
<comment>(Per attivare il supporto a mouse e tastiera)</comment>
INPUT_DEVICES="keyboard mouse"
<comment>(Per schede Nvidia)</comment>
VIDEO_CARDS="nvidia"
<comment>(O, per schede ATI Radeon)</comment>
VIDEO_CARDS="fglrx"
</pre>

<p>
Maggiori istruzioni su come configurare le schede video Nvidia e ATI si trovano
nelle guide <uri link="/doc/it/nvidia-guide.xml">Guida nVidia per Gentoo
Linux</uri> e <uri link="/doc/it/ati-faq.xml">Gentoo Linux ATI FAQ</uri>. Se
non si sa quale driver scegliere, fare riferimento a queste guide per ulteriori
informazioni.
</p>

<note>
Se i valori suggeriti non funzionano, si dovrebbe eseguire <c>emerge -pv
xorg-server</c>, controllare tutte le opzioni disponibili e scegliere quelli che
applicabili al proprio sistema. L'esempio seguente si riferisce all'architettura
amd64 e <c>xorg-server-1.2</c>.
</note>

<pre caption="Visualizzazione dei valori disponibili dei driver">
 <i>emerge -pv xorg-server</i>

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] x11-base/xorg-server-1.2.0-r3  USE="dri nptl xorg (-3dfx) -debug
-dmx -ipv6 -kdrive -minimal -sdl -xprint" INPUT_DEVICES="keyboard mouse -acecad
-aiptek -calcomp -citron -digitaledge -dmc -dynapro -elo2300 -elographics -evdev
-fpit -hyperpen -jamstudio -joystick -magellan -microtouch -mutouch -palmax
-penmount -spaceorb -summa -synaptics -tek4957 -ur98 -vmmouse -void -wacom"
VIDEO_CARDS="nvidia -apm -ark -chips -cirrus -cyrix -dummy -epson -fbdev -fglrx
-glint -i128 (-i740) -i810 (-impact) (-imstt) -mach64 -mga -neomagic (-newport)
(-nsc) -nv -r128 -radeon -rendition -s3 -s3virge -savage -siliconmotion -sis
-sisusb (-sunbw2) (-suncg14) (-suncg3) (-suncg6) (-sunffb) (-sunleo) (-suntcx)
-tdfx -tga -trident -tseng -v4l -vesa -vga -via -vmware -voodoo" 0 kB
</pre>

<p>
Dopo aver impostato tutte le variabili necessarie installare il pacchetto Xorg.
</p>

<pre caption="Installare Xorg">
# <i>emerge xorg-x11</i>
</pre>

<p>
Quando l'installazione è terminata, potrebbe essere necessario reinizializzare
alcune variabili d'ambiente prima di continuare. Tutto ciò che è necessario fare
è eseguire il comando <c>env-update</c> seguito da <c>source /etc/profile</c> e
tutto dovrebbe andare a posto.
</p>

<pre caption="Reinizializzare le variabili d'ambiente">
# <i>env-update</i>
# <i>source /etc/profile</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Configurare Xorg</title>
<section>
<title>Il file xorg.conf</title>
<body>

<p>
Il file di configurazione di Xorg è chiamato <path>xorg.conf</path> e risiede in
<path>/etc/X11/</path>. Il pacchetto Xorg-X11 fornisce un esempio di
configurazione in <path>/etc/X11/xorg.conf.example</path> che può essere
utilizzato per creare la propria configurazione. Questo file di esempio è
dettagliatamente commentato, ma se è necessaria maggiore documentazione riguardo
alla sintassi, è disponibile la pagina di manuale:
</p>

<pre caption="Richiamare la pagina di manuale di xorg.conf">
# <i>man 5 xorg.conf</i>
</pre>

<p>
La lettura della pagina del manuale non è però necessaria, essendo disponibile
un modo per la creazione in automatico del file di configurazione.
</p>

</body>
</section>
<section>
<title>Modalità predefinita: Generazione automatica di xorg.conf</title>
<body>

<p>
Xorg stesso è in grado di ricavare la maggior parte dei parametri. Nella maggior
parte dei casi, è necessario solo cambiare alcune linee per impostare la
risoluzione voluta. Nel caso si desideri un regolazione più raffinata, leggere
attentamente i link forniti alla fine del capitolo. Per prima cosa generare un
file di configurazione per Xorg:
</p>

<pre caption="Generare un file xorg.conf">
# <i>X -configure</i>
</pre>

<p>
Leggere con attenzione le ultime linee stampate a schermo dopo che Xorg ha
finito di interrogare l'hardware. Se riporta errori di qualche tipo, sarà
necessario procedere alla scrittura manuale del file <path>xorg.conf</path>. Nel
caso in cui abbia funzionato, viene stampato l'avviso che è stato creato il file
<path>/root/xorg.conf.new</path>, pronto per essere provato.
</p>

<pre caption="Provare il file xorg.conf.new">
# <i>Xorg -config /root/xorg.conf.new</i>
</pre>

<p>
Se tutto è andato a buon fine, si dovrebbe vedere un semplice schema bianco e
nero. Si può muovere il mouse per verificarne il funzionamento, e verificare se
la risoluzione è corretta. Se si ricevono errori riguardanti "/dev/mouse",
provare a modificare la voce "Device" riguardante il mouse nella sezione
"InputDevice" del file <path>xorg.conf</path>, facendola puntare a
 <c>/dev/input/mice</c>. Anche se non si riesce a dedurre la risoluzione esatta,
si può lo stesso rendersi conto se è troppo bassa. In ogni momento si può
premere Ctrl-Alt-Backspace per chiudere l'X server.
</p>

</body>
</section>
<section>
<title>Modalità alternativa: Generazione semiautomatica di xorg.conf</title>
<body>

<p>
Xorg mette a disposizione uno strumento chiamato<c>xorgconfig</c> che ponendo
delle domande all'utente riguardo al sistema (adattatore grafico, tastiera, ...)
crea un file <path>xorg.conf</path>.
</p>

<pre caption="Generazione semiautomatica di xorg.conf">
# <i>xorgconfig</i>
</pre>

<p>
Un altro strumento, anch'esso fornito da Xorg, è <c>xorgcfg</c>, il quale prima
cerca di eseguire <c>Xorg -configure</c> e poi fa partire l'X server per un
ritocco finale alla configurazione.
</p>

<pre caption="Usare xorgcfg">
# <i>xorgcfg</i>
<comment>(Nel caso X si blocchi o la configurazione fallisca, provare:)</comment>
# <i>xorgcfg -textmode</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Mettere a punto il file xorg.conf</title>
<section>
<title>Sovrascrivere xorg.conf</title>
<body>

<p>
Per prima cosa copiare il <path>xorg.conf.new</path> sul file
<path>/etc/X11/xorg.conf</path> in modo da poter utilizzare i comandi
<c>startx</c> o <c>X</c> invece di <c>Xorg -config</c>.
</p>

<pre caption="Sovrascrivere il file xorg.conf">
# <i>cp /root/xorg.conf.new /etc/X11/xorg.conf</i>
</pre>

<p>
Eseguire l'X server, facendolo partire con il comando <c>startx</c>.
<c>startx</c> è uno script che fa partire una <c>X Session</c> (sessione di X,
NdT), ovvero esegue l'X Server e inoltre lancia alcune applicazioni grafiche che
si appoggiano all'X Server. <c>startx</c> decide che applicazioni lanciare sulla
base delle seguenti regole:
</p>

<ul>
  <li>
    Se nella home dell'utente esiste un file chiamato <path>.xinitrc</path>,
    vengono eseguiti i comandi in esso contenuti.
  </li>
  <li>
    In alternativa, viene letto il contenuto della variabile d'ambiente XSESSION
    ed eseguita la sessione corrispondente fra quelle definite nella directory
    <path>/etc/X11/Sessions/</path> (è possibile impostare il valore di XSESSION
    in <path>/etc/rc.conf</path> per assegnarle un valore predefinito per gli
    utenti del sistema).
  </li>
  <li>
    Come ultima risorsa, fa partire un semplice gestore di finestre, solitamente
    <c>twm</c>.
  </li>
</ul>

<pre caption="Far partire X">
# <i>startx</i>
</pre>

<p>
Nel caso in cui venga avviato <c>twm</c> (lo si riconoscerà dall'aspetto
veramente spartano e minimale) lo si può chiudere digitando <c>exit</c> o
premendo Ctrl-D nei terminali X visualizzati. Si può anche terminare la sessione
X con la combinazione Ctrl-Alt-Backspace. Questa è una maniera però piuttosto
brutale, da non utilizzarsi abitualmente, anche se non danneggia il sistema.
</p>

</body>
</section>
<section>
<title>Configurare la Risoluzione</title>
<body>

<p>
Se non si è soddisfatti della risoluzione, è necessario controllare due sezioni
nella configurazione. Per prima cosa vi è la sezione <e>Screen</e> in cui può
essere presente l'elenco delle risoluzioni disponibili per l'X server. Di
predefinito questa sezione potrebbe non elencare nessuna risoluzione. In questo
caso, Xorg valuta le risoluzioni sulla base delle informazioni presenti nella
seconda sezione, <e>Monitor</e>.
</p>

<p>
Xorg controlla i valori di <c>HorizSync</c> e <c>VertRefresh</c> nella sezione
<e>Monitor</e> per calcolare le risoluzioni valide. Per ora, lasciare questi
valori così come sono. Solo nel caso in cui i cambiamenti alla sezione
<e>Screen</e> (descritti più avanti) non funzionino sarà necessario consultare
le specifiche del monitor e introdurre i valori corretti.È possibile utilizzare
dei programmi che ricercano le specifiche del monitor, come
<c>sys-apps/ddcxinfo-knoppix</c>.
</p>

<warn>
<b>Non</b> provare a cambiare i valori di queste due variabili riguardanti il
monitor senza consultarne le specifiche tecniche. Introdurre valori non corretti
può portare nel caso migliore a errori di sincronia, nel peggiore a danneggiare
permanentemente il monitor.
</warn>

<p>
Procedere con il cambio della risoluzione. Nell'esempio che segue da
<path>/etc/X11/xorg.conf</path> vengono aggiunte una linea <c>Modes</c> e una
con un valore per <c>DefaultDepth</c> in modo che l'X server parta in modo
predefinito con la risoluzione di 1024x768 a 24 bit. I valori riportati sono
solo di esempio e potrebbero differire da quelli voluti nel proprio sistema.
</p>

<pre caption="Cambiare la sezione Screen in /etc/X11/xorg.conf">
Section "Screen"
  Identifier  "Default Screen"
  Device    "S3 Inc. ProSavage KN133 [Twister K]"
  Monitor   "Generic Monitor"
  <i>DefaultDepth  24</i>
  <comment># Alcune righe sono state rimosse per una maggiore
leggibilità</comment>
  SubSection "Display"
    Depth   24
    <i>Modes   "1024x768"</i>
  EndSubSection
EndSection
</pre>

<p>
Eseguendo X (<c>startx</c>) esso utilizza ora la risoluzione desiderata.
</p>

</body>
</section>
<section>
<title>Configurare la Tastiera</title>
<body>

<p>
Per configurare X per l'utilizzo di una tastiera internazionale (non americana,
NdT), bisogna cercare la sezione <e>InputDevice</e> che contiene la
configurazione della tastiera e aggiungere l'opzione <c>XkbLayout</c> per
specificare il layout di tastiera desiderato. L'esempio qui sotto mostra come
fare per una tastiera belga. Basta sostituire il codice paese con quello
appropriato (per l'Italia <c>it</c>, NdT):
</p>

<pre caption="Cambiare il layout della tastiera">
Section "InputDevice"
  Identifier  "Generic Keyboard"
  Driver    "keyboard"
  Option    "CoreKeyboard"
  Option    "XkbRules"  "xorg"
  Option    "XkbModel"  "pc105"
  <i>Option    "XkbLayout" "be"</i>
EndSection
</pre>

</body>
</section>
<section>
<title>Configurare il Mouse</title>
<body>

<p>
Se il mouse non funziona, per prima cosa bisogna accertarsi che venga rilevato
correttamente dal kernel. I mouse (come dispositivi) sono accessibili come
<path>/dev/input/mouse0</path> (o <path>/dev/input/mice</path> se si utilizzano
più dispositivi di puntamento). In altri casi viene utilizzato
<path>/dev/psaux</path>. In ogni caso è possibile controllare se un dispositivo
rappresenta il mouse controllando l'output di quest'ultimo e muovendo il mouse.
Se esso rappresenta il mouse, di solito compaiono caratteri "strani" sullo
schermo. Per terminare la sessione premere <c>Ctrl-C</c>.
</p>

<pre caption="Controllare un dispositivo">
# <i>cat /dev/input</i>
<comment>(Non dimenticarsi di premere Ctrl-C per terminare)</comment>
</pre>

<p>
Se il mouse non è rilevato, verificare che tutti moduli necessari siano stati
caricati.
</p>

<p>
Se il mouse  è rilevato, trascrivere il nome del dispositivo appropriato nella
sezione <e>InputDevice</e>. Nel prossimo esempio vengono specificate altre due
opzioni: <c>Protocol</c> (che indica il protocollo di comunicazione da
utilizzare, che è PS/2 o IMPS/2 per la maggior parte degli utenti) e
<c>ZAxisMapping</c> (che permette l'utilizzo di una eventuale rotellina sul
mouse).
</p>

<pre caption="Cambiare la configurazione del mouse in Xorg">
Section "InputDevice"
  Identifier  "TouchPad Mouse"
  Driver    "mouse"
  Option    "CorePointer"
  <i>Option    "Device"    "/dev/psaux"</i>
  <i>Option    "Protocol"    "IMPS/2"</i>
  <i>Option    "ZAxisMapping"    "4 5"</i>
EndSection
</pre>

<p>
Eseguendo <c>startx</c> si può verificare il risultato. Ora si dovrebbe avere a
disposizione sul sistema una installazione funzionante di Xorg. Il passo
successivo, che esula dallo scopo di questa guida, è quello si sostituire il
window manager minimale con una maggiormente dotato, o addirittura un ambiente
desktop come KDE o GNOME.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Risorse</title>
<section>
<title>Creare e mettere a punto xorg.conf</title>
<body>

<p>
Per prima cosa, <c>man 5 xorg.conf</c> fornisce una veloce ma completa guida
sulla sintassi utilizzata dal file di configurazione. È opportuno averla aperta
su un altro terminale mentre si modifica il file di configurazione.
</p>

<p>
Una seconda fonte di informazioni sul sistema è la directory
<path>/usr/X11R6/lib/X11/doc</path> con vari <path>README</path> specifici per i
vari chipset grafici.
</p>

<p>
Ci sono molte risorse online sulla modifica del file <path>xorg.conf</path>.
Alcune sono qui elencate, utilizzare <uri
link="http://www.google.com">Google</uri> per trovarne di ulteriori. Dato che
<path>xorg.conf</path> e <path>XF86Config</path> (il file di configurazione per
XFree86) usano la stessa sintassi per la maggior parte delle opzioni di
configurazione, e poiché vi sono più informazioni disponibili per
<path>XF86Config</path>, vengono elencate anche queste ultime.
</p>

<ul>
  <li>
    <uri link="http://tldp.org/HOWTO/XFree-Local-multi-user-HOWTO/">The XFree
    Local Multi-User HOWTO</uri>[In inglese]
  </li>
  <li>
    <uri
    link="http://www-106.ibm.com/developerworks/edu/os-dw-linuxxwin-i.html">An
    Introduction to XFree 4.x</uri> by Chris Houser [In inglese]
  </li>
</ul>

</body>
</section>

<section>
<title>Altre risorse</title>
<body>

<p>
Se si sta aggiornando dal vecchio Xorg monolitico al nuovo Xorg 7 modulare,
leggere la <uri link="/proj/it/desktop/x/x11/modular-x-howto.xml">Guida per la
migrazione a X Modulare</uri>.
</p>

<p>
Maggiori informazioni sulla configurazione di diversi pacchetti per funzionare
nell'ambiente X possono essere trovate nella sezione <uri
link="/doc/it/?catid=desktop">Documentazione Desktop Gentoo</uri> della
documentazione.
</p>

</body>
</section>
</chapter>
</guide>
