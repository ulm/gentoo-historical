<?xml version='1.0' encoding='UTF-8'?>

<!--  $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/xorg-config.xml,v 1.7 2004/09/27 15:05:59 neysx Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/it/xorg-config.xml" lang="it">

<title>HOWTO per la configurazione di X server</title>

<author title="Autore">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>

<author title="Traduzione">
  <mail link="richard77@libero.it">Federico Della Ricca</mail>
</author>

<abstract>
Xorg è il server X Window che permette agli utenti di avere un ambiente grafico a disposizione.
Questo HOWTO spiega cos'è Xorg, come installarlo e il significato delle varie opzioni di configurazione.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->
<license/>

<version>1.6</version>
<date>01 Agosto 2004</date>

<chapter>
<title>Cos'è il server X Window?</title>
<section>
<title>Interfaccia grafica vs. riga di comando</title>
<body>

<p>
L'utente medio può essere intimorito al pensiero di dovere digitare i comandi.
Perché non dovrebbe essere in grado di puntare e cliccare a suo piacimento nell'ambito della libertà tipica di Gentoo (e in generale di Linux)?
Ovviamente, questo è possibile!
Linux offre una grande varietà di comode interfacce utente e ambienti grafici che è possibile aggiungere ad un'installazione esistente.
</p>

<p>
Una delle più grandi sorprese per gli utenti è che l'interfaccia utente non è nient'altro che un programma che viene eseguito nel sistema.
<e>Non è</e> parte del kernel di Linux né di altre parti fondamentali del sistema.
Essa è un potente mezzo per sfruttare le capacità grafiche della vostra workstation.
</p>

<p>
Poiché gli standard sono importanti, esiste uno standard per disegnare e muovere le finestre sullo schermo, interagire con l'utente tramite tastiera e mouse e gestire altri importanti aspetti di base. Questo standard si chiama <e>X Window System</e>, solitamente abbreviato in <e>X11</e> o anche solo <e>X</e>. Viene utilizzato in Unix, Linux e in sistemi operativi tipo Unix in tutto il mondo.
</p>

<p>
L'applicazione che fornisce agli utenti Linux la capacità di eseguire interfacce utenti grafiche e utilizza lo standard X11 è Xorg-X11, un derivato del progetto XFree86. 
XFree86 ha deciso di utlizzare una licenza che potrebbe essere non compatibile con la licenza GPL, per cui si raccomanda l'uso di Xorg. Va sottolineato che attualmente le differenze fra Xorg e XFree86 sono minime: conscendone uno, si conosce anche l'altro.
Le versioni di XFree86 precedenti alla 4.4 sono inoltre disponibili tramite Portage.
</p>

</body>
</section>
<section>
<title>Il progetto Xorg</title>
<body>

<p>

Il progetto <uri link="http://www.x.org">X.org</uri> ha creato e mantiene una implementazione open-source liberamente ridistribuibile dello standard X11.
Esso è un'infrastruttura desktop open-source basata su X11.
</p>

<p>
Xorg fornisce un'interfaccia fra l'hardware e il software grafico che si vuole utilizzare.
Oltre a ciò, Xorg è completamente trasparente alla rete, nel senso che è possibile eseguire un programma su un sistema mentre lo si visualizza su un altro.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Installare Xorg</title>
<section>
<title>Utilizzando emerge</title>
<body>

<p>
Per installare Xorg, basta eseguire il comando <c>emerge xorg-x11</c>.
Si ponga attenzione al fatto che l'installazione può impiegare parecchio tempo.
</p>

<pre caption="Installare Xorg">
# <i>emerge xorg-x11</i>
</pre>


<note>
Per alcune architetture, Xorg non è stato trovato libero da bachi per abbastanza tempo, facendosi che restasse nel tree <path>~ARCH</path>. Se il comando emerge soprariportato dà errore riportando un avviso riguardo a "masked package" (pacchetto mascherato), si consulti il documento <uri
link="/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=2#doc_chap4">Software
Availability</uri>. Si spera di far entrare Xorg nella branca stabile al più presto.
</note>


<p>
Quando l'installazione è terminata, potrebbe essere necessario reinizializzare alcune variabli d'ambiente prima di continuare. Tutto ciò che è necessario fare è eseguire il comando 
<c>env-update</c> seguito da <c>source /etc/profile</c> e tutto dovrebbe andare a posto. Questo non può in alcuno modo danneggiare il sistema.
</p>

<pre caption="Reinizializzare le variabili d'ambiente">
# <i>env-update</i>
# <i>source /etc/profile</i>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>Configurare Xorg</title>
<section>
<title>Il file xorg.conf</title>
<body>

<p>
Il file di configurazione di Xorg è chiamato <path>xorg.conf</path> e risiede in <path>/etc/X11</path>. Il pacchetto Xorg-X11 fornisce un esempio di configurazione in <path>/etc/X11/xorg.conf.example</path> che può essere utilizzato per creare la propria configurazione.
Questo file di esempio è dettagliatamente commentato, ma se è necessaria maggiore documentazione riguardo alla sintassi, è disponibile la pagina di manuale:
</p>

<pre caption="Richiamare la pagina di manuale di xorg.conf">
# <i>man 5 xorg.conf</i>
</pre>

<p>
La lettura della pagina del manuale non è però necessaria, essendo disponibile un modo per la creazione in automatico del file di configurazione.
</p>

</body>
</section>
<section>
<title>Modalità predefinita: Generazione automatica di xorg.conf</title>
<body>

<p>
Xorg stesso è in grado di ricavare la maggior parte dei parametri. Nella maggior parte dei casi, è necessario solo cambiare alcune linee per impostare la risoluzione voluta.
Nel caso si desideri un settaggio più fine, si leggano attentamente i link forniti alla fine del capitolo. Per prima cosa si generi un file di configurazione per Xorg:
</p>

<pre caption="Generare un file xorg.conf">
# <i>X -configure</i>
</pre>

<p>
Si leggano con attenzione le ultime linee stampate a schermo dopo che Xorg ha finito di interrogare l'hardware. Se riporta errori di qualche tipo, sarà necessario procede a scrivere manualmente il file <path>xorg.conf</path>. Nel caso in cui abbia funzionato, stampa l'avviso che è stato creato il file <path>/root/xorg.conf.new</path>, pronto per essere provato.
</p>

<pre caption="Provare il file xorg.conf.new">
# <i>Xorg -config /root/xorg.conf.new</i>
</pre>

<p>
Se tutto è andato a buon fine, si dovrebbe vedere un gestore di finestre assai minimale chiamato <c>twm</c> (probabilmente il più piccolo gestore di finestre disponibile). Si può muovere il mouse e utilizzare la tastiera per verificare che funzionino.
Nella prossima sezione è spiegato come ottimizzare il file <path>xorg.conf</path> per il proprio hardware. Per uscire da Xorg, si può digitare <c>exit</c> (o premere Ctrl-D) sui terminali visibili sullo schermo. Nel caso non si possa usare il mouse per passare ai terminali, si può premere  Ctrl-Alt-Backspace per terminare l'X server.
</p>

</body>
</section>
<section>
<title>Modalità alternativa: Generazione semiautomatica di xorg.conf</title>
<body>

<p>
Xorg mette a disposizione uno strumento chiamato<c>xorgconfig</c> che ponendo delle domande all'utente riguardo al sistema (adattatore grafico, tastiera, ...) crea un file <path>xorg.conf</path>.
</p>

<pre caption="Generazione semiautomatica di xorg.conf">
# <i>xorgconfig</i>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>Mettere a punto il file xorg.conf</title>
<section>
<title>Sovrascrivere xorg.conf</title>
<body>

<p>
Per prima cosa si copi il <path>xorg.conf.new</path> sul file
<path>/etc/X11/xorg.conf</path> in modo da poter utilizzare il comando <c>startx</c> invece di <c>Xorg -config</c>.</p>

<pre caption="Sovrascrivere il file xorg.conf">
# <i>cp /root/xorg.conf.new /etc/X11/xorg.conf</i>
</pre>

<p>
Si esegua l'X server, facendolo partire con il comando <c>startx</c>. Verrà utilizzato il file appena copiato come file di configurazione. Per terminare la sessione X, digitare <c>exit</c> o
Ctrl-D nelle xterms che compaiono. E' possibile terminare la sessione di X utilizzando la combinazione Ctrl-Alt-Backspace. In questo modo tuttavia X termina in maniera non consueta, cosa non sempre desiderabile. Comunque non ci sono danni all'installazione.</p>

<pre caption="Far partire X">
# <i>startx</i>
</pre>

</body>
</section>
<section>
<title>Configurare la Risoluzione</title>
<body>

<p>
Se non si è soddisfatti della risoluzione, è necessario controllare due sezioni nella configurazione. Per prima cosa vi è la sezione <e>Screen</e> in cui può essere presente l'elenco delle risoluzioni disponibili per l'X server. Di predefinito questa sezione potrebbe non elencare nessuna risoluzione. In questo caso, Xorg valuta le risoluzioni sulla base delle informazioni presenti nella seconda sezione, <e>Monitor</e>.
</p>

<p>
Xorg controlla i valori di <c>HorizSync</c> e <c>VertRefresh</c> nella sezione <e>Monitor</e> per calcolare le risoluzioni valide.
Per ora, lasciare questi valori così come sono.
Solo nel caso in cui i cambiamenti alla sezione <e>Screen</e> (descritti più avanti) non funzionino sarà necessario consultare le specifiche del monitor e introdurre i valori corretti.E' possibile utilizzare dei programmi che ricercano le specifiche del monitor, come <c>sys-apps/ddcxinfo-knoppix</c>.
</p>

<warn>
<b>Non</b> provare a cambiare i valori di queste due variabili riguardanti il monitor senza consultarne le specifiche tecniche. Introdurre valori non corretti può portare nel caso migliore a errori di sincronia, nel peggiore a danneggiare permanentemente lo schermo.
</warn>

<p>
Si proceda a cambiare la risoluzione. Nell'esempio che segue da 
<path>/etc/X11/xorg.conf</path> vengono aggiunte una linea <c>Modes</c> e una con un valore per 
<c>DefaultDepth</c> in modo che l'X server di predefinito parta con la risoluzione di 1024x768 a 24 bit. I valori riportati sono solo di esempio e potrebbero differire da quelli voluti nel proprio sistema.
</p>

<pre caption="Cambiare la sezione Screen in /etc/X11/xorg.conf">
Section "Screen"
  Identifier  "Default Screen"
  Device    "S3 Inc. ProSavage KN133 [Twister K]"
  Monitor   "Generic Monitor"
  <i>DefaultDepth  24</i>
  <comment># Alcune righe sono state rimosse per una maggiore leggibilità</comment>
  SubSection "Display"
    Depth   24
    <i>Modes   "1024x768"</i>
  EndSubSection
EndSection
</pre>

<p>
Eseguendo X (<c>startx</c>) esso utilizza ora la risoluzione desiderata.
</p>

</body>
</section>
<section>
<title>Configurare la Tastiera</title>
<body>

<p>
Per configurare X per l'utilizzo di una tastiera internazionale (non americana, NdT), bisogna cercare la sezione <e>InputDevice</e> che contiene la configurazione della tastiera e aggiungere l'opzione <c>XkbLayout</c> per specificare il layout di tastiera desiderato.
L'esempio qui sotto mostra come fare per una tastiera belga. Basta sostituire il codice paese con quello appropriato (per l'Italia <c>it</c>, NdT):
</p>

<pre caption="Cambiare il layout della tastiera">
Section "InputDevice"
  Identifier  "Generic Keyboard"
  Driver    "keyboard"
  Option    "CoreKeyboard"
  Option    "XkbRules"  "xorg"
  Option    "XkbModel"  "pc105"
  <i>Option    "XkbLayout" "be"</i>
EndSection
</pre>

</body>
</section>
<section>
<title>Configurare il Mouse</title>
<body>

<p>
Se il mouse non funziona, per prima cosa bisogna accertarsi che venga rilevato correttamente dal kernel. I mouse di tipo PS/2 sono visti come il device <path>/dev/psaux</path>. Altri mouse (per esempio gli USB) sono visti come <path>/dev/input</path> (o <path>/dev/input/mice</path>). In ogni caso è possibile controllare se un device rappresenta il mouse controllando l'output del device e movendo il mouse. Per terminare la sessione premere <c>Ctrl-C</c>.
</p>

<pre caption="Controllare un device">
# <i>cat /dev/input</i>
<comment>(Non dimenticarsi di premere Ctrl-C per terminare)</comment>
</pre>

<p>
Se il mouse non è rilevato, verificare che tutti  moduli necessari siano stati caricati.
</p>

<p>
Se il mouse  è rilevato, si trascriva il nome del device appropriato nella sezione 
<e>InputDevice</e>. Nel prossimo esempio vengono specificate altre due opzioni: <c>Protocol</c> (che indica il protocollo di comunicazione da utilizzare, che è PS/2 o IMPS/2 per la maggior parte degli utenti) e <c>ZAxisMapping</c> (che permette l'utilizzo di una eventuale rotellina sul mouse).
</p>

<pre caption="Cambiare la configurazione del mouse in Xorg">
Section "InputDevice"
  Identifier  "TouchPad Mouse"
  Driver    "mouse"
  Option    "CorePointer"
  <i>Option    "Device"    "/dev/psaux"</i>
  <i>Option    "Protocol"    "IMPS/2"</i>
  <i>Option    "ZAxisMapping"    "4 5"</i>
EndSection
</pre>

<p>
Eseguendo <c>startx</c> si puàò verificare il risultato. Ora si dovrebbe avere a disposizione sul sistema una installazione funzionante di Xorg. Il passo successivo, che esula dallo scopo di questa guida, è quello si sostituire il window manager minimale con una maggiormente dotato, o addirittura un ambiente desktop come KDE o GNOME.</p>

</body>
</section>
</chapter>
<chapter>
<title>Risorse</title>
<section>
<title>Creare e mettere a punto xorg.conf</title>
<body>

<p>
Per prima cosa, <c>man 5 xorg.conf</c> fornisce una completa e veloce guida sulla sintassi utilizzata dal file di configurazione. E' opportuno averla aperta su un altro terminale mentre si modifica il file di configurazione.
</p>

<p>
Una seconda fonte di informazioni sul sistema è la directory
<path>/usr/X11R6/lib/X11/doc</path> con vari <path>README</path> specifici per i vari chipset grafici.
</p>

<p>
Ci sono molte risorse online sulla modifica del file <path>xorg.conf</path>. Alcune sono qui elencate, si utilizzi <uri link="http://www.google.com">Google</uri> per trovarne di ulteriori.
Dato che <path>xorg.conf</path> e <path>XF86Config</path> (il file di configurazione per XFree86) 
usano la stessa sintassi per la maggior parte delle opzioni di configurazione, e poiché vi sono più informazioni disponibili per <path>XF86Config</path>, vengono elencate anche queste ultime.
</p>

<ul>
  <li>
    <uri link="http://tldp.org/HOWTO/XFree-Local-multi-user-HOWTO/">The XFree
    Local Multi-User HOWTO</uri>
  </li>
  <li>
    <uri
    link="http://www-106.ibm.com/developerworks/edu/os-dw-linuxxwin-i.html">An
    Introduction to XFree 4.x</uri> by Chris Houser
  </li>
</ul>

</body>
</section>
</chapter>
</guide>
