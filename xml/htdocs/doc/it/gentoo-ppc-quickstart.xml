<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet href="../../xsl/guide.xsl" type="text/xsl"?>
<guide link="/doc/it/gentoo-ppc-quickstart.xml">
<title>Guida rapida Gentoo Linux PPC</title>
<author title="Gentoo PPC Developer"><mail link="daybird@gentoo.org">David Chamberlain</mail></author>
<author title="Mantenimento"><mail link="rajiv@gentoo.org">Rajiv Manglani</mail></author>
<author title="Traduttore"><mail link="paolo@pao.lo.it">Paolo Gabrielli</mail></author>
<author title="Traduttore" >
Team Italiano
</author>

<abstract>Questo documento è per coloro che sono già familiari con Gentoo
Linux.  Evidenzierà le principali differenze alle quali fare attenzione tra
il port PCC e la versione x86.  Se non sei familiare con la Gentoo,
devi prima leggere la Guida d'Installazione Gentoo.
</abstract>

<version>1.0.2</version>
<date>25 Ottobre 2002</date>

<chapter>
<title>  Pre-Installazione</title>
<section>
<body>
<warn>Questo documento non è aggiornato. Per favore segui invece la <uri link="http://www.gentoo.org/doc/it/gentoo-ppc-install.xml">Guida d'Installazione Gentoo Linux/PPC</uri>.</warn>
<p>Se stai per avere soltanto Linux come sistema operativo sulla tua macchina, allora sei pronto per iniziare.  Se
vuoi OS9 e/o OSX, prima dovrai configurare il tuo disco dall'ambiente Mac.  C'è una guida qui:
<uri>http://people.debian.org/~branden/ibook.html</uri>.  Guarda anche qui:
<uri>http://www.oreillynet.com/pub/a/mac/2002/03/29/ibook_linux.html</uri>.</p>
<p>Una differenza importante da queste procedure: non avrai bisogno di entrare nell'Open
Firmware per avviare l'installazione - farai il boot dal CD una volta che le tue partizioni
saranno state configurate e installate</p>
<p>
Non ti far portar via dal fare tante partizioni - quando guardi il disco
in mac-fdisk, vedrai che Apple ha già almeno 8 partizioni
all'inizio del tuo disco per i suoi drivers, e avrai bisogno di aggiungerne un'altra
per una specie di MBR finto che useremo.  Da quando uso Linux, sospetto che
il gran numero di partizioni sul mio disco fisso hanno reso OSX piuttosto
felice di andare in crash.  Ancora, una cosa da tenere in considerazione è creare una piccola, semplice partizione HFS 
("Apple Standard") così da poter comodamente scambiare i file tra Linux
e Mac - essendo il formato che entrambi possono leggere (anche se la cancellazione di files
sulla HFS mi ha dato qualche kernel panic sotto Linux; e dopo aver tolto questa partizione condivisa
partition, l'OSX ha smesso di andare in crash).</p>
<note>
La maggior parte degli utenti OSX concordano sul fatto che rappresenta una buona idea avere una partizione separata
per OS9 ("Classic"), anche se lo puoi installare nella stessa partizione dell'OSX.</note>
</body>
</section></chapter>

<chapter>
<title>  Usare il CD d'Installazione</title>
<section>
<body>

<p>
Puoi scaricare la iso del CD d'Installazione da <uri>http://ftp.sunsite.dk/projects/gentooppc/build</uri>. 
Se lo masterizzi come un CD master, sarà in grado di avviare il tuo Mac.  Con il CD nel lettore,
accendo il Mac mentre tieni premuto il tasto C. Oppure, tieni premuto il tasto Option per avere il menù di boot e scegli il CD.
I Mac più vecchi devono usare combinazioni arcande dei tast C, D, Shift e Option ecc. Se hai uno di questi, sperimenta.
Oppure puoi anche controllare il <uri link="http://www.info.apple.com/support/manuals.html">manuale</uri>.
</p>

<note>Se hai un vecchio Mac che non usa Open Firmware, o che usa una vecchia
versione di OF (la maggior parte delle macchine prima del G3 "Blue and White"),
dovrai usare <uri link="http://master.penguinppc.org/~benh">BootX</uri>
per avviare il CD (compreso in un archivio StuffIt sull'immagine di boot GentooPPC).
Come prima cosa questo deve essere installato e configurato nell'ambiente MacOS.
 
Guarda <uri link="http://penguinppc.org/projects/bootx">questa documentazione</uri> per qualche
(leggera) istruzione.  Dovrai poi copiare il ramdisk "initrd" e il kernel
(vmlinux) dalla cartella "boot" del cd alla cartella system folder (cartella di sistema) del tuo Mac, poi fai puntare
BootX verso di questi. Assocurati di leggere il file ReadMe incluso con BootX - ti dirà cosa
devi sapere.
</note>
<p>
Quando sei dentro al sito ftp, controlla se c'è una versione di
<path>build-ppc.tar.bz2</path> più recente dell'immagine del CD.  Se c'è,
scaricala - probabilmente contiene qualocosa che vuoi.
</p>

<p>
Se hai avviato con successo dal CD, potrai selezionare la modalità di boot che vuoi.
Nota che la quasi totalità dei Mac costruiti negli ultimi quattro anni circa
sono chiamati "New-World" e sono in grado di utilizzare la modalità di boot di default.
</p>

</body>
</section>
</chapter>

<chapter>
<title>  Configurare</title>
<section>
<body>
<p>
A differenza del CD di boot x86, la versione per PPC attiverà automaticamente tutto
l'hardware necessario senza bisogno di usare modprobe.  Vedrai istruzioni per
attivare la rete - si, non devi cercare i driver per il tuo ethernet.
Se ifconfig non funziona immediatamente, puoi vedere dentro a
/lib/modules se ci sono driver che puoi caricare - apparentemente il rilevamento automatico
pci non sempre riconosce la scheda sungem sui iBooks, così forse dovresti solamente fare "modprobe sungem".</p>
<p>
Ci sono, d'altra parte, alcuni driver utili dentro a /lib/modules - in
particolare Firewire.  Se vuoi usare un'unità a disco Firewire (o un
powerbook in modalità Target Disk :-) durante l'installazione - es. per caricare un tar di build più recente - prova:</p>
<pre>
# modprobe ieee1394
<codenote>attualmente penso sia compilato nel kernel</codenote>
# modprobe ohci1394
# modprobe sbp2
</pre>

<p>Questo dovrebbe collegare la tua unità come una periferica scsi emulata - controlla
<c>dmesg</c> per controllare se viene rilevato.  Se non funziona, prova a rimuoverli e a ricaricarli 
un paio di volte per verificare - il supporto firewire è presente da molto, 
ma è un po' impreciso, specialmente - ironia delle ironie - sulla piattaforma PPC.</p>

<note>No, non ho provato Target Disk con Linux - benchè sia un'idea...</note>

<p>Una volta configurata la rete, sei pronto a fare le partizioni, che farai con
<c>mac-fdisk</c>.  È quasi immediato - usa la "p" dopo i numeri di partizione
per scegliere il numero di default dei blocchi iniziali e finali.  Guarda le guide menzionate sopra, 
e non dimenticarti di creare una partizione speciale di bootstrap usando il comando "b" - questa
è la nostra versione di MBR (anche se non è necessaria se devi usare BootX invece di Yaboot).
Se la crei come prima partizione (non-driver), il Mac cercherà di avviarsi da questa per prima;
ma nota che non devi fare in questo modo. Una volta che hai finito l'installazione, avvia ed entra
nell'Open Firmware (Cmd-Option-O-F) e dagli qualche comando Forth criptico per dire alla macchina
da quale partizione avviarsi: <c>setenv boot-device hd:9,\\:tbxi</c>.
Ovviamente al posto del 9 ci devi mettere il numero giusto per te.</p>
<note>Da quando sono preoccupato sull'avere troppe partizioni, tengo
/boot sulla partizione radice. Ancora non ho avuto nessun problema.  E l'OSX ancora non è andato
in crash da quando ho rimosso la mia partizione HFS condivisa.
</note>
<note>Cosa fare con tutte queste partizioni Apple? È una buona idea scriversi i numeri importanti e i nomi di
queste partizioni.</note>
</body>
</section></chapter>

<chapter>
<title>  Installare</title>
<section>
<body>
<p>
Ora puoi seguire la maggior parte della Guida d'Installazione Gentoo.  Assicurati
che la tua connessione di rete funzioni (es. metti una voce dentro a <path>/etc/resolv.conf)</path>;
crea i(l) tuo(i) filesystem(s) Linux e fai il mount.  Scompatta i file tar di build
dentro a <path>/mnt/gentoo</path> - sappi che se vuoi scaricare ora una versione aggiornata
dei file tar, è disponibile wget - fai il mount di proc, copiati
<path>/etc/resolv.conf</path> e fai <c>chroot</c> dentro.</p>
<p>
Ora puoi eseguire <c>emerge rsync</c>, ma prima controlla <path>/etc/make.conf</path> - 
setta SYNC a rsync://rsync.gentoo.org/gentoo-portage.  Sei pronto per avviare e fare l'emerge system.</p>
<note>Raccomando fortemente di procurarsi tutti i sorgenti prima di iniziare: prima di riavviare,
dovresti fare <c>emerge --fetchonly</c> baselayout, gcc, glibc,
binutils e gettext. Prima di fare <c>emerge system</c>, <c>emerge --fetchonly system</c>.
</note>
<impo>Molti Mac non hanno un bottone per espellere il CD, e il tasto di espulsione sulla tastiera
non funzionerà sotto Linux (fincè non lo configurerai più tardi).  L'immagine di boot
<i>dovrebbe</i> permetterti di usare il comando <c>eject -r</c> per cacciare il CD.  Dopo che hai
avviato tramite questo CD e copiato o scompattato tutto quello di cui hai bisogno nella tua partizione linux,
non ne hai più bisogno.  Se vuoi usare un altro CD, magari per caricare
un file tar di build aggiornato o per usare i sorgenti ("distfiles") scaricati con una connessione
più veloce da un'altra parte, allora semplicemente fai l'unmount del CD di boot (se hai fatto il mount), 
fai <c>eject -r</c>, e inserisci l'altro CD.  Non appena sei in grado di fare l'emerge, esegui
<c>emerge eject</c> per essere sicuro di avere disponibile questo comando.  Guarda la guida d'installazione
principale per le istruzioni su come far prendere a Portage i sorgenti da un CD.</impo>
<note>Assicurati che il file <path>/etc/make.conf</path> abbia le impostazioni ppc: aprilo con il nano e
controlla che le opzioni ppc per il compilatore non siano commenti.  Vedrai che puoi scegliere tra due
set di impostazioni predefinite.  L'ottimizzazione inferiore è senza dubbio più sicura. 
Se il tuo make.conf per qualche ragione diventa rovinato, puoi trovare l'originale nella più recente cartella
<path>/usr/portage/sys-apps/portage/files</path>.</note>
</body>
</section></chapter>

<chapter>
<title>  Configurare il tuo sistema</title>
<section>
<body>
<p>
La principale differenza che troverai qui da x86 Linux è il bootloader, yaboot 
(a meno che non hai bisogno di usare BootX - vedi sopra).
È molto simile a lilo: le impostazioni vanno dentro a <path>/etc/yaboot.conf</path> - qui c'è il mio:</p>
<pre>
## /etc/yaboot.conf
##
## esegui: "man yaboot.conf" per i dettagli. Non apportare modifiche finchè non l'hai fatto!!
## guarda anche: /usr/share/doc/yaboot/examples per esempi di configurazione.
##
## Per un menù dual-boot, aggiungi una o più delle seguenti:
## bsd=/dev/hdaX, macos=/dev/hdaY, macosx=/dev/hdaZ

## la nostra partizione di bootstrap:
boot=/dev/hda9

##hd: è come l'openfirmware chiama hda
device=hd:
partition=11

root=/dev/hda11
delay=5
defaultos=macosx
timeout=30
install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot

#################
## Questa sezione può essere duplicata se hai più di un kernel o configurazioni di
## opzioni di boot
#################
image=/boot/vmlinux
	label=Linux
	read-only
##################

macos=/dev/hda13
macosx=/dev/hda12
enablecdboot
enableofboot
</pre>

<p>Una volta che <path>yaboot.conf</path> è configurato come vuoi, esegui
<c>mkofboot -v</c> per installare le impostazioni nella partizione di bootstrap.  Non dimenticartelo!
Se tutto va a buon fine, e hai le mie stesse opzioni, il tuo prossimo riavvio
ti mostrerà un semplice menù di boot a cinque voci. Se in seguito aggiorni il tuo file di configurazione
di yaboot,  dovrai solamente eseguire <c>ybin</c> per aggiornare la partizione di bootstrap - mkofboot serve 
solamente per la configurazione iniziale.
</p>

<note>
Yaboot ha qualche funzionalità per modificare i settaggi all'avvio, dai uno sguardo a
<uri>http://penguinppc.org/projects/yaboot</uri> per ulteriori informazioni.
</note>

<p>Anche per configurare e compilare il tuo kernel, la configurazione di default che è
nei sorgenti gentoo ppc conterrà già la maggior parte delle cose importanti.
Solitamente ci sono pochissimi driver alternativi per l'hardware Mac, e quelli
necessari saranno quasi sicuramente preselezionati.  Ancora, se hai qualche dubbio
usa l'opzione 'help' del <c>make menuconfig</c>.
Nota che avrai problemi a fare una bzImage.  Usa <c>make 
vmlinux</c> fino a quando non saprai cosa stai facendo.  In altre parole, dopo aver configurato il kernel, fai questo:</p>
<pre>
# make dep; make clean; make vmlinux; make modules; make modules_install
<codenote>l'immagine del kernel la potrai trovare in /usr/src/linux</codenote>
<codenote>ricorda di fare il mount di /boot se lo hai su una partizione separata ;-)</codenote>
# cp vmlinux /boot
# cp System.map /boot
</pre>
<impo>Per installare la versione PPC dei sorgenti del kernel, farai emerge 
<i>sys-kernel/ppc-sources</i>.
Attualmente questo è l'unico pacchetto del kernel per ppc - ma include la patch per XFS, a differenza
della maggior parte dei pacchetti del kernel per x86.</impo>
<note>Se vuoi sapere chi è Ben, guarda <uri>http://penguinppc.org/~benh</uri>
o <uri>http://ppckernel.org</uri>.  Lui è il mantainer del kernel PPC, e la maggior parte
degli utenti linux PPC usano i sorgenti dal suo tree, e non da quello di kernel.org.
</note>

<p>Un altro capriccio della piattaforma ppc è la difficoltà di configurare XFree. Per primo, se vuoi usare
il direct rendering con una scheda video, prova a caricare il modulo appropriato nel kernel,
giusto per essere sicuri.  Poi, recentemente ho avuto miglior fortuna con
<c>XFree86 --configure</c>; e ora abbiamo un ebuild di xeasyconf solo per ppc
(<c>emerge x11-misc/xeasyconf</c>) - un programma eccellente scritto specialmente per noi da Mark Guertin.
Ancora, quello che il programma di configurazione pensa che dovrebbe funzionare non è detto che lo faccia.
Il tuo mouse usb probabilmente sarà <path>/dev/input/mice</path>.
Se non conosci il tuo hardware (es. la scheda video), prova a fare emerge pci-utils, poi
usa il comando <c>lspci</c>.  Ti mostrerà i dettagli rilevanti.</p>

<note>
"Option" "UseFBdev" è tuo amico :-)
</note>

<p>Anche configurare il <i>sonoro</i> per linux su un Mac è un'arte nera, ma può essere fatto.  
Carica i moduli (<c>modprobe</c>) da <path>kernel/drivers/sound</path> (<i>soundcore</i> e <i>dmasound_pmac</i>),
installa un mixer (es. aumix), e provalo. Nota che nella KDE, dovrai specificare al sound server di usare OSS,
con il sonoro ad 8-bit. Se vuoi provare Alsa, il driver principale è <i>snd-card-awacs</i>, ma hai sempre bisogno
che siano caricati prima soundcore (kernel) e snd (alsa). Per usare Alsa nella KDE, carica anche i moduli di
compatibilità alsa-oss (snd-pcm, snd-pcm-plugin, snd-pcm-oss, snd-mixer-oss) e configura l'Arts soundserver per usare OSS,
non Alsa (sul serio!). Questo funziona con Alsa 0.5 - potrebbe cambiare con Alsa 0.9 .</p>
<note>Se compili dmasound nel kernel, non potrai rimuoverlo per provare Alsa (quindi usa i moduli).</note>


<p>Se vuoi provare ad accedere alla tua partizione hfs+, dai un'occhiata alle utilità di
<i>hfsplus</i> sul sito web penguinppc, e al componente kde
<i>kio-mac</i> - Ancora non l'ho provati, ma sono fatti per permetterti di leggere le partizioni mac da konqueror.
Presto arriveranno gli ebuilds.
</p>

<p>Un'altra potente applicazione linux-ppc è <i>MOL</i> (Mac on Linux).  Se hai una partizione
con OS9 o inferiore, dovresti essere in grado di farlo funzionare ad una velocità quasi
nativa <i>da dentro</i> Linux.  La configurazione piò essere un po' impegnativa, ma è proprio fico.
Per installarlo digita <c>emerge mol</c>.  Ora puoi usare Photoshop, o vedere animazioni Flash e Shockwave sul web,
senza riavviare :-).
</p>

<p>Bene, ci siamo.  Le cosa ora stanno funzionando molto bene, ma più persone
abbiamo che fanno testing, meglio è.  Se vuoi dare una mano a fare
un ebuild indipendente dall'architettura, dai uno sguardo a<path>
/usr/portage/media-sound/mpg123/mpg123r-r1.ebuild</path>.
Nota anche che ogni ebuild che scarica file binari, questi probabilmente non saranno funzionanti, a meno che l'autore
ha includo un alternativo binario per ppc (guarda i nuovi ebuild <path>xanim</path>.)
</p>
<note>Consiglio veloce: la console Linux sul video del mio iMac (DV400/2000) non si posiziona bene a destra: <c>fbset -move right</c> rimuove il problema.
</note>
</body>
</section>
</chapter>

<chapter>
<title>  Problemi di BootX</title>
<section>
<body>
<p>Qualche nota presa dalla mailing list:</p>
<ul>
<li>Se ottieni errori cercando di avviare da BootX, disabilita le estensioni e/o la memoria virtuale
quando avvii MacOS</li>
<li>Installare con BootX (grazie a Gerk):
<ol>
<li> Scompatta l'archivio BootX_1.2.2.sit dal cd in un punto che ricorderai del tuo disco fisso.</li>
<li> Copia il file vmlinux dalla cartella /boot del CD Gentoo alla cartella Linux Kernels dentro alla cartella BootX che
hai appena scompattato sul disco fisso</li>
<li> Copia il file initrd.img dalla cartella /boot del CD Gentoo nella cartella di BootX</li>
<li> Fai doppio click sull'applicazione BootX</li>
<li> Clicca sul bottone 'options' (opzioni) e seleziona come tuo ramdisk il file initrd.img che hai copiato</li>
<li> Clicca ok</li>
<li> Imposta la dimensione del ramdisk a 24000</li>
<li> Aggiungi il seguente testo agli argomenti del kernel: rw</li>
<li> Clicca sul bottone Linux a fai partire l'installazione (puoi anche salvare le preferenze cliccando appositamente)</li>
</ol></li>
<li>Se il mount del ramdisk initrd continua ad essere a sola lettura, puoi rifare il mount in lettura/scrittura in questo modo:
<c>#mount /dev/root / -o remount,rw</c></li>
<li>Molti comandi importanti sul initrd sono link simbolici a busybox.  Se ricevi un errore "command
not found" (comando non trovato), forse è andato perduto il link - rifai il mount in modalità rw (se necessario) e fai da te i link.</li>
<li>Il sito della SUSE che trovi sotto può essere molto utile per i problemi di bootX.</li>
</ul>

</body>
</section>
</chapter>

<chapter>
<title>  Risorse</title>
<section>
<body>

<ul>
<li>
Installare Debian sull'iBook: 
	<ol>
	<li><uri>http://people.debian.org/~branden/ibook.html</uri></li>
 	<li><uri>http://www.oreillynet.com/pub/a/mac/2002/03/29/ibook_linux.html</uri></li>
	</ol>
</li>

<li>
Tante e tante informazioni presso <uri link="http://tuxppc.org/">tuxppc</uri> (vi si trovano <uri link="http://forums.tuxppc.org/">forums</uri> molto utili)
</li>

<li>
<uri link="http://penguinppc.org/">penguinppc</uri>
</li>

<li>
<uri link="http://sdb.suse.de/sdb/en/html/keylist.PPC.html">SUSE Linux Knowledgebase</uri>
articoli su PPC (utile per risolvere i problemi).
</li>

<li>Lista dell'<uri link="http://www.debian.org/ports/powerpc/inst/install">hardware supportato</uri>
dalla Debian's PPC. La GentooPPC dovrebbe supportare le stesse macchine, anche se in pratica probabilmente
a noi ci vorrà un po' più di tempo a mettere insieme un disco di boot che funzioni per tutti.
</li>

<li>
<uri link="http://lists.debian.org/debian-powerpc/">Archivio della mailing list</uri> di Debian's PPC.
</li>

<li>
Linux su PowerPC <uri link="http://lppcfom.sourceforge.net/">FAQ-O-Matic</uri> (non aggiornato,
ma ancora un po' utile, specialmente per le macchine più vecchie).
</li>

<li>
<uri link="http://ppckernel.org/">ppckernel</uri>
</li>

<li>
<uri link="http://www.maconlinux.net/">Mac-on-Linux</uri>
</li>

<li>
<uri link="http://www.gentoo.org/doc/it/gentoo-x86-install.xml">Guida d'Installazioe Gentoo Linux x86</uri>
</li>

<li>
<uri link="http://www.netneurotic.net/mac/openfirmware.html">Guida sull'Open Firmware</uri>
</li>

<li>
<uri link="http://www.info.apple.com/support/manuals.html">Manuali Apple</uri>
</li>

</ul>

</body>
</section>
</chapter>

</guide>

