<?xml version = '1.0' encoding = 'UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/it/printing-howto.xml" >
<title>Guida per Stampare in Gentoo</title>
<author title="Autore" >
<mail link="zhen@gentoo.org" > 
		John P. Davis</mail>
</author>
<author title="Redazione" >
<mail link="sunflare@gentoo.org" >Phil Bordelon</mail>
</author>
<author title="Redazione" >
<mail link="wleggette@gate.net" >Wesley Leggette</mail>
</author>
<author title="Redazione">
<mail link="carl@gentoo.org">Carl Anderson</mail>
</author>
<author title="Redazione">
<mail link="lanius@gentoo.org">Heinrich Wendel</mail>
</author>
<author title="Redazione">
<mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Traduzione" >
<mail link="bsolar@bluewin.ch" >Christian Apolloni</mail>
</author>
<author title="Revisione della traduzione" >
<mail link="stefano.lucidi@gentoo-italia.org" >Stefano Lucidi</mail>
</author>
<abstract>Una guida completa per stampare in Gentoo Linux. Questo documento copre sia la stampa locale che quella in rete.
</abstract>

<version>1.8</version>
<date>7 Febbraio 2004</date>

<chapter>
<title>Installare CUPS e foomatic</title>
<section>
<body>
<p>
Configurare Gentoo per la stampa è un procedimento relativamente poco doloroso, grazie ad alcuni grandi programmi come CUPS (Common Unix Printing System) e foomatic. Entrambi sono molto facili da configurare per l'utente finale.
				</p>
<p>
Per favore sappi che CUPS è cross-desktop, cioè puoi seguire queste istruzioni per stampare sotto ad.es sia GNOME che KDE. Ci sono altre opzioni, come il print setup di KDE, ma credo che CUPS sia il più facile da configurare, e il più scalabile.
				</p>
<p>
Prima di effettuare l'emerge di CUPS, è una buona idea aggiungere le necessarie USE flags ad <path>/etc/make.conf</path>.
				</p>
<pre caption="Editare /etc/make.conf" >
<comment>aggiungete add cups, foomaticdb, ppds e usb (se usate una stampante USB) alla vostra lista di variabili USE. </comment>USE="cups  foomaticdb ppds usb altra_var1 altra_var2"
</pre>

<p>Per ulteriori informazioni sulle variabili USE, consulta l'<uri link="http://www.gentoo.org/doc/en/use-howto.xml" >USE HOWTO</uri>.
				</p>
<pre caption="Installare i Pacchetti necessari" > 
# <i>emerge cups</i>
# <i>emerge foomatic </i>
</pre>
</body>
</section>
</chapter>
<chapter>
<title>Configurare i Moduli del Kernel</title>
<section>
<title>Generale</title>
<body>
<p>
Ora che i pacchetti necessari sono installati, è tempo di installare la stampante.
				</p>
<p>A seconda del tipo di connessione alla stampante che usi, sarà necessario attivare nel kernel la porta parallela o quella USB per collegamenti alle stampanti.
				</p>
<note>Se non sei sicuro su come compilare il kernel, il Linux Kernel-HOWTO ufficiale può essere trovato <uri link="http://www.tldp.org/HOWTO/Kernel-HOWTO.html" >qui</uri>. Assicurati di scoprire come compilare e installare nuovi moduli senza ricompilare il kernel o riavviare il computer. Ti farà risparmiare molto tempo.
</note>		
</body>
</section>	
<section>	
<title>Moduli USB</title>
<body>
<p>Per attivare il supporto alle stampanti USB, vai sotto USB support e attiva <c>Support for USB</c> e
				<c>USB Printer support</c>. Selezionando entrambi come moduli installerà usbcore.o e printer.o nella tua directory dei moduli. Ti suggerisco di usare i moduli, così non dovrai riavviare il computer. Gli utenti del kernel 2.6 kernel troveranno queste opzioni
sotto <c>Device Drivers</c>.
				</p>

<p>Dopo che il kernel è compilato e il tuo computer riavviato, è tempo di caricare i moduli necessari:
				</p>
<pre caption="Caricare i moduli USB" > 
# <c>modprobe usbcore</c> 
<comment>(Per gli utenti del kernel 2.4:)</comment>
# <c>modprobe printer</c>
<comment>(Per gli utenti del kernel 2.6:)</comment>
# <i>modprobe usblp</i>
</pre>
<p>Dopo che i moduli sono caricati con successo, collega la stampante e controlla <path>/var/log/messages</path> Per vedere se è stata rilevata.
				</p>
<note>Se usi qualcosa di diverso da sysklogd, il tuo file log del kernel sarà diverso.</note>
<pre caption="Controllare Messaggi del Kernel" > 
# <i>tail /var/log/messages</i>
</pre>
<p>
Dovresti vedere qualcosa di questo tipo:
				</p>
<pre caption="/var/log/messages Output" >
hub.c: USB new device connect on bus2/2, assigned device number 2 
printer.c: usblp0: USB bidirectional printer dev 2 if 0 alt 1 proto 2 vid 0x03F0 pid 0x1104 
				</pre>
</body>
</section>	
<section>	
<title>Parallel Port Modules</title>
 <body>
 <p>
Per abilitare il supporto alla porta parallela, andate in <c>Parallel port support</c> e abilitate
<c>Parallel port support</c> e <c>PC-style hardware</c>. A seconda della vostra
 stampante potrest dover attivare <c>Multi-IO cards (parallel and serial)</c>,
 <c>Support for foreign hardware</c> e <c>IEEE 1284 transfer mode</c>. Poi
 andate in <c>Character devices</c> e abilitate <c>Parallel Printer Support</c>. Gli utenti del
kernel 2.6 trveranno queste opzioni sotto <c>Device Drivers</c>.
</p>
  	 
<p>
Dopo che il kernel è stato compilato, assicuratevi che la stampnate è collegata e riavviate
il computer. Ora è il momento di caricare i moduli necessari:
</p>
  	 
<pre caption = "Loading Parallel Port modules">
# <i>modprobe lp</i> <comment>(Solo per gli utenti del 2.6)</comment>
# <i>modprobe parport</i>
# <i>modprobe parport_pc</i>
</pre>
  	 
  <p>
Dopo che i moduli sono caricati con successo, controllate <path>/var/log/messages</path> 
per vedere se è stata rilevata.
</p>
  	 
<note>Se usi qualcosa di diverso da sysklogd, il tuo file log del kernel sarà diverso.</note>

 
<pre caption = "Checking Kernel Messages">
# <i>tail /var/log/messages</i>
</pre>
 
<p>
Dovreste vedere qualcosa di simile a questo:
</p>
  	 
<pre caption = "/var/log/messages Output">
lp0: using parport0 (polling).
</pre>
  	 
</body>
</section>
<section>
<title>Low-level testing</title>
<body>
 
<p>Prima di installare la stampante con CUPS, si può testarla con alcuni semplici comandi a basso livello.
				</p>
<pre caption="Testare la Stampante isamdp cat" >
# <i>touch test.txt</i>
# <i>echo &quot;Hello World&quot; > test.txt</i>
# <i>cat test.txt > /dev/usb/lp0 </i>
<comment> Alternativamente, per stampanti parallele: </comment>
# <i>cat test.txt > /dev/lp0 </i>
</pre>
<note>
  	 Alcune stampanti (e.g.tipo alcune HP LaserJets) necessitano di un ^L
  	 (Control-L) alla fine del file.
  	 Senza il ^L  cat lavora correttamente, ma la stampante assorbe i dati
  	 e non succede nulla.
  	 </note>
	 
</body>
</section>
</chapter>
<chapter>
<title>Driver Speciali per la Stampante</title>
<section>
<body>
<p>
				Prima di usare foomatic per genereare un file PPD, potrebbe essere necessario trovare i driver di terze parti per la tua stampante. Ad.es, Epson rende disponibili <uri link="http://www.epkowa.co.jp/english/linux_e/linux.html" >diversi driver per stampanti</uri> per sistemi operativi open source. Ad ogni modo, come per quelli Epson, molti di questi driver non sono open source.
				</p>
<p>
 I seguenti driver per stampanti sono disponibili come ebuild in Portage: gimp-print, omni, hpijs, pnm2ppa.</p>
 <p>
 
				Per molte stampanti tranne HP Inkjets, sarai in grado di usare i driver standard di Linux. Visita il <uri link="http://www.linuxprinting.org/printer_list.cgi" >database di supporto per stampanti di linuxprinting.org</uri> per trovare informazioni sulla tua stampante specifica. Assicurati di leggere la documentazione messa a disposizione con ciascun driver che scarichi per informazioni sull'installazione e la licenza.
				</p>
<impo>Se usi una stampante HP Inkjet, sarà necessario installare il driver per stampante <c>hpijs</c>. Questo driver gestisce tutte le interpretazioni Postscript necessarie a far funzionare la stampante HP. Il driver <c>hpijs</c> è solo per stampanti HP Inkjet, ma è disponibile attraverso Portage per tua convenienza. La documentazione da HP per il driver <c>hpijs</c> sarà messa in <path>/usr/share/doc/hpijs-&lt;versione></path>. L'autore raccomanda <i>caldamente</i> di leggerla.
				</impo>
<pre caption="Installare hpijs" > 
# <i>emerge hpijs</i>
</pre>
<note>Se usi una HP Laserjet, il supporto potrebbe già essere disponibile attraverso il sistema di stampa di GNOME. Se non usi una stampante HP Inkjet, non hai bisogno di installare questo speciale driver.
				</note>
</body>
</section>
</chapter>
<chapter>

<title>Configurazione del File PPD</title>
<section>
<body>
<p>E' giunto il momento di configurare la stampante e CUPS. Per fare in modo che la tua stampante interpreti Postscript correttamente, CUPS ha bisogno di un file PPD (Printer Postscript Definition). Il metodo più semplice per generare un PPD è attraverso foomatic.
				</p>

<note> Un'altra via è quella di scaricare il file PPD da <uri link="http://www.linuxprinting.org">LinuxPrinting.org</uri> e metterlo in
<path>/usr/share/cups/model</path>. Se usate questo metodo, potete saltare
  	 il resto di questa sezione e andare a <uri link="#doc_chap5">CUPS
  	 Configuration</uri>.
  	 </note>

<p>Tre informazioni sono necessare per far funzionare il comando qui sotto; hai bisogno dell'ID della tua stampante, il device e il driver della stampante (questo è hpijs se devi installare il driver speciale sopra). L'ID della stampante e il driver possono essere <c>greppati</c> dal database di foomatic, e il device è il nodo al quale la tua stampante è collegata (ad.es. <path>/dev/lp0</path> o <path>/dev/usb/lp0</path>).
				</p>
<p>Prima di usare <c>foomatic-configure</c>, ricordati di avviare <i>cupsd</i>
</p>
<pre caption="Avviare cupsd" >
# <c>/etc/init.d/cupsd start</c>
</pre>
<pre caption="Uso Generico di foomatic" >
# <c>grep $printer_model /usr/share/foomatic/db/source/printer/* </c>
# <c>grep $printer_ID /usr/share/foomatic/db/source/driver/* </c>
# <c>foomatic-configure -s cups -p $printer_model_number -c $print_device_path -n queue name -d driver </c>
</pre>
 <p>
  	 Se il grepping per il driver non funziona, potete cercare la vostra stampante su <uri
  	 link="http://www.linuxprinting.org">LinuxPrinting.org</uri> e controllare quale 
  	 driver si sa che funzioni con essa. Poi prendete uno di questi driver e installatelo:
  	 </p>
<p>Ora, qui c'è un esempio più specifico. Il codice seguente assume che hai una Epson Stylus Color 980. Naturalmente, devi rimpiazzarlo con il tuo modello di stampante effettivo.
				</p>
<pre caption="Uso Specifico di foomatic con la Stylus Color 980" >
# <i>grep Stylus Color 980 /usr/share/foomatic/db/source/printer/* </i>
<comment> Ora cerca la linea che dice: </comment>
/usr/share/foomatic/db/source/printer/317865.xml:   $lt;model>Stylus Color 980&lt;/model>
<comment> 317865 è l'ID della stampante. </comment>

# <i>grep 317865 /usr/share/foomatic/db/source/driver/* </i>
/usr/share/foomatic/db/source/driver/gimp-print.xml:  &lt;printer>&lt;id>printer/317865&lt;/id>&lt;/printer>
<comment> Qui il driver di stampa è gimp-print.</comment>

# <i>foomatic-configure -s cups -p 317865 -c file:/dev/lp0 -n Epson -d gimp-print </i>
</pre>
<note>Ricorda che potresti dover usare <path>/dev/usb/lp0</path> se hai una stampante USB.
				</note>
<impo>Se avrai problemi, consulta la documentazione di foomatic <uri link="http://www.linuxprinting.org/foomatic/USAGE" >qui</uri> 
				e la <uri link="http://www.linuxprinting.org" >linuxprinting.org</uri>
				homepage per ulteriori informazioni.
				</impo>
</body>
</section>
</chapter>
<chapter>
<title>Configurazione di CUPS</title>
<section>
<body>
<p>Dato che la stampande stessa è ora a posto, ora CUPS deve essere configurato per gestire la coda della stampante. Si può accedere a CUPS tramite un browser web dalla porta 631 del server di stampa.
				</p>
<impo>CUPS ha un file di configurazione predefinito per il daemon che dovrebbe, ma non è strettamente necessario, essere modificato. Potresti volergli dare un occhiata, è il file <path>/etc/cups/cupsd.conf</path>.</impo>
<pre caption="Aggiungere CUPS al runlevel di default, e avvio di CUPS" >
# <i>rc-update add cupsd default</i>
# <i>/etc/init.d/cupsd start</i>
</pre>
<p>Il daemon CUPS ora dovrebbe essere avviato, quindi apri il tuo browser preferito e puntalo <uri link="http://127.0.0.1:631" >qui</uri> e clicca su <c>Manage Printer</c>. Qui è dove potete trovare la vostra nuova stampante installata, configurarla o stampare una pagina di prova.
				</p>
<note>Se la stampante non funziona per un qualsiasi motivo, vai nella directory dove hai detto a CUPS di salvare i log, e cerca in <i>error_log</i>.
				</note>
</body>
</section>
</chapter>
<chapter>
<title>Configuring programs to print using CUPS.</title>
<section>
<title>General</title>
<body>
 <p>
 Molti programmi hanno oggi un'interfaccia nativa per cups, così non avete bisogno di cambiare niente,
 semplicemente provare a stampare con il programma.
 </p>
 </body>
</section>
 <section>
<title>The GIMP</title>
<body>
<p>Prima di cominciare, dobbiamo installare le estensioni di stampa CUPS per The Gimp.
				</p>
<pre caption="Installazione di gimp-print-cups" >
# <c>emerge gimp-print-cups </c>
</pre>
<p>Ora, apri The GIMP, e apri una immagine esistente o semplicemente un'immagine vuota, non importa dato che stiamo cercando il suo menu <i>File</i>. Clicca col tasto destro sull'immagine e seleziona <i>File/Print</i> Il dialogo di stampa dovrebbe apparire e quando lo farà, clicca su new printer. Se la tua stampante non è già nella lista, inseriscine il nome, quindi seleziona il tipo di stampante. Ok, ora dovresti poter stampare da The GIMP. Gioca con i settaggi e divertiti.
				</p>
</body>
</section>
</chapter>

<chapter>
<title>Uso di Linux come Server di Stampa Compatibile con Windows</title>
<section>
<body>

<p>Linux è un grande server di stampa, anzi, è un grande server di tutto. La prima cosa da fare è editare <path>/etc/samba/smb.conf</path> a seconda dei tuoi setting. Il file <i>smb.conf</i> contiene tutti i settaggi che faranno apparire il tuo linux come un server Windows NT ad ogni macchina Windows. Ho incluso un esempio molto utile di <i>smb.conf</i> sotto. Editalo a seconda delle necessita del tuo ambiente di rete. 
</p>
<pre caption="smb.conf d'esempio" >

<c>[global]</c>
workgroup = YOUR_WORKGROUP
server string = Gentoo Linux Server
encrypt passwords = True
security = user
smb passwd file = /etc/samba/private/smbpasswd
log file = /var/log/samba/log.%m
socket options = IPTOS_LOWDELAY TCP_NODELAY
domain master = Yes
local master = Yes
prerred master = Yes
os level = 65
dns proxy = No
name resolve order = lmhosts host bcast
bind interfaces only = True
interfaces = eth0
hosts deny = ALL
hosts allow = 192.168.1.4 127.0.0.1 (list of allow hosts here)
debug level = 1
create mask = 0644
directory mask = 0755
level2 oplocks = True
read raw = no
write cache size = 262144
  	 
[printers]
comment = All Printer
path = /var/spool/samba
browseable = no

</pre>
<p>Ora che SAMBA è configurato, riavvialo, vai alla tua macchina Windows e installa una stampante di rete. Facile, eh?
</p>
</body>
</section>
</chapter>
</guide>
