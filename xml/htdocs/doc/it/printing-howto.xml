<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/printing-howto.xml,v 1.12 2006/04/13 20:11:52 so Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/it/printing-howto.xml" lang="it">
<title>Guida alla Stampa in Gentoo</title>

<author title="Autore">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Editore">
  <mail link="nightmorph@gentoo.org">Joshua Saddler</mail>
</author>
<author title="Traduttore">
  <mail link="f_a_b_i_o_99@yahoo.it">Fabio Rosati</mail>
</author>
<author title="Traduttore">
  <mail link="lucamarturana@gmail.com">Luca Marturana</mail>
</author>

<abstract>
Questo documento tratta l'installazione e la gestione delle stampanti usando
CUPS e Samba. Viene trattata l'installazione e di rete oltre all'utilizzo di
stampanti condivise da altri sistemi operativi.
</abstract>
<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>2.9</version>
<date>2006-03-20</date>

<chapter>
<title>Stampa e Gentoo Linux</title>
<section>
<title>Usare gli Strumenti Corretti</title>
<body>

<p>
Linux ha un eccellente supporto per le stampanti; lo strumento giusto da usare
è CUPS (<uri link="http://www.cups.org">Common Unix Printing System</uri>).
Dall'inizio del progetto, nel 1999, l'installazione e la gestione di CUPS è
migliorata notevolmente.
</p>

<p>
In questo documento ci occuperemo di come usare CUPS per configurare una
stampante locale o di rete. Non scenderemo nei dettagli dato che il progetto
dispone <uri link="http://www.cups.org/documentation.php">di ottima
documentazione</uri> per l'uso avanzato.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configurazione del Kernel</title>
<section>
<title>Introduzione</title>
<body>

<p>
Quando si vuole installare una stampante sul proprio sistema è necessario
sapere in che modo la stampante sarà collegata al sistema. Potrebbe essere
collegata tramite una porta locale come la LPT o la USB, oppure potrebbe essere
collegata via rete. Se è collegata via rete potrebbe usare il protocollo di
stampa IPP (Internet Printing Protocol) oppure il protocollo Microsoft Windows
SMB-CIFS (Condivisione di Microsoft Windows).
</p>

<p>
Le prossime sezioni spiegano qual'è la minima configurazione del kernel
necessaria. Certamente questa dipende dal modo in cui la stampante verrà
collegata al sistema, quindi per chiarezza le istruzioni sono state
separate:
</p>

<ul>
  <li><uri link="#lpt">Stampante Locale (LPT)</uri></li>
  <li><uri link="#usb">Stampante Locale (USB)</uri></li>
  <li><uri link="#ipp">Stampante Remota (IPP)</uri></li>
  <li><uri link="#smb-cifs">Stampante Remota (SMB-CIFS)</uri></li>
</ul>

<p>
Spostarsi in <path>/usr/src/linux</path> ed eseguire <c>make menuconfig</c> per
accedere alla configurazione del kernel. Se si è utilizzato
<c>genkernel</c> per configurare il kernel, si dovrebbero comunque seguire
questi passi per assicurarsi che non manchi nulla.
</p>

<p>
Nei prossimi esempi di configurazione, verrà aggiunto il supporto necessario
<e>nel</e> kernel, non come moduli. Questo non è obbligatorio; Se si vuole si
può facilmente utilizzare un supporto modulare, in tal caso non bisogna
dimenticare successivamente di caricare i moduli necessari.  L'esempio di
configurazione è riferito al kernel 2.6; Per il 2.4 le direttive di
configurazione potrebbero essere altrove.
</p>

<p>
Ora si vada nella sezione appropriata per modificare (o controllare) la
configurazione del kernel.
</p>

</body>
</section>
<section id="lpt">
<title>Stampante Locale (LPT)</title>
<body>

<p>
La porta LPT è generalemente usata per identificare la porta per la stampante
parallela. Bisogna prima abilitare il supporto per la porta parallela, poi il
supporto alla porta parallela in stile PC (a meno che il proprio sistema non
sia SPARC) dopodiché si abiliterà il supporto alla stampante su porta
parallela.
</p>

<pre caption="Configurazione della stampante su porta parallela">
Device Drivers --&gt;
  &lt;*&gt; Parallel port support
  &lt;*&gt;   PC-style hardware

Device Drivers --&gt;
  Character Devices --&gt;
    &lt;*&gt; Parallel printer support
</pre>

<p>
In alcuni casi è necessario abilitare altre opzioni nella sezione <c>Parallel
port support</c>. Si utilizzi la funzione <c>Help</c>
nella configurazione del kernel per maggiori informazioni.
</p>

<p>
Questo è quanto; uscire dalla configurazione del kernel e ricompilarlo.
Al termine non va dimenticato di copiare la
nuova immagine del kernel in <path>/boot</path> (prima montare
<path>/boot</path> se necessario) e aggiornare la configurazione del bootloader
prima di riavviare il sistema.
</p>

<p>
Proseguire ora con <uri link="#cups">Installazione e Configurazione di
CUPS</uri>.
</p>

</body>
</section>

<section id="usb">
<title>Stampante Locale (USB)</title>
<body>

<p>
Per abilitare la stampa via USB, è necessario il supporto USB ed il supporto
alla stampante USB.
</p>

<pre caption="Configurazione della stampante su porta USB">
Device Drivers --&gt;
  USB Support --&gt;
    &lt;*&gt; Support for Host-side USB
    <comment>(...)</comment>
    --- USB Host Controller Drivers
    <comment>(Selezionare l'HCD utilizzato dal proprio sistema. Se
non si sa quale selezionare, eseguire "lspci -v | grep HCI" da un
altro terminale)</comment>
    &lt;*&gt; EHCI HCD (USB 2.0) support <comment>( oppure )</comment>
    &lt;*&gt; OHCI HCD support           <comment>( oppure )</comment>
    &lt;*&gt; UHCI HCD (most Intel and VIA) support
    <comment>(...)</comment>
    &lt;*&gt; USB Printer support
</pre>

<p>
Questo è quanto; uscire dalla configurazione del kernel e ricompilarlo.
Al termine non va dimenticato di copiare la
nuova immagine del kernel in <path>/boot</path> (prima montare
<path>/boot</path> se necessario) e aggiornare la configurazione del bootloader
prima di riavviare il sistema.
</p>

<p>
Proseguire ora con <uri link="#cups">Installazione e Configurazione di
CUPS</uri>.
</p>

</body>
</section>
<section id="ipp">
<title>Stampante Remota (IPP)</title>
<body>

<p>
Per potersi collegare ad una stampante remota tramite il protocollo Internet
Printing Protocol è sufficiente che il kernel abbia il supporto alla rete.
Assumendo che il proprio kernel abbia già il supporto alla rete, proseguire
con <uri link="#cups">Installazione e Configurazione di CUPS</uri>
</p>

</body>
</section>

<section id="smb-cifs">
<title>Stampante Remota (SMB-CIFS)</title>
<body>

<p>
Il kernel deve supportare SMB CIFS:
</p>

<pre caption="Configurazione della stampante SMB-CIFS">
File systems --&gt;
  Network File Systems --&gt;
    &lt;*&gt; SMB file system support (to mount Windows shares etc.)
    &lt;*&gt; CIFS support (advanced network file system for Samba, Windows and other CIFS compliant servers)
</pre>

<p>
Questo è quanto; uscire dalla configurazione del kernel e ricompilarlo.  Al
termine non va dimenticato di copiare la nuova immagine del kernel in
<path>/boot</path> (prima montare <path>/boot</path> se necessario) e
aggiornare la configurazione del bootloader prima di riavviare il sistema.
</p>

<p>
Proseguire ora con <uri link="#cups">Installazione e Configurazione di
CUPS</uri>.
</p>
</body>
</section>
</chapter>

<chapter id="cups">
<title>Installazione e Configurazione di CUPS</title>
<section>
<title>Installazione</title>
<body>

<p>
Installare CUPS con Gentoo è semplice. CUPS ha alcune caratteristiche
opzionali alle quali si può essere interessati. Per abilitare o disabilitare
queste caratteristiche, utilizzare le relative USE flag.
</p>

<table>
<tr>
  <th>USE flag</th>
  <th>Effetto su CUPS</th>
</tr>
<tr>
  <ti>nls</ti>
  <ti>
		Abilita il supporto al linguaggio nativo (ndt: Native Language Support).
		Con nls CUPS è in grado di fornire un feedback localizzato in modo da
		poter usare CUPS nella propria lingua. 
  </ti>
</tr>
<tr>
  <ti>pam</ti>
  <ti>
    Se si ha bisogno di autenticare i lavori di stampa attraverso i Pluggable
    Authentication Modules, questo attiva il supporto a PAM in CUPS.
  </ti>
</tr>
<tr>
  <ti>samba</ti>
  <ti>
    Se si vogliono poter condividere le stampanti locali con sistemi Windows
    presenti in rete utilizzando il protocollo SMB-CIFS, o se si vogliono
    utilizzare stampanti condivise da sistemi Windows, si ha bisogno del
    supporto per SAMBA.
  </ti>
</tr>
<tr>
  <ti>slp</ti>
  <ti>
		In un ambiente gestito la stampante potrebbe essere resa disponibile come
		servizio ad altri. Con il Service Locator Protocol (ndt: Protocollo per
		l'individuazione del servizio) si può facilmente trovare e configurare un
		servizio sul proprio sistema. Abilitare questa USE flag se la propria
		stampante è disponibile come servizio o potrebbe essere resa disponibile
		come tale.
  </ti>
</tr>
<tr>
  <ti>ssl</ti>
  <ti>
    Se si vuole autenticazione remota e/o privacy, si ha bisogno del supporto
    per Secure Socket Layer, il quale permette sessioni di stampa criptate.
    Il supporto per SSL deve essere disponibile su tutti i sistemi coinvolti
    presenti in rete.
  </ti>
</tr>
</table>

<p>
Controllare le impostazioni USE correnti. Se si vogliono modificare le
impostazioni USE correnti soltanto per CUPS, aggiungere le appropriate USE flag
a <path>/etc/portage/package.use</path>.
</p>

<pre caption="Impostazione delle USE flag per CUPS">
# <i>emerge -pv cups</i>
[ebuild N     ] net-print/cups-1.1.23-r1  +nls +pam -samba -slp +ssl 0 kB

<comment>(Ad esempio, per abilitare il supporto a SAMBA in CUPS)</comment>
# <i>vim /etc/portage/package.use</i>
net-print/cups samba
</pre>

<p>
Se si è soddisfatti delle impostazioni, installare CUPS attraverso Portage.
</p>

<pre caption="Installazione di CUPS">
# <i>emerge cups</i>
</pre>

<p>
Il processo di installazione potrebbe consigliare di eseguire <c>rc-update
add coldplug default</c> se si sta utilizzando una stampante USB ed il
supporto necessario è costituito da moduli del kernel. Questo permette di
caricare tutti i moduli del kernel necesari al boot.
</p>

<p>
Se la stampante è collegata al sistema localmente è necessario caricare CUPS
automaticamente all'avvio. Assicurarsi che la propria stampante sia colegata ed
accesa prima di avviare CUPS
</p>

<pre caption="Avvio automatico di CUPS">
# <i>/etc/init.d/cupsd start</i>
# <i>rc-update add cupsd default</i>
</pre>

</body>
</section>

<section>
<title>Configurazione</title>
<body>

<p>
La configurazione di default per il server CUPS in
<path>/etc/cups/cupsd.conf</path> è sufficiente per la maggior parte degli
utenti. Comunque, diversi utenti potrebbero avere la necessità di apportare
modifiche alla configurazione di CUPS.
</p>

<p>
Nelle prossime sezioni saranno trattate alcune modifiche che sono spesso
necessarie:
</p>

<ul>
  <li>
		In <uri link="#remote_usage">Accesso a stampanti remote</uri> si permette
		ad altri sistemi di utilizzare la stampante collegata a questo sistema
		Linux.
  </li>
  <li>
    In <uri link="#remote_admin">Amministrazione remota di CUPS</uri> si
    autorizza l'amministrazione di CUPS da sistemi remoti.
  </li>
  <li>
    In <uri link="#windows_pcl">Abilitare il supporto ai driver Windows
    PCL</uri> è possibile configurare CUPS per il supporto ai driver PCL di
    Windows. Questo è consigliabile se si desidera che i sistemi Windows siano
    in grado di utilizzare una stampante condivisa via SAMBA, visto che molti
    driver per Windows sono driver PCL.
  </li>
  <li>
    In <uri link="#setup_remote">Impostare una stampante remota</uri> è
    possibile configurare il sistema di modo che sia in grado di utilizzare una
    stampante collegata ad un altro sistema (che non sia una condivisione
    Windows).
  </li>
</ul>

</body>
</section>
<section id="remote_usage">
<title>Accesso a Stampanti Remote</title>
<body>

<p>
Se si vuole che altri sistemi usino la propria stampante tramite IPP è
necessario autorizzare l'accesso alla stampante in
<path>/etc/cups/cupsd.conf</path>.  Se si vuole condividere la propria
stampante tramite SAMBA, questa modifica non è necessaria.
</p>

<p>
Aprire <path>/etc/cups/cupsd.conf</path> in un editor di testo e aggiungere
una riga <c>Allow</c> per i sistemi che devono essere in grado di
accedere alla propria stampante. Nel prossimo esempio permetteremo l'accesso
alla stampante da parte di tutti i sistemi il cui indirizzo IP inizia per
<c>192.168.0</c>.
</p>

<pre caption="Permettere l'accesso da remoto alla stampante">
&lt;Location /&gt;
Order Deny,Allow
Deny From All
Allow From 127.0.0.1
<i>Allow From 192.168.0.*</i>
&lt;/Location&gt;
</pre>

</body>
</section>
<section id="remote_admin">
<title>Amministrazione Remota di CUPS</title>
<body>

<p>
Se si è interessati all'amministrazione remota, si deve autorizzare l'accesso
da parte di altri sistemi all'amministrazione di CUPS.  Modificare
<path>/etc/cups/cupsd.conf</path> e permettere esplicitamente l'accesso ai
sistemi desiderati. Ad esempio, per autorizzare l'accesso al sistema con
indirizzo IP 192.168.0.3:
</p>

<pre caption="Autorizzare l'accesso remoto in /etc/cups/cupsd.conf">
&lt;Location /admin&gt;
<comment>(...)</comment>
Order Deny,Allow
Deny From All
Allow From 127.0.0.1
<i>Allow From 192.168.0.3</i>
&lt;/Location&gt;
</pre>

<p>
Non bisogna dimenticare di riavviare CUPS dopo aver modificato il file
<path>/etc/cups/cupsd.conf</path> eseguendo <c>/etc/init.d/cupsd restart</c>.
</p>

</body>
</section>
<section id="windows_pcl">
<title>Abilitare il Supporto ai Driver PCL per Windows</title>
<body>

<p>
I driver PCL inviano dati non preparati (raw) al server di stampa. Per
abilitare la stampa raw è necesario modificare
<path>/etc/cups/mime.types</path> e decommentare
<c>application/octet-stream</c>. Dopo ciò, è necessario modificare
<path>/etc/cups/mime.convs</path> decommentando la linea contenente
<c>application/octet-stream</c>.
</p>

<pre caption="Abilitare il supporto alla stampa raw">
# <i>vim /etc/cups/mime.types</i>
<comment>(Decommentare la linea in modo che il file contenga:)</comment>
application/octet-stream

# <i>vim /etc/cups/mime.convs</i>
<comment>(Decommentare la linea in modo che il file contenga:)</comment>
application/octet-stream     application/vnd.cups-raw    0    -
</pre>

<p>
Dopo aver modificato <path>/etc/cups/cupsd.conf</path> riavviare il server CUPS
eseguendo <c>/etc/init.d/cupsd restart</c>.
</p>

</body>
</section>
<section id="setup_remote">
<title>Configurazione di una stampante remota</title>
<body>

<p>
Se le stampanti sono collegate ad un server CUPS remoto si può facilmente
configurare il proprio sistema per utilizzare la stampante remota modificando
il file <path>/etc/cups/client.conf</path>.
</p>

<p>
Assumendo che la stampante sia collegata ad un server chiamato
<c>printserver.mydomain</c>, aprire <path>/etc/cups/client.conf</path> con il
proprio editor preferito ed impostare la direttiva <c>ServerName</c>:
</p>

<pre caption="Modifica di client.conf">
# <i>vim /etc/cups/client.conf</i>

<comment>(Sostituire printserver.mydomain con il nome del proprio server di
stampa)</comment>
ServerName <i>printserver.mydomain</i>
</pre>

<p>
Verrà utilizzata la stampante che sul server remoto risulta impostata come
predefinita.
Se si vuole cambiare la stampante predefinita, utilizzare <c>lpoptions</c>:
</p>

<pre caption="Cambiare la stampante predefinita">
<comment>(Prima di tutto elencare le stampanti disponibili)</comment>
# <i>lpstat -a</i>
hpljet5p accepting requests since Jan 01 00:00
hpdjet510 accepting requests since Jan 01 00:00

<comment>(Impostare la HP LaserJet 5P come stampante predefinita)</comment>
# <i>lpoptions -d hpljet5p</i>
</pre>

</body>
</section>
</chapter>

<chapter id="configure_printer">
<title>Configurare una Stampante</title>
<section>
<title>Introduzione</title>
<body>

<p>
Se la stampante che si vuole configurare è disponibile attraverso un server
remoto (che utilizza CUPS) non c'è bisogno di seguire queste istruzioni.
Leggere invece <uri link="#setup_remote">Configurare una stampante
remota</uri>.
</p>

</body>
</section>
<section>
<title>Rilevare la Stampante</title>
<body>

<p>
Se si possiede una stampante USB o la stampante su porta parallela era accesa
quando si è avviato il sistema, è probabile si possano ottenere dal kernel
informazioni che indicano che la stampante è stata rilevata con successo.
Comunque questa informazione è solo indicativa e non è indispensabile.
</p>

<pre caption="Recuperare informazioni dal kernel">
<comment>(Per una stampante su porta parallela)</comment>
$ <i>dmesg | grep -i print</i>
parport0: Printer, Hewlett-Packard HP LaserJet 2100 Series

<comment>(Per una stampante USB)</comment>
$ <i>lsusb</i>
<comment>(...)</comment>
Bus 001 Device 007: ID 03f0:1004 Hewlett-Packard DeskJet 970c/970cse
</pre>

</body>
</section>
<section>
<title>Installare la Stampante</title>
<body>

<p>
Per installare la stampante sul proprio sistema, avviare il proprio browser e
puntare a <uri link="http://localhost:631">http://localhost:631</uri>.
Si accederà in questo modo l'interfaccia web di CUPS dalla quale si possono
svolgere tutte le attività amministrative.
</p>

<p>
Andare su <e>Administration</e> ed inserire la propria password di root nel
box. Quindi, dopo aver raggiunto l'interfaccia di amministrazione, cliccare su
<e>Add Print</e>. Si entrerà in una nuova schermata che permetterà
l'inserimento delle seguenti informazioni:
</p>

<ul>
  <li>
    Lo <e>spooler name</e>, ovvero un breve ma descrittivo indicativo usato dal
    sistema per identificare la stampante. Questo nome non deve contenere spazi
    o altri caratteri speciali. Per esempio, la stampante HP LaserJet 5P
    potrebbe diventare <c>hpljet5p</c>.
  </li>
  <li>
    La <e>location</e>, ovvero il luogo dove la stampante è fisicamente
    collocata (per esempio nella propria stanza, o nella cucina vicino alla
    lavastoviglie). Ciò può essere utile per poter gestire molte stampanti
    contemporaneamente.
  </li>
  <li>
		Infine la <e>description</e>, dove si può indicare una completa
		descrizione della stampante. Per esempio il nome completo "HP LaserJet
		5P".
  </li>
</ul>

<p>
La schermata successiva chiede il dispositivo dove la stampante è in ascolto.
C'è una vasta gamma di scelta. La tabella successiva copre alcuni casi
possibili, ma la lista non è del tutto esaustiva.
</p>

<table>
<tr>
  <th>Dispositivo</th>
  <th>Descrizione</th>
</tr>
<tr>
  <ti>AppSocket/HP JetDirect</ti>
  <ti>
    Questo dispositivo speciale permette alle stampanti di rete di essere
    accessibili tramite il socket HP JetDirect. Solo alcune stampanti
    specifiche lo supportano.
  </ti>
</tr>
<tr>
  <ti>Internet Printing Protocol (IPP or HTTP)</ti>
  <ti>
    Usare questo per poter utilizzare stampanti remote attraverso il protocollo
    IPP, sia direttamente (IPP) o attraverso l'HTTP.
  </ti>
</tr>
<tr>
  <ti>LPD/LPR Host or Printer</ti>
  <ti>
    Selezionare questo se la stampante remota è attaccata d un server LPD/LPR.
  </ti>
</tr>
<tr>
  <ti>Parallel Port #1</ti>
  <ti>
    Scegliere questo se la stampante è attaccata localmente alla porta
    parallela (LPT). Quando la stampante viene automaticamente riconosciuta il
    suo nome viene apposto a quello del dispositivo.
  </ti>
</tr>
<tr>
  <ti>USB Printer #1</ti>
  <ti>
    Infine, selezionare questo se la stampante è attaccata in locale in una
    porta USB. Il nome della stampante dovrebbe essere automaticamente apposto
    al nome del dispositivo.
  </ti>
</tr>
</table>

<p>
Se si sta installando una stampante remota, verrà chiesto l'URI della
stampante:
</p>

<ul>
  <li>
    Un server LPD richiede un sintassi del tipo: <c>lpd://hostname/queue</c>
  </li>
  <li>
    Una stampante HP JetDirect richiede: <c>socket://hostname</c>
  </li>
  <li>
    Una stampante IPP invece richiede una sintassi del tipo:
    <c>ipp://hostname/printers/printername</c> o
    <c>http://hostname:631/ipp/queue</c>.
    <!-- Se per qualche motivo un utente vuole usare la sintassi interna di HP,
    egli deve usare ipp://hostname/ipp/<name>, la quale fino ad adesso era stata
    menzionata qui. Tuttavia, questo documento descrive l'utilizzo della sintassi
    ipp di CUPS, quindi questa è stata tolta in favore della sintassi corretta,
    ovvero il primo esempio -->
  </li>
</ul>

<p>
Quindi, selezionare il produttore della stampante nella schermata contigua
mentre nella consecutiva a questa il nome e il numero del modello. Per molte
stampanti si possono trovare diversi driver. Si può decidere di selezionarne
uno adesso o cercare sulla <uri
link="http://www.linuxprinting.org/printer_list.cgi">lista di
LinuxPrinting.org</uri> per un driver migliore. È comunque possibile cambiare
il driver utilizzato in seguito.
</p>

<p>
Dopo aver selezionato il driver, CUPS informerà che la stampante è stata
correttamente aggiunta al sistema. Adesso quindi è possibile entrare nella
pagina di amministrazione delle stampanti e selezionare <c>Configure
Printer</c> per cambiare le impostazioni (risoluzione, formato pagina, etc).
</p>

</body>
</section>
<section>
<title>Testare e riconfigurare una stampante</title>
<body>

<p>
Per verificare se la stampante funziona correttamente, basta andare nella
pagina di amministrazione delle stampanti, selezionare la stampante e cliccare
su <c>Print Test Page</c>.
</p>

<p>
Se la stampante non funziona correttamente, cliccare su <c>Modify Printer</c>
per riconfigurarla. Si tratta delle stesse schermate usate durante la prima
installazione ma le impostazioni predefinite stavolta corrispondono alla
corrente configurazione.
</p>

<p>
Se non si riesce a capire il motivo per cui la stampante non vuole funzionare,
può essere molto utile dare un'occhiata al log in
<path>/var/log/cups/error_log</path>. Nell'esempio seguente scopriremo un
errore di permessi, probabilmente dovuto ad una errata configurazione di
<c>Allow</c> in <path>/etc/cups/cupsd.conf</path>.
</p>

<pre caption="Cercare errori di CUPS">
# <i>tail /var/log/cups/error_log</i>
<comment>(...)</comment>
E [11/Jun/2005:10:23:28 +0200] [Job 102] Unable to get printer status (client-error-forbidden)!
</pre>

</body>
</section>
<section>
<title>Installare il driver migliore</title>
<body>

<p>
Esistono molti driver per le stampanti; per scoprire quello che ha le migliori
prestazioni, basta dare un'occhiata alla lista di <uri
link="http://www.linuxprinting.org/printer_list.cgi">LinuxPrinting.org</uri>.
Selezionare la propria marca e il tipo per trovare quale driver il sito
consiglia. Per esempio, per la HP LaserJet 5P, il sito raccomanda il driver
<c>ljet4</c>.
</p>

<p>
Scaricare il file PPD dal sito e posizionarlo in
<path>/usr/share/cups/model</path>, quindi eseguire <c>/etc/init.d/cupsd restart</c>
come root. Ciò renderà il driver visibile dall'interfaccia web di CUPS. Quindi
si può riconfigurare la stampante come descritto sopra.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Usare driver per le stampanti particolari</title>
<section>
<title>Introduzione</title>
<body>

<p>
Alcune stampanti richiedono driver specifici o forniscono caratteristiche che
non vengono attivate tramite il processo di configurazione descritto sopra.
Questo capitolo riguarderà la configurazione su Gentoo Linux delle suddette
stampanti "particolari".
</p>

<p>
Saranno trattate le seguenti stampanti e/o driver:
</p>

<ul>
  <li><uri link="#gimp-print">Driver Gimp-Print</uri></li>
  <li><uri link="#hplip">Driver HPLIP</uri> (HPOJ e HPIJS sono deprecati)</li>
  <li><uri link="#pnm2ppa">Driver PNM2PPA</uri></li>
</ul>

</body>
</section>
<section id="gimp-print">
<title>Driver Gimp-Print</title>
<body>

<p>
I driver <uri link="http://gimp-print.sf.net">gimp-print</uri> sono driver
opensource di alta qualità per varie stampanti Canon, Epson, HP, Lexmark,
Sony, Olympus e PCL i quali supportano CUPS, ghostscript, The Gimp e altre
applicazioni.
</p>

<p>
Il portage tree di Gentoo contiene un ebuild per i driver gimp-print. Basta
semplicemente usare <c>emerge</c> per installarli. Notare che l'ebuild richiede
un bel po di flag USE (come <c>cups</c> e <c>ppds</c>). Queste due devono
essere attivate per permettere ai driver di funzionare.
</p>

<pre caption="Installare i driver gimp-print">
# <i>emerge gimp-print</i>
</pre>

<p>
Quando finisce il processo di installazione, i driver Gimp-print si potranno
utilizzare dall'interfaccia web di CUPS.
</p>

</body>
</section>
<section id="hplip">
<title>Driver HPLIP</title>
<body>

<p>
Il <uri link="http://hpinkjet.sf.net">Progetto HPLIP</uri> abbraccia i driver
hpijs e include il supporto scanner e i tools per varie periferiche
multi-purpose. Per il supporto alla stampa, <e>è obbligatorio</e> abilitare la
flag USE <c>ppds</c>.
</p>

<pre caption="Installare i driver HPLIP">
<comment>(Controllare se la flag USE ppds è attivata)</comment>
# <i>emerge -vp hplip</i>
These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild  N    ] net-print/hplip-0.9.5  +X +cups +foomaticdb <comment>+ppds</comment> -qt -scanner -snmp +usb 9,255 kB 

Total size of downloads: 9,255 kB

# <i>emerge hplip</i>
# <i>/etc/init.d/hplip start</i>
# <i>/etc/init.d/cupsd restart</i>
# <i>rc-update add hplip default</i>
</pre>

<p>
Dopo la fine del processo di installazione, i driver della stampante saranno
disponibili nell'interfaccia web di CUPS.
</p>

</body>
</section>
<section id="pnm2ppa">
<title>Driver PNM2PPA</title>
<body>

<p>
PPA è una tecnologia HP che si incetra sull'invio di processi di basso livello
al sistema invece che alla stampante in modo da rendere la stampante più
economica, anche se al costo di un più elevato utilizzo di risorse.
</p>

<p>
Se <uri link="http://www.linuxprinting.org/printer_list.cgi">LinuxPrinting
</uri> riporta che il driver <uri
link="http://pnm2ppa.sourceforge.net/">pnm2ppa</uri> è il migliore per la
propria stampante, bisogna installare il filtro <c>pnm2ppa</c> nel proprio
sistema:
</p>

<pre caption="Installare il filtro pnm2ppa">
# <i>emerge pnm2ppa</i>
</pre>

<p>
Una volta installato, scaricare il file PPD per la propria stampante da <uri
link="http://www.linuxprinting.org/printer_list.cgi">LinuxPrinting</uri> e
posizionarlo su <path>/usr/share/cups/model</path>. Quindi, configurare la
stampante usando i passi spiegati sopra.
</p>

</body>
</section>
</chapter>

<chapter id="windows">
<title>Stampare da e su Microsoft Windows</title>
<section>
<title>Configurare un client Windows per IPP</title>
<body>

<p>
Microsoft Windows supporta IPP (gli utenti di Windows 9x o ME devono
<uri
link="http://support.microsoft.com/default.aspx?scid=kb;en-us;294439">
installarlo</uri> a parte). Per installare una stampante che è collegata alla
Linux box su Windows, lanciare il wizard <c>Add Printer</c> e selezionare
<c>Network Printer</c>. Quando verrà chiesto l'URI, usare la sintassi
<c>http://hostname:631/printers/queue</c>.
</p>

<p>
Naturalmente assicurarsi prima che tutti i sistemi<uri
link="#remote_usage">possono raggiungere</uri> la stampante!
</p>

</body>
</section>
<section>
<title>Configurare un client Windows per una stampante condivisa con
Samba</title>
<body>

<p>
Per condividere una stampante in una rete SMB-CIFS, occore avere SAMBA
installato e correttamente configurato. Ciò va un po' oltre lo scopo di questo
documento, ma faremo lo stesso un veloce resoconto di come configurare SAMBA
per condividere le stampanti.
</p>

<p>
Aprire <path>/etc/samba/smb.conf</path> con il proprio editor preferito e
aggiungere la sezione <c>[printers]</c>:
</p>

<pre caption="Aggiungere una sezione [printers]">
[printers]
  comment      = All printers
  path         = /var/spool/samba
  browseable   = no
  guest ok     = no
  writable     = no
  printable    = yes
  public       = yes
  printer name = hpljet5p
</pre>

<p>
Adesso andare verso la cima del file <path>smb.conf</path> fino alla sezione
<c>[global]</c>. Quindi cercare i parametri <c>printcap name</c> e
<c>printing</c> e settarli entrambi su <c>cups</c>:
</p>

<pre caption="Modificare la sezione [global]">
[global]
  <comment>(...)</comment>
  printcap name = <i>cups</i>
  printing      = <i>cups</i>
</pre>

<p>
Assicurarsi di aver abilitato il supporto ai driver <uri
link="#windows_pcl">Windows PCL</uri> in CUPS. Quindi, riavviare il servizio
<c>smb</c> per applicare le modifiche.
</p>

</body>
</section>
<section>
<title>Configurare un client Linux per un server di stampa Windows</title>
<body>

<p>
Prima di tutto, assicurarsi che la stampanta è condivisa sul sistema Windows.
</p>

<p>
Quindi, nella interfaccia web CUPS, configurare la stampante come è stato
descritto precedentemente. Adesso si noterà che CUPS ha aggiunto un altro
driver chiamato <c>Windows Printer via SAMBA</c>. Selezionarlo e usare una
sintassi <c>smb://username:password@workgroup/server/printername</c> or
<c>smb://server/printername</c> come URI.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Applicazioni relative alla stampa</title>
<section>
<title>Introduzione</title>
<body>

<p>
Esistono molti tool per la configurazione delle stampanti, per usare
ulteriori filtri di stampa, aggiungere altre funzionalità di stampa, etc.
Questo capitolo ne elenca un po'. La lista non è esaustiva e non descrive
ogni tool in dettaglio.
</p>

</body>
</section>
<section>
<title>Gtk-LP - Un tool di configurazione delle stampanti scritto in GTK</title>
<body>

<p>
Con <uri link="http://gtklp.sourceforge.net/index.shtml">Gtk-LP</uri> è
possibile installare, modificare e configurare le proprie stampanti da una
applicazione Gtk stand-alone. Esso utilizza CUPS e comprende tutte le
funzionalità standard di esso. In definitiva è l'ideale per chi non ama
l'interfaccia web di CUPS oppure vuole una applicazione stand-alone per le
operazioni giornaliere di stampa.
</p>

<p>
Per installarlo, emergere <c>gtklp</c>:
</p>

<pre caption="Installare Gtk-LP">
# <i>emerge gtklp</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Troubleshooting</title>
<section>
<title>Error: Unable to convert file 0 to printable format</title>
<body>

<p>
Se si hanno problemi di stampa e il file <path>/var/log/cups/error_log</path>
mostra questo messaggio:
</p>

<pre caption="Error log">
Unable to convert file 0 to printable format
</pre>

<p>
Significa che bisogna riemergere <c>ghostscript-esp</c> con la flag USE <c>cups
</c>. Si può indifferentemente aggiungere la flag USE <c>cups</c> in
<path>/etc/make.conf</path>, o abilitarla solo per <c>ghostscript-esp</c> come
mostrato:
</p>

<pre caption="Aggiungere la flag USE cups a ghostscript-esp">
# <i>echo "app-text/ghostscript-esp cups" &gt;&gt; /etc/portage/package.use</i>
</pre>

<p>
Quindi emergere <c>ghostscript-esp</c>. Quando esso ha finito di compilare,
assicurarsi di riavviare <c>cupsd</c>:
</p>

<pre caption="Riavviare cupsd">
# <i>/etc/init.d/cupsd restart</i>
</pre>

</body>
</section>
</chapter>

</guide>
