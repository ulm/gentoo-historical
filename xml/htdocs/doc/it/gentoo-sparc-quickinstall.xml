<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/Attic/gentoo-sparc-quickinstall.xml,v 1.10 2007/05/18 14:07:19 scen Exp $ -->

<guide link="/doc/it/gentoo-sparc-quickinstall.xml" lang="it">
<title>Guida rapida all'installazione di Gentoo Linux Sparc</title>

<author title="Autore">
  <mail link="ciaranm@ciaranm.org">Ciaran McCreesh</mail>
</author>
<author title="Traduzione">
  <mail link="luna80@gmail.com">Diana Fossati</mail>
</author>

<abstract>
La guida veloce di riferimento copre tutti i dettagli del processo di
installazione SPARC in un modo non prolisso. Per seguire questa guida, l'utente
deve già avere un'esperienza precedente nell'installazione di Gentoo.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.15</version>
<date>2007-05-07</date>

<chapter>
<title>Guida veloce di riferimento per Sparc</title>
<section>
<body>

<p>
Questa guida è per le persone che hanno già una precedente esperienza
nell'installazione di Gentoo Linux. Per delle instruzioni più dettagliate
consultare il <uri link="/doc/it/handbook/">Manuale Gentoo</uri>.
</p>

<p>
Le immagini ISO e Netboot per l'installazione sono disponibili nei <uri
link="/main/en/mirrors.xml">Mirror Gentoo</uri>. Il CD 'universal' ed il
CD 'minimal' sono avviabili e contengono gli strumenti necessari per
l'installazione di Gentoo. Il CD 'universal' contiene anche gli stage ed alcuni
distfile. Il cd 'packages' contiene paccheti precompilati per l'installazione
GRP.
</p>

<p>
Usare <c>strop+A</c> (tastiera) o inviare un break (console seriale) mentre
si sta facendo il boot per entrare in OBP. Per il boot dal CD 'universal' o
'minimal' usare il comando <c>boot cdrom</c>, mentre con il Netboot usare
<c>boot net</c>. Premere return per usare il kernel predefinito, oppure premere
il tasto tab per vedere la lista dei kernel alternativi.
</p>

<note>
Per maggiori informazioni su OBP, guardare <uri
link="/doc/it/gentoo-sparc-obpreference.xml">OpenBoot PROM (OBP) Reference</uri>
o consultare il documento di Sun "OpenBoot 3.x Command Reference" (P/N
802-3242).
</note>

<pre caption="Impostazioni iniziali">
# <i>date</i>  (Asssicurarsi che la propria ora e data siano corretti. Se non lo sono, sistemarli con <i>date MMDDhhmmCCYY</i> )
# <i>modprobe module_name</i>  (Opzionale - Carica i moduli necessari)
# <i>ifconfig eth0 a.b.c.d netmask e.f.g.h broadcast i.j.k.l</i> (Configurazione della rete)
# <i>route add -net default gw a.b.c.d netmask 0.0.0.0 metric 1 eth0</i> (Configurazione del gateway predefinito)
# <i>echo "nameserver a.b.c.d" > /etc/resolv.conf</i> (Inizializza il DNS)
# <i>fdisk /dev/sda</i> (Partizionameno del disco)
</pre>

<p>
Per le macchine sparc è necessaria una disclabel, che può essere creata usando
's'.
</p>

<p>
Una partizione separata /boot non è raccomandata per SPARC. La partizione di
root deve essere completamente nel primo GByte del disco per tutte le macchine
sparc32. Il file system raccomandato è ext3. Sono necessari al minimo 512MBytes
di RAM e swap per il bootstrap e altre compilazioni pesanti.
</p>

<p>
Inizializzare le proprie partizioni con i comandi <c>mke2fs</c> (Ext2),
<c>mke2fs -j</c> (Ext3) e <c>mkswap</c> (per la partizione di swap). Per
esempio: <c>mke2fs -j /dev/sda1</c>.
</p>

<p>
Proseguire montando le partizioni e estraendo il file per lo stage scelto.
</p>

<pre caption="Preparazione dell'installazione">
(Attivare la partizione di swap)                                 # <i>swapon /dev/sdax</i>
(Montare la partizione di root)                                  # <i>mount /dev/sdax /mnt/gentoo</i>
(Creare il mountpoint di boot)                                   # <i>cd /mnt/gentoo</i>
(Estrare il tarball dello lo stage...)                           # <i>tar xvjpf /mnt/cdrom/stages/stage?-*.tar.bz2</i>
(<comment>o</comment> scaricare l'ultimo tarball disponibile...) # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(                  ... ed estrarlo)                              # <i>tar xvjpf stage*</i>
(Opzionale: estrarre il portage tree)                            # <i>tar xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 -C /mnt/gentoo/usr</i>
(Opzionale: copiare i distfiles)                                 # <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
(Scegliere il mirror)                                            # <i>mirrorselect -s4 -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Copiare le informazioni dei nameservers)                        # <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Montare il filesystem proc)                                     # <i>mount -t proc none /mnt/gentoo/proc</i>
(Entrare nel nuovo ambiente chroot)                              # <i>chroot /mnt/gentoo /bin/bash</i>
(Caricare le variabili necessarie)                               # <i>env-update; source /etc/profile</i>
(Solo in caso di accesso a internet, non GRP:
 aggiornare il portage tree)                                     # <i>emerge --sync</i>
</pre>

<p>
A questo punto installare Gentoo:
</p>

<pre caption="Installazione di Gentoo">
(solo Stage1:)
(  Modifica di USE, CFLAGS e CXXFLAGS. Non cambiare CHOST) # <i>nano -w /etc/make.conf</i>
(  Sistema di Bootstrap)                                   # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(solo Stage1 e Stage2:)
(  Installazione del sistema di base)                      # <i>emerge system</i>
</pre>

<note>
Per sistemi sparc le CFLAGS adatte sono <c>-mcpu=tua_cpu -02 -pipe</c>, dove
<c>tua_cpu</c> è una tra <c>ultrasparc3</c>, <c>ultrasparc</c>, <c>v9</c>
(sistemi a 64 bit) o <c>hypersparc</c> <c>supersparc</c>, <c>v8</c> o <c>v7</c>
(sistemi a 32 bit).  può essere interessante impostare anche la flag
<c>-frename-registers</c>. Notare che, diversamente dai sistemi x86,
<c>-fomit-frame-pointer</c> non è raccomandato.
</note>

<p>
Nel prossimo passo verranno impostare alcune informazioni necessarie:
</p>

<pre caption = "Impostazione del fuso orario (timezone)">
<comment>(Elencare i fusi orari disponibili)</comment>

# <i>ls /usr/share/zoneinfo</i>

<comment>Usare Brussels come esempio</comment>
# <i>nano -w /etc/conf.d/clock</i>
TIMEZONE="Europe/Brussels"
</pre>

<p>
A questo punto modificare <path>/etc/fstab</path>:
</p>

<pre caption="Impostare fstab">
# <i>nano -w /etc/fstab</i>
</pre>

<p>
Per il file <path>/etc/fstab</path> usare questo esempio come <c>modello</c>,
(non copiarlo alla lettera):
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;                  &lt;mountpoint&gt;    &lt;type&gt;         &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/sdax               none            swap            sw                      0 0
/dev/sdax               /               ext3            noatime                 0 1
/dev/cdroms/cdrom0      /mnt/cdrom      auto            noauto,user             0 0
none                    /proc           proc            defaults                0 0
none                    /dev/shm        tmpfs           nodev,nosuid,noexec     0 0
</pre>

<p>
Continuare installando il kernel di Linux. I pacchetti dei kernel disponibili
per Sparc sono <c>sparc-sources</c> (2.4) e <c>gentoo-sources</c> (2.6). La
flag USE <c>ultra1</c> deve essere impostata sui modelli Ultra 1 e Netra i 1
"Enterprise" e "Creator" per il corretto supporto del controller ethernet HME
integrato.
</p>

<pre caption="Installazione del Kernel">
(Installare i sorgenti del Kernel)	                   # <i>emerge <comment>&lt;kernel-package-here&gt;</comment></i>
                                                           # <i>cd /usr/src/linux; make menuconfig</i>
(   (2) Includere shmfs, procfs, devfs se non si usa udev)
(   (3) Compilare il kernel)
(       - kernels 2.4 su sparc64)                          # <i>make dep &amp;&amp; make clean vmlinux image modules modules_install</i>
(       - kernels 2.6 su sparc64                           # <i>make &amp;&amp; make image modules_install</i>
(   (4) Copiare il kernel)
(       - kernels 2.4 su sparc64)                          # <i>cp arch/sparc64/boot/image /boot</i>
(       - kernels 2.6 su sparc64)                          # <i>cp arch/sparc64/boot/image /boot</i>
</pre>

<p>
Installare altri strumenti probabilmente necessari:
</p>

<pre caption="Installazione degli strumenti di sistema">
(Installare il logger di sistema; scegliere tra: sysklogd, metalog, msyslog, syslog-ng) # <i>emerge syslog-ng </i>
(Aggiungere il logger di sistema all'avvio automatico durante il boot)                  # <i>rc-update add syslog-ng default</i>
(Installare un demone cron; scegliere tra: vixie-cron, dcron, fcron)                    # <i>emerge vixie-cron</i>
(Aggiungere il demone cron all'avvio automatico durante il boot)                        # <i>rc-update add vixie-cron default</i>
(Script per il nome di dominio)                                                         # <i>rc-update add domainname default</i>
(solo per kernels 2.6.x: si può usare udev al posto di devfs)	                        # <i>emerge udev</i>
</pre>

<note>
Per maggiori informazioni su come usare udev, leggere la <uri
link="/doc/it/udev-guide.xml">Guida udev per Gentoo</uri>. Notare che l'opzione
<c>RC_DEVICE_TARBALL="no"</c> è preferibile nel sistemi Sparc.
</note>

<p>
Proseguire con le impostazioni finali per Gentoo:
</p>

<pre caption="Completamento della configurazione">
(Impostare la password di root)                                       # <i>passwd</i>
(Creare un utente)                                                    # <i>useradd your_user -m -G users,wheel,audio -s /bin/bash</i>
(Impostare la password per questo utente)                             # <i>passwd your_user</i>
(Impostare il nome della macchina)                                    # <i>echo mymachine &gt; /etc/hostname</i>
(Impostare il nome del dominio)                                       # <i>echo mydomain.com &gt; /etc/dnsdomainname</i>
(Impostare il file hosts, almeno:"127.0.0.1 localhost mymachine")     # <i>nano -w /etc/hosts</i>
(Configurazione base delle impostazioni di sistema; seguono commenti) # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption="Inizializzazione della rete">
(Installazione dela rete; gli utenti dhcp devono impostare iface_eth0="dhcp") # <i>nano -w /etc/conf.d/net</i>
(Elencare i moduli da avviare all'avvio)                                      # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;version&gt;</comment></i>
(Avviare automaticamente la rete al boot)                                     # <i>rc-update add net.eth0 default</i>
(Solo se hai più periferiche di rete:)
   (1) Creare l'initscript per ogni periferica)                               # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Impostare l'avvio automatico al boot)                                  # <i>rc-update add net.ethx default</i>
</pre>

<p>
Installare il bootloader
</p>

<pre caption="Installazione di SILO">
# emerge silo
# nano -w /etc/silo.conf
partition = 1
root = /dev/sda1
timeout = 150

image = /boot/image
    label = Gentoo
# silo
</pre>


<p>
Fare l'unmount di tutte le partizioni e riavviare con il nuovo kernel:
</p>

<pre caption="Rifinire e installare la GUI">
(Uscire dalla chroot)                        # <i>exit; cd /</i>
(Smontare le partizioni)                     # <i>umount /mnt/gentoo/proc /mnt/gentoo</i>
(Riavviare: rimuovere il CD d'installazione) # <i>reboot</i>
(Dopo il riavvio:)
(solo per utenti GRP)
(  (1) Montare il CD 2)                      # <i>mount /dev/cdroms/cdrom0 /mnt/cdrom</i>
(  (2) Copiare i pacchetti)                  # <i>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</i>
(  (3) Installare software extra)            # <i>emerge -k xorg-x11 gnome kde</i>
(  (4) Configurare il server X)              # <i>nano -w /etc/X11/xorg.conf</i>
</pre>

<p>
Si possono acquisire maggiori informazioni consultando la <uri
link="/doc/it/index.xml">Documentazione di Gentoo</uri>.
</p>

</body>
</section>
</chapter>
</guide>
