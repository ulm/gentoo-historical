<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/it/gentoo-sparc-quickinstall.xml" lang="it">
<title>Quickinstall per Gentoo Linux Sparc</title> 
<author title="Autore">
  <mail link="ciaranm@gentoo.org">Ciaran McCreesh</mail> 
</author> 
<author title="Traduzione">
  <mail link="luna80@gmail.com">Diana Fossati</mail> 
</author>

<abstract> 
La guida veloce di riferimento descrive tutti i dettagli per il
processo di installazione in un manuale non prolisso. Per seguire questa guida,
l'utente deve giÃ  avere un'esperienza precedente nell'installazione di Gentoo.
</abstract> 
<license/>

<version>1.10</version> 
<date>2006-01-08</date>

<chapter> <title>Guida veloce di riferimento per Sparc</title>
<section>
<body>

<p>
Questa guida Ãš per le persone che hanno giÃ  una precedente esperienza
nell'installazione di Gentoo Linux. Per delle instruzioni piÃ¹ dettagliate
consultare 
<uri link="http://www.gentoo.org/doc/it/handbook">Gentoo Handbook</uri>.
</p>

<p>
Le immagini ISO e Netboot per l'installazione sono disponibili nel <uri
link="http://www.gentoo.org/main/en/mirrors.xml">Gentoo Mirrors</uri>.
L''universal' ed il 'minimal' CD sono avviabili e contengono i tools necessari
per l'installazione di Gentoo. Il CD 'universal' contiene anche gli stages ed
alcuni distfiles. Il 'packages' cd contiente paccheti precompilati per
l'installazion GRP. Le immagini Netboot non contengono stages ma contengono un
sottoinsieme del set standard di tools (nota che quando si fa il boot da rete
bisogna usare <c>vi</c> al posto di <c>nano</c>).
</p>

<p> 
Usa <c>strop+A</c> (tastiera) o invia un break (console seriale) mentre stai
facendo il boot per entrare in OBP. Per il boot dal CD 'universal' o 'minimal'
usa il comando <c>boot cdrom</c>, mentre con il Netboot usa <c>boot net</c>.
Premi return per usare il kernel predefinito, oppure premi il tab per vedere la
lista dei kernel alternativi.
</p>

<note>
Per maggiori informazioni su OBP, guarda <uri
link="/doc/it/gentoo-sparc-obpreference.xml">
OpenBoot PROM (OBP) Reference</uri> o consulta
Sun's "OpenBoot 3.x Command Reference" (P/N 802-3242).
</note>

<pre caption="Impostazioni iniziali">
# <i>date</i>  (Asssicurati che la tua ora e la data siano corretti. Se non lo sono, sistemali con <i>date MMDDhhmmCCYY</i> )
# <i>modprobe module_name</i>  (Opzionale - Carica i moduli necessari)
# <i>ifconfig eth0 a.b.c.d netmask e.f.g.h broadcast i.j.k.l</i> (Configurazione della rete)
# <i>route add -net default gw a.b.c.d netmask 0.0.0.0 metric 1 eth0</i> (Configurazione del gateway predefinito)
# <i>echo "nameserver a.b.c.d" > /etc/resolv.conf</i> (Inizializza il DNS)
# <i>fdisk /dev/sda</i> (Partizionameno del disco)
</pre>

<p>
Per le macchine sparc Ãš necessaria una disclabel, che puÃ² essere creata
usando 's'.
</p>

<p>
Una partizione separata /boot non Ãš raccomandata per sparc. La partizione di
root deve essere completamente nel primo GByte del disco per tutte le
macchine sparc32. Il file system raccomandato Ãš ext3. Sono necessari al
minimo 512MBytes di RAM e swap per il bootstrap e altre compilazioni
pesanti.
</p>

<p>
Inizializza le tue partizioni con i comandi <c>mke2fs</c> (Ext2), <c>mke2fs
-j</c> (Ext3) e <c>mkswap</c> (per la partizione di swap). Per esempio:
<c>mke2fs -j /dev/sda1</c>.
</p>

<p>
Prosegui montando le partizioni e estraendo il file per lo stage scelto.
</p>

<pre caption="Preparazione dell'installazione">
(Attiva la partizione di swap)                  		# <i>swapon /dev/sdax</i>
(Monta la partizione di root)                    		# <i>mount /dev/sdax /mnt/gentoo</i>
(Crea il mountpoint di boot)                     		# <i>cd /mnt/gentoo</i>
(Estrae il tarball dello lo stage...)         			# <i>tar xvjpf /mnt/cdrom/stages/stage?-*.tar.bz2</i>
(<comment>o</comment> scarica l'ultimo tarball disponibile...)			# <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(                  ... estrae)              			# <i>tar xvjpf stage*</i>
(Opzionale: estrae il portage tree)		                # <i>tar xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 -C /mnt/gentoo/usr</i>
(Opzionale: copia i distfiles)			                # <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
(Scegliere il mirror)	                        	        # <i>mirrorselect -a -s4 -o | grep 'GENTOO_MIRRORS=' &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Copia le informazioni dei nameservers)  	                # <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Monta il files system proc)  		                        # <i>mount -t proc none /mnt/gentoo/proc</i>
(Entra nel nuovo ambiente chroot)	                        # <i>chroot /mnt/gentoo /bin/bash</i>
(Carica le variabili necessarie)	                        # <i>env-update; source /etc/profile</i>
(Solo  in caso di accesso a internet, 
 non GRP: aggiorna il portage)			                # <i>emerge --sync</i>
</pre>

<p>
Adesso installiamo Gentoo:
</p>

<pre caption="Installazione di Gentoo">
(solo Stage1:)
(  Modifica di USE, CFLAGS e CXXFLAGS. Non cambiare CHOST) # <i>nano -w /etc/make.conf</i>
(  Sistema di Bootstrap)                                   # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(solo Stage1 e Stage2:)
(  Installazione del sistema di base)                      # <i>emerge system</i>
</pre>

<note>
Per sistemi sparc le CFLAGS adatte sono <c>-mcpu=tua_cpu -02 -pipe</c>,
dove <c>tua_cpu</c> Ãš una tra <c>ultrasparc3</c>, <c>ultrasparc</c>, <c>v9</c>
(sistemi a 64 bit) o <c>hypersparc</c> <c>supersparc</c>, <c>v8</c> o <c>v7</c>
(sistemi a 32 bit).  puÃ² essere interessante settare anche il flag
<c>-frename-registers</c>. Nota che, diversamente dai sistemi x86,
<c>-fomit-frame-pointer</c> non Ãš raccomandato.
</note>

<p>
Nel prossimo passo impostiamo alcune informazioni necessarie:
</p>
<pre caption = "Impostazione dei files di configurazione">
<comment>(Imposta la timezone)</comment>
# <i>cp /usr/share/zoneinfo/<comment>&lt;percorso al file di zona&gt;</comment> /etc/localtime</i>
<comment>(Edit del file /etc/fstab)</comment>
# <i>nano -w /etc/fstab</i>
</pre>

<p>
Per il file <path>/etc/fstab</path> usate questo esempio come punto di
partenza, (ma non copiatelo interamente!):
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;                  &lt;mountpoint&gt;    &lt;type&gt;         &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/sdax               none            swap            sw                      0 0
/dev/sdax               /               ext3            noatime                 0 1
/dev/cdroms/cdrom0      /mnt/cdrom      auto            noauto,user             0 0
none                    /proc           proc            defaults                0 0
none                    /dev/shm        tmpfs           nodev,nosuid,noexec     0 0
</pre>

<p>
Continua installando il kernel di Linux. I packages dei kernel disponibili
per Sparc sono <c>sparc-sources</c> (2.4) e <c>gentoo-sources</c>,
<c>vanilla-sources</c> (2.6). La USE flag <c>ultra1</c> deve essere settata sui
modelli Ultra 1 e Netra i 1 "Enterprise" e "Creator" per corretto supporto del
controller ethernet HME integrato.
</p>

<pre caption="Installazione del Kernel">
(Installa i sorgenti del Kernel)	                   # <i>emerge <comment>&lt;kernel-package-here&gt;</comment></i>
                                                           # <i>cd /usr/src/linux; make menuconfig</i>
(   (2) Includi shmfs, procfs, devfs se non usi udev)
(   (3) Compila il kernel)
(       - kernels 2.4 su sparc32)                          # <i>make dep &amp;&amp;make clean vmlinux modules modules_install</i>
(       - kernels 2.4 su sparc64)                          # <i>make dep &amp;&amp; make clean vmlinux image modules modules_install</i>
(       - kernels 2.6 su sparc32                           # <i>make &amp;&amp; make modules_install</i>
(       - kernels 2.6 su sparc64                           # <i>make &amp;&amp; make image modules_install</i>
(   (4) Copia del kernel)
(       - kernels 2.4 su sparc32)                          # <i>cp vmlinux /boot/image</i>
(       - kernels 2.4 su sparc64)                          # <i>cp arch/sparc64/boot/image /boot</i>
(       - kernels 2.6 su sparc32)                          # <i>cp arch/sparc/boot/image /boot</i>
(       - kernels 2.6 su sparc64)                          # <i>cp arch/sparc64/boot/image /boot</i>
</pre>

<p>
Installazione di altri tools di cui potresti aver bisogno:
</p>

<pre caption="Installazione dei tools del sistema">
(Installa il logger di sistema; scegli: sysklogd, metalog, msyslog, syslog-ng)  # <i>emerge syslog-ng </i>
(Aggiunge il logger di sistema all'avvio automatico durante il boot)            # <i>rc-update add syslog-ng default</i>
(Installa un demone cron; scegli: vixie-cron, dcron, fcron)                 	# <i>emerge vixie-cron</i>
(Aggiunge il demone cron all'avvio automatico durante il boot)                  # <i>rc-update add vixie-cron default</i>   
(Script per il nome di dominio)                                                 # <i>rc-update add domainname default</i>
(solo per kernels 2.6.x: si puÃ² usare udev al posto di devfs)	                # <i>emerge udev</i>
</pre>

<note>
Per maggiori informazioni su come usare udev, guarda <uri
link="/doc/it/udev-guide.xml">Guida udev per Gentoo</uri>. Nota che l'opzione
<c>RC_DEVICE_TARBALL="no"</c> Ãš preferibile nel sistemi Sparc.
</note>

<p>
Impostazioni finali per Gentoo:
</p>

<pre caption="Finalizzazione della configurazione">
(Imposta la password di root)                                      	# <i>passwd</i>
(Crea un utente)                                          		# <i>useradd your_user -m -G users,wheel,audio -s /bin/bash</i>
(Imposta la password per questo utente)                             	# <i>passwd your_user</i>
(Imposta il nome della macchina)                                	# <i>echo mymachine &gt; /etc/hostname</i>
(Imposta il nome del dominio)                              		# <i>echo mydomain.com &gt; /etc/dnsdomainname</i>
(Imposta l'hostsfile, almeno:"127.0.0.1 localhost mymachine")  		# <i>nano -w /etc/hosts</i>
(Configurazione base delle impostazioni di sistema; seguono commenti)	# <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption="Inizializzazione della rete">
(Installazione dela rete; gli utenti dhcp devono impostare iface_eth0="dhcp")  	# <i>nano -w /etc/conf.d/net</i>
(Elencare i moduli da avviare all'avvio)    		                   	# <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;version&gt;</comment></i>
(Avviare automaticamente la rete al boot)                   			# <i>rc-update add net.eth0 default</i>
(Solo se hai piÃ¹ periferiche di rete:)
   (1) Creare l'initscripts per ogni periferica)                    		# <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Impostare l'avvio automatico al boot)                              	# <i>rc-update add net.ethx default</i>
</pre>

<p>
Installazione del bootloader
</p>

<pre caption="Installazione di SILO">
# emerge silo
# nano -w /etc/silo.conf
partition = 1
root = /dev/sda1
timeout = 150

image = /boot/image
    label = Gentoo
# silo
</pre>


<p>
Fare l'unmount di tutte le partizioni e riavviare con il nuovo kernel:
</p>

<pre caption="Rifinire e installare la GUI">
(Esce da chroot)                            	# <i>exit; cd /</i>
(Smonta le partizioni)                      	# <i>umount /mnt/gentoo/proc /mnt/gentoo</i>
(Riavvia: rimuovi il CD d'installazione)	# <i>reboot</i>
(Dopo il riavvio:)
(solo per utenti GRP)
(  (1) Monta il CD 2) 	                        # <i>mount /dev/cdroms/cdrom0 /mnt/cdrom</i>  
(  (2) Copia i packages)	                # <i>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</i>
(  (3) Installa software extra) 	        # <i>USE="bindist" emerge -k xorg-x11 gnome kde mozilla</i>
(  (4) Configura il propio server X)            # <i>$EDITOR /etc/X11/XF86Config</i>
</pre>

<p>
Puoi avere maggiori informazioni consultando <uri
link="http://www.gentoo.org/doc/it/index.xml">Documentazione di Gentoo</uri>.
</p> 

</body> 
</section> 
</chapter> 
</guide>

