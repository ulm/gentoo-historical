<?xml version = '1.0' encoding = 'UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/it/idc.env.d-howto.xml" >
<title>Env.d HOWTO </title>
<author title="Author" >
<mail link="zhen@gentoo.org" >John P. Davis</mail>
</author>

<author title="Traduttore" >
Enrico Morelli
</author>

<abstract>
Questa guida spiega il significato e l'uso della directory
<path>/etc/env.d</path> e il suo contenuto.
</abstract>
<version>1.5</version>
<date>14 Gennaio 2003</date>
<chapter>
<title>Introduzione a <c>env.d</c> e Variabili Generiche</title>
<section>
<title>Variabili Ambiente su Gentoo</title>
<body>
<p>
Una delle più comuni domande che vediamo porre dagli utenti Gentoo è:
&quot;dove sono le mie variabili ambiente e che settaggio hanno?&quot;.
Prima di entrare in merito alla questione, dobbiamo conoscere cos'è una
variabile ambiente. Una variabile ambiente viene settata ogni qualvolta
viene eseguito il comando <c>export</c>. Se per esempio hai eseguito un
<c>export EDITOR=&quot;/usr/bin/vim&quot;</c>, hai settato una variabile ambiente che
dice al sistema che il tuo editor di default è vim. Ci sono differenti
tipi di variabili ambiente che possono essere settate nel nostro sistema Gentoo,
ecco alcuni esempi:
</p>
<note>
<c>export</c> assegnerà un valore ad una variabile ambiente
che sarà riconosciuto nell'ambito della shell *e* da tutti i
processi figli.
Se vuoi che l'effetto non coinvolga i processi figli, basta assegnare un 
valore alla variabile, così: <i>VAR=&quot;valore&quot;</i>.
</note>
<note>Il tuo file <i>00basic</i>  può differire, ma questo non è
un problema dato che queste variabili sono quelle che arrivano di
default insieme a Gentoo.
</note>
<info>Questi esempi si possono trovare in <path>/etc/env.d/00basic</path>. </info>
<table>
<tr>
<th>Variabile</th>
<th>Funzione</th>
</tr>
<tr>
<ti>PATH</ti>
<ti>Questa setta il percorso di ricerca dei programmi. I valori sono delimitati da ':'. 
La variabile PATH dovrebbe apparire più o meno così: <c>PATH=/usr/local/bin:/opt/bin </c>. </ti>
</tr>
<tr>
<ti>ROOTPATH</ti>
<ti>Questa variabile è simile alla precedente,
solo che setta il percorso di ricerca dei comandi solo per l'utente <c>root</c>.
Un esempio di questa variabile potrebbe essere: <c>ROOTPATH=/usr/local/bin:/opt/bin</c>. </ti>
</tr>
<tr>
<ti>LDPATH</ti>
<ti> Questa variabile specifica qual'è il percorso
delle librerie per il linking. Anche questa ha i valori delimitati da ':'.
Un esempio potrebbe essere: <c>LDPATH=/usr/local/lib </c>. </ti>
</tr>
<tr>
<ti>MANPATH</ti>
<ti>Questa variabile specifica dove sono memorizzate le
pagine dei manuali sulla tua macchina. È come <i>PATH</i>, ma è
specifica per le manpages. Un esempio potrebbe essere: <c>MANPATH=/usr/share/man:/usr/local/share/man </c>.
</ti>
</tr>
<tr>
<ti>INFODIR</ti>
<ti>Questa variabile specifica invece dove sono i files info.Un esempio potrebbe essere:
<c>INFODIR=/usr/share/info </c>.  </ti>
</tr>
<tr>
<ti>PAGER</ti>
<ti>Questa specifica quale impaginatore usare, p.e. less o more.
Un esempio potrebbe essere:
<c>PAGER=/usr/bin/less </c>. </ti>
</tr>
<tr>
<ti>EDITOR</ti>
<ti>Con questa specifichi l'editor di default del sistema.
Potrebbe apparire così:
<c>EDITOR=/usr/bin/vim </c>. </ti>
</tr>
</table>
<p>Questo è un esempio di un file <i>00basic</i> solo per darti un'idea
di come si presenta.
Se il tuo file <c>00basic</c> si danneggia, puoi usare questo. </p>
<pre caption="00basic" >
# Copyright 1999-2002 Gentoo Technologies, Inc.
# Distributed under the terms of the GNU General Public License, v2 or later
# $Header: /home/cvsroot/gentoo-src/rc-scripts/etc/env.d/00basic,v 1.6 2002/06/20 22:07
:37 azarah Exp $

PATH=/usr/local/bin:/opt/bin
ROOTPATH=/usr/local/bin:/opt/bin
LDPATH=/usr/local/lib
MANPATH=/usr/share/man:/usr/local/share/man
INFODIR=/usr/share/info
CVS_RSH=ssh
PAGER=/usr/bin/less
EDITOR=/usr/bin/vim
LESSOPEN=&quot;|lesspipe.sh %s&quot;
</pre>
</body>
</section>
<section>
<title>Formato di env.d</title>
<body>
<p>
I files all'interno di <c>env.d</c> sono sistemati in un ordine logico in modo
tale che quando esegui <c>env-update</c>, la variabili siano ordinate in modo
appropriato. Il numero che precede il nome del file specifica in quale ordine
deve essere processato, così <i>00basic</i> sarè il primo, quindi
sarà processato <i>01qualcosa</i> e così via. Anche il contenuto dei
files deve avere un formato specifico:</p>
<pre caption="Formato del contenuto" >
<comment># Questo è un commento come in BASH </comment>
<i>VARIABLE1=/percorso/di/qualcosa</i>
<comment>Alcune variabili possono avere argomenti delimitati dai ':'. </comment>
<i>VAR1A=/percorso/di/qualcosa:/percorso/di/qualchealtra/cosa</i>
<i>VARIABLE2=nome_di_qualcosa </i>
</pre>
</body>
</section>
</chapter>
<chapter>
<title>Variabili speciali e a cosa serve tutto questo.</title>
<section>
<title>Variabili speciali </title>
<body>
<p>
Ci sono alcune variabili speciali incluse in <c>env.d</c> e che sono:
<i>KDEDIRS,  PATH, CLASSPATH, LDPATH, MANPATH, INFODIR, ROOTPATH, CONFIG_PROTECT, CONFIG_PROTECT_MASK </i>. Sono speciali perché sono processate in modo
speciale e sono messe in speciali files che spiegheremo in seguito.
</p>
<note>Alcune delle variabile menzionate sotto le abbiamo giè viste in 
<i>00basic</i>. Non è sbagliato perché queste variabili possono
essere usate più di una volta in files separati, molti dei quali sono
spiegati sotto.
</note>
<table>
<tr>
<th>Variabile</th>
<th>Funzione</th>
</tr>
<tr>
<ti>KDEDIRS</ti>
<ti> Questo è il percorso di tutti i files KDE. </ti>
</tr>
<tr>
<ti>PATH</ti>
<ti>Menzionato precedentemente, valori delimitati dai ':' (vedi sopra).</ti>
</tr>
<tr>
<ti>CLASSPATH</ti>
<ti>Setta il percorso delle classi Java, valori delimitati dai ':'.</ti>
</tr>
<tr>
<ti>LDPATH</ti>
<ti>Menzionato precedentemente (vedi sopra).</ti>
</tr>
<tr>
<ti>MANPATH</ti>
<ti>Menzionato precedentemente (vedi sopra), valori delimitati dai ':'.</ti>
</tr>
<tr>
<ti>INFODIR</ti>
<ti>Menzionato precedentemente (vedi sopra), valori delimitati dai ':'.</ti>
</tr>
<tr>
<ti>ROOTPATH</ti>
<ti>Menzionato precedentemente (vedi sopra), valori delimitati dai ':'.</ti>
</tr>
<tr>
<ti>CONFIG_PROTECT</ti>
<ti>Tramite questa variabile specifichi quali files di
configurazione presenti in <path>/etc </path> vuoi 'proteggere' 
dalle installazioni di nuovi ebuilds, gli argomenti sono delimitati da spazi.
</ti>
</tr>
<tr>
<ti>CONFIG_PROTECT_MASK</ti>
<ti>Questa è basilarmente l'inverso di CONFIG_PROTECT, 
puoi specificare quali files presenti in <path>/etc</path> vuoi che vengano
modificati o sovrascritti automaticamente durante un processo di ebuild.
</ti>
</tr>
</table>
</body>
</section>
<section>
<title>A cosa serve tutto questo</title>
<body>
<p>
Bene, ora che abbiamo definito il tutto, probabilmente ti stai domandando cosa
centra questo con la tua macchina Gentoo. La potenza di <i>env.d</i> sta
nel fatto che tu hai il potere di cambiare queste variabili nel modo che ritieni
più opportuno per i tuoi scopi. Con le definizioni date sopra, spero tu
sia in grado di farlo.
</p>
<p>
Dato che abbiamo un'idea di cosa stiamo facendo, è il momento di spiegare
cosa succede a queste variabili.
Ad ogni esecuzione, <c>env-update</c> collega tutte queste variabili nell'ordine in cui le trova. Ricordi quando ho detto che è corretto avere variabili
<i>PATH</i> multiple in tanti files differenti? Questo perché <c>env-update</c>
scorre i files in sequenza e aggiunge i percorsi uno all'altro. In questo modo, se hai
un <i>PATH</i> per KDE, GNOME, il tuo <i>PATH</i> di default ed uno per X,
<i>env-update</i> concatenerà tutti questi percorsi insieme così che
alla fine tutti questi percorsi saranno combinati insieme. Carino no?
</p>
<p>Dato che queste variabili sono ora collegate insieme, è importante
notare dove vengono registrate.
</p>
<note>I files che seguono sono creati durante l'esecuzione di <c>env-update</c>
</note>
<pre caption="Files creati dalla somma di tutti i files in env.d" >
<i>LDPATH ----> /etc/ld.so.conf </i>
<i>CONFIG_PROTECT e CONFIG_PROTECT_MASK ----> /etc/profile.env (come variabili esportate)</i>
<i>Speciali e altre ----> /etc/profile.env </i>
</pre>
<p>
Se dai un'occhiata a <path>/etc/ld.so.conf</path>, puoi chiaramente vedere che
<i>env.d</i> è stato il sorgente di tutte le informazioni in esso contenute.
</p>
<pre caption="/etc/ld.so.conf" >
# ld.so.conf autogenerated by env-update; make all changes to
# contents of /etc/env.d directory
/usr/local/lib
/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2
/usr/lib/opengl/nvidia/lib
/usr/lib/mozilla
/usr/X11R6/lib
/opt/blackdown-jdk-1.3.1/jre/lib/i386/
/opt/blackdown-jdk-1.3.1/jre/lib/i386/native_threads/
/usr/qt/3/lib
/usr/qt/2/lib
/usr/kde/3/lib
</pre>
<p>
È una buona cosa conoscere che <path>/etc/profile.env</path> è il
sorgente della sessione della tua shell.
Questo è buono perché ora possiamo usare tutte le nostre nuove variabile
la prossima volta che apriamo una sessione di login.
</p>
<pre capton="Sequenza eventi env-update" >
<i>/etc/env.d settings ----env-update----> /etc/profile.env ---> /etc/profile 
---> bash ---> tutti i tuoi programmi</i>
</pre>
<p>Ora dovresti avere un <i>profile.env</i> che dovrebbe apparire più o meno così:</p>
<pre caption="/etc/profile.env" >
export CONFIG_PROTECT='/usr/kde/3/share/config /usr/share/config'
export KDEDIRS='/usr/kde/3:/usr'
export MANPATH='/usr/share/man:/usr/local/share/man:/usr/X11R6/man:/opt/blackdown-jdk-1
.3.1/man'
export INFODIR='/usr/share/info:/usr/X11R6/info'
export PATH='/usr/local/bin:/opt/bin:/opt/rar/bin:/usr/X11R6/bin:/opt/blackdown-jdk-1.3
.1/bin:/opt/blackdown-jdk-1.3.1/jre/bin:/usr/qt/3/bin:/usr/qt/2/bin:/usr/kde/3/bin'
export CONFIG_PROTECT_MASK='/etc/gconf'
export CLASSPATH='/opt/blackdown-jdk-1.3.1/jre/lib/rt.jar:.'
export ROOTPATH='/usr/local/bin:/opt/bin:/opt/rar:/usr/X11R6/bin:/opt/blackdown-jdk-1.3
.1/bin:/opt/blackdown-jdk-1.3.1/jre/bin:/usr/qt/3/bin:/usr/qt/2/bin:/usr/kde/3/bin'
export KDEDIR='/usr/kde/3'
export VIMRUNTIME='/usr/share/vim/vim61'
export JDK_HOME='/opt/blackdown-jdk-1.3.1'
export JAVAC='/opt/blackdown-jdk-1.3.1/bin/javac'
export PAGER='/usr/bin/less'
export HOSTNAME='l00ser.muc.edu'
export QMAKESPEC='linux-g++'
export LESSOPEN='|lesspipe.sh %s'
export CVS_RSH='ssh'
export EDITOR='/usr/bin/vim'
export QTDIR='/usr/qt/3'
export JAVA_HOME='/opt/blackdown-jdk-1.3.1'
export XINITRC='/etc/X11/xinit/xinitrc'
export MOZILLA_FIVE_HOME='/usr/lib/mozilla'
</pre>
<p>Ok, questo è tutto quello che dovevo dirti, ora puoi divertirti.</p>
</body>
</section>
</chapter>
</guide>
