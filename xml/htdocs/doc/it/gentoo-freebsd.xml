<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/gentoo-freebsd.xml,v 1.4 2006/02/06 20:41:23 so Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/it/gentoo-freebsd.xml" lang="it">
<title>Piccola introduzione a Gentoo/FreeBSD</title>

<author title="Autore">
  <mail link="ignacio.arquelatour@gmail.com">Ignacio Arque-Latour</mail>
</author>
<author title="Autore">
  <mail link="citizen428@gentoo.org">Michael Kohl</mail>
</author>
<author title="Autore">
<mail link="angusyoung@gentoo.org">Otavio R. Piske</mail>
</author>
<author title="Autore">
  <mail link="ka0ttic@gentoo.org">Aaron Walker</mail>
</author>
<author title="Traduttore">
  <mail link="lucamarturana@gmail.com">Luca Marturana</mail>
</author>

<abstract>
Questo documento contiene alcune informazioni generali su FreeBSD e le
istruzioni per installare Gentoo/FreeBSD. Inoltre esso include informazioni per
chi vuole contribuire allo sviluppo di questo progetto.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>2.0</version>
<date>2006-01-10</date>

<chapter>
<title>Introduzione a FreeBSD</title>
<section>
<title>Cos'è FreeBSD?</title>
<body>

<p>
<uri link="http://www.freebsd.org/">FreeBSD</uri> è un sistema operativo
libero Unix-like
(<uri link="http://www.freebsd.org/copyright/freebsd-license.html">licenza
</uri>). Nel 1993, quando è stato bloccato lo sviluppo di
<uri link="http://www.386bsd.org/">386BSD</uri>, sono nati due progetti:
<uri link="http://www.netbsd.org/">NetBSD</uri>, comunemente conosciuto per la
sua capacità di funzionare su un vasto numero di architetture, e FreeBSD il
quale è più specifico per l'architettura x86. FreeBSD è molto apprezzato per
la sua stabilità, performance e sicurezza, pertanto viene utilizzato da
piccole e grandi compagnie in tutto il mondo. L'ultima release di FreeBSD
attualmente è la 5.4, la quale è stata
usata per la fondazione del progetto Gentoo/FreeBSD.
</p>

</body>
</section>
<section>
<title>Cos'è Gentoo/FreeBSD?</title>
<body>

<p>
Gentoo/FreeBSD è un progetto per fornire un sistema operativo FreeBSD con la
sensibilità dello stile Gentoo. L'obiettivo a lungo termine del progetto
Gentoo/BSD è quello di dare la facoltà agli utenti di poter scegliere una
qualsiasi combinazione tra kernel *BSD e Linux, librerie c *BSD e GNU,
strumenti utente *BSD e GNU.
</p>

</body>
</section>
<section>
<title>FreeBSD e Linux</title>
<body>

<p>
Chi vuole migrare da Linux a FreeBSD solitamente considera i due sistemi
operativi "pressocchè identici". In effetti FreeBSD condivide molte
somiglianze con le distribuzioni Linux. Tuttavia esso ha alcune differenze
chiave degne di nota:
</p>

<ul>
  <li>
    Contrariamente a Linux, il quale si riferisce solo al kernel, FreeBSD è un
    sistema operativo completo, che consiste di librerie C, strumenti utente e
    altro ancora. Questo approccio di sviluppo inoltre mantiene
    complessivamente il sistema molto coerente.
  </li>
  <li>
    Contrariamente al kernel Linux, lo sviluppo di FreeBSD non è guidato da
    una sola persona ma da un piccolo gruppo di persone detto il <uri
    link="http://www.freebsd.org/doc/en_US.ISO8859-1/articles/contributors/staff-core.html">Core
    Team</uri>.
  </li>
</ul>

<p>
Inoltre, FreeBSD ha alcune differenze tecniche che lo distinguono da Linux.
Alcune sono molto importanti da conoscere anche se non si vuole partecipare
allo sviluppo del progetto Gentoo/FreeBSD:
</p>

<ul>
  <li>
    Per avere le funzioni di dynamic linking tipo <c>dlopen()</c>, i programmi
    non hanno bisogno di essere linkati alle libdl come su GNU/Linux ma alle
    libc.
  </li>
  <li>
    FreeBSD non ha uno strumento ufficiale per compilare il kernel, pertanto si
    devono risolvere manualmente le feature mancanti.
  </li>
  <li>
    FreeBSD come filesystem utilizza UFS e UFS-2 e non ha nessun supporto
    ufficiale per ReiserFS o XFS. Tuttavia, ci sono progetti per aggiungere il
    supporto read-only per questi filesystem. Accedere a partizioni ext2 o ext3
    è già possibile ma non si può installare il sistema su di esse.
  </li>
</ul>

</body>
</section>
</chapter>

<chapter>
<title>Installare Gentoo/FreeBSD</title>
<section>
<title>Istruzioni per l'installazione</title>
<body>

<p>
Dopo questa breve introduzione, ecco come finalmente installare Gentoo/FreeBSD.
Sfortunatamente non ci sono strumenti ufficiali per l'installazione, perciò
per installare Gentoo/FreeBSD si può scegliere tra due alternative. Si può
decidere di utilizzare una precedente installazione di FreeBSD, oppure si può
utilizzare come base l'eccellente <uri link="http://www.freesbie.org/">FreeSBIE
LiveCD</uri>.
</p>

<p>
Prima di iniziare con l'installazione, è necessario configurare un hard-disk
per usarlo con Gentoo/FreeBSD. Ciò è possibile farlo con <c>sysinstall</c>
(presente sia su una qualsiasi installazione di FreeBSD sia su FreeSBIE) o
manualmente usando i comandi <c>fdisk</c>, <c>disklabel</c> e <c>newfs</c>. Se
non si ha mai configurato un sistema FreeBSD, <c>sysinstall</c> è la migliore
soluzione. Se si hanno problemi durante il partizionamento e la formattazione
dell'hard-disk, si può consultare il
<uri link="http://www.freebsd.org/doc/it_IT.ISO8859-15/books/handbook/">
FreeBSD Handbook</uri> oppure entrare nel canale <c>#gentoo-bsd</c> sui server
IRC Freenode.
</p>

<p>
Dopo aver configurato i dischi bisogna creare i punti di mount per
l'installazione di Gentoo/FreeBSD e montare tutte le partizioni necessarie.
</p>

<pre caption="Creazione mount point e montaggio partizioni">
# <i>mkdir /mnt/gentoo</i>
<comment>(Al posto di X mettere i numeri corretti secondo il proprio hard-disk.)</comment>
# <i>mount /dev/adXsXa /mnt/gentoo</i>
</pre>

<p>
Adesso, dopo aver montato le partizioni necessarie, è il tempo di scaricare e
scompattare lo stage3.
</p>

<pre caption="Download e scompattamento del tarball contenente lo stage3">
# <i>cd /mnt/gentoo/</i>
<comment>(Va bene qualsiasi altro mirror purchè contenga la directory experimental/.)</comment>
# <i>wget
http://gentoo.osuosl.org/experimental/x86/freebsd/stage3-x86-fbsd-20051020.tar.bz2</i>
# <i>tar -jxvpf stage3-x86-fbsd-20051020.tar.bz2</i>
<comment>(Adesso, se lo si vuole, si può anche eliminare il tarball.)</comment>
# <i>rm stage3-x86-fbsd-20051020.tar.bz2</i>
</pre>

<p>
Prima di chrootarsi nello stage precedentemente estratto, bisogna prima
ottenere una copia dell'overlay di Gentoo/FreeBSD. La via migliore per ottenere
ciò è quella di scaricare l'ultima snapshot disponibile ed estrarla in
<path>/mnt/gentoo/usr/local/portage</path>.
</p>

<pre caption="Ottenere l'overlay Portage di Gentoo/FreeBSD">
# <i>cd /mnt/gentoo/usr/local/portage</i>
# <i>wget
http://gentoo.osuosl.org/experimental/snapshots/portage-alt-overlay-latest.tar.bz2</i>
# <i>tar -xjf portage-alt-overlay-latest.tar.bz2</i>
<comment>(Adesso si può anche eliminare il tarball contenenente lo snapshot
con il comando seguente.)</comment>
# <i>rm portage-alt-overlay-latest.tar.bz2</i>
</pre>

<p>
Alternativamente, è possibile utilizzare Subversion per controllare la
versione corrente dell'overlay. Se si è interessati in questa strada, dare
un'occhiata a <uri link="/proj/en/gentoo-alt/overlay.xml">Gentoo/ALT overlay
documentation </uri>.
</p>

<p>
Per permettere all'installazione di funzionare, è necessario montare il
filesystem <path>/dev</path> dal sistema correntemente in uso al mount point di
Gentoo/FreeBSD prima di procedere con il chroot.
</p>

<pre caption="Montaggio /dev e chroot">
# <i>mount -t devfs none /mnt/gentoo/dev/</i>
# <i>cp /etc/resolv.conf /mnt/gentoo/etc</i>
# <i>chroot /mnt/gentoo/ /bin/bash</i>
# <i>source /etc/profile</i>
</pre>

<p>
Dopo aver ottenuto l'overlay Gentoo/FreeBSD, è il tempo di linkare
<path>/etc/make.profile</path> al profilo corretto e preparare
<path>/etc/make.conf</path>.
</p>

<pre caption="Settare il profilo ed editare /etc/make.conf">
# <i>ln -sf /usr/local/portage/portage-alt-overlay/profiles/default-bsd/fbsd/5.4/x86/ /etc/make.profile</i>
<comment>(L'editor standard di FreeBSD è ee, il quale è utilizzato per editare /etc/make.conf)</comment>
# <i>ee /etc/make.conf</i>
<comment>(Assicurarsi di aver aggiunto le seguenti righe:)</comment>
CHOST="i686-gentoo-freebsd5.4"
ACCEPT_KEYWORDS="~x86-fbsd ~x86"
FEATURES="-sandbox collision-protect"
PORTDIR_OVERLAY="/usr/local/portage/portage-alt-overlay"
</pre>

<p>
Per poter bootare correttamente, bisogna prima creare la directory
<path>/proc</path>.
</p>

<pre caption="Creazione della directory /proc">
# <i>mkdir /proc</i>
</pre>

<p>
Adesso, bisogna ottenere una copia del Portage tree principale di Gentoo, che
a seconda della connessione utilizzata può richiedere un po' di tempo.
</p>

<pre caption="Ottenere il portage tree">
# <i>emerge --sync</i>
<comment>(Si può ottenere il Portage tree anche in un'altro modo:)</comment>
# <i>cd /</i>
# <i>wget http://gentoo.osuosl.org/snapshots/portage-latest.tar.bz2</i>
# <i>tar -xjf portage-latest.tar.bz2 -C /usr/</i>
# <i>emerge --metadata</i>
</pre>

<p>
Adesso, se lo si vuole, è possibile ricompilare i pacchetti base del
sistema.
</p>

<pre caption="Ricompilazione dei pacchetti di sistema FreeBSD (opzionale)">
# <i>emerge -e system</i>
</pre>

<p>
Con il comando <c>emerge -e system</c>, i sorgenti del kernel FreeBSD vengono
installati in <path>/usr/src/sys</path>. Per chi salta questo passaggio è
possibile installarli in questo modo:
</p>

<pre caption="Installazione sorgenti del kernel FreeBSD">
# <i>emerge freebsd-sources</i>
</pre>

<p>
Configurare e compilare un kernel personalizzato è molto differente dal
compilare un kernel Linux, quindi se non si è familiari con questo processo
consigliamo di dare un'occhiata al <uri
link="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kernelconfig.
html">
capitolo 8</uri> del manuale FreeBSD.
</p>

<p>
Si faccia attenzione perchè correntemente solo la via "tradizionale" di
compilazione del kernel è supportata da Gentoo/FreeBSD! Inoltre il comando
<c>make install</c> probabilmente richiederà il file
<path>/boot/device.hints</path>. Una versione generica è possibile trovarla
nella sottodirectory <path>conf</path> della configurazione <c>GENERIC</c> ed
è chiamata <path>GENERIC.hints</path>.
</p>

<p>
È il tempo di sistemare alcune configurazioni base del sistema. Primo, bisogna
sistemare il file <path>/etc/fstab></path> con i mount-points necessari.
</p>

<pre caption="Modifica di /etc/fstab">
# <i>ee /etc/fstab</i>
<comment>(Questo è un esempio, sostituire X e Y con i valori corretti del
proprio hard-disk.)</comment>
#Device         Mountpoint      Fstype          Options         Dump Pass
/dev/adXsYb     none            swap            sw              0     0
/dev/adXsYa     /               ufs             rw              1     1
/dev/adXsYe     /usr/home       ufs             rw              2     2
/dev/adXsYd     /tmp            ufs             rw              2     2
/dev/acdX       /cdrom          cd9660          ro,noauto       0     0
</pre>

<p>
Adesso è il tempo di passare al setup della configurazione di rete prima del
reboot finale.
</p>

<pre caption="Settaggio della configurazione di rete">
# <i>ee /etc/conf.d/net</i>
<comment>(Questo è solo un esempio, il quale deve essere adattato alle
proprie esigenze.)</comment>
ifconfig_rl0=("192.168.0.10 netmask 255.255.255.0 broadcast 192.168.0.255")
routes_rl0=("-net 0.0.0.0 -host 192.168.0.1")
</pre>

<p>
Per avere le interfacce di rete attivate al boot, bisogna aggiungerle al
runlevel default.
</p>
  	 
<pre caption="Aggiunta di una interfaccia di rete al runlevel default">
# <i>rc-update add net.rl0 default</i>
</pre>

<p>
L'hostname del sistema è possibile cambiarlo in <path>/etc/hostname</path>.
</p>

<pre caption="Configurazione dell'hostname della macchina">
# <i>echo "HOSTNAME" > /etc/hostname</i>
</pre>

<p>
Nel caso si vuole usare un layout della tastiera per la propria lingua, è
necessario configurarlo in <path>/etc/conf.d/syscons</path>. L'esempio seguente
usa il layout spagnolo, correggerlo se si vuole utilizzarne un altro.
</p>

<pre caption="Configurazione layout tastiera (opzionale)">
# <i>ee /etc/conf.d/syscons</i>
KEYMAP="spanish.iso.acc"
<comment>(Tutti i layout possibili si possono trovare in
/usr/share/syscons/keymaps).</comment>
</pre>

<impo>
Assicurarsi di aver aggiunto la nuova installazione di Gentoo/FreeBSD alla
configurazione del bootloader, altrimenti non si potrà accedere al nuovo
sistema! Se non si hanno altri bootloader installati, è necessario utilizzare
<c>boot0</c>, poichè è l'unico bootloader correntemente supportato da
FreeBSD. In questo caso si possono utilizzare altri sistemi operativi per la
configurazione di <c>boot0</c>.
</impo>

<pre caption="Installazione e configurazione di boot0">
# <i>emerge boot0</i>
<comment>(Uscire dall'ambiente chrootato)</comment>
# <i>exit</i>
<comment>(Comandi da dare fuori dal chroot)</comment>
# <i>fdisk -b -B /mnt/gentoo/boot/boot0 /dev/adX</i>
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>disklabel -B adXsY</i>
</pre>

<p>
Se si vogliono ulteriori informazioni per quanto riguarda la configurazione di
<c>boot0</c>, consultare il
<uri
link="http://www.freebsd.org/doc/it_IT.ISO8859-15/books/handbook/boot.html">
capitolo 12</uri> del FreeBSD handbook.
</p>

<p>
Adesso si può cambiare una password per l'utente <c>root</c> e aggiungerne un
altro per l'uso normale del sistema.
</p>

<pre caption="Modifica della password di root e aggiunta di un nuovo utente">
# <i>passwd</i>
<comment>(Per ulteriori informazioni sull'aggiunta di nuovi utenti consultare
il manuale FreeBSD).</comment>
# <i>adduser</i>
</pre>

<p>
Congratulazioni, adesso la fase di installazione di Gentoo/FreeBSD è terminata
ed è possibile utilizzarlo dopo il reboot finale. Buon divertimento!
</p>

<pre caption="Reboot del sistema">
# <i>exit</i>
# <i>reboot</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Sviluppo di Gentoo/FreeBSD</title>
<section>
<title>Come aiutare</title>
<body>

<p>
Ci sono molte cose con cui si può aiutare, a seconda delle proprie capacità e
del tempo libero:
</p>

<ul>
  <li>
    Abbiamo bisogno hacker per fare un porting delle patch di FreeBSD per le
    versioni originali del GCC e delle binutils fornite dal portage tree
    principale.
  </li>
  <li>
    Lavorare sugli ebuild correnti: ciò significa di lavorare in
    collaborazione con i maintainer degli ebuild per creare patch o modificare
    gli ebuild per poter essere accettate nel portage tree principale.
  </li>
  <li>
    Sicurezza: nonostante gli avvisi di sicurezza provenienti dal progetto
    FreeBSD sono seguiti e corretti, c'è sempre bisogno di aiuto in
    quest'area.
  </li>
  <li>
    Contatti: c'è bisogno di persone che possono mettersi in contatto con i
    sviluppatori FreeBSD in modo da mantenere il contatto con il progetto
    originale per poter scambiare patch e discussioni sui problemi e le
    rispettive soluzioni. Ovviamente ciò non deve generare nessun tipo di spam
    sia nelle mailing-list che nei canali IRC.
  </li>
  <li>
    Testing: più persone usano Gentoo/FreeBSD, più bug vengono scoperti, il
    che aiuta a migliorare la qualità di questo porting. Per chi è capace a
    descrivere problemi o bug, la sua voce è molto gradita.
  </li>
  <li>
    Altre aree dove c'è bisogno di aiuto sono: ebuild di sistema, baselayout,
    creazione CD di installazione, documentazione, kernel hacking.
  </li>
</ul>

</body>
</section>
<section>
<title>Costruzione del sistema e trattamento dei problemi</title>
<body>

<p>
Benchè Linux e FreeBSD entrambi sono sistemi operativi Unix-like, ci sono
alcune importanti differenze che bisogna sapere se si vuole contribuire allo
sviluppo:
</p>

<ul>
  <li>
    FreeBSD non usa i GNU autotools (autoconf, automake, autoheader). Invece,
    esso usa la sua propria implementazione di <c>make</c>, mettendo le opzioni
    di configurazione in file esterni e alcuni .mk file che sono inclusi in
    ogni Makefile. Nonostante la maggior parte di lavoro è stata messa in
    questi .mk file, non è difficile trovare alcune installazioni che
    falliscono a causa di <c>${INSTALL}&nbsp;-d</c> mancanti da qualche parte.
    Una via facile per trattare con questo tipo di problemi è quella di
    leggere il Makefile per trovare i .mk file di accompagnamento, quindi
    aprire questi file e provare a capire le parti che non funzionano (ciò non
    è molto difficile dopo aver capito dove il processo di installazione si
    blocca).
  </li>
  <li>
    Inoltre, a causa del fatto che FreeBSD è un sistema operativo completo,
    non ci sono cose tipo un kernel FreeBSD da scaricare da un sito internet.
    Il sistema è inteso per essere conciso, così ogni qualvolta si vuole
    cominciare a fare un ebuild per qualcosa che richiede i sorgenti del
    sistema, si può cadere in problemi quando esso tenta di accedere a file e
    directory non esistenti. Ciò generalmente accade quando un Makefile punta
    a <path>${.CURDIR}/../sys</path>, o quando un Makefile ha bisogno dei
    sorgenti di un altro pacchetto di sistema. Non c'è nessuna regola
    predefinita per trattare questo tipo di problemi, ma generalmente una di
    queste procedure aiuta:
    <ul>
      <li>
        Se l'ebuild tenta di accedere ai sorgenti del kernel, patcharlo per
        farlo puntare a <path>/usr/src/sys</path>
      </li>
      <li>
        Se esso tenta di accedere a qualche altro tipo di sorgenti che sono
        forniti dal sistema, è più facile aggiungerli in <c>$SRC_URI</c> e
        scompattarli nella <c>$WORKDIR</c>.
      </li>
    </ul>
  </li>
  <li>
    In modo da mantenere il sistema più conciso, ci sono molti tarball
    raggruppati secondo la loro funzionalità. Ciò significa che le librerie
    di sistema si trovano nel tarball freebsd-lib, il quale contiene i sorgenti
    che solitamente si trovano in /usr/src/lib. D'altra parte, freebsd-usrsbin
    contiene i tool in <path>/usr/sbin/*</path> e constano dei sorgenti di
    <path>/usr/src/usr.sbin</path>.
  </li>
</ul>

</body>
</section>
<section>
<title>Problemi noti</title>
<body>

<p>
Al momento, ci sono tuttora abbastanza problemi noti. Qua sono elencati quelli
degni di nota:
</p>

<ul>
  <li>
    Alcuni script di avvio dipendono dal clock service che non è fornito
    correttamente per ora. Basta semplicemente rimuoverlo dalle dipendenze
    dello script e riportare ciò su <uri link="http://bugs.gentoo.org/">
    bugzilla</uri>. Assicurandosi di usare "Gentoo BSD" per la sottomissione.
  </li>
  <li>
    le glib e gnome in generale hanno bisogno molte correzioni per completare
    il backport.
  </li>
</ul>

</body>
</section>
</chapter>

<chapter>
<title>Contatti</title>
<section>
<body>

<p>
Una lista dei sviluppatori Gentoo/FreeBSD la si può trovare nelle <uri
link="/proj/en/gentoo-alt/bsd/fbsd/">pagine del progetto</uri>. Un altro modo
per contattare i sviluppatori Gentoo/FreeBSD è quella di entrare nel canale
<c>#gentoo-bsd</c> sui server Freenode, oppure la
<uri link="/main/en/lists.xml">gentoo-bsd mailing-list</uri>.
</p>

</body>
</section>
</chapter>
</guide>
