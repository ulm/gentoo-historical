<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/it/quickinstall.xml">
<title>Guida di riferimento all'installazione di Gentoo Linux</title>
<author title="Autore">Steven Wagner</author>
<author title="Redazione">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Traduzione">
  <mail link="bernardo@inquis.it">Bernardo Damele</mail>
</author>

<abstract>
Questa breve guida di riferimento all'installazione spiega i dettagli
dell'installazione in maniera concisa. Gli utenti dovrebbero già
avere esperienza con l'installazione di Gentoo Linux se vogliono proseguire
con questa guida.
</abstract>

<license/>

<version>1.2</version>
<date>1 Dicembre 2003</date>

<chapter>
<title>Guida di riferimento all'installazione di Gentoo Linux</title>
<section>
<body>

<p>
Il file immagine .iso di installazione si può scaricare da uno dei
<uri link="http://www.gentoo.org/main/en/mirrors.xml">mirrors</uri>.
Informazioni dettagliate sui diversi CD sono disponibili nello
<uri link="http://store.gentoo.org/">Gentoo Store</uri>. Il CD 1 contiene tutto
il necessario per installare Gentoo Linux in modo rapido e senza la connessione
ad Internet. Il CD 2 è opzionale e contiene dei pacchetti precompilati come KDE,
GNOME, OpenOffice, Mozilla, Evolution ed altri.
</p>

<p>
Avviate il computer con il primo CD. Premete &lt;F1&gt; e/o &lt;F2&gt; per
vedere quali opzioni di avvio sono disponibili. Premete &lt;ENTER&gt; alla
schermata d'avvio per continuare con il kernel di default. Dovreste avere il
prompt di root.
</p>

<pre caption="Impostazioni iniziali">
# <i>date</i> (Assicuratevi che l'ora e la data siano corrette. Se non lo sono impostatele con il comando <i>date MMDDhhmmCCYY</i>)
# <i>modprobe nome_modulo</i> (Opzionale - Caricate ogni modulo necessario)
# <i>net-setup eth0</i> (Configurate la rete)
# <i>fdisk /dev/hda</i> (Partizionate il vostro disco)
</pre>

<p>
La configurazione consigliata consiste in 64MB di spazio destinate alla
partizione di boot con file system ext2, una partizione di swap grande il
doppio della grandezza della RAM e il resto dello spazio del disco per la
partizione di root con file system ReiserFS.
</p>

<p>
Inizializzate le vostre partizioni con <c>mke2fs</c> (Ext2), <c>mke2fs
-j</c> (Ext3), <c>mkreiserfs</c> (ReiserFS), <c>mkfs.xfs</c> (XFS),
<c>mkfs.jfs</c> (JFS) e <c>mkswap</c> (partizione di swap). Ad esempio:
<c>mke2fs -j /dev/hda3</c>.
</p>

<p>
Continuate montando le partizione ed estraendo gli stage appropriati.
</p>

<pre caption="Preparare l'installazione">
(Attivate la partizione di swap)                 # <i>swapon /dev/hdax</i>
(Montate la partizione di root)                  # <i>mount /dev/hdax /mnt/gentoo</i>
(Create il mountpoint di boot)                   # <i>mkdir /mnt/gentoo/boot</i>
(Montate la partizione di boot)                  # <i>mount /dev/hdax /mnt/gentoo/boot</i>
(Entrate nel mountpoint di root)                 # <i>cd /mnt/gentoo</i>
(Estraeteci un tarball stage...)                 # <i>tar -xvjpf /mnt/cdrom/stages/stage?-*.tar.bz2</i>
(<comment>o</comment> scaricate il più recente tarball...)          # <i>links http://gentoo.oregonstate.edu/releases/x86/1.4/</i>
(                     ... ed estraetelo)         # <i>tar -xvjpf stage*</i>
(Solo GRP: Scompattateci uno snapshot portage)   # <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 -C /mnt/gentoo/usr</i>
(Solo GRP: Copiateci i distfiles)                # <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
(Solo GRP: Copiateci i pacchetti)                # <i>cp -a /mnt/cdrom/packages /mnt/gentoo/usr/portage/packages</i>
(Selezionate un mirror)                          # <i>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Copiateci le informazione dei nameservers)      # <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Montate il file system proc)                    # <i>mount -t proc proc /mnt/gentoo/proc</i>
(Chroot dentro il nuovo ambiente chroot)         # <i>chroot /mnt/gentoo /bin/bash</i>
(Caricate le variabili necessarie)               # <i>env-update; source /etc/profile</i>
(Solo in caso di rete ad Internet...)
  ... non GRP: Aggiornate il Portage)            # <i>emerge sync</i>
</pre>

<p>
Adesso installeremo il sistema Gentoo:
</p>

<pre caption = "Installare Gentoo">
(Cambiate USE, CFLAGS e CXXFLAGS. Nello Stage1 si può cambiare CHOST) # <i>nano -w /etc/make.conf</i>
(Solo Stage1: Sistema di bootstrap)                                   # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Solo Stage1 e Stage2: Installate il sistema base)                    # <i>emerge system</i>
</pre>

<p>
Ora configureremo le informazioni necessarie:
</p>

<pre caption = "Impostare i file di configurazione">
(Impostate il timezone)                          # <i>ln -sf /usr/share/zoneinfo/path/to/timezonefile /etc/localtime</i>
(Editate il file fstab)                          # <i>nano -w /etc/fstab</i>
</pre>

<p>
Usate quanto segue come punto di partenza (non copiatelo pari
passo) per il file <path>/etc/fstab</path>:
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;                  &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/hdax               /boot           ext3            noauto,noatime          1 2
/dev/hdax               /               reiserfs        noatime                 0 1
/dev/hdax               none            swap            sw                      0 0
/dev/cdroms/cdrom0      /mnt/cdrom      iso9660         noauto,ro,user          0 0
none                    /proc           proc            defaults                0 0
none                    /dev/shm        tmpfs           defaults                0 0
/dev/hdax               /mnt/dosc       ntfs            ro,noatime,umask=0222   0 0
</pre>

<p>
Continuate installando il kernel Linux:
</p>

<pre caption="Installare il Kernel">
(Installate i sorgenti del kernel)                       # <i>emerge -k gentoo-sources</i>
(Configurate il vostro kernel usando genkernel...        # <i>emerge -k genkernel; genkernel</i>
(<comment>o</comment> (1) Create manualmente il vostro kernel)              # <i>cd /usr/src/linux; make menuconfig;</i>
(  (2) Includete il VM fs, /proc fs, /dev fs, /dev fs mount automatico al boot)
(  (3) Compilate il vostro kernel)                       # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
(  (4) Copiate la sua immagine nella directory /boot)    # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
Adesso installate altri tools di cui potreste aver bisogno:
</p>

<pre caption = "Installare importanti tool di sistema">
(Installate un logger di sistema; scegliete: sysklogd, metalog, msyslog, syslog-ng) # <i>emerge -k syslog-ng </i>
(Impostare l'avvio automatico del logger di sistema al boot)                        # <i>rc-update add syslog-ng default</i>
(Installare il demone cron; scegliete: vcron, dcron, fcron)                         # <i>emerge -k vcron</i>
(Impostare l'avvio automatico del demone cron al boot)                              # <i>rc-update add vcron default</i>   
(Solo utenti genkernel: Installate hotplug)                                         # <i>emerge -k hotplug</i>
(Solo utenti genkernel: Impostare l'avvio automatico di hotplug al boot)            # <i>rc-update add hotplug default</i>
(Solo utenti non-ext2 ne ext3; scegliete: reiserfsprogs, xfsprogs, jfsutils)        # <i>emerge -k reiserfsprogs</i>
</pre>

<p>
Se avete bisogno di ebuilds di kernel specifici adesso è un buon momento
per installarli:
</p>

<pre caption = "Installare Ebuilds di Kernel Specifici">
# <i>emerge -k pcmcia-cs</i> (o <i>emu10k1</i>, <i>nforce-net</i>, <i>nforce-audio</i>, <i>e100</i>, <i>e1000</i>, <i>ati-drivers</i>, <i>rp-pppoe</i>)
# <i>VIDEO_CARDS="tuascheda" emerge xfree-drm</i> (per le ATI Radeon superiori alla 9200, Rage128, Matrox, Voodoo e altre)
</pre>

<p>
Ultimate la configurazione del vostro sistema Gentoo:
</p>

<pre caption = "Ultimare la configurazione">
(Impostate la password di root)                        # <i>passwd</i>
(Create un utente)                                     # <i>useradd tuo_utente -m -G users,wheel,audio -s /bin/bash</i>
(Impostate la password per l'utente)                   # <i>passwd tuo_utente</i>
(Impostate l'hostname del sistema)                     # <i>echo mymachine &gt; /etc/hostname</i>
(Impostate il domainname del sistema)                  # <i>echo mydomain.com &gt; /etc/dnsdomainname</i>
(Impostate l'hostfile, almeno "127.0.0.1 mymachine")   # <i>nano -w /etc/hosts</i>
</pre>

<pre caption = "Impostare la rete">
(Impostate la rete; dhcp-users dovrebbe impostare iface_eth0="dhcp") # <i>nano -w /etc/conf.d/net</i>
(Elencate i moduli da essere caricati all'avvio)                     # <i>nano -w /etc/modules.autoload.d/kernel-2.4</i>
(Configurate i file basici di sistema; seguono commenti)             # <i>nano -w /etc/rc.conf</i>
(Solo Non-PCMCIA: Avviate la rete automaticamente al boot)           # <i>rc-update add net.eth0 default</i>
(Solo se hai più interfacce di rete:)
   (1) Create uno script di avvio per ogni interfaccia)              # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Fateli avviare automaticamente se non riguardano la PCMCIA)   # <i>rc-update add net.ethx default</i>
(Solo PCMCIA: Verificate le configurazioni PCMCIA nel file...)
             ... /etc/conf.d/pcmcia e caricate PCMCIA al boot)       # <i>rc-update add pcmcia boot</i>
</pre>

<p>
Adesso installate un bootloader. La parte a sinistra riguarda grub, quella a destra lilo:
</p>

<pre caption = "Installare e Configurare un bootloader">
# <i>emerge -k grub</i>                                          | # <i>emerge -k lilo</i>
# <i>grub</i>                                                    | # <i>nano -w /etc/lilo.conf</i>
grub&gt; <i>root (hd0,0)</i>   (Boot partition)                     |  boot=/dev/hda
grub&gt; <i>setup (hd0)</i>    (Install on MBR)                     |  prompt 
grub&gt; <i>quit</i>                                                |  timeout=50
# <i>nano -w /boot/grub/grub.conf</i>                            |  default=gentoo
  default 0                                               |  
  timeout 15                                              |  <comment># Solo genkernel:</comment>
  splashimage=(hd0,0)/grub/splash.xpm.gz                  |  image=/boot/kernel-<comment>&lt;kernel version&gt;</comment>
                                                          |    root=/dev/hda3
  title=Gentoo Linux                                      |    label=gentoo
    root (hd0,0)                                          |  
  <comment># Solo genkernel:</comment>                                       |  <comment># Solo Non-genkernel:</comment>
    kernel (hd0,0)/kernel-<comment>&lt;kernel version&gt;</comment> root=/dev/hda3 |  image=/boot/bzImage
    initrd (hd0,0)/initrd-<comment>&lt;kernel version&gt;</comment>                |    root=/dev/hda3
  <comment># Solo Non-genkernel:</comment>                                   |    label=gentoo
    kernel (hd0,0)/bzImage                                | 
                                                          |  <comment># Per il dualbooting:</comment>
  <comment># Per il dualbooting:</comment>                                   |  other=/dev/hda<comment>X</comment>
  title=Windows XP                                        |    label=windows
    root (hd0,5)                                          | 
    chainloader (hd0,5)+1                                 | # <i>/sbin/lilo</i> 
</pre>

<p>
Adesso smontate tutte le partizioni e riavviate nel vostro nuovo sistema:
</p>

<pre caption="Rifinire e installare la GUI">
(Aggiornate i file di configurazione)              # <i>etc-update</i>
(Uscite dal sistema chrooted)                      # <i>exit; cd /</i>
(Smontate le partizioni)                           # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
(Riavviate; Togliere il CD di installazione)       # <i>reboot</i>
(Dopo il riavvio del sistema:)
(Solo per utenti ADSL)                             # <i>adsl-setup</i>
(Solo per utenti GRP, uso del CD2 opzionale)
(  (1) Montare il CD2)                             # <i>mount /dev/cdrom /mnt/cdrom</i>  
(  (2) Copiate i pacchetti)                        # <i>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</i>
(  (3) Installare software supplettivo)            # <i>emerge -k xfree gnome kde mozilla openoffice-bin</i>
(  (4) Configurare l'interfaccia grafica: Xserver) # <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>
Potete ottenere maggiori informazioni dalla <uri link="http://www.gentoo.org/doc/it/index.xml">Documentazione
Gentoo</uri>.
</p>
</body>
</section>
</chapter>	
</guide>
