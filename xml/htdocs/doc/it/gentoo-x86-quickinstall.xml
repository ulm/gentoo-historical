<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/gentoo-x86-quickinstall.xml,v 1.8 2004/11/16 19:04:28 mush Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/en/gentoo-x86-quickinstall.xml">
<title>Guida veloce di riferimento per l'installazione</title>
<author title="Author">Steven Wagner</author>
<author title="Editor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Traduzione">
  <mail link="richard77@libero.it">Federico Della Ricca</mail>
</author>


<abstract>
La guida veloce di riferimento tratta il processo di installazione in tutti in dettagli in maniera non prolissa. Per seguire questa guida è richiesta una precedente esperienza nell'installazione di Gentoo Linux.
</abstract>

<license/>

<version>1.18</version>
<date>October 10, 2004</date>

<chapter>
<title>Guida veloce di riferimento per l'installazione</title>
<section>
<body>

<p>
Le immagini ISO per l'installazione si trovano sui <uri link=
"http://www.gentoo.org/main/en/mirrors.xml">Mirror Gentoo
</uri>. Le descrizioni dettagliate dei differenti CD sono disponibili nel<uri link="http://store.gentoo.org">Gentoo Store</uri>. Un CD universale contiene tutto il necessario per installare velocemente Gentoo Linux senza una connessione ad Internet. Un CD dei pacchetti (package CD) è opzionale e contiene pacchetti precompilati come KDE, GNOME, OpenOffice, Mozilla, Evolution e altri ancora.
</p>

<p>
Avviare con il CD universale. Premere &lt;F1&gt; e/o &lt;F2&gt; per vedere le opzioni di avvio disponibili. Premere &lt;INVIO&gt; alla schermata di avvio per continuare con il kernel predefinito. Alla fine del processo di avvio ci si ritroverà al prompt dei comandi.
</p>

<pre caption="Impostazioni iniziali">
# <i>date</i>  (Accertarsi che la data e l'ora siano corrette. Se necessario cambiarle con  <i>date MMGGhhmmSSAA</i>: ovvero mese, giorno, ora, minuti, secolo e anno, tutti con due cifre ciascuno)
# <i>modprobe nome_modulo</i>  (Opzionale, per caricare eventuali moduli necessari)
# <i>net-setup eth0</i> (Configurare la rete)
# <i>fdisk /dev/hda</i> (Partizionare il disco)
</pre>

<p>
L'impostazione raccomandata è composta di una partizione di avvio da 64 MB con ext2, una partizione di swap grande il doppio della memoria RAM, e il resto della partizione root (/) usando ReiserFS.
</p>

<p>
Inizializzare le partizioni usando <c>mke2fs</c> (Ext2), <c>mke2fs
-j</c> (Ext3), <c>mkreiserfs</c> (ReiserFS), <c>mkfs.xfs</c> (XFS),
<c>mkfs.jfs</c> (JFS) e <c>mkswap</c> (partizione di swap). Per esempio:
<c>mke2fs -j /dev/hda3</c>.
</p>

<p>
Continuare montando le partizioni e scompattando gli opportuni pacchetti di stage.
</p>

<pre caption="Preparare l'installazione">
(Attivare la partizione di swap) # <i>swapon /dev/hdax</i>
(Montare la partizione root)     # <i>mount /dev/hdax /mnt/gentoo</i>
(Creare la directory dove 
montare la partizione di avvio)  # <i>mkdir /mnt/gentoo/boot</i>
(Montare la partizione di avvio) # <i>mount /dev/hdax /mnt/gentoo/boot</i>
(Andare dove è montata 
la partizione di root)           # <i>cd /mnt/gentoo</i>
(Estrarre il pacchetto di uno 
stage)				 # <i>tar -xvjpf /mnt/cdrom/stages/stage&lt;vostro stage&gt;.tar.bz2</i>
(<comment>oppure</comment> scaricarne l'ultima versione...) 
                                 # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(    ... ed estrarlo)            # <i>tar -xvjpf stage&lt;vostro stage&gt;.tar.bz2</i>
(Opzionale: Scompattare
un'immagine del portage)         # <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 \
                                   -C /mnt/gentoo/usr</i>
(Opzionale: copiarci i distfiles)# <i>cd /mnt/gentoo/usr/portage; mkdir distfiles;</i>
                                 # <i>cp /mnt/cdrom/distfiles/* distfiles/</i>
(Scegliere un mirror)            # <i>mirrorselect -a -s4 -o | grep 'GENTOO_MIRRORS=' \
                                   &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(Sovrascrivere le informazioni 
sul nameserver)                  # <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(Montare il filesystem proc)     # <i>mount -t proc none /mnt/gentoo/proc</i>
(chroot nel nuovo ambiente)      # <i>chroot /mnt/gentoo /bin/bash</i>
(Caricare le variabili necessarie)
                                 # <i>env-update; source /etc/profile</i>
(Solo in rete, non GRP: aggiornare il portage)
                                 # <i>emerge --sync</i>
</pre>

<p>
Ora si può installare Gentoo:
</p>

<pre caption = "Installare Gentoo">
(Cambiare USE, CFLAGS e CXXFLAGS. Partendo dallo Stage1 è possibile cambiare anche CHOST)  
                                 # <i>nano -w /etc/make.conf</i>
(Solo Stage1: avvio del sistema) # <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Solo Stage1 e Stage2: installare il sistema di base)
                                 # <i>emerge system</i>
</pre>

<p>
Ora impostiamo le informazioni necessarie:
</p>

<pre caption = "Impostare i file di configurazione">
(Impostare le informazioni sulla timezone)
                                 # <i>ln -sf /usr/share/zoneinfo/<comment>&lt;path al file della timezone&gt;</comment> /etc/localtime</i>
(Editare il file fstab)          # <i>nano -w /etc/fstab</i>
</pre>

<p>
Usare ciò che segue come <e>modello</e> (non copiarlo pari pari) per
<path>/etc/fstab</path>:
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;          &lt;dove montarlo&gt;    &lt;tipo&gt;          &lt;opzioni&gt;                  &lt;dump/pass&gt;
/dev/hdax       /boot           ext2            noauto,noatime          1 2
/dev/hdax       none            swap            sw                      0 0
/dev/hdax       /               reiserfs        noatime                 0 1
/dev/cdroms/cdrom0 /mnt/cdrom   auto            noauto,user             0 0
none            /proc           proc            defaults                0 0
none            /dev/shm        tmpfs           nodev,nosuid,noexec     0 0
</pre>

<p>
Continuare installando il kernel Linux:
</p>

<pre caption="Installazione del Kernel">
(Installare i sorgenti del kernel)
                                 # <i>emerge <comment>&lt;pacchetto-del-kernel&gt;</comment></i>
(Configurare il kernel usando genkernel... ) 
                                 # <i>emerge genkernel; genkernel --menuconfig all</i>
(<comment> ...oppure</comment> (1) Configurare a mano il kernel)
                                 # <i>cd /usr/src/linux; make menuconfig;</i>
(   (2) Includere il supporto per VM fs, /proc fs, /dev fs, /dev fs e auto mount all'avvio)
(   (3) Compilare il kernel) 
           (per un kernel 2.4)   # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
           (per un kernel 2.6)   # <i>make &amp;&amp; make modules_install</i>
(   (4) Aggiornare il kernel)    # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
E' il momento di di installare altri programmi:
</p>

<pre caption = "Installazione di importanti programmi per il sistema">
(Installare un logger di sistema; a scelta fra: sysklogd, metalog, msyslog, syslog-ng) 
                                 # <i>emerge syslog-ng </i>
(Per farlo partire in automatico all'avvio)
                                 # <i>rc-update add syslog-ng default</i>
(Installare un demone cron; scelte: vixie-cron, dcron, fcron)                
                                 # <i>emerge vixie-cron</i>
(Per farlo partire in automatico all'avvio)                   
                                 # <i>rc-update add vixie-cron default</i>   
(solo per chi usa genkernel: installare hotplug)
				 # <i>emerge hotplug</i>
(solo per chi usa genkernel: fare partire hotplug in automatico all'avvio)     
                                 # <i>rc-update add hotplug default</i>
(Solo per utenti di filesytem diversi da ext2 e ext3; scelte: reiserfsprogs, xfsprogs, jfsutils)  
                                 # <i>emerge reiserfsprogs</i>
(Script init per il domain name) # <i>rc-update add domainname default</i>
</pre>

<p>
Ora è il momento di installare pacchetti del kernel specializzati, qualora necessario:
</p>

<pre caption = "Installare pacchetti del kernel specializzati">
                                 # <i>emerge pcmcia-cs</i> (o <i>nforce-net</i>, <i>nforce-audio</i>, <i>e100</i>, <i>e1000</i>, <i>ati-drivers</i>, <i>rp-pppoe</i>)
                                 # <i>VIDEO_CARDS="scheda_video" emerge xfree-drm</i>   (Per ATI Radeon fino alla 9200, Rage128, Matrox, Voodoo e altre schede)
</pre>

<p>
Impostazioni conclusive del sistema Gentoo:
</p>

<pre caption = "Impostazioni conclusive">
(Impostare la password di root)  # <i>passwd</i>
(Creare un utente)               # <i>useradd vostro_utente -m -G users,wheel,audio -s /bin/bash</i>
(Impostare la password per lo stesso)
                                 # <i>passwd vostro_utente</i>
(Impostare l'hostname)           # <i>echo miamacchina &gt; /etc/hostname</i>
(Impostare il domainname)        # <i>echo miodominio.it &gt; /etc/dnsdomainname</i>
(Impostare il file hosts, es.:"127.0.0.1 localhost miamacchina")  
                                 # <i>nano -w /etc/hosts</i>
(Configurare le impostazioni di base del sistema, seguire i commenti)       
                                 # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption = "Impostare la Rete">
(Impostare la rete; chi usa dhcp deve impostare iface_eth0="dhcp")      
                                 # <i>nano -w /etc/conf.d/net</i>
(Elencare i moduli da caricare all'avvio)
                                 # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;versione&gt;</comment></i>
(Escludendo PCMCIA: far partire la rete automaticamente all'avvio)        
                                 # <i>rc-update add net.eth0 default</i>
(Solo se si hanno più interfaccie di rete:)
   (1) Creare gli initscript per ogni interfaccia)                    
                                 # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) Far partire in automatico all'avvio se non è PCMCIA)
                                 # <i>rc-update add net.ethx default</i>
(Solo PCMCIA: verificare /etc/conf.d/pcmcia e caricare il supportoPCMCIA all'avvio) 
                                 # <i>rc-update add pcmcia boot</i>
</pre>

<p>
Ora installare un bootloader.
</p>

<pre caption="Installare e configurare GRUB">
# <i>emerge grub</i>
# <i>grub</i>
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup (hd0)</i>
grub&gt; <i>quit</i>
# <i>nano -w /boot/grub/grub.conf</i>
default 0
timeout 15
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux
  root (hd0,0)
  <comment># utenti genkernel:</comment>
  kernel /kernel-<comment>&lt;versione kernel&gt;</comment> root=/dev/ram0 init=/linuxrc real_root=/dev/hda3
  initrd /initrd-<comment>&lt;versione kernel&gt;</comment>
  <comment># altri utenti:</comment>
  kernel /kernel-<comment>&lt;versione kernel&gt;</comment> root=/dev/hda3
</pre>

<pre caption="Installare e configurare LILO">
# <i>emerge lilo</i>
# <i>nano -w /etc/lilo.conf</i>
boot=/dev/hda
prompt
timeout=50
default=gentoo

image=/boot/kernel-<comment>&lt;versione kernel&gt;</comment> 
  label=gentoo
  read-only
  <comment># utenti genkernel:</comment>
  append="init=/linuxrc real_root=/dev/hda3"
  root=/dev/ram0
  initrd=/boot/initrd-<comment>&lt;versione kernel&gt;</comment>
  <comment># altri utenti:</comment>
  root=/dev/hda3

# <i>/sbin/lilo</i>
</pre>

<p>
Ora smontare tutte le partizioni e riavviare nel nuovo sistema:
</p>

<pre caption="Conclusione e installazione dell'interfaccia grafica">
(Uscire da chroot)               # <i>exit; cd /</i>
(Smontare le partizioni)         # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
(Riavviare, togliere il CD universale dal lettore) 
                                 # <i>reboot</i>
(Dopo l'avvio:)
(Solo per utenti ADSL)           # <i>adsl-setup</i>
(Solo per chi usa la GRP)
   (1) Montare il CD dei pacchetti
                                 # <i>mount /dev/cdrom /mnt/cdrom</i>  
   (2) Sovrascrivere i pacchetti # <i>mkdir /usr/portage/packages</i>
                                 # <i>cp -a /mnt/cdrom/* /usr/portage/packages/</i>
   (3) Installare software aggiuntivo (es.)
                                 # <i>USE="bindist" emerge -k xfree gnome kde mozilla openoffice-bin</i>
   (4) Configurare l'Xserver     # <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>
E' possibile ottenere maggiori informazioni dalla <uri
link="http://www.gentoo.org/doc/en/index.xml">Documentazione Gentoo
</uri>.
</p>
</body>
</section>
</chapter>	
</guide>

