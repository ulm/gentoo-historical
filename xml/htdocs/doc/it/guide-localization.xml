<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/it/guide-localization.xml,v 1.13 2007/05/14 19:42:13 scen Exp $ -->

<guide link="/doc/it/guide-localization.xml" lang="it">
<title>Guida alla localizzazione di Gentoo Linux</title>

<author title="Autore">
  Alexander Holler
</author>
<author title="Redazione">
  <mail link="slucy@uchicago.edu">Steven Lucy</mail>
</author>
<author title="Redazione">
  <mail link="bennyc@gentoo.org">Benny Chuang</mail>
</author>
<author title="Redazione">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Redazione">
  <mail link="dertobi123@gentoo.org">Tobias Scherbaum</mail>
</author>
<author title="Redazione">
  <mail link="flammie@gentoo.org">Flammie Pirinen</mail>
</author>
<author title="Traduzione">
  <mail link="grandezot@cheapnet.it">Raffaele Camarda</mail>
</author>
<author title="Traduzione">
  <mail link="cristiano.chiucchiolo@gmail.com">Cristiano Chiucchiolo</mail>
</author>
<author title="Traduzione">
  <mail link="deadhead@wooow.it">Andrea Perotti</mail>
</author>

<abstract>
Questa guida dovrebbe aiutare gli utenti a localizzare (adattare alla propria
lingua, NdT) la propria distribuzione Gentoo Linux per qualsiasi paese Europeo.
Verrà usato il Tedesco come caso di studio, in quanto la guida è tradotta da un
documento tedesco. Verrà affrontata anche la configurazione del sistema per
utilizzare il simbolo dell'Euro.
</abstract>

<version>1.34</version>
<date>2007-05-07</date>

<chapter>
<title>Fuso Orario (Time zone)</title>
<section>
<body>

<p>
Per avere una corretta gestione dell'ora va prima impostato il fuso orario
(timezone) così che il sistema possa sapere in quale parte del mondo si trova.
Cercare il proprio fuso orario nella directory
<path>/usr/share/zoneinfo/</path>, dopodichè impostarlo in modo appropriato
nel file <path>/etc/conf.d/clock</path>. È sconsigliabile riferirsi ai fusi
orari presenti in <path>/usr/share/zoneinfo/Etc/GMT*</path> poichè spesso i loro
nomi non corrispondono a ciò che in realtà sono: ad esempio <path>GMT-8</path> è
di fatto GMT+8.
</p>

<pre caption="Impostare le informazioni del  fuso orario">
# <i>ls /usr/share/zoneinfo</i>
<comment>(Supponendo di voler usare il fuso orario di Brussels)</comment>
# <i>nano -w /etc/conf.d/clock</i>
TIMEZONE="Europe/Brussels"
# <i>date</i>
Wed Mar  8 00:46:05 CET 2006
</pre>

<note>
Assicurarsi che l'indicatore del fuso orario (in questo caso "CET") sia corretto
per la propria zona.
</note>

<note>
È possibile impostare il valore di <c>TZ</c> secondo i valori presenti in
<path>/usr/share/zoneinfo</path> nel file rc della propria shell
(<path>.bash_profile</path> per bash) agendo così a livello utente. In questo
caso <c>TZ="Europe/Berlin"</c>.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Orologio di sistema</title>
<section>
<body>

<p>
In molte installazioni di Gentoo Linux, l'orologio di sistema è impostato su UTC
(o GMT, Greenwhich Mean Time), quindi viene preso il fuso orario dall'account
per determinare l'ora locale. Se per qualche ragione si desidera che il proprio
orologio di sistema non sia in UTC, va modificato il file
<path>/etc/conf.d/clock</path> e cambiato il valore di <c>CLOCK</c> da
<c>UTC</c> a <c>local</c>.
</p>

<pre caption="Ora locale vs. GMT">
<comment>(consigliato:)</comment>
CLOCK="UTC"
<comment>(o:)</comment>
CLOCK="local"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>La localizzazione</title>
<section>
<title>Cosa sono le localizzazioni?</title>
<body>

<p>
Una localizzazione è un insieme di informazioni che la maggior parte dei
programmi utilizzano per determinare le impostazioni di nazionalità e lingua. Le
localizzazioni sono parte delle librerie di sistema e possono essere trovate in
<path>/usr/share/locale</path> nella maggior parte dei casi. Generalmente il
nome di una localizzazione ha la struttura <c>ab_CD</c> dove <c>ab</c> è il
codice di due (o tre) lettere che identifica la lingua (secondo le specifiche
ISO-639) e <c>CD</c> è il codice di due lettere che identifica la nazione
(secondo le specifiche ISO-3166).
</p>

</body>
</section>
<section id="variables">
<title>Variabili d'ambiente per la localizzazione</title>
<body>

<p>
Le informazioni sulla lingua e la nazione sono contenute nelle variabili
d'ambiente. Queste, normalmente, sono impostate in
<path>/etc/env.d/02locale</path> (per l'intero sistema) ed in
<path>~/.bashrc</path> (per le impostazioni relative all'utente). Queste
variabili controllano aspetti differenti della localizzazione e sono elencate
nella tabella che segue, ordinate per importanza. Tutte le variabili
accettano valori secondo il formato specificato più su: (<c>ab_CD</c>).
</p>

<table>
<tr>
  <th>Nome della variabile</th>
  <th>Spiegazione</th>
</tr>
<tr>
  <ti>LC_ALL</ti>
  <ti>
    Definisce tutti le impostazioni della localizzazione. Questa impostazione
    scavalcherà tutte le altre impostazioni nella tabella.
  </ti>
</tr>
<tr>
  <ti>LC_COLLATE</ti>
  <ti>
    Definisce l'ordine alfabetico delle eventuali stringhe. Questo ha effetto
    sull'output di un <c>ls</c> in una directory.
  </ti>
</tr>
<tr>
 <ti>LC_CTYPE</ti>
  <ti>
    Definisce come il sistema debba gestire i tipi di carattere. Questo decide
    quali caratteri devono essere visti come parte dell'alfabeto, quali come
    numeri e così via. Questo inoltre stabilisce quale insieme di caratteri
    utilizzare, se possibile.
  </ti>
</tr>
<tr>
  <ti>LC_MESSAGES</ti>
  <ti>
    Imposta le localizzazioni dei programmi per le applicazioni che utilizzano
    uno schema di localizzazione basato su messaggi (la maggior parte dei
    programmi GNU, nel prossimo capitolo si vedrà quali lo fanno e come far
    funzionare quelli che non lo fanno)
  </ti>
</tr>
<tr>
  <ti>LC_MONETARY</ti>
  <ti>
    Definisce la valuta e la formattazione del valore numerico della valuta
    stessa.
  </ti>
</tr>
<tr>
  <ti>LC_NUMERIC</ti>
  <ti>
    Definisce la formattazione dei valori numerici che non siano di valuta.
    Influisce sui separatori delle migliaia e sulle virgole nei decimali.
  </ti>
</tr>
<tr>
  <ti>LC_TIME</ti>
  <ti>
    Definisce il tipo di formattazione per data e ora
  </ti>
</tr>
<tr>
  <ti>LC_PAPER</ti>
  <ti>
    Definisce il formato predefinito della carta.
</ti>
</tr>
<tr>
  <ti>LANG</ti>
  <ti>
    Definisce tutte le impostazioni della localizzazione. Questa variabile può
    comunque essere scavalcata impostato LC_* individualmente o impostando la
    variabile LC_ALL.
  </ti>
</tr>
</table>


<note>
Anche se la maggior parte dei programmi funzionano impostando semplicemente
LC_ALL, alcuni possono presentare dei malfunzionamenti se è stata impostata
LC_ALL ma non LANG. Per essere sicuri impostarle <e>entrambe</e>
</note>

<p>
La maggior parte degli utenti imposta solo le variabili LANG ed LC_CTYPE per il
proprio utente semplicemente aggiungendole ai file di avvio della shell,
definendo così le variabili d'ambiente dalla linea di comando:
</p>

<pre caption="Impostare la localizzazione in ~/.bashrc">
export LANG="de_DE@euro"
</pre>

<note>
Aggiungere anche <c>@euro</c> al file di avvio della shell se si vuole
utilizzare questo simbolo di valuta (€)
</note>

<p>
E' anche possibile impostare una localizzazione predefinita per l'intero sistema
che verrà utilizzata da tutti gli utenti e da tutte le applicazioni:
</p>

<pre caption="Impostare la localizzazione predefinita di sistema in
/etc/env.d/02locale">
LC_ALL="de_DE@euro"
LANG="de_DE@euro"
</pre>

<p>
Comunemente si imposta la localizzazione solo per i singoli utenti mentre per
l'intero sistema non viene definita. In questo caso la localizzazione per
l'intero sistema assume lo speciale valore <c>"C"</c>, che per ragioni storiche
corrisponde a quella Inglese.
</p>

<p>
Perchè funzioni la localizzazione basata sui messaggi nella applicazioni che la
supportano, bisogna compilare tali programmi con la USE <c>nls</c> (Native
Language Support, "Supporto al Linguaggio Nativo" ndT). Molti dei programmi che
utilizzano nls hanno bisogno anche della libreria gettext per estrarre ed usare
i messaggi localizzati, ovviamente Portage la installerà quando necessaria.
</p>

<p>
Una volta impostata la localizzazione corretta, assicurarsi di aggiornare le
variabili d'ambiente per rendere effettive le modifiche:
</p>

<pre caption="Aggiornare l'ambiente">
<comment>(Per localizzazioni definite per l'intero sistema:)</comment>
# <i>env-update &amp;&amp; source /etc/profile</i>

<comment>(Per localizzazioni limitate al singolo utente:)</comment>
$ <i>source ~/.bashrc</i>
</pre>

<p>
Fatto ciò, è necessario terminare il server X premendo
<c>Ctrl+Alt+Backspace</c>, effettuare il logout, e poi di nuovo il login come
utente.
</p>

<p>
Ora verificare che le modifiche siano state applicate:
</p>

<pre caption="Verificare le modifiche dell'ambiente">
$ <i>env | grep -i LC_</i>
</pre>

<p>
Esiste inoltre una variabile addizionale chiamata LINGUAS, che influisce sui
file di localizzazione installati con i programmi che supportano gettext e sulla
localizzazione per alcuni pacchetti specifici, come <c>kde-base/kde-i18n</c> e
<c>app-office/openoffice</c>. Questa variabile può assumere valori separati da
<e>spazi</e>, valori espressi secondo i codici delle lingue trattati in
precedenza. E' consigliabile impostare la variabile LINGUAS in
<path>/etc/make.conf</path>:
</p>

<pre caption="Impostare LINGUAS in make.conf">
# <i>nano -w /etc/make.conf</i>
<comment>(Inserire la variabile LINGUAS, ad esempio per il Tedesco, il Finlandese e l'Inglese:)</comment>
LINGUAS="de fi en"
</pre>

<p>
Assicurarsi di aggiornare l'ambiente dopo la modifica:
</p>

<pre caption="Aggiornare l'ambiente">
# <i>env-update &amp;&amp; source /etc/profile</i>
</pre>

<p>
Fatto ciò, è necessario terminare il server X premendo
<c>Ctrl+Alt+Backspace</c>, effettuare il logout, e poi di nuovo il login come
utente.
</p>

</body>
</section>
<section>
<title>Generare localizzazioni specifiche</title>
<body>

<p>
Se si utilizza una localizzazione che non è disponibile in modo predefinito
bisogna utilizzare <c>localedef</c> per generare la propria localizzazione. Ad
esempio:
</p>

<pre caption="Generare una localizzazione utilizzando localedef">
# <i>localedef -c -i en_US -f ISO-8859-15 en_US.ISO-8859-15</i>
</pre>

<p>
Dopo avere generato la localizzazione, è possibile esportare la variabile LANG
come visto prima
</p>

<pre caption="Esportare la variabile LANG">
# <i>export LANG="en_US.ISO-8859-15"</i>
</pre>

</body>
</section>
<section>
<title>Creare le localizzazioni per le glibc</title>
<body>

<p>
Probabilmente sul proprio sistema si utilizzeranno una o due localizzazioni. È
possibile abilitare solo le localizzazioni di cui si ha bisogno inserendole in
<path>/etc/locale.gen</path>.
</p>

<pre caption="Attivare la flag userlocales in particolare per glibc">
echo "sys-libs/glibc userlocales" >> /etc/portage/package.use
</pre>

<p>
Adesso specificare le localizzazioni che si vogliono utilizzare:
</p>

<pre caption="Aggiungere le localizzazioni a /etc/locale.gen">
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
de_DE/ISO-8859-1
de_DE@euro/ISO-8859-15
</pre>

<p>
Fatto ciò eseguire <c>locale-gen</c>. Questo comando genera le localizzazioni
specificate nel file <path>/etc/locale.gen</path>.
</p>

<note>
<c>locale-gen</c> è disponibile a partire dalle <c>glibc-2.3.6-r4</c>. Se si ha
una versione più vecchia delle glibc, è consigliabile aggiornarlo.
</note>

<p>
E' possibile verificare se le localizzazioni selezionate sono disponibili
tramite il comando <c>locale -a</c>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Layout della tastiera per la console</title>
<section>
<body>

<p>
Il layout della tastiera per la console si imposta in
<path>/etc/conf.d/keymaps</path> tramite la variabile <c>KEYMAP</c>. Valori
validi per tale variabile possono essere trovati in
<path>/usr/share/keymaps/<c>{arch}</c>/</path>. <path>i386</path> presenta delle
ulteriori sottoclassi (<path>qwerty/</path>, <path>azerty/</path>, etc.). Alcune
lingue hanno opzioni multiple, così la decisione migliore potrebbe essere quella
di provarne diverse per ottenere quella che meglio si adatta alle proprie
necessità.
</p>

<pre caption="Impostare la keymap della console">
KEYMAP="de"
KEYMAP="de-latin1"
KEYMAP="de-latin1-nodeadkeys"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Layout della tastiera per il server grafico</title>
<section>
<body>

<p>
Il layout della tastiera per il server grafico X è specificato in
<path>/etc/X11/xorg.conf</path> dall'opzione <c>XkbLayout</c>
</p>

<pre caption="Impostare il layout della tastiera per X">
 Section "InputDevice"
     Identifier  "Keyboard1"
     ...
     Option "XkbLayout"     "de"
     # Option "XkbModel"    "pc105"    <comment>## questo è per le tastiere internazionali.</comment>
     # Option "XkbVariant"  "nodeadkeys" <comment>## questo sarebbe usato per l'input xterm.</comment>
     ...
</pre>

<p>
Se si ha un layout di tastiera internazionale, impostare l'opzione
<c>XkbModel</c> a <c>pc102</c> oppure a <c>pc105</c>, dato che questo consentirà
la mappatura dei tasti addizionali specifici per la propria tastiera.
</p>

<p>
Le deadkeys consentono di premere tasti che non verranno mostrati immediatamente
sullo schermo, ma saranno combinati con un'altra lettera per produrre un singolo
carattere come é,è,á,à,ecc... Impostare <c>XkbVariant</c> a <c>nodeadkeys</c>
consente di immettere questi caratteri speciali all'interno dei terminali X.
</p>

<pre caption="Passare da un layout di tastiera ad un altro">
  Section "InputDevice"
     Identifier  "Keyboard1"
     ...
     Option "XkbLayout"   "us,ru"
     Option "XkbOptions"  "grp:alt_shift_toggle,grp_led:scroll"
</pre>

<p>
Qui <c>XkbOptions</c> consente di passare da un layout di tastiera ad un altro,
semplicemente premendo <c>ALT+Shift</c>. Questo farà anche accendere e spegnere
il led Scroll Lock, grazie all'opzione <c>grp_led:scroll</c>. Si tratta di un
indicatore visivo a portata di mano, che mostrerà quale layout di tastiera
si starà usando in un dato momento.
</p>

</body>
</section>
</chapter>

<chapter>
<title>KDE</title>
<section>
<body>

<p>
Per KDE bisogna installare il pacchetto <c>kde-base/kde-i18n</c>. Kde-i18n segue
le regole descritte poco più su riguardo la variabile <uri
link="#variables">LINGUAS</uri>
</p>

</body>
</section>
</chapter>

<chapter>
<title>Il Simbolo dell'euro per la console</title>
<section>
<body>

<p>
Per fare in modo che la propria console mostri il simbolo dell'euro bisogna
impostare la variabile <c>CONSOLEFONT</c> in
<path>/etc/conf.d/consolefont</path> in modo che punti ad un file presente in
<path>/usr/share/consolefonts/</path> (senza <c>.psfu.gz</c>). <c>lat9w-16</c>
possiede il simbolo dell'euro.
</p>

<pre caption="Impostare i font della console">
CONSOLEFONT="lat9w-16"
</pre>

<p>
Verificare che <c>CONSOLEFONT</c> sia nel runlevel di boot:
</p>

<pre caption="Verificare il giusto runlevel">
# <i>rc-update show | grep -i consolefont</i>
</pre>

<p>
Se non viene mostrato alcun runlevel per <c>CONSOLEFONT</c>, aggiungerlo al
giusto livello:
</p>

<pre caption="Aggiungere consolefont al runlevel di boot">
# <i>rc-update add consolefont boot</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Il simbolo dell'euro in X</title>
<section>
<title>Per la maggior parte della applicazioni</title>
<body>

<p>
Ottenere che il simbolo dell'euro funzioni correttamente in X comporta un
maggiore impegno. La prima cosa da cambiare sono le definizioni di <c>fixed</c>
e di <c>variable</c> nel file <path>/usr/share/fonts/misc/fonts.alias</path> in
modo che finiscano in <c>iso8859-15</c> invece che in <c>iso8859-1</c>
</p>

<pre caption="Impostare i font predefiniti di X">
fixed        -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable     -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>

<p>
Alcune applicazioni utilizzano il proprio font, e bisogna indicare loro
manualmente di utilizzare i font che contengono il simbolo dell'euro. Ciò è
possibile a livello utente tramite il file <path>.Xdefaults</path> (si può
copiare questo file in <path>/etc/skel/</path> in modo che sia utilizzato in
modo predefinito per ogni nuovo utente creato), oppure impostarlo a livello
globale per ogni applicazione con un file in
<path>/usr/share/X11/app-defaults/</path> (ad esempio xterm). In questi file
generalmente bisogna modificare una stringa già presente piuttosto che
aggiungerne un'altra. Per cambiare i font di xterm ad esempio:
</p>

<pre caption="Impostare i font per xterm">
<comment>(nella propria home directory)</comment>
$ <i>echo 'XTerm*font: fixed' >> .Xresources </i>
$ <i>xrdb -merge .Xresources</i>
</pre>

</body>
</section>
<section>
<title>Il simbolo dell'euro in (X)Emacs</title>
<body>

<p>
Per utilizzare il simbolo dell'euro in (X)Emacs aggiungere quanto segue a
<path>.Xdefaults</path>:
</p>

<pre caption="Impostare i font in emacs">
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
</pre>

<p>
Per XEmacs (che non è esattamente come Emacs), bisogna fare qualcosa in più. Nel
file <path>/home/user/.xemacs/init.el</path>, aggiungere:
</p>

<pre caption="Impostare i font per xemacs">
(define-key global-map '(EuroSign) '[€])
</pre>

<note>
Il simbolo tra parentesi quadre è appunto il simbolo dell'euro
</note>

</body>
</section>
<section>
<title>OpenOffice.Org</title>
<body>

<p>
Gli attuali ebuild stabili di <c>app-office/openoffice</c> e
<c>app-office/openoffice-bin</c> supportano l'impostazione della variabile
<uri link="#variables">LINGUAS</uri> per installare i pacchetti relativi alla
lingua. Per avere un'idea dello stato della traduzione dell'interfaccia grafica
(GUI), della sillabazione, del controllo ortografico e di altre opzioni della
propria localizzazione fare riferimento <uri
link="http://l10n.openoffice.org/languages.html">al sito che si occupa della
localizzazione di OpenOffice.Org</uri>.
</p>

</body>
</section>
</chapter>
</guide>
