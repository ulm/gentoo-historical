<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fa/handbook/hb-install-arm-kernel.xml,v 1.1 2013/01/20 16:58:48 swift Exp $ -->

<sections>

<version>10</version>
<date>2012-02-22</date>

<section>
<title>منطقه زمانی</title>
<body>

<p>
ابتدا لازم است تا منطقه زمانی خودتان را انتخاب نمایید تا دستگاه شما دریابد در چه موقعیتی قرار دارد. به منطقه های زمانی در <path>/usr/share/zoneinfo</path> نگاه بیاندازید و سپس آنرا در <path>/etc/localtime</path> رونوشت نمایید. لطفا از منطقه زمانی به شکل <path>/usr/share/zoneinfo/Etc/GMT*</path> دوری نمایید چون به عنوان یک نام، منطقه قابل توقعی را نشان نمی دهد. برای مثال <path>GMT-8</path> درواقع  GMT+8 است.
</p>

<pre caption="Setting the timezone information">
# <i>ls /usr/share/zoneinfo</i>
<comment>(Suppose you want to use Europe/Brussels)</comment>
# <i>cp /usr/share/zoneinfo/Europe/Brussels /etc/localtime</i>
<comment>(Next set the timezone)</comment>
# <i>echo "Europe/Brussels" &gt; /etc/timezone</i>
</pre>

</body>
</section>
<section>
<title>نصب کردن منابع</title>
<subsection>
<title>انتخاب یک کرنل</title>
<body>

<p>
هسته ائی که همه توزیع ها بدور آن ساخته می شوند، کرنل لینوکس است. این لایه ائیست بین برنامه های کاربر و سخت افزار دستگاه شما. جنتو برای کاربرانش چندین کدمنبع کرنل ممکن فراهم آورده است. یک فهرست کامل به‌همراه توضیحات آنها در آدرس  <uri link="/doc/en/gentoo-kernel.xml">راهنمای کرنل جنتو</uri> موجود است. 
</p>

<p>
برای دستگاه های مبتنی بر ARM ما <c>gentoo-sources</c> را داریم (کدمنبع کرنل برای خصیصه های بیشتر).
</p>

<p>
اکنون آنرا با استفاده از <c>emerge</c> نصب نمایید.
</p>

<pre caption="Installing a kernel source">
# <i>emerge gentoo-sources</i>
</pre>

<p>
هنگامیکه نگاهی به <path>/usr/src</path> بیاندازید باید میانبری بنام <path>linux</path> به کدمنبع کرنل خودتان ببینید. در این مورد، کدمنبع <c>gentoo-sources-<keyval id="kernel-version"/></c> است. نسخه شما ممکن است متفاوت باشد، پس این را بخاطر داشته باشید.
</p>

<pre caption="Viewing the kernel source symlink">
# <i>ls -l /usr/src/linux</i>
lrwxrwxrwx    1 root   root    12 Oct 13 11:04 /usr/src/linux -&gt; linux-<keyval id="kernel-version"/>
</pre>

</body>
</subsection>
</section>
<section id="manual">
<title>پیش فرض: پیکربندی دستی</title>
<subsection>
<title>مقدمه</title>
<body>

<p>
پیکربندی دستی یک کرنل اغلب به عنوان سخت ترین کاری که یک کاربر لینوکس در تمام مدت انجام می دهد دیده می شود. این چیزی بیشتر از واقعیت است -- بعد از پیکربندی یک مشت از کرنل ها شما اصلا بخاطر نخواهید آورد که اینکار زمانی مشکل بوده ;)
</p>

<p>
هرچند، یک چیز <e>درست</e> است : شما باید هنگامیکه شروع به پیکربندی دستی یک کرنل می نمایید دستگاهتان را بخوبی بشناسید. غالب اطلاعات می توانند به کمک emergingemerge pciutils ( <c>emerge pciutils</c> ) گردآوری شوند که شامل <c>lspci</c> نیز می شود. شما اکنون قادرید درون محیط chroot شده از <c>lspci</c> استفاده نمایید. ممکن است بطور ایمنی هر اخطار <e>pcilib</e> را نادیده بگیرید (شبیه <c>pcilib: cannot open  /sys/bus/pci/devices</c> ) که lspci به بیرون می دهد. بطور جایگزین می توانید lspci را از یک محیط <e>non-chrooted</e> اجرا نمایید. نتیجه مشابه است. همچنین می توانید <c>lsmod</c> را برای اینکه ببینید لوح فشرده نصب از چه ماژول هائی استفاده نموده اجرا نمایید (اینکار ممکن است شما را به شکل زیبائی آگاه نماید که چه چیز را باید فعال نمایید). 
</p>

<p>
اکنون به دایرکتوری کدمنبع کرنل خودتان بروید و <c>make menuconfig</c> را اجرا نمایید. این دستور یک فهرست انتخاب پیکربندی نیمه راهنمائی کننده را روشن خواهد نمود.
</p>

<pre caption="Invoking menuconfig">
# <i>cd /usr/src/linux</i>
# <i>make menuconfig</i>
</pre>

<p>
شما با چندین بخش پیکربندی ملاقات خواهید نمود. ما ابتدا برخی انتخاب ها را که شما باید فعال نمایید (در غیر اینصورت جنتو کارنخواهد نمود و یا بدون اضافات پیچیده بخوبی کار نخواهد نمود) را فهرست خواهیم نمود.
</p>

</body>
</subsection>
<subsection>
<title>فعال نمودن انتخاب های مورد نیاز</title>
<body>

<p>
به دلیل طبیعت خیلی تخصصی منشعب شده، ما اینجا فقط پیکربندی شناخته شده را پوشش می دهیم. اگر ماشین شما در اینجا فهرست نگردیده، باید پایگاه اینترنتی جمعیت مربوطه را برای دریافتن اینکه چگونه بخوبی کرنلتان را پیکربندی نمایید، بازبین فرمایید.
</p>

<p>
برای پرش به بخش پیکربندی لطفا ماشین خود را از فهرست زیر انتخاب نمایید
</p>

<ul>
 <li><uri link="#netwinder">NetWinder</uri></li>
</ul>

</body>
</subsection>
</section>
<section id="netwinder">
<title> Netwinder انتخاب های پیکربندی </title>
<body>

<p>
بخاطر داشته باشید که EXT2 برای پارتیشن راه انداز به عنوان تنها فایل سیستمی که قابلیت خوانده شدن را دارد، مورد نیاز است. بغیر از آن تنها فایل سیستمی که در حال آزمایش شدن است EXT3 است اما برای آزمایش نمودن شانس خود با دیگر فایل سیستم ها هم به شما خوش آمد می گوییم ;) .
</p>

<pre caption="NetWinder configuration options">
<comment>First generate a default config</comment>
# <i>make netwinder_defconfig</i>

<comment>Required options</comment>
System Type ---&gt;
  ARM system type (FootBridge) ---&gt;
    (X) FootBridge
  Footbridge Implementations ---&gt;
    [*] NetWinder

Floating point emulation ---&gt;
  [*] NWFPE math emulation

File systems ---&gt;
  [*] Second extended fs support
  Pseudo Filesystems ---&gt;
    [*] /proc file system support
    [*] Virtual memory file system support (former shm fs)

Device Drivers ---&gt;
  ATA/ATAPI/MFM/RLL support ---&gt;
    [*] ATA/ATAPI/MFM/RLL support
    [*]   Enhanced IDE/MFM/RLL disk/cdrom/tape/floppy support
    [*]     Include IDE/ATA-2 DISK support
    ---     IDE chipset support/bugfixes
    [*]     PCI IDE chipset support
    [*]       Winbond SL82c105 support
    [*]       Generic PCI bus-master DMA support

  Network device support ---&gt;
    [*] Network device support
    Ethernet (10 or 100Mbit) ---&gt;
      [*] Ethernet (10 or 100Mbit)
      Tulip family network device support ---&gt;
        [*] "Tulip" family network device support
        [*]   DECchip Tulip (dc2114x) PCI support
        [*]     Use PCI shared mem for NIC registers
        [*]     Use NAPI RX polling
      [*] EISA, VLB, PCI and on board controllers
      [*]   PCI NE2000 and clones support

  Character devices ---&gt;
    Serial drivers ---&gt;
      [*] 8250/16550 and compatible serial support
      [*]   Console on 8250/16550 and compatible serial port
      --- Non-8250 serial port support
      [*] DC21285 serial port support
      [*]   Console on DC21285 serial port
    Watchdog Cards ---&gt;
      [*] Watchdog Timer Support
      [*]   NetWinder WB83C977 watchdog
    [*] NetWinder thermometer support
    [*] NetWinder Button
    [*]   Reboot Using Button

<comment>Recommended options</comment>
Kernel Features ---&gt;
  [*] Preemptible Kernel
  [*] Timer and CPU usage LEDs
  [*]   CPU usage LED

File systems ---&gt;
  [*] Ext3 journalling file system support

Device Drivers ---&gt;
  Input device support ---&gt;
    [*] Keyboards ---&gt;
      [*] AT keyboard
    [*] Mouse ---&gt;
      [*] PS/2 mouse

  Graphics support ---&gt;
    [*] Support for frame buffer devices
    [*]   Enable firmware EDID
    [*]   CyberPro 2000/2010/5000 support
    Logo configuration ---&gt;
      [*] Bootup logo
      [*]   Standard 224-color Linux logo

  Sound ---&gt;
    [*] Sound card support
    Open Sound System ---&gt;
      [*] Open Sound System
      [*]   OSS sound modules
      [*]     Yamaha FM synthesizer (YM3812/OPL-3) support
      [*]     Netwinder WaveArtist

<comment>You should only enable this to upgrade your flash</comment>
Device Drivers ---&gt;
  Character devices ---&gt;
    [*] NetWinder flash support
</pre>

<p>
هنگامیکه پیکربندی کرنل را به پایان رساندید، با <uri  link="#compiling">کامپایل کردن و نصب نمودن</uri> ادامه دهید.
</p>

</body>
</section>
<section id="compiling">
<title>کامپایل کردن و نصب نمودن</title>
<body>

<p>
اکنون که کرنل شما پیکربندی شد، زمان کامپایل کردن و نصب کردن آن رسیده. از پیکربندی خارج شوید و روند کامپایل کردن را آغاز نمایید:
</p>

<pre caption="Compiling the kernel">
# <i>make &amp;&amp; make modules_install</i>
</pre>


<p>
هنگامیکه کامپایل شدن کرنل بپایان رسید، تصویر کرنل را به <path>/boot</path> رونوشت نمایید. از هر نامی که با آن احساس راحتی می نمایید برای نامگذاری کرنلتان استفاده نمایید و آنرا بخاطر بسپارید چرا که بعدا و هنگامیکه راه انداز دستگاه خود را نصب می نمایید، به آن نیاز خواهید داشت. بخاطر داشته باشید <c><keyval id="kernel-name"/></c> را با نام و نسخه کرنل خودتان جایگزین نمایید.
</p>

<pre caption="Installing the kernel">
# <i>cp vmlinux.gz /boot/<keyval id="kernel-name"/></i>
</pre>

<p>
اکنون با <uri link="#kernel_modules">ماژول های کرنل</uri> ادامه دهید.
</p>

</body>
</section>
<section id="kernel_modules">
<title>ماژول های کرنل</title>

<subsection>
<include href="hb-install-kernelmodules.xml"/>
</subsection>

</section>
</sections>
