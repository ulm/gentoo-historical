<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fa/handbook/hb-portage-configuration.xml,v 1.1 2013/03/09 14:07:40 swift Exp $ -->

<sections>

<abstract>
می‌توان سراسر پرتیج را از راه متغییرهای گوناگونی که می‌توانید آنها را در فایل پیکربندی یا بشکل متغییر محیطی تنظیم نمایید پیکربندی نمود. 
</abstract>

<version>2</version>
<date>2012-07-24</date>

<section>
<title>پیکربندی پرتیج</title>
<subsection>
<body>

<p>
چنانکه پیشتر گفته شد، پرتیج بوسیله متغییرهای زیادی که می‌توانید آنها را در <path>/etc/portage/make.conf</path> تعریف نمایید، قابل پیکربندی است. خواهشمندیم به صفحه راهنمای <path>make.conf</path> برای داده‌های بیشتر و بیشتر بازگشت نمایید:
</p>

<pre caption="Reading the make.conf man page">
$ <i>man make.conf</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>انتخاب‌های Build-specific</title>
<subsection>
<title>انتخاب‌های همگردان و پیکربند</title>
<body>

<p>
هنگامیکه پرتیج برنامه‌های را می‌سازد، مفهوم‌ متغییرهای زیر را به کدهای همگردان و پیکربند پاس می‌دهد:
</p>

<ul>
  <li>
متغییرهای CFLAGS &amp; CXXFLAGS پرچمک‌های خواسته‌شده همگرداننده برای برگردان نمودن C و ++C .
  </li>
  <li>
متغییر CHOST داده‌های مکان ساخته‌شدن برای کد پیکربندی برنامه‌ها را تعریف می‌نماید
  </li>
  <li>
    متغییر MAKEOPTS به دستور <c>make</c> بازگشت می‌دهد و بیشتر زمان‌ها برای تعریف مقدار همسوئی استفاده شده در هنگام کامپایل تنظیم می‌گردد. داده‌های بیشتر درباره انتخاب‌های make می‌تواند در صفحه راهنمای <c>make</c> پیدا شود.
  </li>
</ul>

<p>
متغییر USE همچنین در هنگام پیکربندی و کامپایل نمودن استفاده می‌شود اما در فصل پیشین بشکل مفصل توضیح داده شد.
</p>

</body>
</subsection>
<subsection>
<title>انتخاب‌های دریافت</title>
<body>

<p>
هنگامیکه پرتیج درحال دریافت نسخه جدیدی از یک عنوان نرم‌افزار مشخص است، فایل‌های مستهلک مربوط به نسخه قدیمی را از روی دستگاه شما پاک می‌نماید. پرتیج ۵ ثانیه پیش از حالت نصب خارج نمودن نسخه قدیمی تاخیر می‌نماید. این ۵ ثانیه بوسیله متغییر CLEAN_DELAY تعریف گردیده.
</p>

<p>
می‌توانید با EMERGE_DEFAULT_OPTS به <c>emerge</c> بگویید در هربار اجرا تنظیم‌های مشخصی را استفاده نماید. برخی انتخاب‌های مفید دیگر <c>--ask, --verbose, --tree</c> و بیش از آن هستند.
</p>

</body>
</subsection>
</section>
<section>
<title>حفاظت فایل پیکربندی</title>
<subsection>
<title>موقعیت محافظتی پرتیج</title>
<body>

<p>
پرتیج یک نسخه جدید از یک برنامه را بروی نسخه پیشین آن دوباره‌نویسی می‌نماید اگر فایل‌ها در موقعیت <e>protected</e> قرار داده نشده باشند.این موقعیت‌های محافظتی بوسیله متغییر  تعریف می‌شوند و در موقعیت فایل پیکربندی همگانی هستند. دایرکتوری فهرست شده space-delimited است.
</p>

<p>
یک فایل که در یک چنین موقعیت حفاظت شده‌ائی قرار گرفته تغییر نام یافته و کاربر درباره وجود نسخه جدید (احتمالی ) فایل پیکربندی آن آگاهی می‌یابد. 
</p>

<p>
می‌توانید درباره تنظیم‌های کنونی CONFIG_PROTECT از خروجی <c>emerge --info</c> چیزهائی بیابید:
</p>

<pre caption="Getting the CONFIG_PROTECT setting">
$ <i>emerge --info | grep 'CONFIG_PROTECT='</i>
</pre>

<p>
داده‌های بیشتر درباره حفاظت از فایل پیکربندی پرتیج در بخش CONFIGURATION FILES از صفحه راهنمای <c>emerge</c> وجود دارد:
</p>

<pre caption="More information about Configuration File Protection">
$ <i>man emerge</i>
</pre>

</body>
</subsection>
<subsection>
<title>بیرون نگاه داشتن دایرکتوری‌ها</title>
<body>

<p>
برای محافظت نکردن از زیردایرکتوری مشخصی از موقعیت حفاظت شده می‌توانید از متغییر CONFIG_PROTECT_MASK استفاده نمایید.
</p>

</body>
</subsection>
</section>
<section>
<title>انتخاب‌های پایین گذاری</title>
<subsection>
<title>موقعیت‌های سرور</title>
<body>

<p>
هنگامیکه داده‌های خواسته‌شده بروی دستگاه شما وجود نداشته باشد، پرتیج آنرا از اینترنت بدست می‌اورد. موقعیت سرور برای کانال‌های داده‌های گوناگون بوسیله متغییرهای زیر تعریف شده‌اند: 
</p>

<ul>
  <li>
متغییر GENTOO_MIRRORS فهرستی از موقعیت‌های سرور که حاوی کدمنبع (فایل‌های توزیع) است تعریف می‌نماید
  </li>
  <li>
متغییر PORTAGE_BINHOST موقعیت یک سرور ویژه حاوی بسته‌های پیش ساخته برای دستگاه شما را تعریف می‌نماید.
  </li>
</ul>

<p>
سومین تنظیم‌های درگیر با موقعیت سرور rsync که هنگام بروزرسانی شاخه پرتیج از آن استفاده می‌نمایید:
</p>

<ul>
  <li>
متغییر SYNC یک سرور ویژه که پرتیج برای دریافت از آن استفاده می‌نماید را تعریف می‌کند
  </li>
</ul>

<p>
متغییرهای GENTOO_MIRRORS و SYNC می‌تواند بشکل خودکار در برنامه <c>mirrorselect</c> تنظیم شوند. برای آن لازم دارید تا ابتدا <c>emerge mirrorselect</c> را برای استفاده از آن اجرا نمایید. برای داده‌های بیشتر، کمک برخط mirrorselect را ببینید:
</p>

<pre caption="More information about mirrorselect">
# <i>mirrorselect --help</i>
</pre>

<p> 
اگر محیط شما از شما خواست تا از یک پروکسی استفاده نمایید، می‌توانید برای تعریف یک سرور پروکسی از متغییرهای http_proxy ، ftp_proxy و RSYNC_PROXY استفاده نمایید.
</p>

</body>
</subsection>
<subsection>
<title>دستورهای دریافت</title>
<body>

<p> 
هنگامی‌که پرتیج به دریافت کد منبع نیاز دارد، بشکل پیش فرض از <c>wget</c> استفاده می‌نماید. می‌توانید آنرا در متغییر FETCHCOMMAND تغییر دهید.
</p>

<p>
پرتیج قابلیت ازسرگیری اندکی از کدمنبع پایین گذاری شده را داراست. بشکل پیش فرض برای اینکار از <c>wget</c> استفاده می‌نماید، اما این می‌تواند در متغییر RESUMECOMMAND تغییر نماید.  
</p>

<p>
مطمئن شوید که متغییرهای FETCHCOMMAND و RESUMECOMMAND کد منبع شما را در موقعیت درست نگاه داری نمایند. در داخل متغییرها باید از <c>\${URI}</c> و <c>\${DISTDIR}</c> برای اشاره به موقعیت کد منبع و موقعیت مخزن فایل‌های سیستمی استفاده نمایید.
</p>

<p>
همچنین می‌توانید اداره کنندگان مختص پروتکل با استفاده از FETCHCOMMAND_HTTP, FETCHCOMMAND_FTP, RESUMECOMMAND_HTTP, RESUMECOMMAND_FTP و بیش از آن تعریف نمایید.
</p>

</body>
</subsection>
<subsection>
<title>تنظیم‌های Rsync</title>
<body>

<p>
نمی‌توانید دستور rsync استفاده شده بوسیله پرتیج برای بروزرسانی شاخه پرتیج را تغییر دهید، اما می‌توانید برخی متغییرهای مربوط به دستور rsync را تنظیم نمایید:
</p>

<ul>
  <li>
متغییر PORTAGE_RSYNC_OPTS تعدادی از متغییرهای پیش فرض مورد استفاده در هنگام sync را تنظیم می‌نماید. این متغییر نباید تغییر نماید مگر اینکه شما <e>براستی</e> بدانید در حال انجام چه چیزی هستید. توجه نمایید که در صورت خالی بودن PORTAGE_RSYNC_OPTS همان تنظیمات از پیش تعیین شده استفاده خواهند شد.
  </li>
  <li>
متغییر PORTAGE_RSYNC_EXTRA_OPTS می‌تواند برای تنظیم انتخاب‌های بیشتر در هنگام sync مورد استفاده قرار گیرد. هر انتخاب باید بوسیله یک فضای خالی جدا گردد.
    <ul>
      <li>
متغییر <c>--timeout=&lt;number&gt;:</c> ثانیه‌های پیش از پایان دادن به زمان لازم برای ارتباط rsync را تعریف می‌نماید. پیش‌فرض این متغییر ۱۸۰ ثانیه است اما کاربران دیال‌آپ یا کاربران رایانه‌های آهسته ممکن است بخواهند آنرا بروی ۳۰۰ یا بیشتر تنظیم نمایند.
      </li>
      <li>
متغییر <c>--exclude-from=/etc/portage/rsync_excludes:</c> به یک فایل که بسته‌ها و/یا دسته‌بندی‌های rsync فهرست شده در آن باید در هنگام مرحله بروزرسانی نادیده گرفته شوند اشاره می‌نماید.در این مورد، به <path>/etc/portage/rsync_excludes</path> اشاره می‌نماید. خواهشمندیم برای آموختن نحو این فایل <uri link="?part=3&amp;chap=5">استفاده کردن از یک زیر تنظیم شاخه پرتیج</uri> را بخوانید.
      </li>
      <li>--quiet: کاهش خروجی صفحه</li>
      <li>--verbose: چاپ نمودن یک فرست فایل کامل</li>
      <li>--progress: نمایش یک نشانگر پیشرفت برای هر فایل</li>
    </ul>
  </li>
  <li>
متغییر PORTAGE_RSYNC_RETRIES تعریف می‌نماید rsync چندبار باید برای برقراری ارتباط با میرور پیش از بپایان بردن متغییر SYNC تلاش نماید. پیش‌فرض این متغییر ۳ است.
  </li>
</ul>

<p>
برای داده‌های بیشتر در این مورد و دیگر موردها، خواهشمندیم <c>man rsync</c> را بخوانید.
</p>

</body>
</subsection>
</section>
<section>
<title>پیکربندی جنتو</title>
<subsection>
<title>انتخاب شاخه</title>
<body>

<p>
می‌توانید با استفاده از متغییر ACCEPT_KEYWORDS شاخه انتخابی پیش‌فرض خودتان را تغییر دهید. این بشکل پیش‌فرض در شاخه ایستای معماری شما قرار دارد. داده‌های بیشتر درباره شاخه‌های جنتو می‌تواند در بخش واپسین یافت گردند.
</p>

</body>
</subsection>
<subsection>
<title>خصیصه‌های پرتیج</title>
<body>

<p>
می‌توانید خصیصه‌های مشخص پرتیج را در راستای متغییر FEATURES فعال نمایید. خصیصه‌های پرتیج در بخش‌های پیشین مانند <uri  link="?part=2&amp;chap=3">Portage Features</uri> توضیح داده شد، 
</p>

</body>
</subsection>
</section>
<section>
<title>رفتار پرتیج</title>
<subsection>
<title>مدیریت کد</title>
<body>

<p>
به کمک متغییر PORTAGE_NICENESS می‌توانید یک مقدار مفید را به اجرای پرتیج افزوده یا از آن بکاهید. مقدار PORTAGE_NICENESS به مقدار مطلوب حاضر <e>افزوده</e> می‌گردد.
</p>

<p>
برای داده های بیشتر در این باره صفحه راهنمای آنرا مشاهده نمایید:
</p>

<pre caption="More information about nice">
$ <i>man nice</i>
</pre>

</body>
</subsection>
<subsection>
<title>رفتار خروجی</title>
<body>

<p>
متغییر NOCOLOR که بشکل پیش‌فرض "false" است، در هنگامی تعریف می‌شود که پرتیج باید خروجی رنگی مورد استفاده را از کار بیاندازد.
</p>

</body>
</subsection>
</section>
</sections>
