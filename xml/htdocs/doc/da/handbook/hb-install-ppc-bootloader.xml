<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/da/handbook/hb-install-ppc-bootloader.xml,v 1.7 2004/11/20 19:04:00 broeman Exp $ -->

<sections>

<version>1.13</version>
<date>23. Oktober 2004</date>

<section>
<title>Valg af boot-loader</title>
<subsection>
<title>Introduktion</title>
<body>

<p>
Nu hvor din kerne er opsat og kompileret og den nødvendige 
systemopsætning er klaret, er det tid til at installere et program, der vil 
sætte gang i din kerne, når du starter systemet. Sådan et program kaldes en 
<e>boot-loader</e>. Men før du starter, skal du overveje dine muligheder...
</p>

<p>
Flere boot-loadere eksisterer til Linux/PPC. Vi har <uri link="#yaboot">Yaboot</uri> (til NewWorld Apple og IBM maskiner) og <uri link="#bootx">BootX</uri> (til OldWorld Apple og IBM maskiner). Pegasos kræver ikke nogen boot-loader. Du kan ikke bruge Yaboot eller BootX på dem på dette tidspunkt. Pegasos-brugere bør derfor fortsætte med <uri link="#reboot">Genstart af systemet</uri>
</p>

</body>
</subsection>
</section>
<section id="yaboot">
<title>Standard: Brug af Yaboot</title>
<subsection>
<title>Introduktion</title>
<body>

<impo>
Yaboot kan kun benyttes på NewWorld Apple og IBM systemer!
</impo>

<p>
Der er to måder at opsætte Yaboot til dit system. Du kan den inkluderede <c>yabootconfig</c> for at starte automatisk indstilling af yaboot. Hvis du af en eller anden grund ikke ønsker at køre <c>yabootconfig</c>, for at indstille <path>/etc/yaboot.conf</path> eller installerer Gentoo på en G5 (på hvilket <c>yabootconfig</c> ikke altid virker), kan du blot redigere i eksempelfilen, der allerede er installeret på dit system.
</p>

<ul>
  <li><uri link="#yabootconfig">Standard: Brug af yabootconfig</uri></li>
  <li>
    <uri link="#manual_yaboot">Alternativ: Manuel Yaboot-opsætning</uri>
  </li>
</ul>

</body>
</subsection>
<subsection id="yabootconfig">
<title>Standard: Brug af yabootconfig</title>
<body>

<p>
<c>yabootconfig</c> vil automatisk finde partitionerne på din maskine og opsætte dobbelte og tredobbelte opstartskombinationer med Linux, Mac OS og Mac OS X.
</p>

<p>
For at bruge <c>yabootconfig</c>, skal dit drev have en bootstrap-partition 
og <path>/etc/fstab</path> være sat op til dine Linux partitioner. Begge 
dele skulle allerede være klaret med trinene ovenfor. Du skal starte med at 
sikre, at du har den seneste version af Yaboot installeret, ved at køre 
<c>emerge --update yaboot</c>. Dette er nødvendigt, da den seneste version vil 
være tilgængelig via Portage, men måske ikke er i stage-filerne.
</p>

<pre caption = "Installering af Yaboot">
# <i>emerge --update yaboot</i>
</pre>

<p>
Afslut nu chroot og kør <c>yabootconfig</c>. Programmet vil køre, og det vil bekræfte 
placeringen af bootstrap-partitionen. Tast <c>Y</c> hvis det er korrekt. Hvis 
ikke, så dobbelttjek <path>/etc/fstab</path>. yabootconfig vil nu scanne din 
systemopsætning, oprette <path>/etc/yaboot.conf</path> og køre <c>mkofboot</c> 
for dig. <c>mkofboot</c> er brugt til at formatere bootstrap-partitionen, og 
installere opsætningsfilen til yaboot på den.
Efter dette, gå ind i chroot igen.
</p>

<pre caption="Tilbage til chroot">
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>/usr/sbin/env-update &amp;&amp; source /etc/profile</i>
</pre>

<p>
Du kan nu kontrollere indholdet af <path>/etc/yaboot.conf</path>. Hvis du 
laver ændringer i <path>/etc/yaboot.conf</path> (det kunne være ændring af 
standard operativsystem som opstartes), så sørg for at køre <c>ybin -v</c> igen for at anvende 
ændringerne på bootstrap-partitionen.
</p>

<p>
Fortsæt nu med <uri link="#reboot">Genstart af systemet</uri>.
</p>

</body>
</subsection>
<subsection id="manual_yaboot">
<title>Alternativ: Manuel Yaboot-opsætning</title>
<body>

<p>
Sørg først for, at have det seneste <c>yaboot</c> installeret på dit system:
</p>

<pre caption = "Installering af Yaboot">
# <i>emerge --usepkg --update yaboot</i>
</pre>

<p>
Nedenfor finder du en komplet <path>yaboot.conf</path>. Du kan ændre det efter egen vilje. G5-brugere bør være opmærksomme på at deres diske er serielle ATA diske, som bliver set som SCSI-diske af Linux kernen (så erstat <path>/dev/hda</path> med <path>/dev/sda</path>).
</p>

<pre caption = "/etc/yaboot.conf">
<comment>## /etc/yaboot.conf
##
## Kør: "man yaboot.conf" for detaljer. Lav ikke ændringer før du har!!
## Se også: /usr/share/doc/yaboot/examples for opsætningseksempler.
##
## For en dobbelt opstartsmenu, tilføj en eller flere af:
## bsd=/dev/hdaX, macos=/dev/hdaY, macosx=/dev/hdaZ

## vores bootstrap-partition:</comment>

boot=/dev/hda1

<comment>## ofboot er openfirmware-metoden til at specificere en
## bootstrap partition. Hvis dette ikke er defineret, vil yaboot
## fejle på en G5 (undtagen hvis du leverer de rigtige parametre
## til mkofboot/ybin programmet).
## hd:X betyder /dev/sdaX (eller /dev/hdaX).
##
## G5-brugere burde afkommentere denne linje!!:

# ofboot=hd:1</comment>

<comment>##hd: er open firmware navn for hda</comment>
device=hd:
partition=3

delay=5
defaultos=macosx
timeout=30
install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot

<comment>#################
## Denne sektion kan duplikeres hvis du har mere end en kerne eller et sæt af 
## opstartsparametre - erstat 2.6.9 med din kerne-version
#################</comment>
image=/boot/kernel-2.6.9
  label=Linux
  root=/dev/hda3
  sysmap=/boot/System.map-2.6.9
  read-only
<comment>##################</comment>

<comment>## G5-brugere skal sætte
## macos=hd:13
## macosx=hd:12
## i stedet for eksempel-værdierne.</comment>
macos=/dev/hda13
macosx=/dev/hda12
enablecdboot
enableofboot
</pre>

<p>
Når opsætningen af <path>yaboot.conf</path> er som du vil have den, kører du
<c>mkofboot -v</c> for at installere opsætningen på bootstrap-partitionen. 
<e>Glem ikke dette!</e> Hvis alt går vel og du har den samme opsætning som 
eksemplet ovenfor, vil din næste opstart give dig en simpel femvalgs 
opstartsmenu. Hvis du opdaterer din Yaboot-opsætning senere, skal du blot køre 
<c>ybin -v</c> for at opdatere bootstrap-partitionen - <c>mkofboot</c> er kun 
til opsætning første gang.
</p>

<p>
Se <uri link="http://penguinppc.org/bootloaders/yaboot">yaboot projektet</uri> 
for mere information om Yaboot. Lige nu, fortsæt installationen med 
<uri link="#reboot">Genstart af systemet</uri>.
</p>

</body>
</subsection>
</section>
<section id="bootx">
<title>Alternativ: BootX</title>
<body>

<impo>
BootX kan kun benyttes på OldWorld Apple og IBM systemer!
</impo>

<p>
BootX kræver at du genstarter først, så lad os lige genstarte :)
</p>

<p>
Først afslut det chrootede miljø og afmount alle mountede partitioner. Indtast så den magiske kommando, du har ventet på: <c>reboot</c>.
</p>

<pre caption="Afslutning af chroot og afmount af partitioner samt genstart">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>
  	 
<p>
Selvfølgelig, glem ikke at fjerne den opstartbare CD, ellers vil CDen igen starte op i stedet for MacOS.
</p>
  	 
<p>
Nu da din computer er startet op i MacOS, åben BootX kontrolpanelet. Vælg <c>Options</c> og fjern flueben ved <c>Used specified RAM disk</c>. Når du vender tilbage til BootX hovedskærm, vil du nu finde en valgmulighed for at specificere din computers rod-harddisk og partition. Udfyld disse med de passende værdier.
</p>
  	 
<p>
BootX kan blive opstart til at starte Linux ved opstart. Hvis du gør dette, vil du først se din computer starte op i MacOS og så, imens den starter op, vil BootX hentes og starte Linux. Se <uri link="http://penguinppc.org/bootloaders/bootx">BootXs hjemmeside</uri> for flere informationer.
</p>
  	 
<p>
Genstat nu igen, og start op i Linux, og fortsæt så med <uri link="?part=1&amp;chap=11">Afslutning af Gentoo installationen</uri>.
</p>
  	 
</body>
</section>
<section id="reboot">
<title>Genstart af systemet</title>
<subsection>
<body>

<p>
Afslut det chrooted miljø og afmount alle mountede partitioner. Indtast så den magiske kommando, du har ventet på: <c>reboot</c>.
</p>

<pre caption="Afslutning af chroot og afmount af partitioner samt genstart">
# <i>exit</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

<p>
Selvfølgelig, glem ikke at fjerne den opstartbare CD, ellers vil CDen igen starte op i stedet for dit nye Gentoo system.
</p>

<p>
Når du har genstartet din Gentoo installation, afslut med <uri link="?part=1&amp;chap=11">Afslutning af din Gentoo installation</uri>.
</p>

</body>
</subsection>
</section>
</sections>
