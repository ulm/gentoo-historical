<?xml version='1.0' encoding='iso-8859-1'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/da/handbook/hb-install-config.xml,v 1.6 2004/03/10 22:58:43 broeman Exp $ -->

<sections>
<section>
<title>Informationer om filsystemet</title>
<subsection>
<title>Hvad er fstab?</title>
<body>

<p>
Under Linux skal alle partitioner, som systemet benytter, være på listen i
<path>/etc/fstab</path>. Denne fil indeholder mount-punkterne til disse 
partitioner (hvor de bliver set i filsystemets struktur), hvordan de skal 
mountes (specielle indstillinger) og hvornår (automatisk eller ej, om brugere 
kan eller ikke kan mounte dem, etc.).
</p>

</body>
</subsection>
<subsection>
<title>Oprettelse af /etc/fstab</title>
<body>

<p>
<path>/etc/fstab</path> benytter en speciel syntaks. Hver linje består af seks 
felter, adskilt af mellemrum eller tabulatorer (og gerne flere af begge). Hvert
 felt har sin egen betydning:
</p>

<ul>
<li>
  Det første felt beskriver <b>partitionen</b> (stien til enhedsfilen)
</li>
<li>
  Andet felt viser <b>mount-punktet</b> hvor partitionen skal mountes
</li>
<li>
  Tredje felt viser hvilket <b>filsystem</b> partitionen benytter
</li>
<li>
  Det fjerde felt viser <b>mount-indstilliger</b>, der bliver brugt af 
<c>mount</c>, når den vil mounte en partition. Da hvert filsystem har sine 
egne mount-indstillinger, opfordres du til at læse manpagen mount 
(<c>man mount</c>) for at få et fuldt overblik. Flere mount-indstillinger 
er adskilt med komma.</li>
<li>
  Femte felt er brugt af <c>dump</c> til bestemme om en partion har brug for at
 blive <b>dump</b>et eller ej. Du kan normalt lade dette være <c>0</c> (nul).
</li>
<li>
  Sjette felt er brugt af <c>fsck</c> til at bestemme rækkefølgen for 
<b>kontrol</b> af filsystemer, hvis systemet ikke er blevet lukket ordentlig 
ned. Filsystemet med roden bør være <c>1</c>, mens resten bør være <c>2</c> 
(eller <c>0</c> hvis en kontrol af filsystemet ikke er nødvendig).
</li>
</ul>

<p>
Start <c>nano</c> (eller din foretrukne editor) for at oprette din 
<path>/etc/fstab</path>:
</p>

<pre caption="Åbning af /etc/fstab">
# <i>nano -w /etc/fstab</i>
</pre>

<p>
Lad os se på hvordan vi skal lave opsætningen for <path>/boot</path> 
partitionen. Dette er kun et eksempel, så hvis din arkitektur ikke har brug for
 en <path>/boot</path> partition, så lad være med at kopiere det ordret.
</p>

<p>
I vores standardeksempel med x86 partitionering er <path>/boot</path> 
partitionen <path>/dev/hda1</path> med <c>ext2</c> som filsystem. Den bør ikke 
mountes automatisk (<c>noauto</c>), men skal stadigvæk kontrolleres, så vi 
skriver:
</p>

<pre caption="Eksempel på linjen med /boot i /etc/fstab">
/dev/hda1   /boot     ext2    noauto        1 2
</pre>

<p>
For at forbedre ydelsen vil de fleste brugere tilføje <c>noatime</c>
som en mount-indstilling, hvilket vil resultere i et hurtigere system, da 
tilgangstider ikke bliver registreret (hvilket du normalt ikke har brug for):
</p>

<pre caption="En forbedret /boot linje i /etc/fstab">
/dev/hda1   /boot     ext2    noauto,noatime    1 2
</pre>

<p>
Hvis vi forsætter med dette, får vi de tre følgende linjer (for
<path>/boot</path>, <path>/</path> og swap-partitionen):
</p>

<pre caption="De tre linjer i /etc/fstab">
/dev/hda1   /boot     ext2    noauto,noatime    1 2
/dev/hda2   none      swap    sw                0 0
/dev/hda3   /         ext3    noatime           0 1
</pre>

<p>
For at gøre det færdigt bør du tilføje en definition for <path>/proc</path>, 
<c>tmpfs</c> (påkrævet) og for dit CD-ROM drev (og selvfølgelig også for andre 
partitioner og drev, hvis du har det):
</p>

<pre caption="Et komplet eksempel på /etc/fstab">
/dev/hda1   /boot     ext2    noauto,noatime    1 2
/dev/hda2   none      swap    sw                0 0
/dev/hda3   /         ext3    noatime           0 1

none        /proc     proc    defaults          0 0
none        /dev/shm  tmpfs   defaults          0 0

/dev/cdroms/cdrom0    /mnt/cdrom    auto      noauto,user    0 0
</pre>

<p>
<c>auto</c> får <c>mount</c> til at gætte på filsystemet (anbefalet for 
flytbare medier, da de kan være skabt med et enkelt ud af mange filsystemer) og 
<c>user</c> gør det muligt, for andre brugere end root, at mounte CDen.
</p>

<p>
Brug nu eksemplet ovenfor til at oprette din <path>/etc/fstab</path>. Hvis du 
er SPARC-bruger, bør du også tilføje den følgende linje til 
<path>/etc/fstab</path>:
</p>

<pre caption="Tilføjelse af filsystemet openprom i /etc/fstab">
none        /proc/openprom  openpromfs    defaults      0 0
</pre>

<p>
Hvis du har brug for <c>usbfs</c>, så tilføj følgende linje til 
<path>/etc/fstab</path>:
</p>

<pre caption="Tilføjelse af filsystemet usbfs i /etc/fstab">
none        /proc/bus/usb   usbfs         defaults      0 0
</pre>

<p>
Genindlæs din <path>/etc/fstab</path>, gem og afslut for at fortsætte.
</p>

</body>
</subsection>
</section>
<section>
<title>Oplysninger om netværk</title>
<subsection>
<title>Værstnavn, domænenavn etc.</title>
<body>

<p>
Et af de valg, man som bruger, skal gøre, er at bestemme et navn til sin PC. 
Dette lader til at være ret let, men <e>mange</e> brugere har problemer med at 
finde et passende navn til deres Linux PC. For at gøre det kort, så kan du 
ændre ethvert navn du vælger, senere. For vores skyld kan du kalde dit system 
<c>tux</c> og dit domæne <c>homenetwork</c>. 
</p>

<p>
Vi bruger disse værdier i de næste eksempler. Først angiver vi værtsnavnet:
</p>

<pre caption="Angivelse af værtsnavn">
# <i>echo tux &gt; /etc/hostname</i>
</pre>

<p>
Herefter angiver vi domænenavn:
</p>

<pre caption="Angivelse af domænenavn">
# <i>echo homenetwork &gt; /etc/dnsdomainname</i>
</pre>

<p>
Hvis du har et NIS-domæne (hvis du ikke ved hvad det er, har du ikke et), skal 
du også angive det:
</p>

<pre caption="Angivelse af NIS-domænenavn">
# <i>echo nis.homenetwork &gt; /etc/nisdomainname</i>
</pre>

<p>
Tilføj nu scriptet <c>domainname</c> til standard runlevel:
</p>

<pre caption="Tilføjelse af domainname til standard runlevel">
# <i>rc-update add domainname default</i>
</pre>

</body>
</subsection>
<subsection>
<title>Opsætning af dit netværk</title>
<body>

<p>
Før du får den "Hey, vi har været igennem det før"-følelse, skal du huske på at
 den opsætning af netværket du lavede i starten af Gentoo installationen, kun 
var for installationen. Nu skal du lave den permanente opsætning af dit netværk
 til dit Gentoo system.
</p>

<p>
Al netværksinformation er samlet i <path>/etc/conf.d/net</path>. Den benytter 
en meget ligefrem, men ikke særlig intuitiv, syntaks, hvis du ikke kender til 
manuel netværksopsætning. Men frygt ikke, vi vil forklare det hele :)
</p>

<p>
Åbn først <path>/etc/conf.d/net</path> med din foretrukne editor (<c>nano</c>
er brugt i dette eksempel):
</p>

<pre caption="Åbning af /etc/conf.d/net til redigering">
# <i>nano -w /etc/conf.d/net</i>
</pre>

<p>
Den første variabel, du finder er <c>iface_eth0</c>. Det benytter følgende 
syntaks:
</p>

<pre caption="Syntaks for iface_eth0">
iface_eth0="<i>&lt;din IP-adresse&gt;</i> broadcast <i>&lt;din 
broadcast-adresse&gt;</i> netmask <i>&lt;din netmaske&gt;</i>"
</pre>

<p>
Hvis du bruger DHCP (automatisk modtagelse af IP), skal du blot sætte 
<c>iface_eth0</c> til <c>dhcp</c>. Hvis du bruger rp-pppoe (f.eks. til
ADSL), sæt den til <c>up</c>. Hvis du bliver nødt til at opsætte dit
netværk manuelt og du ikke er bekendt med de ovenstående udtryk, så
læs venligst sektionen i <uri
link="?part=1&amp;chap=3#doc_chap4_sect3">Forståelse af
netværksterminologi</uri> hvis du ikke allerede har gjort det.
</p>

<p>
Lad os give to eksempler; det første bruger DHCP, det andet bruger en statisk 
IP-adresse (192.168.0.2) med netmasken 255.255.255.0, broadcast-adresse 
192.168.0.255 og gateway 192.168.0.1 mens den tredje blot aktiverer
grænsefladen til pr-pppoe brug:
</p>

<pre caption="Eksempler til /etc/conf.d/net">
<comment>(Ved DHCP)</comment>
iface_eth0="dhcp"

<comment>(Ved statisk IP)</comment>
iface_eth0="192.168.0.2 broadcast 192.168.0.255 netmask 255.255.255.0"
gateway="eth0/192.168.0.1"
<comment>(Til rp-pppoe)</comment>
iface_eth0="up"
</pre>

<p>
Hvis du har flere netværksenheder, så opret en ekstra <c>iface_eth</c> variabel
 som f.eks. <c>iface_eth1</c>, <c>iface_eth2</c>. Variablen med <c>gateway</c> bør 
ikke duplikeres, da du kun kan angive en gateway per computer.
</p>

<p>
Gem nu indstillingerne og afslut for at fortsætte.
</p>

</body>
</subsection>
<subsection>
<title>Automatisk start af netværk ved opstart</title>
<body>

<p>
For at aktivere dine netværkenheder ved opstarten, skal du tilføje dem til 
standard runlevel. Hvis du har PCMCIA-enheder, bør du springe denne sektion 
over, da PCMCIA-enheder er startet af scriptet PCMCIA init.
</p>

<pre caption="Tilføjelse af net.eth0 til standard runlevel">
# <i>rc-update add net.eth0 default</i>
</pre>

<p>
Hvis du har flere netværksenheder, skal du oprette tilsvarende 
<path>net.eth1</path>, <path>net.eth2</path> etc. initscripts til dem. Du kan 
bruge <c>ln</c> til det:
</p>

<pre caption="Oprettelse af ekstra initscripts">
# <i>cd /etc/init.d</i>
# <i>ln -s net.eth0 net.eth1</i>
# <i>rc-update add net.eth1 default</i>
</pre>

</body>
</subsection>
<subsection>
<title>Angivelse af netværksinformation</title>
<body>

<p>
Du skal nu informere Linux om dit netværk. Dette er defineret i 
<path>/etc/hosts</path> og hjælper med at oversætte værtsnavne til IP-adresser,
 for værter der ikke er blevet oversat af din navneserver. Hvis f.eks. dit interne 
netværk består af tre PC'er navngivet <c>jenny</c> (192.168.0.5), 
<c>benny</c> (192.168.0.6) og <c>tux</c> (192.168.0.7 - dette system) skal du 
åbne <path>/etc/hosts</path> og indsætte disse værdier:
</p>

<pre caption="Åbn /etc/hosts">
# <i>nano -w /etc/hosts</i>
</pre>

<pre caption="Indsættelse af netværksinformation">
127.0.0.1     localhost
192.168.0.5   jenny.homenetwork jenny
192.168.0.6   benny.homenetwork benny
192.168.0.7   tux.homenetwork tux
</pre>

<p>
Hvis dit system er det eneste (eller navneserveren klarer alle 
navneoversættelser), er en enkelt linje nok:
</p>

<pre caption="/etc/hosts for enlige eller fuldt integrerede PC'er">
127.0.0.1     localhost
</pre>

<p>
Gem og afslut din editor for at afslutte.
</p>

<p>
Hvis du ikke har PCMCIA, kan du nu fortsætte med <uri link="#doc_chap3">
Systeminformation</uri>. PCMCIA-brugere bør læse det følgende emne om PCMCIA.
</p>

</body>
</subsection>
<subsection>
<title>Valgfri: Få PCMCIA til at køre</title>
<body>

<p>
PCMCIA-brugere bør først installere pakken <c>pcmcia-cs</c>:
</p>

<pre caption="Installation af pcmcia-cs">
# <i>emerge pcmcia-cs</i>
</pre>

<p>
Når <c>pcmcia-cs</c> er installeret, så tilføj <c>pcmcia</c> til 
<e>standard</e> runlevel:
</p>

<pre caption="Tilføjelse af pcmcia til standard runlevel">
# <i>rc-update add pcmcia default</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Systeminformation</title>
<body>

<p>
Gentoo bruger <path>/etc/rc.conf</path> til generel system opsætning. Åbn 
<path>/etc/rc.conf</path> og nyd alle kommentarerne i filen :)
</p>

<pre caption="Åbning af /etc/rc.conf">
# <i>nano -w /etc/rc.conf</i>
</pre>

<p>
Som du kan se, er denne fil kommenteret fint til at hjælpe dig med opsætningen 
af de nødvendige variabler. Vær særlig opmærksom på indstillingen <c>KEYMAP</c>:
hvis du vælger et forkert <c>KEYMAP</c>, vil du få mærkelige resultater, når du 
skriver på tastaturet.
</p>

<note>
Brugere af USB-baserede SPARC systemer og SPARC kloner, kan have brug for at 
vælge en i386 keymap (som f.eks. "us") i stedet for "sunkeymap".
</note>

<p>
Når du er færdig med opsætningen af <path>/etc/rc.conf</path>, så gem og afslut
 og fortsæt med <uri link="?part=1&amp;chap=9">Opsætning af boot-loader</uri>.
</p>

</body>
</section>
</sections>
