<?xml version='1.0' encoding="iso-8859-1"?>

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/da/portage-user.xml">
<title>Portage Brugervejledning</title>
<author title="Chefarkitekt"><mail link="drobbins@gentoo.org">Daniel 
Robbins</mail></author>
<author title="Redaktør"><mail link="thomasfl@gentoo.org">Thomas 
Flavel</mail></author>
<author title="Redaktør"><!--<mail link="zhen@gentoo.org">-->John P. 
Davis<!--</mail>--></author>
<author title="Redaktør"><mail link="carl@gentoo.org">Carl 
Anderson</mail></author>
<author title="Redaktør"><mail link="peesh@gentoo.org">Jorge 
Paulo</mail></author>
<author title="Redaktør"><mail link="swift@gentoo.org">Sven 
Vermeulen</mail></author>
<author title="Oversætter"><mail link="Bjarke.ip@tekpunkt.dk">Bjarke Istrup Pedersen</mail></author>
<author title="Korrektur"><mail link="mejlholm@stud.auc.dk">Arne Mejlholm</mail></author>
<author title="Korrektur"><mail link="broeman@gentoo.org">Jesper Brodersen</mail></author>

<abstract>Denne vejledning gennemgår kort hvordan du holder dine
pakker up-to-date, og hvordan du vedligeholder dit system.</abstract>

<license/>

<version>1.4</version>
<date>9. Oktober 2003</date>

<chapter>
<title>At Komme I Gang</title>

<section>
<title>At Holde Portage Opdateret</title>
<body>

<p>Efter du har fået Gentoo Linux installeret og har leget lidt med 
det, vil du sikkert finde nogle fejl eller mangler i nogle pakker, eller du vil 
måske installere de nyeste Gentoo Linux software pakker eller opdatere 
installerede pakker. For at gøre dette skal du downloade vores Portage træ. Vi har 
stillet flere anonyme rsync servere til rådighed, som du kan bruge til at få 
fat i den nyeste udgave af Portage træet. Sådan her bruger du det.</p>

<p>Brug følgende kommando til at synkronisere dit Portage 
træ:
</p>

<pre caption = "Få portage up-to-date">
# <c>emerge sync</c>
</pre>

<p>Bemærk venligst at <c>emerge sync</c> automatisk slår 
<i>--clean</i> muligheden til, som vil slette alle dine
personlige ændringer eller tilføjelser til <path>/usr/portage 
træet</path> Hvis du ønsker at holde dine
egne ebuilds adskilt fra hoved Portage træet, skal du benytte 
<i>PORTDIR_OVERLAY</i> funktionen.
</p>

<pre caption = "Brug af PORTDIR_OVERLAY">
<comment>Tilføj denne linie til <path>/etc/make.conf</path></comment>
PORTDIR_OVERLAY="/mappe/hvor/dine/ebuilds/ligger"
</pre>

<p>Hvis du begynder at ændre mange ebuilds, rette fejl, osv., bør du 
måske overveje at blive en del af Gentoo Linux Development Teamet. Kontakt 
venligst enten <mail link = "drobbins@gentoo.org">Daniel Robbins</mail> eller 
<mail link = "seemant@gentoo.org">Seemant Kulleen</mail> for mere 
information.
</p>

</body>
</section>

<section>
<title>At Opdatere Portage</title>
<body>

<p>Før du begynder at benytte vores Portage træ er det vigtigt, at du 
opdaterer Portage ved at gøre sådan:
</p>

<pre caption = "Opdatere Portage">
<comment>Dette vil vise dig, hvad der vil blive opdateret</comment>
# <c>emerge -up system </c>
<comment>Dette vil opdatere de nødvendige pakker</comment>
# <c>emerge -u system </c>
</pre>

<p>Nu vil du så bruge den nyeste version af portage, og du kan starte 
med at bruge vores ebuild system til at opdatere din installerede software.</p>

</body>
</section>
</chapter>
<chapter>

<title>Introduktion af <c>emerge</c></title>
<section>
<title><c>emerge --pretend</c></title>
<body> 

<p>Før du installerer en pakke, er det en god ide at se hvilke 
afhængigheder som bliver installeret, hvilke pakker som behøver at blive opdateret, osv. 
<c>emerge --pretend</c> eller
<c>emerge -p</c> kan gøre dette for dig.
</p>

<pre caption = "Brug af emerge -p">
# <c>emerge -p xchat</c>

These are the packages that I would emerge, in order.

Calculating dependencies......... done!
[ebuild   U] sys-libs/zlib-1.1.3-r2 to /
[ebuild   U] dev-libs/glib-1.2.10 to /
[ebuild N  ] media-libs/jpeg-6b-r2 to /
[ebuild N  ] x11-base/xfree-4.0.3-r3 to /
[ebuild N  ] x11-libs/gtk+-1.2.10-r1 to /
[ebuild N  ] media-libs/giflib-4.1.0-r3 to /
[ebuild N  ] media-libs/tiff-3.5.6_beta to /
[ebuild N  ] media-libs/imlib-1.9.10 to /
[ebuild N  ] net-irc/xchat-1.4.3 to /
</pre>

<p>I dette tilfælde forsøger vi at køre emerge <i>xchat</i> på en
maskine som ikke har X installeret. Det er derfor at <c>emerge 
--pretend</c> rigtig nok finder ud af at flere afhængigheder skal stilles først.
Specielt <path>sys-libs/zlib</path> og <path>dev-libs/glib</path> skal
opdateres, og så en masse ebuilds (inklusiv <path>x11-base/xfree</path>
selvfølgelig) skal installeres.</p> 

</body>
</section>
<section>
<title>USE og <c>emerge</c></title>
<body>
<p>Ovenfor kørte jeg <c>emerge --pretend</c> på et system, som ikke 
havde <c>gnome</c> defineret i <c>USE</c> variablen i 
<path>/etc/make.conf</path>.
Dette betyder at valgfri understøttelse for GNOME bliver slået til, 
hvis det er muligt.
<path>xchat</path> <e>har</e> imidlertid valgfri understøttelse for 
GNOME, så lad os
tage et kig på resultatet af <c>emerge --pretend</c> efter jeg har 
tilføjet <c>gnome</c> til
<c>USE</c> miljøvariablen i <path>/etc/make.conf</path>:
</p>

<pre caption = "Brug af emerge med USE variabler">
# <c>emerge -p xchat</c>

These are the packages that I would emerge, in order.

Calculating dependencies............................ done!
[ebuild N  ] media-libs/jpeg-6b-r2 to /
[ebuild N  ] gnome-base/libghttp-1.0.9 to /
[ebuild N  ] media-libs/audiofile-0.2.1 to /
[ebuild N  ] media-sound/esound-0.2.22-r2 to /
[ebuild N  ] gnome-base/gnome-env-1.0 to /
[ebuild N  ] gnome-base/libxml-1.8.11 to /
[ebuild N  ] gnome-base/ORBit-0.5.8 to /
[ebuild N  ] gnome-base/oaf-0.6.5 to /
[ebuild   U] dev-libs/glib-1.2.10 to /
[ebuild N  ] net-libs/libwww-5.3.2-r1 to /
[ebuild N  ] media-libs/giflib-4.1.0-r3 to /
[ebuild N  ] dev-util/guile-1.4-r3 to /
[ebuild   U] sys-libs/zlib-1.1.3-r2 to /
[ebuild N  ] x11-base/xfree-4.0.3-r3 to /
[ebuild N  ] x11-libs/gtk+-1.2.10-r1 to /
[ebuild N  ] media-libs/tiff-3.5.6_beta to /
[ebuild N  ] media-libs/imlib-1.9.10 to /
[ebuild N  ] gnome-base/gnome-libs-1.2.13 to /
[ebuild N  ] gnome-base/glibwww-0.2-r1 to /
[ebuild N  ] gnome-base/gdk-pixbuf-0.11.0 to /
[ebuild N  ] gnome-base/gconf-1.0.0 to /
[ebuild N  ] gnome-base/gnome-vfs-1.0.1 to /
[ebuild N  ] gnome-base/control-center-1.4.0.1 to /
[ebuild N  ] gnome-base/scrollkeeper-0.2 to /
[ebuild N  ] dev-util/xml-i18n-tools-0.8.1 to /
[ebuild N  ] gnome-base/libglade-0.16-r1 to /
[ebuild N  ] gnome-base/gnome-core-1.4.0.4 to /
[ebuild N  ] net-irc/xchat-1.4.3 to /
</pre>

<p>Som du kan se, så genkender emerge, med <c>gnome</c> tilføjet til 
<c>USE</c>, at xchat skal have valgfri understøttelse for GNOME. For at valgfri 
understøttelse af GNOME kan bruges, kræves det selvfølgelig, at GNOME er installeret.
<c>emerge</c> regner selv alt dette ud, og tilføjer forskellige afhængigheder, 
som kræves af GNOME, til dens liste over ebuilds, der skal installeres. Der 
kan, fra tid til anden forekomme situationer, hvor din <c>USE</c> variabel ikke er 
indstillet korrekt, og derved får <c>emerge</c> til uforventet at inkludere eller 
ekskludere understøttelse for forskellige valfrie udvidelser. Det er derfor jeg anbefaler, at du altid kører en <c>emerge --pretend</c> før du kører den egentlige <c>emerge</c>, 
specielt for nye, ukendte ebuilds. På den måde ved du altid hvad du skal forvente dig. :) Når alting ser OK ud, kan du gå videre til den egentlige <c>emerge</c> ved at fjerne 
<c>--pretend</c> muligheden:</p>

<pre caption = "Installere xchat">
# <c>emerge xchat</c>
</pre>

<p>Efter alle afhængigheder er installeret (hvis der var nogle; ikke 
alle pakker hardem), vil kildekoden til xchat blive downloadet (til
<path>/usr/portage/distfiles</path>), testet, udpakket, kompileret og
installeret til en midlertidig mappe kaldet sandbox. Så vil de blive 
installeret ind i det lokale filsystem, og en pakkedatabase vil blive oprettet i
<path>/var/db/pkg/net-irc/xchat-1.4.3/CONTENTS</path>, indeholdende de 
filer som er blevet installeret, samt md5sums for alle filerne.</p>

<p>
Hvis du vil se hvilke USE-flag du kan bruge sammen med en bestemt 
pakke, og hvilke der er slået til på dit system, tilføj <c>-v</c> eller
<c>--verbose</c> argumentet til <c>emerge -p</c>:
</p>

<pre caption = "Brug af emerge med --verbose">
# <i>emerge -pv gentoo-sources</i>

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild    U ] sys-kernel/gentoo-sources-2.4.20-r5 -build +crypt -evms2 
-aavm -usagi 
</pre>

</body>
</section>
<section>
<title>At finde ud af hvad der har ændret sig</title>
<body>

<p>
Hvis du vil finde ud af, hvad der her ændret sig mellem dem 
pakke-version du har installeret, og den som er tilgængelig i Portage, skal du tilføje
<c>--changelog</c> eller <c>-l</c> argumentet:
</p>

<pre caption = "Visning af ChangeLog">
# <i>emerge -pl mozilla</i>

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild    U ] net-www/mozilla-1.3-r1 [1.2.1-r5] 

*mozilla-1.3-r1

  22 Mar 2003; Martin Schlemmer &lt;azarah@gentoo.org&gt; 
mozilla-1.3-r1.ebuild :
  Add Gtk2 patch.  Add default/prefs/xft.js when Xft is enabled.  Some 
other
  long overdue cleanups.

*mozilla-1.3

  21 Mar 2003; Jay Kwak &lt;jayskwak@gentoo.org&gt; mozilla-1.3.ebuild 
:
  Add XIM input patch for GTK
             
  18 Mar 2003; Martin Schlemmer &lt;azarah@gentoo.org&gt; 
mozilla-1.3.ebuild :
  New version.

  13 Mar 2003; Olivier Reisch &lt;doctomoe@gentoo.org&gt; 
mozilla-1.2.1-r5.ebuild :
  Marked ppc stable

*mozilla-1.3_beta

  23 Feb 2003; Martin Schlemmer &lt;azarah@gentoo.org&gt; 
mozilla-1.3_beta.ebuild :
  New version.

</pre>

</body>
</section>
</chapter>
<chapter>
<title>Opgradering af pakker</title>
<section>
<body>

<p>Standard-måden at opdatere en pakke i Portage er at bruge <c>emerge 
--update</c>
eller <c>emerge -u</c>.
</p>

<pre caption = "Brug af emerge -u">
# <c>emerge -u xchat</c>
</pre>

<p>
Portage bruger hvad man kalder en "sikker" afinstallation; den fjerner 
kun originale filer. Hvis en fil er blevet overskrevet eller ændret på 
nogen måde, bliver den efterladt i filsystemet (Du har formodentlig installeret en 
nyere version af pakken). Så, hvis du afinstallerer en ældre version af xchat efter 
du har installeret en nyere version, vil xchat programfilen ikke blive slettet fra dit 
filsystem, da det har et nyere tidsstempel og en forskellig md5sum. Sikker 
afinstallation er virkelig godt, fordi det sikrer at en version af programmet er tilgængelig til en hver tid.
Hvis du var nød til at afinstallere først, så ville xchat ikke være 
tilgængelig i de få minutter der går, mens den nye version downloades, kompileres,
installeres og flettes ind.</p>

<impo>Portage har fået en speciel funktion, som kaldes "config file 
protection". Formålet med denne funktion er, at forhindre nye pakkeinstallationer i 
at overskrive eksisterende konfigurationsfiler. Config file protection er som 
standard slået til for /etc og KDE konfigurations mapperne; flere bliver måske tilføjet i fremtiden. Skriv
<c>emerge --help config</c> for flere detaljer.</impo>
</body>
</section>
</chapter>

<chapter>
<title>At få fat i blokkerede pakker</title>
<section>
<body>
 
<p>
Nogle af de pakker der pt. er installeret kan sometider blokkere
installationen af andre pakker. Dette kan ske når funktionaliteten af
en pakke er flyttet til en anden pakke eller når to pakker er
inkompatible. En blokkerende pakke skal fjernes fra systemet før at
den blokkerede pakke kan emerges.
</p>
  	 
<pre caption = "At emerge en pakke der er blokkeret">
# <i>emerge -pv libbonobo</i>
  	 
These are the packages that I would merge, in order:
  	 
Calculating dependencies ...done!
[blocks B     ] gnome-base/bonobo-activation (from pkg gnome-base/libbonobo-2.4.0)
[ebuild     U ] gnome-base/ORBit2-2.8.1 [2.6.3] -doc +ssl
[ebuild     U ] gnome-base/libbonobo-2.4.0 [2.2.3] -doc
 </pre>
  	 
<p>
I det ovenfor viste eksempel blokkerer pakken
bonobo-activation installationen af libbonobo-2.4.0.
</p>
  	 
<pre caption = "At fjerne en pakke der blokkerer fra systemet">
# <i>emerge -C bonobo-activation</i>
# <i>emerge libbonobo</i>
</pre>
  	 
<p>
At fjerne bonobo-activation fra systemet vil tillade
libbonob-2.4.0 at emerge med succes.
</p>
  	 
<impo>
At lave en unmerge (<c>emerge -C</c>) vil fjerne en pakke
også selvom at den er en afhængighed til andre pakker, dette
kan ødelægge systemet.
</impo>
</body>
</section>
</chapter>


<chapter>
<title>At Kontrollere Portage's Opførsel</title>
<section>
<body>

<p>
Hvis du vil ændre Portage's opførsel, så skal du ændre
<path>/etc/make.conf</path>. Den indeholder variabler (eller eksempler
for variabler), som du kan definere for at ændre Portage's opførsel.
For eksempel, hvis du vil ændre måden Portage downloader kildekode,
så skal du ændre <c>FETCHCOMMAND</c> til det som passer dig.
</p>

<p>
<path>/etc/make.conf</path> indeholder mange eksempler af variable
indstillinger, som du skulle kunne regne ud, hvordan de skal defineres.
Du burde også tage et kig i manualen til <path>make.conf</path>
(<c>man make.conf</c>) og, hvis du vil dykke dybere ned i Portages
verden, læse <uri link="/doc/en/portage-manual.xml">Portage 
Manualen</uri> (engelsk).
</p>

<p>
Hvis du har brug for at ændre en variabel for kun denne ene kørsel, så
kan du sætte den som en miljøvariabel i stedet for at ændre 
<path>/etc/make.conf</path>
to gange. For eksempel vil <c>AUTOCLEAN="no" emerge kde</c> kun slå
autocleaning fra under <c>emerge kde</c>.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Hvad er "masked" pakker?</title>
<section>
<body>
<p>
Mange folk er nysgerrige overfor hvorfor pakker, som for nyligt er 
blevet frigivet ikke er inkluderet når de kører <c>emerge -u world</c>. Et godt 
eksempel på dette er xfree-4.3.0 (Nyeste versionen da dette blev skrevet). Hvis du kører <c>emerge sync</c>
efterfulgt af <c>emerge -u world</c>, vil du ikke se xfree som en 
opdatering. Hvorfor er det sådan?
</p>
<p>
Grunden er, at visse pakker bliver markeret som "masked"--det vil side, 
at pakken ikke automatisk opgraderes eller bliver installeret, med mindre 
du helt bevidst prøver derpå. For en forklaring af hvordan man slår 
installation af skjulte pakker til, vil vi anbefale dig at besøge <uri
link="http://forums.gentoo.org/viewtopic.php?t=33534">Masked Packages
FAQ</uri> i vores <uri link="http://forums.gentoo.org/">Gentoo 
Forums</uri>.
</p>

</body>
</section>
</chapter>
</guide>
