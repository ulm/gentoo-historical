<?xml version='1.0' encoding="euc-kr" ?>
<?xml-stylesheet href="xsl/guide.xml" type="text/xsl"?>

<guide>
<title>젠투 리눅스의 또 다른 설치방법</title>

<author title="Author"><mail link="lordviram@rebelpacket.net">
	Travis Tilley</mail>
</author>

<author title="Contributor"><mail link="davoid@gentoo.org">
	Faust A. Tanasescu</mail>
</author>

<author title="번역"><mail link="ychi1129@hanmail.net">
	ychi1129</mail>
</author>

<author title="번역"><mail link="eminency@irg.ssu.ac.kr">
	박종영(eminency)</mail>
</author>

<author title="Moderator"><mail link="seo@gentoo.org">
Jungmin Seo</mail>
</author>

<abstract>
이 문서는 CD롬 드라이브가 없거나 CD부팅이 지원 안되는 컴퓨터라서 다른 설치 방법이 필요한 사람들에게 
또 다른 젠투 리눅스 설치법을 설명한다.
</abstract>

<version>1.0</version>
<date>12 July 2002</date>

<chapter>
<title>이 문서에 관해</title>

	<body>
	<p>만약 일반적인 CD 부팅 설치법을 쓸 수 없거나 그 방법이 맘에 들지 않는다면 또 다른 설치 방법이 여기에 있다. 이 문서는 
	CD 설치법의 대안(代案)들을 제공한다. 혹은 당신이 좋아하는 다른 특별한 방법이 있다면 이 문서에 그것을 집어넣을 
	수도 있다. 만약 자신만의 쓸만한 설치 방법이 있거나, 재미있는 젠투 설치방법을 연구해 왔다면 주저말고 
	<mail link="lordviram@rebelpacket.net">나에게 보내주기 바란다</mail>(역주 - 글 원저자의 메일 링크임. 
	저에게 보내지 마세요 -_-).</p>
	</body>

</chapter>

<chapter>
<title>네트워크 부팅 설치</title>

<section>
<title>준비사항</title>

	<body>
	<p>네트워크 부팅 설치를 하려면 우선 호스트 컴퓨터가 tftp 서버를 지원해야 하며 설치할 컴퓨터는 바이오스에서 네트워크
	부팅을 지원하거나 GRUB이나 다른 네트워크 부트로더를 부팅할 수 있도록 플로피 드라이브가 있어야 한다(역주 - 다시 말하면
	설치 컴퓨터 외에 서버로 쓸 컴퓨터 하나가 더 필요함). 또한 DHCP 서버도 필요하며, 최근의 젠투 ISO 이미지도 물론 
	있어야 한다. ISO 파일은 <uri>http://www.ibiblio.org/gentoo/snapshots/build/</uri>에서 받을 수 있다.</p>
	</body>

</section>

<section>
<title>개요</title>

	<body>
	<p>네트워크에서 이미지를 읽어오기 위해서는 호스트 컴퓨터에 ip가 있어야 한다. ip를 얻는 방법은 여러가지가 있겠지만 
	무엇이든 상관없다. 그리고 개인적으로는 GRUB을 사용하는 것을 좋아하지만, 당신의 컴퓨터가 네트워크 부팅을 지원한다면 
	굳이 필요하지는 않다. bootp나 dhcp서버로 세팅하는 것보다 GRUB의 <c>ifconfig</c> 명령을 사용하는 것이 훨씬 쉽기는 
	하지만 말이다. :)</p>

	<p>당신의 컴퓨터가 ip 어드레스를 얻었다면 다음으로 해야 될 일은 어떤 커널로 부팅하고 어디에 있는 것을 쓸 지를 결정하는
	일이다. 다시 말하지만, bootp나 dhcp서버를 세팅하는 것보다는 GRUB를 사용하는 것이 제일 쉽다. 그리고 어떤 방법으로 initrd
	(역주 - 부팅시에 생성되었다 사라지는 램디스크. 실제 루트 파일시스템을 마운트하기 전까지는 이것이 루트 파일시스템을 
	대신한다)를 얻으며 그것이 루트 파일시스템으로 쓰일 것이라는 사실을 어떻게 커널에게 알려 줄 지도 결정해야 한다.</p>

	<p>커널이 로드되고 루트 파일시스템이 마운트되면, 보통의 설치방법으로 설치하면 된다. 빌드 이미지는 cd로부터 
	로드할 수도 있고 ftp로 다운받을 수도 있다.</p>
	</body>

</section>

<section>
<title>GRUB 사용하기</title>

	<body>
	<p>네트워크 부팅을 위해 GRUB을 사용하려면 당신의 네트웍 카드를 지원하는 컴파일된 GRUB을 먼저 구해야 한다. 플로피든 
	하드디스크든 어디에 설치하는 지는 상관없다. 이미 네트웍을 지원하도록 설치된 GRUB이 어디에든 있다면 첫번째 단계는 
	이미 끝낸 것이다. GRUB은 <uri>ftp://alpha.gnu.org/gnu/grub/</uri>에서 다운받을 수 있다.</p>

	<p>본인의 컴퓨터에 달린 네트웍 카드인 튤립을 설정하는 예제이다 :</p>

<pre caption="수동 GRUB 설치">
# <i>configure --enable-tulip --prefix=/usr</i>
# <i>make &amp;&amp; make install</i>
</pre>

	<p>지금 젠투를 부팅한 상태이고 젠투의 툴들을 이용해 GRUB을 설치하려 한다면 네트웍 카드 설정을 위한 다음 명령들을 
	순서대로 실행하면 된다. ebuild를 이용하여 튤립을 지원하도록 GRUB을 설치하는 예제이다 :</p>

<pre caption="젠투에서 GRUB을 설치 및 설정하기">
# <i>ebuild /usr/portage/sys-apps/grub/grub-0.91.ebuild clean fetch unpack</i>
# <i>cd /var/tmp/portage/grub-0.91/work/grub-0.91/</i>
# <i>./configure --prefix=/usr --sbindir=/sbin --mandir=/usr/share/man \ </i>
> <i>--infodir=/usr/share/info --enable-tulip</i>
# <i>make</i>
# <i>touch /var/tmp/portage/grub-0.91/.compiled</i>
# <i>cd /usr/portage/</i>
# <i>ebuild sys-apps/grub/grub-0.91.ebuild install merge</i>
</pre>

	<p>이제 GRUB 쉘이 설치됐으니 GRUB을 부트 섹터에 설치해야 한다. 혹시 당신이 GRUB을 젠투를 설치할 컴퓨터의 하드 
	디스크에 설치하는 것이 가능하다 해도 이 문서에서는 부트 플로피에 GRUB을 설치한다고 가정한다. 
	여기엔 두 가지 방법이 있다. GRUB 쉘에서 직접 작업하는 방법과 <i>grub-insall</i>이라는 스크립트를 이용하는 방법이다. 
	플로피에 설치를 한다면 <i>grub-install</i>을 사용하는 것이 더 나을 것이다.</p>

<pre caption="grub-install 사용 예제">
# <i>mkfs.ext2 /dev/fd0</i>
# <i>mount /dev/fd0 /mnt/floppy/</i>
# <i>grub-install --root-directory=/mnt/floppy/ '(fd0)'</i>
# <i>umount /mnt/floppy/</i>
</pre>

	<p><i>grub-install</i>은 항상 잘 동작하는 것은 아니며 GRUB을 설치하는 가장 좋은 방법이라고 할 수는 없다. GRUB 쉘은
	부팅될 때의 GRUB과 같은 방식으로 작업을 하기 때문에 더 바람직할 것이다. 다음은 GRUB 쉘을 사용하여 
	플로피에 GRUB을 설치하는 예제이다 :</p>

<pre caption="GRUB쉘 사용 예제">
# <i>mkfs.ext2 /dev/fd0</i>
# <i>mount /dev/fd0 /mnt/floppy/</i>
# <i>mkdir -p /mnt/floppy/boot/grub/</i>
# <i>cp -v /usr/share/grub/i386-pc/* /mnt/floppy/boot/grub/</i>
# <i>grub</i>
grub> <i>root (fd0)</i>
grub> <i>setup (fd0)</i>
grub> <i>quit</i>
# <i>umount /mnt/floppy/</i>
</pre>

	<p>이제 부팅가능한 GRUB 플로피가 생겼으니 커널과 initrd 로딩을 위해 호스트 컴퓨터의 tftp서버를 세팅하자
	(netkit의 tftp서버를 추천한다). 만약 inetd를 쓴다면 /etc/inetd.conf에 다음의 한 줄을 추가한다 :</p>


<pre caption="/etc/inetd.conf">
tftp	dgram	udp	wait	nobody	/usr/sbin/tcpd	in.tftpd
</pre>

	<p>젠투 리눅스에서 netkit의 tftp 서버를 설치하려면, net-misc/netkit-tftp를 emerge한다.</p>

	<note>물론 xinetd의 ebuild도 존재한다. 그냥 편한대로 xinetd를 쓰고 싶다면 그렇게 해도 좋다. 하지만
	난 xinetd를 쓰지 않으며 xinetd에서 tftp설정 방법도 알지 못한다. 만약 xinetd를 사용한다면, 작업하는 방법과 함께
	이 문서에 그 정보를 추가할 수 있도록 메일을 보내주기 바란다.</note>

	<p>이제 tftp서버도 준비가 되었고, 거기에 올려 놓을 커널과 루트 initrd가 필요하다. 당신은 자신만의 커스텀한 커널을
	컴파일해 놓을 수도 있지만, 그 커널은 젠투에 쓰일 것이며(devfs 등) 네트워크 부팅용이라는 것을(initrd지원 등)
	명심하라. 루트 initrd는 젠투 ISO 파일에 rescue.gz으로 들어가 있다.</p>

	<impo>CD로 굽지 않고 ISO파일을 마운트 하려면 루프백(loopback) 파일시스템 지원이 필요하다.</impo>

<pre>
# <i>mkdir /tftpboot</i>
# <i>mount -o loop /path/to/build-ix86-1.0_rc6-r14.iso /mnt/cdrom/</i>
# <i>cp /mnt/cdrom/isolinux/kernel /mnt/cdrom/isolinux/rescue.gz /tftpboot</i>
# <i>chmod 644 /tftpboot/*</i>
# <i>umount /mnt/cdrom/</i>
</pre>

	<p>이제 당신의 유용하기 그지없는 GRUB 플로피로 부팅을 해보자. 부팅을 하고나면 머신이 IP를 획득하는 것과 커널을
	얻는 곳, 옵션, initrd를 얻는 곳 등을 결정해야 할 것이다.</p>

<pre>
grub> <i>ifconfig --address=192.168.0.10 --server=192.168.0.2</i>
grub> <i>root (nd)</i>
grub> <i>kernel /tftpboot/kernel devfs=nomount vga=normal load_ramdisk=1</i>
      <i>prompt_ramdisk=0 ramdisk_size=18580 root=/dev/ram0 rw</i><comment>(윗 줄과 합쳐서 한 줄임)</comment>
grub> <i>initrd /tftpboot/rescue.gz</i>
grub> <i>boot</i>
</pre>

	<note>grub으로 ip를 설정할 때 bootp나 dhcp를 사용할 수도 있다. bootp와 dhcp명령어를 사용하라.</note>

	<p>머신이 부팅되면, 일반적인 설치방법으로 설치할 수 있다. 여기서부터는 CD 설치 문서를 참조하라.</p>
	</body>

</section>
</chapter>

<chapter>
<title>설치된 다른 리눅스 배포판으로 젠투 설치하기</title>

<section>
<title>요구 사항</title>

	<body>
	<p>이미 설치된 배포판을 이용해 젠투를 설치하려면 chroot명령이 사용가능해야 하며 설치를 하려는 버전의 젠투 설치 CD의 
	tarball이나 ISO파일이 있어야 한다. 기본 tarball외에 다른 것들도 원한다면 네트워크 연결도 가능해야 할 것이다(tarball이란
	.tbz나 .tar.gz로 끝나는 파일을 말한다). 필자는 주 배포판으로 레드햇 7.3을 썼지만 어떤 것이든 상관없다. 시작해보자!</p>
	</body>

</section>

<section>
<title>개 요</title>

	<body>
	<p>우리는 현재의 리눅스 파티션 크기를 재조정하여 젠투를 위한 파티션을 할당하고, 파티션을 마운트하고, tarball을 풀어넣고,
	그 프로토 시스템에 chroot으로 들어간 후, 젠투를 구축해야 한다. 그리고 bootstrap 스크립트 실행 과정이 끝난 후 
	부팅이 가능하도록 마지막 설정을 하면 재부팅 하고 젠투를 사용할 수 있다.</p>
	</body>

</section>

<section>
<title>젠투를 위한 공간을 어떻게 만드는가?</title>

	<body>
	<p>루트 파티션은 "/" 밑에 마운트된 파일 시스템이다. 내 시스템에서 옵션없이 마운트를 실행한 결과가 내가 말하고 있는 것을
	잘 보여준다. 우리는 또한 빈 공간이 얼마나 남아있고 어떻게 용량을 재조정할지 알아보기 위해 df(disk free)를 사용할 것이다.
	하지만 절대 루트 파티션만이 재조정 된다는 의미는 아니다! 다른 파티션도 용량을 조정하는 것이 가능하지만, 이에 대해선 
	나중에 언급하겠다.</p>

<pre caption="파일시스템 정보">
# <i>mount</i>
/dev/hdb2 on / type ext3 (rw) 
none on /proc type proc (rw) 
none on /dev/pts type devpts (rw,gid=5,mode=620) 
none on /dev/shm type tmpfs (rw) 
# <i>df -h</i>
Filesystem           Size Used Avail Use% Mounted on 
/dev/hdb2            4.0G 1.9G  2.4G  82% /
none		      38M    0    38M   0% /dev/shm 
</pre>

	<p>보다시피 "/"에 마운트된 /dev/hdb2란 파티션은 2.4G의 빈 공간이 있다. 나의 경우, 400M는 남겨두고 젠투에 2G를 할당할
	생각이다. 그 정도면 설치에 충분한 공간이므로 나쁘지 않다. 하지만 웬만한 유저들이라면 심지어 1G만으로도 
	충분할 것이다(역주 - 사람따라 다를 것 같은데 이것저것 많이 쓰는 사람이라면 2G도 모자랄 것 같다). 그러니 
	이대로 파티션을 하도록 하자.</p>
	</body>

</section>

<section>
<title>파티션 재조정을 위한 parted 설치</title>

	<body>
	<p>parted는 당신이 지금 이 순간에도 쓰는 소프트웨어를 만든, 전통적이고 우수하며 광범위한 프로젝트, GNU 재단에서 만든 
	유틸리티이다. 그 곳에서 만든 현재의 우리에게 아주 유용한 소프트웨어, parted(partition editor)는 
	<uri>http://www.gnu.org/software/parted/</uri>에서 구할 수 있다.</p>

	<note>파티션을 조정하는 다른 툴들도 물론 있지만 필자는 파티션 매직이라든가 기타 툴에 별 관심도 없고, 의심스럽기도 하다.
	다른 툴을 사용하는 것은 전적으로 독자들의 마음이다.</note>

	<p>앞에서 언급했던대로 당신이 조정하려는 파일시스템과 parted가 그 작업을 하는 것이 가능한지 살펴보라. 만약 불가능하다면
	당신은 운이 없는 편이므로 젠투에 필요한 공간을 만들기 위해 파티션 하나를 날리고 배포판을 재설치 해야 될 것이다. 빨리 
	소프트웨어를 다운받고 설치하기 바란다. 여기서 문제가 하나 생긴다. 우리는 루트 파티션을 조정해야 하므로 플로피 디스크에 
	미니 리눅스를 만든 후 그것으로 부팅해야만 하며 "/"를 조정하기 위해 컴파일된 parted도 디스켓에 카피해 넣어야 한다. 하지만
	만약 리눅스에 있는 상태로 언마운트가 가능하다면 운 좋게도 다음에 나오는 것들을 실행할 필요가 없다(역주 - 다시 말하면 
	루트 파일 시스템이 아닌 다른 파티션의 빈 공간을 쓰기로 한 경우). 단지 용량을 조정할 파티션을 언마운트하고 parted를 실행
	시키기만 하면 된다. 다음은 내 시스템에서 어떻게 작업을 했는지에 대해 설명한 것이다.</p>

	<impo>당신의 파티션에서 실행할 작업들은 parted에서 가능하다는 것을 염두에 두기 바란다.</impo>

	<p><uri>http://freshmeat.net/tomsrtbt"</uri>에서 tomsrtbt 패키지를 받아서(공짜다) 패키지에 들어있는 문서에 따라
	플로피 디스크를 만든 후 다음 단계를 위해 새로운 플로피 디스크를 드라이브에 집어넣도록 한다.</p>

	<note>리눅스는 '어떤 문제를 해결하는 데는 하나 이상의 방법이 있다'는 말을 상징하기도 한다. 당신의 목적은 언마운트된
	파티션에 parted를 실행하는 것이고 지금 설명하는 방법으로 가능한 일이다. 하지만, tomsrtbt가 아닌 다른 패키지를 쓸 수도
	있다. 심지어 새로이 파티션을 할 파일 시스템을 언마운트하고 parted만 실행할 수 있다면 이 과정 자체가 필요치 않을 수도 
	있다.</note>

<pre caption="유틸리티 디스크 포맷">
# <i>mkfs.minix /dev/fd0</i>
480 inodes
1440 blocks
Firstdatazone=19 (19)
Zonesize=1024
Maxsize=268966912
</pre>

	<p>이제 parted의 설치를 할 것이다. 아직 다운로드와 압축 해제를 하지 않았다면 지금 실행한 후 그 디렉토리로 
	'cd'하기 바란다. 이제 유틸리티를 빌드하고 플로피에 옮기기 위해 아래 명령들을 실행한다.</p>

<pre caption="유틸리티 디스크 만들기">
# <i>mkdir /floppy; mount -t minix /dev/fd0 /floppy &amp;&amp; </i>
<i>export CFLAGS="-O3 -pipe -fomit-frame-pointer -static" &amp;&amp; ./configure</i>
<i>&amp;&amp; make &amp;&amp; cp parted/parted /floppy &amp;&amp; umount /floppy</i>
</pre>

	<p>축하! 이제 재부팅 한 후 새로이 파티션을 할 준비가 된 것이다. 이 작업은 GNU 웹사이트의 parted문서를 읽어본 후에 하기
	바란다. 용량을 재조정하는 작업은 용량이 큰 하드디스크라면 30분정도 걸릴 수도 있으므로 인내심을 갖기 바란다
	(역주 - 젠투 설치 시간에 비하면 별로 긴 것도 아니죠? -_-). 이제 tomsrtbt 디스켓으로 재부팅을 한다. 로그인 했다면 
	위에서 만들었던 유틸리티 디스크로 바꿔 끼우고 'mount /dev/fd0 /floppy'를 실행하여 /floppy밑에 parted가 마운트되게 한다. 
	이제 시작하자. parted를 실행시키고 파티션을 재조정할 수 있을 것이다. 이 긴 작업이 끝나고나면, 우리는 
	젠투를 설치함으로써 진정한 재미를 얻을 수 있다. 이제 원래 깔려 있던 리눅스로 재부팅하자. 당신이 작업할 드라이브는 
	용량을 재조정하기 위한 파티션이 있는 드라이브다. 예를 들어 해당 파티션이 /dev/hda3이라면 드라이브는 /dev/hda가 된다.</p>

<pre>
# <i>mount /dev/fd0 /floppy</i>
# <i>cd /floppy; ./parted [drive you wish to operate on]</i>
(parted)  <i>print</i>
Disk geometry for /dev/hdb: 0.000-9787.148 megabytes
Disk label type: msdos
Minor    Start       End     Type      Filesystem  Flags
1          0.031   2953.125  primary   ntfs        
3       2953.125   3133.265  primary   linux-swap  
2       3133.266   5633.085  primary   ext3        
4       5633.086   9787.148  extended              
5       5633.117   6633.210  logical               
6       6633.242   9787.148  logical   ext3        
(parted)  <i>help resize</i>
  resize MINOR START END        resize filesystem on partition MINOR

        MINOR is the partition number used by Linux.  On msdos disk labels, the
        primary partitions number from 1-4, and logical partitions are 5
        onwards.
        START and END are in megabytes
(parted)  <i>resize 2 3133.266 4000.000</i>
</pre>

	<impo>인내심을 가져라, 당신의 컴퓨터는 일하고 있다! 제대로 돌아가고 있는지 알고 싶다면 당신의 컴퓨터 케이스에 달린 
	하드디스크 램프를 보도록 해라. 이 작업은 최소 2분에서 30분 정도 걸릴 것이다.</impo>

	<p>파티션 용량을 재조정 했다면, 설명한대로 당신의 원래 깔려 있는 리눅스로 재부팅한다. 그리고 
	<uri>http://www.gentoo.org/doc/build.html</uri>(한글 문서 : <uri>http://gentoo.or.kr/docs/build-ko.html</uri>)의 
	문서를 보고 6,7,9-17단계를 수행한다. 재밌게 즐기길!</p>

	</body>

</section>
</chapter>
</guide>
