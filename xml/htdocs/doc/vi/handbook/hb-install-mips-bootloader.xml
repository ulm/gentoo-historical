<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/vi/handbook/hb-install-mips-bootloader.xml,v 1.1 2005/04/02 19:16:06 neysx Exp $ -->

<sections>

<version>1.5</version>
<date>2004-10-23</date>

<section>
<title>MIPS PROM</title>
<subsection>
<body>

<p>
MIPS không yêu cần bạn cài đặt bootloader. MIPS PROM sẽ thực hiện khởi
động, nhưng bạn cần cài đặt kernel là một tùy chọn sống còn.
</p>

<p>
Trước hết, hãy cài đặt <c>dvhtool</c>, cần dùng để chép kernel vào SGI
Volume Header.
</p>

<pre caption="Cài đặt dvhtool">
# <i>emerge dvhtool</i>
</pre>

<p>
Giờ chép kernel vào SGI Volume Header. Mặc định <c>dvhtool</c> giả
định rằng SGI Volume Header nằm ở <path>/dev/sda</path>. Nếu không
đúng (ví dụ khi IRIX được cài đặt trên <path>/dev/sda</path> và
Gentoo/MIPS nằm trên <path>/dev/sdb</path>) bạn cần thông báo cho
<c>dvhtool</c> bằng cách dùng <c>-d &lt;device&gt;</c>.
</p>

<pre caption="Chép kernel vào SGI Volume Header">
# <i>dvhtool --unix-to-vh &lt;tên kernel trong /boot&gt; &lt;tên bạn
muốn dùng trong volume header&gt;</i>
</pre>

<p>
Nếu bạn muốn xem mọi mục trong volume, dùng
<c>--print-volume-directory</c>:
</p>

<pre caption="Xem mọi mục trong volume">
# <i>dvhtool --print-volume-directory</i>
</pre>

<p>
Để thiết lập hệ thống khởi động Gentoo/MIPS, bạn cần tinh chỉnh vài
thiết lập trong MIPS PROM.
</p>

<p>
Hãy tiếp tục với <uri link="#reboot">Khởi động lại hệ thống</uri>.
</p>

</body>
</subsection>
</section>
<section id="reboot">
<title>Khởi động lại hệ thống</title>
<subsection>
<body>

<p>
Hãy thoát khỏi môi trường chroot và unmount toàn bộ các phân vùng. Sau
đó gõ lệnh bạn đã đợi từ lâu: <c>reboot</c>.
</p>

<pre caption="Thoát khỏi chroot, unmount toàn bộ phân vùng và khởi
động lại">
# <i>exit</i>
cdimage ~# <i>cd</i>
cdimage ~# <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
cdimage ~# <i>reboot</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Tinh chỉnh MIPS PROM</title>
<subsection>
<body>

<p>
Khi bạn đã khởi động lại, hãy vào <e>System Maintenance Menu</e> và
chọn <e>Enter Command Monitor</e> (<c>5</c>). Nếu bạn muốn kiểm tra
bản cài đặt Gentoo của mình, bạn có thể chỉ cần chạy <c>boot -f
&lt;tên kernel&gt;</c>. Để luôn khởi động hệ thống với Gentoo, bạn cần
đặt vài biến trong MIPS PROM:
</p>

<pre caption="Cấu hình PROM để khởi động Gentoo">
1) Start System
2) Install System Software
3) Run Diagnostics
4) Recover System
5) Enter Command Monitor

Option? <i>5</i>
Command Monitor.  Type "exit" to return to the menu.

<comment>(&lt;root device&gt; = Phân vùng gốc của Gentoo, vd /dev/sda3)</comment>
&gt;&gt; <i>setenv OSLoadPartition &lt;root device&gt;</i>

<comment>(Liệt kê danh sách kernel, gõ "ls")</comment>
&gt;&gt; <i>setenv OSLoader &lt;tên kernel&gt;</i>
&gt;&gt; <i>setenv OSLoadFilename &lt;tên kernel&gt;</i>

<comment>(Khai báo tham số kernel)</comment>
&gt;&gt; <i>setenv OSLoadOptions &lt;các tham số kernel&gt;</i>

<comment>(Cung cấp vị trí Volume Header)</comment>
&gt;&gt; <i>setenv SystemPartition scsi(0)disk(1)rdisk(0)partition(8)</i>

<comment>(Tự động khởi động Gentoo)</comment>
&gt;&gt; <i>setenv AutoLoad Yes</i>

<comment>(Đặt múi giờ)</comment>
&gt;&gt; <i>setenv TimeZone EST5EDT</i>

<comment>(Dùng serial console - nếu dùng đồ họa thì dùng "g" thay vì
"d1" (một))</comment>
&gt;&gt; <i>setenv console d1</i>
</pre>

<p>
Giờ bạn đã sẵn sàng để vui với Gentoo! Hãy khởi động Gentoo và hoàn
tất cài đặt với <uri link="?part=1&amp;chap=11">Hoàn tất cài đặt
Gentoo</uri>.
</p>

</body>
</subsection>
</section>
</sections>
