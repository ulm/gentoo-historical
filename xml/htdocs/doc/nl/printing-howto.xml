<?xml version='1.0' encoding="UTF-8"?> 
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>

<!-- 
Last used revision: 1.5
Master document: English version
-->

<guide link = "/doc/nl/printing-howto.xml"> 
<title>Gentoo's Handleiding in het Printen</title> 
<author title="Author">
    <mail link="zhen@gentoo.org">John P. Davis</mail>
</author>
<author title="Copyeditor">
    <mail link="sunflare@gentoo.org">Phil Bordelon</mail>
</author>
<author title="Translator">
    <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
 
<abstract>
Dit is een handige, overzichtelijke handleiding voor Gentoo Linux
gebruikers. Ze legt uit hoe je je printer configureert, zowel voor
lokale als netwerkprinters.
</abstract>

<version>1.0.2</version> 
<date>27 Maart 2003</date> 
 
<chapter> 
<title>Lokaal printen via CUPS</title> 
<section> 
<title>Installatie via CUPS</title> 

<body> 
 
<p>
Het opstellen van printers onder Gentoo Linux is betrekkelijk
eenvoudig aangezien alle benodigde packages in Portage zitten.
Het enige wat we moeten doen is de printer configureren en
ervoor zorgen dat deze PostScript correct interpreteert. De
eerste stap is het installeren van de nodige software.
</p> 

 
<note>
De volgende stappen veronderstellen dat we het printen configureren
vanuit GNOME2. Dit werkt tevens vanuit KDE, aangezien CUPS
omgevingsonafhankelijk is.
Nog te doen: expliciete uitleg voor KDE.
</note> 
 
<p>
Indien je exclusief CUPS zal gebruiken, ongeacht de desktop
omgeving, dan is het een goed idee om CUPS toe te voegen aan je
USE variabele in <path>/etc/make.conf</path>.
</p>

<pre caption = "Aanpassen van /etc/make.conf">
<comment>Voeg <i>cups</i> toe aan je USE variabele lijst.</comment>
USE="cups"
</pre>

<p>
Voor meer informatie aangaande USE variabelen, gelieve de <uri
link="http://www.gentoo.org/doc/nl/use-howto.xml">USE HOWTO</uri> te lezen.
</p>


<pre caption = "De nodige packages emergen"> 
# <c>emerge cups</c>  
# <c>emerge gnome-print</c> 
# <c>emerge libgnomeprint</c> 
# <c>emerge gimp-print</c> 
# <c>emerge gimp-print-cups</c>
# <c>emerge foomatic </c>
</pre> 
 
<p>
Aangezien de packages nu geinstalleerd zijn met de nodige
afhankelijkheden is het tijd om de printer te configureren.
</p>

<note>
Dit document gebruikt als voorbeeld de USB Hewlett Packard
printers, maar het configureren van een parallelle poort
printer verschilt niet echt veel van de USB configuratie.
Niet-HP printers installeren gebeurt analoog, enkel de drivers
zijn verschillend.
</note>

<p>
Tenzij je al USB Printer ondersteuning gecompileerd hebt in je
kernel is het nu nodig om dat te doen. Je moet USB Core Support
aanduiden, alsook USB Printer Support, dit ofwel als module,
ofwel direct ingebouwd. In dit voorbeeld neem ik een module
zodat ik gebruik kan maken van <c>lsmod</c> en dus kan zien of
de ondersteuning werkelijk in orde is, maar dit is puur een
persoonlijke aangelegenheid.
</p> 
 
<impo>
Indien je een parallelle poortprinter gebruikt, zorg er dan
voor dat je de parallelle poort kernelopties compileert in
plaats van de USB opties.
</impo> 
 
<note>
Indien je niet vertrouwd bent met het compileren van een
kernel, dan kan je altijd de officiele Linux Kernel-HOWTO
lezen op <uri>http://www.tldp.org/HOWTO/Kernel-HOWTO.html</uri>.
</note>

<p>
Nu dat de nodige kernelopties correct gecompileerd zijn, en de
kernel geboot is, is het tijd om te kijken of de printer
gedetecteerd is en correct geinitialiseerd. Eenmaal alles
gestart is zouden de printermodules geladen moeten zijn. Is dit
niet het geval, doe dat dan manueel als volgt:
</p> 
 
<pre caption = "De USB modules laden"> 
# <c>modprobe usbcore</c> 
# <c>modprobe printer</c> 
</pre> 

<note>
Indien je USB ondersteuning in je kernel gestoken hebt
(rechtstreeks, zonder module), dan moet je dit niet doen.
Analoge werking voor parallelle poortprinters (andere
modules!).
</note>

<p>
Nadat de modules correct geladen zijn is het tijd om de printer
in te steken en <path>/var/log/messages</path> te bekijken om
te zien of de printer gedetecteerd is.
</p> 
 
<pre caption = "Controle van Kernel Messages"> 
# <c>tail -f /var/log/messages</c> 
</pre> 
 
<p>
Je zou iets als volgt moeten zien:
</p>
   
<pre caption = "/var/log/messages">
<c>hub.c: USB new device connect on bus2/2, assigned device number 2 </c> 
<c>printer.c: usblp0: USB bidirectional printer dev 2 if 0 alt 1 proto 2 vid 0x03F0 pid 0x1104 </c>
</pre>    
 
<note>
Indien je een parallelle printer gebruikt, zorg er dan voor dat
deze al ingeplugged is en aangezet alvorens je je pc opstart.
Eenmaal het systeem opgestart is, voer dan <c>dmesg</c> uit en
kijk of je kernel je printer gedetecteerd heeft.
</note> 
 
<p>
Alvorens je je printer configureert met CUPS is het mogelijk de
printer al te testen met <i>cat</i>.
</p> 

<pre caption = "Printer testen met cat">
# <c>touch test.txt</c>
# <c>echo "Dag vriendjes. Dag vriendinnetjes :-)" > test.txt</c>
# <c>cat test.txt > /dev/usb/lp0 </c>

<i> Of, voor parallelle printers: </i>
# <c>cat test.txt > /dev/lp0 </c>
</pre>

</body> 
</section> 
 
<section> 
<title>PPD Bestand Configuratie</title> 

<body> 
<p>
Nu is het tijd om de printer met CUPS te configureren. Indien
je een HP Inkjet printer gebruikt moet je de <c>hpijs</c>
printer drivers emergen. Deze printerdriver zal de PostScript
interpretatie uitvoeren van de HP-printer.
Indien je een niet-HP printer gebruikt kan het zijn dat je
extra drivers van het internet moet gaan zoeken.
</p> 
 
<note>
De <c>hpijs</c> driver is enkel voor HP Inkjet printers. Indien
je een HP Laserjet gebruikt is er al ondersteuning voor in het
GNOME printersysteem. Indien je een niet-HP Inkjet printer
gebruikt, da dan direct verder naar de configuratie van de
printer in dit document.
</note> 
 
<pre caption = "Emerging hpijs"> 
# <c>emerge hpijs</c> 
</pre> 
 
<impo>
De documenatie van HP over de <c>hpijs</c> driver vind je op
<path>/usr/share/doc/hpijs-1.1</path>. De auteur raad <i>ten
zeerste</i> aan om dit te lezen.
</impo> 
 
<p> 
Om ervoor te zorgen dat je printer PostScript correct
interpreteert, heeft CUPS een PPD (Printer Postscript
Definition) bestand nodig. De eenvoudigste manier om een PPD
bestand aan te maken is met foomatic. Geef aan foomatic de
volgende commando's mee om je printer te configureren, en
verplaats dan het PPD bestand naar de correcte locatie.
</p>

<note>
Voor de printer ID verwacht foomatic een ID van zijn database
die je kan vinden in
<path>/usr/share/foomatic/db/source/printer</path>. Je moet je
printer ID vinden, en zijn exacte benaming gebruiken. Herinner
je er tevens aan dat dit hoofdlettergevoelig is.
</note>

<pre caption = "Gebruik maken van foomatic">
# <c>foomatic-configure -s cups -p printer ID -c print_device -n queue name -d hpijs </c>
# <c>mv /etc/foomatic/your.new.ppd /etc/cups/ppd </c>
</pre>
 
<impo>
Indien je een niet-HP printer gebruikt dan kan je nog steeds
gebruik maken van foomatic om je PPD te genereren. Gelieve de
footmatic documentatie te lezen die je <uri
link="http://www.linuxprinting.org/foomatic/USAGE">hier</uri> (Engels)
kan vinden, alsook de <uri
link="http://www.linuxprinting.org">linuxprinting.org</uri>
website.
</impo>

</body> 
</section> 
 
<section> 
<title>CUPS Configuratie</title> 
<body> 

<p>
Nu de printer zelf geconfigureerd is moet CUPS ingesteld
worden om de printer queue te beheren. CUPS kan geadresseerd
worden via een webinterface op poort 631, of via een
printerserver.
</p>

<impo>
CUPS bevat configuratiebestanden voor de daemon die
aangepast kunnen worden. Je kan die vinden op
<path>/etc/cups/cupsd.conf</path>.
</impo>

<pre caption = "CUPS toevoegen aan de default runlevel en herstarten">
# <c>rc-update add cupsd default</c>
# <c>/etc/init.d/cupsd start</c>
</pre>

<p>
De CUPS daemon zou nu moeten draaien, dus open je favoriete
browser en ga naar <uri link="http://localhost:631">hier</uri>.
</p> 

<p>
Hopelijk zal je begroet worden door de CUPS
configuratieschermen. Klik op <i>administration</i> bovenaan de
pagina, en geef je rootpaswoord in, of de naam van iemand in de
<i>lp</i> groep. Eenmaal ingelogged kan je op <i>Add
Printer</i> klikken onder de <i>printers</i> sectie. Vul de
naam van je printer in, de uitleg en de locatie van je printer.
Je moet je printernaam correct invullen (dezelfde als deze die
je aan foomatic gegeven hebt). Selecteer nu het apparaat
waaraan je printer geconnecteerd is. Selecteer de maker van je
printer, en ga verder. Op de volgende pagina kies je je printer
van de lijst.
</p>

<p>
De configuratie is nu klaar. Klik op de naam van je printer en
probeer een testpagina af te printen. Voila, je
printerconfiguratie is afgewerkt.
</p>

<note>
Indien de printer om een of andere reden niet werkt, ga dan
naar de directorie waar je CUPS ingesteld hebt om de logs te
bewaren, en lees <i>error_log</i>.
</note>
 
</body> 
</section>
</chapter>

<chapter>
<title>
Configureren van The Gimp, OpenOffice.org1.0 en AbiWord om via CUPS
te printen.
</title>
<section>
<title>The GIMP</title>
<body>

<p>
Laten we eerst The Gimp configureren, aangezien het gewoon pure
leute is. Open The Gump, open een bestaande afbeelding, of
start een blanco afbeelding. Rechterklik op de afbeelding en ga
naar <i>File/Print</i>. Het dialoog voor het printen zou
tevoorschijn moeten komen, en eenmaal het zover is, klik dan op
&quot;New Printer&quot;. Indien je printer nog niet vermeld is,
type dan de naam in van je printer, en selecteer je
printertype. Et voila, je bent nu klaar om vanuit The GIMP te
printen. Speel met de instellingen en veel plezier :)
</p>

</body>
</section>

<section>
<title>OpenOffice.org1.0</title>
<body>

<p>
Printen met OpenOffice.org1.0 is niet moeilijker. Ga naar
<path>OpenOffice.org1.0/program</path>, en voer <c>spadmin</c>
uit. Maak een nieuwe printer aan, en wanneer je gevraagd wordt
om een driver te selecteren, klik dan op <i>import</i> en ga
naar de locatie van je printers' PPD-bestand. In mijn geval is
dat <path>/etc/cups/ppd</path>. Gebruik de default
printercommando's, benoem de printer, selecteer ze als default
en je bent klaar om te vertrekken. Start OpenOffice.org1.0 en
ga naar het printscherm, en selecteer je printer.
Print een testpagina, en je bent klaar.
</p>

</body>
</section>

<section>
<title>Abiword</title>
<body>

<warn>
AbiWord segfaults en crasht met CUPS-1.1.15-r2. Het is
aangeraden om terug te keren naar een .14-serie aangezien dat
het probleem oplost.
</warn>

<p>
Nog te doen: Abiword ondersteuning.
</p>

</body>
</section>

<p>
Ondersteuning voor lokaal te printen is nu klaar. Laten we nu
eens kijken naar het netwerkprinten-gedeelte.
</p>

</chapter>

<chapter>
<title>Netwerkprinten met CUPS en SAMBA.</title>
<section>
<title>Printen naar een Windows Printer van een Linux Computer</title>
<body>

<p>
Allereerst moet SAMBA geinstalleerd zijn met de 2 volgende
netwerkprint-opties.
</p>

<pre caption = "SAMBA installeren">
# <c>emerge samba</c>
</pre>

<note>
Voor meer informatie aangaande SAMBA, lees de officiele SAMBA
HOWTO op <uri>http://www.tldp.org/HOWTO/SMB-HOWTO.html</uri>.
</note>

<p> 
Allereerst gebruiken we weer <i>foomatic</i> om de PPD
bestanden te maken van de afgelegen printer. Vergeet niet te
controleren of je printer wel Linux compatible is op
<uri>http://www.linuxprinting.org/printer_list.cgi</uri>.
Vertel nu aan <i>foomatic</i> waar en wat de printer is, en
verplaats dan de gegenereerde PPD-bestanden naar de correcte
locatie.
</p>

<pre caption = "foomatic met Samba gebruiken">
# <c>foomatic-configure -s cups -p printer ID -c smb://user:password@server/share -n queue name -d hpijs </c> 
# <c>mv /etc/foomatic/je.nieuwe.ppd /etc/cups/ppd </c>
</pre>

<p>
Ga nu met je favoriete webbrowser naar <uri
link="http://localhost:631">hier</uri> om de CUPS configuratie
GUI naar voor te brengen. Volg de bovenvermelde stappen om een
printer toe te voegen, maar als ze nu vragen waar de printer
staat, geef dan <i>smb://user:password@server/share</i> in.
Dit maakt duidelijk aan CUPS dat de printer op de Windows
machine staat.
</p>

</body>
</section>

<section>
<title>
Linux gebruiken als een Windows compatibele Printserver</title>
<body>

<p>
Linux kan een prachtige printserver zijn, maar jah,
Linux is dan ook gewoon prachtig. Het eerste wat je moet doen is
<path>/etc/samba/smb.conf</path> aanpassen aan je eigen noden.
Het <i>smb.conf</i>-bestand bevat alle instellingen die je
Linuxpc zullen doen lijken alsof ze een Windows NT server is.
Ik heb een voorbeeld <i>smb.conf</i> bijgeleverd. Pas deze aan
naar je eigen noden.
</p>

<pre caption = "Voorbeeld smb.conf">
<c>[global]</c>

      <c>workgroup = YOUR_WORKGROUP</c>
      <c>server string = Gentoo Linux Server</c>
      <c>encrypt passwords = True</c>
      <c>security = user</c>
      <c>smb passwd file = /etc/samba/private/smbpasswd</c>
      <c>log file = /var/log/samba/log.%m</c>
      <c>socket options = IPTOS_LOWDELAY TCP_NODELAY</c>
      <c>domain master = Yes</c>
      <c>local master = Yes</c>
      <c>preferred master = Yes</c>
      <c>os level = 65</c>
      <c>dns proxy = No</c>
      <c>name resolve order = lmhosts host bcast</c>
      <c>bind interfaces only = True</c>
      <c>interfaces = eth0</c>
      <c>hosts deny = ALL</c>
      <c>hosts allow = 192.168.1.4 127.0.0.1 (list of allow hosts here) </c>
      <c>debug level = 1</c>
      <c>create mask = 0644</c>
      <c>directory mask = 0755</c>
      <c>level2 oplocks = True</c>
      <c>read raw = no</c>
      <c>write cache size = 262144</c>

<c>[printers]</c>
      <c>comment = All Printer</c>
      <c>path = /var/spool/samba</c>
      <c>browseable = no </c>
   
</pre>

<p>
Nu dat SAMBA geconfigureerd is, herstart samba, ga naar je
Windows machine en installeer de netwerkprinter. Gemakkelijk
eh?
</p>

</body>
</section>
</chapter>
</guide>
