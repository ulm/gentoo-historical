<?xml version='1.0' encoding="UTF-8"?> 

<!-- 
Last used revision: 1.10
Master document: English version
-->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd"> 

<guide link = "/doc/nl/printing-howto.xml"> 
<title>Gentoo's Handleiding in het Printen</title> 
<author title="Author">
    <mail link="zhen@gentoo.org">John P. Davis</mail>
</author>
<author title="Copyeditor">
    <mail link="sunflare@gentoo.org">Phil Bordelon</mail>
</author>
<author title="Editor">
    <mail link="wleggette@gate.net">Wesley Leggette</mail>
</author>
<author title="Editor">
    <mail link="carl@gentoo.org">Carl Anderson</mail>
</author>
<author title="Translator">
    <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
 
<abstract>
Dit is een handige, overzichtelijke handleiding voor Gentoo Linux
gebruikers. Ze legt uit hoe je je printer configureert, zowel voor
lokale als netwerkprinters.
</abstract>

<version>1.0.2</version> 
<date>1 April 2003</date> 
 
<chapter> 
<title>Lokaal printen via CUPS</title> 
<section> 
<title>Installatie via CUPS en foomatic</title> 

<body> 
 
<p>
Het opstellen van printers onder Gentoo Linux is betrekkelijk
eenvoudig dankzij programma's zoals CUPS en foomatic. Beide zitten in de
Portage structuur en zijn zeer eenvoudig te installeren door de eindgebruiker.
</p> 

<p>
CUPS is crossdesktop. Maw je kan deze zowel onder GNOME als KDE gebruiken. Er
zijn andere manieren, zoals via KDE's printerconfiguratie, maar we geloven dat
CUPS het eenvoudigst is in gebruik, en zeker het meest flexibel.
</p>

<p>
Alvorens je CUPS installeert is het een goed idee om de USE-vlaggen in
<path>/etc/make.conf</path> aan te passen.
</p>

<pre caption = "Aanpassen van /etc/make.conf">
<comment>Voeg <i>cups</i> toe aan je USE variabele lijst.</comment>
USE="cups"
</pre>

<p>
Voor meer informatie aangaande USE variabelen, gelieve de <uri
link="http://www.gentoo.org/doc/nl/use-howto.xml">USE HOWTO</uri> te lezen.
</p>


<pre caption = "De nodige packages emergen"> 
# <c>emerge cups</c>  
# <c>emerge foomatic </c>
</pre> 

</body>
</section>

<section>
<title>Instellen van kernel(modules)</title>

<body>

<p>
Nu dat de nodige packages geinstalleerd zijn is het tijd om de printer te
installeren.
</p>

<p>
Afhankelijk van welk type van printer je gebruikt is het nodig om ofwel
parallelle poort ondersteuning of USB printer-connecties ondersteuning in
de kernel te steken.
</p>

<p>
Om USB printersupport te ondersteunen, ga naar USB support en selecteer
<c>Support for USB</c> en <c>USB Printer support</c>. Indien je deze activeert
als module verkrijg je usbcore.o en printer.o in je modules-directorie. We
raden aan om modules te gebruiken aangezien je dan je pc niet dient te
herstarten.
</p>

<note>
Indien je niet vertrouwd bent met het compileren van een
kernel, dan kan je altijd de officiele Linux Kernel-HOWTO
lezen op <uri>http://www.tldp.org/HOWTO/Kernel-HOWTO.html</uri>. Zorg ervoor
dat je te weten komt hoe je nieuwe modules compileert en installeert zonder dat
je je pc moet herstarten. Zo win je tijd met het opstellen van je printer.
</note>

<p>
Nadat de kernel gecompileert is en je al dan niet herstart hebt is het tijd om
de nodige modules (indien van toepassing) te laden:
</p> 
 
<pre caption = "De USB modules laden"> 
# <c>modprobe usbcore</c> 
# <c>modprobe printer</c> 
</pre> 

<p>
Nadat de modules correct geladen zijn is het tijd om de printer
in te steken en <path>/var/log/messages</path> te bekijken om
te zien of de printer gedetecteerd werd.
</p> 
 
<note>
Indien je een andere system logger gebruikt behalve sysklogd dan kan de
kernellog ietswat anders zijn.
</note>

<pre caption = "Controle van Kernel Messages"> 
# <c>tail /var/log/messages</c> 
</pre> 
 
<p>
Je zou iets als volgt moeten zien:
</p>
   
<pre caption = "/var/log/messages">
hub.c: USB new device connect on bus2/2, assigned device number 2
printer.c: usblp0: USB bidirectional printer dev 2 if 0 alt 1 proto 2 vid 0x03F0 pid 0x1104
</pre>    
 
<note>
Indien je een parallelle printer gebruikt, zorg er dan voor dat
deze al ingeplugged is en aangezet alvorens je je pc opstart.
Eenmaal het systeem opgestart is, voer dan <c>dmesg</c> uit en
kijk of je kernel je printer gedetecteerd heeft.
</note> 
 
<p>
Alvorens je je printer configureert met CUPS is het mogelijk de
printer al te testen met enkele low-level commando's.
</p> 

<pre caption = "Printer testen met cat">
# <c>touch test.txt</c>
# <c>echo "Dag vriendjes. Dag vriendinnetjes :-)" > test.txt</c>
# <c>cat test.txt > /dev/usb/lp0 </c>

<comment> Of, voor parallelle printers: </comment>
# <c>cat test.txt > /dev/lp0 </c>
</pre>

</body> 
</section> 
 
<section> 
<title>Speciale Printer Drivers</title> 

<body> 
<p>
Alvorens je foomatic gebruikt om een PPD bestand te maken kan het nodig zijn 3e
partij drivers te vinden voor je printer. Bijvoorbeeld heeft Epson <uri
link="http://www.epkowa.co.jp/english/linux_e/linux.html">verschillende
printerdrivers</uri> voor open source besturingssystemen. Deze drivers zelf
zijn echter vaak niet open source.
</p> 
 
<p>
Voor de meeste printers (behalve HP Inkjets) kan je de standaard Linux
printerdrivers gebruiken. Bezoek de <uri
link="http://www.linuxprinting.org/printer_list.cgi">linuxprinting.org printer
support database</uri> om informatie over je specifieke printer te vinden.
Indien je de driver wil gebruiken, lees dan zeker de documentatie en licentie
van die driver alvorens je die download.
</p>

<impo>
Indien je een HP Inkjet printer gebruikt moet je de <c>hpijs</c> printer driver
installeren. Deze behandelt alle Postscript interpretatie die nodig is om de HP
printer te doen werken. Deze driver is enkel voor HP Inkjet printers, maar is
toch beschikbaar via Portage voor het gemak. De documentatie van HP over deze
driver staat in <path>/usr/share/doc/hpijs-&lt;version&gt;</path>. We raden ten
zeerste aan om dit te lezen.
</impo>

<pre caption = "Emerging hpijs"> 
# <c>emerge hpijs</c> 
</pre> 

<note>
Indien je een HP Laserjet gebruikt kan je mogelijk al ondersteuning hebben via
het GNOME printing-systeem. Indien je een niet-HP-Inkjet printer gebruikt moet
je deze driver niet installeren.
</note>

</body>
</section>

<section>
<title>PPD Configuratiebestanden</title>

<body>
<p>
Nu is het tijd om de printer en CUPS te configureren. Om ervoor te zorgen dat
je printer de PostScript correct interpreteert heeft CUPS een PPD (Printer
Postscript Definition) bestand nodig. De eenvoudigste manier om PPD bestanden
aan te maken is via foomatic.
</p>

<p>
Er zijn 3 stukken informatie nodig om het onderstaand commando succesvol uit te
voeren: je hebt je printer-ID nodig, je printer device en je printer driver
(deze laatste is hpijs indien je deze voordien geinstalleerd hebt). De printer
ID en driver kan je <c>grep</c>'en uit foomatic's database, en de printer
device is datgene waar je printer naar luistert (i.e. <path>/dev/lp0</path> of
<path>/dev/usb/lp0</path>).
</p>

<p>
Alvorens je <c>foomatic-configure</c> uitvoert moet je eerst <i>cupsd</i>
opstarten.
</p>

<pre caption="Starten van cupsd">
# <c>/etc/init.d/cupsd start</c>
</pre>

<pre caption="Algemeen gebruik van foomatic">
# <c>grep $printer_model /usr/share/foomatic/db/source/printer/*</c>
# <c>grep $printer_ID /usr/share/foomatic/db/source/driver/*</c>
# <c>foomatic-configure -s cups -p $printer_model_number -c $print_device_path -n queue name -d driver</c>
</pre>

<p>
Hieronder volgt een meer specifiek voorbeeld. Hierin onderstellen we dat je een
Epson Stylus Color 980 hebt.
</p>

<pre caption="Specifiek gebruik van foomatic met Stylus Color 980">
 # <c>grep Stylus Color 980 /usr/share/foomatic/db/source/printer/* </c>
<comment> Now look for the line which reads: </comment>
/usr/share/foomatic/db/source/printer/317865.xml:   &lt;model>Stylus Color
980&lt;/model>
<comment> 317865 is your printer ID. </comment>    
# <c>grep 317865 /usr/share/foomatic/db/source/driver/* </c>
/usr/share/foomatic/db/source/driver/gimp-print.xml:
 &lt;printer>&lt;id>printer/317865&lt;/id>&lt;/printer>  
<comment> Here, your print driver is gimp-print.</comment>    
# <c>foomatic-configure -s cups -p 317865 -c file:/dev/lp0 -n Epson -d gimp-print </c>
</pre>

<note>
Herinner dat, indien je een USB printer hebt, je <path>/dev/usb/lp0</path> moet
gebruiken.
</note>

<impo>
Indien je problemen hebt, gelieve dan de <uri
link="http://www.linuxprinting.org/foomatic/USAGE">foomatic documentatie</uri>
en de <uri link="http://www.linuxprinting.org">linuxprinting.org</uri> website
te raadplegen/
</impo>

</body> 
</section> 
 
<section> 
<title>CUPS Configuratie</title> 
<body> 

<p>
Nu de printer zelf geconfigureerd is moet CUPS ingesteld
worden om de printer queue te beheren. CUPS kan geadresseerd
worden via een webinterface op poort 631, of via een
printerserver.
</p>

<impo>
CUPS bevat configuratiebestanden voor de daemon die
aangepast kunnen worden. Je kan die vinden op
<path>/etc/cups/cupsd.conf</path>.
</impo>

<pre caption = "CUPS toevoegen aan de default runlevel en herstarten">
# <c>rc-update add cupsd default</c>
# <c>/etc/init.d/cupsd start</c>
</pre>

<p>
De CUPS daemon zou nu moeten draaien, dus open je favoriete
browser en ga naar <uri link="http://127.0.0.1:631">hier</uri>.
</p> 

<p>
Hopelijk zal je begroet worden door de CUPS
configuratieschermen. Klik op <i>administration</i> bovenaan de
pagina, en geef je rootpaswoord in, of de naam van iemand in de
<i>lp</i> groep. Eenmaal ingelogged kan je op <i>Add
Printer</i> klikken onder de <i>printers</i> sectie. Vul de
naam van je printer in, de uitleg en de locatie van je printer.
Je moet je printernaam correct invullen (dezelfde als deze die
je aan foomatic gegeven hebt). Selecteer nu het apparaat
waaraan je printer geconnecteerd is. Selecteer de maker van je
printer, en ga verder. Op de volgende pagina kies je je printer
van de lijst.
</p>

<p>
De configuratie is nu klaar. Klik op de naam van je printer en
probeer een testpagina af te printen. Voila, je
printerconfiguratie is afgewerkt.
</p>

<note>
Indien de printer om een of andere reden niet werkt, ga dan
naar de directorie waar je CUPS ingesteld hebt om de logs te
bewaren, en lees <i>error_log</i>.
</note>
 
</body> 
</section>
</chapter>

<chapter>
<title>
Configureren van The Gimp, OpenOffice.org1.0 en AbiWord om via CUPS
te printen.
</title>
<section>
<title>The GIMP</title>
<body>

<p>
Alvorens we starten moeten we gimp's CUPS printing extensions installeren:
</p>

<pre caption="Emergen van gimp-print-cups">
# <c>emerge gimp-print-cups</c>
</pre>

<p>
Start nu The Gimp, open een bestaande afbeelding, of
start een blanco afbeelding. Rechterklik op de afbeelding en ga
naar <i>File/Print</i>. Het dialoog voor het printen zou
tevoorschijn moeten komen, en eenmaal het zover is, klik dan op
&quot;New Printer&quot;. Indien je printer nog niet vermeld is,
type dan de naam in van je printer, en selecteer je
printertype. Et voila, je bent nu klaar om vanuit The GIMP te
printen. Speel met de instellingen en veel plezier :)
</p>

</body>
</section>

<section>
<title>OpenOffice.org1.0</title>
<body>

<p>
Printen met OpenOffice.org1.0 is niet moeilijker. Ga naar
<path>OpenOffice.org1.0/program</path>, en voer <c>spadmin</c>
uit. Maak een nieuwe printer aan, en wanneer je gevraagd wordt
om een driver te selecteren, klik dan op <i>import</i> en ga
naar de locatie van je printers' PPD-bestand. In mijn geval is
dat <path>/etc/cups/ppd</path>. Gebruik de default
printercommando's, benoem de printer, selecteer ze als default
en je bent klaar om te vertrekken. Start OpenOffice.org1.0 en
ga naar het printscherm, en selecteer je printer.
Print een testpagina, en je bent klaar.
</p>

</body>
</section>

<section>
<title>Abiword</title>
<body>

<warn>
AbiWord segfaults en crasht met CUPS-1.1.15-r2. Het is
aangeraden om terug te keren naar een .14-serie aangezien dat
het probleem oplost.
</warn>

<p>
Nog te doen: Abiword ondersteuning.
</p>

</body>
</section>

<p>
Ondersteuning voor lokaal te printen is nu klaar. Laten we nu
eens kijken naar het netwerkprinten-gedeelte.
</p>

</chapter>

<chapter>
<title>Netwerkprinten met CUPS en SAMBA.</title>
<section>
<title>Printen naar een Windows Printer van een Linux Computer</title>
<body>

<p>
Allereerst moet SAMBA geinstalleerd zijn met de 2 volgende
netwerkprint-opties.
</p>

<pre caption = "SAMBA installeren">
# <c>emerge samba</c>
</pre>

<note>
Voor meer informatie aangaande SAMBA, lees de officiele SAMBA
HOWTO op <uri>http://www.tldp.org/HOWTO/SMB-HOWTO.html</uri>.
</note>

<p> 
Allereerst gebruiken we weer <i>foomatic</i> om de PPD
bestanden te maken van de afgelegen printer. Vergeet niet te
controleren of je printer wel Linux compatible is op
<uri>http://www.linuxprinting.org/printer_list.cgi</uri>.
Vertel nu aan <i>foomatic</i> waar en wat de printer is, en
verplaats dan de gegenereerde PPD-bestanden naar de correcte
locatie.
</p>

<pre caption = "foomatic met Samba gebruiken">
<codenote>Gelieve je printer-model en driver volgens de voordien besproken
stappen te noteren</codenote>
# <c>foomatic-configure -s cups -p $printer_model -c smb://user:password@server/share -n queue name -d hpijs</c>
</pre>

<p>
Ga nu met je favoriete webbrowser naar <uri
link="http://localhost:631">hier</uri> om de CUPS configuratie
GUI naar voor te brengen. Volg de bovenvermelde stappen om een
printer toe te voegen, maar als ze nu vragen waar de printer
staat, geef dan <i>smb://user:password@server/share</i> in.
Dit maakt duidelijk aan CUPS dat de printer op de Windows
machine staat.
</p>

</body>
</section>

<section>
<title>
Linux gebruiken als een Windows compatibele Printserver</title>
<body>

<p>
Linux kan een prachtige printserver zijn, maar jah,
Linux is dan ook gewoon prachtig. Het eerste wat je moet doen is
<path>/etc/samba/smb.conf</path> aanpassen aan je eigen noden.
Het <i>smb.conf</i>-bestand bevat alle instellingen die je
Linuxpc zullen doen lijken alsof ze een Windows NT server is.
Ik heb een voorbeeld <i>smb.conf</i> bijgeleverd. Pas deze aan
naar je eigen noden.
</p>

<pre caption = "Voorbeeld smb.conf">
<c>[global]</c>

      <c>workgroup = YOUR_WORKGROUP</c>
      <c>server string = Gentoo Linux Server</c>
      <c>encrypt passwords = True</c>
      <c>security = user</c>
      <c>smb passwd file = /etc/samba/private/smbpasswd</c>
      <c>log file = /var/log/samba/log.%m</c>
      <c>socket options = IPTOS_LOWDELAY TCP_NODELAY</c>
      <c>domain master = Yes</c>
      <c>local master = Yes</c>
      <c>preferred master = Yes</c>
      <c>os level = 65</c>
      <c>dns proxy = No</c>
      <c>name resolve order = lmhosts host bcast</c>
      <c>bind interfaces only = True</c>
      <c>interfaces = eth0</c>
      <c>hosts deny = ALL</c>
      <c>hosts allow = 192.168.1.4 127.0.0.1 (list of allow hosts here) </c>
      <c>debug level = 1</c>
      <c>create mask = 0644</c>
      <c>directory mask = 0755</c>
      <c>level2 oplocks = True</c>
      <c>read raw = no</c>
      <c>write cache size = 262144</c>

<c>[printers]</c>
      <c>comment = All Printer</c>
      <c>path = /var/spool/samba</c>
      <c>browseable = no </c>
   
</pre>

<p>
Nu dat SAMBA geconfigureerd is, herstart samba, ga naar je
Windows machine en installeer de netwerkprinter. Gemakkelijk
eh?
</p>

</body>
</section>
</chapter>
</guide>
