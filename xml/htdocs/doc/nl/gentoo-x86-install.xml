<?xml version="1.0" encoding="UTF-8"?>

<!-- 
	Last updated from revision 1.166
	Master document: English version
-->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/nl/gentoo-x86-install.xml">
<title>Gentoo Linux 1.4 Installatie Instructies</title>
<author title="Chief Architect">
  <mail link="drobbins@gentoo.org">Daniel Robbins</mail>
</author>
<author title="Author">Chris Houser</author>
<author title="Author">Jerry Alexandratos</author>
<author title="Ghost">
  <mail link="g2boojum@gentoo.org">Grant Goodyear</mail>
</author>
<author title="Editor">
  <mail link="zhen@gentoo.org">John P. Davis</mail>
</author>
<author title="Editor">
  <mail link="stocke2@gentoo.org">Eric Stockbridge</mail>
</author>
<author title="Editor">
  <mail link="Pierre-Henri.Jondot@wanadoo.fr">Pierre-Henri Jondot</mail>
</author>
<author title="Editor">
  <mail link="rajiv@gentoo.org">Rajiv Manglani</mail>
</author>
<author title="Editor">
  <mail link="seo@gentoo.org">Jungmin Seo</mail>
</author>
<author title="Editor">
  <mail link="zhware@gentoo.org">Stoyan Zhekov</mail>
</author>
<author title="Editor">
  <mail link="jhudso@gentoo.org">Jared Hudson</mail>
</author>
<author title="Editor">
  <mail link="">Colin Morey</mail>
</author>
<author title="Editor">
  <mail link="peesh@gentoo.org">Jorge Paulo</mail>
</author>
<author title="Editor">
  <mail link="carl@gentoo.org">Carl Anderson</mail>
</author>
<author title="Editor, Reviewer, Translator">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Editor">
  <mail link="avenj@gentoo.org">Jon Portnoy</mail>
</author>
<author title="Editor">
  <mail link="klasikahl@gentoo.org">Zack Gilburd</mail>
</author>
<author title="Translator">
	<mail link="blubber@gentoo.org">Tiemo Kieft</mail>
</author>
<author title="Reviewer">
  <mail link="gerrynjr@gentoo.org">Gerald J. Normandin Jr.</mail>
</author>
<author title="Reviewer">
  <mail link="spyderous@gentoo.org">Donnie Berkholz</mail>
</author>
<author title="Reviewer">
  <mail link="antifa@gentoo.org">Ken Nowack</mail>
</author>
<author title="Reviewer, Editor">
	<mail link="bennyc@gentoo.org">Benny Chuang</mail>
</author>
<license/>

<abstract>
Deze instructies helpen je stap voor stap bij het installeren van
Gentoo Linux 1.4, release versie (niet de _rc versies). Gentoo Linux 
installeren kan op diverse manieren, afhankelijk van hoeveel je van je 
systeem zelf wilt compileren.
</abstract>

<version>2.6.11</version>
<date>15 September 2003</date>

<chapter>
<title>Over de installatie</title>
<section>
<body>

<p>
Allereerst, indien je nieuw bent, welkom bij Gentoo Linux! Gentoo Linux
kan op verschillende manieren geinstalleerd worden. Voor diegenen die op
zoek zijn naar een snelle installatie kunnen voorgecompileerde pakketten
gebruiken; diegenen die liever een ultiem configureerbaar
installatiesysteem wensen kunnen Gentoo Linux volledig van broncode
installeren. De methode die je kiest hangt van je eigen wensen af.
</p>

<p>
Een significante aanpassing sinds de vorige releases is onze nieuwe 2-CD
installatie set welke je kan bestellen in <uri
link="http://store.gentoo.org">De Gentoo Linux Winkel</uri> (Engels), welke
natuurlijk ook beschikbaar op onze <uri 
link="http://www.gentoo.org/main/en/mirrors.xml">mirrors</uri>. We hebben
momenteel 2-CD installatie setjes voor x86 (486 en hoger), i686 (Pentium Pro,
Pentium II, Athlon/Duron en hoger), Pentium III, Pentium 4 en Athlon XP. Om
te kijken welke 2-CD set voor jou geschikt is, kan je de gedetailleerde 
omschrijvingen lezen van elke product in de <uri
link="http://store.gentoo.org">winkel</uri>. De winkel omschrijvingen geven
vrij duidelijke CPU compatibiliteits informatie.
</p>

<p>
Je kan de ISOs voor de LiveCDs van bijna al onze mirrors downloaden. De LiveCDs
voor de x86 architectuur zijn gelocaliseerd in de 
<path>releases/x86/1.4/livecd/</path> subdirectorie.
</p>

<p>
OK, wat is dat nu met die 2 CD set -- hier volgt wat je erop kan vinden.
De eerste CD ("CD 1") noemen we de "Live CD installatie" en is een
bootable CD-ROM, wat wil zeggen dat je "CD 1" gewoonweg in je CD-ROM
drive kan steken en Gentoo Linux direct daarvan booten. Je kan dan deze
omgeving gebruiken om Gentoo Linux 1.4 te installeren op je harde
schijf. Naast een bootable Gentoo Linux omgeving bevat elke CD 1 ook
alles wat je nodig hebt om Gentoo Linux snel te installeren, zelfs
zonder Internet-connectie. Daarnaast zal je verschillende
voorgecompileerde pakketten vinden op de CD 1, zoals de zeer belangrijke
XFree86 X server. Indien je een ISO CD-ROM bestand hebt voor "CD 1" zal
deze <path>cd1</path> in zijn naam hebben.
</p>

<p>
In tegenstelling tot "CD 1" is de tweede CD ("CD 2") niet bootable, maar
bevat ze heel wat voorgecompileerde pakketten voor je systeem. Op deze
CD vind je geoptimaliseerde pakketten van KDE, GNOME, OpenOffice,
Mozilla, Evolution, ... CD 2 is <i>optioneel</i> en is bedoelt voor de
mensen die Gentoo Linux snel willen installeren. De pakketten op CD 2
nemen typisch 36 uren in om van broncode te compileren op een modern
uni-processor systeem. Indien je een ISO CD-ROM bestand hebt voor "CD 2"
zal deze <path>cd2</path> in zijn naem hebben.
</p>

<note>
Een volledige Gentoo Linux 2-CD set bevat het Gentoo Reference Platform,
welke een volledige voorgecompileerde Gentoo Linux omgeving is inclusief
GNOME, KDE, Mozilla en OpenOffice. Dit platform werd in het leven
geroepen om zeer snel Gentoo Linux te kunnen installeren. De "compileer
van broncode" functionaliteit, welke het bouwblok van Gentoo Linux is,
blijft uiteraard volledig ondersteund. Het doel van GRP is om Gentoo
Linux eenvoudiger te maken voor diegenen die dat willen, zonder Gentoo's
krachtige "compileer van broncode" functionaliteit enigzins af te
zwakken.
</note>

<p>
Naast onze 2-CD set hebben we tevens een kleine "basic" Live CD welke je
kan gebruiken om je systeem te booten. Eenmaal je systeem geboot is kan
je een connectie naar het Internet maken om Gentoo Linux over het
netwerk te installeren. Het voordeel van deze "basic" CD is dat ze klein
is, waardoor je het ISO CD-ROM bestand snel kan downloaden. Indien je
een geavanceerde gebruiker bent die de meest up-to-date versie van
Gentoo Linux wil installeren, en je hebt een snelle netwerkconnectie,
dan zal je waarschijnlijk deze mogelijkheid benutten. Indien je de ISO
CD-ROM bestand van de "basic" CD gedownload hebt zal deze <path>-basic</path> 
in zijn naam hebben.
</p>

<p>
Om eender welke methode tot een goed einde te brengen heb je minstens
een 486+ CPU nodig en minstens 64 Mb ram (Gentoo Linux kan succesvol
installeren om een 64Mb RAM + 64 Mb SWAP systeem, maar het
compilatieproces is onder deze omstandigheden zeer traag).
</p>

<p>
Eenmaal je van onze Live CD geboot bent krijg je nog meer mogelijkheden.
Gentoo Linux kan geinstalleerd worden via een van de drie niveau
tarballs (stages). Welke je kiest hangt af van hoeveel je van je systeem
wil compileren. De niveau-1 tarbal wordt gebruikt wanneer je de
bootstrap en de volledige compilatie zelf wil doen. De niveau-2 tarball
is geschikt voor het compileren van het ganse systeem, startende van een
gebootstrappede omgeving. De niveau-3 tarball bevat een basisch Gentoo
Linux systeem dat al voorgecompileerd is. Indien je een "GRP"
installatie wil doen, dan moet je de niveau-3 tarball gebruiken.
</p>

<p>
<b>Indien je geen GRP installatie doet, welke tarball moet je dan
kiezen?</b> Hieronder vind je wat informatie dat je zal helpen in het
zoeken naar de ideale methode. Starten van niveau-1 laat je toe om
volledige controle te hebben over te optimalisatie-instellingen en
optionele ondersteuning van je systeem. Dit maakt niveau-1 geschikt voor
geavanceerde gebruikers die weten waaraan ze beginnen. Het is tevens een
prachtige installatie-methode voor gebruikers die meer willen te weten
komen over de interne werking van Gentoo Linux.
</p>

<p>
Niveau-2 installaties laten je het bootstrapproces overslaan. Dit is
geen enkel probleem indien je tevreden bent met de
optimalisatie-instellingen die we voor jouw niveau-2 tarball gemaakt
hebben. Indien je voor een niveau-3 installatie gaat kies je voor de
snelste methode om Gentoo Linux te installeren, maar dat wil ook zeggen
dat je basis-systeem de optimalisaties heeft die wij voor jou gekozen
hebben (welke, om eerlijk te zijn, goede instellingen zijn en
voorzichtig gekozen werden om de performantie ten top te drijven zonder
de stabiliteit in gedrang te brengen). Aangezien de Gentoo Linux
releases niveau-3 installaties omvatten voor verschillende populaire
CPUs biedt een niveau-3 installatie het beste van beide werelden aan --
een snelle installatie en een systeem dat goed geoptimaliseerd is.
<b>Indien je Gentoo Linux voor de eerste keer installeert raden we je
aan om een niveau-3 tarball te nemen voor de installatie, of een
niveau-3 met GRP</b>.
</p>

<note>
<b>Geavanceerde gebruikers:</b> Indien je een niveau-3 installatie neemt
pas je beter de default CHOST instelling in <path>/etc/make.conf</path>
<e>niet</e> aan. Indien je dat wel wil moet je beginnen met een niveau-1
tarball en dan je volledige systeem vanaf niveau-1 compileren. De CHOST
instelling ziet er ongeveer uit als <c>i686-pc-linux-gnu</c>.
</note>

<impo>
Indien je problemen ondervindt in eender welk deel van de installatie en je 
wilt dat rapporteren als een bug, doe dit dan op 
<uri>http://bugs.gentoo.org</uri>. Indien de bug naar de nodige maintainers 
van packages moet gestuurd worden (bv die van KDE) dan zullen wij daar wel 
voor zorgen.
</impo>

<note>
De installatieinstructies van de LiveCD zijn mogelijk niet volledig 
up-to-date. Kijk altijd naar
<uri>http://www.gentoo.org/doc/nl/gentoo-x86-install.xml</uri> voor de
meest up-to-date installatieinstructies.
</note>

<p>
Nu, laten we snel eens het installatie-proces overlopen. Allereerst zal je
LiveCD-bestand(en) downloaden, branden en booten. Eenmaal je een root-prompt
verkrijgt, zal je partities aanmaken, de bestandssystemen creeren en 
een niveau-1, niveau-2 of niveau-3 tarball uitpakken. 
Als je een niveau-1 of niveau-2 tarball gebruikt zal je de nodige stappen 
ondernemen om je systeem naar een niveau-3 te krijgen. Eenmaal je systeem 
op niveau 3 aanbeland is kan je ze configureren (configuratiebestanden 
verder invullen, bootloader installeren, etc...) en boot je ze zodat je een 
volledig werkend Gentoo Linux systeem hebt. Nadat je basisch Gentoo
Linux systeem draaiende is kan je optioneel "CD 2" van onze 2-CD set
gebruiken en een aantal voorgecompileerde pakketten installeren zoals
KDE, GNOME, OpenOffice, Mozilla of andere die je graag op je systeem
had.
</p>
<p>
Afhankelijk vanuit welk niveau je start geven we hier wat je nodig hebt voor de
installatie:
</p>

<table>
<tcolumn width="0.75in" />
<tcolumn width="1in" />
<tcolumn width="1.15in" />
<tcolumn width="3.5in" />
<tr><th>Niveau tarball (<e>stage</e>)</th>
    <th>Internet toegang vereist?</th>
    <th>Vereiste media</th>
    <th>Te ondernemen stappen</th>
</tr>
<tr><ti>1</ti>
    <ti>Ja</ti>
    <ti>"basic" of "CD 1"</ti>
    <ti>partitionering, formatering, emerge sync, bootstrap, emerge system, 
        emerge linux kernel broncode, laatste configuratie</ti>
</tr>
<tr><ti>2</ti>
    <ti>Ja</ti>
    <ti>"basic" of "CD 1"</ti>
    <ti>partitionering, formatering, emerge sync, emerge system, 
        emerge linux kernel broncode, laatste configuratie</ti>
</tr>
<tr><ti>3</ti>
    <ti>Niet indien je "CD 1" gebruikt, anders wel</ti>
    <ti>"basic" of "CD 1"</ti>
    <ti>partitionering, formatering, emerge sync (optioneel), 
        laatste configuratie</ti>
</tr>
<tr><ti>3 + GRP</ti>
    <ti>Neen</ti>
    <ti>"CD 1", optioneel "CD 2"</ti>
    <ti>partitionering, formatering, laatste configuratie, installeren
    van CD 1 pakketten (optioneel), rebooten, installeren van extra
    pakketten zoals KDE en GNOME (via "CD 2").</ti>
</tr>
</table>

<note>
Hardware RAID gebruikers moeten de sectie over ATA RAID onderaan dit
document lezen alvorens ze doorgaan.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Opstarten</title>
<section>
<body>

<warn>
Lees deze ganse sectie alvorens je verder gaat, vooral het deel over 
de beschikbare bootopties. Indien je deze waarschuwing negeert kan dit
ervoor zorgen dat je verkeerde keyboard-instellingen hebt, niet
gestartte pcmcia services en dergelijke meer.
</warn>

<p>
Start met het booten van de Live CD naar keuze. Je zou een mooi
bootscherm moeten zien met het Gentoo Linux logo. Bij dit scherm kan je
op Enter drukken om het bootproces te beginnen, of de LiveCD booten met
extra bootopties door een kernel te specifieren gevolgd door bootopties.
Bijvoorbeeld <c>gentoo nousb nohotplug</c>. Indien je Gentoo Linux
installeert op een systeem met meer dan 1 CPU ("SMP") dan moet je
<c>smp</c> ingeven in plaats van <c>gentoo</c>. Hierdoor zal de LiveCD
alle CPUs zien en niet enkel de eerste.
</p>

<p>
Consulteer de volgende tabel voor een kleine lijst van beschikbare
kernels en opties, of druk op F2 en F3 om het helpscherm te zien.
</p>

<table>
<tcolumn width="2in"/>
<tcolumn width="4in"/>
<tr><th>Beschikbare kernels</th><th>Uitleg</th></tr>
<tr><ti>gentoo</ti><ti>standaard gentoo kernel (default)</ti></tr>
<tr><ti>nofb</ti><ti>desactiveert framebuffer mode</ti></tr>
<tr><ti>smp</ti><ti>laadt een smp kernel zonder framebuffer
ondersteuning</ti></tr>
<tr><ti>acpi</ti><ti>activeert acpi en laadt acpi modules tijdens het
booten</ti></tr>
<tr><ti>memtest</ti><ti>boot met het memorytest programma</ti></tr>
</table>

<table>
<tcolumn width="2in"/>
<tcolumn width="4in"/>
<tr><th>Beschikbare bootopties</th><th>Uitleg</th></tr>
<tr><ti>doataraid</ti><ti>laadt ide raid modules vanuit de initrd</ti></tr>
<tr><ti>dofirewire</ti><ti>laadt firewire modules vanuit initrd (voor firewire
CDROMs e.d.)</ti></tr>
<tr><ti>dokeymap</ti><ti>activeert keymapselectie voor niet-us
toetsenborden</ti></tr>
<tr><ti>dopcmcia</ti><ti>activeert de pcmcia services</ti></tr>
<tr><ti>doscsi</ti><ti>scant naar scsi apparaten (kan voor problemen zorgen bij
sommige netwerkkaarten)</ti></tr>
<tr><ti>noapm</ti><ti>weigert het laden van de apm modules</ti></tr>
<tr><ti>nodetect</ti><ti>hwsetup, kudzu en hotplug worden niet
uitgevoerd</ti></tr>
<tr><ti>nodhcp</ti><ti>dhcp wordt niet vanzelf gestart als je nic gedetecteerd
wordt</ti></tr>
<tr><ti>nohotplug</ti><ti>desactiveert de hotplug service</ti></tr>
<tr><ti>noraid</ti><ti>weigert het laden van de evms modules</ti></tr>
<tr><ti>nousb</ti><ti>weigert het laden van de usb modules vanuit initrd,
desactiveert de hotplug service</ti></tr>
<tr><ti>ide=nodma</ti><ti>vereist dat de IDE devices zonder DMA
werken</ti></tr>
<tr><ti>cdcache</ti><ti>cachet het volledige runtimegedeelte van de cd in ram.
Dit vereist 40 MiB RAM, maar laadt je toe om de cdrom te unmounten en een
andere cdrom te mouten</ti></tr>
</table>

<p>
Eenmaal je op enter gedrukt hebt zal je een nog mooier scherm krijgen en
een vooruitgangsindicator.</p>

<p>
Eenmaal het bootproces beeindigd is zal je vanzelf ingelogged worden in
de Gentoo Linux omgeving alq <c>root</c>, de beheerder van het systeem.
Je zal een root prompt (<c>#</c>) zien op de huidige console. Je kan
tevens naar andere consoles gaan door Alt-F2, Alt-F3 of Alt-F4 te
drukken. Keer terug naar de eerste door Alt-F1 in te geven.
</p>

<note>
<b>Geavanceerde gebruikers:</b> Wanneer de Live CD boot zal het
rootpaswoord van de CD zelf ingesteld worden op een random string (om
veiligheidsredenen). Indien je van plan bent om <c>sshd</c> te starten
op de CD om connecties toe te laten naar de Live CD omgeving moet je nu
het CD root paswoord aanpassen door <c>passwd</c> in te geven. Anders
zal je niet het correcte paswoord kennen om in te kunnen loggen op je
systeem.
</note>

<p>
Je zal eveneens opmerken dat boven je <c>#</c>-prompt een hoop tekst staat die 
je uitlegt hoe je bepaalde zaken moet doen, zoals het configureren van je 
netwerk alsook waar op de CD je de Gentoo Linux niveau-tarballs kan vinden.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Optionele hardware configuratie</title>
<section>
<body>

<p>
Wanneer de Live CD boot zal het proberen om alle hardwareapparaten te
detecteren en de correcte modules te laden om je hardware te kunnen
ondersteunen. In het merendeel van de gevallen werkt dit perfect. In
sommige gevallen echter zal het niet alle kernelmodules laden die je
nodig hebt. Indien de PCI autodetectie een paar van je hardwarezaken
miste moet je deze modules manueel laden. Om een lijst te krijgen van de
beschikbare netwerkkaart modules, type <c>ls /lib/modules/`uname
-r`/kernel/drivers/net/*</c>. Om een specifieke kernelmodule te laden,
type:
</p>

<pre caption = "PCI Modules Configuratie">
# <i>modprobe pcnet32</i>
<comment>(vervang pcnet32 met jouw netwerkkaartmodule)</comment>
</pre>


<p>
Analoog, als je bepaalde SCSI hardware wilt aanspreken die niet automatisch
gedetecteerd werd tijdens het booten, dan zal je de nodige kernel modules 
van <path>/lib/modules</path> zelf moeten laden, opnieuw via <c>modprobe</c>:
</p>

<pre caption="Laden van SCSI modules">
# <c>modprobe aic7xxx</c> 
<comment>(vervang aic7xxx met de kernelmodule voor jouw SCSI adapter)</comment>
# <c>modprobe sd_mod</c>
<comment>(sd_mod is de ondersteuning voor SCSI schijven)</comment>
</pre>

<note>
Ondersteuning voor SCSI CD-ROMs en harde schijven zit al default in de 
gebruikte kernel.
</note>

<note>
<b>Geavanceerde gebruikers:</b> De Gentoo Live CD activeert zelf de DMA
op de schijven zodat de disktransfers zo snel mogelijk zijn. Indien dit
om een of andere reden toch niet gebeurde kan je <c>hdparm</c> gebruiken
om de DMA te activeren als volgt:
<pre caption = "Instellen van DMA">
<comment>(Vervang hdX met jouw HD)</comment>
# hdparm -d 1 /dev/hdX 
<comment>(Activeert DMA)</comment>
# hdparm -d1 -A1 -m16 -u1 -a64 /dev/hdX
<comment>(Activeert DMA en andere veilige performantie-opties)</comment>
# hdparm -X66 /dev/hdX
<comment>(Activeert Ultra-DMA !! gevaarlijk !! bij sommige schijven zorgt dit voor zware problemen)</comment>
</pre>
</note>
</body>
</section>
</chapter>

<chapter>
<title>Optionele configuratie van het netwerk voor de installatie</title>
<section>
<title>Misschien werkt het al?</title>
<body>

<p>
Indien je systeem in een Ethernet netwerk zit is het
hoogstwaarschijnlijk dat je netwerkconfiguratie al ingesteld is voor
jou. Indien dit het geval is kan je nu al gebruik maken van de
verschillende netwerk-tools die op de Live CD staan, zoals
<c>ssh</c>, <c>scp</c>, <c>ping</c>, <c>irssi</c>, <c>wget</c>, <c>lynx</c>, en
andere.
</p>

<p>
Je kan dit verifieren door het <c>/sbin/ifconfig</c> commando uit te voeren. 
Deze zou, naast <c>lo</c>, een of meerdere andere netwerkinterfaces moeten
tonen, zoals <c>eth0</c>:
</p>

<pre caption="/sbin/ifconfig voorbeeld voor een werkende netwerkkaart">
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11
</pre>

<p>
Je kan tevens proberen om je internetprovider's DNS servers (te zien in
<path>/etc/resolv.conf</path>) te pingen, alsook een website naar keuze, juist
om te zien of alle paketten het net bereiken, DNS naam-resolutie goed werkt en
dergelijke meer.
</p>

<pre caption="Netwerk testen">
# <c>ping -c 3 www.yahoo.com</c>
</pre>

<p>
Lukt het je om je netwerk te gebruiken? Indien ja, dan kan je de rest van deze
sectie overslaan.
</p>

</body>
</section>
<section>
<title>PPPoE Configuratie</title>
<body>

<p>
In de veronderstelling dat je PPPoE nodig hebt om naar het internet
te connecteren, heeft de LiveCD (eender welke versie) de zaken voor jou
vereenvoudigd door <c>rp-pppoe</c> ter beschikking te stellen. Gebruik het 
bijgeleverde <i>adsl-setup</i>-script om je connectie te configureren. Er zal
gevraagd worden naar de netwerkinterface dat met je ADSL-modem
verbonden is, je gebruikersnaam en paswoord voor de connectie, de IPs van de
DNS-servers van je internetprovider en of je al dan niet een basis firewall 
wenst.
</p>

<pre caption = "Configuratie van PPPoE">
# <c> adsl-setup </c>
# <c> adsl-start </c>
</pre>

<p>
Uiteraard, als je dat wenst kan je nog steeds je netwerk manueel
instellen.
</p>

<p>
Indien er iets verkeerd loopt, controleer dan of je alles correct ingetypt
hebt (gebruikersnaam, paswoord) door in <path>/etc/ppp/pap-secrets</path> 
of <path>/etc/ppp/chap-secrets</path> te kijken alsook door je ervan te 
vergewissen dat je de correcte netwerkinterface gebruikt.
</p>

</body>
</section>

<section>
<title>Vereenvoudigde netwerk-configuratie </title>
<body>

<p>
De eenvoudigste manier om je netwerk te configureren (indien dit niet
automatisch is gebeurd) is door het <c>net-setup</c> script uit te voeren.
</p>

<pre caption="Configureren van de netwerkkaart">
# <c>net-setup eth0</c>
</pre>

<p>
Uiteraard, als je dat wilt kan je het netwerk ook op de &quot;oude&quot; manier 
configureren. Dit wordt later uitgelegd.
</p>
</body>
</section>

<section>
<title>Manuele DHCP-configuratie</title>
<body>

<p>
Netwerkconfiguratie is simpel met DHCP; Als je internetprovider geen DHCP 
gebruikt, ga dan verder naar de statische configuratie-sectie.
</p>

<pre caption="Netwerk configuratie met DHCP">
# <c>dhcpcd eth0</c> 
</pre>

<note>
Sommige internetproviders vereisen het opgeven van een hostname. Om dat toe te
passen voeg je een <c>-h mijnhostnaam</c> argument toe aan het dhcpcd-commando 
hierboven.
</note>

<p>
Als je <e>dhcpConfig</e>-waarschuwingen krijgt moet je niet panikeren. Deze
waarschuwingen zijn hoogstwaarschijnlijk enkel schermvulling zonder meer. 
</p>

</body>
</section>
<section>
<title>Manuele statische configuratie</title>
<body>

<p>
Je moet het netwerk dusdanig configureren opdat je de nodige broncodebestanden
kan laten downloaden die nodig zijn voor de installatie van Gentoo Linux. De
gevraagde informatie staat uitgelegd in de volgende tabel:
</p>

<table>
<tr><th>Informatie</th><th>Uitleg</th><th>Voorbeeld waarde</th></tr>
<tr><ti>IP adres</ti><ti>Het IP adres dat je wil toewijzen aan je netwerk
interface</ti><ti>192.168.1.2</ti></tr>
<tr><ti>Broadcast adres</ti><ti>Het IP adres welke alle pakketten zal
doorsturen naar alle andere hosts in het
netwerk.</ti><ti>192.168.1.255</ti></tr>
<tr><ti>Netwerkmasker</ti><ti>Het masker dat gebruikt wordt samen met het
IP-adres om te bepalen welk deel de netwerkidentificatie is en welk deel de
hostidentificatie.</ti><ti>255.255.255.0</ti></tr>
<tr><ti>Gateway</ti><ti>Het IP adres van de computer die pakketten die niet
voor het lokale netwerk bedoeld zijn, doorstuurt (dit is meestal de computer die
de internetconnectie deelt).</ti><ti>192.168.1.1</ti></tr>
</table>

<p>
Voer de volgende commando's uit en vervang $IFACE met jouw netwerkinterface 
(meestal <i>eth0</i>), $IPNUM met jouw IP-adres, $BCAST met jouw broadcast
adres en $NMASK met jouw netwerkmasker. Voor het <c>route</c> commando moet 
je $GTWAY vervangen met jouw gateway.
</p>

<pre caption="Manuele statische configuratie van het netwerk">
# <c>/sbin/ifconfig $IFACE $IPNUM broadcast $BCAST netmask $NMASK</c>
# <c>/sbin/route add -net default gw $GTWAY netmask 0.0.0.0 metric 1 $IFACE</c>
</pre>

<p>
Nu is het tijd om <path>/etc/resolv.conf</path> aan te maken zodat 
&quot;name resolution&quot; (Web/FTP-sites vinden via hun naam in plaats van 
via hun IP-adres) werkt. Je kan <c>nano -w /etc/resolv.conf</c> ingeven om
<path>/etc/resolv.conf</path> aan te maken. <c>nano</c> is een kleine en
eenvoudige editor.
</p>

<p>
Hier is een voorbeeld om je eigen /etc/resolv.conf aan te maken:
</p>

<pre caption="/etc/resolv.conf voorbeeld">
domain mydomain.com
nameserver 10.0.0.1
nameserver 10.0.0.2
</pre>

<p>
Vervang <c>10.0.0.1</c> en <c>10.0.0.2</c> met het IP-adres van jouw primaire 
respectievelijk secundaire DNS-server (of die van je internetprovider).
</p>

</body>
</section>

<section>
<title>Proxy Configuratie</title>
<body>

<p>
Als je achter een proxy zit kan het noodzakelijk om je systeem te laten weten 
dat er een proxy is zodat deze die kan gebruiken. Dit moet gebeuren alvorens je
verder gaat met de installatie. Je moet enkele variabelen exporteren om 
deze configuratie door te voeren:
</p>

<pre caption="Invoeren van de proxy-instellingen">
<codenote>Indien de proxy HTTP-traffiek controleert:</codenote>
# <c>export http_proxy=&quot;http://machine.bedrijf.com:1234/&quot; </c>
<codenote>Indien de proxy FTP-traffiek controleert:</codenote> 
# <c>export ftp_proxy=&quot;ftp://machine.bedrijf.com:1234&quot; </c>
<codenote>Indien de proxy RSYNC-traffiek controleert:</codenote>
# <c>export RSYNC_PROXY=&quot;rsync://machine.bedrijf.com:1234&quot; </c>
</pre>

</body>
</section>

<section>
<title>Netwerk is klaar. Op de plaatsen, start!</title>
<body>

<p>
Het netwerk is nu klaar voor gebruik. Je kan nu gebruik maken van 
<c>ssh</c>, <c>scp</c>, <c>lynx</c>, <c>irssi</c>, <c>wget</c> en andere
zodat je naar andere machines op jouw LAN of op het internet kan connecteren.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Je systeem datum/tijd instellen</title>
<section>
<body>
<p>
Het is nu tijd om je systeem datum/tijd in te stellen. Dit kan je doen met het
<c>date</c> commando.
</p>

<pre caption="Datum en tijd instellen">
# <c>date</c>
Thu Feb 27 09:04:42 CST 2003
<comment>(Indien de datum/tijd verkeerd is, stel deze dan in met het volgende commando:) </comment>
# <c>date 022709042003</c>
<comment>(date MMDDhhmmJJJJ)</comment>
</pre>
</body>
</section>
</chapter>


<chapter>
<title>Bestandssystemen, partities en block-apparaten</title>
<section>
<title>Inleiding tot de block-apparaten</title>
<body>

<p>
In deze sectie nemen we een kijkje naar de HD-specifieke zaken van Gentoo Linux
en Linux in het algemeen, inclusief Linux bestandssystemen, partities en
block-apparaten. Eenmaal je gewend bent met de schijf- en partitiezaken die we
bespreken zal je gegidst worden door het partitioneren en formatteren van je
Gentoo Linux installatie.
</p>

<p>
We beginnen met een introductie tot &quot;block-apparaten&quot;. Het meest
bekende block-apparaat is waarschijnlijk deze die het eerste IDE-apparaat in
een Linux systeem omschrijft.
</p>

<pre caption="/dev/hda, het block-apparaat dat de primary master IDE apparaat
in je systeem omschrijft">
/dev/hda
</pre>

<p>
Indien je systeem SCSI schijven gebruikt, dan zal je eerste HD als volgt
omschreven worden:
</p>

<pre caption="/dev/dsa, het block-apparaat dat de eerste logische SCSI-HD in je
systeem omschrijft">
/dev/sda
</pre>

<p>
De block-apparaten hierboven representeren een <i>abstracte</i> interface naar
de respectieve apparaten. Programmas kunnen deze block-apparaten gebruiken om
met de schijf te communiceren zonder zich aan te trekken van het soort schijf
(SCSI, IDE of iets anders). Het programma kan simpelweg de ruimte op een schijf
adresseren als een bende aan elkaar geschakelde, random-toegankelijke, 512 bytes
grote blokken.
</p>

</body>
</section>
<section>
<title>Partities en fdisk</title>
<body>

<p>
Onder Linux maken we bestandssystemen aan door middel van een speciaal commando
genaamd <c>mkfs</c> (of <c>mke2fs</c>, <c>mkreiserfs</c>, etc...) waarbij we
een specifiek block-apparaat meegeven als een command-line argument.
</p>

<p>
Alhoewel het theoretisch gezien mogelijk is om een &quot;volledige
schijf&quot;-block-apparaat (een die een <i>ganse</i> schijf representeert),
zoals <c>/dev/hda</c> of <c>/dev/sda</c>, te gebruiken voor 1 bestandssysteem,
wordt dit in de praktijk amper toegepast. Immers worden volledige
block-apparaten opgesplitst in kleinere, meer onderhoudsvriendelijke
block-apparaten die we &quot;partities&quot; noemen. Partities worden gecreerd
met een tool zoals <c>fdisk</c>, dat de partitietabel op de schijf aanmaakt en
aanpast. De partitietabel beschrijft exact hoe je schijf opgedeelt is.
</p>

<p>
We kunnen een kijkje nemen in een HD's partitietabel door <c>fdisk</c> uit te
voeren, waarbij we een block-apparaat - dat een volledige schijf moet
representeren - meegeven als argument:
</p>

<note>
Andere tools die gebruikt kunnen worden zijn <c>cfdisk</c>, <c>parted</c>, 
<c>partimage</c>, ... We raden <c>fdisk</c> aan omdat het krachtiger is 
en beter gekend in de Unix/Linux wereld.
</note>

<pre caption="Opstarten van fdisk">
# <c>fdisk /dev/hda</c>
</pre>

<p>
of
</p>

<pre caption="Opstarten van fdisk voor /dev/sda">
# <c>fdisk /dev/sda</c>
</pre>

<impo>
<b>Maak <i>nooit</i> aanpassingen aan de HD's partitietabel indien een van de
partities die aangepast wordt in gebruik is of belangrijke data bevat. Indien
je dat toch doet zal je hoogst waarschijnlijk je data verliezen.</b>
</impo>

<p>
Eenmaal je in fdisk bent, zal je begroet worden door een prompt die er als
volgt uitziet:
</p>

<pre caption="De fdisk prompt">
Command (m for help):
</pre>

<p>
Type <c>p</c> om de partitieconfiguratie van de schijf te bekijken:
</p>

<pre caption="Een voorbeeld partitieconfiguratie">

Command (m for help): <c>p</c>

Disk /dev/hda: 240 heads, 63 sectors, 2184 cylinders  
Units = cylinders of 15120 * 512 bytes    
 
Device Boot    Start       End    Blocks   Id  System
/dev/hda1          1        14    105808+  83  Linux  
/dev/hda2         15        49    264600   82  Linux swap  
/dev/hda3         50        70    158760   83  Linux  
/dev/hda4         71      2184  15981840    5  Extended
/dev/hda5         71       209   1050808+  83  Linux  
/dev/hda6        210       348   1050808+  83  Linux  
/dev/hda7        349       626   2101648+  83  Linux  
/dev/hda8        627       904   2101648+  83  Linux
/dev/hda9        905      2184   9676768+  83  Linux    

Command (m for help):
</pre>

<p>
In dit voorbeeld zie je dat de schijf geconfigureerd is om 7 Linux
bestandssystemen te omvatten (elk een wordt met &quot;Linux&quot; aangeduid)
alsook een swappartitie (aangeduid met &quot;Linux swap&quot;).
</p>

<p>
Kijk naar de overeenkomstige block-apparaten in de meest linkse kolom,
startende met <c>/dev/hda1</c> en eindigend bij <c>/dev/hda9</c>. In de
begindagen van de pc liet partitioneringssoftware toe om maximaal 4 partities
aan te maken (&quot;Primaire partities&quot; genaamd). Dit was te limiterend,
dus werd een workaround gemaakt dat <i>Extended partitionering</i> heet. Een
extended partitie is gelijkaardig aan een primaire partitie, en telt mee voor
de maximum-4-primaire-partities-regel. Ze kan echter een groot aantal
<i>logische</i> partities bevatten, wat de mogelijkheid schept om dus meer dan
4 partities te gebruiken.
</p>

<p>
Partities vanaf <c>hda5</c> zijn per definitie logische partities. De nummers 1
tot en met 4 zijn gereserveerd voor primaire of extended partities.
</p>

<p>
In ons voorbeeld zijn <c>hda1</c>, <c>hda2</c> en <c>hda3</c> primaire
partities en <c>hda4</c> een extended partitie die de logische partities
<c>hda5</c> tot en met <c>hda9</c> bevat. Je zal dus, in dit voorbeeld, nooit 
echt <c>/dev/hda4</c> <i>gebruiken</i> om een bestandssysteem op te zetten --
het dient enkel als een container voor de logische partities <c>hda5</c> tot en
met <c>hda9</c>.
</p>

<p>
Let trouwens p het feit dat elke partitie een &quot;Id&quot; heeft, een
&quot;partitie type&quot;. Telkens je een partitie aanmaakt moet je ervoor
zorgen dat dit type correct ingesteld wordt. 83 is het type voor partities die
een Linux-bestandssysteem zullen bevatten, 82 is het type voor Linux
swappartities en 'fd' is het aangeraden type voor Software RAID partities.
Je kan een type van een bestaande partitie aanpassen met de
<c>t</c> optie in <c>fdisk</c>. De Linux-kernel gebruikt het partitietype om
bestandssystemen automatisch te detecteren en swap-partities tijdens het booten
te activeren.
</p>

</body>
</section>
<section>
<title>fdisk gebruiken om de partities in te stellen</title>
<body>

<p>
Nu dat je een inleiding gekregen hebt over hoe HD's en partities onder Linux
werken, is het tijd om je door het partitioneringsproces van je Gentoo Linux
installatie te gidsen. Wanneer dit gedaan is, zal je partitieconfiguratie er
als volgt uitzien:
</p>

<pre caption="De partitieconfiguratie dat je zal hebben na het volgen van onze
stappen">
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes       

   Device Boot    Start       End    Blocks   Id  System  
/dev/hda1   *         1        14    105808+  83  Linux  
/dev/hda2            15        81    506520   82  Linux swap  
/dev/hda3            82      3876  28690200   83  Linux    

Command (m for help):
</pre>

<p>
In ons voorgesteld &quot;beginners&quot;-partitioneringsschema hebben we 3
partities opgenomen. De eerste (<c>/dev/hda1</c>), kleine partitie aan het 
begin van de schijf wordt de bootpartitie. Het doel van deze partitie is het
omvatten van alle kritische data aangaande het booten -- de GRUB bootloader
informatie (indien je GRUB gaat gebruiken) alsook je Linux kernel(s). De
bootpartitie geeft ons een veilige plaats om alles wat betreft booten in op te
slaan. Gedurende normaal Gentoo Linux gebruik mag deze partitie <e>niet</e>
gemount zijn om veiligheidsredenen. Indien je een SCSI-systeem opstelt zal je
bootpartitie waarschijnlijk <c>/dev/sda1</c> worden.
</p>

<p>
Het is aangeraden om een aparte bootpartitie te gebruiken (die alles bevat wat
de bootloader nodig heeft om correct te functioneren) die zich in het begin van
de HD bevindt. Alhoewel dat niet meer verplicht is, is dit een handige traditie
vanuit de dagen dat de LILO bootloader geen kernels kon laden van
bestandssystemen die zich verder dan de 1024e cilinder bevonden.
</p>

<p>
De 2e partitie (<c>/dev/hda2</c>) zal gebruikt worden voor swapruimte. De
kernel gebruik swapruimte als virtueel geheugen wanneer er niet genoeg RAM
beschikbaar is. Deze partitie is, relatief gezien, niet echt groot; typisch
schommelt deze rond de 512 MiB. Opnieuw, indien je een SCSI systeem opstelt zal
je swappartitie waarschijnlijk <c>/dev/sda2</c> zijn.
</p>

<p>
De 3e partitie (<c>/dev/hda3</c>) is redelijk groot en neemt de rest van de
ruimte op de schijf in. Deze partitie noemen we de &quot;root&quot;-partitie en
zal gebruikt worden om je bestandssysteem zelf - dat Gentoo Linux zal bevatten
- op te plaatsen. Op een SCSI systeem zal deze partitie waarschijnlijk
<c>/dev/sda3</c> worden).
</p>

<p>
Alvorens we de HD partitioneren geven we snel een technisch overzicht
met advies over partities en bestandssystemen die gebruikt kunnen worden
tijdens het installeren van je Gentoo Linux systeem:
</p>

  <table>
  <tr>
  	<th>Partitie</th>
	<th>Grootte</th>
	<th>Type</th>
  	<th>Voorbeeld apparaat</th>
  </tr>
  <tr>
  	<ti>boot partitie, bevat kernel(s) en boot informatie</ti>
	<ti>32 MiB</ti>
	<ti>ext2/3 hoog aangeraden (gemakkelijkst); indien ReiserFS, mount met <c>-o notail</c>. Indien je ext3 of ReiserFS wil gebruiken moet je de grootte van de journal toevoegen aan de grootte van de partitie; in deze gevallen is 64 MiB aangeraden</ti>
  	<ti>/dev/hda1</ti>
  </tr>
   <tr>
  	<ti>swap partitie (er is geen 128 MiB limiet - wel een 2 GiB)</ti>
	<ti>&gt;=2*Hoeveelheid RAM in je systeem is aangeraden maar, sinds 2.4.10-kernel, niet meer verplicht.</ti>
	<ti>Linux swap</ti>
  	<ti>/dev/hda2</ti>
  </tr>
  <tr>
  	<ti>root-partitie, bevat het volledige systeem (/usr, /home, etc)</ti>
	<ti>&gt;=1.5 GiB</ti>
	<ti>ReiserFS, ext3 aangeraden; ext2 is ook ok</ti>
  	<ti>/dev/hda3</ti>
  </tr>
 </table>

<p>
Maak nu de partities aan zoals aangegeven in bovenstaand voorbeeld en met
bovenstaande tabel in het achterhoofd. Allereerst starten we fdisk door
<c>fdisk /dev/hda</c> of <c>fdisk /dev/sda</c> in te typen, afhankelijk van wat
je gebruikt (IDE of SCSI). Type daarna <c>p</c> om je huidige
partitieconfiguratie te bekijken. Staat er nog iets op dat je wilt behouden?
<b>Stop dan nu!</b> Indien je verder gaat met deze instructies zullen <b>alle
bestaande data op de partities die je zal wijzigen verwijderd worden</b>.
</p>

<impo>
Het volgen van deze instructies zal alle data op je partities
<b>verwijderen</b>. Zorg ervoor dat je er zeker van bent dat alle informatie op
de schijf verloren mag gaan. Zorg er tevens voor dat je <b>zeker</b> het
correcte block-apparaat geselecteerd hebt zodat je niet per ongeluk data van de
verkeerde schijf verwijdert.
</impo>

<p>
Het is nu tijd om bestaande partities te verwijderen. Om dit te doen, type je
<c>d</c> en druk je op Enter. Je zal gevraagd worden naar het nummer van de
partitie die je wl verwijderen. Om <c>/dev/hda1</c> te verwijderen type je
bijvoorbeeld:
</p>

<pre caption="Verwijderen van een partitie">
Command (m for help): <c>d</c>
Partition number (1-4): <c>1</c>
</pre>

<p>
fdisk onthoudt nu dat je die partitie wilt verwijderen. Het zal niet meer
tevoorschijn komen indien je <c>p</c> typt, maar het zal tevens niet verwijderd
worden totdat je je aanpassingen doorvoert. Indien je een fout gemaakt hebt en
je wilt afsluiten zonder de aanpassingen door te voeren, type <c>q</c> en druk
op Enter.
</p>

<p>
Veronderstellende dat je inderdaad alle partities wilt verwijderen van je
systeem type je nu continue <c>p</c> om de partitielijst te verkrijgen en
<c>d</c> om de partities 1 voor 1 te verwijderen. Uiteindelijk zal je een
partitietabel bekomen waarin niets van partities gedefinieerd zijn:
</p>

<pre caption="Een lege partitietabel">
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes       

   Device Boot   Start       End    Blocks   Id  System    
   
Command (m for help):
</pre>

<p>
Nu dat fdisk weet dat alle partities verwijderd moeten worden, is het tijd om
de bootpartitie aan te maken. Om dit te doen, type <c>n</c> om een nieuwe
partitie te creeeren, en daarna <c>p</c> om fdisk duidelijk te maken dat je een
primaire partitie wil aanmaken. Wanneer je om de eerste cilinder gevraagd
wordt, druk op Enter. Wanneer je voor de laatste cilinder gevraagd wordt, type
<c>+32M</c> om een partitie van 32 MiB te creeren. Hieronder staan deze
stappen toegepast:
</p>

<note>
Journaled bestandssystemen vereisen extra ruimte voor hun journalbestand.
Default instellingen vereisen ongeveer 33 MiB ruimte voor de journal. Indien je
dus een journaled bestandssysteem wil gebruiken voor <path>/boot</path> moet je
<c>+64M</c> ingeven wanneer je gevraagd wordt naar de laatste cilinder.
</note>

<pre caption="Stappen om een bootpartitie te maken">
Command (m for help): n
Command action
 e  extended
 p  primary
<c>p</c>
Parition number (1-4): <c>1</c>
First cylinder (1-3876, default 1):
Using default value 1
Last cylinder or +size or +sizeM of +sizeK (1-3876, default 3876): <c>+32M</c>
</pre>

<p>
Type nu <c>p</c> om de volgende partitielayout te zien te krijgen:
</p>

<pre caption="De partitie is aangemaakt">
Command (m for help): <c>p</c>
 
Disk /dev/hda: 30.0 GB, 30005821440 bytes 
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes

    Device Boot    Start       End    Blocks   Id  System
 /dev/hda1             1        14    105808+  83  Linux
</pre>

<p>
Nu creeren we de swappartitie. Ook hiervoor typen we eerst <c>n</c> om een
nieuwe partitie aan te maken, gevolgd door <c>p</c> om fdisk duidelijk te maken
dat we een primaire partitie wensen. Daarna typen we <c>2</c> om de 2e primaire
partitie te maken, <c>/dev/hda2</c> in ons geval. Wanneer we gevraagd worden
naar de eerste cilinder, druk op Enter. Wanneer we gevraagd worden naar de
laatste cilinder, type <c>+512M</c> om een partitie van 512 MiB te maken.
Wanneer dit gedaan is, type <c>t</c> om de partitie-type in te stellen, 
<c>2</c> om de zonet gecreeerde partitie te selecteren, en geef dan
<c>82</c> in om het type op &quot;Linux swap&quot; te zetten. Na deze stappen
zou de uitvoer van het <c>p</c> commando er als volgt moeten uitzien:
</p>

<pre caption="Swappartitie is aangemaakt">
Command (m for help): <c>p</c>    
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes

   Device Boot    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux  
/dev/hda2            15        81    506520   82  Linux swap
</pre>

<p>
En uiteindelijk is het tijd om de rootpartitie aan te maken. Om dit te doen
geven we weeral <c>n</c> in om een nieuwe partitie aan te maken, en daarna
<c>p</c> om fdisk duidelijk te maken dat we een primaire partitie wensen. Type
dan <c>3</c> om de 3e primaire partitie aan te maken, <c>/dev/hda3</c> in ons
geval. Wanneer je gevraagd wordt naar de eerste cilinder, druk op Enter.
Wanneer je gevraagd wordt naar de laatste cilinder, druk ook op Enter. Dit zal
een partitie aanmaken die de rest van je schijf inneemt. Nadat deze stappen
uitgevoerd zijn zal <c>p</c> de volgende uitvoer geven:
</p>

<pre caption="De rootpartitie is aangemaakt">
Command (m for help): <c>p</c>    
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes

   Device Boot    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux  
/dev/hda2            15        81    506520   82  Linux swap  
/dev/hda3            82      3876  28690200   83  Linux
</pre>

<p>
Als laatste stap moeten we nog de &quot;bootable&quot; vlag op onze
bootpartitie activeren en de partitieaanpassingen doorvoeren. Om
<c>/dev/hda1</c> bootable te maken, type <c>a</c> en dan <c>1</c> om de eerste
partitie te gebruiken. Indien je nu <c>p</c> ingeeft zal je zien dat er na
<c>/dev/hda1</c> een <c>*</c> staat in de &quot;Boot&quot; kolom.
Schrijf nu de aanpassingen naar de schijf. Dit doe je door <c>w</c> in te geven
gevolgd door Enter. Je partities zijn nu aangemaakt en klaar voor configuratie
van je Gentoo Linux installatie.
</p>

<note>
Indien <c>fdisk</c> of <c>cfdisk</c> te vragen om je systeem te rebooten, doe
dat dan. Anders zal je installatie de nieuwe partitielayout niet detecteren.
</note>

</body>
</section>
<section>
<title>Bestandssystemen aanmaken</title>
<body>

<p>
Nu dat de partities aangemaakt zijn is het tijd om de bestandssystemen op de
boot- en root-partitie aan te maken zodat deze kunnen gemount worden om data op
te kunnen zetten. We zullen tevens de swappartitie activeren om de hoeveelheid
virtueel geheugen te vergroten.
</p>

<p>
Gentoo Linux ondersteunt een grote hoeveelheid aan bestandssystemen; elk soort
heeft zijn voor- en nadelen en zijn eigen performantiekarakteristieken. Op dit
moment ondersteunen we ext2, ext3, XFS, JFS en ReiserFS.
</p>

<p>
ext2 is het veelvuldig gebruikte en echte Linux bestandssysteem, maar ze heeft
geen metadata journaling, wat wil zeggen dat de gebruikelijke ext2
bestandssysteemcontroles die periodiek optreden redelijk tijdconsumerend zijn.
Er is nu een generatie van <i>journaled</i> bestandssystemen beschikbaar die
zeer snel gecontroleerd kunnen worden en dus algemeen geprefereerd worden boven
hun niet-journaled vriendjes. Journaled bestandssystemen vereisen niet meer de
lange controles wanneer je je systeem boot en je bestandssysteem niet
correct werd afgesloten.
</p>

<p>
ext3 is het journaled broertje van ext2; ze levert metadata journaling voor
zeer snelle herstelling van de schijf, samen met enkele andere journaling-modes
zoals volledige en geordende data journaling. ext3 is zeer goed en betrouwbaar.
Ze heeft algemeen gezien goede performantie-eigenschappen onder de meest 
courante situaties. Omdat ze niet extensief gebruik maakt van boomstructuren 
(intern gezien dan) is ze niet enorm schaleerbaar, wat wil zeggen dat ze niet 
de ideale keuze is voor zeer grote bestandssystemen of in situaties waar je 
zeer grote bestanden of hoeveelheden van bestanden in een enkele directorie 
plaatst. Wanneer je ext3 echter gebruikt met zijn default waarden is ext3 een 
zeer geschikt bestandssysteem.
</p>

<p>
ReiserFS is een B*-boomstructuur gebaseerd bestandssysteem dat zeer goede
performantie-resultaten neerschrijft en zowel ext2 als ext3 ver achter zich
laat wanneer we te maken hebben met kleine bestanden (kleiner dan 4 KiB),
veelal met een factor 10 tot 15! ReiserFS schaleert trouwens zeer goed en heeft
metadata journaling. Vanaf kernel 2.4.18 is ReiserFS zeer stabiel en wordt ze
hoog aangeschreven voor zowel algemene als extreme situaties zoals het aanmaken
van grote bestandssystemen, het gebruik van veel kleine bestanden, grote
bestanden, en directories met tienduizenden bestanden. ReiserFS is het
bestandssysteem dat we aanraden voor niet-boot partities.
</p>

<p>
XFS is een bestandssysteem met metadata journaling dat volledig ondersteund
wordt door Gentoo Linux's <path>xfs-sources</path> kernel. Ze komt met robuste
mogelijkheden en is geoptimaliseerd naar schaleerbaarheid. We raden deze enkel
aan op Linux-systemen met high-end SCSI en/of fibre channel opslag en bij
ononderbreekbare stroomvoorziening (UPS). Omdat XFS zeer agressief data cachet
in RAM kunnen slecht geprogrammeerde programmas (programmas die niet de nodige
zekerheden incalculeren wanneer ze bestanden naar de schijf schrijven - en zo
bestaan er veel) grote hoeveelheden data verliezen wanneer het systeem
plotseling stilvalt.
</p>

<p>
JFS is IBM's eigen hoog-performant journaling bestandssysteem. Ze is recent
productierijp bevonden en dus is er niet genoeg bekend om commentaar (zowel
positieve of negatieve) te formuleren betreffende de stabiliteit.
</p>

<p>
Indien je op zoek bent naar het meest stabiel-bevonden journaled 
bestandssysteem, gebruik dan ext3. Indien je op zoek bent naar een 
hoog-performant bestandssysteem, gebruik dan ReiserFS. Beide zijn volwassen
genoeg en zijn aangeraden voor algemeen gebruik.
</p>

<!-- Randgeval, zorgt voor verwarring...
<p>
Maar alvorens je dat doet wil je misschien het begin van elke partitie
initialiseren met <c>dd</c>, vooral indien je van plan bent een al bestaande 
partitie van vroeger te hergebruiken. Dit is ten zeerste aangeraden indien je 
een XFS bestandssysteem op een bestaande partitie wilt gebruiken waar vroeger 
ReiserFS op stond. Dit zal er voor zorgen dat het bestandssysteem niet verkeerd
geidentificeerd wordt door Linux's automatische bestandssysteemdetectie code.
Je kan dit als volgt doen:
</p>

<pre caption="Initialiseren van de eerste 1024 bytes van de partitie">
# <c>dd if=/dev/zero of=/dev/hda3 bs=1k count=1</c>
<comment>(Vervang hda3 met de partitie die je wilt schoonmaken)</comment>
</pre>

<warn>
Het bovenstaande commando zal alle data van de partitie verwijderen. Wees dus
voorzichtig en dubbelcontroleer wat je doet. Indien je hier een fout maakt
verwijder je misschien data die je echt niet kwijt wou.
</warn>

-->

<p>
Ons baserend op bovenstaand voorbeeld zullen we nu de volgende commando's
gebruiken om onze partities klaar te stomen voor gebruik:
</p>

<pre caption="Initialiseren van de partities (voorbeelden)">
# <c>mke2fs -j /dev/hda1</c>
# <c>mkswap /dev/hda2</c>
# <c>mkreiserfs /dev/hda3</c>
</pre>

<p>
We kozen ext3 voor onze <c>/dev/hda1</c> bootpartitie omdat ze een robuust
journaling bestandssysteem is dat door alle grote bootloaders ondersteund
wordt. We gebruikten <c>mkswap</c> voor onze <c>/dev/hda2</c> swappartitie (om
de partitie klaar te stomen voor swapgebruik). En voor onze rootpartitie,
<c>/dev/hda3</c>, kozen we voor ReiserFS, aangezien het een stabiel journaling
bestandssysteem is met zeer goede performantie. 
Initialiseer nu je eigen partities. 
</p>

<p>
Ter referentie zijn hier de verschillende <c>mkfs</c>-commando's die tijdens de
installatie beschikbaar zijn om je bestandssystemen aan te maken:
</p>

<p>
<c>mkswap</c> is het commando dat een swappartitie initialiseert:
</p>

<pre caption="Swappartitie initialiseren">
# <c>mkswap /dev/hda2</c>
</pre>

<p>
Je kan het <c>mke2fs</c> commando gebruiken om een ext2 bestandssysteem aan te
maken:
</p>

<pre caption="Aanmaken van een ext2 bestandssysteem">
# <c>mke2fs /dev/hda1</c>
</pre>

<p>
Indien je ext3 wilt gebruiken kan je deze aanmaken met <c>mke2fs -j</c>:
</p>

<pre caption="Aanmaken van een ext3 bestandssysteem">
# <c>mke2fs -j /dev/hda3</c>
</pre>

<note>Je vind meer informatie over ext3 onder Linux 2.4 op
<uri>http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html</uri> (Engels).
</note>

<p>
Om een ReiserFS-bestandssysteem aan te maken maak je gebruik van het 
<c>mkreiserfs</c> commando:
</p>

<pre caption="Aanmaken van het reiserfs filesysteem">
# <c>mkreiserfs /dev/hda3</c>
</pre>

<p>
Om een XFS bestandssysteem aan te maken maak je gebruik van het <c>mkfs.xfs</c>
commando:
</p>

<pre caption="Aanmaken van een XFS bestandssysteem">
# <c>mkfs.xfs /dev/hda3</c>
</pre>

<note>
Je wilt mogelijk nog wat extra argumenten meegeven aan het <c>mkfs.xfs</c>
commando: <c>-d agcount=3</c> om het aantal gealloceerde groepen te verminderen
- XFS vereist minstens 1 gealloceerde groep per 4 GiB van je partitie, dus
indien je een 20 GiB partitie hebt zal je een minimum agcount van 5 moeten
meegeven, en <c>-l size=32m</c> om de journalgrootte te vergroten naar 32 MiB
wat de performantie verbetert.
</note>

<p>
Om een JFS bestandssysteem aan te maken gebruik je het <c>mkfs.jfs</c>
commando:
</p>

<pre caption="Aanmaken van een jfs filesysteem">
# <c>mkfs.jfs /dev/hda3</c>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Partities mounten</title>
<section>
<body>

<p>
We activeren nu onze geinitialiseerde swap-partitie omdat we later meer 
virtueel geheugen nodig zullen hebben:
</p>

<pre caption="Activeren van de swappartitie">
# <c>swapon /dev/hda2</c>
</pre>

<p>
Daarna maken we het <path>/mnt/gentoo/boot</path> mountpunt aan en mounten we 
onze bestandssystemen aan de nodige mountpunten.
Eenmaal onze boot- en rootbestandssystemen gemount zijn, zullen alle bestanden
die wa naar <path>/mnt/gentoo</path> kopieren op onze nieuwe bestandssystemen
staan. Let op, indien je Gentoo Linux installeert met aparte <path>/usr</path>
en <path>/var</path> partities (dus niet zoals in ons voorbeeld) zal je deze
moeten mounten op <path>/mnt/gentoo/usr</path> respectievelijk
<path>/mnt/gentoo/var</path>.
</p>

<impo>
Als je <e>boot</e>-partitie (deze die de kernel bevat) ReiserFS is en je wil
later gebruik maken van de GRUB bootloader, vergeet dan niet deze te mounten 
met de <c>-o notail</c> argumenten zodat GRUB correct geinstalleerd wordt. 
Zorg er ook voor dat <c>notail</c> in je nieuwe <path>/etc/fstab</path> 
te staan komt. We komen daar later nog op terug. Indien je later LILO zal
gebruiken als bootloader dan is de <c>-o notail</c> niet nodig. Het is altijd
veilig om bij ReiserFS de <c>-o notail</c> te gebruiken indien je niet zeker
bent wat je moet doen.
</impo>

<pre caption="Aanmaken van mountpoints en mounten van partities">
# <c>mount /dev/hda3 /mnt/gentoo</c>
# <c>mkdir /mnt/gentoo/boot</c>
# <c>mount /dev/hda1 /mnt/gentoo/boot</c>
</pre>

<impo>
Als je problemen hebt met het mounten van je bootpartitie in ext2, probeer 
dan <c>mount /dev/hdXX /mnt/gentoo/boot -t ext2</c>
</impo>
</body>
</section>
</chapter>

<chapter>
<title>Niveau-tarballs en chroot</title>
<section>
<title>De gewenste niveau-tarball selecteren</title>
<body>

<!-- Eigen toevoeging, verduidelijkt het gebruik van tarball -->

<note>
Een <i>tarball</i> is een archief, eindigend op <i>.tar.gz</i>, <i>.tgz</i>,
<i>.tar.bz2</i> of <i>.tbz2</i> en wordt zeer vaak gebruikt in de free software
community.
</note>

<p>
Nu moet je beslissen welk niveau-tarball je wenst te gebruiken als beginpunt
voor je installatie. De niveaus (stages) op de Live CD bevinden zich in
<path>/mnt/cdrom/stages</path>; je kan <c>ls /mnt/cdrom/stages</c>
ingeven om te zien wat er zich op je CD bevindt.
</p>

<p>
<b>GRP gebruikers</b> moeten de <path>stage3-xx-yy.tar.bz2</path>
tarball gebruiken.
</p>

<p>
Indien je een installatie wilt doen met een niveau-tarball die <i>niet</i> 
op je CD staat (wat waarschijnlijk het geval is indien je met de "basic" CD
geboot bent) moet je deze tarball downloaden via de volgende instructies. 
Indien je al een niveau-tarball hebt die je wenst te gebruiken (zoals de meeste
gebruikers) ga dan direct door naar de volgende sectie.
</p>

<note>
Op de basis liveCD is <c>lynx</c> vervangen door <c>links2</c>. Om <c>links2</c>
met een proxy te gebruiken, druk je op Escape als <c>links2</c> opgestart hebt,
ga naar Setup, Network Options. Vergeet niet om alles op te slaan in 
Setup,Save Options.
</note>

<pre caption="Zoeken naar de niveau-tarballs">
# <c>cd /mnt/gentoo</c>
<comment>(Gebruik lynx om de URL van je tarball te weten te komen.)</comment>
# <c>lynx http://gentoo.oregonstate.edu/releases/x86/1.4/</c>
<comment>(Gebruik [Pijl omhoog] en [Pijl omlaag] (of de [Tab]) om naar de correcte map te gaan. 
Zorg ervoor dat de niveau-tarball die je wilt gebruiken geselecteerd is. Druk [d] om de download 
te starten; eenmaal gedownload sla je het bestand op en verlaat je de browser. 
Je kan eveneens gebruik maken van wget via de commandline indien je de URL kent of onthoudt:)</comment>
# <c>wget <comment>&lt;Voeg hier de URL van de tarball in&gt;</comment></c>
</pre>

</body>
</section>
<section>
<title>Uitpakken van de niveau-tarballs</title>
<body>

<p>
Nu is het tijd om de inhoud van de tarball uit te pakken in
<path>/mnt/gentoo</path>. Denk eraan, je hoeft enkel <b>1</b> niveau-tarball te
gebruiken, dus ofwel <i>stage1</i>, <i>stage2</i> of <i>stage3</i>. Dus indien
je een niveau-3 installatie van Gentoo wilt uitvoeren moet je enkel de
<i>stage3</i> tarball uit te pakken. Dit doe je als volgt:
</p>

<impo>
Vergewis jezelf ervan dat je de <c>p</c> optie bij <c>tar</c> gebruikt. Als je 
dat vergeet zal dat leiden tot bestanden met verkeerde permissies.
</impo>

<pre caption="Uitpakken van de niveau-tarball">
# <c>cd /mnt/gentoo</c>
<comment>Verander &quot;stage3&quot; naar &quot;stage2&quot; of
&quot;stage1&quot; indien je van die niveau's wilt starten.</comment>
<comment>Indien je je niveau-tarball van internet gedownload hebt, verander het
onderstaande pad dan zodat deze begint met &quot;/mnt/gentoo&quot; in plaats
van &quot;/mnt/cdrom/stages&quot;</comment>
# <c>tar -xvjpf /mnt/cdrom/stages/stage3-*.tar.bz2</c>
</pre>

<p>
Indien je je niveau-tarball in <path>/mnt/gentoo</path> gedownload had, kan je
deze nu verwijderen door <c>rm /mnt/gentoo/stage*.tar.bz2</c> in te typen.
</p>

</body>
</section>
<section>
<title>GRP pakketten/snapshots stappen</title>
<body>

<impo>
De volgende instructies zijn enkel voor GRP gebruikers.
</impo>

<p>
<b>GRP Gebruikers:</b> Er staat een Portage snapshot op de Live CD.
Je moet deze snapshot gebruiken zodat je de <c>emerge sync</c> stap
later in dit document kan overslaan, aangezien <c>emerge sync</c> een
netwerkconnectie vereist. Pak deze snapshot als volgt uit:
</p>

<pre caption = "De Portage snapshot gebruiken">
<comment>Vervang yyyymmdd met de datestamp in het bestand</comment>
# <i>tar -xvjf /mnt/cdrom/snapshots/portage-yyyymmdd.tar.bz2 -C /mnt/gentoo/usr</i>
</pre>

<p>
Dit zal een snapshot van de Portage structuur in je nieuwe Gentoo
installatie uitpakken. Nu moet je niet meer naar het Internet
connecteren en <c>emerge sync</c> gebruiken om de Portage structuur
binnen te halen. Kopieer nu de distfiles en pakketten van de LiveCD naar
de correcte directories:
</p>

<pre caption = "GRP bestanden kopieren">
# <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
# <i>cp -a /mnt/cdrom/packages /mnt/gentoo/usr/portage/packages</i>
</pre>

<p>
Alle relevante bestanden bevinden zich nu op je systeem zodat je Gentoo
Linux kan installeren -- zelfs zonder netwerk connectie.
</p>

</body>
</section>
<section>
<title>Mirrors selecteren (optioneel)</title>
<body>

<p>
<c>mirrorselect</c> is een tool gemaakt om automatisch de snelste mirror
te selecteren gebaseerd op jouw locatie, of om de gebruiker manueel een
mirror te laten selecteren vanuit een lijst van beschikbare mirrors.
Jammer genoeg werkt <c>mirrorselect</c> niet altijd achter alle routers.
</p>

<pre caption = "Mirrorselect gebruiken">
<comment>Om automatisch een mirror te selecteren:</comment>
# <i>mirrorselect -a -s4 -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
<comment>Om interactief een mirror te selecteren:</comment>
# <i>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
</pre>

<p>
Indien om een of andere reden <c>mirrorselect</c> niet werkt kan je
gewoon verder gaan met de installatie aangezien geen aanpassingen
gemaakt zijn.
</p>

</body>
</section>
<section>
<title>Chrooten in je nieuwe omgeving</title>
<body>

<p>
Nu gaan we <c>chroot</c> gebruiken om &quot;in&quot; je nieuwe Gentoo Linux
installatieomgeving te werken.
</p>

<note>
Het kan zijn dat je gedurende <c>env-update</c> een waarschuwing krijgt in 
verband met het ontbreken van <path>/etc/make.profile/make.defaults</path>: 
negeer deze waarschuwing. We gaan later <c>emerge sync</c> uitvoeren welke 
het probleem zal oplossen.
</note>

<pre caption="Voorbereiden van de Gentoo Linux installatieomgeving">
# <c>mount -t proc /proc /mnt/gentoo/proc</c>
# <c>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</c>
# <c>chroot /mnt/gentoo /bin/bash</c>
# <c>env-update</c>
Regenerating /etc/ld.so.cache...
# <c>source /etc/profile</c>
<comment>(Bovenstaande zal je shell de nieuwe paden en geupdate binaire
bestanden doen gebruiken)</comment>
</pre>

<p>
Nadat je deze commando's uitgevoerd hebt zal je &quot;in&quot; je nieuwe 
Gentoo Linux omgeving zitten; in <path>/mnt/gentoo</path>. We kunnen de rest
van het installatieproces uitvoeren vanuit deze gechrootte omgeving.
</p>

</body>
</section>
</chapter>

<chapter>
<title>De huidige Portage boomstructuur binnenhalen met sync</title>
<section>
<body>

<!-- Nog niet geldig, uncomment wanneer wel 

<p>
Om de downloadsnelheid te maximaliseren moet je nu een of meerdere
rsync- en distfiles mirrors selecteren. Om deze taak te vereenvoudigen
hebben we een tool genaamd <c>mirrorselect</c>. Voer de volgende 2
commando's uit:
</p>

<pre caption = "Een mirror selecteren">
<comment>We laten mirrorselect eerst 5 dichtbijzijnde mirrors
kiezen</comment>
# <i>mirrorselect -a -s5</i>
<comment>Nu selecteren we zelf een goede rsync mirror</comment>
# <i>mirrorselect -i -r</i>
</pre>

-->

<impo>
Indien je een GRP installatie doet moet je de volgende sectie aangaande
<c>emerge sync</c> negeren.
</impo>

<p>
Nu moet je <c>emerge sync</c> uitvoeren. Dit commando zorgt ervoor dat
Portage de meest recente versie van de Gentoo Linux Portage structuur
van het internet haalt. Indien je een Portage structuur snapshot van "CD
1" hebt geinstalleerd voordien, dan kan je gerust deze stappen
overslaan. De Portage structuur bevat alle scripts (genaamd ebuilds) die
nodig zijn om de pakketten onder Gentoo Linux te compileren en
installeren. Op dit moment hebben we ebuild scripts voor meer dan 4000
pakketten. Eenmaal <c>emerge sync</c> afgelopen is zal je een volledige
Portage structuur hebben in <path>/usr/portage</path>.
</p>

<pre caption="Nieuwe portage-boomstructuur binnenhalen">
# <c>emerge sync</c>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Gentoo optimalisaties instellen (make.conf)</title>
<section>
<body>

<p>
Nu dat we een werkende Portage boomstructuur hebben, is het tijd om de
optimalisatie en optionele configuratie-parameters in te stellen voor je Gentoo
Linux systeem. Portage zal deze instellingen gebruiken wanneer je een programma
installeert via Portage. Hiervoor moet je het bestand 
<path>/etc/make.conf</path> aanpassen.
In dit bestand definieer je de <c>USE</c>-argumenten waarmee je de optionele 
functionaliteit specifieert die je in je packages wenst; algemeen zijn de 
default waarden (en dus een <e>lege</e> of niet gedefinieerde USE variabele) 
genoeg. Meer informatie over <c>USE</c> vlaggen kan je <uri
link="http://www.gentoo.org/doc/nl/use-howto.xml">hier</uri> vinden. Een
volledige lijst van bestaande USE-vlaggen vind je <uri
link="http://www.gentoo.org/dyn/use-index.xml">hier</uri> (Engels).
</p>

<p>
Indien je van niveau-1 start stel je best eveneens de correcte <c>CHOST</c>, 
<c>CFLAGS</c> en <c>CXXFLAGS</c> variabelen in voor je eigen systeem 
(voorbeelden vind je in het bestand zelf, als commentaar). Indien je een 
niveau-2 of 3 tarball gebruikt zijn deze al ingesteld en vereisen deze
geen verdere aanpassingen.
</p>

<warn>
<b>Geavanceerde gebruikers:</b> Als je van plan was een 
ACCEPT_KEYWORDS="~x86" Gentoo systeem te installeren, dan moet je erop letten
dan je ACCEPT_KEYWORDS niet eerder zet dan na de bootstrap fase (niveau 1).
</warn>

<impo><b>Geavanceerde gebruikers</b>: De <c>CFLAGS</c> en
<c>CXXFLAGS</c> instellingen beschrijven de optimalisaties die de C en C++ 
compiler moeten toepassen op de te compileren broncode. Het is bijvoorbeeld 
de gewoonte voor Athlon XP gebruikers om  &quot;-march=athlon-xp&quot; in te
stellen in hun CFLAGS en CXXFLAGS zodat alle packages geoptimaliseerd worden 
voor de specifieke instructies van deze architectuur. Het 
<path>/etc/make.conf</path> bestand bevat een algemene handleiding wat 
betreft mogelijke instellingen voor CFLAGS en CXXFLAGS.
</impo>

<!-- needs qa
<note><b>Geavanceerde gebruikers:</b> Indien je van een niveau-1 start
en je wil de CFLAGS en CXXFLAGS niet zelf instellen, dan kan je het
<c>genflags</c> programma gebruiken. Deze zal zelf de nodige vlaggen
voor jouw CPU architectuur kiezen. Type gewoon <c>emerge -O genflags</c>
en voer dan <c>info2flags</c> uit. <c>info2flags</c> zal CHOST, CFLAGS
en CXXFLAGS instellingen aanraden welke je dan zelf kan toevoegen aan
<path>/etc/make.conf</path>.
</note>
-->

<p>
Indien je achter een firewall zit kan je hierin tevens proxy-informatie
neerschrijven zodat Portage weet heeft van je firewall. Gebruik het volgende
commando op <path>/etc/make.conf</path> aan te passen met <c>nano</c>, een
simpele, visuele editor.
</p>

<pre caption="Aanpassen van make.conf">
# <i>nano -w /etc/make.conf</i> 
</pre>

<note>
<b>Geavanceerde gebruikers:</b> Mensen die werkelijk het volledige 
compileerproces willen tweaken kijken best eens naar het 
<path>/etc/make.globals</path> bestand. Dit bestand bevat Gentoo's default 
waarden en mag nooit aangeraakt worden. Als de defaults niet voldoende zijn 
moet je de nieuwe waarden in <path>/etc/make.conf</path> plaatsen, daar 
waarden in <path>make.conf</path> voorrang hebben op de waarden in 
<path>make.globals</path>. Als je de USE variabele wilt tweaken, kijk dan 
in <path>/etc/make.profile/make.defaults</path>. Als je een USE-instelling wilt 
uitschakelen die je daarin vindt, voeg dan de nodige 
<c>USE=&quot; -foo&quot;</c> toe aan <path>/etc/make.conf</path> om elke
<c>foo</c> USE instelling uit te schakelen indien deze per default in
<path>/etc/make.globals</path> of <path>/etc/make.profile/make.defaults</path>
geactiveerd is.
</note>

<warn>
Zorg ervoor dat je niet <c>static</c> aan je <c>USE</c> variabele
toevoegt tot na de bootstrap!
</warn>

</body>
</section>
</chapter>

<chapter>
<title>Starten met niveau 1</title>
<section>
<body>

<note>
Indien je niet vanuit een niveau-1 tarball start, sla deze sectie dan over.
</note>

<p>
De niveau-1 tarball is voor volledige optimalisatie. Indien je deze tarball
gekozen hebt ben je waarschijnlijk op zoek naar een uiterst-geoptimaliseerd en
up-to-date systeem. Veel plezier!
Installeren vanuit een niveau 1 duurt lang, maar het resultaat is een systeem 
dat van het begin af naar jouw systeem geoptimaliseerd is.
</p>

<p>
Het is nu tijd om het &quot;bootstrap&quot; proces te starten. Dit proces duurt
ongeveer 1-2 uren afhankelijk van de snelheid van je pc; het duurt ongeveer 2
uren op een 1200Mhz AMD Athlon systeem. Gedurende deze tijd zullen de GNU C
bibliotheek, de compiler-collectie (gcc) en enkele andere belangrijke
sleutelprogrammas gecompileerd en geinstalleerd worden. Start het
bootstrap-proces als volgt:
</p>

<pre caption="Uitvoeren van het bootstrap proces">
# <i>cd /usr/portage</i>
# <i>scripts/bootstrap.sh</i>
</pre>

<p>
Het &quot;bootstrap&quot; proces is nu begonnen.
</p>

<note>
<c>bootstrap.sh</c> ondersteunt nu tevens de <c>--fetchonly</c> optie. 
Gebruikers van inbelverbindingen zullen dit zeer handig vinden; het zal alle
bootstrapgerelateerde bestanden in 1 trek binnenhalen zodat je hierna je
internetconnectie mag afsluiten. Zie <c>bootstrap -h</c> voor meer informatie.
</note>

<note>
Portage gebruik default de <c>/var/tmp</c> map gedurende het compileren van de 
packages, wat vaak verschillende honderden megabytes van tijdelijke ruimte 
vereist. Als je een andere map wilt laten gebruiken maak je een 
PORTAGE_TMPDIR variabele aan <e>voordat</e> je het bootstrapproces begint:
</note>

<pre caption="Aanpassen van de tijdelijke portage map">
# <i>export PORTAGE_TMPDIR="/anderedir/tmp"</i>
</pre>

<p>
<c>bootstrap.sh</c> zal <c>binutils</c>, <c>gcc</c>, <c>gettext</c> en
<c>glibc</c> compileren, waarna ze <c>binutils</c>, <c>gcc</c> en <c>gettext</c>
hercompileert met de nieuwe <c>glibc</c>. Uiteraard neemt dit proces een flinke
hoeveelheid tijd in beslag. Eenmaal dit proces beeindigd is zal je systeem in
een &quot;niveau-2&quot; situatie zitten. Je kan dus hierna &quot;Starten van
niveau 2&quot;.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Starten van niveau 2 of vervolgen van niveau-1</title>
<section>
<body>

<note>
Deze sectie is bedoeld voor diegenen die begonnen zijn met een niveau-1
installatie en al het bootstrap-proces ondergaan hebben, en voor de mensen die
beginnen met een niveau-2 installatie. Indien dit niet voor jou is (maw je wil
een niveau-3 installatie uitvoeren) sla je deze sectie over.
</note>

<warn>
Indien je van niveau 2 begint, verander dan de CHOST variabele in
<path>/etc/make.conf</path> <e>niet</e>. Indien je dit wel doet zal dit
resulteren in vreemde en verschillende compilatiefouten. We werken
uiteraard aan dit probleem.
</warn>

<p>
De niveau-2 tarball bevat al een gebootstrapped systeem. Al wat je nu nog hoeft 
te doen is de rest van je systeem compileren.
</p>

<note>
Indien je vanuit een voorgecompileerde stage2 start en je wil er zeker van zijn
dat je compiler's toolchain volledig up-to-date is, voeg dan de <c>-u</c> toe
aan het onderstaande commando. Indien je niet weet wat dit doet, dan is het
veilig om deze suggestie te negeren.
</note>

<pre caption="Compileren van het basissysteem">
# <c>emerge -p system</c>
<comment>(Dit toont de packages die geinstalleerd zullen worden)</comment>
# <c>emerge system</c>
</pre>

<p>
Het zal een tijdje duren alvorens het volledige systeem gecompileerd is. Je
krijgt het echter dubbel en dik terug: je systeem zal geoptimaliseerd zijn naar
jouw hardware en cpu. Het nadeel is echter dat je je een tijdje zal moeten
bezig houden.  De vertaler van dit document raadt je &quot;Blauw Bloed&quot;
van Pieter Aspe aan. Wanneer <c>emerge system</c> gedaan is, heb je een
niveau-3 Gentoo Linux systeem.
</p>

<p>
De compilatie is nu klaar. Ga verder naar &quot;Tijdzone instellen&quot;.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Starten van niveau 3</title>
<section>
<body>

<note>
Deze sectie is voor de mensen die <b>beginnen</b> met een niveau-3 installatie,
en niet voor deze die begonnen zijn met een niveau-1 of niveau-2 - zij moeten
deze sectie overslaan. GRP gebruikers moeten de volgende sectie
gebruiken.
</note>

<warn>
Indien je van niveau 3 begint, verander dan de CHOST variabele in
<path>/etc/make.conf</path> <e>niet</e>. Indien je dit wel doet zal dit
resulteren in compilatiefouten. 
</warn>

<p>
De niveau-3 tarball levert een volledig functioneel basisch Gentoo
systeem, dus verdere compilatie is niet nodig.
</p>

<note>
<b>Geavanceerde gebruikers:</b> Aangezien niveau-3 
voorgecompileerd is is het mogelijk dat deze oud is. Indien je dat erg vindt
kan je je huidige niveau-3 updaten zodat deze de meest up-to-date versies 
bevat door een backup te maken van <path>/etc/make.conf</path>, en vervolgens
<c>export CONFIG_PROTECT="-*" emerge -u ststem</c> uit te voeren (hier is
een werkende netwerk verbinding voor nodig). Hierna kan je de backup weer
terug plaatsen. Echter wees gewaarschuwd: indien je niveau-3 werkelijk 
oud is is dit een langdurig  proces. Indien het een relatief recent 
niveau-3 tarball is zal dit proces snel  klaar zijn en zal je kunnen 
profiteren van de laatste Gentoo updates. In eender welk geval ben je 
vrij om deze stappen over te slaan en te beginnen met de volgende sectie.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Tijdzone instellen</title>
<section>

<body>

<p>
Nu moet je je tijdzone instellen.
</p>

<p>
Zoek je tijdzone (of gebruik GMT indien je de Greenwich Mean Time wil
gebruiken) in <path>/usr/share/zoneinfo</path>. Maak dan een symbolische link
aan naar <path>/etc/localtime</path> door het volgende in te typen:
</p>

<pre caption="Instellen van de tijdzone">
# <i>ln -sf /usr/share/zoneinfo/path/to/timezonefile /etc/localtime</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>/etc/fstab aanpassen</title>
<section>
<body>

<impo>
Vergeet niet, indien je bestanden wil aanpassen, maak dan gebruik van
<c>nano -w "bestandsnaam"</c>.
</impo>

<p>
Je Gentoo Linux systeem is bijna klaar om te gebruiken. Al wat we nu nog moeten
doen is enkele belangrijke systeembestanden aanmaken, kernel configureren en 
een bootloader installeren. Het eerste bestand dat we gaan configureren is
<path>/etc/fstab</path>. Onthoud dat je de <c>notail</c> optie moet gebruiken
voor je boot-partitie indien je er een ReiserFS bestandssysteem op geinstalleerd
hebt. Specifieer eveneens <c>ext2</c>, <c>ext3</c>, <c>reiserfs</c>, <c>xfs</c> 
of <c>jfs</c> bij de correcte partities.
</p>

<warn>Gebruik iets vergelijkbaars met de <path>/etc/fstab</path> die hieronder
staat, maar vervang uiteraard de &quot;BOOT&quot;, &quot;ROOT&quot; en 
&quot;SWAP&quot; met de echte blok apparaten (zoals <c>hda1</c>, etc) and
&quot;ext2&quot;, &quot;ext3&quot; met de werkelijk gebruikte 
bestandssystemen:</warn>

<pre caption="fstab aanpassen">
<comment>
# /etc/fstab: statische bestandssysteeminformatie.
#
# noatime schakelt het gebruik van atimes uit voor betere performantie
# (atime's zijn normaal gezien niet nodig). notail verbetert de 
# performantie van reiserfs-bestandssystemen (ten nadele van schijfruimte).
# Het is veilig om de noatime opties te laten vallen indien je vrij tussen
# notail en tail wilt wisselen.

# &lt;fs&gt;           &lt;mountpoint&gt;   &lt;type&gt;   &lt;opts&gt;          &lt;dump/pass&gt;

# NOTE: Als je boot-partitie ReiserFS is, vergeet notail niet !!!
</comment>
/dev/BOOT           /boot       ext2	 noauto,noatime	 1 2
/dev/ROOT           /           ext3	 noatime         0 1
/dev/SWAP           none        swap	 sw              0 0
/dev/cdroms/cdrom0  /mnt/cdrom  iso9660	 noauto,ro       0 0
proc                /proc       proc	 defaults        0 0
</pre>

<warn>
Merk op dat <path>/boot</path> NIET gemount wordt tijdens het opstarten. 
Dit is om de data in <path>/boot</path> te beschermen tegen datacorruptie. 
Indien je dus <path>/boot</path> nodig hebt, vergeet die dan niet te mounten !
</warn>

</body>
</section>
</chapter>

<chapter>
<title>Kernel en syslogger installeren</title>
<section>
<title>Kernel selecties</title>
<body>

<p>
Er zijn two manieren om een kernel te installeren. Je kan ofwel je eigen
kernel configureren, ofwel maak je gebruk van <c>genkernel</c> welke je
kernel zelf zal configureren en compileren.
</p>

<p>
Of je nu je kernel zelf configureert, of je gebruikt het
<c>genkernel</c> script, je moet de kernel broncode eerst installeren.
Gentoo levert verschillende kernel ebuilds; een lijst kan je vinden op
<uri link="/doc/nl/gentoo-kernel.xml">onze website</uri>. Indien je niet
zeker bent welke kernel sources je wil installeren raden we je aan om
<c>gentoo-sources</c> te nemen. Indien je XFS ondersteuning wil moet je
<c>xfs-sources</c> of <c>gs-sources</c> nemen. Gentoo's Live CD gebruikt
<c>gs-sources</c> en <c>xfs-sources</c>. Er is tevens een
<c>gaming-sources</c> kernel geoptimaliseerd voor spelletjes, welke
perfect werkt met de "Preemptible kernel" optie.
</p>

<p>
Kies een kernel en installeer ze gelijkaardig aan het volgende
voorbeeld:
</p>

<pre caption = "Kernel emergen">
# <i>emerge -k sys-kernel/gentoo-sources</i>
</pre>

<p>
De <path>/usr/src/linux</path> symbolische link zal wijzen naar je
nieuwe geinstalleerde broncode. Portage gebruikt de
<path>/usr/src/linux</path> symbolische link om ebuilds die kernel
modules leveren te configureren voor de correcte kernel.
<path>/usr/src/linux</path> wordt aangemaakt wanneer je je eerste kernel
emerget, maar vanaf dan zal Portage deze link niet meer aanpassen.
</p>

</body>
</section>
<section>
<title>Genkernel gebruiken om de kernel te compileren</title>
<body>

<p>
Nu dat je kernel broncode geinstalleerd is is het tijd om je kernel te
configureren. Er zijn twee manieren hiervoor. De eerste is om
<c>genkernel</c> te gebruiken. <c>genkernel</c> configureert een kernel
zodat deze bijna identiek is aan deze van de Live CD. Dat wil zeggen dat
<c>genkernel</c> je kernel compileert en je systeem de hardware detecteert 
tijdens het booten. Aangezien <c>genkernel</c> geen manuele kernel
configuratie vereist is het een ideale situatie voor gebruikers die niet
graag hun eigen kernels configureren.
</p>

<p>
Laten we nu eens zien hoe je <c>genkernel</c> gebruikt. Installeer eerst
de genkernel ebuild:
</p>

<pre caption = "Emerging genkernel">
# <i>emerge -k genkernel</i>
</pre>

<p>
Compileer nu je kernel broncode door <c>genkernel</c> uit te voeren:
</p>

<note>
<b>Geavanceerde gebruikers:</b> Je kan <c>genkernel --config</c> ingeven
om zelf de configuratie uit te voeren.
</note>

<pre caption = "Genkernel uitvoeren">
<comment>Indien je genkernel 1.2 gebruikt (welke in de 1.4-20030803 x86/i686 GRP set zit)</comment>
<comment>moet je het volgende uitvoeren:</comment>
# <i>genkernel gentoo-sources</i>
<comment>Indien je genkernel 1.4 of nieuwer gebruikt moet je geen kernel meegeven:</comment>
# <i>genkernel</i>
Gentoo Linux genkernel, version 1.4
Copyright 2003 Gentoo Technologies, Inc., Bob Johnson, Daniel Robbins
Distributed under the GNU General Public License version 2
     
Settings:
compile optimization: 1 processor(s)
source tree: /usr/src/linux-2.4.20-gaming-r3
config: gentoo (customized)
config loc: /etc/kernels/config-2.4.20-gaming-r3
initrd config: (default) /etc/kernels/settings

* Running "make oldconfig"...                                        [ ok ]
* Logging to /var/log/genkernel.log...                               [ ok ]
* Starting 2.4.20-gaming-r3 build...                                 [ ok ]
* Running "make dep"...                                              [ ok ]
* Running "make bzImage"...                                          [ ok ]
* Running "make modules"...                                          [ ok ]
* Running "make modules_install"...                                  [ ok ]
* Moving bzImage to /boot/kernel-2.4.20-gaming-r3...                 [ ok ]
* Building busybox...                                                [ ok ]
* Creating initrd...                                                 [ ok ]

* Build completed successfully!

* Please specify /boot/kernel-2.4.20-gaming-r3 and /boot/initrd-2.4.20-gaming-r3
* when customizing your boot loader configuration files.
</pre>     

<p>
Als <c>genkernel</c> eenmaal zijn werk gedaan heeft zal een kernel, een
serie modules en een <i>initiele root disk</i> (initrd) aangemaakt zijn.
We zullen deze kernel en initrd later in dit document gebruiken wanneer
we de bootloader configureren. Schrijf de namen van de kernel en de initrd
ergens op, je hebt ze straks nodig voor het maken van het configuratiebestand
voor de bootloader. De initrd zal direct gestart worden na
het booten om de automatische detectie van de hardware uit te voeren
(net zoals met de Live CD), dit alvorens je werkelijke systeem opstart.
</p>

<p>
Laten we nu nog een extra stap ondernemen zodat ons systeem nog meer
zoals de Live CD is -- installeer hotplug. Terwijl initrd de hardware
nodig voor het booten automatisch detecteert tijdens het booten van het 
systeem, zal hotplug al de rest detecteren. Om hotplug te installeren,
type het volgende:
</p>

<pre caption = "Emergen en activere van hotplug">
# <i>emerge -k hotplug</i>
# <i>rc-update add hotplug default</i>
</pre>

<!--
<p>
Uiteindelijk emerge je best de ebuilds die je nodig hebt voor extra
hardware op je systeem die een gewone kernel niet ondersteunt. Hieronder
vind je een lijst van dergelijke ebuilds die je kan installeren:
</p>

<table>
<tcolumn width="1in"/>
<tcolumn width="4in"/>
<tcolumn width="2in"/>
<tr>
 <th>ebuild</th>
 <th>doel</th>
 <th>commando</th>
</tr>
<tr>
 <ti>nvidia-kernel</ti>
 <ti>NVIDIA Grafische ondersteuning voor XFree86</ti>
 <ti><c>emerge -k nvidia-kernel</c></ti>
</tr>
<tr>
 <ti>nforce-net</ti>
 <ti>Netwerkkaart op NVIDIA NForce(2) moederborden</ti>
 <ti><c>emerge nforce-net</c></ti>
</tr>
<tr>
 <ti>nforce-audio</ti>
 <ti>Geluidskaart ondersteuning van NVIDIA NForce(2) moederborden</ti>
 <ti><c>emerge nforce-audio</c></ti>
</tr>
<tr>
 <ti>e100</ti>
 <ti>Intel e100 Fast Ethernet Adapters</ti>
 <ti><c>emerge e100</c></ti>
</tr>
<tr>
 <ti>e1000</ti>
 <ti>Intel e1000 Gigabit Ethernet Adapters</ti>
 <ti><c>emerge e1000</c></ti>
</tr>
<tr>
 <ti>emu10k1</ti>
 <ti>Creative Sound Blaster Live!/Audigy extra ondersteuning</ti>
 <ti><c>emerge emu10k1</c></ti>
</tr>
<tr>
 <ti>ati-drivers</ti>
 <ti>ATI Radeon 8500+/FireGL grafische ondersteuning voor XFree86</ti>
 <ti><c>emerge ati-drivers</c></ti>
</tr>
<tr>
 <ti>xfree-drm</ti>
 <ti>XFree86 ondersteuning voor ATI Radeon tot versie 9200, Rage128,
 Matrox, Voodoo en andere kaarten</ti>
 <ti><c>VIDEO_CARDS="jouwkaart" emerge xfree-drm</c></ti>
</tr>
</table>
-->

<p>
De nvidia-kernel, ati-drivers en xfree-drm pakketten vereisen extra
configuratie. Alle andere ebuilds worden door hotplug automatisch
gedetecteerd.
</p>

<p>
Meer informatie aangaande <c>xfree-drm</c> kan je in onze <uri
link="/doc/nl/dri-howto.xml">Direct Rendering HOWTO</uri> vinden.
</p>

<p>
Nu dat je je kernel geconfigureerd hebt via genkernel kan je de manuele
kernel configuratie hieronder overslaan.
</p>

</body>
</section>
<section>
<title>Manuele kernel configuratie</title>
<body>

<p>
Indien je liever niet genkernel gebruikt om je kernel te configureren,
dan helpt deze sectie met het manueel configureren en compileren van de
kernel. Let op dat <path>/usr/src/linux</path> inderdaad een symlink is
naar de huidige geinstalleerde kernel, aangemaakt door Portage tijdens
het emergen van de kernel ebuild. Indien je meerdere kernel ebuilds
staan hebt moet je manueel de symlink <path>/usr/src/linux</path>
aanmaken naar de correcte kernel broncode.
</p>

<warn>
Wees voorzichtig met de <i>grsecurity</i> optie tijdens de configuratie.
Indien je te agressief bent met je veiligheidsinstellingen kan het zijn dat 
bepaalde programmas (zoals X) weigeren correct te werken. Indien je twijfelt, 
selecteer deze dan niet.
</warn>

<note>
Indien je dezelfde kernelconfiguratie van de LiveCD kernel wil
gebruiken, of jouw configuratie hierop baseren, voer dan <c>cd
/usr/src/linux &amp;&amp; cat /proc/config > .config &amp;&amp; make
oldconfig</c> uit. Indien je geen <c>xfs-sources</c> gebruikt zal je
vragen krijgen over de verschillen tussen <c>xfs-sources</c> en jouw
kernelkeuze.
</note>

<pre caption="Configureren en compileren van de kernel">
# <c>cd /usr/src/linux</c>
# <c>source /etc/profile</c>
# <c>make menuconfig</c>
</pre>

<warn>
Opdat je kernel goed zou werken zijn er verschillende opties die je zeker moet
activeren -- dat wil zeggen: ze moeten <i>in de kernel zitten</i> en <i>niet
als modules</i>. Zorg ervoor dat &quot;ReiserFS&quot; geselecteerd is als je
ReiserFS partities gebruikt. Hetzelfde geldt trouwens voor de andere
bestandssystemen. Hieronder vind je enkele algemene opties die je nodig zal
hebben:
</warn>

<pre caption="make menuconfig opties">
Code maturity level options ---&gt;
  [*] Prompt for development and/or incomplete code/drivers
<comment>(Je hebt dit nodig om verdere opties beschikbaar te maken)</comment>
     ...

File systems ---&gt;
  &lt;*&gt; Reiserfs support
<comment>(Enkel indien je ReiserFS gebruikt)</comment>
       ... 
  &lt;*&gt; Ext3 journalling file system support
<comment>(Enkel indien je Ext3 gebruikt)</comment>
       ...
  [*] Virtual memory file system support (former shm fs)
<comment>(Is vereist voor Gentoo Linux)</comment>
       ...
  &lt;*&gt; JFS filesystem support
<comment>(Enkel indien je JFS gebruikt)</comment>
       ...
  [*] /proc file system support
<comment>(Is vereist voor Gentoo Linux)</comment>
  [*] /dev file system support (EXPERIMENTAL)
  [*]   Automatically mount at boot          
<comment>(Is vereist voor Gentoo Linux)</comment>
  [ ] /dev/pts file system for Unix98 PTYs
<comment>(Deselecteer dit, dit is niet nodig, tenzij je een 2.6 kernel gebruikt.)</comment>
       ...
  &lt;*&gt; Second extended fs support
<comment>(Het is een goed idee dit altijd te selecteren)</comment>
       ...
  &lt;*&gt; XFS filesystem support
<comment>(Enkel indien je XFS gebruikt)</comment>
</pre>


<p>
Indien je PPPoE gebruikt om naar het internet te connecteren moet je de 
volgende zaken meecompileren (ofwel in de kernel, ofwel - en 
dit is aangeraden - via modules): 
</p>

<pre caption="PPPoE kernelconfiguratie opties">
PPP (Point-to-Point Protocol) support
PPP support voor async serial ports
PPP support for sync tty ports
</pre>

<p>
De 2 compressie-opties zijn niet schadelijk maar zijn ook niet nodig; ook de 
&quot;PPP over Ethernet&quot; optie is niet nodig; deze zal enkel gebruikt 
worden indien je aan <i>rp-pppoe</i> vraagt om kernel-mode PPPoE toe te 
passen (wat niet default is).
</p>

<p>
Indien je een IDE cd brander hebt, dan moet je eveneens 
&quot;SCSI emulation&quot; selecteren in de kernel. Activeer 
&quot;ATA/IDE/MFM/RLL support&quot; --&gt; &quot;IDE, ATA and ATAPI Block 
devices&quot; --&gt; &quot;SCSI emulation support&quot;, &quot;SCSI CD-ROM support&quot; en &quot;SCSI generic support&quot; (sommige mensen compileren deze 
als modules, dat mag). Als je deze als modules compileert, voer dan <c>echo -e 
&quot;ide-scsi\nsg\nsr_mod&quot; &gt;&gt; /etc/modules.autoload.d/kernel-2.4</c> uit om 
deze automatisch te laden als je je systeem opstart.
</p>

<p>
Vergeet niet om ondersteuning voor je netwerkkaart in de kernel in te 
compileren indien je deze nodig hebt.
</p>

<note>
Voor deze die het verkiezen is het nu mogelijk Gentoo Linux te installeren met 
een 2.2-kernel. Deze keuze komt echter met een prijs: je zal verschillende 
nieuwe features van de 2.4-kernels missen (zoals XFS, tmpfs, iptables, ...) 
alhoewel de 2.2-broncode uitgebreid kan worden met ReiserFS en 
devfs-ondersteuning. De Gentoo Linux bootscripts gebruiken tmpfs of ramdisk 
ondersteuning die in de kernel moet zitten, dus 2.2-kernelgebruikers moeten 
zich ervan verzekeren dat ramdisk-ondersteuning in de kernel zit (en 
<i>niet</i> als module). Het is dan van <comment>vitaal belang</comment> dat 
een <e>gentoo=notmpfs</e> argument meegegeven wordt met de kernelregel in 
<path>/boot/grub/grub.conf</path> of in de appendregel in 
<path>/etc/lilo.conf</path> (afhankelijk van je keuze van bootloader) voor 
de 2.2-kernel zodat een ramdisk gebruikt wordt ipv tmpfs. Als je ervoor kiest 
geen devfs te gebruiken, verander de regel dan naar 
<e>gentoo=notmpfs,nodevfs</e>.
</note>

<pre caption = "De Linux kernel compileren en installeren">
# <c>make dep &amp;&amp; make clean bzImage modules modules_install</c>
# <c>cp /usr/src/linux/arch/i386/boot/bzImage /boot</c>
</pre>
</body>
</section>
<section>
<title>Het installeren van extra hardware-specifieke ebuilds</title>
<body>

<p>
Uiteindelijk moet je ebuilds emergen die specifiek bedoelt zijn voor
de hardware die in je systeem aanwezig is. Hier is een lijst van alle
kernel gerelateerde ebuild die ja kunt emergen.
</p>

<table>
<tr>
 <th>Ebuild</th>
 <th>Doel</th>
 <th>Commando</th>
</tr>
<tr>
 <ti>nvidia-kernel</ti>
 <ti>Geaccelereerde NVIDIA graphics voor XFree86</ti>
 <ti><c>emerge -l nvidia-kernel</c></ti>
</tr>
<tr>
 <ti>nforce-net</ti>
 <ti>On-board ethernet controller op NVIDIA NForce(2) moederborden</ti>
 <ti><c>emerge nforce-net</c></ti>
</tr>
<tr>
 <ti>nforce-audio</ti>
 <ti>On-board audio op NVIDIA NForce(2) moederborden</ti>
 <ti><c>emerge nforce-audio</c></ti>
</tr>
<tr>
 <ti>e100</ti>
 <ti>Intel e100 Fast Ethernet Adapters</ti>
 <ti><c>emerge e100</c></ti>
</tr>
<tr>
 <ti>e1000</ti>
 <ti>Intel e1000 Gigabit Ethernet Adapters</ti>
 <ti><c>emerge e1000</c></ti>
</tr>
<tr>
 <ti>emu10k1</ti>
 <ti>Creative Sound Blaster Live!/Audigy ondersteuning</ti>
 <ti><c>emerge emu10k1</c></ti>
</tr>
<tr>
 <ti>ati-drivers</ti>
 <ti>Geaccelereerd ATI Radeon 8500+/FireGL graphics voor XFree86</ti>
 <ti><c>emerge ati-drivers</c></ti>
</tr>
<tr>
 <ti>xfree-drm</ti>
 <ti>Geaccelereerde graphics voor ATI Radeon tot en met 9200, Rage128, Matrox, Voodoo,
 	en andere kaarten voor XFree86</ti>
 <ti><c>VIDEO_CARDS="jouwkaart" emerge xfree-drm</c></ti>
</tr>
</table>

<p>
De <c>nvidia-kernel</c>, <c>ati-drivers</c> en <c>xfree-drm</c> pakketten vereisen
extra configuratie om in gebruik genomen te worden. Alle andere ebuild die in de
lijst staan behoren automatisch gedetecteerd te worden tijdes het opstarten door
het <c>hotplug</c> pakket. Als je geen gebruik maakt van hotplug, zorg er dan voor dat
de benodigde modules in <path>/etc/modules.autoload.d/kernel-2.4</path> staan.
</p>

<p>
Meer informatie over <c>xfree-drm</c> kan je vinden in onze 
<uri link="/doc/en/dri-howto.xml">Direct Rendering Guide (engels)</uri>.
</p>

</body>
</section>
<section>
<title>Een system logger installeren</title>
<body>

<p>
Je nieuwe kernel (en modules) zijn nu geinstalleerd. Nu moet je een keuze maken
tussen de verschillende syslog daemons die Gentoo levert. Dit zijn 
<c>sysklogd</c>, de traditionele groep systeemlog-daemons, <c>msyslog</c>, 
<c>syslog-ng</c> en <c>metalog</c>.
Geavanceerde gebruikers hebben de neiging te migreren van sysklogd (die niet
al te goede performantie heeft) naar syslog-ng of metalog. Indien je twijfelt, 
dan zal je mogelijk metalog het liefst hebben, daar het zeer populair is. 
Om de systeemlogger van je keuze te mergen, type:
</p>

<pre caption="Installeren van een syslog-daemon">
# <c>emerge -k app-admin/sysklogd</c>
# <c>rc-update add sysklogd default</c>
<comment>of</comment>
# <c>emerge -k app-admin/syslog-ng</c>
# <c>rc-update add syslog-ng default</c>
<comment>of</comment>
# <c>emerge -k app-admin/metalog</c>
# <c>rc-update add metalog default</c>
<comment>of</comment>
# <c>emerge -k app-admin/msyslog</c>
# <c>rc-update add msyslog default</c>
</pre>

<impo>
Metalog stuurt informatie naar de harde schijf in blokken, dus berichten worden
niet direct in de logs geschreven. Indien je een daemon wilt debuggen is deze
manier van werken niet handig. Om deze buffering tegen te gaan kan je metalog
een USR1-signaal zenden om het bufferen tijdelijk uit te schakelen (zodat 
<i>tail -f <path>/var/log/everything/current</path></i> wel in real time zal 
werken, zoals gewenst) en een USR2-signaal om dit terug te activeren. Indien 
je het bufferen permanent wilt uitschakelen moet je in 
<path>/etc/conf.d/metalog</path> de variabele <c>METALOG_OPTS=&quot;-B&quot;</c>
naar <c>METALOG_OPTS=&quot;-B -s&quot;</c> veranderen.
</impo>
<pre caption="(des)activeren van databufferen bij metalog">
<codenote>Desactiveren van bufferen:</codenote>
# <c>killall -USR1 metalog</c>
<codenote>Activeren van bufferen:</codenote>
# <c>killall -USR2 metalog</c>
</pre>
<p>
Nu kan je opteren om een cron-package te installeren. Op dit moment levert
Gentoo <c>dcron</c>, <c>fcron</c> en <c>vcron</c>. Als je niet weet welke te 
nemen, neem je het best vcron.
</p>

<pre caption="Installeren van een cron-daemon">
# <c>emerge -k sys-apps/dcron</c>
# <c>rc-update add dcron default</c>
# <c>crontab /etc/crontab</c>
<comment>of</comment>
# <c>emerge -k sys-apps/fcron</c>
# <c>rc-update add fcron default</c>
# <c>crontab /etc/crontab</c>
<comment>of</comment>
# <c>emerge -k sys-apps/vcron</c>
# <c>rc-update add vcron default </c>
</pre>

<p>
Voor meer informatie over hoe je programma's en daemons opstart via de
runlevels, zie <uri link="/doc/nl/rc-scripts.xml">rc-script guide</uri>.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Andere, nodige packages compileren</title>
<section>
<body>

<p>
Indien je rp-pppoe nodig hebt voor een internetconnectie dan moet je deze nog 
installeren:
</p>

<pre caption = "Installeren van rp-pppoe">
# <i>USE=&quot;-X&quot; emerge rp-pppoe</i>
<comment>GRP gebruikers moeten het volgende intypen:</comment>
# <i>emerge -K rp-pppoe</i>
</pre>

<note>
De <i>USE=&quot;-X&quot;</i> verhindert dat pppoe zijn (optionele) X-interface 
installeert, want anders zullen eveneens X en de afhankelijkheden van X
gecompileerd worden. Je kan later altijd <i>rp-pppoe</i> hercompileren 
met X-ondersteuning. De GRP versie van rp-pppoe heeft de optionele X interface
aan staan. Als je geen GRP gebruikt, compile de source dan zoals in het eerste
voorbeeld.
</note>

<note>
Hierna is rp-pppoe wel geinstalleerd maar nog niet geconfigureerd. Je zal 
opnieuw <c>adsl-setup</c> moeten uitvoeren eenmaal je in je nieuwe 
Gentoo-installatie geboot bent (i.e. <e>na</e> de installatie).
</note>

<p>
Het is goed mogelijk dat je nog enkele extra packages zal moeten compileren 
alvorens je Gentoo Linux gebruikt, vooral indien je zaken zoals XFS, ReiserFS 
of LVM gebruikt.
</p>

<pre caption="Installeren van de filesystemtools tools">
# <c>emerge -k sys-fs/xfsprogs</c> <comment>(Voor XFS)</comment>
# <c>emerge -k sys-fs/reiserfsprogs</c> <comment>(Voor ReiserFS)</comment>
# <c>emerge -k jfsutils</c> <comment>(Voor JFS)</comment>
# <c>emerge -k sys-fs/lvm-user</c> <comment>(Voor LVM)</comment>
</pre>

<p>
Indien je een laptop-gebruiker bent en je wilt PCMCIA-ondersteuning wanneer je 
in je Gentoo Linux systeem boot, installeer dan de <i>pcmcia-cs</i> ebuild:
</p>

<pre caption="Installeren van de pcmcia-cs tools">
# <c>emerge -k sys-apps/pcmcia-cs</c>
</pre>

<!-- probleem oplossen, of documentatie oplossen
<warn>
Je zal <i>pcmcia-cs</i> na de installatie van Gentoo Linux opnieuw moeten 
emergen om de PCMCIA werkende te krijgen. Deze installatie is dus enkel indien
je direct al PCMCIA-ondersteuning nodig hebt.
</warn>
-->

</body>
</section>
</chapter>

<chapter>
<title>Gebruikersbeheer</title>
<section>
<title>Een rootpaswoord instellen</title>
<body>

<p>
Alvorens je het vergeet stel je best nu je rootpaswoord in:
</p>

<pre caption="Aanpassen van je rootpaswoord">
# <c>passwd</c>
</pre>

</body>

</section>
<section>
<title>Een gebruiker voor dagelijks gebruik toevoegen</title>
<body>

<p>
Constant als root werken op een Unix/Linux systeem is <e>gevaarlijk</e>
en moet zoveel mogelijk vermeden worden. Het is daarom <e>sterk</e>
aangeraden om een gebruiker toe te voegen voor dagelijks gebruik.
</p>

<pre caption = "Een gebruiker toevoegen">
# <i>useradd gebruikersnaam -m -G users,wheel,audio -s /bin/bash</i>
# <i>passwd gebruikersnaam</i>
</pre>

<p>
Vervang <c>gebruikersnaam</c> met je gebruikersnaam :).
</p>

<p>
Wanneer je taken moet uitvoeren die enkel root kan uitvoeren, gebruik
dan <c>su -</c> om root te worden, of kijk eens naar het <c>sudo</c>
pakket.
</p>

</body>
</section>
</chapter>



<chapter>
<title>Je hostname instellen</title>
<section>
<body>

<p>
Pas <path>/etc/hostname</path> aan zodat het je hostname bevat, dit op 1 regel, 
zoals <c>mijnmachine</c>. 
</p>

<pre caption="Instellen van een hostname">
# <i>echo mijnmachine &gt; /etc/hostname</i>
</pre>

<p>
Pas daarna <path>/etc/dnsdomainname</path> aan zodat het je DNS domeinnaam 
bevat, zoals <c>mijndomein.com</c>.
</p>

<pre caption = "DNS Domeinnaam instellen">
# <i>echo mijndomein.com &gt; /etc/dnsdomainname</i>
</pre>

<p>
Indien je een NIS domein hebt, moet je deze instellen in 
<path>/etc/nisdomainname</path>.
</p>

<pre caption = "NIS Domeinnaam instellen">
# <i>echo nis.mijndomein.com &gt; /etc/nisdomainname</i>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>/etc/hosts aanpassen</title>
<section>
<body>

<p>
Dit bestand bevat een lijst van IP-adressen en hun respectieve hostnames. 
Het wordt gebruikt door je systeem om IP-adressen en pc-namen met elkaar te 
linken voor zover ze niet in de nameservers zitten. Hier is een voorbeeld:
</p>

<pre caption="/etc/host instellingen">
127.0.0.1      localhost
<comment># de volgende regel bevat jouw IP-nummer alsook de naam van je pc in de LAN</comment>
192.168.1.1    mijnmachine.mijnnetwerk.com     mijnmachine
</pre>

<note>
Als je op een DHCP-netwerk zit kan het handig zijn om je echte hostname
achter <i>localhost</i> toe te voegen. Dit zal GNOME en verschillende 
andere programmas helpen in het omzetten van IP naar hostnames en omgekeerd.
</note>

</body>
</section>
</chapter>
<chapter>
<title>Finale netwerkconfiguratie</title>
<section>
<body>

<p>
Voeg de namen van de modules die vereist zijn voor het correct functioneren
van je systeem toe aan <path>/etc/modules.autoload.d/kernel-2.4</path> (je kan daarbij 
eveneens extra opties meegeven door deze op dezelfde regel te plaatsen). 
Wanneer Gentoo Linux boot zullen deze modules automatisch geladen worden. 
Zeer belangrijk is je netwerkkaartmodule (indien je deze als een module 
gecompileerd hebt):
</p>

<pre caption="/etc/modules.autoload.d/kernel-2.4">
<comment># Dit in de veronderstelling dat je een 3Com netwerkkaart gebruikt.</comment>
3c59x
<comment>(Kijk in <path>/lib/modules/`uname -r`/kernel/drivers/net</path> voor jouw netwerkkaart.)</comment>
</pre>

<p>
Pas het bestand <path>/etc/conf.d/net</path> aan zodat je netwerkinstellingen
correct ingesteld worden wanneer je opstart:
</p>

<pre caption="Configureren van het netwerk">
# <c>nano -w /etc/conf.d/net</c>
<comment>Enkel voor niet-PCMCIA netwerk kaarten</comment>
# <c>rc-update add net.eth0 default</c>
</pre>

<p>
Indien je meerdere netwerkkaarten hebt of tokenring interfaces zal je extra 
<path>net.eth<comment>x</comment></path> respectievelijk 
<path>net.tr<comment>x</comment></path> bestanden moeten maken voor elke 
extra netwerkkaart of tokenring interface (<comment>x</comment> = 1, 2, ...):
</p>

<pre caption="Meerdere netwerkkaarten">
# <i>cd /etc/init.d</i>
# <i>ln -s net.eth0 net.eth<comment>X</comment></i>
<comment>Enkel voor niet-PCMCIA netwerk kaarten:</comment>
# <i>rc-update add net.eth<comment>x</comment> default</i>
</pre>

<p>
Indien je een PCMCIA netwerkkaart gebruikt, neem dan een snelle kijk in 
<path>/etc/init.d/pcmcia</path> om te zien of alles in orde lijkt voor jouw 
systeem, en draai dan het volgende commando:
</p>

<pre caption="Pcmcia automatisch starten tijdens het opstarten">
# <i>rc-update add pcmcia boot</i>
</pre>

<p>
Dit zorgt ervoor dat de PCMCIA drivers automatisch worden geladen wanneer
het netwerk wordt geladen. De gepaste <path>/etc/init.d/net.ethX</path> service
wordt geladen als de PCMCIA service start.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Finale stappen: configureer de basisinstellingen (inclusief de keyboard instelling)</title>
<section>
<body>

<pre caption="basisconfiguratie">
# <c>nano -w /etc/rc.conf</c>
</pre>

<p>
Volg de aanwijzingen in dit bestand om de basisinstellingen aan te passen.
Alle gebruikers zullen zich ervan moeten verzekeren dat <c>CLOCK</c> correct
gedefinieerd is. Internationale keyboard-gebruikers zullen eveneens 
<c>KEYMAP</c> willen aanpassen naar hun smaak (kijk in 
<path>/usr/share/keymaps</path> om de verschillende mogelijkheden te zien).
</p>

</body>
</section>
</chapter>

<!-- Dit lijkt ineens verdwenen te zijn. Ik hou deze vertaling eventjes onder commentaar just in case :-)

<section>
<title>Finale stappen: harddisk instellingen (hdparm)</title>
<body>
<p>
Voeg je <i>hdparm</i> tweaks toe aan <path>/etc/conf.d/local.start</path> opdat deze automatisch uitgevoerd worden tijdens het opstarten.
</p>
<pre caption="Programmas at bootup laten starten">
# <i>nano -w /etc/conf.d/local.start</i>
</pre>
<pre caption="voeg hdparm tweaks toe aan /etc/conf.d/local.start">
# Dit is een goede plaats om verscheidene 
# programmas te definieren die moeten opgestart
# worden tijdens het booten van je pc ( 1>&amp;2 )

# zet DMA aan op beide harde schijven
hdparm -d 1 /dev/hda
hdparm -d 1 /dev/hdb
</pre>
</body>
</section>

-->

<chapter>
<title>Een bootloader configureren</title>
<section>
<title>Notes</title>
<body>

<p>
Gebruikers hebben de mogelijkheid om tussen verschillende bootloaders te
kiezen. Dankzij onze virtuele package-systeem kunnen gebruikers kiezen
tussen GRUB of LILO als bootloader.
</p>

<p>
Herinner je er aan dat het installeren van beide bootloaders niet nodig is. In
tegendeel, het kan voor problemen zorgen, dus installeer een van beide.
</p>

<p>
Je moet je bootloader anders configureren afhankelijk van of je de
kernel via <c>genkernel</c> (met kernel en initrd) gecompileerd hebt, of
je de kernel manueel gecompileerd hebt. Zorg ervoor dat je de juiste
configuratiekeuze maakt.
</p>

<impo>
Indien je Gentoo Linux installeert op een systeem met een NVidia nForce of
nForce2 chipset met geintegreerde GeForce grafische kaart, dan moet je LILO
gebruiken en niet GRUB. Met on-board video ingeschakeld zal een gedeelte van je
RAM gebruikt worden als video-RAM, en dat is jammergenoeg hetzelfde RAM-gedeelte
dat GRUB gebruikt. Tengevolge hiervan kan je een &quot;out of memory&quot;
fout krijgen. En indien je een off-board grafische kaart gebruikt maar je hebt
ook een on-board grafische kaart, dan is het interessant ook hier voor LILO te
opteren aangezien je mogelijk in de toekomst je on-board grafische kaart wil
gebruiken...
</impo>


</body>
</section>
<section>
<title>Configureren van GRUB</title>
<body>

<p>
Een van de meest kritische zaken bij het verstaan van GRUB is te weten komen 
hoe GRUB kijkt naar harde schijven en partities. Je Linux-partitie 
<path>/dev/hda1</path> heet <path>(hd0,0)</path> onder GRUB. Bemerk de haakjes 
rond hd0,0 - deze zijn verplicht. Harde schijven starten vanaf 0 ipv 
&quot;a&quot; en een partitie start vanaf 0 ipv 1. Tevens worden enkel harde 
schijven geteld, en dus niet atapi-ide apparaten zoals cd-roms. Een
gelijkaardige constructie geldt voor SCSI-apparaten. Normaal gezien krijgen 
deze laatste hogere nummers, tenzij de BIOS ingesteld is om van de 
SCSI-apparaten te booten. 
</p>

<p>
Dus, in de veronderstelling dat je een HD op <path>/dev/hda</path> staan hebt, 
een cdrom-speler op <path>/dev/hdb</path>, een cd-rw op <path>/dev/hdc</path>,
een andere HD op <path>/dev/hdd</path> en geen SCSI-apparaten, dan wordt 
<path>/dev/hdd7</path> vertaald naar <path>(hd1,6)</path>.
</p>

<p>
Dit lijkt ingewikkeld, en eigenlijk is het dat ook een beetje, maar zoals we 
later zullen zien heeft GRUB een tab-auto-aanvulling mechanisme dat je kan 
helpen indien je veel partities en harde schijven liggen hebt en je een 
beetje verloren bent in het schema van aanduidingen. Nu we dit ook weten, is 
het tijd om GRUB te installeren.
</p>

<p>
De meest eenvoudige manier om grub te installeren is simpelweg <c>grub</c> te 
typen op je gechrootte shellprompt:
</p>

<pre caption="Opstarten van grub">
# <c>emerge -k grub</c>
# <c>grub</c>
</pre>

<p>
Je zal de <c>grub&gt;</c> prompt te zien krijgen. Nu moet je de correcte 
commando's ingeven om GRUB te installeren op je harde schijf. In deze 
voorbeeldconfiguratie willen we GRUB installeren op de boot record van de 
harde schijf (de MBR, master boot record), zodat het eerste wat we te zien 
krijgen als we de pc opstarten de GRUB prompt is. In dit geval zijn de 
commando's:
</p>

<pre caption="Configureren van grub">
grub&gt; <c>root (hd0,0)</c> <codenote>(Boot partitie)</codenote>
grub&gt; <c>setup (hd0)</c> <codenote>(Locatie van bootrecord)</codenote>
grub&gt; <c>quit</c>
</pre>

<pre caption="Configureren van grub op een andere locatie dan in de MBR">
<comment>Alternatief, indien je de bootloader ergens anders dan in de MBR wil
installeren:</comment>
grub&gt; <c>root (hd0,0)</c> <codenote>(Bootpartitie)</codenote>
grub&gt; <c>setup (hd0,4)</c> <codenote>(Waar de bootrecord geinstalleerd moet worden, hier /dev/hda5)</codenote>
grub&gt; <c>quit</c>
</pre>

<p>
Hier is hoe de commando's werken. Het eerste commando, <c>root ( )</c>, vertelt
GRUB de locatie van de bootpartitie (in dit voorbeeld, <path>/dev/hda1</path>
of dus <path>(hd0,0)</path> in GRUB-nomenclatuur). Het tweede commando,
<c>setup ( )</c>, vertelt GRUB waar hij de boot record moet installeren - het 
zal automatisch geconfigureerd worden om de speciale files te zoeken in de 
door <c>root ( )</c> gedefinieerde locatie. In dit voorbeeld willen we GRUB 
in de MBR, dus is het antwoord <path>/dev/hda</path> of nog <path>(hd0)</path>.
Indien we GRUB gebruiken als secundaire bootloader en een ander programma als 
primaire kunnen we dus eveneens aan GRUB vragen om zich in een bepaalde 
partitie te nestelen ipv in de MBR. Eenmaal GRUB dit commando uitgevoerd heeft 
sluiten we grub door <c>quit</c> in te typen. 
</p>

<note>
De tab-auto-aanvulling van GRUB helpt je bij de keuze van bijvoorbeeld 
partities. Indien je <c>root (</c> ingetypt hebt en je drukt dan op TAB, 
dan krijg je een lijst met de mogelijke apparaten. Indien je <c>root (hd</c> 
ingetypt hebt en dan TAB, dan krijg je een lijst met de mogelijke harde 
schijven. Na <c>root (hd0,</c> TAB indrukken geeft je een lijst met mogelijke 
partities. Gebruik maken van de tab-auto-aanvulling is aangeraden: je hebt 
minder kans om fouten te maken.
</note>

<p>
Nu is Gentoo Linux klaar, maar we moeten eerst de 
<path>/boot/grub/grub.conf</path> aanmaken zodat we een mooie GRUB bootmenu 
te zien krijgen wanneer het systeem opstart.
</p>

<impo>
Om teruggaande compatibiliteit te garanderen is het aangeraden een symbolische 
link aan te maken van <i>grub.conf</i> naar <i>menu.lst</i>. Dit kan je doen 
door <c>ln -s /boot/grub/grub.conf /boot/grub/menu.lst</c>. 
</impo>

<p>
Creeer een grub.conf bestand (<c>nano -w /boot/grub/grub.conf</c>) en voeg de 
volgende regels toe:
</p>

<pre caption="Instellen van de (multi)boot opties: /boot/grub/grub.conf">
default 0
timeout 30
splashimage=(hd0,0)/boot/grub/splash.xpm.gz

<comment># Indien je je eigen kernel gecompileerd hebt</comment>
title=Mijn Gentoo Linux voorbeeld
root (hd0,0) 
kernel (hd0,0)/bzImage root=/dev/hda3 
<comment>(Dit indien (hd0,0) je /boot-partitie is. Indien deze je root is (je hebt geen aparte boot), 
dan gebruik je best &quot;(hd0,0)/boot/bzImage root=/dev/hda3&quot;</comment> 

<comment># Indien je genkernel gebruikt hebt, neem dan het volgende:</comment>
title=Mijn Gentoo Linux voorbeeld (genkernel)
root (hd0,0)
kernel (hd0,0)/boot/kernel-KV root=/dev/hda3
initrd (hd0,0)/boot/initrd-KV

<comment># Dit is enkel voor dual-bootgebruikers</comment>
title=Windows XP
root (hd0,5) 
chainloader (hd0,5)+1
</pre>

<warn>
Substitueer <c>KV</c> met de kernel versie die je geinstalleerd hebt.
</warn>

<impo>
Indien je scsi emulatie voor een IDE CD-brander gebruikt, dan moet je 
&quot;hdx=ide-scsi&quot; toevoegen aan de kernel-regel in 
<path>grub.conf</path> (met &quot;hdx&quot; de drive die bij je CD-brander 
past).
</impo>

<p>
Nadat je dit bestand opgeslagen hebt is de Gentoo Linux installatie afgewerkt. 
Door de eerste keuze te selecteren zal GRUB Linux booten. Het tweede deel van 
grub.conf is optioneel en toont je hoe je GRUB vraagt om een Windows partitie 
te booten (deze moet bootable zijn uiteraard).
</p>

<note>
Hierboven moet <path>(hd0,0)</path> naar je bootpartitie wijzen 
(<path>/dev/hda1</path> in dit voorbeeld) en <path>/dev/hda3</path> moet 
wijzen naar je root bestandssysteem. <path>(hd0,5)</path> bevat de NT 
bootloader.
</note>

<note>
Het pad naar de kernel image is relatief tov de bootpartitie. Indien je, 
bijvoorbeeld, een aparte bootpartitie hebt onder <path>(hd0,0)</path> en een 
rootpartitie onder <path>(hd0,1)</path>, dan worden de paden in grub.conf 
<path>/bzImage</path>.
</note>

<p>
Indien je enige opties moet meegeven aan de kernel moet je deze gewoon 
toevoegen aan het eind van de <c>kernel</c> regel. We geven al 1 optie mee 
(<c>root=/dev/hda3</c>) maar je kan er nog andere toevoegen. Bijvoorbeeld kan 
je devfs uitschakelen (niet aangeraden als je niet weet wat je aan het doen 
bent) door <c>gentoo=nodevfs</c> mee te geven in de <c>kernel</c> regel.
</p>

<note>
Je moet, in tegenstelling tot oudere Gentoo Linux versies, niet meer 
<c>devfs=mount</c> meegeven op het einde van de <c>kernel</c> regel om devfs 
te activeren. Vanaf rc6 is devfs per default geactiveerd.
</note>

</body>
</section>
<section>
<title>Configureren van LILO</title>
<body>

<p>
Alhoewel GRUB de meest gebruikte bootloader is is ze niet altijd de beste
keuze. LILO, de LInux LOader is het veelgeteste en werkelijk stabiele 
werkpaard van de Linux bootloaders. 
Hierna volgt hoe je LILO ipv GRUB installeert:
</p>

<p>
De eerste stap is het emergen van LILO:
</p>

<pre caption="Emerging LILO">    
# <c>emerge -k lilo</c>            
</pre>            

<p>
Nu is het tijd om LILO te configureren. Hier is een voorbeeld
configuratiebestand voor <path>/etc/lilo.conf</path>.
</p>

<pre caption="Voorbeeld lilo.conf">    
boot=/dev/hda    
map=/boot/map    
install=/boot/boot.b    
prompt    
timeout=50    
lba32    
default=linux        

<comment># Gebruik het volgende indien je je eigen kernel gecompileerd hebt</comment>
image=/boot/bzImage
   label=linux            
   read-only            
   root=/dev/hda3 

<comment># Voor genkernel gebruikers, gebruik het volgende:</comment>
image=/boot/kernel-KV
    label=gk_linux
    root=/dev/hda3
    initrd=/boot/initrd-KV
    append="root=/dev/hda3 init=/linuxrc"
    
<comment># Voor dual-booting van Windows e.a. besturingssystemen</comment>
other=/dev/hda1            
   label=dos                
</pre>

<warn>
Substitueer <c>KV</c> met de kernelversie die je geinstalleerd hebt, en
zorg ervoor dat <c>default=</c> naar de juiste label verwijst
(<c>gk_linux</c> in geval je genkernel gebruikt hebt).
</warn>

<ul>
<li><i>boot=/dev/hda</i> vertelt LILO dat hij zichzelf moet installeren op de eerste HD op de eerste IDE controller.</li>
<li><i>map=/boot/map</i> geeft de locatie van de map-file. In normaal gebruik moet je dit niet aanpassen.</li>   
<li><i>install=/boot/boot.b</i> vertelt LILO om dat bestand als nieuwe bootsector te gebruiken. Bij normaal gebruik moet dit niet aangepast worden. Indien deze regel vermist is, zal LILO /boot/boot.b als default gebruiken.</li>
<li>Indien <i>prompt</i> in de configfile staat, zal LILO je de default <i>lilo:</i> tonen. Alhoewel het niet aan te raden is om prompt te verwijderen kan je nog steeds, door SHIFT in te drukken tijdens het booten, een prompt krijgen.</li>
<li><i>timeout=50</i> stelt het aantal tienden van een seconde in dat LILO moet wachten op gebruikers-commando's.  Indien de gebruiker niet binnen deze tijdsperiode een toets indrukt zal LILO verder doen met de default instellingen. Indien je deze regel achterwege laat worden er default 50 tienden van een seconde genomen.</li>
<li><i>lba32</i> vertelt aan LILO hoe de HD geometrie is. Een andere mogelijkheid is <i>linear</i>. Tenzij je weet wat je doet blijf je beter van deze regel af. Mogelijk maak je anders je systeem niet-bootable.</li>
<li><i>default=linux</i> verwijst naar het default besturingssysteem van al de mogelijkheden die lager in lilo.conf gedefinieerd zijn dat LILO moet booten. De naam &quot;linux&quot; verwijst naar de label-regel van een desbetreffende mogelijkheid.</li>
<li><i>image=/boot/bzImage</i> specifieert het linux-kernel-bestand die geboot dient te worden.</li>
<li><i>label=linux</i> geeft een naam aan de mogelijkheid voor in het LILO-scherm. In dit voorbeeld is het eveneens de naam die gebruikt wordt bij de default-regel, en dus zal deze mogelijkheid default opstarten.</li>
<li><i>read-only</i> zegt dat de root partitie in het begin read-only moet gemount worden en dus tijdens het booten niet mag veranderen.</li>
<li><i>root=/dev/hda3</i> vertelt LILO welke partitie gebruikt moet worden als rootpartitie.</li>
</ul>

<p>
Nadat je je <i>lilo.conf</i> bestand aangepast hebt, moet je LILO uitvoeren om 
de aanpassingen in de MBR neer te schrijven:
</p>

<pre caption="Uitvoeren van LILO">    
# <c>/sbin/lilo</c>            
</pre>            

<p>
LILO is nu geconfigureerd en je machine is nu klaar om in Gentoo Linux te 
booten.
</p>          

</body>        
</section>      
<section>
<title>Indien je van framebuffer gebruik wil maken</title>
<body>

<p>
Indien je framebuffer in je kernel geactiveerd hebt, moet je <c>vga=xxx</c>
toevoegen aan je bootloader configuratiebestand als kernelparameter. <c>xxx</c>
is een van de waarden uit de volgende tabel:
</p>

<table>
<tcolumn width="1in"/>
<tcolumn width="1in"/>
<tcolumn width="1in"/>
<tcolumn width="1in"/>
<tr><ti></ti><th>640x480</th><th>800x600</th><th>1024x768</th><th>1280x1024</th></tr>
<tr><th>8 bpp</th><ti>769</ti><ti>771</ti><ti>773</ti><ti>775</ti></tr>
<tr><th>16 bpp</th><ti>785</ti><ti>788</ti><ti>791</ti><ti>794</ti></tr>
<tr><th>32 bpp</th><ti>786</ti><ti>789</ti><ti>792</ti><ti>795</ti></tr>
</table>

<p>
LILO gebruikers dienen <c>vga=xxx</c> toe te voegen bovenaan hun
configuratie.
</p>

<p>
GRUB gebruikers moeten <c>vga=xxx</c> toevoegen aan de <c>kernel
(hd0,0)...</c> regel.
</p>

</body>
</section>
</chapter>      



<chapter>        
<title>Bootdisks creeren</title>
<section>          
<title>GRUB Bootdisks</title>          
<body>            

<impo>
Vergeet geen diskette in je floppydrive te steken.
</impo>

<p>
Het is altijd een goed idee om een bootdisk aan te maken indien je
een Linux distributie voor de eerste keer installeert. Dit is voor je eigen  
veiligheid, je kan er weinig mis mee doen.
</p>

<p>
Indien je hardware gebruikt die geen succesvolle
GRUB-installatie toelaat, kan het zijn dat je een grub bootdisk moet 
aanmaken. Wanneer we dan van die diskette geboot hebben installeren we 
grub in de mbr. Maak je bootdisks  als volgt:
</p>

<pre caption="Grub op een floppy">
# <c>cd /usr/share/grub/i386-pc/</c>
# <c>cat stage1 stage2 > /dev/fd0</c>
</pre>

<p>
Reboot nu van de floppy. Vanuit de floppy's <c>grub&gt;</c> prompt kan je nu de
nodige <c>root</c> en <c>setup</c> commando's uitvoeren.
</p>

</body>
</section>
<section>
 <title>LILO bootdisks</title>
 <body>

<impo>
Vergeet geen diskette in je floppydrive te steken.
</impo>

<p>
Indien je LILO gebruikt is het eveneens een goed idee om een bootdisk te maken. 
</p>

<pre caption="Een gewone bootdisk maken">    
# <c>dd if=/boot/je_kernel of=/dev/fd0</c>    <comment>(Dit werkt enkel indien je kernel kleiner dan 1.4 MiB is)</comment>
</pre>

 </body>
</section>
</chapter>
<chapter>
<title>GRP Gebruiken</title>
<section>
<body>

<p>
GRP gebruikers kunnen op dit moment pakketten installeren:
</p>

<pre caption = "GRP installaties">
# <i>emerge -k xfree</i>
</pre>

<p>
CD 1 bevat genoeg applicaties om een werkend systeem met XFree86 te
installeren. CD 2 bevat verdere applicaties, zoals KDE, GNOME, Mozilla
en anderen. Om deze pakketten te installeren moet je rebooten in je
Gentoo Linux systeem (wat verder beschreven staat). Daarna mount je CD 2
en kopieer je de bestanden over:
</p>

<pre caption = "Binaire pakketten van CD 2 halen">
# <c>mount /dev/cdrom /mnt/cdrom</c>
# <c>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</c>
</pre>

<p>
Verschillende andere applicaties kunnen nu geinstalleerd worden.
Bijvoorneeld:
</p>

<pre caption = "KDE vanuit GRP installeren">
# <i>emerge -k kde</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Installatie afgewerkt!</title>
<section>
<body>

<p>
Nu is Gentoo Linux geinstalleerd. De enige stappen die nog overblijven zijn 
het aanpassen van de nodige configuratiebestanden, het beeindigen van je 
sessie (chroot shell verlaten), je partities unmounten en het systeem 
heropstarten:
</p>

<warn>
<c>etc-update</c> kan je een lijst voorschotelen van
configuratiebestanden die nieuwer zijn dan deze die je momenteel staan
hebt. Verifieer dat geen enkel van deze configuratiebestanden een grote
impact hebben (zoals <path>/etc/fstab</path>,
<path>/etc/make.conf</path>, <path>/etc/rc.conf</path>, ...). Merge de
bestanden die geen grote impact hebben en verwijder de updates van de
bestanden die wel een grote impact hebben, of bekijk de verschillen en
update de configuratiebestanden manueel.
</warn>

<pre caption="Updaten van de configfiles">
# <c>etc-update</c>
# <c>exit</c> 
<comment>(Dit beeindigt de gechrootte shell. Je kan dit eveneens door <c>^D</c> in te typen.)</comment>
# <c>cd / </c>
# <c>umount /mnt/gentoo/boot</c>
# <c>umount /mnt/gentoo/proc</c>
# <c>umount /mnt/gentoo/dev</c>
# <c>umount /mnt/gentoo</c>
# <c>reboot</c>
<comment>(Vergeet de CD niet uit de CD-ROM drive te halen)</comment>
</pre>

<note>
Na rebooten is het een goed idee om <c>modules-update</c> uit te voeren om 
het <path>/etc/modules.conf</path> bestand aan te maken. In plaats van dit 
bestand rechtstreeks aan te passen raden we je aan om aanpassingen in de 
bestanden in <path>/etc/modules.d</path> te maken.
</note>


<p>
Je bent nu klaar -- Proficiat!
</p>

<p>
Indien je vragen hebt of je wilt meewerken aan de ontwikkeling van Gentoo
Linux, overweeg dan om jezelf te subscriben op de gentoo-user en gentoo-devel
mailinglists (er staat uitleg over op 
<uri link="http://www.gentoo.org/main/en/lists.xml">de mailinglistspagina</uri> (Engels)). We hebben eveneens 
een handige <uri link="http://www.gentoo.org/doc/nl/desktop.xml">Desktop
configuratie gids</uri> die je helpt om je nieuwe Gentoo Linux systeem te
configureren, en een handige 
<uri link="http://www.gentoo.org/doc/nl/portage-user.xml">Portage gebruikgids</uri>
om je op stap te zetten met het portage gebruik. De rest van de Gentoo
Documentatie vind je 
<uri link="http://www.gentoo.org/main/en/docs.xml">hier</uri>. 
Indien je nog enkele andere vragen hebt over de installatie of zelfs iets 
anders over Gentoo, gelieve dan de Gentoo Linux 
<uri link = "http://www.gentoo.org/doc/nl/faq.xml">FAQ</uri> te raadplegen. 
Geniet en welkom bij Gentoo Linux !
</p>

</body>
</section>
</chapter>

<chapter>
<title>Gentoo-Stats</title>
<section>
<body>

<p>
Het Gentoo Linux gebruikers-statistieken programma was ontwikkeld als een 
poging om de ontwikkelaars een idee te geven over hun gebruikersbasis. Het 
collecteert informatie over Gentoo Linux-gebruik om ons te helpen in het 
neerschrijven van prioriteiten voor de ontwikkeling. Het is een volledig 
optioneel programma en het zou ten zeerste geapprecieerd zijn indien je het 
zou gebruiken.
Voorgekauwde statistieken kan je vinden op <uri>http://stats.gentoo.org</uri>.
</p>

<p>
De gentoo-stats server zal aan je systeem een ID toekennen die ervoor zorgt 
dat elk systeem maar 1 maal meegeteld wordt. Deze ID zal niet gebruikt worden 
om je systeem de identificeren en het zal niet met een IP gelinkt worden of 
enig ander doel hebben. Tijdens de ontwikkeling van het systeem is elke 
mogelijke voorzorgsmaatregel genomen om je privacy te garanderen. De volgende 
zaken worden door &quot;gentoo-stats&quot; bekeken en doorgegeven:
</p>

<ul>
<li>Geinstalleerde packages en hun versie-nummer</li>
<li>CPU informatie: snelheid (MHz), merk, type, CPU flags (zoals &quot;mmx&quot; of &quot;3dnow&quot;)</li>
<li>geheugen-informatie (totaal beschikbare fysieke RAM en swap-ruimte)</li>
<li>PCI- en netwerkkaarten</li>
<li>Het Gentoo Linux-profiel dat je pc gebruikt (dat is de map waarnaartoe <path>/etc/make.profile</path> wijst).</li>
</ul>

<p>
Wij zijn er ons van bewust dat het vrijgeven van gevoelige informatie een 
gevaar is voor de Gentoo Linux gebruikers (net zoals voor de ontwikkelaars). 
</p>

<p>
De volgende zaken zijn een lijst van gegevens die niet en nooit zullen 
gearchiveerd worden:
</p>

<ul>
<li>Tenzij je het gentoo-stats programma aanpast zal het nooit gevoelige
informatie, zoals wachtwoorden, configuratie-gegevens, schoenmaat, ... doorsturen.</li>
<li>Versturen van e-mailadressen is optioneel en staat standaard af.</li>
<li>Het IP-adres van waaruit de gegevens komen wordt niet gelinkt, op eender welke wijze, zodat het onmogelijk is om je te identificeren. Er zijn geen &quot;IP-adres/System ID&quot; sleutels.</li>
</ul>

<p>
De installatie is eenvoudig - voer gewoon het volgende uit:
</p>

<pre caption = "Emerging Gentoo-Stats">
# <c>emerge gentoo-stats</c> <codenote>Installeert gentoo-stats</codenote>
# <c>gentoo-stats --new</c> <codenote>Verkrijgen van een nieuwe System ID</codenote>
</pre>

<p>
Het tweede commando vraagt een nieuwe System ID aan en slaat deze op in 
<path>/etc/gentoo-stats/gentoo-stats.conf</path>. Je kan dat bestand bekijken 
om meer opties te vinden.
</p>

<p>
Hierna zou je programma best op regelmatige tijdstippen laten uitvoeren 
(gentoo-stats moet niet als root gerunned worden). Voeg de volgende regel toe 
aan je <path>crontab</path>:
</p>

<pre caption = "Gentoo-stats met cron laten uitvoeren">
<c>0 0 * * 0,4 /usr/sbin/gentoo-stats --update &gt; /dev/null</c>
</pre>

<p>
Het <c>gentoo-stats</c> programma is een simpel perl-script dat bekeken kan 
worden met je favoriete viewer of editor: <path>/usr/sbin/gentoo-stats</path>. 
</p>

</body>
</section>
</chapter>
<chapter>
<title>Gentoo op speciale hardware</title>
<section>
<title>Hardware ATA RAID</title>
<body>
<p>
Gebruikers die Gentoo Linux op een Hardware ATA RAID willen installeren
moeten de volgende stappen doornemen en toepassen opdat zij Gentoo Linux
succesvol kunnen installeren.
</p>
<ul>
<li>Zorg ervoor dat je de LiveCD opstart met de <c>doataraid</c>
kerneloptie.</li>
<li>Indien je bovenstaande vergeten bent of de modules zijn misterieus
niet geladen, laadt ze dan manueel:
<pre caption = "RAID modules opstarten">
# <i>modprobe ataraid</i>
<comment>Voor Promise Raid Controllers:</comment>
# <i>modprobe pdcraid</i>
<comment>Voor Highpoint Raid Controllers:</comment>
# <i>modprobe hptraid</i>
</pre>
</li>
<li>Sommige ATA RAID Controllers vereisen een reboot na het partitioneren;
formatteren zal anders mislukken.</li>
<li>Alvorens te chrooten moet je de devicestructuur mounten in je nieuwe
omgeving:
<pre caption = "/dev in /mnt/gentoo/dev mounten">
# <i>mount -o bind /dev /mnt/gentoo/dev</i>
</pre>
</li>
<li>Gedurende kernelconfiguratie moet je de nodige RAID opties
selecteren:
<pre caption = "RAID Configuratie in de kernel">
<comment>Voor Highpoint RAID controllers:</comment>
ATA/IDE/MFM/RLL support  ---&gt;
  [*] HPT36X/37X chipset support 
  [*] Support for IDE Raid controllers
  [*] Highpoint 370 software RAID
<comment>Voor Promise RAID controllers:</comment>
ATA/IDE/MFM/RLL support  ---&gt;
  [*] PROMISE PDC202{46|62|65|67} support 
  <comment>en/of</comment>
  [*] PROMISE PDC202{68|69|70|71|75|76|77} support
  [*] Support for IDE Raid controllers
  [*] Support Promise software RAID (Fasttrak(tm))
</pre>
</li>
<li>Wanneer je GRUB gebruikt moet je <c>--stage2=/boot/grub/stage2</c>
toevoegen aan het <c>setup</c> commando tijdens het uitvoeren van
<c>grub</c>:
<pre caption = "GRUB voor Hardware RAID">
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup --stage2=/boot/grub/stage2 (hd0)</i>
grub&gt; <i>quit</i>
</pre>
Tevens moet je in de GRUB configuratie <c>root</c> naar de correcte
device instellen:
<pre caption = "grub.conf voor RAID">
title=Mijn Gentoo Linux on RAID
root (hd0,0)
kernel (hd0,0)/boot/bzImage root=/dev/ataraid/dXpY
</pre>
</li>
<li>LILO gebruikers moeten enkel de <c>root</c> aanpassen:
<pre caption = "lilo.conf voor RAID">
image=/boot/bzImage
    label=linux
    read-only
    root=/dev/ataraid/dXpY
</pre></li></ul>

<p>
Indien je nog steeds problemen hebt met het installeren van Gentoo
Linux op je Hardware RAID, rapporteer deze dan op
<uri>http://bugs.gentoo.org</uri>.
</p>

<p>
Veel plezier met je nieuwe installatie!
</p>

</body>
</section>
</chapter>
</guide>
