<?xml version="1.0" encoding="UTF-8"?>

<!-- 
	Last updated from revision 1.111
	Master document: English version
-->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/nl/gentoo-x86-install.xml">
<title>Gentoo Linux 1.4_rc4 Installatie Instructies</title>
<author title="Chief Architect">
  <mail link="drobbins@gentoo.org">Daniel Robbins</mail>
</author>
<author title="Author">Chris Houser</author>
<author title="Author">
  <mail link="">Jerry Alexandratos</mail>
</author>
<author title="Ghost">
  <mail link="g2boojum@gentoo.org">Grant Goodyear</mail>
</author>
<author title="Editor">
  <mail link="zhen@gentoo.org">John P. Davis</mail>
</author>
<author title="Editor">
  <mail link="stocke2@gentoo.org">Eric Stockbridge</mail>
</author>
<author title="Editor">
  <mail link="Pierre-Henri.Jondot@wanadoo.fr">Pierre-Henri Jondot</mail>
</author>
<author title="Editor">
  <mail link="rajiv@gentoo.org">Rajiv Manglani</mail>
</author>
<author title="Editor">
  <mail link="seo@gentoo.org">Jungmin Seo</mail>
</author>
<author title="Editor">
  <mail link="zhware@gentoo.org">Stoyan Zhekov</mail>
</author>
<author title="Editor">
  <mail link="jhudso@gentoo.org">Jared Hudson</mail>
</author>
<author title="Editor">
  <mail link="">Colin Morey</mail>
</author>
<author title="Editor">
  <mail link="peesh@gentoo.org">Jorge Paulo</mail>
</author>
<author title="Editor">
  <mail link="carl@gentoo.org">Carl Anderson</mail>
</author>
<author title="Translator">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>

<abstract>
Deze instructies helpen je stap voor stap bij het installeren van
Gentoo Linux 1.4_rc4. Gentoo Linux installeren kan op diverse manieren,
afhankelijk van hoeveel je van je systeem zelf wilt compileren.
</abstract>

<version>2.6.1</version>
<date>4 Mei 2003</date>

<chapter>
<title>Over de installatie</title>
<section>
<body>

<p>
Onze installatie-CD boot van bijna elke moderne IDE CD-ROM drive, alsook
van verschillende SCSI CD-ROMs, onder voorwaarde natuurlijk dat je
CD-ROM en BIOS dat ondersteunen. Op de CD-ROM vind je Linux 
ondersteuning voor IDE (en PCI IDE) (in de kernel ingebakken) alsook 
ondersteuning voor alle SCSI-hardware (beschikbaar onder de vorm van
kernelmodules). Daarnaast leveren we modules voor letterlijk elke netwerkkaart
die door Linux ondersteund wordt, alsook tools die je toelaten om je netwerk 
te configureren, uitgaande <c>ssh</c>-connecties te maken en bestanden te
downloaden. 
</p>

<p>
Om Gentoo Linux van de CD te installeren heb je een 486+ processor nodig en 
minstens 64 MiB RAM (Gentoo Linux is al succesvol geinstalleerd met 64 MiB RAM
en een 64 MiB swap-ruimte, maar het compileerproces is enorm traag onder deze
condities). 
</p>

<p>
Gentoo Linux kan geinstalleerd worden door gebruik te maken van 1 van de 3
niveau-tarball bestanden. Welke jij moet kiezen hangt af van hoeveel je van het
systeem zelf wilt compileren. 
Niveau 1 (<e>stage1</e>) is voor het bootstrappen en compileren van je 
volledige systeem. 
Met niveau 2 (<e>stage2</e>) compileer je je volledige systeem, behalve de 
bootstrapping die wij al voor jouw gedaan hebben. 
De niveau 3 (<e>stage3</e>) tarball bevat al een basis Gentoo Linux systeem. 
</p>

<p>
<b>Wat moet je nu kiezen? Een niveau-1, niveau-2 of niveau-3 tarball?</b>
</p>

<p>
Als je start vanuit niveau 1 heb je volledige controle over de 
optimalisatie-instellingen en de configuratie-mogelijkheden aangezien je je 
ganse systeem van in het begin zelf configureert en compileert. Dit maakt 
niveau 1 nu net zo interessant voor gebruikers die weten wat ze doen.
Niveau 2 installaties laten je toe om het bootstrap-proces over te slaan, wat 
geen verdere impact heeft als je tevreden bent met de default optimalisaties 
die wij voor je gekozen hebben (afhankelijk van de gekozen tarball).
Indien je niveau 3 kiest kies je voor de snelle installatie van Gentoo Linux,
maar dit wil tevens zeggen dat je basissysteem geoptimaliseerd is met de 
optimalisatie-instellingen die wij gekozen hebben. Aangezien de hoofdreleases 
van Gentoo Linux verschillende geoptimaliseerde niveau-3's hebben (voor bijna 
alle cpu's een tarball) kan dit voldoende zijn voor jou. 
</p>

<p>
<b>Indien je Gentoo Linux voor de eerste keer installeert, overweeg dan het 
gebruik van een niveau 3 tarball.</b>
</p>

<p>
Dus, hoe start je nu de installatie? Eerst moet je beslissen welke van onze
LiveCD ISO-bestanden je van 
<uri>http://www.ibiblio.org/gentoo/releases/1.4_rc4/x86/</uri> wilt halen.
Overweeg het gebruik van mirrors om de hevige load van de hoofdserver te
verminderen. Een lijst van servers kan je vinden op
<uri>http://www.gentoo.org/main/en/mirrors.xml</uri>.
</p>

<p>
De LiveCDs zijn volledige CD-bestanden die op een CD-R of CD-RW moeten gebrand 
worden met CD-brandsoftware. Op dit moment hebben we 2 types van LiveCDs. 
</p>

<p>
De eerste draagt het &quot;gentoo-basic&quot; label, en is ongeveer 40 MiB 
groot. Deze LiveCD is minimaal in grootte zodat je die snel kan downloaden; ze 
bevat  enkel een niveau-1 tarball die je kan vinden in 
<path>/mnt/cdrom/gentoo/</path> nadat de CD geboot is. 
Deze CD kan je vinden in de <path>x86/livecd/</path> map van de
boven vermeldde url.
</p>

<p>
De 2e LiveCD die we aanbieden heet &quot;gentoo-3stages&quot;. Deze kan je 
ook vinden in de <path>x86/livecd/</path> map van diezelfde url. Het 
bevat niveau-1, -2 en -3 tarballs. Met deze LiveCD kan je een volledig 
functionerend Gentoo Linux systeem installeren vanuit het niveau dat jij
wenst.
</p>

<p>
<b>Wat is er gebeurd met de i686, pentium3, athlon en athlon-mp optimalisaties?
En de LiveCDs met GRP (Gentoo Reference Platform)?</b>
</p>

<p>
Gentoo 1.4_rc4 is bedoeld om een kleine release-kandidaat te zijn voor de
opkomende 1.4-release. 1.4_final zal alle gebruikelijke x86 architecturen en 
GRP bevatten. Indien je een installatie-niveau wenst dat geoptimaliseerd 
is voor jouw CPU raden we je aan om de 1.4_rc2 te installeren. Je kan de 
documentatie hiervoor vinden op 
<uri>http://www.gentoo.org/doc/nl/gentoo-x86-1.4_rc2-install.xml</uri>.
</p>

<warn>
Indien je problemen ondervindt in eender welk deel van de installatie en je 
wilt dat rapporteren als een bug, doe dit dan op 
<uri>http://bugs.gentoo.org</uri>. Indien de bug naar de nodige maintainers 
van packages moet gestuurd worden (bv die van KDE) dan zullen wij daar wel 
voor zorgen.
</warn>

<p>
Nu, laten we snel eens het installatie-proces overlopen. Allereerst zal je
een LiveCD-bestand downloaden, branden en booten. Eenmaal je een root-prompt
verkrijgt, zal je partities aanmaken, de bestandssystemen creeren en 
een niveau-1, niveau-2 of niveau-3 tarball uitpakken. 
Als je een niveau-1 of niveau-2 tarball gebruikt zal je de nodige stappen 
ondernemen om je systeem naar een niveau-3 te krijgen. Eenmaal je systeem 
op niveau 3 aanbeland is kan je ze configureren (configuratiebestanden 
verder invullen, bootloader installeren, etc...) en boot je ze zodat je een 
volledig werkend Gentoo Linux systeem hebt. 
Afhankelijk vanuit welk niveau je start geven we hier wat je nodig hebt voor de
installatie:
</p>

<table>
<tr><th>Niveau tarball (<e>stage</e>)</th>
    <th>Installatiestappen</th>
</tr>
<tr><ti>1</ti>
    <ti>partitionering, formatering, emerge sync, bootstrap, emerge system, 
        emerge linux kernel broncode, laatste configuratie</ti>
</tr>
<tr><ti>2</ti>
    <ti>partitionering, formatering, emerge sync, emerge system, 
        emerge linux kernel broncode, laatste configuratie</ti>
</tr>
<tr><ti>3</ti>
    <ti>partitionering, formatering, emerge sync (optioneel), 
        laatste configuratie</ti>
</tr>
</table>

</body>
</section>
</chapter>

<chapter>
<title>Opstarten</title>
<section>
<body>

<p>
Je begint door van de livecd op te starten. Je ziet een leuk bootscherm
met het Gentoo Logo op. Hier kan je ofwel &quot;Enter&quot; indrukken om 
te beginnen met het booten, of je kan met aangepaste opties opstarten door een 
kernel te specificeren gevolgd door verschillende bootopties en dan op
&quot;Enter&quot; te drukken. Bijvoorbeeld <c>gentoo nousb nohotplug</c>.
Consulteer de volgende tabel voor een lijst met beschikbare kernels en opties
of druk F2 bij het bootscherm om help te krijgen. 
</p>

<table>
<tr><th>Beschikbare kernels</th><th>Uitleg</th></tr>
<tr><ti>gentoo</ti><ti>basis gentoo kernel (default)</ti></tr>
<tr><ti>800</ti><ti>800x600 framebuffer mode</ti></tr>
<tr><ti>1024</ti><ti>1024x768 framebuffer mode (default)</ti></tr>
<tr><ti>1280</ti><ti>1280x1024 framebuffer mode</ti></tr>
<tr><ti>nofb</ti><ti>desactiveert framebuffer mode</ti></tr>
<tr><ti>smp</ti><ti>laadt een smp kernel zonder framebuffer
ondersteuning</ti></tr>
<tr><ti>acpi</ti><ti>activeert acpi en laadt acpi modules tijdens het
booten</ti></tr>
<tr><ti>memtest</ti><ti>boot met het memorytest programma</ti></tr>
</table>

<table>
<tr><th>Beschikbare bootopties</th><th>Uitleg</th></tr>
<tr><ti>doataraid</ti><ti>laadt ide raid modules vanuit de initrd</ti></tr>
<tr><ti>dofirewire</ti><ti>laadt firewire modules vanuit initrd (voor firewire
CDROMs e.d.)</ti></tr>
<tr><ti>dokeymap</ti><ti>activeert keymapselectie voor niet-us
toetsenborden</ti></tr>
<tr><ti>dopcmcia</ti><ti>activeert de pcmcia services</ti></tr>
<tr><ti>doscsi</ti><ti>scant naar scsi apparaten (kan voor problemen zorgen bij
sommige netwerkkaarten)</ti></tr>
<tr><ti>noapm</ti><ti>weigert het laden van de apm modules</ti></tr>
<tr><ti>nodetect</ti><ti>hwsetup, kudzu en hotplug worden niet
uitgevoerd</ti></tr>
<tr><ti>nodhcp</ti><ti>dhcp wordt niet vanzelf gestart als je nic gedetecteerd
wordt</ti></tr>
<tr><ti>nohotplug</ti><ti>desactiveert de hotplug service</ti></tr>
<tr><ti>noraid</ti><ti>weigert het laden van de evms modules</ti></tr>
<tr><ti>nousb</ti><ti>weigert het laden van de usb modules vanuit initrd,
desactiveert de hotplug service</ti></tr>
<tr><ti>ide=nodma</ti><ti>vereist dat de IDE devices zonder DMA
werken</ti></tr>
<tr><ti>cdcache</ti><ti>cachet het volledige runtimegedeelte van de cd in ram.
Dit vereist 40 MiB RAM, maar laadt je toe om de cdrom te unmounten en een
andere cdrom te mouten</ti></tr>
</table>

<p>
Eenmaal je op &quot;Enter&quot; gedrukt hebt zal je begroet worden door de 
default kernel bootuitvoer, gevolgd door de normale Gentoo Linux 
opstartsequentie. Je wordt automatisch ingelogd als &quot;root&quot;; 
het rootpaswoord is een random string om veiligheidsredenen.
Je krijgt een root-prompt ("<c>#</c>") op de huidige console. Als je wilt kan je
nieuwe consoles openen door Alt-F2, Alt-F3 en/of Alt-F4 in te drukken. Om terug
te keren naar de console waar je vandaan komt druk je Alt-F1. Op dit moment is 
het aangeraden om het rootpaswoord aan te passen: type daarvoor <c>passwd</c> 
en volg de instructies.
</p>

<p>
Je zal eveneens opmerken dat boven je <c>#</c>-prompt een hoop tekst staat die 
je uitlegt hoe je bepaalde zaken moet doen, zoals het configureren van je 
netwerk alsook waar op de CD je de Gentoo Linux niveau-tarballs kan vinden.
</p>

</body>
</section>
</chapter>

<chapter>
<title>kernelmodules laden</title>
<section>
<body>

<p>
Indien de PCI autodetectie bepaalde hardware vergeet moet je de nodige
kernel modules manueel laden. Om een lijst te zien van alle beschikbare
netwerkkaartmodules, type <c>ls /lib/modules/*/kernel/drivers/net/*</c>. Om een
specifieke module te laden, type:</p>

<pre caption = "PCI Modules Configuratie">
# <i>modprobe pcnet32</i>
<comment>(vervang pcnet32 met jouw netwerkkaartmodule)</comment>
</pre>


<p>
Analoog, als je bepaalde SCSI hardware wilt aanspreken die niet automatisch
gedetecteerd werd tijdens het booten, dan zal je de nodige kernel modules 
van <path>/lib/modules</path> zelf moeten laden, opnieuw via <c>modprobe</c>:
</p>

<pre caption="Laden van SCSI modules">
# <c>modprobe aic7xxx</c> 
<comment>(vervang aic7xxx met de kernelmodule voor jouw SCSI adapter)</comment>
# <c>modprobe sd_mod</c>
<comment>(sd_mod is de ondersteuning voor SCSI schijven)</comment>
</pre>

<note>
Ondersteuning voor SCSI CD-ROMs en harde schijven zit al default in de 
gebruikte kernel.
</note>

<p>
Als je hardware RAID gebruikt moet je de ATA-RAID-modules en de module voor
jouw RAID-controller laden:
</p>

<pre caption="Laden van RAID modules">    
# <c>modprobe ataraid</c>    
# <c>modprobe pdcraid</c>            
<comment>(Promise Raid Controller)</comment>    
# <c>modprobe hptraid</c>            
<comment>(Highpoint Raid Controller)</comment>    
</pre>

<p>
De Gentoo LiveCD zou DMA op je schijven moeten geactiveerd hebben, maar
als dat niet het geval is kan je <c>hdparm</c> gebruiken om DMA op je
schijven te activeren.
</p>

<pre caption = "Instellen van DMA">
<comment>(Vervang hdX met jouw HD)</comment>
# hdparm -d 1 /dev/hdX 
<comment>(Activeert DMA)</comment>
# hdparm -d1 -A1 -m16 -u1 -a64 /dev/hdX
<comment>(Activeert DMA en andere veilige performantie-opties)</comment>
# hdparm -X66 /dev/hdX
<comment>(Activeert Ultra-DMA !! gevaarlijk !! bij sommige schijven zorgt dit voor zware problemen)</comment>
</pre>

</body>
</section>
</chapter>

<!-- Deze sectie is normaal gezien overbodig aangezien hotplug geactiveerd is
     in 1.4_rc3 

<chapter>
<title>PCMCIA kernelmodules laden</title>
<section>
<body>
<p>Als je een PCMCIA netwerkkaart hebt zal je enkele extra stappen moeten ondernemen.
</p>

<warn>
Om problemen met <c>cardmgr</c> te vermijden <e>moet</e> je deze
uitvoeren <e>alvorens</e> je de chroot omgeving binnentreedt tijdens
deze installatie.
</warn>

<pre caption="Laden van PCMCIA modules">
# <i>modprobe pcmcia_core</i>
# <i>modprobe i82365</i>
# <i>modprobe ds</i>
# <i>cardmgr -f</i>
</pre>

<p>Omdat <c>cardmgr</c> detecteert welke hardware er aanwezig is zou je 
pc-speaker enkele tevredenstellende beeps moeten uitspuwen en zou je PCMCIA 
netwerkkaart in leven moeten schieten. Je kan uiteraard ook je PCMCIA-kaart 
in je laptop steken nadat <c>cardmgr</c> uitgevoerd is als je dat liever 
hebt. (Technisch gezien moet je niet <c>cardmgr</c> opnieuw uitvoeren als je 
exact weet welke module je PCMCIA kaart nodig heeft. Als je dat niet weet, 
probeer dan niet alle PCMCIA-modules te laden om te zien welke al dan niet 
functioneren, want de PCMCIA-modules zullen automatisch laden en rondhangen, 
wachtende totdat de bijhorende PCMCIA-kaart geladen wordt. <c>cardmgr</c> 
zal eveneens de module(s) van niet-gebruikte PCMCIA-kaarten weer uit het 
geheugen verwijderen.)
</p>
</body>
</section>
</chapter>

-->

<chapter>
<title>Configureer het netwerk voor de installatie</title>
<section>
<title>Misschien werkt het al?</title>
<body>

<p>
Indien je een 1.4_rc3 (of hogere) LiveCD gebruikt kan het zijn dat je
netwerk al correct ingesteld werd. Indien dat het geval is kan je al gebruik
maken van de vele netwerk-gerelateerde commando's op de LiveCD zoals
<c>ssh</c>, <c>scp</c>, <c>ping</c>, <c>irssi</c>, <c>wget</c>, <c>lynx</c>, en
andere.
</p>

<p>
Je kan dit verifieren door het <c>/sbin/ifconfig</c> commando uit te voeren. 
Deze zou, naast <c>lo</c>, een of meerdere andere netwerkinterfaces moeten
tonen, zoals <c>eth0</c>:
</p>

<pre caption="/sbin/ifconfig voorbeeld voor een werkende netwerkkaart">
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11
</pre>

<p>
Je kan tevens proberen om je internetprovider's DNS servers (te zien in
<path>/etc/resolv.conf</path>) te pingen, alsook een website naar keuze, juist
om te zien of alle paketten het net bereiken, DNS naam-resolutie goed werkt en
dergelijke meer.
</p>

<pre caption="Netwerk testen">
# <c>ping -c 3 www.yahoo.com</c>
</pre>

<p>
Lukt het je om je netwerk te gebruiken? Indien ja, dan kan je de rest van deze
sectie overslaan.
</p>

</body>
</section>
<section>
<title>PPPoE Configuratie</title>
<body>

<p>
In de veronderstelling dat je PPPoE nodig hebt om naar het internet
te connecteren, heeft de LiveCD (eender welke versie) de zaken voor jou
vereenvoudigd door <c>rp-pppoe</c> ter beschikking te stellen. Gebruik het 
bijgeleverde <i>adsl-setup</i>-script om je connectie te configureren. Er zal
gevraagd worden naar de netwerkinterface dat met je ADSL-modem
verbonden is, je gebruikersnaam en paswoord voor de connectie, de IPs van de
DNS-servers van je internetprovider en of je al dan niet een basis firewall 
wenst.
</p>

<pre caption = "Configuratie van PPPoE">
# <c> adsl-setup </c>
# <c> adsl-start </c>
</pre>

<p>
Uiteraard, als je dat wenst kan je nog steeds je netwerk manueel
instellen.
</p>

<p>
Indien er iets verkeerd loopt, controleer dan of je alles correct ingetypt
hebt (gebruikersnaam, paswoord) door in <path>/etc/ppp/pap-secrets</path> 
of <path>/etc/ppp/chap-secrets</path> te kijken alsook door je ervan te 
vergewissen dat je de correcte netwerkinterface gebruikt.
</p>

</body>
</section>

<section>
<title>Vereenvoudigde netwerk-configuratie </title>
<body>

<p>
De eenvoudigste manier om je netwerk te configureren (indien dit niet
automatisch is gebeurd) is door het <c>net-setup</c> script uit te voeren.
</p>

<pre caption="Configureren van de netwerkkaart">
# <c>net-setup eth0</c>
</pre>

<p>
Uiteraard, als je dat wilt kan je het netwerk ook op de &quot;oude&quot; manier 
configureren. Dit wordt later uitgelegd.
</p>
</body>
</section>

<section>
<title>Manuele DHCP-configuratie</title>
<body>

<p>
Netwerkconfiguratie is simpel met DHCP; Als je internetprovider geen DHCP 
gebruikt, ga dan verder naar de statische configuratie-sectie.
</p>

<pre caption="Netwerk configuratie met DHCP">
# <c>dhcpcd eth0</c> 
</pre>

<note>
Sommige internetproviders vereisen het opgeven van een hostname. Om dat toe te
passen voeg je een <c>-h mijnhostnaam</c> argument toe aan het dhcpcd-commando 
hierboven.
</note>

<p>
Als je <e>dhcpConfig</e>-waarschuwingen krijgt moet je niet panikeren. Deze
waarschuwingen zijn hoogstwaarschijnlijk enkel schermvulling zonder meer. 
</p>

</body>
</section>
<section>
<title>Manuele statische configuratie</title>
<body>

<p>
Je moet het netwerk dusdanig configureren opdat je de nodige broncodebestanden
kan laten downloaden die nodig zijn voor de installatie van Gentoo Linux. 
Voer de volgende commando's uit en vervang $IFACE met jouw netwerkinterface 
(meestal <i>eth0</i>), $IPNUM met jouw IP-adres (bv <i>192.168.0.5</i>), 
$BCAST met jouw broadcast adres (bv <i>192.168.0.255</i>) en $NMASK met jouw 
netwerkmasker (bv <i>255.255.255.0</i>). Voor het <c>route</c> commando moet 
je $GTWAY vervangen met jouw gateway (bv <i>192.168.0.1</i>).
</p>

<pre caption="Manuele statische configuratie van het netwerk">
# <c>/sbin/ifconfig $IFACE $IPNUM broadcast $BCAST netmask $NMASK</c>
# <c>/sbin/route add -net default gw $GTWAY netmask 0.0.0.0 metric 1</c>
</pre>

<p>
Nu is het tijd om <path>/etc/resolv.conf</path> aan te maken zodat 
&quot;name resolution&quot; (Web/FTP-sites vinden via hun naam in plaats van 
via hun IP-adres) werkt.
</p>

<p>
Hier is een voorbeeld om je eigen /etc/resolv.conf aan te maken:
</p>

<pre caption="/etc/resolv.conf voorbeeld">
domain mydomain.com
nameserver 10.0.0.1
nameserver 10.0.0.2
</pre>

<p>
Vervang <c>10.0.0.1</c> en <c>10.0.0.2</c> met het IP-adres van jouw primaire 
respectievelijk secundaire DNS-server (of die van je internetprovider).
</p>

</body>
</section>

<section>
<title>Proxy Configuratie</title>
<body>

<p>
Als je achter een proxy zit is het noodzakelijk om je systeem te laten weten 
dat er een proxy is zodat deze die kan gebruiken. Dit moet gebeuren alvorens je
verder gaat met de installatie. Je moet enkele variabelen exporteren om 
deze configuratie door te voeren:
</p>

<pre caption="Invoeren van de proxy-instellingen">
# <c>export http_proxy=&quot;http://machine.bedrijf.com:1234/&quot; </c>
# <c>export ftp_proxy=&quot;$http_proxy&quot; </c>
# <c>export RSYNC_PROXY=&quot;$http_proxy&quot; </c>
</pre>

</body>
</section>

<section>
<title>Netwerk is klaar. Op de plaatsen, start!</title>
<body>

<p>
Het netwerk is nu klaar voor gebruik. Je kan nu gebruik maken van 
<c>ssh</c>, <c>scp</c>, <c>lynx</c>, <c>irssi</c>, <c>wget</c> en andere
zodat je naar andere machines op jouw LAN of op het internet kan connecteren.
</p>

</body>
</section>
<section>
<title>Ik heb geen netwerk nodig!</title>
<body>
<p>
Indien je geen netwerk nodig hebt kan je help vinden in de <uri
link="http://forums.gentoo.org">Gentoo Forums</uri>. Enkele interessante links
vind je op <uri>http://forums.gentoo.org/viewtopic.php?t=43025</uri>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Je systeem datum/tijd instellen</title>
<section>
<body>
<p>
Het is nu tijd om je systeem datum/tijd in te stellen. Dit kan je doen met het
<c>date</c> commando.
</p>

<pre caption="Datum en tijd instellen">
# <c>date</c>
Thu Feb 27 09:04:42 CST 2003
<comment>(Indien de datum/tijd verkeerd is, stel deze dan in met het volgende commando:) </comment>
# <c>date 022709042003</c>
<comment>(date MMDDhhmmJJJJ)</comment>
</pre>
</body>
</section>
</chapter>


<chapter>
<title>Bestandssystemen, partities en block-apparaten</title>
<section>
<title>Inleiding tot de block-apparaten</title>
<body>

<p>
In deze sectie nemen we een kijkje naar de HD-specifieke zaken van Gentoo Linux
en Linux in het algemeen, inclusief Linux bestandssystemen, partities en
block-apparaten. Eenmaal je gewend bent met de schijf- en partitiezaken die we
bespreken zal je gegidst worden door het partitioneren en formatteren van je
Gentoo Linux installatie.
</p>

<p>
We beginnen met een introductie tot &quot;block-apparaten&quot;. Het meest
bekende block-apparaat is waarschijnlijk deze die het eerste IDE-apparaat in
een Linux systeem omschrijft.
</p>

<pre caption="/dev/hda, het block-apparaat dat de primary master IDE apparaat
in je systeem omschrijft">
/dev/hda
</pre>

<p>
Indien je systeem SCSI schijven gebruikt, dan zal je eerste HD als volgt
omschreven worden:
</p>

<pre caption="/dev/dsa, het block-apparaat dat de eerste logische SCSI-HD in je
systeem omschrijft">
/dev/sda
</pre>

<p>
De block-apparaten hierboven representeren een <i>abstracte</i> interface naar
de respectieve apparaten. Programmas kunnen deze block-apparaten gebruiken om
met de schijf te communiceren zonder zich aan te trekken van het soort schijf
(SCSI, IDE of iets anders). Het programma kan simpelweg de ruimte op een schijf
adresseren als een bende aan elkaar geschakelde, random-toegankelijke, 512 bytes
grote blokken.
</p>

</body>
</section>
<section>
<title>Partities en fdisk</title>
<body>

<p>
Onder Linux maken we bestandssystemen aan door middel van een speciaal commando
genaamd <c>mkfs</c> (of <c>mke2fs</c>, <c>mkreiserfs</c>, etc...) waarbij we
een specifiek block-apparaat meegeven als een command-line argument.
</p>

<p>
Alhoewel het theoretisch gezien mogelijk is om een &quot;volledige
schijf&quot;-block-apparaat (een die een <i>ganse</i> schijf representeert),
zoals <c>/dev/hda</c> of <c>/dev/sda</c>, te gebruiken voor 1 bestandssysteem,
wordt dit in de praktijk amper toegepast. Immers worden volledige
block-apparaten opgesplitst in kleinere, meer onderhoudsvriendelijke
block-apparaten die we &quot;partities&quot; noemen. Partities worden gecreerd
met een tool zoals <c>fdisk</c>, dat de partitietabel op de schijf aanmaakt en
aanpast. De partitietabel beschrijft exact hoe je schijf opgedeelt is.
</p>

<p>
We kunnen een kijkje nemen in een HD's partitietabel door <c>fdisk</c> uit te
voeren, waarbij we een block-apparaat - dat een volledige schijf moet
representeren - meegeven als argument:
</p>

<note>
Andere tools die gebruikt kunnen worden zijn <c>cfdisk</c>, <c>parted</c>, 
<c>partimage</c>, ...
</note>

<pre caption="Opstarten van fdisk">
# <c>fdisk /dev/hda</c>
</pre>

<p>
of
</p>

<pre caption="Opstarten van fdisk voor /dev/sda">
# <c>fdisk /dev/sda</c>
</pre>

<impo>
<b>Maak <i>nooit</i> aanpassingen aan de HD's partitietabel indien een van de
partities die aangepast wordt in gebruik is of belangrijke data bevat. Indien
je dat toch doet zal je hoogst waarschijnlijk je data verliezen.</b>
</impo>

<p>
Eenmaal je in fdisk bent, zal je begroet worden door een prompt die er als
volgt uitziet:
</p>

<pre caption="De fdisk prompt">
Command (m for help):
</pre>

<p>
Type <c>p</c> om de partitieconfiguratie van de schijf te bekijken:
</p>

<pre caption="Een voorbeeld partitieconfiguratie">

Command (m for help): <c>p</c>

Disk /dev/hda: 240 heads, 63 sectors, 2184 cylinders  
Units = cylinders of 15120 * 512 bytes    
 
Device Boot    Start       End    Blocks   Id  System
/dev/hda1          1        14    105808+  83  Linux  
/dev/hda2         15        49    264600   82  Linux swap  
/dev/hda3         50        70    158760   83  Linux  
/dev/hda4         71      2184  15981840    5  Extended
/dev/hda5         71       209   1050808+  83  Linux  
/dev/hda6        210       348   1050808+  83  Linux  
/dev/hda7        349       626   2101648+  83  Linux  
/dev/hda8        627       904   2101648+  83  Linux
/dev/hda9        905      2184   9676768+  83  Linux    

Command (m for help):
</pre>

<p>
In dit voorbeeld zie je dat de schijf geconfigureerd is om 7 Linux
bestandssystemen te omvatten (elk een wordt met &quot;Linux&quot; aangeduid)
alsook een swappartitie (aangeduid met &quot;Linux swap&quot;).
</p>

<p>
Kijk naar de overeenkomstige block-apparaten in de meest linkse kolom,
startende met <c>/dev/hda1</c> en eindigend bij <c>/dev/hda9</c>. In de
begindagen van de pc liet partitioneringssoftware toe om maximaal 4 partities
aan te maken (&quot;Primaire partities&quot; genaamd). Dit was te limiterend,
dus werd een workaround gemaakt dat <i>Extended partitionering</i> heet. Een
extended partitie is gelijkaardig aan een primaire partitie, en telt mee voor
de maximum-4-primaire-partities-regel. Ze kan echter een groot aantal
<i>logische</i> partities bevatten, wat de mogelijkheid schept om dus meer dan
4 partities te gebruiken.
</p>

<p>
Partities vanaf <c>hda5</c> zijn per definitie logische partities. De nummers 1
tot en met 4 zijn gereserveerd voor primaire of extended partities.
</p>

<p>
In ons voorbeeld zijn <c>hda1</c>, <c>hda2</c> en <c>hda3</c> primaire
partities en <c>hda4</c> een extended partitie die de logische partities
<c>hda5</c> tot en met <c>hda9</c> bevat. Je zal dus, in dit voorbeeld, nooit 
echt <c>/dev/hda4</c> <i>gebruiken</i> om een bestandssysteem op te zetten --
het dient enkel als een container voor de logische partities <c>hda5</c> tot en
met <c>hda9</c>.
</p>

<p>
Let trouwens p het feit dat elke partitie een &quot;Id&quot; heeft, een
&quot;partitie type&quot;. Telkens je een partitie aanmaakt moet je ervoor
zorgen dat dit type correct ingesteld wordt. 83 is het type voor partities die
een Linux-bestandssysteem zullen bevatten, terwijl 82 het type voor Linux
swappartities is. Je kan een type van een bestaande partitie aanpassen met de
<c>t</c> optie in <c>fdisk</c>. De Linux-kernel gebruikt het partitietype om
bestandssystemen automatisch te detecteren en swap-partities tijdens het booten
te activeren.
</p>

</body>
</section>
<section>
<title>fdisk gebruiken om de partities in te stellen</title>
<body>

<p>
Nu dat je een inleiding gekregen hebt over hoe HD's en partities onder Linux
werken, is het tijd om je door het partitioneringsproces van je Gentoo Linux
installatie te gidsen. Wanneer dit gedaan is, zal je partitieconfiguratie er
als volgt uitzien:
</p>

<pre caption="De partitieconfiguratie dat je zal hebben na het volgen van onze
stappen">
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes       

   Device Boot    Start       End    Blocks   Id  System  
/dev/hda1   *         1        14    105808+  83  Linux  
/dev/hda2            15        81    506520   82  Linux swap  
/dev/hda3            82      3876  28690200   83  Linux    

Command (m for help):
</pre>

<p>
In ons voorgesteld &quot;beginners&quot;-partitioneringsschema hebben we 3
partities opgenomen. De eerste (<c>/dev/hda1</c>), kleine partitie aan het 
begin van de schijf wordt de bootpartitie. Het doel van deze partitie is het
omvatten van alle kritische data aangaande het booten -- de GRUB bootloader
informatie (indien je GRUB gaat gebruiken) alsook je Linux kernel(s). De
bootpartitie geeft ons een veilige plaats om alles wat betreft booten in op te
slaan. Gedurende normaal Gentoo Linux gebruik mag deze partitie <e>niet</e>
gemount zijn om veiligheidsredenen. Indien je een SCSI-systeem opstelt zal je
bootpartitie waarschijnlijk <c>/dev/sda1</c> worden.
</p>

<p>
Het is aangeraden om een aparte bootpartitie te gebruiken (die alles bevat wat
de bootloader nodig heeft om correct te functioneren) die zich in het begin van
de HD bevindt. Alhoewel dat niet meer verplicht is, is dit een handige traditie
vanuit de dagen dat de LILO bootloader geen kernels kon laden van
bestandssystemen die zich verder dan de 1024e cilinder bevonden.
</p>

<p>
De 2e partitie (<c>/dev/hda2</c>) zal gebruikt worden voor swapruimte. De
kernel gebruik swapruimte als virtueel geheugen wanneer er niet genoeg RAM
beschikbaar is. Deze partitie is, relatief gezien, niet echt groot; typisch
schommelt deze rond de 512 MiB. Opnieuw, indien je een SCSI systeem opstelt zal
je swappartitie waarschijnlijk <c>/dev/sda2</c> zijn.
</p>

<p>
De 3e partitie (<c>/dev/hda3</c>) is redelijk groot en neemt de rest van de
ruimte op de schijf in. Deze partitie noemen we de &quot;root&quot;-partitie en
zal gebruikt worden om je bestandssysteem zelf - dat Gentoo Linux zal bevatten
- op te plaatsen. Op een SCSI systeem zal deze partitie waarschijnlijk
<c>/dev/sda3</c> worden).
</p>

<p>
Alvorens we de HD partitioneren geven we snel een technisch overzicht
met advies over partities en bestandssystemen die gebruikt kunnen worden
tijdens het installeren van je Gentoo Linux systeem:
</p>

  <table>
  <tr>
  	<th>Partitie</th>
	<th>Grootte</th>
	<th>Type</th>
  	<th>Voorbeeld apparaat</th>
  </tr>
  <tr>
  	<ti>boot partitie, bevat kernel(s) en boot informatie</ti>
	<ti>100 MiB</ti>
	<ti>ext2/3 hoog aangeraden (gemakkelijkst); indien ReiserFS, mount met <c>-o notail</c></ti>
  	<ti>/dev/hda1</ti>
  </tr>
   <tr>
  	<ti>swap partitie (er is geen 128 MiB limiet - wel een 2 GiB)</ti>
	<ti>&gt;=2*Hoeveelheid RAM in je systeem is aangeraden maar, sinds 2.4.10-kernel, niet meer verplicht.</ti>
	<ti>Linux swap</ti>
  	<ti>/dev/hda2</ti>
  </tr>
  <tr>
  	<ti>root-partitie, bevat het volledige systeem (/usr, /home, etc)</ti>
	<ti>&gt;=1.5 GiB</ti>
	<ti>ReiserFS, ext3 aangeraden; ext2 is ook ok</ti>
  	<ti>/dev/hda3</ti>
  </tr>
 </table>

<p>
Maak nu de partities aan zoals aangegeven in bovenstaand voorbeeld en met
bovenstaande tabel in het achterhoofd. Allereerst starten we fdisk door
<c>fdisk /dev/hda</c> of <c>fdisk /dev/sda</c> in te typen, afhankelijk van wat
je gebruikt (IDE of SCSI). Type daarna <c>p</c> om je huidige
partitieconfiguratie te bekijken. Staat er nog iets op dat je wilt behouden?
<b>Stop dan nu!</b> Indien je verder gaat met deze instructies zullen <b>alle
bestaande data op de partities die je zal wijzigen verwijderd worden</b>.
</p>

<impo>
Het volgen van deze instructies zal alle data op je partities
<b>verwijderen</b>. Zorg ervoor dat je er zeker van bent dat alle informatie op
de schijf verloren mag gaan. Zorg er tevens voor dat je <b>zeker</b> het
correcte block-apparaat geselecteerd hebt zodat je niet per ongeluk data van de
verkeerde schijf verwijdert.
</impo>

<p>
Het is nu tijd om bestaande partities te verwijderen. Om dit te doen, type je
<c>d</c> en druk je op Enter. Je zal gevraagd worden naar het nummer van de
partitie die je wl verwijderen. Om <c>/dev/hda1</c> te verwijderen type je
bijvoorbeeld:
</p>

<pre caption="Verwijderen van een partitie">
Command (m for help): <c>d</c>
Partition number (1-4): <c>1</c>
</pre>

<p>
fdisk onthoudt nu dat je die partitie wilt verwijderen. Het zal niet meer
tevoorschijn komen indien je <c>p</c> typt, maar het zal tevens niet verwijderd
worden totdat je je aanpassingen doorvoert. Indien je een fout gemaakt hebt en
je wilt afsluiten zonder de aanpassingen door te voeren, type <c>q</c> en druk
op Enter.
</p>

<!-- Dit is niet voldoende informatie om ATA Raid te bespreken en drobbins
vindt het nogal onduidelijk, dus wordt dit eventjes weggecommentarieerd 

<note>
Als je RAID wilt gebruiken voor je partities moet je een klein beetje 
verschillend tewerk gaan. Je zal partities hebben die naar de naam 
<path>/dev/ataraid/discX/partY/</path> luisteren. X is de array die je gemaakt 
hebt; als je maar 1 array hebt zal dit disc0 zijn. 
</note>

-->

<p>
Veronderstellende dat je inderdaad alle partities wilt verwijderen van je
systeem type je nu continue <c>p</c> om de partitielijst te verkrijgen en
<c>d</c> om de partities 1 voor 1 te verwijderen. Uiteindelijk zal je een
partitietabel bekomen waarin niets van partities gedefinieerd zijn:
</p>

<pre caption="Een lege partitietabel">
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes       

   Device Boot   Start       End    Blocks   Id  System    
   
Command (m for help):
</pre>

<p>
Nu dat fdisk weet dat alle partities verwijderd moeten worden, is het tijd om
de bootpartitie aan te maken. Om dit te doen, type <c>n</c> om een nieuwe
partitie te creeeren, en daarna <c>p</c> om fdisk duidelijk te maken dat je een
primaire partitie wil aanmaken. Wanneer je om de eerste cilinder gevraagd
wordt, druk op Enter. Wanneer je voor de laatste cilinder gevraagd wordt, type
<c>+100M</c> om een partitie van 100 MiB te creeren. Hieronder staan deze
stappen toegepast:
</p>

<pre caption="Stappen om een bootpartitie te maken">
Command (m for help): n
Command action
 e  extended
 p  primary
<c>p</c>
Parition number (1-4): <c>1</c>
First cylinder (1-3876, default 1):
Using default value 1
Last cylinder or +size or +sizeM of +sizeK (1-3876, default 3876): <c>+100M</c>
</pre>

<p>
Type nu <c>p</c> om de volgende partitielayout te zien te krijgen:
</p>

<pre caption="De partitie is aangemaakt">
Command (m for help): <c>p</c>
 
Disk /dev/hda: 30.0 GB, 30005821440 bytes 
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes

    Device Boot    Start       End    Blocks   Id  System
 /dev/hda1             1        14    105808+  83  Linux
</pre>

<p>
Nu creeren we de swappartitie. Ook hiervoor typen we eerst <c>n</c> om een
nieuwe partitie aan te maken, gevolgd door <c>p</c> om fdisk duidelijk te maken
dat we een primaire partitie wensen. Daarna typen we <c>2</c> om de 2e primaire
partitie te maken, <c>/dev/hda2</c> in ons geval. Wanneer we gevraagd worden
naar de eerste cilinder, druk op Enter. Wanneer we gevraagd worden naar de
laatste cilinder, type <c>+512M</c> om een partitie van 512 MiB te maken.
Wanneer dit gedaan is, type <c>t</c> om de partitie-type in te stellen, en geef
<c>82</c> in om het type op &quot;Linux swap&quot; te zetten. Na deze stappen
zou de uitvoer van het <c>p</c> commando er als volgt moeten uitzien:
</p>

<pre caption="Swappartitie is aangemaakt">
Command (m for help): <c>p</c>    
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes

   Device Boot    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux  
/dev/hda2            15        81    506520   82  Linux swap
</pre>

<p>
En uiteindelijk is het tijd om de rootpartitie aan te maken. Om dit te doen
geven we weeral <c>n</c> in om een nieuwe partitie aan te maken, en daarna
<c>p</c> om fdisk duidelijk te maken dat we een primaire partitie wensen. Type
dan <c>3</c> om de 3e primaire partitie aan te maken, <c>/dev/hda3</c> in ons
geval. Wanneer je gevraagd wordt naar de eerste cilinder, druk op Enter.
Wanneer je gevraagd wordt naar de laatste cilinder, druk ook op Enter. Dit zal
een partitie aanmaken die de rest van je schijf inneemt. Nadat deze stappen
uitgevoerd zijn zal <c>p</c> de volgende uitvoer geven:
</p>

<pre caption="De rootpartitie is aangemaakt">
Command (m for help): <c>p</c>    
Disk /dev/hda: 30.0 GB, 30005821440 bytes  
240 heads, 63 sectors/track, 3876 cylinders  
Units = cylinders of 15120 * 512 = 7741440 bytes

   Device Boot    Start       End    Blocks   Id  System
/dev/hda1             1        14    105808+  83  Linux  
/dev/hda2            15        81    506520   82  Linux swap  
/dev/hda3            82      3876  28690200   83  Linux
</pre>

<p>
Als laatste stap moeten we nog de &quot;bootable&quot; vlag op onze
bootpartitie activeren en de partitieaanpassingen doorvoeren. Om
<c>/dev/hda1</c> bootable te maken, type <c>a</c> en dan <c>1</c> om de eerste
partitie te gebruiken. Indien je nu <c>p</c> ingeeft zal je zien dat er na
<c>/dev/hda1</c> een <c>*</c> staat in de &quot;Boot&quot; kolom.
Schrijf nu de aanpassingen naar de schijf. Dit doe je door <c>w</c> in te geven
gevolgd door Enter. Je partities zijn nu aangemaakt en klaar voor configuratie
van je Gentoo Linux installatie.
</p>

<note>
Indien <c>fdisk</c> of <c>cfdisk</c> te vragen om je systeem te rebooten, doe
dat dan. Anders zal je installatie de nieuwe partitielayout niet detecteren.
</note>

</body>
</section>
<section>
<title>Bestandssystemen aanmaken</title>
<body>

<p>
Nu dat de partities aangemaakt zijn is het tijd om de bestandssystemen op de
boot- en root-partitie aan te maken zodat deze kunnen gemount worden om data op
te kunnen zetten. We zullen tevens de swappartitie activeren om de hoeveelheid
virtueel geheugen te vergroten.
</p>

<p>
Gentoo Linux ondersteunt een grote hoeveelheid aan bestandssystemen; elk soort
heeft zijn voor- en nadelen en zijn eigen performantiekarakteristieken. Op dit
moment ondersteunen we ext2, ext3, XFS, JFS en ReiserFS.
</p>

<p>
ext2 is het veelvuldig gebruikte en echte Linux bestandssysteem, maar ze heeft
geen metadata journaling, wat wil zeggen dat de gebruikelijke ext2
bestandssysteemcontroles die periodiek optreden redelijk tijdconsumerend zijn.
Er is nu een generatie van <i>journaled</i> bestandssystemen beschikbaar die
zeer snel gecontroleerd kunnen worden en dus algemeen geprefereerd worden boven
hun niet-journaled vriendjes. Journaled bestandssystemen vereisen niet meer de
lange controles wanneer je je systeem boot en je bestandssysteem niet
correct werd afgesloten.
</p>

<p>
ext3 is het journaled broertje van ext2; ze levert metadata journaling voor
zeer snelle herstelling van de schijf, samen met enkele andere journaling-modes
zoals volledige en geordende data journaling. ext3 is zeer goed en betrouwbaar.
Ze heeft algemeen gezien goede performantie-eigenschappen onder de meest 
courante situaties. Omdat ze niet extensief gebruik maakt van boomstructuren 
(intern gezien dan) is ze niet enorm schaleerbaar, wat wil zeggen dat ze niet 
de ideale keuze is voor zeer grote bestandssystemen of in situaties waar je 
zeer grote bestanden of hoeveelheden van bestanden in een enkele directorie 
plaatst. Wanneer je ext3 echter gebruikt met zijn default waarden is ext3 een 
zeer geschikt bestandssysteem.
</p>

<p>
ReiserFS is een B*-boomstructuur gebaseerd bestandssysteem dat zeer goede
performantie-resultaten neerschrijft en zowel ext2 als ext3 ver achter zich
laat wanneer we te maken hebben met kleine bestanden (kleiner dan 4 KiB),
veelal met een factor 10 tot 15! ReiserFS schaleert trouwens zeer goed en heeft
metadata journaling. Vanaf kernel 2.4.18 is ReiserFS zeer stabiel en wordt ze
hoog aangeschreven voor zowel algemene als extreme situaties zoals het aanmaken
van grote bestandssystemen, het gebruik van veel kleine bestanden, grote
bestanden, en directories met tienduizenden bestanden. ReiserFS is het
bestandssysteem dat we aanraden voor niet-boot partities.
</p>

<p>
XFS is een bestandssysteem met metadata journaling dat volledig ondersteund
wordt door Gentoo Linux's <path>xfs-sources</path> kernel. Ze komt met robuste
mogelijkheden en is geoptimaliseerd naar schaleerbaarheid. We raden deze enkel
aan op Linux-systemen met high-end SCSI en/of fibre channel opslag en bij
ononderbreekbare stroomvoorziening (UPS). Omdat XFS zeer agressief data cachet
in RAM kunnen slecht geprogrammeerde programmas (programmas die niet de nodige
zekerheden incalculeren wanneer ze bestanden naar de schijf schrijven - en zo
bestaan er veel) grote hoeveelheden data verliezen wanneer het systeem
plotseling stilvalt.
</p>

<p>
JFS is IBM's eigen hoog-performant journaling bestandssysteem. Ze is recent
productierijp bevonden en dus is er niet genoeg bekend om commentaar (zowel
positieve of negatieve) te formuleren betreffende de stabiliteit.
</p>

<p>
Indien je op zoek bent naar het meest stabiel-bevonden journaled 
bestandssysteem, gebruik dan ext3. Indien je op zoek bent naar een 
hoog-performant bestandssysteem, gebruik dan ReiserFS. Beide zijn volwassen
genoeg en zijn aangeraden voor algemeen gebruik.
</p>

<!-- Randgeval, zorgt voor verwarring...
<p>
Maar alvorens je dat doet wil je misschien het begin van elke partitie
initialiseren met <c>dd</c>, vooral indien je van plan bent een al bestaande 
partitie van vroeger te hergebruiken. Dit is ten zeerste aangeraden indien je 
een XFS bestandssysteem op een bestaande partitie wilt gebruiken waar vroeger 
ReiserFS op stond. Dit zal er voor zorgen dat het bestandssysteem niet verkeerd
geidentificeerd wordt door Linux's automatische bestandssysteemdetectie code.
Je kan dit als volgt doen:
</p>

<pre caption="Initialiseren van de eerste 1024 bytes van de partitie">
# <c>dd if=/dev/zero of=/dev/hda3 bs=1k count=1</c>
<comment>(Vervang hda3 met de partitie die je wilt schoonmaken)</comment>
</pre>

<warn>
Het bovenstaande commando zal alle data van de partitie verwijderen. Wees dus
voorzichtig en dubbelcontroleer wat je doet. Indien je hier een fout maakt
verwijder je misschien data die je echt niet kwijt wou.
</warn>

-->

<p>
Ons baserend op bovenstaand voorbeeld zullen we nu de volgende commando's
gebruiken om onze partities klaar te stomen voor gebruik:
</p>

<pre caption="Initialiseren van de partities (voorbeelden)">
# <c>mke2fs -j /dev/hda1</c>
# <c>mkswap /dev/hda2</c>
# <c>mkreiserfs /dev/hda3</c>
</pre>

<p>
We kozen ext3 voor onze <c>/dev/hda1</c> bootpartitie omdat ze een robuust
journaling bestandssysteem is dat door alle grote bootloaders ondersteund
wordt. We gebruikten <c>mkswap</c> voor onze <c>/dev/hda2</c> swappartitie (om
de partitie klaar te stomen voor swapgebruik). En voor onze rootpartitie,
<c>/dev/hda3</c>, kozen we voor ReiserFS, aangezien het een stabiel journaling
bestandssysteem is met zeer goede performantie. 
Initialiseer nu je eigen partities. 
</p>

<p>
Ter referentie zijn hier de verschillende <c>mkfs</c>-commando's die tijdens de
installatie beschikbaar zijn om je bestandssystemen aan te maken:
</p>

<p>
<c>mkswap</c> is het commando dat een swappartitie initialiseert:
</p>

<pre caption="Swappartitie initialiseren">
# <c>mkswap /dev/hda2</c>
</pre>

<p>
Je kan het <c>mke2fs</c> commando gebruiken om een ext2 bestandssysteem aan te
maken:
</p>

<pre caption="Aanmaken van een ext2 bestandssysteem">
# <c>mke2fs /dev/hda1</c>
</pre>

<p>
Indien je ext3 wilt gebruiken kan je deze aanmaken met <c>mke2fs -j</c>:
</p>

<pre caption="Aanmaken van een ext3 bestandssysteem">
# <c>mke2fs -j /dev/hda3</c>
</pre>

<note>Je vind meer informatie over ext3 onder Linux 2.4 op
<uri>http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html</uri> (Engels).
</note>

<p>
Om een ReiserFS-bestandssysteem aan te maken maak je gebruik van het 
<c>mkreiserfs</c> commando:
</p>

<pre caption="Aanmaken van het reiserfs filesysteem">
# <c>mkreiserfs /dev/hda3</c>
</pre>

<p>
Om een XFS bestandssysteem aan te maken maak je gebruik van het <c>mkfs.xfs</c>
commando:
</p>

<pre caption="Aanmaken van een XFS bestandssysteem">
# <c>mkfs.xfs /dev/hda3</c>
</pre>

<note>
Je wilt mogelijk nog wat extra argumenten meegeven aan het <c>mkfs.xfs</c>
commando: <c>-d agcount=3</c> om het aantal gealloceerde groepen te verminderen
- XFS vereist minstens 1 gealloceerde groep per 4 GiB van je partitie, dus
indien je een 20 GiB partitie hebt zal je een minimum agcount van 5 moeten
meegeven, en <c>-l size=32m</c> om de journalgrootte te vergroten naar 32 MiB
wat de performantie verbetert.
</note>

<p>
Om een JFS bestandssysteem aan te maken gebruik je het <c>mkfs.jfs</c>
commando:
</p>

<pre caption="Aanmaken van een jfs filesysteem">
# <c>mkfs.jfs /dev/hda3</c>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Partities mounten</title>
<section>
<body>

<p>
We activeren nu onze geinitialiseerde swap-partitie omdat we later meer 
virtueel geheugen nodig zullen hebben:
</p>

<pre caption="Activeren van de swappartitie">
# <c>swapon /dev/hda2</c>
</pre>

<p>
Daarna maken we de <path>/mnt/gentoo</path> en <path>/mnt/gentoo/boot</path> 
mountpoints aan en mounten we onze bestandssystemen aan deze mountpoints.
Eenmaal onze boot- en rootbestandssystemen gemount zijn, zullen alle bestanden
die wa naar <path>/mnt/gentoo</path> kopieren op onze nieuwe bestandssystemen
staan. Let op, indien je Gentoo Linux installeert met aparte <path>/usr</path>
en <path>/var</path> partities (dus niet zoals in ons voorbeeld) zal je deze
moeten mounten op <path>/mnt/gentoo/usr</path> respectievelijk
<path>/mnt/gentoo/var</path>.
</p>

<impo>
Als je <e>boot</e>-partitie (deze die de kernel bevat) ReiserFS is en je wil
later gebruik maken van de GRUB bootloader, vergeet dan niet deze te mounten 
met de <c>-o notail</c> argumenten zodat GRUB correct geinstalleerd wordt. 
Zorg er ook voor dat <c>notail</c> in je nieuwe <path>/etc/fstab</path> 
te staan komt. We komen daar later nog op terug. Indien je later LILO zal
gebruiken als bootloader dan is de <c>-o notail</c> niet nodig. Het is altijd
veilig om bij ReiserFS de <c>-o notail</c> te gebruiken indien je niet zeker
bent wat je moet doen.
</impo>

<pre caption="Aanmaken van mountpoints en mounten van partities">
# <c>mkdir /mnt/gentoo</c>
# <c>mount /dev/hda3 /mnt/gentoo</c>
# <c>mkdir /mnt/gentoo/boot</c>
# <c>mount /dev/hda1 /mnt/gentoo/boot</c>
</pre>

<impo>
Als je problemen hebt met het mounten van je bootpartitie in ext2, probeer 
dan <c>mount /dev/hdXX /mnt/gentoo/boot -t ext2</c>
</impo>
</body>
</section>
</chapter>

<chapter>
<title>Niveau-tarballs en chroot</title>
<section>
<title>De gewenste niveau-tarball selecteren</title>
<body>

<!-- Eigen toevoeging, verduidelijkt het gebruik van tarball -->

<note>
Een <i>tarball</i> is een archief, eindigend op <i>.tar.gz</i>, <i>.tgz</i>,
<i>.tar.bz2</i> of <i>.tbz2</i> en wordt zeer vaak gebruikt in de free software
community.
</note>

<p>
Nu moet je beslissen welk niveau-tarball je wenst te gebruiken als beginpunt
voor je installatie.
</p>

<p>
Indien je de &quot;begin van 0, bouw alles op&quot; installatiemethode wil
volgen, dan kies je best voor <path>stage1-x86-1.4_rc4.tar.bz2</path>. Indien
je een van onze grotere CDs gebruikt, zoals de &quot;3stages&quot; ISO, dan heb
je tevens de mogelijkheid tussen een niveau-2 en niveau-3 tarball. Deze laten
je toe om de installatieduur te verminderen ten nadele van de
configureerbaarheid (aangezien we dan al voor jou compileroptimalisaties en
USE-instellingen gedefinieerd hebben). De niveau's op de CD zijn beschikbaar
onder <path>/mnt/cdrom/gentoo</path> en je kan <c>ls /mnt/cdrom/gentoo</c>
intypen om te zien wat er beschikbaar is op je CD.
</p>

<p>
Indien je een installatie wilt doen met een niveau-tarball die <i>niet</i> op je
CD staat moet je deze tarball downloaden via de volgende instructies. Indien je
al een niveau-tarball hebt die je wenst te gebruiken (zoals de meeste
gebruikers) ga dan direct door naar de volgende sectie.
</p>

<pre caption="Zoeken naar de niveau-tarballs">
# <c>cd /mnt/gentoo</c>
<comment>(Gebruik lynx om de URL van je tarball te weten te komen.)</comment>
# <c>lynx http://www.ibiblio.org/pub/Linux/distributions/gentoo/releases/1.4_rc4/x86/</c>
<comment>(Gebruik [Pijl omhoog] en [Pijl omlaag] (of de [Tab]) om naar de correcte map te gaan. 
Zorg ervoor dat de niveau-tarball die je wilt gebruiken geselecteerd is. Druk [d] om de download 
te starten; eenmaal gedownload sla je het bestand op en verlaat je de browser. 
Je kan eveneens gebruik maken van wget via de commandline indien je de URL kent of onthoudt:)</comment>
# <c>wget <comment>&lt;Voeg hier de URL van de tarball in&gt;</comment></c>
</pre>

</body>
</section>
<section>
<title>Uitpakken van de niveau-tarballs</title>
<body>

<p>
Nu is het tijd om de inhoud van de tarball uit te pakken in
<path>/mnt/gentoo</path>. Denk eraan, je hoeft enkel <b>1</b> niveau-tarball te
gebruiken, dus ofwel <i>stage1</i>, <i>stage2</i> of <i>stage3</i>. Dus indien
je een niveau-3 installatie van Gentoo wilt uitvoeren moet je enkel de
<i>stage3</i> tarball uit te pakken. Dit doe je als volgt:
</p>

<impo>
Vergewis jezelf ervan dat je de <c>p</c> optie bij <c>tar</c> gebruikt. Als je 
dat vergeet zal dat leiden tot bestanden met verkeerde permissies.
</impo>

<pre caption="Uitpakken van de niveau-tarball">
# <c>cd /mnt/gentoo</c>
<comment>Verander &quot;stage3&quot; naar &quot;stage2&quot; of
&quot;stage1&quot; indien je van die niveau's wilt starten.</comment>
<comment>Indien je je niveau-tarball van internet gedownload hebt, verander het
onderstaande pad dan zodat deze begint met &quot;/mnt/gentoo&quot; in plaats
van &quot;/mnt/cdrom/gentoo&quot;</comment>
# <c>tar -xvjpf /mnt/cdrom/gentoo/stage3-*.tar.bz2</c>
</pre>

<p>
Indien je je niveau-tarball in <path>/mnt/gentoo</path> gedownload had, kan je
deze nu verwijderen door <c>rm /mnt/gentoo/stage*.tar.bz2</c> in te typen.
</p>

</body>
</section>
<section>
<title>Chrooten in je nieuwe omgeving</title>
<body>

<p>
Nu gaan we <c>chroot</c> gebruiken om &quot;in&quot; je nieuwe Gentoo Linux
installatieomgeving te werken.
</p>

<pre caption="Voorbereiden van de Gentoo Linux installatieomgeving">
# <c>mount -t proc /proc /mnt/gentoo/proc</c>
# <c>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</c>
# <c>chroot /mnt/gentoo /bin/bash</c>
# <c>env-update</c>
Regenerating /etc/ld.so.cache...
# <c>source /etc/profile</c>
<comment>(Bovenstaande zal je shell de nieuwe paden en geupdate binaire
bestanden doen gebruiken)</comment>
</pre>

<p>
Nadat je deze commando's uitgevoerd hebt zal je &quot;in&quot; je nieuwe 
Gentoo Linux omgeving zitten; in <path>/mnt/gentoo</path>. We kunnen de rest
van het installatieproces uitvoeren vanuit deze gechrootte omgeving.
</p>

</body>
</section>
</chapter>

<chapter>
<title>De huidige Portage boomstructuur binnenhalen met sync</title>
<section>
<body>

<p>
Nu moet je <c>emerge sync</c> uitvoeren. Dit commando vertelt Portage om de
meest recente kopie van de Gentoo Linux Portage boomstructuur binnen te halen.
Deze Portage boomstructuur bevat alle scripts (genaamd <i>ebuilds</i>) om 
packages onder Gentoo Linux te compileren en installeren. Op dit moment hebben
we scripts voor bijna 4000 packages. Eenmaal <c>emerge sync</c> gedaan is zal
je een volledige Portage boomstructuur in <path>/usr/portage</path> liggen
hebben.
</p>

<pre caption="Nieuwe portage-boomstructuur binnenhalen">
# <c>emerge sync</c>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Gentoo optimalisaties instellen (make.conf)</title>
<section>
<body>

<p>
Nu dat we een werkende Portage boomstructuur hebben, is het tijd om de
optimalisatie en optionele configuratie-parameters in te stellen voor je Gentoo
Linux systeem. Portage zal deze instellingen gebruiken wanneer je een programma
installeert via Portage. Hiervoor moet je het bestand 
<path>/etc/make.conf</path> aanpassen.
In dit bestand definieer je de <c>USE</c>-argumenten waarmee je de optionele 
functionaliteit specifieert die je in je packages wenst; algemeen zijn de 
default waarden (en dus een <e>lege</e> of niet gedefinieerde USE variabele) 
genoeg. Meer informatie over <c>USE</c> vlaggen kan je <uri
link="http://www.gentoo.org/doc/nl/use-howto.xml">hier</uri> vinden. Een
volledige lijst van bestaande USE-vlaggen vind je <uri
link="http://www.gentoo.org/dyn/use-index.xml">hier</uri> (Engels).
</p>

<p>
Je stelt best eveneens de correcte <c>CHOST</c>, <c>CFLAGS</c> en 
<c>CXXFLAGS</c> variabelen in voor je eigen systeem (voorbeelden vind je in 
het bestand zelf, als commentaar). Deze instellingen beschrijven de 
optimalisaties die de C en C++ compiler moeten toepassen op de te compileren 
broncode. Het is bijvoorbeeld de gewoonte voor Athlon XP gebruikers om 
&quot;-march=athlon-xp&quot; in te stellen in hun CFLAGS en CXXFLAGS zodat 
alle packages geoptimaliseerd worden voor de specifieke instructies van deze 
architectuur. Het <path>/etc/make.conf</path> bestand bevat een algemene 
handleiding wat betreft mogelijke instellingen voor CFLAGS en CXXFLAGS.
</p>

<p>
Indien je achter een firewall zit kan je hierin tevens proxy-informatie
neerschrijven zodat Portage weet heeft van je firewall. Gebruik het volgende
commando op <path>/etc/make.conf</path> aan te passen met <c>nano</c>, een
simpele, visuele editor.
</p>

<pre caption="Aanpassen van make.conf">
# <i>nano -w /etc/make.conf</i> 
<comment>(Pas CHOST, CFLAGS, CXXFLAGS en mogelijk USE en proxy-instellingen aan)</comment>
</pre>

<note>
Mensen die werkelijk het volledige compileerproces willen tweaken kijken best 
eens naar het <path>/etc/make.globals</path> bestand. Dit bestand bevat 
Gentoo's default waarden en mag nooit aangeraakt worden. Als de 
defaults niet voldoende zijn moet je de nieuwe waarden in 
<path>/etc/make.conf</path> plaatsen, daar waarden in <path>make.conf</path>
voorrang hebben op de waarden in <path>make.globals</path>. Als je 
de USE variabele wilt tweaken, kijk dan in 
<path>/etc/make.profile/make.defaults</path>. Als je een USE-instelling wilt 
uitschakelen die je daarin vindt, voeg dan de nodige 
<c>USE=&quot; -foo&quot;</c> toe aan <path>/etc/make.conf</path> om elke
<c>foo</c> USE instelling uit te schakelen indien deze per default in
<path>/etc/make.globals</path> of <path>/etc/make.profile/make.defaults</path>
geactiveerd is.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Starten met niveau 1</title>
<section>
<body>

<note>
Indien je niet vanuit een niveau-1 tarball start, sla deze sectie dan over.
</note>

<p>
De niveau-1 tarball is voor volledige optimalisatie. Indien je deze tarball
gekozen hebt ben je waarschijnlijk op zoek naar een uiterst-geoptimaliseerd en
up-to-date systeem. Veel plezier alleszins, want optimalisaties is waar Gentoo 
rond draait.
Installeren vanuit een niveau 1 duurt lang, maar het resultaat is een systeem 
dat van het begin af naar jouw systeem geoptimaliseerd is.
</p>

<p>
Het is nu tijd om het &quot;bootstrap&quot; proces te starten. Dit proces duurt
ongeveer 1-2 uren afhankelijk van de snelheid van je pc; het duurt ongeveer 2
uren op een 1200Mhz AMD Athlon systeem. Gedurende deze tijd zullen de GNU C
bibliotheek, de compiler-collectie (gcc) en enkele andere belangrijke
sleutelprogrammas gecompileerd en geinstalleerd worden. Start het
bootstrap-proces als volgt:
</p>

<pre caption="Uitvoeren van het bootstrap proces">
# <i>cd /usr/portage</i>
# <i>scripts/bootstrap.sh</i>
</pre>

<p>
Het &quot;bootstrap&quot; proces is nu begonnen.
</p>

<note>
Portage gebruik default de <c>/var/tmp</c> map gedurende het compileren van de 
packages, wat vaak verschillende honderden megabytes van tijdelijke ruimte 
vereist. Als je een andere map wilt laten gebruiken maak je een 
PORTAGE_TMPDIR variabele aan <e>voordat</e> je het bootstrapproces begint:
</note>

<pre caption="Aanpassen van de tijdelijke portage map">
# <i>export PORTAGE_TMPDIR="/anderedir/tmp"</i>
</pre>

<p>
<c>bootstrap.sh</c> zal <c>binutils</c>, <c>gcc</c>, <c>gettext</c> en
<c>glibc</c> compileren, waarna ze <c>binutils</c>, <c>gcc</c> en <c>gettext</c>
hercompileert met de nieuwe <c>glibc</c>. Uiteraard neemt dit proces een flinke
hoeveelheid tijd in beslag. Eenmaal dit proces beeindigd is zal je systeem in
een &quot;niveau-2&quot; situatie zitten. Je kan dus hierna &quot;Starten van
niveau 2&quot;.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Starten van niveau 2 of vervolgen van niveau-1</title>
<section>
<body>

<note>
Deze sectie is bedoelt voor diegenen die begonnen zijn met een niveau-1
installatie en al het bootstrap-proces ondergaan hebben, en voor de mensen die
beginnen met een niveau-2 installatie. Indien dit niet voor jou is (maw je wil
een niveau-3 installatie uitvoeren) sla je deze sectie over.
</note>

<p>
De niveau-2 tarball bevat al een gebootstrapped systeem. Al wat je nu nog hoeft 
te doen is de rest van je systeem compileren.
</p>

<note>
Indien je vanuit een voorgecompileerde stage2 start en je wil er zeker van zijn
dat je compiler's toolchain volledig up-to-date is, voeg dan de <c>-u</c> toe
aan het onderstaande commando. Indien je niet weet wat dit doet, dan is het
veilig om deze suggestie te negeren.
</note>

<pre caption="Compileren van het basissysteem">
# <c>emerge -p system</c>
<comment>(Dit toont de packages die geinstalleerd zullen worden)</comment>
# <c>emerge system</c>
</pre>

<p>
Het zal een tijdje duren alvorens het volledige systeem gecompileerd is. Je
krijgt het echter dubbel en dik terug: je systeem zal geoptimaliseerd zijn naar
jouw hardware en cpu. Het nadeel is echter dat je je een tijdje zal moeten
bezig houden.  De vertaler van dit document raadt je &quot;Blauw Bloed&quot;
van Pieter Aspe aan. Wanneer <c>emerge system</c> gedaan is, heb je een
niveau-3 Gentoo Linux systeem.
</p>

<p>
De compilatie is nu klaar. Ga verder naar &quot;Tijdzone instellen&quot;.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Starten van niveau 3</title>
<section>
<body>

<note>
Deze sectie is voor de mensen die <b>beginnen</b> met een niveau-3 installatie,
en niet voor deze die begonnen zijn met een niveau-1 of niveau-2 - zij moeten
deze sectie overslaan.
</note>

<p>
De niveau-3 tarball bevat een volledig functionerend basisch Gentoo Linux 
systeem, dus is er geen compilatie meer nodig. Aangezien niveau-3 echter
voorgecompileerd is is het mogelijk dat deze oud is. Indien je dat erg vindt
kan je je huidige niveau-3 updaten zodat deze de meest up-to-date versies 
bevat door de volgende stappen uit te voeren. Wees echter gewaarschuwd: indien 
je niveau-3 werkelijk oud is is dit een langdurig proces. Indien het een 
relatief recent niveau-3 tarball is zal dit proces snel klaar zijn en zal je 
kunnen profiteren van de laatste Gentoo updates. In eender welk geval ben je 
vrij om deze stappen over te slaan en te beginnen met de volgende sectie.
</p>

<pre caption="Up2date geraken">
# <c>export CONFIG_PROTECT=&quot;-*&quot;</c>
# <c>emerge -up system</c>
<comment>(Toont de packages die geinstalleerd / geupdate zullen worden)</comment>
# <c>emerge -u system</c>
<comment>(Zal de packages installeren / updaten)</comment>
# <c>unset CONFIG_PROTECT</c>
</pre>


</body>
</section>
</chapter>

<chapter>
<title>Tijdzone instellen</title>
<section>

<body>

<p>
Nu moet je je tijdzone instellen.
</p>

<p>
Zoek je tijdzone (of gebruik GMT indien je de Greenwich Mean Time wil
gebruiken) in <path>/usr/share/zoneinfo</path>. Maak dan een symbolische link
aan naar <path>/etc/localtime</path> door het volgende in te typen:
</p>

<pre caption="Instellen van de tijdzone">
# <i>ln -sf /usr/share/zoneinfo/path/to/timezonefile /etc/localtime</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Kernel en syslogger installeren</title>
<section>
<body>

<p>
Je moet nu de Linux-kernel broncode emergen. Enkele smaken die wij ter 
beschikking stellen (maar verre van allemaal):
</p>

<table>
<tr><th>ebuild</th><th>uitleg</th></tr>
<tr><ti><path>gentoo-sources</path></ti><ti>Gentoo's eigen performantie en
functionaliteits-geoptimaliseerde kernel; ze bevat echter geen XFS 
ondersteuning</ti></tr>
<tr><ti><path>xfs-sources</path></ti><ti>Volledig compatibele kernel met XFS
ondersteuning</ti></tr>
<tr><ti><path>openmosix-sources</path></ti><ti>De standaard kernel broncode uitgebreid met ondersteuning voor de GPL <uri link="http://www.openmosix.com">openMosix</uri> load-balancing/clustering technologie.</ti></tr>
<tr><ti><path>usermode-sources</path></ti><ti>De standaard kernel broncode uitgebreid met ondersteuning voor User-Mode Linux. (&quot;Linux inside Linux&quot; technologie)</ti></tr>
<tr><ti><path>vanilla-sources</path></ti><ti>De standaard kernel broncode, net zoals je die van kernel.org afhaalt.</ti></tr>
</table>

<warn>
Wees voorzichtig met de <i>grsecurity</i> optie tijdens de configuratie.
Indien je te agressief bent met je veiligheidsinstellingen kan het zijn dat 
bepaalde programmas (zoals X) weigeren correct te werken. Indien je twijfelt, 
selecteer deze dan niet.
</warn>

<p>
Kies een van de kernelsmaken en merge deze als volgt:
</p>

<pre caption="Downloaden van de Linux-kernel met optimalisatie-patches">
# <c>emerge sys-kernel/gentoo-sources</c>
<comment>of</comment>
# <c>emerge sys-kernel/xfs-sources</c>
<comment>of</comment>
# <c>emerge sys-kernel/openmosix-sources</c>
<comment>of</comment>
# <c>emerge sys-kernel/usermode-sources</c>
<comment>of</comment>
# <c>emerge sys-kernel/vanilla-sources</c>
</pre>

<p>
Eenmaal je een Linux kernel broncode beschikbaar hebt is het tijd om je
eigen kernel te bakken.
</p>

<p>
Denk eraan dat <path>/usr/src/linux</path> een symlink is naar de
huidige ge-emergede kernel broncode, die automatisch door Portage aangemaakt
wordt (de symlink). Indien je meerdere kernel broncodes hebt is het
noodzakelijk dat je de <path>/usr/src/linux</path> symlink naar de correcte
broncode doet wijzen alvorens je verder gaat.
</p>

<pre caption="Configureren en compileren van de kernel">
# <c>cd /usr/src/linux</c>
# <c>source /etc/profile</c>
# <c>make menuconfig</c>
# <c>make dep &amp;&amp; make clean bzImage modules modules_install</c>
# <c>cp /usr/src/linux/arch/i386/boot/bzImage /boot</c>
</pre>

<warn>
Opdat je kernel goed zou werken zijn er verschillende opties die je zeker moet
activeren -- dat wil zeggen: ze moeten <i>in de kernel zitten</i> en <i>niet
als modules</i>. Zorg ervoor dat &quot;ReiserFS&quot; geselecteerd is als je
ReiserFS partities gebruikt. Hetzelfde geldt trouwens voor de andere
bestandssystemen. Hieronder vind je enkele algemene opties die je nodig zal
hebben:
</warn>

<pre caption="make menuconfig opties">
Code maturity level options ---&gt;
  [*] Prompt for development and/or incomplete code/drivers
<comment>(Je hebt dit nodig om verdere opties beschikbaar te maken)</comment>
     ...

File systems ---&gt;
  &lt;*&gt; Reiserfs support
<comment>(Enkel indien je ReiserFS gebruikt)</comment>
       ... 
  &lt;*&gt; Ext3 journalling file system support
<comment>(Enkel indien je Ext3 gebruikt)</comment>
       ...
  [*] Virtual memory file system support (former shm fs)
<comment>(Is vereist voor Gentoo Linux)</comment>
       ...
  &lt;*&gt; JFS filesystem support
<comment>(Enkel indien je JFS gebruikt)</comment>
       ...
  [*] /proc file system support
<comment>(Is vereist voor Gentoo Linux)</comment>
  [*] /dev file system support (EXPERIMENTAL)
  [*]   Automatically mount at boot          
<comment>(Is vereist voor Gentoo Linux)</comment>
  [ ] /dev/pts file system for Unix98 PTYs
<comment>(Deselecteer dit, dit is niet nodig)</comment>
       ...
  &lt;*&gt; Second extended fs support
<comment>(Het is een goed idee dit altijd te selecteren)</comment>
       ...
  &lt;*&gt; XFS filesystem support
<comment>(Enkel indien je XFS gebruikt)</comment>
</pre>


<p>
Indien je Hardware RAID gebruikt moet je nog enkele extra opties aanduiden in 
de Linux-configuratie. Voor Highpoint RAID controllers selecteer je de hpt366 
chipset ondersteuning, ondersteuning voor de IDE RAID-controllers en 
Highpoint 370 Software RAID. Voor Promise RAID controllers selecteer je  
PROMISE PDC202{46|62|65|67|69|70} ondersteuning, ondersteuning voor 
IDE RAID-controllers en ondersteuning voor Promise Software RAID (Fasttrak(tm))
</p>

<p>
Indien je PPPoE gebruikt om naar het internet te connecteren moet je de 
volgende zaken meecompileren (ofwel in de kernel, ofwel - en 
dit is aangeraden - via modules): 
</p>

<pre caption="PPPoE kernelconfiguratie opties">
PPP (Point-to-Point Protocol) support
PPP support voor async serial ports
PPP support for sync tty ports
</pre>

<p>
De 2 compressie-opties zijn niet schadelijk maar zijn ook niet nodig; ook de 
&quot;PPP over Ethernet&quot; optie is niet nodig; deze zal enkel gebruikt 
worden indien je aan <i>rp-pppoe</i> vraagt om kernel-mode PPPoE toe te 
passen (wat niet default is).
</p>

<p>
Indien je een IDE cd brander hebt, dan moet je eveneens 
&quot;SCSI emulation&quot; selecteren in de kernel. Activeer 
&quot;ATA/IDE/MFM/RLL support&quot; --&gt; &quot;IDE, ATA and ATAPI Block 
devices&quot; --&gt; &quot;SCSI emulation support&quot;, &quot;SCSI CD-ROM support&quot; en &quot;SCSI generic support&quot; (sommige mensen compileren deze 
als modules, dat mag). Als je deze als modules compileert, voer dan <c>echo -e 
&quot;ide-scsi\nsg\nsr_mod&quot; &gt;&gt; /etc/modules.autoload</c> uit om 
deze automatisch te laden als je je systeem opstart.
</p>

<note>
Voor deze die het verkiezen is het nu mogelijk Gentoo Linux te installeren met 
een 2.2-kernel. Deze keuze komt echter met een prijs: je zal verschillende 
nieuwe features van de 2.4-kernels missen (zoals XFS, tmpfs, iptables, ...) 
alhoewel de 2.2-broncode uitgebreid kan worden met ReiserFS en 
devfs-ondersteuning. De Gentoo Linux bootscripts gebruiken tmpfs of ramdisk 
ondersteuning die in de kernel moet zitten, dus 2.2-kernelgebruikers moeten 
zich ervan verzekeren dat ramdisk-ondersteuning in de kernel zit (en 
<i>niet</i> als module). Het is dan van <comment>vitaal belang</comment> dat 
een <e>gentoo=notmpfs</e> argument meegegeven wordt met de kernelregel in 
<path>/boot/grub/grub.conf</path> of in de appendregel in 
<path>/etc/lilo.conf</path> (afhankelijk van je keuze van bootloader) voor 
de 2.2-kernel zodat een ramdisk gebruikt wordt ipv tmpfs. Als je ervoor kiest 
geen devfs te gebruiken, verander de regel dan naar 
<e>gentoo=notmpfs,nodevfs</e>.
</note>

<p>
Je nieuwe kernel (en modules) zijn nu geinstalleerd. Nu moet je een keuze maken
tussen de verschillende syslog daemons die Gentoo levert. Dit zijn 
<c>sysklogd</c>, de traditionele groep systeemlog-daemons, <c>msyslog</c>, 
<c>syslog-ng</c> en <c>metalog</c>.
Geavanceerde gebruikers hebben de neiging te migreren van sysklogd (die niet
al te goede performantie heeft) naar syslog-ng of metalog. Indien je twijfelt, 
dan zal je mogelijk metalog het liefst hebben, daar het zeer populair is. 
Om de systeemlogger van je keuze te mergen, type:
</p>

<pre caption="Installeren van een syslog-daemon">
# <c>emerge app-admin/sysklogd</c>
# <c>rc-update add sysklogd default</c>
<comment>of</comment>
# <c>emerge app-admin/syslog-ng</c>
# <c>rc-update add syslog-ng default</c>
<comment>of</comment>
# <c>emerge app-admin/metalog</c>
# <c>rc-update add metalog default</c>
<comment>of</comment>
# <c>emerge app-admin/msyslog</c>
# <c>rc-update add msyslog default</c>
</pre>

<impo>
Metalog stuurt informatie naar de harde schijf in blokken, dus berichten worden
niet direct in de logs geschreven. Indien je een daemon wilt debuggen is deze
manier van werken niet handig. Om deze buffering tegen te gaan kan je metalog
een USR1-signaal zenden om het bufferen tijdelijk uit te schakelen (zodat 
<i>tail -f <path>/var/log/everything/current</path></i> wel in real time zal 
werken, zoals gewenst) en een USR2-signaal om dit terug te activeren. Indien 
je het bufferen permanent wilt uitschakelen moet je in 
<path>/etc/conf.d/metalog</path> de variabele <c>METALOG_OPTS=&quot;-B&quot;</c>
naar <c>METALOG_OPTS=&quot;-B -s&quot;</c> veranderen.
</impo>

<p>
Nu kan je opteren om een cron-package te installeren. Op dit moment levert
Gentoo <c>dcron</c>, <c>fcron</c> en <c>vcron</c>. Als je niet weet welke te 
nemen, neem je het best vcron. Je keuze kan je als volgt installeren:
</p>

<pre caption="Installeren van een cron-daemon">
# <c>emerge sys-apps/dcron</c>
# <c>rc-update add dcron default</c>
# <c>crontab /etc/crontab</c>
<comment>of</comment>
# <c>emerge sys-apps/fcron</c>
# <c>rc-update add fcron default</c>
# <c>crontab /etc/crontab</c>
<comment>of</comment>
# <c>emerge sys-apps/vcron</c>
# <c>rc-update add vcron default </c>
</pre>

<p>
Voor meer informatie over hoe je programma's en daemons opstart via de
runlevels, zie <uri link="/doc/nl/rc-scripts.xml">rc-script guide</uri>.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Andere, nodige packages compileren</title>
<section>
<body>

<p>
Indien je rp-pppoe nodig hebt voor een internetconnectie dan moet je deze nog 
installeren:
</p>

<pre caption = "Installeren van rp-pppoe">
# <c>USE=&quot;-X&quot; emerge rp-pppoe</c>
</pre>

<note>
De <i>USE=&quot;-X&quot;</i> verhindert dat pppoe zijn (optionele) X-interface 
installeert, want anders zullen eveneens X en de afhankelijkheden van X
gecompileerd worden. Je kan later altijd <i>rp-pppoe</i> hercompileren 
met X-ondersteuning.
</note>

<note>
Hierna is rp-pppoe wel geinstalleerd maar nog niet geconfigureerd. Je zal 
opnieuw <c>adsl-setup</c> moeten uitvoeren eenmaal je in je nieuwe 
Gentoo-installatie geboot bent (i.e. <e>na</e> de installatie).
</note>

<p>
Het is goed mogelijk dat je nog enkele extra packages zal moeten compileren 
alvorens je Gentoo Linux gebruikt, vooral indien je zaken zoals XFS, ReiserFS 
of LVM gebruikt.
</p>

<pre caption="Installeren van de filesystemtools tools">
# <c>emerge sys-apps/xfsprogs</c> <comment>(Voor XFS)</comment>
# <c>emerge sys-apps/reiserfsprogs</c> <comment>(Voor ReiserFS)</comment>
# <c>emerge sys-apps/jfsutils</c> <comment>(Voor JFS)</comment>
# <c>emerge sys-apps/lvm-user</c> <comment>(Voor LVM)</comment>
</pre>

<p>
Indien je een laptop-gebruiker bent en je wilt PCMCIA-ondersteuning wanneer je 
in je Gentoo Linux systeem boot, installeer dan de <i>pcmcia-cs</i> ebuild:
</p>

<pre caption="Installeren van de pcmcia-cs tools">
# <c>emerge sys-apps/pcmcia-cs</c>
</pre>

<warn>
Je zal <i>pcmcia-cs</i> na de installatie van Gentoo Linux opnieuw moeten 
emergen om de PCMCIA werkende te krijgen. Deze installatie is dus enkel indien
je direct al PCMCIA-ondersteuning nodig hebt.
</warn>

</body>
</section>
</chapter>


<chapter>
<title>/etc/fstab aanpassen</title>
<section>
<body>

<p>
Je Gentoo Linux systeem is bijna klaar om te gebruiken. Al wat we nu nog moeten
doen is enkele belangrijke systeembestanden aanmaken en een bootloader
installeren. Het eerste bestand dat we gaan configureren is
<path>/etc/fstab</path>. Onthou dat je de <c>notail</c> optie moet gebruiken
voor je boot-partitie indien je er een ReiserFS bestandssysteem op geinstalleerd
hebt. Specifieer eveneens <c>ext2</c>, <c>ext3</c>, <c>reiserfs</c>, <c>xfs</c> 
of <c>jfs</c> bij de correcte partities.
</p>

<p>
Gebruik het voorbeeld-<path>/etc/fstab</path> van hieronder, maar vervang 
uiteraard &quot;BOOT&quot;, &quot;ROOT&quot; en &quot;SWAP&quot; met de echte 
partities die je gebruikt (zoals <c>hda1</c>, etc...).
</p>

<pre caption="fstab aanpassen">
<comment>
# /etc/fstab: statische bestandssysteeminformatie.
#
# noatime schakelt het gebruik van atimes uit voor betere performantie
# (atime's zijn normaal gezien niet nodig). notail verbetert de 
# performantie van reiserfs-bestandssystemen (ten nadele van schijfruimte).
# Het is veilig om de noatime opties te laten vallen indien je vrij tussen
# notail en tail wilt wisselen.

# &lt;fs&gt;           &lt;mountpoint&gt;   &lt;type&gt;   &lt;opts&gt;          &lt;dump/pass&gt;

# NOTE: Als je boot-partitie ReiserFS is, vergeet notail niet !!!
</comment>
/dev/BOOT           /boot       ext2	 noauto,noatime	 1 2
/dev/ROOT           /           ext3	 noatime         0 1
/dev/SWAP           none        swap	 sw              0 0
/dev/cdroms/cdrom0  /mnt/cdrom  iso9660	 noauto,ro       0 0
proc                /proc       proc	 defaults        0 0
</pre>

<warn>
Merk op dat <path>/boot</path> NIET gemount wordt tijdens het opstarten. 
Dit is om de data in <path>/boot</path> te beschermen tegen datacorruptie. 
Indien je dus <path>/boot</path> nodig hebt, vergeet die dan niet te mounten !
</warn>

</body>
</section>
</chapter>



<chapter>
<title>rootpaswoord ingeven</title>
<section>
<body>

<p>
Stel nu je rootpaswoord in:
</p>

<pre caption="Aanpassen van je rootpaswoord">
# <c>passwd</c>
</pre>

<p>
Je zal eveneens een niet-root gebruiker willen toevoegen voor alledaags gebruik.
Gelieve de <uri link="http://www.gentoo.org/doc/nl/faq.xml">Gentoo FAQ</uri> te
raadplegen omtrent dit onderwerp.
</p>

</body>
</section>
</chapter>



<chapter>
<title>Je hostname instellen</title>
<section>
<body>

<p>
Pas dit bestand aan zodat het je volledige hostname bevat, dit op 1 regel, 
zoals <c>mijnmachine.mijnnetwerk.com</c>. 
</p>

<pre caption="Instellen van een hostname">
# <c>echo mijnmachine.mijnnetwerk.com &gt; /etc/hostname</c>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>/etc/hosts aanpassen</title>
<section>
<body>

<p>
Dit bestand bevat een lijst van IP-adressen en hun respectieve hostnames. 
Het wordt gebruikt door je systeem om IP-adressen en pc-namen met elkaar te 
linken voor zover ze niet in de nameservers zitten. Hier is een voorbeeld:
</p>

<pre caption="/etc/host instellingen">
127.0.0.1      localhost
<comment># de volgende regel bevat jouw IP-nummer alsook de naam van je pc in de LAN</comment>
192.168.1.1    mijnmachine.mijnnetwerk.com     mijnmachine
</pre>

<note>
Als je op een DHCP-netwerk zit kan het handig zijn om je <i>localhost</i> aan 
te passen naar je machine's echte hostname. Dit zal GNOME en verschillende 
andere programmas helpen in het omzetten van IP naar hostnames en omgekeerd.
</note>

</body>
</section>
</chapter>
<chapter>
<title>Finale netwerkconfiguratie</title>
<section>
<body>

<p>
Voeg de namen van de modules die vereist zijn voor het correct functioneren
van je systeem toe aan <path>/etc/modules.autoload</path> (je kan daarbij 
eveneens extra opties meegeven door deze op dezelfde regel te plaatsen). 
Wanneer Gentoo Linux boot zullen deze modules automatisch geladen worden. 
Zeer belangrijk is je netwerkkaartmodule (indien je deze als een module 
gecompileerd hebt):
</p>

<pre caption="/etc/modules.autoload">
<comment># Dit in de veronderstelling dat je een 3Com netwerkkaart gebruikt.</comment>
3c59x
<comment>(Kijk in <path>/lib/modules/`uname -r`/kernel/drivers/net</path> voor jouw netwerkkaart.)</comment>
</pre>

<p>
Pas het bestand <path>/etc/conf.d/net</path> aan zodat je netwerkinstellingen
correct ingesteld worden wanneer je opstart:
</p>

<pre caption="Configureren van het netwerk">
# <c>nano -w /etc/conf.d/net</c>
# <c>rc-update add net.eth0 default</c>
</pre>

<p>
Indien je meerdere netwerkkaarten hebt zal je extra 
<path>net.eth<comment>x</comment></path> bestanden moeten maken voor elke 
extra netwerkkaart (<comment>x</comment> = 1, 2, ...):
</p>

<pre caption="Meerdere netwerkkaarten">
# <c>cd /etc/init.d</c>
# <c>cp net.eth0 net.eth<comment>x</comment></c>
# <c>rc-update add net.eth<comment>x</comment> default</c>
</pre>

<p>
Indien je een PCMCIA netwerkkaart gebruikt, neem dan een snelle kijk in 
<path>/etc/init.d/pcmcia</path> om te zien of alles in orde lijkt voor jouw 
systeem, en voeg dan het volgende toe bovenaan 
<path>/etc/init.d/net.eth<comment>x</comment></path> zodat de PCMCIA initscript
eerst gestart worden en dan pas het netwerk-initscript:
</p>

<pre caption="Activeren van pcmcia-vereiste">
depend() {
	need pcmcia
}
</pre>

</body>
</section>
</chapter>
<chapter>
<title>Finale stappen: configureer de basisinstellingen (inclusief de keyboard instelling)</title>
<section>
<body>

<pre caption="basisconfiguratie">
# <c>nano -w /etc/rc.conf</c>
</pre>

<p>
Volg de aanwijzingen in dit bestand om de basisinstellingen aan te passen.
Alle gebruikers zullen zich ervan moeten verzekeren dat <c>CLOCK</c> correct
gedefinieerd is. Internationale keyboard-gebruikers zullen eveneens 
<c>KEYMAP</c> willen aanpassen naar hun smaak (kijk in 
<path>/usr/share/keymaps</path> om de verschillende mogelijkheden te zien).
</p>

</body>
</section>
</chapter>

<!-- Dit lijkt ineens verdwenen te zijn. Ik hou deze vertaling eventjes onder commentaar just in case :-)

<section>
<title>Finale stappen: harddisk instellingen (hdparm)</title>
<body>
<p>
Voeg je <i>hdparm</i> tweaks toe aan <path>/etc/conf.d/local.start</path> opdat deze automatisch uitgevoerd worden tijdens het opstarten.
</p>
<pre caption="Programmas at bootup laten starten">
# <i>nano -w /etc/conf.d/local.start</i>
</pre>
<pre caption="voeg hdparm tweaks toe aan /etc/conf.d/local.start">
# Dit is een goede plaats om verscheidene 
# programmas te definieren die moeten opgestart
# worden tijdens het booten van je pc ( 1>&amp;2 )

# zet DMA aan op beide harde schijven
hdparm -d 1 /dev/hda
hdparm -d 1 /dev/hdb
</pre>
</body>
</section>

-->

<chapter>
<title>Een bootloader configureren</title>
<section>
<title>Notes</title>
<body>

<p>
Gebruikers hebben de mogelijkheid om tussen verschillende bootloaders te
kiezen. Dankzij onze virtuele package-systeem kunnen gebruikers kiezen
tussen GRUB of LILO als bootloader.
</p>

<p>
Herinner je er aan dat het installeren van beide bootloaders niet nodig is. In
tegendeel, het kan voor problemen zorgen, dus installeer een van beide.
</p>

<impo>
Indien je Gentoo Linux installeert op een systeem met een NVidia nForce of
nForce2 chipset met geintegreerde GeForce grafische kaart, dan moet je LILO
gebruiken en niet GRUB. Met on-board video ingeschakeld zal een gedeelte van je
RAM gebruikt worden als video-RAM, en dat is jammergenoeg hetzelfde RAM-gedeelte
dat GRUB gebruikt. Tengevolge hiervan kan je een &quot;out of memory&quot;
fout krijgen. En indien je een off-board grafische kaart gebruikt maar je hebt
ook een on-board grafische kaart, dan is het interessant ook hier voor LILO te
opteren aangezien je mogelijk in de toekomst je on-board grafische kaart wil
gebruiken...
</impo>

</body>
</section>
<section>
<title>Configureren van GRUB</title>
<body>

<p>
Een van de meest kritische zaken bij het verstaan van GRUB is te weten komen 
hoe GRUB kijkt naar harde schijven en partities. Je Linux-partitie 
<path>/dev/hda1</path> heet <path>(hd0,0)</path> onder GRUB. Bemerk de haakjes 
rond hd0,0 - deze zijn verplicht. Harde schijven starten vanaf 0 ipv 
&quot;a&quot; en een partitie start vanaf 0 ipv 1. Tevens worden enkel harde 
schijven geteld, en dus niet atapi-ide apparaten zoals cd-roms. Een
gelijkaardige constructie geldt voor SCSI-apparaten. Normaal gezien krijgen 
deze laatste hogere nummers, tenzij de BIOS ingesteld is om van de 
SCSI-apparaten te booten. 
</p>

<p>
Dus, in de veronderstelling dat je een HD op <path>/dev/hda</path> staan hebt, 
een cdrom-speler op <path>/dev/hdb</path>, een cd-rw op <path>/dev/hdc</path>,
een andere HD op <path>/dev/hdd</path> en geen SCSI-apparaten, dan wordt 
<path>/dev/hdd7</path> vertaald naar <path>(hd1,6)</path>.
</p>

<p>
Dit lijkt ingewikkeld, en eigenlijk is het dat ook een beetje, maar zoals we 
later zullen zien heeft GRUB een tab-auto-aanvulling mechanisme dat je kan 
helpen indien je veel partities en harde schijven liggen hebt en je een 
beetje verloren bent in het schema van aanduidingen. Nu we dit ook weten, is 
het tijd om GRUB te installeren.
</p>

<p>
De meest eenvoudige manier om grub te installeren is simpelweg <c>grub</c> te 
typen op je gechrootte shellprompt:
</p>

<pre caption="Opstarten van grub">
# <c>emerge grub</c>
# <c>grub</c>
</pre>

<impo>
Indien je hardware RAID gebruikt zal dit deel niet werken. Ga direct verder 
naar de sectie waar <path>grub.conf</path> gemaakt wordt. Daarna zullen we 
uitleggen hoe je de grub setup afwerkt voor RAID controllers.
</impo>

<p>
Je zal de <c>grub&gt;</c> prompt te zien krijgen. Nu moet je de correcte 
commando's ingeven om GRUB te installeren op je harde schijf. In deze 
voorbeeldconfiguratie willen we GRUB installeren op de boot record van de 
harde schijf (de MBR, master boot record), zodat het eerste wat we te zien 
krijgen als we de pc opstarten de GRUB prompt is. In dit geval zijn de 
commando's:
</p>

<pre caption="Configureren van grub">
grub&gt; <c>root (hd0,0)</c> <codenote>(Boot partitie)</codenote>
grub&gt; <c>setup (hd0)</c> <codenote>(Locatie van bootrecord)</codenote>
grub&gt; <c>quit</c>
</pre>

<pre caption="Configureren van grub op een andere locatie dan in de MBR">
<comment>Alternatief, indien je de bootloader ergens anders dan in de MBR wil
installeren:</comment>
grub&gt; <c>root (hd0,0)</c> <codenote>(Bootpartitie)</codenote>
grub&gt; <c>setup (hd0,4)</c> <codenote>(Waar de bootrecord geinstalleerd moet worden, hier /dev/hda5)</codenote>
grub&gt; <c>quit</c>
</pre>

<p>
Hier is hoe de commando's werken. Het eerste commando, <c>root ( )</c>, vertelt
GRUB de locatie van de bootpartitie (in dit voorbeeld, <path>/dev/hda1</path>
of dus <path>(hd0,0)</path> in GRUB-nomenclatuur). Het tweede commando,
<c>setup ( )</c>, vertelt GRUB waar hij de boot record moet installeren - het 
zal automatisch geconfigureerd worden om de speciale files te zoeken in de 
door <c>root ( )</c> gedefinieerde locatie. In dit voorbeeld willen we GRUB 
in de MBR, dus is het antwoord <path>/dev/hda</path> of nog <path>(hd0)</path>.
Indien we GRUB gebruiken als secundaire bootloader en een ander programma als 
primaire kunnen we dus eveneens aan GRUB vragen om zich in een bepaalde 
partitie te nestelen ipv in de MBR. Eenmaal GRUB dit commando uitgevoerd heeft 
sluiten we grub door <c>quit</c> in te typen. 
</p>

<note>
De tab-auto-aanvulling van GRUB helpt je bij de keuze van bijvoorbeeld 
partities. Indien je <c>root (</c> ingetypt hebt en je drukt dan op TAB, 
dan krijg je een lijst met de mogelijke apparaten. Indien je <c>root (hd</c> 
ingetypt hebt en dan TAB, dan krijg je een lijst met de mogelijke harde 
schijven. Na <c>root (hd0,</c> TAB indrukken geeft je een lijst met mogelijke 
partities. Gebruik maken van de tab-auto-aanvulling is aangeraden: je hebt 
minder kans om fouten te maken.
</note>

<p>
Nu is Gentoo Linux klaar, maar we moeten eerst de 
<path>/boot/grub/grub.conf</path> aanmaken zodat we een mooie GRUB bootmenu 
te zien krijgen wanneer het systeem opstart.
</p>

<impo>
Om teruggaande compatibiliteit te garanderen is het aangeraden een symbolische 
link aan te maken van <i>grub.conf</i> naar <i>menu.lst</i>. Dit kan je doen 
door <c>ln -s /boot/grub/grub.conf /boot/grub/menu.lst</c>. 
</impo>

<p>
Creeer een grub.conf bestand (<c>nano -w /boot/grub/grub.conf</c>) en voeg de 
volgende regels toe:
</p>

<pre caption="Instellen van de (multi)boot opties: /boot/grub/grub.conf">
default 0
timeout 30
splashimage=(hd0,0)/boot/grub/splash.xpm.gz

title=Mijn Gentoo Linux voorbeeld
root (hd0,0) 
kernel (hd0,0)/bzImage root=/dev/hda3 
<comment>(Dit indien (hd0,0) je /boot-partitie is. Indien deze je root is (je hebt geen aparte boot), 
dan gebruik je best &quot;(hd0,0)/boot/bzImage root=/dev/hda3&quot;</comment> 

<comment># Dit is enkel voor hardware RAID</comment>
title=Mijn RAID Gentoo Linux voorbeeld
root (hd0,0)
kernel (hd0,0)/bzImage root=/dev/ataraid/dXpY

<comment># Dit is enkel voor dual-bootgebruikers</comment>
title=Windows XP
root (hd0,5) 
chainloader (hd0,5)+1
</pre>

<impo>
Indien je scsi emulatie voor een IDE CD-brander gebruikt, dan moet je 
&quot;hdx=ide-scsi&quot; toevoegen aan de kernel-regel in 
<path>grub.conf</path> (met &quot;hdx&quot; de drive die bij je CD-brander 
past).
</impo>

<p>
Nadat je dit bestand opgeslagen hebt is de Gentoo Linux installatie afgewerkt. 
Door de eerste keuze te selecteren zal GRUB Linux booten. Het tweede deel van 
grub.conf is optioneel en toont je hoe je GRUB vraagt om een Windows partitie 
te booten (deze moet bootable zijn uiteraard).
</p>

<note>
Hierboven moet <path>(hd0,0)</path> naar je bootpartitie wijzen 
(<path>/dev/hda1</path> in dit voorbeeld) en <path>/dev/hda3</path> moet 
wijzen naar je root bestandssysteem. <path>(hd0,5)</path> bevat de NT 
bootloader.
</note>

<note>
Het pad naar de kernel image is relatief tov de bootpartitie. Indien je, 
bijvoorbeeld, een aparte bootpartitie hebt onder <path>(hd0,0)</path> en een 
rootpartitie onder <path>(hd0,1)</path>, dan worden de paden in grub.conf 
<path>/bzImage</path>.
</note>

<p>
Indien je enige opties moet meegeven aan de kernel moet je deze gewoon 
toevoegen aan het eind van de <c>kernel</c> regel. We geven al 1 optie mee 
(<c>root=/dev/hda3</c>) maar je kan er nog andere toevoegen. Bijvoorbeeld kan 
je devfs uitschakelen (niet aangeraden als je niet weet wat je aan het doen 
bent) door <c>gentoo=nodevfs</c> mee te geven in de <c>kernel</c> regel.
</p>

<note>
Je moet, in tegenstelling tot oudere Gentoo Linux versies, niet meer 
<c>devfs=mount</c> meegeven op het einde van de <c>kernel</c> regel om devfs 
te activeren. Vanaf rc6 is devfs per default geactiveerd.
</note>

</body>
</section>
<section>
<title>Configureren van LILO</title>
<body>

<p>
Alhoewel GRUB de meest gebruikte bootloader is is ze niet altijd de beste
keuze. LILO, de LInux LOader is het veelgeteste en werkelijk stabiele 
werkpaard van de Linux bootloaders. 
Hierna volgt hoe je LILO ipv GRUB installeert:
</p>

<p>
De eerste stap is het emergen van LILO:
</p>

<pre caption="Emerging LILO">    
# <c>emerge lilo</c>            
</pre>            

<p>
Nu is het tijd om LILO te configureren. Hier is een voorbeeld
configuratiebestand voor <path>/etc/lilo.conf</path>.
</p>

<pre caption="Voorbeeld lilo.conf">    
boot=/dev/hda    
map=/boot/map    
install=/boot/boot.b    
prompt    
timeout=50    
lba32    
default=linux        

image=/boot/bzImage
   label=linux            
   read-only            
   root=/dev/hda3 


#Voor dual-booting van Windows e.a. besturingssystemen
other=/dev/hda1            
   label=dos                
</pre>

<ul>
<li><i>boot=/dev/hda</i> vertelt LILO dat hij zichzelf moet installeren op de eerste HD op de eerste IDE controller.</li>
<li><i>map=/boot/map</i> geeft de locatie van de map-file. In normaal gebruik moet je dit niet aanpassen.</li>   
<li><i>install=/boot/boot.b</i> vertelt LILO om dat bestand als nieuwe bootsector te gebruiken. Bij normaal gebruik moet dit niet aangepast worden. Indien deze regel vermist is, zal LILO /boot/boot.b als default gebruiken.</li>
<li>Indien <i>prompt</i> in de configfile staat, zal LILO je de default <i>lilo:</i> tonen. Alhoewel het niet aan te raden is om prompt te verwijderen kan je nog steeds, door SHIFT in te drukken tijdens het booten, een prompt krijgen.</li>
<li><i>timeout=50</i> stelt het aantal tienden van een seconde in dat LILO moet wachten op gebruikers-commando's.  Indien de gebruiker niet binnen deze tijdsperiode een toets indrukt zal LILO verder doen met de default instellingen. Indien je deze regel achterwege laat worden er default 50 tienden van een seconde genomen.</li>
<li><i>lba32</i> vertelt aan LILO hoe de HD geometrie is. Een andere mogelijkheid is <i>linear</i>. Tenzij je weet wat je doet blijf je beter van deze regel af. Mogelijk maak je anders je systeem niet-bootable.</li>
<li><i>default=linux</i> verwijst naar het default besturingssysteem van al de mogelijkheden die lager in lilo.conf gedefinieerd zijn dat LILO moet booten. De naam &quot;linux&quot; verwijst naar de label-regel van een desbetreffende mogelijkheid.</li>
<li><i>image=/boot/bzImage</i> specifieert het linux-kernel-bestand die geboot dient te worden.</li>
<li><i>label=linux</i> geeft een naam aan de mogelijkheid voor in het LILO-scherm. In dit voorbeeld is het eveneens de naam die gebruikt wordt bij de default-regel, en dus zal deze mogelijkheid default opstarten.</li>
<li><i>read-only</i> zegt dat de root partitie in het begin read-only moet gemount worden en dus tijdens het booten niet mag veranderen.</li>
<li><i>root=/dev/hda5</i> vertelt LILO welke partitie gebruikt moet worden als rootpartitie.</li>
</ul>

<p>
Nadat je je <i>lilo.conf</i> bestand aangepast hebt, moet je LILO uitvoeren om 
de aanpassingen in de MBR neer te schrijven:
</p>

<pre caption="Uitvoeren van LILO">    
# <c>/sbin/lilo</c>            
</pre>            

<p>
LILO is nu geconfigureerd en je machine is nu klaar om in Gentoo Linux te 
booten.
</p>          

</body>        
</section>      
</chapter>      



<chapter>        
<title>Bootdisks creeren</title>
<section>          
<title>GRUB Bootdisks</title>          
<body>            

<p>
Het is altijd een goed idee om een bootdisk aan te maken indien je
een Linux distributie voor de eerste keer installeert. Dit is voor je eigen  
veiligheid, je kan er weinig mis mee doen.
</p>

<p>
Indien je hardware RAID gebruikt kan het zijn dat je een grub bootdisk moet 
aanmaken. Als je met hardware RAID grub wilt installeren vanuit je gechrootte 
shell zal dat mislukken. Dus maken we een grub bootdisk, en wanneer we dan 
van die diskette geboot hebben installeren we grub in de mbr. Maak je bootdisks 
als volgt:
</p>

<pre caption="Grub installeren bij hardware RAID">
# <c>mke2fs /dev/fd0</c>
# <c>mount /dev/fd0 /mnt/floppy</c>
# <c>mkdir -p /mnt/floppy/boot/grub</c>
# <c>cp /usr/share/grub/i386-pc/stage1 /mnt/floppy/boot/grub</c>
# <c>cp /usr/share/grub/i386-pc/stage2 /mnt/floppy/boot/grub</c>
# <c>umount /mnt/floppy</c>
# <c>grub</c>

grub&gt; <c>root (fd0)</c>
grub&gt; <c>setup (fd0)</c>
grub&gt; <c>quit</c>
</pre>

<p>
Reboot nu van de floppy. Vanuit de floppy's <c>grub&gt;</c> prompt kan je nu de
nodige <c>root</c> en <c>setup</c> commando's uitvoeren.
</p>

</body>
</section>
<section>
 <title>LILO bootdisks</title>
 <body>

<p>
Indien je LILO gebruikt is het eveneens een goed idee om een bootdisk te maken. 
</p>

<pre caption="Making a LILO Bootdisk">    
# <c>dd if=/boot/je_kernel of=/dev/fd0</c>    <comment>(Dit werkt enkel indien je kernel kleiner dan 1.4 MiB is)</comment>
</pre>

 </body>
</section>
</chapter>
<chapter>
<title>Installatie afgewerkt!</title>
<section>
<body>

<p>
Nu is Gentoo Linux geinstalleerd. De enige stappen die nog overblijven zijn 
het aanpassen van de nodige configuratiebestanden, het beeindigen van je 
sessie (chroot shell verlaten), je partities unmounten en het systeem 
heropstarten:
</p>

<pre caption="Updaten van de configfiles">
# <c>etc-update</c>
# <c>exit</c> 
<comment>(Dit beeindigt de gechrootte shell. Je kan dit eveneens door <c>^D</c> in te typen.)</comment>
# <c>cd / </c>
# <c>umount /mnt/gentoo/boot</c>
# <c>umount /mnt/gentoo/proc</c>
# <c>umount /mnt/gentoo/dev</c>
# <c>umount /mnt/gentoo</c>
# <c>reboot</c>
</pre>

<note>
Na rebooten is het een goed idee om <c>update-modules</c> uit te voeren om 
het <path>/etc/modules.conf</path> bestand aan te maken. In plaats van dit 
bestand rechtstreeks aan te passen raden we je aan om aanpassingen in de 
bestanden in <path>/etc/modules.d</path> te maken.
</note>

<impo>
Vergeet niet dat, indien je hardware RAID gebruikt, je de bootdisk moet 
gebruiken tijdens de eerste reboot. Ga dan terug in dit document en installeer 
grub op de manier die voorgeschreven is. 
</impo>

<p>
Je bent nu klaar -- Proficiat!
</p>

<p>
Indien je vragen hebt of je wilt meewerken aan de ontwikkeling van Gentoo
Linux, overweeg dan om jezelf te subscriben op de gentoo-user en gentoo-devel
mailinglists (er staat uitleg over op 
<uri link="http://www.gentoo.org/main/en/lists.xml">de mailinglistspagina</uri> (Engels)). We hebben eveneens 
een handige <uri link="http://www.gentoo.org/doc/nl/desktop.xml">Desktop
configuratie gids</uri> die je helpt om je nieuwe Gentoo Linux systeem te
configureren, en een handige 
<uri link="http://www.gentoo.org/doc/nl/portage-user.xml">Portage gebruikgids</uri>
om je op stap te zetten met het portage gebruik. De rest van de Gentoo
Documentatie vind je 
<uri link="http://www.gentoo.org/main/en/docs.xml">hier</uri>. 
Indien je nog enkele andere vragen hebt over de installatie of zelfs iets 
anders over Gentoo, gelieve dan de Gentoo Linux 
<uri link = "http://www.gentoo.org/doc/nl/faq.xml">FAQ</uri> te raadplegen. 
Geniet en welkom bij Gentoo Linux !
</p>

</body>
</section>
</chapter>

<chapter>
<title>Gentoo-Stats</title>
<section>
<body>

<p>
Het Gentoo Linux gebruikers-statistieken programma was ontwikkeld als een 
poging om de ontwikkelaars een idee te geven over hun gebruikersbasis. Het 
collecteert informatie over Gentoo Linux-gebruik om ons te helpen in het 
neerschrijven van prioriteiten voor de ontwikkeling. Het is een volledig 
optioneel programma en het zou ten zeerste geapprecieerd zijn indien je het 
zou gebruiken.
Voorgekauwde statistieken kan je vinden op <uri>http://stats.gentoo.org</uri>.
</p>

<p>
De gentoo-stats server zal aan je systeem een ID toekennen die ervoor zorgt 
dat elk systeem maar 1 maal meegeteld wordt. Deze ID zal niet gebruikt worden 
om je systeem de identificeren en het zal niet met een IP gelinkt worden of 
enig ander doel hebben. Tijdens de ontwikkeling van het systeem is elke 
mogelijke voorzorgsmaatregel genomen om je privacy te garanderen. De volgende 
zaken worden door &quot;gentoo-stats&quot; bekeken en doorgegeven:
</p>

<ul>
<li>Geinstalleerde packages en hun versie-nummer</li>
<li>CPU informatie: snelheid (MHz), merk, type, CPU flags (zoals &quot;mmx&quot; of &quot;3dnow&quot;)</li>
<li>geheugen-informatie (totaal beschikbare fysieke RAM en swap-ruimte)</li>
<li>PCI- en netwerkkaarten</li>
<li>Het Gentoo Linux-profiel dat je pc gebruikt (dat is de map waarnaartoe <path>/etc/make.profile</path> wijst).</li>
</ul>

<p>
Wij zijn er ons van bewust dat het vrijgeven van gevoelige informatie een 
gevaar is voor de Gentoo Linux gebruikers (net zoals voor de ontwikkelaars). 
</p>

<p>
De volgende zaken zijn een lijst van gegevens die niet en nooit zullen 
gearchiveerd worden:
</p>

<ul>
<li>Tenzij je het gentoo-stats programma aanpast zal het nooit gevoelige
informatie, zoals wachtwoorden, configuratie-gegevens, schoenmaat, ... doorsturen.</li>
<li>Versturen van e-mailadressen is optioneel en staat standaard af.</li>
<li>Het IP-adres van waaruit de gegevens komen wordt niet gelinkt, op eender welke wijze, zodat het onmogelijk is om je te identificeren. Er zijn geen &quot;IP-adres/System ID&quot; sleutels.</li>
</ul>

<p>
De installatie is eenvoudig - voer gewoon het volgende uit:
</p>

<pre caption = "Emerging Gentoo-Stats">
# <c>emerge gentoo-stats</c> <codenote>Installeert gentoo-stats</codenote>
# <c>gentoo-stats --new</c> <codenote>Verkrijgen van een nieuwe System ID</codenote>
</pre>

<p>
Het tweede commando vraagt een nieuwe System ID aan en slaat deze op in 
<path>/etc/gentoo-stats/gentoo-stats.conf</path>. Je kan dat bestand bekijken 
om meer opties te vinden.
</p>

<p>
Hierna zou je programma best op regelmatige tijdstippen laten uitvoeren 
(gentoo-stats moet niet als root gerunned worden). Voeg de volgende regel toe 
aan je <path>crontab</path>:
</p>

<pre caption = "Gentoo-stats met cron laten uitvoeren">
<c>0 0 * * 0,4 /usr/sbin/gentoo-stats --update &gt; /dev/null</c>
</pre>

<p>
Het <c>gentoo-stats</c> programma is een simpel perl-script dat bekeken kan 
worden met je favoriete viewer of editor: <path>/usr/sbin/gentoo-stats</path>. 
</p>

</body>
</section>
</chapter>

</guide>
