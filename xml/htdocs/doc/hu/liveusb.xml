<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Id: liveusb.xml,v 1.2 2006/11/29 12:04:44 neysx Exp $ -->

<guide link="/doc/hu/liveusb.xml" lang="hu">

<title>Gentoo Linux LiveUSB HOGYAN</title>

<author title="Szerző">
  <mail link="henrik@gentoo.org">Henrik Brix Andersen</mail>
</author>
<author title="Fordító">
  <mail link="katalin.konkoly@gmail.com">Konkoly Katalin</mail>
  </author>
<author title="Lektor">
  <mail link="alephlg@gmail.com">Lónyai Gergely</mail>
</author>

<abstract>
Ez a HOGYAN elmagyarázza, hogyan készíthető Gentoo Linux LiveUSB, azaz hogyan 
emuláljunk Gentoo Linux telepítőCD-t USB flash drive-on.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.6</version>
<date>2006-09-18</date>

<chapter>
<title>Bevezetés</title>
<section>
<title>A LiveUSB</title>
<body>

<p>
Ebből a HOGYANból megtudhatod, hogyan készíthetsz 
<e>Gentoo Linux LiveUSB</e>-t, azaz hogyan lehet USB flash drive segítségével 
egy Gentoo Linux telepítő CD-t emulálni, ami különösen akkor hasznos, ha 
CD-ROM meghajtó nélküli modern laptopra kell a Gentoot telepíteni.
</p>

<p>
Noha az alábbi leírásnak az a célja, hogy a Gentoo Linux telepítő CD-t egy USB 
flash drive-on emuláljuk, elvileg működnie kell bármilyen blokkeszközön, 
feltéve, hogy helyesen adod meg az eszközneveket.
</p>

</body>
</section>
<section>
<title>Előfeltételek</title>
<body>

<p>
A Gentoo Linux LiveUSB-hez a következőkre lesz szükséged:
</p>

<ul>
  <li>Egy bootolható USB flash drive (legalább 64MB)</li>
  <li>
    Egy x86-os számítógép, amely támogatja az USB-ről való bootolást
  </li>
</ul>

<p>
A LiveUSB készítéséhez még az alábbiak kellenek:
</p>

<ul>
  <li>
    Egy Gentoo Linuxot (vagy valamilyen más Linuxot) futtató számítógép
  </li>
</ul>

</body>
</section>
</chapter>
<chapter>
<title>Az USB flash drive előkészítése</title>
<section>
<title>Particionálás</title>
<body>

<warn>
A következő műveletek minden adatot törölni fognak az USB flash drive-ról, 
ezért előbb készíts mentést a fontos dolgokról.
</warn>

<impo>
Ez a HOGYAN feltételezi, hogy a <path>/dev/sda</path> eszköz-csomópont felel 
meg az USB flash drive-odnak. Ha más SCSI-eszközöket használsz, ellenőrizd az 
eszköznevek helyességét.
</impo>

<p>
Az <c>fdisk</c> segítségével készíts egy FAT32-es partíciót az USB flash 
drive-on és tedd bootolhatóvá. A particionálásra alább látsz egy példát:
</p>

<pre caption="Particinonálási példa">
# <i>fdisk -l /dev/sda</i>

Disk /dev/sda: 1048 MB, 1048313856 bytes
33 heads, 61 sectors/track, 1017 cylinders
Units = cylinders of 2013 * 512 = 1030656 bytes

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1        1017     1023580    b  W95 FAT32
</pre>

</body>
</section>
<section>
<title>Fájlrendszer létrehozása</title>
<body>

<p>
Az <c>mkdosfs</c> segítségével hozz létre FAT32-es fájlrendszert az USB flash 
drive-on:
</p>

<pre caption="Az mkdosfs futtatása">
<comment>(A sys-fs/dosfstools telepítése is szükséges, ha még nem lenne fenn)
</comment>
# <i>emerge -av sys-fs/dosfstools</i>
# <i>mkdosfs -F 32 /dev/sda1</i>
mkdosfs 2.11 (12 Mar 2005)
</pre>

</body>
</section>
<section>
<title>Master Boot Record telepítése</title>
<body>

<p>
Telepítsd az előre lefordított Master Boot Recordot (MBR) a 
<c>syslinux</c>-ból az USB flash drive-ra:
</p>

<pre caption="Master Boot Record telepítése">
<comment>(Legyen telepítve a sys-boot/syslinux-3.00 vagy frissebb változat)
</comment>
# <i>emerge -av '>=sys-boot/syslinux-3*'</i>
# <i>dd if=/usr/lib/syslinux/mbr.bin of=/dev/sda</i>
0+1 records in
0+1 records out
</pre>

</body>
</section>
</chapter>
<chapter>
<title>Fájlok másolása</title>
<section>
<title>A Gentoo Linux telepítő CD csatolása</title>
<body>

<warn>
Ez az útmutató a Gentoo 2006.0-hoz lett készítve. Ne használd a 
2006.1 vagy újabb CD-ket; vagy bootolhatatlan USB lesz a végeredmény.
</warn>

<p>
Töltsd le az <path>install-x86-minimal-2006.0.iso</path>-t a hozzád 
legközelebbi Gentoo Linux <uri link="/main/en/where.xml">tükör</uri> 
webhelyről, és csatold az ISO képmást az <path>/mnt/cdrom/</path> alá, ahogy 
az alábbi példában látod:
</p>

<pre caption="A Gentoo Linux telepítő CD képmás csatolása">
<comment>(Ha még nem létezik az /mnt/cdrom csatolási pont, akkor előbb hozd 
létre)</comment>
# <i>mkdir -p /mnt/cdrom</i>
# <i>mount -o loop,ro -t iso9660 install-x86-minimal-2006.0.iso /mnt/cdrom/</i>
</pre>

<note>
Ha azt a hibaüzenetet kapod, hogy <e>Could not find any loop device</e>, akkor 
előbb engedélyezned kell a <c>Loopback device support</c>-ot a kerneled 
konfigurációjában.
</note>

</body>
</section>
<section>
<title>A LiveUSB csatolása</title>
<body>

<p>
Csatold a frissen formázott USB flash drive-ot az <path>/mnt/usb/</path> alá, 
ahogy alább látod:
</p>

<pre caption="Mounting the USB flash drive">
<comment>(Ha még nem létezik, előbb hozd létre az /mnt/usb/ csatolási pontot)
</comment>
# <i>mkdir -p /mnt/usb</i>
# <i>mount -t vfat /dev/sda1 /mnt/usb/</i>
</pre>

</body>
</section>
<section>
<title>A fájlok másolása</title>
<body>

<p>
Másold át a fájlokat a Gentoo Linux telepítőcédéről a LiveUSB-re. A fájlokat 
kissé át kell rendezni, mivel a <c>syslinux</c> rendszerbetöltőt fogjuk 
használni a CD-n lévő <c>isolinux</c> helyett:
</p>

<pre caption="A fájlok másolása">
# <i>cp -r /mnt/cdrom/* /mnt/usb/</i>
# <i>mv /mnt/usb/isolinux/* /mnt/usb/</i>
# <i>mv /mnt/usb/isolinux.cfg /mnt/usb/syslinux.cfg</i>
# <i>rm -rf /mnt/usb/isolinux*</i>

<comment>(A memtest86-os kernelt át kell nevezni, hogy a syslinux betölthesse)
</comment>
# <i>mv /mnt/usb/memtest86 /mnt/usb/memtest</i>
</pre>

<p>
Most lecsatolhatod az ISO képmást:
</p>

<pre caption="Az ISO képmás lecsatolása">
# <i>umount /mnt/cdrom/</i>
</pre>

</body>
</section>
<section>
<title>A rendszerbetöltő konfigurálása</title>
<body>

<p>
A <c>sed</c> segítségével igazgassuk kicsit a syslinux konfigurációs fájlt, 
ahogy alant látható. A <c>dobladecenter</c> paraméter lehetővé teszi némi 
késleltetés beiktatását a fájlrendszer csatolása előtt, amire az USB flash 
drive felismerése után van szükség.</p>

<pre caption="A rendszerbetöltő paramétereinek megváltoztatása">
# <i>sed -i \
    -e "s:cdroot:cdroot dobladecenter:" \
    -e "s:kernel memtest86:kernel memtest:" \
    /mnt/usb/syslinux.cfg</i>
</pre>

<note>
Megfontolandó a <c>docache</c> paraméter használata, ugyanis így bootolás után 
kiadhatod az <c>umount /mnt/cdrom/</c> parancsot és kihúzhatod az USB flash 
drive-ot. Ezt a paramétert csak akkor engedélyezd, ha a célszámítógépben 
legalább 128 MB RAM van.
</note>

<!--
(2006.1 esmények) nightmorph-tól

Háttér:
Néhány hosszú Robin Johnsonnal (robbat2) történt IRC-s tárgyalás után, 
kiderült miért dolgozik hibásan ezzel az útmutatóval a 2006.1. Ugyanis az 
initramfsben a -t iso9660 található (tudvalevőleg ez a flashen vfat), míg a 
2006.0 initramfs-ben a -t auto. Így az a helyzet, hogy fel kell telepíteni a 
genkernel ~arch verzióját (3.4.4, 2006-11-04-kor ~arch ágon van), és újra kell 
konfigurálni a syslinux.config-ot az átnevezett fájlok miadt.

Nyilvánvaló, hogy nem kívánatos egy dokumentációban egy ~arch unmaszkolásra 
buzdítás, így csak vagylagosan van bemutatva. A 3.4.4 csak október végén lett 
létrehozva; nem valószínű, hogy egyhamar stabil lesz.

Tennivalók:
A paraméterek beállítása után, és a lemez unmountolása/bootloader telepítése 
előtt, használnod kell az ~arch genkernelt. Kérlek cseréld ki a (ide) szöveget 
egy-egy mínuszra - az az átkozott xmllint dob egy "magyarázat nincs befejezve" 
hibát.

# echo "sys-kernel/genkernel" &gt;&gt; /etc/portage/package.keywords
# genkernel (dash)(dash)bootdir=/mnt/usb (dash)(dash)install all
(nem biztos, hogy a syslinux telepítése előtt)
(not sure if syslinux has been installed previously yet
# nano -w syslinux.cfg
(Szerkeszd úgy, hogy a genkernel által telepített új fájlok neveire mutasson)
(lehet, hogy át kell nevezni a fájlokat a syslinux használata előtt, 
mert "a vfat harap" a túl hosszú fájlnevekre)

(lehet, hogy szükség lesz újrafuttatni a syslinuxot az új nevek miadt, 
bár lehet, hogy magától is átnevezi)
# syslinux /dev/sda1

Megjegyzés:
- ha/amikor ez a változás jogerős lesz, akkor brixnek az a kérése, hogy 
nevezzék át "Eredeti szerzőnek", és kerüljön a lista aljára.
- ha/amikor ez lerögzítésre kerül, robbat2- fel kéne venni a címlistára: ezek 
után mindenképp, és dolgozott rajta.

-->

</body>
</section>
</chapter>
<chapter>
<title>Rendszerbetöltő telepítése</title>
<section>
<title>A meghajtó lecsatolása</title>
<body>

<p>
A rendszerbetöltő telepítése előtt mindenképpen le kell csatolni az USB flash 
drive-ot:
</p>

<pre caption="Az USB flash drive lecsatolása">
# <i>umount /mnt/usb/</i>
</pre>

</body>
</section>
<section>
<title>A syslinux telepítése</title>
<body>

<p>
Végezetül telepítsd a <c>syslinux</c> rendszerbetöltőt az USB flash drive-ra:
</p>

<pre caption="A syslinux futtatása">
# <i>syslinux /dev/sda1</i>
</pre>

<impo>
A <c>syslinux /dev/sda1</c> parancsot minden alkalommal le kell futtatni, 
valahányszor módosítod a <path>syslinux.cfg</path> fájlt, hogy a módosítások 
életbe lépjenek.
</impo>

</body>
</section>
</chapter>
<chapter>
<title>A LiveUSB használata</title>
<section>
<title>Bootolás</title>
<body>

<p>
Helyezd be az USB flash drive-ot és kapcsold be a számítógépet. Ellenőrizd, 
hogy a BIOS-ban be legyen állítva az USB-ről való bootolás. Ha minden jól 
megy, a standard syslinux prompt fogad.
</p>

<p>
Innentől minden úgy megy tovább, ahogy a 
<uri link="/doc/hu/handbook/">Gentoo Kézikönyvben</uri> le van írva..
</p>

</body>
</section>
</chapter>
</guide>

