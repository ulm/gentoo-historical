<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link = "/doc/hu/alsa-guide.xml">
<title>Gentoo Linux ALSA Útmutató</title>
<author title="Author"><mail link="zu@pandora.be">
	Vincent Verleye</mail>
</author>
<author title="Author"><mail link="g2boojum@gentoo.org">
	Grant Goodyear</mail>
</author>
<author title="Author"><mail link="agenkin@gentoo.org">
	Arcady Genkin</mail>
</author>
<author title="Editor"><mail link="zhen@gentoo.org">
	John P. Davis</mail>
</author>
<author title="Editor"><mail link="swift@gentoo.org">
    Sven Vermeulen</mail>
</author>
<author title="Editor"><mail link="bennyc@gentoo.org">
	Benny Chuang</mail>
</author>
<author title="Editor"><mail link="blubber@gentoo.org">
	Tiemo Kieft</mail>
</author>
<author title="Translator"><mail link="siposti@delfin.klte.hu">
	 Tibor Sipos</mail>
</author>
<author title="Javította"><mail link="guruman@wap.hu">
	 Barak Tamás</mail>
</author>
<author title="Huntgarian Reviewer"><mail link="strangedr@gentoo.org">
	 Ferencz Tamás</mail>
</author>

<abstract>
Ez az útmutató végigvezet az Advanced Linux Sound Architecture (ALSA) Gentoo Linuxra történő telepítésén. Bár a Gentoo Linux grafikus felületének beállítása útmutatóban is találsz némi információt, a teljes leírást azonban itt találhatod meg. </abstract>

<license/>

<version>1.3.2</version>
<date>September 25, 2003</date>

<chapter>
<title>Bevezető</title>
<section>
	<title>Mi az az ALSA?</title>
<body>
<p>
Az Advanced Linux Sound Architecture (ALSA) egy projekt, amely azért jött létre, 
hogy a Linuxos hangrendszert továbbfejlessze, ezért annak nagy része teljes újraírásra került.
Úgy néz ki, hogy ha teljesen elkészül, az ALSÁ-t a Linux 2.6.x-os (vagy 3.x.x - amelyiket előbb adják ki) kernelébe beépítik.
</p>

<p>
Az ALSA hang- és MIDI-elérhetőséget tesz lehetővé Linux alatt.
</p>
 
<p>
A <uri>http://www.alsa-project.org</uri> webhelyről idézve, az ALSA a következő jellemzőkkel rendelkezik:
</p>
<ul><li> Minden hangcsatoló hathatós támogatása, az egyszerübb felhasználái eszközöktől egészen a professzionális többcsatornás hangeszközökig.</li>
    <li> Teljesen moduláris felépítésü meghajtóprogramok.</li>
    <li> Többprocesszoros és többszálas müködés.</li>
    <li> Felhasználói könyvtárak (alsa-lib), melyekkel egyszerübbé válik az alkalmazások programozása, és nagyobb felhasználhatóságot biztosít.</li>
    <li> A régebbi OSS API támogatása, így a legtöbb OSS-t használó programmal való kompatibilitás.</li> 
</ul>
<p>
Az ALSA rengeteg egyebet is tud, mint például egyszerre történő felvétel és lejátszás (Full Duplex), 
egyszerre több hangkártya használata, hardveres hangkeverés, széles körü keverő (mixer) lehetőségek 
(az újabb hangkártyák fejlett lehetőségeinek kihasználására), ...
</p>
</body>
</section>
<section>
	<title>Miért érdemes ALSA-t hasznáni?</title>
<body>
<p>
Ha a hangkártyádat támogatja a Linux kernel hangrendszere vagy a kereskedelmi OSS/4Front hangrendszer, használd azokat a <e>modulokat</e>.
Ebben az esetben a 
<uri link="http://www.tldp.org/HOWTO/Sound-HOWTO/index.html">Linux Sound HOWTO</uri>-t olvasd el.
</p> 
<p>
Az OSS/4Front meghajtóknak azonban vannak hátulütői is -- például az, hogy fizetősek.
Az ALSA megpróbálja megszüntetni ezeket a hiányosságokat, mindezt nyílt forráskódban megvalósítva.
Az ALSA teljesen GPL és LGPL licensz alá eső hangrendszer, mely professzionális minőséget biztosít felvétel, lejátszás, 
valamint MIDI eszközök használata esetén.
</p> 
</body>
</section>
<section>
	<title>Milyen hangkártyákat támogat az ALSA?</title>
<body>
<p>
Amennyit csak lehet. A legtöbb (új) kártyához létezik ALSA nyílt forráskódú meghajtó.
Némely gyártó azonban zárt, úgynevezett bináris meghajtókat ad ki.
</p>
<p>Ha tudni akarod, vajon a hangkártyádat támogatja-e az ALSA, a 
<uri>http://www.alsa-project.org/alsa-doc/</uri> címen elérhető Soundcard Matrix felsorolja a támogatott (és a nem támogatott) kártyákat.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Telepítés</title>
<section>
	<title>Kernel modulok</title>
<body>
<p>
Mivel még a 2.4.x sorozatú kernelforrást használjuk, a kernelmodulokat és az ALSA-modulokat külön kell lefordítani.
Akik a 2.5.x sorozatú kernelt használják, magában a kernelben tudják mindezt beállítani, 
mert az ALSA modulok ebben a verzióban már a kernel forráskódjában vannak, nincs szükség külön telepítésre.
</p>
<p>
Először is elő kell készítenünk a kernelt, hogy használhassuk az ALSA-t.
Csupán annyit kell tenned, hogy a kernelbeállításban a Sound Card Support-ot modulnak (M) kell beállítani.
Ez hozza létre a <c>soundcore.o</c> modult.
</p>
<note>
Valószínüleg az is megfelelő, ha a Sound Card Support-ot teljesen befordítod a kernelbe (Y), ahelyett, hogy modulba (M) tennéd.
Azonban a hivatalos ALSA dokumentáció modulként javasolja, mert az ALSA a későbbiekben így probálja meg betölteni.
</note>
<p>Ha kész a kernel beállítása, minden más kernel-hangmeghajtót ki kell kapcsolni (a Sound Card Support kivételével).
Ezt újraindítás nélkül a következő parancsokkal érheted el:
</p>
<pre>
# <i>cd /usr/src/linux</i>
# <i>cp .config ~/</i>
# <i>make mrproper</i>
# <i>cp ~/.config .</i>
# <i>make menuconfig</i>
</pre>
<p>
Ezután válaszd ki a <e>Sound Card Support</e>-ot modulnak (M), és a többi hangmeghajtót kapcsold ki!
Lépj ki, és válaszolj Yes-t, hogy kimentsd az új kernelbeállítást. Ezek után készítsd el a kernelmodulokat:
</p>
<pre>
# <i>make dep clean</i>
# <i>make modules modules_install</i>
</pre>
<p>
Mielőtt telepítené az új modulokat, az utolsó sorban kiadott parancs törli az összes, 
régebben elkészített kernelmodult, a korábbi ALSA-telepítés moduljait is.
</p>
<impo>
Ez azt jelenti, hogy valahányszor újrafordítod a kerneledet, újra KELL fordítanod az <c>alsa-driver</c> csomagot.
</impo>
<note>Az <c>nvidia-kernel</c> csomagot viszont nem kell újratenni, 
mert az Nvidia modul egy külön könyvtárba (<path>/lib/modules/*/video</path>) települ, 
így a kiadott make modules <c>make modules modules_install</c> parancsok nem törlik.
</note>
</body>
</section>

<section>
	<title>ALSA modulok</title>
<body>

<p>
Most már telepítheted a hangkártyá(i)d ALSA meghajtóit.Ha a hangkártyád PCI buszos, 
típusát és nevét a /proc/pci tartalmának megtekintésével határozhatod meg.
</p>
<pre>
# <i>grep audio /proc/pci</i>
</pre>


<warn>
ha már korábban beállítottad a hangot, és ezek a nem ALSA hangmodulok be vannak töltve, 
<e>most</e> mindenképpen ki kell őket venni a memóriából. Ellenőrizd a betöltött modulok listáját az <c>lsmod</c> paranccsal, 
és használd az <c>rmmod</c> parancsot, hogy eltávolítsd ezeket a modulokat.
</warn>

<p>
Ezután csak egy <c>emerge alsa-driver</c> parancs kiadására van szükség, ez <e>minden</e> ALSA hangmeghajtót lefordít és telepít.
</p>
<p>
Nem árt, ha a hangkártyádat kezelő modul nevét (<e>Module Name</e>) előzetesen megkeresed az <uri link="http://www.alsa-project.org/alsa-doc">ALSA Soundcard Matrix</uri>-ban, 
a <e>Driver and Docs</e> oszlop <e>Details</e> linkjét követve! Például az enyém <c>snd-emu10k1</c>, mivel egy SBlive! hangkártyám van, 
az <e>EMU10K1</e> chipsettel. Az ALSA_CARDS környezeti változát a modul nevére (az snd- előtag nélkül) állítjuk be, 
mielőtt kiadnánk az emerge parancsot, így csak azok a modulok fordulnak le, amelyek nekünk kellenek.
</p>

<pre>
# <i>env ALSA_CARDS='emu10k1' emerge alsa-driver</i> 
</pre>
<note>
a fenti értéket nem árt az <path>/etc/make.conf</path>,állományba is beírni, 
így, ha később újra kell telepíteni az alsa-driver csomagot, nem kell a fenti teljes parancsot kiadni, 
elég lesz egy <c>emerge alsa-driver</c>is.
Például: <c>echo 'ALSA_CARDS="emu10k1"' >> /etc/make.conf</c>
</note>

<note>
ha egynél több hangkártyához kell ALSA meghajtákat telepíteni, 
az ALSA_CARDS környezeti változának szóközzel elválasztott listában kell megadni a szükséges meghajtók nevét: <c>env ALSA_CARDS='emu10k1 intel8x0 ens1370' emerge alsa-driver</c>
</note>

<note>ha a korábbi OSS hangrendszerrel kompatibilis rendszert akarsz, telepítsd az <c>alsa-oss</c> csomagot is!
Ez biztosítja az ALSA és az OSS közti átjárhatáságot.
</note>

<note>Ha tervezed, hogy újrafordítod a kerneled sokszor, 
akkor aszt tanácsolom, hogy az emerge <c>alsa-driver</c> parancsot a <c>--buildpkg</c> opcióval futtasd. Ez
készít egy bináris csomagot ebből. Késöbb, miután újrafordítottad a kernelt, 
csak ennyit kell csinálnod: <c>emerge --usepkg alsa-driver</c>, ami felinstallálja a 
binaris csomagot, ahelyett, hogy újrafordítaná teljesen.</note>

<p>
Most már a megfelelő ALSA modulok telepítve lettek.
</p>
</body>
</section>
<section>
	<title>Az ALSA beállítása</title>
<body>
<p>
A normális működéshez be kell állítani az ALSA meghajtókat.
Ehhez pár állományt kell szerkeszteni, hogy a rendszer felismerje az új ALSA modulokat.
</p>

<p>
Elöszőr telepítsük fel az <c>alsa-utils</c>csomagot a rendszerünkre:
</p>

<pre caption = "Emerging alsa-utils">
# <i>emerge alsa-utils</i>
</pre>

<p>
Először az <path>/etc/modules.d/alsa</path> állományt kell szerkesztenünk.
</p>
<warn>
Az <path>/etc/modules.conf</path> állományt nem szabad kézzel szerkeszteni! Ehelyett mindig az <path>/etc/modules.d</path> könyvtár állományait szerkeszd.
</warn>
<p>
Az ALSA-ra vonatkozó rész ennek az <e>állománynak a végén</e> található. 
Itt beállítható, hogy legfeljebb hány hangkátya van (általában egy).
</p>
<pre caption="Az /etc/modules.d/alsa állomány vége felé...">
<comment>Itt állítsd be a megfelelő számú hangkártyát</comment>
options snd cards_limit=1
</pre>
<p>
Most megadjuk, mely meghajtó(ka)t használja az ALSA. Ugyanebben az állományban a következőket kell módosítani:
</p>
<pre caption="In /etc/modules.d/alsa">
## and then run `modules-update' command.
## Read alsa-driver's INSTALL file in /usr/share/doc for more info.
##
##  ALSA portion
alias snd-card-0 snd-emu10k1
<comment>## If you have more than one, add:</comment>
## alias snd-card-1 snd-intel8x0
## alias snd-card-2 snd-ens1370
##  OSS/Free portion
## alias sound-slot-0 snd-card-0
## alias sound-slot-1 snd-card-1
##
</pre>
<note>
ha egynél több hangkártyád van, állítsd be a <c>cards_limit</c> értékét, és írd be a megfelelő snd-card bejegyzéseket!
Ezt még nem próbáltam ki, de két vagy több hangkártya beállításához az 
<uri link="http://www.alsa-project.org/alsa-doc/alsa-howto/alsa-howto.html">ALSA útmutató</uri>
<uri link="http://www.alsa-project.org/alsa-doc/alsa-howto/c1660.htm">6. fejezetében</uri> 
találhatsz példákat.
</note>
<p>
Az utolsó dolog, amit ebben az állományban, valahol annak vége felé még be kell állítani, 
a következő sorok jelenléte (ellenőrizd, hogy nincs előttük # jel):
</p>
<pre caption="Az /etc/modules.d/alsa állomány vége felé...">
alias /dev/mixer snd-mixer-oss
alias /dev/dsp snd-pcm-oss
alias /dev/midi snd-seq-oss
</pre>
<p>
Ellenőrizd le még egyszer az <path>/etc/modules.d/alsa</path> állomány tartalmát, 
majd ha minden megfelelőnek tünik, add ki az <c>modules-update</c> parancsot.
</p>
<pre>
# <i>modules-update</i>
</pre>
<note>
Most az <c>modules-update</c> parancs az <path>/etc/modules.d/alsa</path> tartalmát másolja be az <path>/etc/modules.conf</path> állományba.
</note>
<p>
Ellenőrizd, hogy az /etc/devfsd.conf állományban az ALSA eszközök és hozzáférési jogok helyesen szerepelnek!
</p>
<pre caption="/etc/devfsd.conf">
# ALSA/OSS stuff
# Comment/change these if you want to change the permissions on
# the audio devices
LOOKUP          snd          MODLOAD ACTION snd
LOOKUP          dsp          MODLOAD
LOOKUP          mixer        MODLOAD
LOOKUP          midi         MODLOAD
REGISTER        sound/.*     PERMISSIONS root.audio 660
REGISTER        snd/.*       PERMISSIONS root.audio 660
</pre>
<note>
a devfsd.conf állomány fenti tartalma a /dev/sound szköz jogait root.audio-ra állítja.
Emiatt csak azok a normál felhasználók tudnak hangot használni, akik tagjai az audio csoportnak.
</note>
</body>
</section>
</chapter>
<chapter>
<title>Az ALSA indítása</title>
<section>
	<title>Az alsasound indítóállomány hozzáadása egy futási szinthez</title>
<body>
<p>
Először is be kell állítani, hogy a gép indulásakor elinduljon az ALSA szolgáltatás:
</p>
<pre>
# <i>rc-update add alsasound boot</i>
</pre>
<warn>az alsasound indí­tóállományt a "boot" futási szinthez kell adni, nem a "default"-hoz.</warn>
</body>
</section>
<section>
	<title>Futtatás és az elnémítás kikapcsolása</title>
<body>
<p>
SMivel Linux felhasználók vagyunk, nem fogunk újraindítani. Ezért az alsasound indítóállományt kézzel indítjuk el.
</p>
<pre>
# <i>/etc/init.d/alsasound start</i>
</pre>
<p>
Az ALSA most már fut. Ha minden jól ment, az <c>lsmod</c> parancs kiadásával meg tudod nézni a betöltött ALSA modulokat.
Hang azonban még nem szólal meg, mert a hangcsatornák el vannak némítva. Ezért most szükségünk lesz az <c>amixer</c> csomagra.
</p>
<pre caption = "amixer futtatása">
# <i>amixer</i>
</pre>
<warn>
Bár ez valószínüleg <e>sosem</e> történik meg, azért előfordulhat, hogy a fenti parancs kiadása után a következő hibajelzést kapod:"amixer: Mixer attach default error: No such file or directory", akkor kézzel kell betöltened a modprobe parancs segítségével a 
<c>snd-mixer-oss</c> és <c>snd-pcm-oss</c> modulokat egyszer. Azután futtasd az amixer-t ismét.
</warn>
<pre caption="csak ha hibajelzést kapsz az amixer program futtatásakor">
# <i>modprobe snd-mixer-oss</i>
# <i>modprobe snd-pcm-oss</i>
# <i>amixer</i>
</pre>
<p>
Ha idáig eljutottál, kapcsold ki a Master és a PCM csatornák némítását!
</p>
<pre caption = "Unmuting channels">
# <i>amixer set Master 100 unmute</i>
# <i>amixer set PCM 100 unmute</i>
<comment>Only if the above doesn't succeed on its own:</comment>
# <i>amixer set Center 100 unmute</i>
# <i>amixer set Surround 100 unmute</i>
<comment>Test the sound:</comment>
# <i>aplay $KDEDIR/share/sounds/pop.wav</i> <codenote>(a pop.wav állomány a KDE csomag része)</codenote>
</pre>
<p>
A hang ellenőrzéséhez az aplay (alsa play) programot használjuk. Ha megszólalt a hang, müködik az ALSA hangrendszered.
Ezután már csak a hangerőket kell tetszésed szerint beállítanod; az ncurses-alapú (karakteres) <c>alsamixer</c> programmal mindezt könnyen elvégezheted.
</p>
<p>
Esetleg még kiadhatod a következő parancsot is:<c>alsa-xmms</c> ­ így az XMMS médialejátszó képes lesz ALSA-t használni.
</p>
<p>
Újraindításkor az <e>alsasound</e> indítóállomány automatikusan elmenti, illetve visszaállítja a hangerő-beállításokat.
</p>
</body>
</section>
</chapter>
<chapter>
<title>Megjegyzések</title>
<section>
	<title>Kernelfrissítés után..</title>
<body>
<p>Akárhányszor újraforgatod a kerneledet, vagy új kernelt teszel fel, újra kell fordítani az ALSA modulokat is.</p>
<p>Bár az előzőekben az <c>alsa-driver</c>, <c>alsa-libs</c> és <c>alsa-utils</c>, csomagokat is telepí­tettük, 
csak az elsőt kell újratelepíteni, mert ez teszi be az ALSA modulokat a 
<path>/lib/modules/*/kernel/sound/pci/</path> könyvtárba.</p>
<pre caption="minden kernel-fordí­tás után szükséges">
# <i>emerge alsa-driver</i>
</pre>
</body>
</section>
<section>
	<title>/etc/modules.autoload</title>
<body>
<p>Az ALSA használatához ezt az állományt nem kell szerkesztened.
Miután kiadtad az <c>rc-update add alsasound boot</c> parancsot, a rendszer minden induláskor automatikusan betölti a megfelelő modulokat.</p>
<p>Az <c>snd-pcm-oss</c> vagy <c>snd-mixer-oss</c> állományokat sem szükséges ebbe az állományba rakni.
További információért nézd meg <uri link="http://www.djcj.org/LAU/guide/alsbook/faq1.html">ezt a leírást</uri>.</p>
</body>
</section>
<section>
	<title>Még egy pár hivatkozás...</title>
<body>
<p>
További informáciáért nézd meg az alábbi hivatkozásokat:
</p>
<ul>
<li><uri link="http://www.gentoo.org/doc/en/desktop.xml">A Gentoo Linux grafikus felületéek beállítása</uri></li>
<li><uri link="http://www.alsa-project.org">ALSA Project Weboldala</uri></li>
<li><uri link="http://www.alsa-project.org/documentation.php3">ALSA Felhasználói Documentációja</uri></li>
<li><uri link="http://www.djcj.org">ALSA Howto's és FAQ's</uri></li>
<li><uri link="http://tldp.org/HOWTO/Sound-HOWTO/index.html">Linux Sound HOWTO</uri></li>
<li><uri link="http://linux-sound.org/">Sound and MIDI Software For Linux</uri></li>
</ul>
</body>
</section>
</chapter>
</guide>
