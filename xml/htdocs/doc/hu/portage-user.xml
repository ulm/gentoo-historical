<?xml version = '1.0' encoding = 'UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/en/portage-user.xml" >
<title>Portage Felhasználói Útmutató</title>
<author title="Chief Architect" >
<mail link="drobbins@gentoo.org" >Daniel Robbins</mail>
</author>
<author title="Editor" >
<mail link="thomasfl@gentoo.org" >Thomas Flavel</mail>
</author>
<author title="Editor" >
<mail link="zhen@gentoo.org" >John P. Davis</mail>
</author>
<author title="Editor" >
<mail link="carl@gentoo.org" >Carl Anderson</mail>
</author>
<author title="Editor" >
<mail link="peesh@gentoo.org" >Jorge Paulo</mail>
</author>
<author title="Editor" >
<mail link="swift@gentoo.org" >Sven Vermeulen</mail>
</author>
<author title="Hungarian Translator" >
<mail link="strangedr@gentoo.org" >Thomas Ferencz</mail>
</author>
<abstract>Ebben az útmutatóban röviden vázoljuk, hogyan tarthatod frissen a portage állományodat, és hogyan frissítheted a rendszeredet.</abstract>
<license/>
<version>1.3</version>
<date>21 May 2003</date>
<chapter>
<title> Kezdő lépések</title>
<section>
<title> A portage frissítése</title>
<body>
<p>Miután felinstalláltad a Gentoodat, meglehet, bizonyos programok nem úgy működnek, ahogy szeretnéd, vagy esetleg frissíteni akarod a meglévő csomagjaidat, vagy az egész rendszert.
Ehhez frissítened kell a Portage állományt. Számos anonymous rsync szerver áll rendelkezésedre ehhez.</p>
<p>A következő paranccsal szinkronizálhatod a portage-struktúrádat:</p>
<pre caption="A portage frissítése" >
# <c>emerge sync</c>
</pre>
<p>Figyelj arra, hogy az <c>emerge sync</c>  automatikusan meghívja a <i>--clean</i> opciót, amely automatikusan töröl minden személyes változtatást a<path> /usr/portage</path> könyvtárstruktúrában. Ha a saját ebuildjeidet elkülönítve kívánod tartani a fő portage-struktúrától, használd a<i> PORTDIR_OVERLAY</i> függvényt.
</p>
<pre caption="A PORTDIR_OVERLAY használata" >
<comment>Illeszd a következő sort a <path>/etc/make.conf fileba:</path>
</comment>
PORTDIR_OVERLAY=&quot;/dir/ahol/a_saját/ebuildek/vannak&quot;
</pre>
<p>Ha azon veszed észre magad, hogy folyton ebuildeket módosítasz,
 hibákat javítasz stb., esetleg töprengj el rajta, nem akarsz-e a Gentoo Development Team tagja lenni. Ha igen, írj<mail link="drobbins@gentoo.org" > Daniel Robbinsnak</mail> vagy
<mail link="seemant@gentoo.org" >Seemant Kulleennak</mail> további információkért.
</p>
</body>
</section>
<section>
<title>A Portage program frissítése</title>
<body>
<p>Fontos, hogy mielőtt egyéb csomagokat frissítenél, magát a portage-t is frissítsd::
</p>
<pre caption="A Portage frissítése" >
<comment>A következő parancs megmutatja, milyen csomagok frissülnek majd:</comment>
# <c>emerge -up system </c>
<comment>Ez pedig frissíti a megfelelő csomagokat:</comment>
# <c>emerge -u system </c>
</pre>
<p>Ezután már a legfrissebb portage birtokában kezdhetsz neki a frissítéseknek vagy telepítéseknek.</p>
</body>
</section>
</chapter>
<chapter>
<title>Következik az <c>emerge</c>
</title>
<section>
<title>
<c>emerge --pretend</c>
</title>
<body>
<p>Mielőtt feltelepítenél egy csomagot, érdemes megnézni, milyen függőségeket rak majd fel a rendszer, mely csomagok frissülnek stb. <c>emerge --pretend</c> vagy
<c>emerge -p</c> utasításokkal megteheted.
</p>
<pre caption="Az emerge -p használata" >
# <c>emerge -p xchat</c>

These are the packages that I would emerge, in order.

Calculating dependencies......... done!
[ebuild   U] sys-libs/zlib-1.1.3-r2 to /
[ebuild   U] dev-libs/glib-1.2.10 to /
[ebuild N  ] media-libs/jpeg-6b-r2 to /
[ebuild N  ] x11-base/xfree-4.0.3-r3 to /
[ebuild N  ] x11-libs/gtk+-1.2.10-r1 to /
[ebuild N  ] media-libs/giflib-4.1.0-r3 to /
[ebuild N  ] media-libs/tiff-3.5.6_beta to /
[ebuild N  ] media-libs/imlib-1.9.10 to /
[ebuild N  ] net-irc/xchat-1.4.3 to /
</pre>
<p>Ebben a konkrét példában fel akarjuk telepíteni az <i> xchat</i>-et egy olyan gépre, amelyiken nincs X. Ezért, az<c> emerge --pretend</c>
helyesen kijelzi, hogy több függőséget is fel kell telepíteni.
Nevezetesen a <path>sys-libs/zlib</path> és a <path>dev-libs/glib</path> csomagokat frissíteni kell, majd egy csomó ebuildet (beleértve az <path>x11-base/xfree -t</path>,
természetesen) emerge-elni kell.</p>
</body>
</section>
<section>
<title> USE és <c>emerge</c>
</title>
<body>
<p>Fentebb végrehajtottam egy <c>emerge --pretend</c> parancsot egy olyan rendszeren, amelyben nincs benne a
<c>gnome</c>a <c>USE</c> változóban a <path>/etc/make.conf fileban</path>.
Ez annyit tesz, hogy az opcionális GNOME támogatást, ha elérhető, kikapcsoljuk.
Mindazonáltal, <path>az xchat</path>
<e>tartalmaz</e> opcionális GNOME támogatást, ezért
nézzük meg a <c>emerge --pretend</c> kimenetét, miután hozzáadtam a <c>gnome</c> kulcsszót
a <c>USE</c> környezeti változóhoz a <path>/etc/make.conf</path>fileban:
</p>
<pre caption="Emerge használata USE változókkal" >
# <c>emerge -p xchat</c>

These are the packages that I would emerge, in order.

Calculating dependencies............................ done!
[ebuild N  ] media-libs/jpeg-6b-r2 to /
[ebuild N  ] gnome-base/libghttp-1.0.9 to /
[ebuild N  ] media-libs/audiofile-0.2.1 to /
[ebuild N  ] media-sound/esound-0.2.22-r2 to /
[ebuild N  ] gnome-base/gnome-env-1.0 to /
[ebuild N  ] gnome-base/libxml-1.8.11 to /
[ebuild N  ] gnome-base/ORBit-0.5.8 to /
[ebuild N  ] gnome-base/oaf-0.6.5 to /
[ebuild   U] dev-libs/glib-1.2.10 to /
[ebuild N  ] net-libs/libwww-5.3.2-r1 to /
[ebuild N  ] media-libs/giflib-4.1.0-r3 to /
[ebuild N  ] dev-util/guile-1.4-r3 to /
[ebuild   U] sys-libs/zlib-1.1.3-r2 to /
[ebuild N  ] x11-base/xfree-4.0.3-r3 to /
[ebuild N  ] x11-libs/gtk+-1.2.10-r1 to /
[ebuild N  ] media-libs/tiff-3.5.6_beta to /
[ebuild N  ] media-libs/imlib-1.9.10 to /
[ebuild N  ] gnome-base/gnome-libs-1.2.13 to /
[ebuild N  ] gnome-base/glibwww-0.2-r1 to /
[ebuild N  ] gnome-base/gdk-pixbuf-0.11.0 to /
[ebuild N  ] gnome-base/gconf-1.0.0 to /
[ebuild N  ] gnome-base/gnome-vfs-1.0.1 to /
[ebuild N  ] gnome-base/control-center-1.4.0.1 to /
[ebuild N  ] gnome-base/scrollkeeper-0.2 to /
[ebuild N  ] dev-util/xml-i18n-tools-0.8.1 to /
[ebuild N  ] gnome-base/libglade-0.16-r1 to /
[ebuild N  ] gnome-base/gnome-core-1.4.0.4 to /
[ebuild N  ] net-irc/xchat-1.4.3 to /
</pre>
<p>Amint látható, ahogy a <c>gnome</c> kulcsszót hozzáadtuk a <c>USE</c> változóhoz, az emerge felismeri,
hogy az xchatbe bele kell fordítani az opcionális Gnome támogatást.  Persze ahhoz, hogy ez az opcionális GNOME támogatás leforduljon és működjön is, a GNOME fel kell,
hogy legyen installálva a rendszerre. Az <c>emerge</c> kitalálja mindezt, és mindenféle csomagokat
ad az emerge-listához, amelyekre a GNOME-nak szüksége van.  Előfordulhat, hogy
a <c>USE</c> változó hibásan, és ezért az<c>emerge</c> meglepetésszerűen
belefordít vagy kihagy különböző támogatásokat a csomagokba.
Ezért javasoltam, hogy mindig végezzünk el egy <c>emerge --pretend</c>
parancsot, mielőtt tényelgesen kiadnánk a <c>emerge-t</c>, különösen új, ismeretlen ebuildek
esetén.  Ily módon mindig tudni fogod, mire számíthatsz:-) Ha minden jónak tűnik,
tovább lehet lépni a tényleges <c>emerge</c> felé, elhagyva a <c>--pretend</c>
opciót:</p>
<pre caption="Az xchat felmerítése" >
# <c>emerge xchat</c>
</pre>
<p>Miután az összes függőség feltelepült (már ha vannak, nem mindegyik csomagnál van ilyen),
 az xchat forráskódja letöltődik (a
<path>/usr/portage/distfiles</path> könyvtárba), ellenörzésen esik át, kicsomagolódik, lefordul és
installálódik egy sandboxnak (homokosláda) nevű átmeneti könytárba. Ezután feltelepíttetik a helyi filerendszerbe,
és bejegyződik egy csomag-adatbázisba a
<path>/var/db/pkg/net-irc/xchat-1.4.3/CONTENTS</path> címen, mely tartalmazza az összes telepített filet és az md5sum fileokat.</p>
<p>
Ha tudni akarod, milyen USE kulcsszavak használhatók egy adott csomag esetén, és
ezek közül a rendszer melyikeket használja add a <c>-v</c> vagy 
<c>--verbose</c> opciót az <c>emerge -p</c>parancshoz:
</p>
<pre caption="Az emerge használata --verbose kapcsolóval" >
# <i>emerge -pv gentoo-sources</i>

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild    U ] sys-kernel/gentoo-sources-2.4.20-r5 -build +crypt -evms2 
-aavm -usagi 
</pre>
</body>
</section>
<section>
<title> A változások kiderítése</title>
<body>
<p>
Ha tudni szeretnéd, mi változott a között a csomagverzió, ami a gépeden van, és a portage-ben 
lévő között, add hozzá a 
<c>--changelog</c> vagy <c>-l</c> argumentumot:
</p>
<pre caption="A ChangeLog megtekintése" >
# <i>emerge -pl mozilla</i>

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild    U ] net-www/mozilla-1.3-r1 [1.2.1-r5] 

*mozilla-1.3-r1

  22 Mar 2003; Martin Schlemmer &lt;azarah@gentoo.org> mozilla-1.3-r1.ebuild :
  Add Gtk2 patch.  Add default/prefs/xft.js when Xft is enabled.  Some other
  long overdue cleanups.

*mozilla-1.3

  21 Mar 2003; Jay Kwak &lt;jayskwak@gentoo.org> mozilla-1.3.ebuild :
  Add XIM input patch for GTK
             
  18 Mar 2003; Martin Schlemmer &lt;azarah@gentoo.org> mozilla-1.3.ebuild :
  New version.

  13 Mar 2003; Olivier Reisch &lt;doctomoe@gentoo.org> mozilla-1.2.1-r5.ebuild :
  Marked ppc stable

*mozilla-1.3_beta

  23 Feb 2003; Martin Schlemmer &lt;azarah@gentoo.org> mozilla-1.3_beta.ebuild :
  New version.

</pre>
</body>
</section>
</chapter>
<chapter>
<title> Csomagfrissítés</title>
<section>
<body>
<p>A csomagfrissítés szokásos módja a Portage-ben az <c>emerge --update</c>
vagy <c>emerge -u</c>.
</p>
<pre caption="Az emerge -u" >
# <c>emerge -u xchat</c>
</pre>
<p>
A portage ún. &quot;biztonságos&quot; csomageltávolítást alkalmaz; csak eredeti fileokat távolít el.
 Ha egy file felülíródott vagy módosult,
akor érintetlenül hagyja (feltételezhetően feltetted a csomag egy újabb verzióját). Így, ha eltávolítanád az xchat régebbi verzióját az újabb
telepítése után, az xchat futtatható file-t nem fogja eltávolítani a rendszerből,
mivel újabb az idő-bejegyzése és más az md5sum értéke. A biztonságos eltávolítás klassz dolog, mert ezáltal biztosítható,
 hogy a csomag valamelyik verziója mindig rendelkezésre álljon. Ha előbb a régi csomagot kellene eltávolítani, addig nem használhatnád
 az xchatet, amíg az újabb változat le nem töltődik, le nem fordul, települ , és be nem jegyződik az adatbázisba.</p>
<impo>A portage-nek van egy speciális vonása, melyet &quot;konfigurációs file védelemnek&quot; nevezünk. Ennek
az a célja, hogy a konfig fileokat megóvjuk attól, hogy az újonnan telepített csomagok beléjük rondíthassanak. A konfig védelem alapból be van kapcsolva
az /etc és a KDE konfig könyvtárakra; a jövőben más könyvtárak is belekerülhetnek ebbe a körbe.  Add ki a
<c>emerge --help config</c> parancsot, ha további részleteket szeretnél.</impo>
</body>
</section>
</chapter>
<chapter>
<title> A Portage vezérlése</title>
<section>
<body>
<p>
Ha meg akarod változtatni a Portage viselkedését, az <path>/etc/make.conf</path> filet kell szerkesztened. Olyan változókat (vagy változók példabeállításait) tartalmaz, amelyekkel befolyásolhatod a Portage működését.
Például, ha azt szeretnéd befolyásolni, hogy hogyan töltse le a Portage a forrásokat,
módosítsd a <c>FETCHCOMMAND</c> változót igényeid szerint. 
</p>
<p>
Az <path>/etc/make.conf</path> számos példabeállítást tartalmaz,
melyekből valószínűleg ki tudod majd találni a szabályokat.
Nézd meg a <path>make.conf</path> manpage-ét is 
(<c>man make.conf</c>) és ha még mélyebbre szeretnél merülni a Portage világában, olvasd el a <uri link="/doc/en/portage-manual.xml" >Portage 
Manualt</uri>.
</p>
<p>
Ha csak egy fordításnyi alkalomra akarsz megváltoztatni egy változót, megadhatod úgy is, mint egy környezeti változót, ahelyett, hogy az<path>/etc/make.conf</path>
kellene kétszer átszerkesztened. Például <c>AUTOCLEAN=&quot;no&quot; emerge kde</c> letiltja az autoclean opciót az <c>emerge kde</c> idejére.
</p>
</body>
</section>
</chapter>
<chapter>
<title> Mik azok a maszkolt csomagok?</title>
<section>
<body>
<p>
Sok ember kérdezi, miért nem láthatók egyes új csomagok, amikor kiadják az <c>emerge -u world</c> parancsot. Jó példa erre az xfree-4.3.0
(az e cikk írásakor új verzió). Ha lefuttatod az <c>emerge sync</c>-et 
és utána az <c>emerge -u world</c>-öt, az xfree-t nem fogod látni a frissíthető csomagok közt. Miért?
</p>
<p>
Ennek az az oka, hogy bizonyos csomagok &quot;maszkolva&quot; vannak -- vagyis, a csomagot nem lehet automatikusan frissíteni vagy telepíteni, hacsak nem tesel róla külön, hogy lehessen. Hogy hogyan lehet lehetővé tenni mégis a maszkolt csomagok telepítését,
 megtudhatod, ha ellátogatsz a <uri link="http://forums.gentoo.org/viewtopic.php?t=33534" >Masked Packages
FAQ-hoz</uri> a<uri link="http://forums.gentoo.org/" > Gentoo Fórumokon</uri>.
</p>
</body>
</section>
</chapter>
</guide>
