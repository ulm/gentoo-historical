<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link = "/doc/en/env.d-howto.xml">
<title>Env.d HOWTO </title>
<author title="Szerző">
<mail link="zhen@gentoo.org">John P. Davis</mail>
</author>
<author title="Fordította">
<mail link="drstrange@mailbox.hu">Ferencz Tamás</mail>
</author>

<abstract>
Ebben az útmutatóban megismerkedhetsz az
<path>/etc/env.d</path> könyvtárral és annak tartalmával.
</abstract>

<version>1.5</version>
<date>2003. március 16.</date>

<chapter>

<title>Bevezetés az <c>env.d</c> könyvtárba és a környezeti változókba</title>

<section>
<title>A Gentoo alapvető környezeti változói</title>
<body>
<p>A Gentoo felhasználók egyik visszatérő kérdése: "Hol tárolódnak a környezeti változóim, és mi az értékük?". E kérdés
megértéséhez először is azt kell tudni, mi az a környezeti változó.
Valahányszor kiadod az <c>export</c> parancsot, beállítod egy környezeti változó értékét.
Példának okáért, ha kiadod ezt az utasítást: <c>export EDITOR="/usr/sbin/vim" </c>, akkor beállítod azt a környezeti változót, amely megmondja a rendszernek, hogy a default szerkesztőprogramod a vim. A Gentoo igen sok környezeti változó beállítására ad lehetőséget, íme néhány példa:
</p>

<note>Az <c>export</c> mind a shellben, mind annak utódprocesszeiben érvényesíti a környezeti változó beállítását.
Ha anélkül szeretnéd a változót beállítani, hogy annak az utódprocesszekre hatása lenne, ezt így teheted meg:
<i>FOO="bar"</i>. </note>

<note>Lehet, hogy a Te <i>00basic</i> fájlod másképp néz ki. Ez nem baj, mivel ezek a környezeti változók a Gentooval együtt szállított default változók. </note>

<info>A következő példák az <path>/etc/env.d/00basic</path> fájlban találhatók. </info>

<table>
<tr><th>Változó</th><th>Funkció</th></tr>
<tr><ti>PATH</ti><ti>Ez beállítja a programok default elérési útját. Az egyes elemeket : választja el egymástól.
A path változó ezek szerint valahogy így néz ki: <c>PATH=/usr/local/bin:/opt/bin </c>. </ti></tr>

<tr><ti>ROOTPATH</ti><ti>Ez a változó olyan, mint a fentebbi, csak ez a
<c>root</c> részére állítja be az elérési útvonalat. Példa: <c>ROOTPATH=/usr/local/bin:/opt/bin</c>. </ti></tr>

<tr><ti>LDPATH</ti><ti>Ez a változó azokat a könyvtárakat határozza meg, ahol a programok a közös elérésű fájlokat keresik. Az elválasztó itt is a :.
Például: <c>LDPATH=/usr/local/lib </c>. </ti></tr>

<tr><ti>MANPATH</ti><ti>Ez a man oldalak elérési útját szabályozza. Olyan, mint a <i>PATH</i>,
csak éppen a manoknak. Itt egy példa: <c>MANPATH=/usr/share/man:/usr/local/share/man </c>.
</ti></tr>

<tr><ti>INFODIR</ti><ti>Ezzel állítod be, hol legyenek az info fájljaid. Példa:
<c>INFODIR=/usr/share/info </c>.  </ti></tr>

<tr><ti>PAGER</ti><ti>Ez a pager alkalmazást állítja be, tehát, hogy less legyen-e avagy more. Példa:
<c>PAGER=/usr/bin/less </c>. </ti></tr>

<tr><ti>EDITOR</ti><ti>Ez a rendszer default szerkesztőjét állítja be. Valahogy így néz ki:
<c>EDITOR=/usr/bin/vim </c>. </ti></tr>
</table>


<p>Álljon itt most egy példa a <i>00basic</i> fájlra. Csak, hogy lásd, hogyan is néz ki.
Ha a saját <c>00basic</c> fájlod tönkremenne, használhatod ezt is! </p>

<pre caption = "00basic">
# Copyright 1999-2002 Gentoo Technologies, Inc.
# Distributed under the terms of the GNU General Public License, v2 or later
# $Header: /home/cvsroot/gentoo-src/rc-scripts/etc/env.d/00basic,v 1.6 2002/06/20 22:07
:37 azarah Exp $

PATH=/usr/local/bin:/opt/bin
ROOTPATH=/usr/local/bin:/opt/bin
LDPATH=/usr/local/lib
MANPATH=/usr/share/man:/usr/local/share/man
INFODIR=/usr/share/info
CVS_RSH=ssh
PAGER=/usr/bin/less
EDITOR=/usr/bin/vim
LESSOPEN="|lesspipe.sh %s"
</pre>

</body>
</section>

<section>
<title>Az env.d formázása</title>

<body>
<p>Az <c>env.d</c> könyvtáron belül a fájlok logikus sorrendben vannak, így amikor lefuttatod az <c>env-update</c> parancsot,
az megfelelő sorrendbe rendezi a változókat. A fájlenevek előtti számok állítják be a feldolgozás sorrendjét,
tehát <i>00basic</i> lesz az első, utána az <i>01something</i> kerül sorra, és így tovább. A fájloknak maguknak is speciális felépítésük van: </p>

<pre caption = "Tartalom">
<comment># Ez egy megjegyzés </comment>
<i>VARIABLE1=/path/to/something </i>
<comment># Némely változónak kettősponttal elválasztott argumentumai vannak. </comment>
<i>VAR1A=/path/to/something:/path/to/another/something </i>
<i>VARIABLE2=name_something </i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Speciális változók, valamint hogyan áll össze ez az egész</title>

<section>
<title>Speciális változók </title>
<body>

<p>Az <c>env.d </c> tartalmaz néhány speciális változót is. Többek között:
<i>KDEDIRS, PATH, CLASSPATH, LDPATH, MANPATH, INFODIR, ROOTPATH, CONFIG_PROTECT, CONFIG_PROTECT_MASK </i> Azért különlegesek, mert a feldolgozásuk is speciális, és speciális fájlokba kerülnek - erről majd később. </p>

<note>A lentebb látható változók némelyike a <i>00basic</i> fájlban is szerepel.
Ez így rendben is van, mert ezeket a változókat különböző fájlokban többször is fel lehet használni, lásd lejjebb. </note>

<table>
<tr><th>Változó</th><th>Funkció</th></tr>
<tr><ti>KDEDIRS</ti><ti> Ez az összes KDE fájl elérési útja. </ti></tr>

<tr><ti>PATH</ti><ti>Lásd feljebb, ':' az elválasztó, (ld. fent).</ti></tr>

<tr><ti>CLASSPATH</ti><ti>Beállítja a Java osztályok elérését, ':' az elválasztó.</ti></tr>

<tr><ti>LDPATH</ti><ti>Lásd feljebb.</ti></tr>

<tr><ti>MANPATH</ti><ti>Lásd feljebb, ':' az elválasztó.</ti></tr>

<tr><ti>INFODIR</ti><ti>Lásd feljebb, ':' az elválasztó.</ti></tr>

<tr><ti>ROOTPATH</ti><ti>Lásd feljebb, ':' az elválasztó.</ti></tr>

<tr><ti>CONFIG_PROTECT</ti><ti>Ezzel lehet beállítani, hogy az <path>/etc </path> alatt lakó mely konfigfájljaidat akarod megvédeni attól, hogy a frissített ebuildek felülírják őket, ennek argumentumait szóköz választja el egymástól.</ti></tr>

<tr><ti>CONFIG_PROTECT_MASK</ti><ti>Ez gyakorlatilag a CONFIG_PROTECT inverze, kiveszi a védelmet bizonyos, az <path>/etc</path>-ben lévő konfigfájlokból, ha azt szeretnéd, hogy az emerge automatikusan frissítse őket.</ti></tr>
</table>

</body>
</section>

<section>
<title>Lássuk az egészet együtt</title>
<body>

<p>Nos, jól van, most, hogy mindent szépen definiáltunk, alighanem azon tűnődsz, mi a csuda köze van mindennek a Gentoo rendszeredhez. Az <i>env.d </i> ereje abban áll, hogy tetszésed szerint változtathatod a fenti változókat. A fent leírt definíciók segítségével remélhetőleg képes leszel rá. </p>

<p>Most már akkor itt az ideje áttekinteni, mi is történik ezekkel a változókkal.
Amikor meghívod az <c>env-update </c> szkriptet, az sorbarendezi ezeket a fájlokat. Emlékszel, azt mondtuk, hogy lehetséges több <i>PATH </i> változót is definiálni, feltéve, hogy más-más fájlokban vannak? Ez azért van, mert az <c>env-update </c> sorban megy végig a fájlokon, és szépen összerakja az elérési utakat.
Ennélfogva, ha van egy <i>PATH </i> változód a KDE-nek, egy a GNOME-nak, egy default <i>PATH </i>, és még egy az X részére, az
<c>env-update </c> összedolgozza mindezen elérési utakat, és a végén a default <i>PATH </i>
 ezek kombinációja lesz. Ravasz, mi? </p>

<p>Mivel most már összelinkeltük a változókat, fontos megjegyezni, hol is tárolódnak. </p>

<note>Az <c>env-update</c> futtatásakor az alábbi fájlok jönnek létre: </note>

<pre caption = "Az env.d feldolgozásakor keletkező fájlok">
<i>LDPATH ----> /etc/ld.so.conf </i>
<i>CONFIG_PROTECT and CONFIG_PROTECT_MASK ----> /etc/profile.env (mint exportált változók) </i>
<i>Speciálisok és Egyebek ----> /etc/profile.env </i>
</pre>

<p>Ha belenézel az <path>/etc/ld.so.conf</path>-ba, jól láthatod, hogy az <i>env.d</i> a forrása a benne lévő információknak. </p>

<pre caption = "/etc/ld.so.conf">
# ld.so.conf autogenerated by env-update; make all changes to
# contents of /etc/env.d directory
/usr/local/lib
/usr/lib/gcc-lib/i686-pc-linux-gnu/3.2
/usr/lib/opengl/nvidia/lib
/usr/lib/mozilla
/usr/X11R6/lib
/opt/blackdown-jdk-1.3.1/jre/lib/i386/
/opt/blackdown-jdk-1.3.1/jre/lib/i386/native_threads/
/usr/qt/3/lib
/usr/qt/2/lib
/usr/kde/3/lib
</pre>

<p>Fontos tudni, hogy az <path>/etc/profile.env</path>-t
a shell dolgozza fel. Ez jó dolog; mivel az újonnan definiált változóidat a következő loginnál már használhatod. </p>

<pre capton = "Az események sorrendje az env-update-től">
<i>/etc/env.d beállítások ----env-update----> /etc/profile.env ---> /etc/profile
---> bash ---> összes többi program</i>
</pre>

<p>Most, hogy elkészült a <i>profile.env</i>, annak valahogy így kellene kinéznie: </p>

<pre caption = "/etc/profile.env">
export CONFIG_PROTECT='/usr/kde/3/share/config /usr/share/config'
export KDEDIRS='/usr/kde/3:/usr'
export MANPATH='/usr/share/man:/usr/local/share/man:/usr/X11R6/man:/opt/blackdown-jdk-1
.3.1/man'
export INFODIR='/usr/share/info:/usr/X11R6/info'
export PATH='/usr/local/bin:/opt/bin:/opt/rar/bin:/usr/X11R6/bin:/opt/blackdown-jdk-1.3
.1/bin:/opt/blackdown-jdk-1.3.1/jre/bin:/usr/qt/3/bin:/usr/qt/2/bin:/usr/kde/3/bin'
export CONFIG_PROTECT_MASK='/etc/gconf'
export CLASSPATH='/opt/blackdown-jdk-1.3.1/jre/lib/rt.jar:.'
export ROOTPATH='/usr/local/bin:/opt/bin:/opt/rar:/usr/X11R6/bin:/opt/blackdown-jdk-1.3
.1/bin:/opt/blackdown-jdk-1.3.1/jre/bin:/usr/qt/3/bin:/usr/qt/2/bin:/usr/kde/3/bin'
export KDEDIR='/usr/kde/3'
export VIMRUNTIME='/usr/share/vim/vim61'
export JDK_HOME='/opt/blackdown-jdk-1.3.1'
export JAVAC='/opt/blackdown-jdk-1.3.1/bin/javac'
export PAGER='/usr/bin/less'
export HOSTNAME='l00ser.muc.edu'
export QMAKESPEC='linux-g++'
export LESSOPEN='|lesspipe.sh %s'
export CVS_RSH='ssh'
export EDITOR='/usr/bin/vim'
export QTDIR='/usr/qt/3'
export JAVA_HOME='/opt/blackdown-jdk-1.3.1'
export XINITRC='/etc/X11/xinit/xinitrc'
export MOZILLA_FIVE_HOME='/usr/lib/mozilla'
</pre>

<p>Nos, mára ennyi, mókára fel! </p>

</body>
</section>
</chapter>
</guide>
