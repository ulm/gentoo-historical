<?xml version='1.0' encoding='UTF-8'?>

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ja/xorg-config.xml,v 1.1 2004/11/16 20:25:48 nakano Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ja/xorg-config.xml">

<title>X サーバー設定ガイド</title>

<author title="Author">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>

<author title="翻訳">
  <mail link="solidsneak@hyper.cx">小林弘樹</mail>
</author>

<abstract>
Xorgはユーザーがグラフィカル環境を利用できるようになるXウィンドウサーバーです。このガイドではXorgとは何か、どのようにインストールするのか、そして様々な設定オプションは何かを説明します。
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->
<license/>

<version>1.5</version>
<date>August 01, 2004</date>

<!-- Original revision: 1.6 -->

<chapter>
<title>X ウィンドウサーバーとは何か？</title>
<section>
<title>グラフィカル vs コマンドライン</title>
<body>

<p>
平均的なユーザーはコマンドを打つと考えることに脅えているかもしれません。
なぜGentooや一般的なLinuxではしたいようにポイントしてクリックすることができないのでしょうか。
よろしい、(大きな笑みで)、もちろんあなたはこれを行うことが可能です :-)
Linuxは、既存のインストール済のシステム上にインストール可能な、様々な派手なユーザーインターフェースと環境を提供します。
</p>

<p>
これは新しいユーザーが見つける最も大きな驚きの一つです。
すなわち、グラフィカルユーザーインターフェールはシステムで実行するアプリケーションに過ぎないということです。
Linuxカーネルやシステム内部の一部<e>ではありません。</e>
そして、これはワークステーションのグラフィカル能力を完全に可能にする強力なツールです。
</p>

<p>
標準化は重要なので、スクリーン上でウィンドウを描写したり移動したり、
マウスやキーボードや他の一般的な物でユーザーと相互に作用すると言った標準が作成され、<e>X Window System</e>と呼ばれています。
<e>X11</e> や、単に<e>X</e>とも略されます。
それは世界中のUnixやLinuxやUnixの様なオペレーティングシステムで利用されています。
</p>

<p>
LinuxユーザーにX11の標準としてグラフィカルユーザーインターフェースの実行能力を提供するアプリケーションは、XFree86プロジェクトから分岐したXorg-X11です。
XFree86はGPLライセンスと互換性のないライセンスの利用を決定したので、Xorgの利用が推奨されています。
注意して欲しいことはXorgとXFree86との違いは今はとても小さいと言うことです;もし一つを知っていれば、もう一つも知っていると言うことです。
バーション4.4より前のXFree86はPortageから利用可能になっています。
</p>

</body>
</section>
<section>
<title>X.org プロジェクト</title>
<body>

<p>
<uri link="http://www.x.org">X.org</uri>プロジェクトは自由に再配布可能なオープンソースのX11システム実行環境を制作し、維持しています。
それはオープンソースなX11ベースデスクトップの基盤となっています。
</p>

<p>
Xorgはハードウェアとあなたが実行したいソフトウェアとの間のインターフェースを提供します。
その上、Xorgはまた完全なネットワークアウェアです。これは他の誰かがシステムを閲覧中にあなたがアプリケーションを実行できると言うことです。
</p>

</body>
</section>
</chapter>
<chapter>
<title>Xorgのインストール</title>
<section>
<title>emergeを使う</title>
<body>

<p>
雑談はこれぐらいにして、仕事に取りかかりましょう。Xorgをインストールするには、<c>emerge xorg-x11</c>を実行するだけです。
Xorgのインストールには時間がかかりますので、待っている間におやつを食べたくなるでしょう。
</p>

<pre caption="Xorgのインストール">
# <i>emerge xorg-x11</i>
</pre>

<p>
インストールが完了すれば、あなたは継続する前にいくらかの環境変数を初期化する必要があるかもしれません。
<c>env-update</c>の後に<c>source /etc/profile</c>を実行するだけであなたは準備が整います。これはシステムを破壊することはありません。
</p>

<pre caption="環境変数の初期化">
# <i>env-update</i>
# <i>source /etc/profile</i>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>Xorgの設定</title>
<section>
<title>xorg.conf ファイル</title>
<body>

<p>
Xorgの設定ファイルは<path>xorg.conf</path>と呼ばれ、<path>/etc/X11</path>に存在します。
Xorg-X11パッケージはあなた自身の設定を作成できるように<path>/etc/X11/xorg.conf.example</path>に設定例を提供します。
それにはかなりのコメントがされていますが、もしもっとたくさんのドキュメントが必要ならば、manページを読むことをためらわないでください:
</p>

<pre caption="xorg.conf man ページを読む">
# <i>man 5 xorg.conf</i>
</pre>

<p>
マニュアルを読むのが好きなら止めはしませんが、たいていの人はあまり好きではないので、
自動的にこのファイルを生成する方法をもうすこし探してみましょう。
</p>

</body>
</section>
<section>
<title>一般的な選択: xorg.confの自動生成</title>
<body>

<p>
Xorg自身はあなたのために多くのパラメータを推測することができます。
ほとんどの場合、実行して欲しい解像度を得るために数行変更するだけです。
もしより深い調整に興味があるなら、この章の終わりにある文章を見るようにしてください。
しかしまず、(起動すると期待する)Xorgの設定ファイルを生成しましょう。
</p>

<pre caption="xorg.conf ファイルの生成">
# <i>Xorg -configure</i>
</pre>

<p>
Xorgがハードウェアを調査し終わったときにスクリーンの最後の行を読むようにしてください。
もしいくつかの失敗を伝えていれば、<path>xorg.conf</path>ファイルを手動で書く必要があります。
失敗していないとすれば、それは<path>/root/xorg.conf.new</path>に書かれてテストする準備が整ったことを伝えているでしょう。
ではテストしてみましょう :)
</p>

<pre caption="xorg.conf.new ファイルのテスト">
# <i>X -config /root/xorg.conf.new</i>
</pre>

<p>
もし全てがうまくいけば、あなたは醜く、いやでたまらない、不快な、奇形の<c>twm</c>と呼ばれる恐らく最小のウィンドウマネージャーを見るでしょう。
マウスを動かしてみてキーボードやその他の物が動作しているかを見てください。
次のセクションではあなたのハードウェアに合うように<path>xorg.conf</path>を最適化します。
ではスクリーンに映っているターミナルに移動してXorgが終了するまで<c>exit</c>を入力(もしくは Ctrl-Dを押す)してください。
もしマウスをターミナルに合わせることができなければ、Ctrl-Alt-Backspaceを押してXサーバーを強制終了させることもできます。
</p>

</body>
</section>
<section>
<title>もう一つの選択: xorg.confの半自動生成</title>
<body>

<p>
Xorgは<c>xorgconfig</c>と呼ばれる、システムが必要とする様々な情報(グラフィカルアダプタ、キーボード、...)を質問するツールを提供します。
あなたの入力に基づいて<path>xorg.conf</path>ファイルが生成されます。
</p>

<pre caption="xorg.confの半自動生成">
# <i>xorgconfig</i>
</pre>

</body>
</section>
</chapter>
<chapter>
<title>xorg.confの調整</title>
<section>
<title>xorg.confのコピー</title>
<body>

<p>
まず<path>xorg.conf.new</path>を<path>/etc/X11/xorg.conf</path>にコピーしましょう。
こうすることによって何度も<c>Xorg -config</c>を実行する必要が無くなり、<c>startx</c>を起動するだけで良くなります。
</p>

<pre caption="xorg.confのコピー">
# <i>cp /root/xorg.conf.new /etc/X11/xorg.conf</i>
</pre>

<p>
ではXサーバーを起動するために<c>startx</c>を実行してください。
それは新しくコピーされたファイルを設定ファイルとして扱うでしょう。
Xセッションを終了させるには、xtermに<c>exit</c>と入力するかCtrl-Dを押してください。
Ctrl-Alt-Backspaceの組み合わせによりXセッションを強制終了させることもできます。
しかし、これは通常行なうような良い終了の仕方ではありません。ですがそれは何も破壊しません :)
</p>

<pre caption="Xの起動">
# <i>startx</i>
</pre>

</body>
</section>
<section>
<title>解像度の設定</title>
<body>

<p>
もしスクリーン解像度が間違っていると感じれば、設定の内の２つのセクションを確認する必要があります。
何よりもまず、Xサーバーが実行する解像度リストが書かれた<e>Screen</e>セクションがあります。
デフォルトでは、このセクションには何の解像度も書かれていないはずです。
この場合、Xorgは次のセクションである<e>Monitor</e>の情報に基づいて解像度を決定します。
</p>

<p>
何が起こっているかというと、Xorgは妥当な解像度を計算するために<e>Monitor</e>セクションの<c>HorizSync</c>と<c>VertRefresh</c>の設定をチェックしています。
今のところは、これらの設定はそのままにしておきます。
<e>Screen</e>セクション(もう少しで説明します)の変更だけでは動作しない場合にのみ、あなたのモニターのスペックを確認して正しい値を入れなければなりません。
あなたはまた<c>sys-apps/ddcxinfo-knoppix</c>というモニターのスペックを調べるツールを利用することもできます。
</p>

<warn>
モニターの説明書の確認なしにモニターに依存する２つの値を変更<b>してはいけません</b>。
間違った値は良くても同期エラーを引き起こし、最悪ではスクリーンを破壊します。
</warn>

<p>
では解像度を変更しましょう。
次の<path>/etc/X11/xorg.conf</path>の例では<c>Modes</c>行と<c>DefaultDepth</c>を追加し、
Xサーバーがデフォルトで1024x768の24ビットで動作するようにしました。
これらの値はあまり気にしないでください。
これらは例であり、あなたのシステムの設定次第で異なります。
</p>

<pre caption="/etc/X11/xorg.confのスクリーンセクションの変更">
Section "Screen"
  Identifier  "Default Screen"
  Device    "S3 Inc. ProSavage KN133 [Twister K]"
  Monitor   "Generic Monitor"
  <i>DefaultDepth  24</i>
  <comment># 読みやすくするためにいくらかのテキストを省略</comment>
  SubSection "Display"
    Depth   24
    <i>Modes   "1024x768"</i>
  EndSubSection
EndSection
</pre>

<p>
Xを起動 (<c>startx</c>) し、あなたが望む解像度が利用されていることを確認してください :)
</p>

</body>
</section>
<section>
<title>キーボードの設定</title>
<body>

<p>
Xが各国語のキーボードを使うよう設定するために、キーボードの設定を行う<e>InputDevice</e>セクションを検索し、
あなたが望むキーボードレイアウトを示す<c>XkbLayout</c>オプションを追加してください。
例では、ベルギーレイアウトを適用する方法を示しています。あなた自身の国キーコードに置き換えてください:
</p>

<pre caption="キーボードレイアウトの設定">
Section "InputDevice"
  Identifier  "Generic Keyboard"
  Driver    "keyboard"
  Option    "CoreKeyboard"
  Option    "XkbRules"  "xorg"
  Option    "XkbModel"  "pc105"
  <i>Option    "XkbLayout" "be"</i>
EndSection
</pre>

<note>
訳注：日本語用キーボードを使う場合はXkbModelをjp106に、XkbLayoutをjpに変更してください。
</note>

</body>
</section>
<section>
<title>マウスの設定</title>
<body>

<p>
もしマウスが動作していないのなら、まずカーネルによって発見されているかを確認してください。
PS/2マウスは<path>/dev/psaux</path>に、その他のUSBなどのマウスは<path>/dev/input</path>(もしくは <path>/dev/input/mice</path>)に見えるでしょう。
どちらの場合でも、マウスを動かしたときのそのファイルの出力によって、そのデバイスがマウスに相当するかどうか確認することができます。
このセッションを終了するには<c>Ctrl-C</c>を押します。
</p>

<pre caption="デバイスファイルの確認">
# <i>cat /dev/input</i>
<comment>(Ctrl-Cを押して終了することを忘れないでください)</comment>
</pre>

<p>
もしマウスが見つからない場合は、必要なモジュールが全て読み込まれているか確認してください。
</p>

<p>
もしマウスが見つかったなら、<e>InputDevice</e>セクションにデバイスを記入してください。
次の例では２つの異なるオプションが設定されています: 利用されるマウスプロトコル(ほとんどはPS/2かIMPS/2)が書かれた<c>Protocol</c>とマウスホイールを使えるようにする<c>ZAxisMapping</c>です
</p>

<pre caption="Xorgのマウス設定の変更">
Section "InputDevice"
  Identifier  "TouchPad Mouse"
  Driver    "mouse"
  Option    "CorePointer"
  <i>Option    "Device"    "/dev/psaux"</i>
  <i>Option    "Protocol"    "IMPS/2"</i>
  <i>Option    "ZAxisMapping"    "4 5"</i>
EndSection
</pre>

<p>
<c>startx</c>を実行し、結果に喜んでください :)
おめでとうございます、これで動作するXorgをシステムに導入することができました。
次のステップはこの醜く取るに足らないウィンドウマネージャを削除し、KDEやGNOMEといった高機能の物を使うようにすることですが、それはこのガイドの部分ではありません :)
</p>

</body>
</section>
</chapter>
<chapter>
<title>リソース</title>
<section>
<title>xorg.confの生成と調整</title>
<body>

<p>
まず第一に、<c>man 5 xorg.conf</c>は設定ファイルで使われる構文についての完全な参考文献を提供します。
設定ファイルを編集するときにはターミナルでこれをそばに開いておくようにしましょう。
</p>

<p>
システムリソースの二点目として、<path>/usr/X11R6/lib/X11/doc</path>ディレクトリには個々のグラフィカルチップセットについての<path>README</path>があります。
</p>

<p>
<path>xorg.conf</path>の編集に関するたくさんのオンラインリソースもまた存在します。
私たちはそれらの内のほんの少しを提示しますので、<uri link="http://www.google.com">Google</uri>でより多くを検索するようにしてください :)
<path>xorg.conf</path>と<path>XF86Config</path>(XFree86プロジェクトの設定ファイル)は多くの設定オプションで同じ構文を利用しており、
よりたくさんの<path>XF86Config</path>に関する情報が利用可能ですので、私たちはこれらのリソースも同じように提示します。
</p>

<ul>
  <li>
    <uri link="http://tldp.org/HOWTO/XFree-Local-multi-user-HOWTO/">The XFree
    Local Multi-User HOWTO</uri>
  </li>
  <li>
    <uri
    link="http://www-106.ibm.com/developerworks/edu/os-dw-linuxxwin-i.html">An
    Introduction to XFree 4.x</uri> by Chris Houser
  </li>
</ul>

</body>
</section>
</chapter>
</guide>
