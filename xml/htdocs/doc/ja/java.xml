<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ja/java.xml,v 1.9 2004/12/12 13:31:43 nakano Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ja/java.xml">
<title>Gentoo Java ガイド</title>

<author title="Author and Editor">
 <mail link="karltk@gentoo.org">Karl Trygve Kalleberg</mail>
</author>
<author title="Editor">
 <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="翻訳">
  <mail link="ryuui-o@users.sourceforge.jp">大滝竜一</mail>
</author>
<author title="翻訳">
  <mail link="solidsneak@hyper.cx">小林弘樹</mail>
</author>

<abstract>
Gentoo における利用者、開発者のためのJava ドキュメント
</abstract>

<license/>

<version>0.1.4</version>
<date>November 21, 2003</date>

<!-- Original revision: 1.12 -->

<chapter>
<title>JDK/JREのインストール</title>
<section>
<title>概要</title>
<body>

<p>
Gentooは多数のJDK/JREを備えています。デフォルトは BlackdownのJDK/JREの組合せとなっています。
これは登録などの手間のかかることをすること無く自由に利用することができるためです。
</p>

<note>
kaffeはJRE/JDKの代用となります。kaffeはおそらく私達のデフォルトになります。
</note>

<p>
SunとIBMのJDK/JREは一般的により高速です。
しかし、入手するためにはライセンス条項を読み同意する必要があるため面倒な手続きが必要です。
(IBM の場合、それに加えてユーザ登録しなくてはなりません)。
</p>

<p>
私たちのebuildはSunとIBMのJDK/JREをどこでダウンロードするのかを知らせます。
</p>

</body>
</section>

<section>
<title>SunとIBMのJDK/JREのインストール</title>
<body>

<p>
あなたが<c>emerge sun-jdk-1.3.1</c>または<c>emerge ibm-jdk-1.3.1</c>を実行した場合、アーカイブそのものは自分自身でダウンロードする必要があることを知らされるでしょう。
これはライセンス上の制限です。SunのJDK/JREの場合、オンライン上のライセンス条項に同意しなければなりません。
IBMのJDK/JREの場合、ユーザ登録を行わなければなりません
</p>

<note>
sun-jdk-1.4.0の場合も同様です。しかし、全てのパッケージがJava 1.4と一緒にうまく動作するわけではありません。ですから、ご自分の判断でJDK 1.4.0を利用してください。
</note>

<p>
指示されたファイルを<path>/usr/portage/distfiles</path>へダウンロードしてください。
ダウンロードが終わった後、emergeコマンドを実行すると<path>/opt</path>へJDK/JREをインストールします。
</p>

</body>
</section>
</chapter>

<chapter>
<title>JDK/JREの設定</title>
<section>
<title>概要</title>
<body>

<p>
Gentooは矛盾することなく複数のJDKとJREをインストールしておくことができます。
</p>

<p>
あなたが管理者権限を持っているならば、<c>java-config</c>ツールを使用することにより、システム全体のデフォルトを決めることができます。
また、通常のユーザも<c>java-config</c>を使用することにより個人的なデフォルトをシステム全体のものとは別に決めることができます。
</p>

</body>
</section>

<section>
<title>デフォルトJDK/JREの設定</title>
<body>

<p>
<c>java-config --list-available-vms</c>を実行することによりシステムで使用可能なJREとJDKのリストを次のように得ることができます:
</p>

<pre caption="利用可能なVMの一覧">
# <i>java-config --list-available-vms</i>
[blackdown-jdk-1.3.1] Blackdown JDK 1.3.1 (/etc/env.d/java/20blackdown-jdk-1.3.1)
[blackdown-jre-1.3.1] Blackdown JRE 1.3.1 (/etc/env.d/java/20blackdown-jre-1.3.1)
[ibm-jdk-1.3.0] IBM JDK 1.3.0 (/etc/env.d/java/20ibm-jdk-1.3.0)
[ibm-jdk-1.3.1] IBM JDK 1.3.1 (/etc/env.d/java/20ibm-jdk-1.3.1)
[ibm-jre-1.3.1] IBM JRE 1.3.1 (/etc/env.d/java/20ibm-jre-1.3.1)
[sun-jdk-1.4.0] Sun JDK 1.4.0 (/etc/env.d/java/20sun-jdk-1.4.0)
</pre>

<p>
括弧<path>"[]"</path>に囲まれた名前がVMを識別するためのIDです。このIDを<c>java-config --set-system-vm</c>へ次に示すように渡します:
</p>

<pre caption="システムVMの設定">
# <i>java-config --set-system-vm=ibm-jdk-1.3.1</i>
Now using IBM JDK 1.3.1 (/etc/env.d/java/20ibm-jdk-1.3.1)
</pre>

<note>
 --set-system-vm を実行する場合には管理者権限が必要です。
</note>

<p>
一旦デフォルトのVMを<c>java-config --set-system-vm</c>で指定した場合、次のコマンドを実行して /etc/profile.env を更新する必要があります:
</p>

<pre caption="/etc/profile.envの再構築" >
# <i>env-update</i>
</pre>

<p>
この後、ログインし直してください。または、<path>/etc/profile</path>を環境に読み込み直してください。
</p>

<p>
通常のユーザの場合、<c>java-config --set-user-vm</c>コマンドを実行することにより、必要な環境変数を<path>$HOME/.gentoo/java-env</path>に作成することができます。
通常、シェルの初期化スクリプト(私の場合は<path>$HOME/.zshenv</path>です)で読み込まれます。
</p>

</body>
</section>

<section>
<title>デフォルトCLASSPATHの設定</title>
<body>

<p>
<c>java-config</c>はシステム全体のデフォルトCLASSPATHを指定することができます。
また、ユーザ毎のデフォルトCLASSPATHも指定することができます。
</p>

<p>
次のようにCLASSPATHに追加することのできる有効なJavaライブラリを知ることができます:
</p>

<pre caption="クラス一覧">
# <i>java-config --list-available-packages</i>
[ant] No description (/usr/share/ant/classpath.env)
[java-gnome] No description (/usr/share/java-gnome/classpath.env)
[java-gtk] No description (/usr/share/java-gtk/classpath.env)
[log4j] "" (/usr/share/log4j/package.env)
</pre>

<note>
パッケージの正確な記述はありません。それほど遠くない将来、何か実装されるでしょう。
</note>

<p>
繰り返しますが、括弧<path>"[]"</path>に囲まれた名前が<c>java-config --set-system-classpath</c>へ渡すべきIDとなります:
</p>

<pre caption="classpathsの設定">
# <i>java-config --set-system-classpath=log4j,java-gtk,java-gnome</i>
</pre>

<note>
カレントディレクトリ(.)はシステムクラスパスに含まれていませんが、管理者のログインプロファイルに加えるべきです。
</note>

<p>
繰り返しますが、<c>env-update</c>を実行してシステムの環境を更新なければなりません。
そして、ログインし直すか、または、<path>/etc/profile</path>を環境に読み込み直してください。
</p>

<p>
一般ユーザの場合、<c>java-config --set-user-classpath</c>コマンドを実行することにより、<path>$HOME/.gentoo/java-env</path>によって自動的に読み込まれる<path>$HOME/.gentoo/java-env-classpath</path>を作成することができます。
</p>

</body>
</section>
</chapter>

<chapter>
<title>追加情報</title>
<section>
<title>オフライン情報</title>
<body>

<ul>
<li>java-config manページ</li>
<li><c>java-config --help</c></li>
<li><path>/usr/bin/java-config</path>スクリプト自身</li>
</ul>

</body>
</section>

<section>
<title>オンライン情報</title>
<body>

<ul>
<li><uri link="http://news.gmane.org/gmane.linux.gentoo.devel">gentoo-dev</uri>、<uri link="http://news.gmane.org/gmane.linux.gentoo.user">gentoo-user </uri> メーリングリストアーカイブ</li>
<li>irc.freenode.netの#gentooと#gentoo-java</li>
</ul>

</body>
</section>
</chapter>
</guide>
