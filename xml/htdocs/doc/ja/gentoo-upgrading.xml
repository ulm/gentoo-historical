<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!--
 $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ja/gentoo-upgrading.xml,v 1.1 2005/03/01 18:40:48 idani Exp $ 
-->
<guide link="/doc/ja/gentoo-upgrading.xml">
<title>Gentoo アップグレーディング ガイド</title>

<author title="Author">
  <mail link="g.guidi@gentoo.org">Gregorio Guidi</mail>
</author>
<author title="翻訳">
   <mail link="kminoru@jaist.ac.jp">木ノ下 稔</mail>
</author>
<author title="翻訳">
   <mail link="idani@gentoo.org">飴谷 茂寛</mail>
</author>

<abstract>
このドキュメントは、新しい Gentoo のリリースが既存のシステムにどのような影響を及ぼすかの説明です。
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->
<license/>

<version>2.8</version>
<date>2005-01-22</date>
<!-- Original revision: 1.19 -->

<chapter>
<title>Gentoo と アップグレード</title>

<section>
<title>理念</title>


<body>

<p>
ここはGentooの世界、アップグレードの考え方は以前のLinux世界と比べてまったく違います。
御存じの通り、私達は、新しいリリースを待ち、リリース版をダウンロードして、焼いて、
CD-ROMドライブにセットして、そしてアップグレードするような伝統的なソフトウェアアップグレードの方法をしていません。
</p>

<p>
あなた(すべてが終わった後のGentoo ユーザ)は、
この処理が常に最新の環境でいたいパワーユーザにとっては非常にイライラするとわかります。

素早くそして頻繁にアップデートができるaptやapt-rpmのような、
評判があり普及しているツールを考えると
他のディストリビューション出身のパワーユーザでさえ、たぶん同じ考えだと思います。

しかし、要求の多いユーザを満足させるのにGenooよりも適したディストリビューションはありません。
なぜなら、当初より、Gentooは差分を更新するという考え方で設計されたからです。
</p>

<p>
理想としては、あなたは一度だけインストールし、そしてリリースによる苦労をしないことです。
<uri link="/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=1">A Portage
Introduction</uri><uri link="/doc/ja/handbook/handbook-x86.xml?part=2&amp;chap=1">(日本語訳)</uri> や<uri link="/doc/en/handbook/">Gentoo Handbook</uri><uri link="/doc/ja/handbook/">(日本語訳)</uri>の指示に従うだけでよく、
それは、どのようにしてあなたのシステムを最新に保つかを説明しています。
普通はそれでうまくいくのですが、たまに、アップデートが必要なコアシステムへ手動設定を行います。
</p>

</body>
</section>
<section>
<title>リリースとプロファイル</title>
<body>


<p>
Gentooのリリースプロセスについて
"もし、ユーザにソフトウェアアップデートをさせることを目的としないなら、なぜ新しいリリースはたびたび提供されるのでしょうか？"
という質問が繰り返しされます。
それには、さまざまな理由があります。
</p>

<ul>
  <li>
    新しいリリースは、バグ修正と機能追加を施したLiveCDをリリースすることを目的としています。
  </li>
  <li>
    新しいリリースはアップデートされたGRPパッケージのセットを提供することです。
    それ故、ユーザにインストールへの近道を選択(stage3 + コンパイル済のパッケージ)して、最新のシステムを手に入れます。
  </li>
  <li>
  最後に、新しいリリースはときどき前リリースと互換性のないいくつかの機能を提供するかもしれません。
  </li>
</ul>

<p>
リリースが新しい互換性のない機能、またはコアパッケージのセットの提供、システムの動作の大きな修正を含む時、
私達はそれは新しいプロファイルを提供すると言います。
</p>


<p>
ここで言うプロファイルは設定ファイルのセットで<path>/usr/portage/profiles</path>のサブディレクトリに保管されてます。
そこには、例えばシステムパッケージとみなされるebuild、
デフォルトのUSEフラグ、ヴァーチャルパッケージのためのデフォルトのマッピング、
そして、動かしているシステムのアーキテクチャが記述されています。
</p>

<p>
使用するプロファイルは、シンボリックリンクの<path>/etc/make.profile</path>のリンク先によって決定されます。
それはプロファイルのファイル群を保存している<path>/usr/portage/profiles</path>のサブディレクトリを指しています。
例えば、x86 2004.2 のプロファイルは<path>/usr/portage/profiles/default-x86-2004.2</path>(古いスタイルの配置の場合)か<path>/usr/portage/profiles/default-linux/x86/2004.2</path>(新しいスタイルの配置の場合 - Portage 2.0.51かそれ以降のみ)に見つかります。
新しいスタイルのプロファイルディレクトリについて、
親ディレクトリがプロファイルの一部です(従って、異なったサブプロファイルによって共有されます)。
</p>

<p>
新しいプロファイルによって時代遅れとなったプロファイルは<path>/usr/portage/profiles</path>の中に現在のものと共に保管されています。
しかし、それらは、廃止予定として印付けされます。
<path>deprecated</path>というファイルがプロファイルディレクトリの中に置かれる場合、
そのファイルの中身には、アップグレードすべきプロファイルの名前が書かれています。
あなたが新しいプロファイルにアップデートすべき時に、自動的に警告するためにPortageは、この情報を使います。
</p>

<p>
新しいプロファイルが作られるのには様々な理由があります。
その理由は、コアパッケージ(例えば <c>baselayout</c>、<c>gcc</c>、又は<c>glibc</c>)の新しいバージョンのリリースは前のバージョンとの互換性がなかったり、
デフォルトのUSEフラグやバーチャルマッピングの変更やシステム全体の設定の変更(例えば、<path>/dev</path>のデフォルトの管理にdevfsの変わりにudevが標準となる)があります。
</p>

</body>
</section>
</chapter>

<chapter>
<title>最新リリースの状態に保つ</title>

<section>
<title>プロファイルを変更しないリリース</title>
<body>

<p>
もし、新しいGentooリリースが新しいプロファイルを含まない(例えば、x86用の2004.1リリース)でアナウンスされたら、
結果として、あなたは、それがなかったかのようなふりをすることができます:)。
</p>


<p>
もし、あなたが<uri link="/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=1"> Gentoo Handbookの中で説明した通り</uri><uri link="/doc/ja/handbook/handbook-x86.xml?part=2&amp;chap=1">(日本語訳)</uri>、インストールしたパッケージを更新するなら、
あなたのシステムは新しいリリースを使ってインストールされた状態とまったく同じになるでしょう。
</p>

</body>
</section>

<section>
<title>プロファイルの変更を含むリリース</title>
<body>


<p>
もし、リリースに新しいプロファイルが導入されたら、
あなたは新しいプロファイルを選択して移行しなければなりません。
</p>


<p>
もちろん、あなたは無理にそれをしなくてもよいです、あなたは古いプロファイルを使い続けることもできます。
そして当然、<uri link="/doc/en/handbook/handbook-x86.xml?part=2&amp;chap=1">Gentoo Handbookの説明のように</uri><uri link="/doc/ja/handbook/handbook-x86.xml?part=2&amp;chap=1">(日本語訳)</uri>、パッケージを更新できます。
</p>


<p>
しかし、それが廃止予定になるときは、Gentooはプロファイルの更新を強く推奨します。
(あなたの使用するプロファイルが)廃止予定になった場合、それはGentoo開発者達がもはやそれをサポートする計画がない事を意味します。
以下の表を使うことで、あなたは現在サポートされているプロファイルは何かを素早くチェックすることができます。
</p>

<p>
もし、あなたが新しいプロファイルに移行することを決めたならば、あなたは手動で更新を実行しなければいけないでしょう。
更新の道のりはリリースによって異なるかもしれません。
それは、新しいプロファイルに取り入れられる変更の程度によります。
</p>

<p>
もっとも単純な場合、<path>/etc/make.profile</path>のシンボリックリンクを変更するだけです。
もっとも最悪な場合は、かっこいいvoodooダンスを踊りながら、システムをスクラッチから再コンパイルしなければいけないかもしれません。
普通、移行はリリースノート(例えば、<uri link="/proj/en/releng/release/2004.3/x86-release-notes.xml">x86用2004.3 リリースノート</uri>(未訳))に記載されています。
あなたはこのガイドの最後の<uri link="#instructions">更新の手引</uri>にも見つけることができます。
</p>

</body>
</section>

<section>
<title>サポートされたプロファイル</title>
<body>


<p>
次のプロファイルはGentooの開発者によって公式にサポートされています。
</p>

<table>
<tr>
  <th>アーキテクチャ</th>
  <th>もっとも最近のプロファイル</th>
  <th>他にサポートされたプロファイル</th>
</tr>
<tr>
  <th>alpha</th>
  <ti>2004.3</ti>
  <ti></ti>
</tr>
<tr>
  <th>arm</th>
  <ti>2004.3</ti>
  <ti></ti>
</tr>
<tr>
  <th>amd64</th>
  <ti>2004.3</ti>
  <ti>2004.2, 2004.0</ti>
</tr>
<tr>
  <th>hppa</th>
  <ti>2004.3</ti>
  <ti>2004.2</ti>
</tr>
<tr>
  <th>ia64</th>
  <ti>2004.3</ti>
  <ti></ti>
</tr>
<tr>
  <th>ppc</th>
  <ti>2004.3</ti>
  <ti>2004.0</ti>
</tr>
<tr>
  <th>mips</th>
  <ti>2004.2</ti>
  <ti></ti>
</tr>
<tr>
  <th>s390</th>
  <ti>2004.3</ti>
  <ti></ti>
</tr>
<tr>
  <th>sparc</th>
  <ti>2004.3</ti>
  <ti>2004.0</ti>
</tr>
<tr>
  <th>x86</th>
  <ti>2004.3</ti>
  <ti>2004.2, 2004.0</ti>
</tr>
</table>

</body>
</section>
</chapter>

<chapter id="instructions">
<title>プロファイル更新の手引</title>

<section>
<title>2004.3への更新</title>
<body>


<p>
2004.3のプロファイルの導入の手引において、ユーザは膨大な修正をすることはないでしょう(詳細は以下を参照してください)。
しかし、Gentoo開発者達は<e>stacked profiles</e>の普及を促進させるために、
この新しいプロファイルを推奨し、かなり多くの古いプロファイルを取り除くことを決めました。
このプロファイルは、<path>/usr/portage/profiles</path>ディレクトリに新しく配置され追従します。
例えば、(Portage 2.0.51か、それ以降でサポートされている)<path>/usr/portage/profiles/default-linux/x86/2004.3</path>のような配置です。
</p>

<p>
2004.3のプロファイルへの変更のため、<path>/etc/make.profile</path>のシンボリックリンクを新しい場所へ指すように修正しましょう。
</p>

<warn>
あなたのプロファイルを変更する<e>前に</e>Portageをアップグレードすることを忘れないでください!!!
</warn>

<pre caption="/etc/make.profile のシンボリックリンクの更新">
<comment>&lt;arch&gt; をあなたのアーキテクチャに合わせて置き換えてください。</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-linux/&lt;arch&gt;/2004.3 /etc/make.profile</i>
</pre>

<p>
<b>すべてのアーキテクチャ</b> - 上記の通り、今回のプロファイル中に大きな変更はありません。
しかし、<c>sys-apps/slocate</c> と <c>net-misc/dhcpcd</c>はシステムパッケージと見なされていないということを憶えておきましょう
これはあなたが<c>emerge --depclean</c>を実行した時、
Portageはあなたのシステムからこれらを削除しようすることを意味します。
もし、あなたがこれらパッケージのどれかが必要なら、
プロファイルを切替えた後<path>/var/lib/portage/world</path>に加えるか、手動でそれらをemergeを実行します。
</p>

<p>
<b>ppc</b> - ppcでは、新しくインストールされたマシンから<c>sys-fs/udev</c> は <c>sys-fs/devfs</c>の代わりのデフォルトになります。
これは既にインストールされているマシンには影響しないでしょう。そのため、自分で切替える必要があります。
</p>

</body>
</section>

<section>
<title>2004.2への更新</title>
<body>


<p>
2004.2のプロファイルへの変更のため、<path>/etc/make.profile</path>のシンボリックリンクを新しい場所へ指すように修正しましょう。
</p>

<warn>
 あなたのプロファイルを変更する<e>前に</e>Portageをアップグレードすることを忘れないでください!!!
</warn>

<pre caption="/etc/make.profileのシンボリックリンクの更新">
<comment> &lt;arch&gt; をあなたのアーキテクチャに合わせて置き換えてください。</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-linux/&lt;arch&gt;/2004.2 /etc/make.profile</i>
</pre>

<p>
<b>x86</b> - x86では、このプロファイルのデフォルトのx11は<c>x11-base/xfree</c> から <c>x11-base/xorg-x11</c>に変更になりました。
この変更は<e>default</e>の値のみで、
まだX 関連をインストールしていない場合のみ関係しています。
もし、あなたが既にインストールしてるなら、それは、あなたには影響しないでしょう、
つまり、あなたは従来のように、あるX サーバから他のサーバへと自由に切替えられます。
</p>


<p>
<b>amd64</b> - 前のプロファイルからの基本的な変更はありません。そのため、特別な作業を行う必要はありません。
</p>

</body>
</section>

<section>
<title>2004.0への更新</title>
<body>

<p>
2004.0 のプロファイルへの変更のため、<path>/etc/make.profile</path>のシンボリックリンクを新しい場所へ指すように修正しましょう。
</p>

<pre caption="/etc/make.profile シンボリックリンクの更新">
<comment> &lt;arch&gt; をあなたのアーキテクチャに合わせて置き換えてください。</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-&lt;arch&gt;-2004.0 /etc/make.profile</i>
</pre>

<p>
<b>すべてのアーキテクチャ</b> - 前のプロファイルからの基本的な変更はありません。そのため、特別な作業を行う必要はありません。
</p>

</body>
</section>

<section>
<title>1.4より古いプロファイルから1.4への更新</title>
<body>

<p>
このアップグレードの説明はかなり複雑です。
あなたは<uri link="/doc/en/new-upgrade-to-gentoo-1.4.xml">ここで</uri><uri link="/doc/ja/new-upgrade-to-gentoo-1.4.xml">(日本語訳)</uri>アップグレードの手順を見つけることができます。
</p>

</body>
</section>
</chapter>

</guide>

