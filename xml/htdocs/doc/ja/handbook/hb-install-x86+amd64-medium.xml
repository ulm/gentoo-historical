<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ja/handbook/hb-install-x86+amd64-medium.xml,v 1.3 2008/03/20 15:06:22 shindo Exp $ -->

<!-- Original revision: 1.9 -->

<sections>

<abstract>
Gentooは様々な方法でインストールできます。
GentooインストーラLiveCDを使ってインストールすることもできますが、
この章ではGentooをMinimalインストールCDを使ってインストールする方法を説明します。
</abstract>

<version>5.2</version>
<date>2007-06-29</date>

<section>
<title>ハードウェアの必要条件</title>
<subsection>
<title>はじめに</title>
<body>

<p>
最初に、Gentooのインストールに必要なハードウェアの条件を掲載します。
</p>

</body>
</subsection>
<subsection>
<title>ハードウェアの必要条件</title>
<body test="func:keyval('arch')='x86'">

<table>
<tr>
 <ti/>
 <th>Minimal CD</th>
 <th>LiveCD</th>
</tr>
<tr>
  <th>CPU</th>
  <ti>i486以上</ti>
  <ti><b>i686</b>以上</ti>
</tr>
<tr>
  <th>メモリ</th>
  <ti>64MB</ti>
  <ti>256MB</ti>
</tr>
<tr>
  <th>ディスクの空き容量</th>
  <ti colspan="2">1.5GB（スワップ領域を除く）</ti>
</tr>
<tr>
  <th>スワップ領域</th>
  <ti colspan="2">最低256MB</ti>
</tr>
</table>

</body>
<body test="func:keyval('arch')='AMD64'">

<table>
<tr>
 <ti/>
 <th>Minimal CD</th>
 <th>LiveCD</th>
</tr>
<tr>
  <th>CPU</th>
  <ti colspan="2">任意のAMD64またはEM64T対応CPU</ti>
</tr>
<tr>
  <th>メモリ</th>
  <ti>64MB</ti>
  <ti>256MB</ti>
</tr>
<tr>
  <th>ディスクの空き容量</th>
  <ti colspan="2">1.5GB（スワップ領域を除く）</ti>
</tr>
<tr>
  <th>Swap space</th>
  <ti colspan="2">最低256MB</ti>
</tr>
</table>

<p>
続ける前に、<uri link="/proj/en/base/amd64/">Gentoo AMD64プロジェクトページ</uri>を見てください。
</p>

</body>
</subsection>
</section>
<!-- This part can be propagated to the other architectures as well. -->
<!-- START -->
<section>
<title>GentooインストールCD</title>
<subsection>
<title>はじめに</title>
<body>

<p>
<e>GentooインストールCD</e>は独立したGentoo環境を含むブート可能CDです。
これらのCDを使うとLinuxをCDから起動することができます。
起動時に、接続されたハードウェアが検出されて適切なドライバが読み込まれます。
これらのCDは、Gentooの開発者によってメンテナンスされています。
</p>

<p>
どのインストールCDもブートでき、ネットワークやパーティションを構成し、
インターネットを利用するGentooのインストールを開始します。
現在のところ、2種類のインストールCDが用意されていて、
どちらもインターネット上の最新のパッケージを使ってGentooをインストールするのに適しています。
</p>

<impo>
もし、インターネット接続なしでGentooをインストールしたいか、用意されているインストーラを使いたいなら、
<uri link="2007.0/">Gentoo 2007.0ハンドブック</uri>に記載されているインストール手順を使ってください。
</impo>

<p>
現在用意されているインストールCDは次の2つです。
</p>

<ul>
  <li>
    Gentoo <e>Minimal</e>インストールCDは、小さくて実用的なブート可能なCDです。
    システムをブートして、ネットワークを準備し、Gentooのインストールを続行することが唯一の目的です。
  </li>
  <li>
    Gentoo<e>インストーラLiveCD</e>は、Gentooのインストールに必要なすべてのものを含んでいます。
    グラフィック環境や、自動でインストールを実行するグラフィカルおよびコンソールベースインストーラを提供します。
    そしてもちろん、アーキテクチャ別のインストール手順も用意されています。
  </li>
</ul>

<p>
どちらのインストールCDを使うか決めるお手伝いをするために、
各々のインストールCDの主要な長所と短所を記載しておきます。
</p>

</body>
</subsection>
<subsection>
<title>Gentoo MinimalインストールCD</title>
<body>

<p>
MinimalインストールCDは<c><keyval id="min-cd-name"/></c>と呼ばれ、ディスク容量を<keyval id="min-cd-size"/>MBしか使いません。
このCDをGentooのインストールに使うには、<e>必ず</e>インターネット接続が必要です。
</p>

<table>
<tr>
  <th>MinimalインストールCD</th>
  <th>長所と短所</th>
</tr>
<tr>
  <th>+</th>
  <ti>最小限のダウンロードしか必要としません。</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    stage3 tarballやPortageスナップショット、ビルド済みのパッケージを含まないので、
    ネットワークなしでのインストールには適していません。
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>GentooインストーラLiveCD</title>
<body>

<p>
インストーラLiveCDは<c><keyval id="live-cd-name"/></c>と呼ばれ、<keyval id="live-cd-size"/>MBのディスク容量を必要とします。
このインストールCDはGentooのインストールに使用できます。
インターネット接続なしでインストールすることもできます。
</p>

<table>
<tr>
  <th>インストーラLiveCD</th>
  <th>Pros and Cons</th>
</tr>
<tr>
  <th>+</th>
  <ti>
    インストールに必要なものをすべて含んでいます。ネットワーク接続なしでもインストールできます。
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>非常に大きなデータのダウンロードを必要とします。</ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>stage3 tarball</title>
<body>

<p>
stage3 tarballは最小限のGentoo環境を含んだアーカイブで、
このマニュアルに従ってインストールを進めるのに適しています。
以前は、Gentooハンドブックでは3つのstage tarballから1つを選ぶインストール方法を説明していました。
現在でもstage1とstage2 tarballを提供していますが、公式なインストール手順ではstage3 tarballを使用します。
もしstage1またはstage2 tarballからインストールしたいのであれば、
Gentoo FAQ内の<uri link="/doc/en/faq.xml#stage12">How do I Install Gentoo Using a Stage1 or Stage2 Tarball?</uri>（<uri link="/doc/ja/faq.xml#stage12">日本語訳</uri>）を読んでください。
</p>

<p>
stage3 tarballはLiveCD上にはなく、どの<uri link="/main/en/mirrors.xml">Gentoo公式ミラーサイト</uri>（<uri link="/main/ja/mirrors.xml">日本語訳</uri>）（訳注：日本語訳は古いかもしれません。<uri link="/main/en/mirrors.xml#Japan">英語版の「日本」の部分</uri>へのリンクを張っておきます。）上の、
<path><keyval id="release-dir"/>stages/</path>からでもダウンロードすることができます。
</p>

</body>
</subsection>
</section>
<!-- STOP -->
<section>
<title>GentooインストールCDのダウンロード、書き込み、ブート</title>
<subsection>
<title>インストールCDのダウンロードと書き込み</title>
<body>

<p>
１つのGentooインストールCDを使うことを決めましたね（訳注：使用するGentooインストールCDを選んだことを前提に進めます）。
まずは選択したインストールCDをダウンロードして書き込むことから始めます。
先に使用可能なインストールCDについて述べましたが、それらはどこで見つけられるのでしょう？
</p>

<p>
すべてのインストールCDは<uri link="/main/en/mirrors.xml">Gentoo公式ミラーサイト</uri>（<uri link="/main/ja/mirrors.xml">日本語訳</uri>）（訳注：<uri link="/main/en/mirrors.xml#Japan">英語版の「日本」の部分</uri>）からダウンロードできます。
インストールCDは<path><keyval id="release-dir"/>installcd/</path>にあります。
</p>

<p>
そのディレクトリの中にはISOファイルがあり、それらはCD-Rに書き込むことができる完全なCDイメージです。
</p>

<p>
もしダウンロードしたファイルが破損していないかどうか心配であれば、
ファイルのMD5チェックサムが元のファイルのもの（<path><keyval id="min-cd-name"/>.DIGESTS</path>にあります）と一致しているかどうか確認できます。
Linux/Unixでは<c>md5sum</c>ツールで、Windowsでは<uri link="http://www.etree.org/md5com.html">md5sum.exe</uri>で、
MD5チェックサムを調べることができます。
</p>

<p>
ダウンロードしたファイルの正当性を確認するもう一つの方法は、
GnuPGを使って提供されているデジタル署名（<path>.asc</path>で終わるファイル）を確認する方法です。
署名ファイルをダウンロードして公開鍵を取得します。
</p>

<pre caption="公開鍵を取得">
$ <i>gpg --keyserver subkeys.pgp.net --recv-keys 17072058</i>
</pre>

<p>
そして署名を確認します。
</p>

<pre caption="デジタル署名を確認">
$ <i>gpg --verify &lt;signature file&gt; &lt;downloaded iso&gt;</i>
</pre>

<p>
ダウンロードしたISOファイルを書き込む時には、RAWモード（訳注：ISOファイルを普通のファイルとしてCDに書き込むのではなく、CDイメージとしてCD上に再現させること）を選択しなくてはなりません。
その方法は使用するプログラムによってかなり異なります。
ここでは<c>cdrecord</c>と<c>K3B</c>について述べます。
より多くの情報は<uri link="/doc/en/faq.xml#isoburning">Gentoo FAQ</uri>（<uri link="/doc/ja/faq.xml#isoburning">日本語訳</uri>）にあります。
</p>

<ul>
  <li>
    cdrecordを使うなら、<c>cdrecord dev=/dev/hdc &lt;ダウンロードしたISOファイル&gt;</c>（<path>/dev/hdc</path>をあなたのCD-RWドライブのデバイスパスに置き換えてください）と入力するだけです。
  </li>
  <li>
    K3Bなら、<c>Tools</c> &gt; <c>Burn CD Image</c>」を選択してください。
    「Image to Burn」の欄でISOファイルを選択し、最後に<c>Start</c>をクリックします。
    （訳注：日本語化されたK3Bの場合、<c>ツール</c> &gt; <c>CD イメージを書き込む</c>を選択してください。
    「書き込むイメージ」の欄でISOファイルを選択し、最後に<c>開始</c>をクリックします。）
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>インストールCDのブート</title>
<body>

<p>
インストールCDの書き込みが終わったら、ブートしましょう。
すべてのCDをCDドライブから取り除き、システムをリブートしてBIOSに入ります。
BIOSによりますが、多くの場合はDELかF1またはESCを押せば入れます。
BIOS内では、CD-ROMがハードディスクよりも前に試されるように起動順序を変更します。
これは多くの場合「CMOS Setup」の中にあります。
この設定をしなかった場合、システムはCD-ROMを無視して、ただハードディスクからリブートしてしまうでしょう。
</p>

<p>
ここで、CD-ROMドライブにインストールCDを入れてリブートします。ブートプロンプトが表示されるはずです。
その画面では、デフォルトのブートオプションで起動を開始するにはEnterを押し、
カスタムブートオプションで起動するにはブートオプションを含めてカーネルを指定しEnterを押します。
</p>

<p>
カーネルを指定する？
そうです、インストールCDでは何種類かのカーネルが収められています。
デフォルトは<c>gentoo</c>です。他には特定のハードウェア向けのものと、フレームバッファを無効にした<c>-nofb</c>版のカーネルがあります。
</p>

<p>
利用可能なカーネルの概要を次に記します。
</p>

</body>
<body test="func:keyval('arch')='x86'">

<table>
<tr>
  <th>カーネル</th>
  <th>説明</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>マルチCPUをサポートするデフォルトの2.6カーネル</ti>
</tr>
<tr>
  <ti>gentoo-nofb</ti>
  <ti>フレームバッファのサポートはないこと以外は<c>gentoo</c>と同じです</ti>
</tr>
<tr>
  <ti>memtest86</ti>
  <ti>システムRAMのエラーをチェックします</ti>
</tr>
</table>

</body>
<body test="func:keyval('arch')='AMD64'">
<table>
<tr>
  <th>カーネル</th>
  <th>説明</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>
    K8 CPU（NUMAのサポートを含む）とEM64Tをサポートするデフォルトのカーネル
  </ti>
</tr>
<tr>
  <ti>memtest86</ti>
  <ti>システムRAMのエラーをチェックします</ti>
</tr>
</table>

</body>
<body>

<p>
カーネルにオプションを渡すこともできます。
それらは任意に有効・無効を切り替えることのできるオプション設定を表します。
下記のリストはブートスクリーンでF2を押したときに表示されるものと同じです（訳注：実際は英語で表示されます）。

</p>

<pre caption="カーネルに渡すことができるオプション">
- agpgart       agpgartを読み込みます（グラフィクスに関する問題やロックアップ（訳注：フリーズ・ハングアップ）が発生する場合に使ってください）
- acpi=on       ACPIファームウェアサポートを読み込みます
- ide=nodma     壊れたIDEデバイスのためにDMAを強制的に無効にします
- doscsi        SCSIデバイスを検索します（いくつかのイーサネットカードを破壊します（訳注：破壊ではなくて、ドライバが使えなくなるという意味だと思います））
- dopcmcia      PCMCIA上のCD-ROMのためにPCMCIAサービスを開始します
- nofirewire    initrd内のFireWire（訳注：IEEE1394の別名です）モジュールを無効にします（FireWire接続のCD-ROM、その他用）
- nokeymap      US以外のキーボード配置向けの、キーマップの選択を無効にします
- docache       実行時に必要なCD-ROM内のデータ全体をキャッシュし、
                「umount /mnt/cdrom」を実行して別のCD-ROMのマウントできるようにします。
- nodetect      hwsetup/kudzuとhotplugを実行しません
- nousb         initrdからのUSBモジュールの読み込みとhotplugを無効にします
- nodhcp        ネットワークカードが検出されてもDHCPを自動で開始しません
- nohotplug     hotplugサービスを読み込みません
- noapic        APICを無効にします（ネットワークカードやSCSI、その他に問題がある場合に試してください）
- noevms        EVMS2モジュールを読み込みません
- nolvm2        LVM2モジュールを読み込みません
- hdx=stroke    BIOSが容量の大きいハードドライブをサポートしなくても、
                ハードドライブ全体を分割（訳注：パーティション）することを可能にします
- noload=module1,[module2,[...]]
                特定のカーネルモジュールの読み込まないようにします
</pre>

<p>
では、CDをブートしましょう。
（デフォルトの<c>gentoo</c>カーネルでは困るなら）カーネルとブートオプションを選択します。
例として、<c>gentoo</c>カーネルをカーネルパラメータに<c>dopcmcia</c>を指定して起動する方法を示します。
</p>

<pre caption="インストールCDをブート">
boot: <i>gentoo dopcmcia</i>
</pre>

<p>
最初にブートスクリーンとプログレスバーが表示されるはずです。
US以外のキーボード配列のシステムにGentooをインストールするのであれば、
詳細モードに変更しプロンプトに従うために、必ずすぐにAlt-F1を押してください。
10秒以内に選択しなければ、デフォルト（USキーボード）が選択され、ブートプロセスが継続されます。
ブートプロセスが完了すると、「Live」Gentoo Linuxにスーパーユーザ「root」として自動でログインします。
root（「#」）プロンプトが現在のコンソールに表示されるはずです。
また、Alt-F2やAlt-F3、Alt-F4を押すことによって他のコンソールに切り替えることもできます。
最初のコンソールに戻るにはAlt-F1を押します。
</p>

<p>
ここからは、<uri link="#hardware">特別なハードウェアの構成</uri>から続けます。
</p>

</body>
</subsection>
<subsection id="hardware">
<title>特別なハードウェアの構成</title>
<body>

<p>
インストールCDは、ブート時に接続されたハードウェアデバイスを検出し適切なカーネルモジュールを読み込みます。
ほとんどの場合はうまく動作しますが、ときどき必要なカーネルモジュールが読み込まれないことがあります。
もしPCIデバイス自動検出機能がシステムのハードウェアを見逃したら、適切なカーネルモジュールを手動で読み込む必要があります。
</p>

<p>
次の例では<c>8139too</c>モジュール（特定のネットワークカード用）を読み込みます。
</p>

<pre caption="カーネルモジュールを読み込む">
# <i>modprobe 8139too</i>
</pre>

</body>
</subsection>
<subsection>
<title>任意自由選択：ハードディスクのパフォーマンスを最適化する</title>
<body>

<p>
上級ユーザは、<c>hdparm</c>を使ってIDEハードディスクのパフォーマンスを使って最適化したいかもしれません。
<c>-tT</c>オプションを使えばディスクのパフォーマンスをテストすることができます。
（より正確なデータを得るにはこれを何度か実行してください。）
</p>

<pre caption="ディスクのパフォーマンスをテスト">
# <i>hdparm -tT /dev/hda</i>
</pre>

<p>
最適化のために、ディスクに<path>/dev/hda</path>使った（あなたのディスクに置き換えてください）、
次の例を使うことができます（または、自分自身で試してみてください）。
</p>

<pre caption="ハードディスクのパフォーマンスを最適化">
<comment>（DMAを有効化）</comment>
# <i>hdparm -d 1 /dev/hda</i>

<comment>（安全なパフォーマンスオプションを有効化）</comment>
# <i>hdparm -d 1 -A 1 -m 16 -u 1 -a 64 /dev/hda</i>
</pre>

</body>
</subsection>
<subsection id="useraccounts">
<title>任意自由選択: ユーザアカウント</title>
<body>

<p>
インストール環境を他の人に使わせる予定がある場合や、
（セキュリティの都合上）root権限なしで<c>irssi</c>を使ってチャットをしたい場合は、
必要なユーザアカウントを作成し、rootのパスワードを変更する必要があります。
</p>

<p>
rootのパスワードを変更するには、<c>passwd</c>ユーティリティを使います。
</p>

<pre caption="rootを変更">
# <i>passwd</i>
New password: <comment>（新しいパスワードを入力）</comment>
Re-enter password: <comment>（パスワードをもう一度入力）</comment>
</pre>

<p>
ユーザアカウントを作成するには、まずユーザを作成して、次にパスワードを設定します。
この作業には<c>useradd</c>と<c>passwd</c>を使います。
次の例では、「john」というユーザを作成します。
</p>

<pre caption="ユーザアカウントを作成">
# <i>useradd -m -G users john</i>
# <i>passwd john</i>
New password: <comment>(アカウント用のパスワードを入力)</comment>
Re-enter password: <comment>(パスワードをもう一度入力)</comment>
</pre>

<p>
<c>su</c>を使って、ユーザIDをrootから新しく作ったユーザへ変更することができます。（訳注：権限の変更）
</p>

<pre caption="ユーザIDを変更">
# <i>su - john</i>
</pre>

</body>
</subsection>
<subsection>
<title>任意自由選択：インストール中のドキュメント閲覧</title>
<body>

<p>
インストールの間に（CDからまたはオンラインで）Gentooハンドブックを見たいのであれば、
先にユーザアカウントを作成しておいてください（<uri link="#useraccounts">任意自由選択：ユーザアカウント</uri>を見てください）。
その後、<c>Alt-F2</c>を押して新しいターミナルでログインしてください。
</p>

<p>
CD上のドキュメントを見たいならば、すぐに<c>links</c>を起動します。
</p>

<pre caption="CD上のドキュメントを閲覧">
# <i>links /mnt/cdrom/docs/html/index.html</i>
</pre>

<p>
しかしながら、CD上にあるものよりも新しいことがあるので、オンラインのGentooハンドブックを使うことが望まれます。
CD上のときと同じように<c>links</c>を使うことができますが、
先に<e>ネットワーク設定</e>の章を完了させる必要があります（でないとインターネット上のドキュメントを見ることはできないでしょう）。
</p>

<pre caption="オンラインドキュメントの閲覧">
# <i>links http://www.gentoo.org/doc/en/handbook/<keyval id="online-book"/></i>
</pre>

<p>
<c>Alt+F1</c>を押せば元のターミナルに戻ることができます。
</p>

</body>
</subsection>
<subsection>
<title>任意自由選択：SSHデーモンの開始</title>
<body>

<p>
もし、Gentooのインストールの間に他のユーザにコンピュータを使わせたい場合は（それらのユーザにGentooのインストールの手助けをしてもらうか、それどころかインストールそのものをしてもらうためかもしれません）、
ユーザアカウントを作ってあげる必要があり、
さらにはrootパスワードをも教える必要があるかもしれません（そのユーザを<b>本当に信頼している</b>場合<e>のみ</e>教えてください）。
</p>

<p>
SSHデーモンを起動するには、次のコマンドを実行します。
</p>

<pre caption="SSHデーモンを開始">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
sshdを使うためには、先にネットワークを設定する必要があります。
<uri link="?part=1&amp;chap=3">ネットワーク設定</uri>の章から続けてください。
</p>

</body>
</subsection>
</section>
</sections>
