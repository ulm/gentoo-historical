<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ja/gentoo-x86-quickinstall.xml,v 1.1 2003/12/29 06:38:28 nakano Exp $ -->
<guide link="/doc/ja/gentoo-x86-quickinstall.xml">
<title>Gentoo Linuxインストールリファレンス</title>
<author title="Author">Steven Wagner</author>
<author title="Editor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="翻訳">
    <mail link="konno.katsuyuki@nifty.com">今野勝之</mail>
</author>

<abstract>
クイックインストールリファレンスは、簡単にインストールする際の手順の詳細をすべてカバーしています。このガイドに従ってインストールする場合、Gentoo Linuxのインストールを経験している必要があります。
</abstract>

<license/>

<version>1.1</version>
<date>November 1, 2003</date>
<!-- Original revision: 1.5 -->

<chapter>
<title>クイックインストールリファレンス</title>
<body>

<p>
インストールCDイメージは<uri link=
"http://www.gentoo.org/main/en/mirrors.xml">Gentoo Mirrors</uri>にあります。
それぞれのCDの詳細な説明については<uri link="http://store.gentoo.org">Gentoo Store</uri>で見ることができます。
CD 1はInternetへの接続なしで、Gentoo Linuxを素早くインストールするために必要なもの全てが含まれています。
CD 2はオプションとしてKDEやGNOME、OpenOffice、Mozilla、Evolutionなどといったコンパイル済みのパッケージが含まれています。
</p>

<p>
まずGentoo CDからブートします。どんなブートオプションが利用可能かを確認するには、&lt;F1&gt; または &lt;F2&gt; を押します。
デフォルト設定のカーネルで続行する場合は、ブートスクリーンが表示されているときに&lt;ENTER&gt;を押します。
ブート後プロンプトが表示されます。
</p>

<pre caption="設定を始めます">
# <i>date</i>  （日付、時間が正しいかを確認します。もし間違っているようであれば、<i>date MMDDhhmmCCYY</i>で設定します）
# <i>modprobe module_name</i>  （オプション － 必要なモジュールをロードします）
# <i>net-setup eth0</i> （ネットワークを設定します）
# <i>fdisk /dev/hda</i> （ドライブを分割します）
</pre>

<p>
推奨されるセットアップは、ファイルシステムがext3で64Mのブートボリューム、メモリの2倍のサイズのスワップパーティション、そして残りがReiserFSでルートパーティションという構成です。
</p>

<p>
<c>mke2fs</c>（Ext2）、<c>mke2fs -j</c>（Ext3）、<c>mkreiserfs</c>（ReiserFS）、<c>mkfs.xfs</c>（XFS）、<c>mkfs.jfs</c>（JFS）、<c>mkswap</c>（スワップパーティション）を使ってパーティションを初期化します。
例：　<c>mke2fs -j /dev/hda3</c>
</p>

<p>
パーティションをマウントし、適切なstageファイルを展開します。
</p>

<pre caption="インストールの準備">
（スワップパーティションをアクティブに）         # <i>swapon /dev/hdax</i>
（ルートパーティションをマウント）               # <i>mount /dev/hdax /mnt/gentoo</i>
（ブートマウントポイントを作成）                 # <i>mkdir /mnt/gentoo/boot</i>
（ブートパーティションをマウント）               # <i>mount /dev/hdax /mnt/gentoo/boot</i>
（マウントポイントに移動）                       # <i>cd /mnt/gentoo</i>
（stage tarballを展開）                       # <i>tar -xvjpf /mnt/cdrom/stages/stage?-*.tar.bz2</i>
（<comment>もしくは</comment> 最新のtarballをダウンロード…）     # <i>links http://gentoo.oregonstate.edu/releases/x86/1.4/</i>
（                                 …展開）      # <i>tar -xvjpf stage*</i>
（GRPのみ：Portageツリーを展開）               # <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 -C /mnt/gentoo/usr</i>
（GRPのみ：distfileをコピー）                  # <i>cp -R /mnt/cdrom/distfiles /mnt/gentoo/usr/portage/distfiles</i>
（GRPのみ：パッケージをコピー）                  # <i>cp -a /mnt/cdrom/packages /mnt/gentoo/usr/portage/packages</i>
（ミラーサイトを選択）                           # <i>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/make.conf</i>
（ネームサーバの情報をコピー）                   # <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
（procファイルシステムをマウント）              # <i>mount -t proc proc /mnt/gentoo/proc</i>
（新しい環境にChroot）                          # <i>chroot /mnt/gentoo /bin/bash</i>
（必要な環境変数をロード）                      # <i>env-update; source /etc/profile</i>
（ネットワークのみ、GRPは必要なし：Portageのアップデート）
　　　　　　　　　　　　　　　　　　　　　　　　# <i>emerge sync</i>
</pre>

<p>
それではGentooをインストールします：
</p>

<pre caption = "Gentooのインストール">
（USEやCFLAGS、CXXFLAGSを変更。Stage1はCHOSTも変更できます）   # <i>nano -w /etc/make.conf</i>
（Stage1のみ：ブートストラップシステム）                           # <i>cd /usr/portage; scripts/bootstrap.sh</i>
（Stage1、2のみ：ペースシステムのインストール）                    # <i>emerge system</i>
</pre>

<p>
次は必要な情報のセットアップです：
</p>

<pre caption = "各種設定ファイルのセットアップ">
（タイムゾーンの設定）                        # <i>ln -sf /usr/share/zoneinfo/path/to/timezonefile /etc/localtime</i>
（fstabファイルの編集）                      # <i>nano -w /etc/fstab</i>
</pre>

<p>
<path>/etc/fstab</path>を編集するときに、<e>template</e>として以下を使います（設定が必要です。そのままコピーしないでください）：
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;                  &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/hdax               /boot           ext3            noauto,noatime          1 2
/dev/hdax               /               reiserfs        noatime                 0 1
/dev/hdax               none            swap            sw                      0 0
/dev/cdroms/cdrom0      /mnt/cdrom      iso9660         noauto,ro,user          0 0
none                    /proc           proc            defaults                0 0
none                    /dev/shm        tmpfs           defaults                0 0
/dev/hdax               /mnt/dosc       ntfs            ro,noatime,umask=0222   0 0
</pre>

<p>
Linuxカーネルをインストールします：
</p>

<pre caption="カーネルのインストール">
（カーネルソースのインストール）                           # <i>emerge -k sys-kernel/gentoo-sources</i>
（genkernelを使ってカーネルの設定）                      # <i>emerge -k genkernel; genkernel</i>
（<comment>もしくは</comment> (1) マニュアルでカーネルを構築）               # <i>cd /usr/src/linux; make menuconfig;</i>
（   (2) VM fs、/proc fs、/dev fs、/dev fs auto mount at bootを含める）
（   (3) カーネルをコンパイル）                           # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
（   (4) カーネルのコピー）                               # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
その他必要となりそうなツールのインストール：
</p>

<pre caption = "Install important system tools">
（システムロガーをインストール；選択：sysklogd、metalog、msyslog、syslog-ng）   # <i>emerge -k app-admin/syslog-ng </i>
（ブート時に自動的にスタートするようにする）                                         # <i>rc-update add syslog-ng default</i>
（cronデーモンをインストール；選択：vcron、dcron、fcron）                         # <i>emerge -k sys-apps/vcron</i>
（ブート時に自動的にスタートするようにする）                                         # <i>rc-update add vcron default</i>   
（genkernelユーザのみ：hotplugをインストール）                                    # <i>emerge -k hotplug</i>
（genkernelユーザのみ：ブート時に自動的にスタートするようにする）                  # <i>rc-update add hotplug default</i>
（ext2、ext3ユーザは必要なし；選択：reiserfsprogs、xfsprogs、jfsutils）       # <i>emerge -k reiserfsprogs</i>
</pre>

<p>
モジュールに特化したカーネルのebuildが必要であれば、今がインストールするのにはいいタイミングです：
</p>

<pre caption = "モジュールに特化したカーネルのebuildをインストール">
# <i>emerge -k pcmcia-cs</i>（もしくは<i>emu10k1</i>、<i>nforce-net</i>、<i>nforce-audio</i>、<i>e100</i>、<i>e1000</i>、<i>ati-drivers</i>、<i>rp-pppoe</i>）
# <i>VIDEO_CARDS="yourcard" emerge xfree-drm</i>   （9200以下のATI Radeon、Rage128、Matrox、Voodooやその他のカード）
</pre>

<p>
Gentooシステムの設定を完了させます：
</p>

<pre caption = "設定を完了します">
（ルートパスワードの設定）                               # <i>passwd</i>
（ユーザを作成）                                         # <i>useradd your_user -m -G users,wheel,audio -s /bin/bash</i>
（作成したユーザ用のパスワードを設定）                   # <i>passwd your_user</i>
（ホストネームの設定）                                   # <i>echo mymachine &gt; /etc/hostname</i>
（ドメインネームの設定）                                 # <i>echo mydomain.com &gt; /etc/dnsdomainname</i>
（hostsファイルの設定、少なくとも"127.0.0.1 mymachine"は設定する)  # <i>nano -w /etc/hosts</i>
</pre>

<pre caption = "ネットワークの設定">
（ネットワークの設定；DHCPユーザは iface_eth0="dhcp"と設定）    # <i>nano -w /etc/conf.d/net</i>
（スタートアップ時にロードされるモジュールをリスト）                # <i>nano -w /etc/modules.autoload.d/kernel-2.4</i>
（基本的なシステムの設定；コメントに従って）                        # <i>nano -w /etc/rc.conf</i>
（PCMCIA以外：ブート時に自動的にスタートする）                     # <i>rc-update add net.eth0 default</i>
（複数のネットワークインタフェースを持っている人は次へ：）
　(1) それぞれのインタフェース用のinitスクリプトを作成）          # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
　(2) PCMCIAでなければ自動的にブート時にスタートするようにする）  # <i>rc-update add net.ethx default</i>
（PCMCIAのみ：/etc/conf.d/pcmciaを確認し、ブート時にPCMCIAをスタートするようにする） 
　　　　　　　　　　　　　　       　　     　　　　　　　　　　　　# <i>rc-update add pcmcia boot</i>
</pre>

<p>
次にブートローダーをインストールします。左側はgrub、右側はliloです：
</p>

<pre caption = "ブートローダーのインストールと設定">
# <i>emerge -k grub</i>                                          | # <i>emerge -k lilo</i>
# <i>grub</i>                                                    | # <i>nano -w /etc/lilo.conf</i>
grub&gt; <i>root (hd0,0)</i>   (Boot partition)                     |  boot=/dev/hda
grub&gt; <i>setup (hd0)</i>    (Install on MBR)                     |  prompt 
grub&gt; <i>quit</i>                                                |  timeout=50
# <i>nano -w /boot/grub/grub.conf</i>                            |  default=gentoo
  default 0                                               |  
  timeout 15                                              |  <comment># genkernelを使った人：</comment>
  splashimage=(hd0,0)/grub/splash.xpm.gz                  |  image=/boot/kernel-<comment>&lt;kernel version&gt;</comment>
                                                          |    root=/dev/hda3
  title=Gentoo Linux                                      |    label=gentoo
    root (hd0,0)                                          |  
  <comment># genkernelを使った人：</comment>                                         |  <comment># genkernelを使わなかった人：</comment>
    kernel (hd0,0)/kernel-<comment>&lt;kernel version&gt;</comment> root=/dev/hda3 |  image=/boot/bzImage
    initrd (hd0,0)/initrd-<comment>&lt;kernel version&gt;</comment>                |    root=/dev/hda3
  <comment># genkernelを使わなかった人：</comment>                                   |    label=gentoo
    kernel (hd0,0)/bzImage                                | 
                                                          |  <comment># デュアルブート用：</comment>
     <comment># デュアルブート用：</comment>                                               |  other=/dev/hda<comment>X</comment>
  title=Windows XP                                        |    label=windows
    root (hd0,5)                                          | 
    chainloader (hd0,5)+1                                 | # <i>/sbin/lilo</i> 
</pre>

<p>
全てのパーティションのマウントを解除し、リブートします：
</p>

<pre caption="終了とGUIのインストール">
（設定ファイルの更新）                          # <i>etc-update</i>
（chrootから抜ける）                           # <i>exit; cd /</i>
（パーティションのマウント解除）                # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
（リブート；インストールCDを取り出しておく）   # <i>reboot</i>
（リブートした後：）
（ADSLユーザのみ）                             # <i>adsl-setup</i>
（GRPユーザのみ、CD2を使用）
（  (1) CD2をマウント)                     # <i>mount /dev/cdrom /mnt/cdrom</i>  
（  (2) パッケージをコピー）                    # <i>cp -a /mnt/cdrom/packages/* /usr/portage/packages/</i>
（  (3) ソフトウェアをインストール）            # <i>emerge -k xfree gnome kde mozilla openoffice-bin</i>
（  (4) Xの設定）                               # <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>
より詳細な情報は<uri link="http://www.gentoo.org/doc/en/index.xml">Gentoo Documentation</uri>で見ることができます。
</p>
</body></chapter>	

</guide>
