<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/ja/gentoo-x86-quickinstall.xml,v 1.5 2005/01/30 11:17:13 nakano Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/ja/gentoo-x86-quickinstall.xml">
<title>Gentoo Linuxインストールリファレンス</title>
<author title="Author">Steven Wagner</author>
<author title="Editor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="翻訳">
  <mail link="konno.katsuyuki@nifty.com">今野勝之</mail>
</author>
<author title="翻訳">
  <mail link="solidsneak@hyper.cx">小林弘樹</mail>
</author>

<abstract>
クイックインストールリファレンスは、簡単にインストールする際の手順の詳細をすべてカバーしています。このガイドに従ってインストールする場合、Gentoo Linuxのインストールを経験している必要があります。
</abstract>

<license/>

<version>1.23</version>
<date>2005-01-22</date>
<!-- Original revision: 1.28 -->

<chapter>
<title>クイックインストールリファレンス</title>
<section>
<body>

<p>
インストールCDイメージは<uri link=
"http://www.gentoo.org/main/en/mirrors.xml">Gentoo Mirrors</uri>にあります。
それぞれのCDの詳細な説明については<uri link="http://store.gentoo.org">Gentoo Store</uri>で見ることができます。
universal CDはInternetへの接続なしで、Gentoo Linuxを素早くインストールするために必要なもの全てが含まれています。
Package CDはオプションとしてKDEやGNOME、OpenOffice、Mozilla、Evolutionなどといったコンパイル済みのパッケージが含まれています。
</p>

<p>
まずUniversal CDからブートします。どんなブートオプションが利用可能かを確認するには、&lt;F1&gt;または&lt;F2&gt;を押します。
デフォルト設定のカーネルで続行する場合は、ブートスクリーンが表示されているときに&lt;ENTER&gt;を押します(訳注:<c>日本語キーボード(非USキーボード)の場合</c>は、&lt;ENTER&gt;を押した後にプログレスバーが表示されるブートスクリーンにおいて、<c>確実にF2キーを押し</c>、詳細モードへ移行してください。その後、キーボード選択メニューが表示されますので、プロンプトの指示に従ってキーボードを指定してください)。
ブート後プロンプトが表示されます。
</p>

<pre caption="設定開始">
# <i>date</i>  (日付、時間が正しいかを確認します。もし間違っているようであれば、<i>date MMDDhhmmCCYY</i>で設定します )
# <i>modprobe module_name</i>  (オプション − 必要なモジュールをロードします)
# <i>net-setup eth0</i> (ネットワークを設定します)
# <i>fdisk /dev/hda</i> (ドライブを分割します)
</pre>

<p>
推奨されるセットアップは、ファイルシステムがext2で64Mのブートボリューム、メモリの2倍のサイズのスワップパーティション、そして残りがReiserFSでルートパーティションという構成です。
</p>

<p>
<c>mke2fs</c>(Ext2)、<c>mke2fs -j</c>(Ext3)、<c>mkreiserfs</c>(ReiserFS)、<c>mkfs.xfs</c>(XFS)、<c>mkfs.jfs</c>(JFS)、<c>mkswap</c>(スワップパーティション)を使ってパーティションを初期化します。
例：<c>mke2fs -j /dev/hda3</c>
</p>

<p>
パーティションをマウントし、適切なstageファイルを展開します。
</p>

<pre caption="インストールの準備">
(スワップパーティションをアクティブに)  # <i>swapon /dev/hdax</i>
(ルートパーティションをマウント)       # <i>mount /dev/hdax /mnt/gentoo</i>
(ブートマウントポイントを作成)         # <i>mkdir /mnt/gentoo/boot</i>
(ブートパーティションをマウント)       # <i>mount /dev/hdax /mnt/gentoo/boot</i>
(マウントポイントに移動)              # <i>cd /mnt/gentoo</i>
(stage tarballを展開)               # <i>tar -xvjpf /mnt/cdrom/stages/stage&lt;your stage&gt;.tar.bz2</i>
(<comment>もしくは</comment> 最新のtarballをダウンロード...) 
                                   # <i>links http://www.gentoo.org/main/en/mirrors.xml</i>
(    ... 展開)                      # <i>tar -xvjpf stage&lt;your stage&gt;.tar.bz2</i>
(自由選択: Portageツリーを展開)       # <i>tar -xvjf /mnt/cdrom/snapshots/portage-*.tar.bz2 \
                                     -C /mnt/gentoo/usr</i>
(自由選択: distfileをコピー)         # <i>cd /mnt/gentoo/usr/portage; mkdir distfiles;</i>
                                   # <i>cp /mnt/cdrom/distfiles/* distfiles/</i>
(ミラーサイトを選択)                 # <i>mirrorselect -a -s4 -o | grep 'GENTOO_MIRRORS=' \
                                      &gt;&gt; /mnt/gentoo/etc/make.conf</i>
(ネームサーバの情報をコピー)          # <i>cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
(procファイルシステムをマウント)      # <i>mount -t proc none /mnt/gentoo/proc</i>
(新しい環境にchroot)                # <i>chroot /mnt/gentoo /bin/bash</i>
(必要な環境変数をロード)             # <i>env-update; source /etc/profile</i>
(ネットワークのみ、GRPは必要なし: Portageのアップデート)
                                  # <i>emerge --sync</i>
</pre>

<p>
それではGentooをインストールします。
</p>

<pre caption = "Gentooのインストール">
(USEやCFLAGS、CXXFLAGSを変更。Stage1はCHOSTも変更できます)  
                                  # <i>nano -w /etc/make.conf</i>
(Stage1のみ：ブートストラップシステム)# <i>cd /usr/portage; scripts/bootstrap.sh</i>
(Stage1、2のみ：ペースシステムのインストール)
                                  # <i>emerge system</i>
</pre>

<p>
次は必要な情報のセットアップです。
</p>

<pre caption = "各種設定ファイルのセットアップ">
(タイムゾーンの設定)    # <i>ln -sf /usr/share/zoneinfo/<comment>&lt;path to time zone file&gt;(訳注:Japan)</comment> /etc/localtime</i>
(fstabファイルの編集)  # <i>nano -w /etc/fstab</i>
</pre>

<p>
<path>/etc/fstab</path>を編集するときに、<e>template</e>として以下を使います(設定が必要です。そのままコピーしないでください)。
</p>

<pre caption="/etc/fstab">
# &lt;fs&gt;          &lt;mountpoint&gt;    &lt;type&gt;          &lt;opts&gt;                  &lt;dump/pass&gt;
/dev/hdax       /boot           ext2            defaults,noatime        1 2
/dev/hdax       none            swap            sw                      0 0
/dev/hdax       /               reiserfs        noatime                 0 1
/dev/cdroms/cdrom0 /mnt/cdrom   auto            noauto,user             0 0
none            /proc           proc            defaults                0 0
none            /dev/shm        tmpfs           nodev,nosuid,noexec     0 0
</pre>

<p>
Linuxカーネルをインストールします。
</p>

<pre caption="カーネルのインストール">
(カーネルソースのインストール)   # <i>emerge <comment>&lt;カーネルのパッケージ名&gt;</comment></i>
(genkernelを使ってカーネルの設定...) 
                             # <i>emerge genkernel; genkernel --menuconfig all</i>
(<comment>もしくは</comment> (1) カーネルを手動構築)
                             # <i>cd /usr/src/linux; make menuconfig;</i>
(   (2) VM fs、/proc fs、/dev fs、/dev fs auto mount at bootを含める)
(   (3) カーネルをコンパイル) 
           (2.4カーネル)      # <i>make dep &amp;&amp; make clean bzImage modules modules_install</i>
           (2.6カーネル)      # <i>make &amp;&amp; make modules_install</i>
(   (4) カーネルのコピー)      # <i>cp arch/i386/boot/bzImage /boot; cp System.map /boot</i>
</pre>

<p>
その他必要となりそうなツールをインストールします。
</p>

<pre caption = "重要なシステムツールのインストール">
(システムロガーをインストール: sysklogd、metalog、msyslog、syslog-ngから選択) 
                                             # <i>emerge syslog-ng </i>
(ブート時に自動的にスタートするようにする)
                                             # <i>rc-update add syslog-ng default</i>
(cronデーモンをインストール: vcron、dcron、fcronから選択)                
                                             # <i>emerge vixie-cron</i>
(ブート時に自動的にスタートするようにする)
                                             # <i>rc-update add vixie-cron default</i>   
(genkernelユーザのみ: hotplugをインストール)    # <i>emerge hotplug</i>
(genkernelユーザのみ: ブート時に自動的にスタートするようにする)     
                                             # <i>rc-update add hotplug default</i>
(ext2、ext3ユーザは必要なし: reiserfsprogs、xfsprogs、jfsutilsから選択)  
                                             # <i>emerge reiserfsprogs</i>
(自由選択: DHCPクライアントのインストール client) # <i>emerge dhcpcd</i> 
(ドメイン名initスクリプト)                      # <i>rc-update add domainname default</i>
</pre>

<p>
モジュールに特化したカーネルのebuildが必要であれば、今がインストールするのにはいいタイミングです。
</p>

<pre caption = "モジュールに特化したカーネルのebuildをインストール">
# <i>emerge pcmcia-cs</i> (もしくは<i>nforce-net</i>、<i>nforce-audio</i>、<i>e100</i>、<i>e1000</i>、<i>ati-drivers</i>、<i>rp-pppoe</i>)
# <i>VIDEO_CARDS="yourcard" emerge x11-drm</i>   (9200以下のATI Radeon、Rage128、
                                                    Matrox、Voodooやその他のカード)
</pre>

<p>
Gentooシステムの設定を完了させます。
</p>

<pre caption = "設定を完了します">
(ルートパスワードの設定)            # <i>passwd</i>
(ユーザを作成)                    # <i>useradd your_user -m -G users,wheel,audio -s /bin/bash</i>
(作成したユーザ用のパスワードを設定) # <i>passwd your_user</i>
(ホストネームの設定)               # <i>echo mymachine &gt; /etc/hostname</i>
(ドメインネームの設定)             # <i>echo mydomain.com &gt; /etc/dnsdomainname</i>
(hostsファイルの設定、例:"127.0.0.1 localhost mymachine")  
                                # <i>nano -w /etc/hosts</i>
(ベーシックシステム設定; コメントに従う)       
                                # <i>nano -w /etc/rc.conf</i>
</pre>

<pre caption = "ネットワークの設定">
(ネットワークの設定; DHCPユーザは iface_eth0="dhcp"と設定)      
                              # <i>nano -w /etc/conf.d/net</i>
(起動時にロードされるモジュールをリスト)
                              # <i>nano -w /etc/modules.autoload.d/kernel-<comment>&lt;version&gt;</comment></i>
(PCMCIA以外: ブート時に自動的に起動する)        
                              # <i>rc-update add net.eth0 default</i>
(複数のネットワークインタフェースを持っている人のみ)
   (1) それぞれのインタフェース用のinitスクリプトを作成)                    
                              # <i>ln -s /etc/init.d/net.eth0 /etc/init.d/net.ethx</i>
   (2) PCMCIAでなければ自動的にブート時にスタートするようにする)
                              # <i>rc-update add net.ethx default</i>
(PCMCIAのみ: /etc/conf.d/pcmciaを確認し、ブート時にPCMCIAをスタートするようにする) 
                               # <i>rc-update add pcmcia default</i>
</pre>

<p>
次にブートローダーをインストールします。
</p>

<pre caption="GRUBのインストールと設定">
# <i>emerge grub</i>
# <i>grub</i>
grub&gt; <i>root (hd0,0)</i>
grub&gt; <i>setup (hd0)</i>
grub&gt; <i>quit</i>
# <i>nano -w /boot/grub/grub.conf</i>
default 0
timeout 15
splashimage=(hd0,0)/grub/splash.xpm.gz

title=Gentoo Linux
  root (hd0,0)
  <comment># genkernelを使った人</comment>
  kernel /kernel-<comment>&lt;kernel version&gt;</comment> root=/dev/ram0 init=/linuxrc real_root=/dev/hda3 ramdisk=8192
  initrd /initrd-<comment>&lt;kernel version&gt;</comment>
  <comment># genkernelを使わなかった人</comment>
  kernel /kernel-<comment>&lt;kernel version&gt;</comment> root=/dev/hda3
</pre>

<pre caption="LILOのインストールと設定">
# <i>emerge lilo</i>
# <i>nano -w /etc/lilo.conf</i>
boot=/dev/hda
prompt
timeout=50
default=gentoo

image=/boot/kernel-<comment>&lt;kernel version&gt;</comment> 
  label=gentoo
  read-only
  <comment># genkernelを使った人</comment>
  append="init=/linuxrc real_root=/dev/hda3 ramdisk=8192"
  root=/dev/ram0
  initrd=/boot/initrd-<comment>&lt;kernel version&gt;</comment>
  <comment># genkernelを使わなかった人</comment>
  root=/dev/hda3

# <i>/sbin/lilo</i>
</pre>

<p>
全てのパーティションのマウントを解除し、リブートします。
</p>

<pre caption="(Gentooの)インストールの終了とGUIのインストールの終了">
(chrootから抜ける)              # <i>exit; cd /</i>
(パーティションのマウント解除)    # <i>umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo</i>
(リブート; universal CDを取り出しておく 
                                   # <i>reboot</i>
(リブートした後)
(ADSLユーザのみ)                # <i>adsl-setup</i>
(GRPユーザのみ)
   (1) Package CDをマウント     # <i>mount /dev/cdrom /mnt/cdrom</i>  
   (2) パッケージをコピー         # <i>mkdir /usr/portage/packages</i>
                              # <i>cp -a /mnt/cdrom/* /usr/portage/packages/</i>
   (3) ソフトウェアをインストール # <i>USE="bindist" emerge -k xfree gnome kde mozilla openoffice-bin</i>
   (4) Xサーバの設定              # <i>/usr/X11R6/bin/xf86config</i>
</pre>

<p>
より詳細な情報は<uri link="http://www.gentoo.org/doc/en/index.xml">Gentoo Documentation</uri><uri link="http://www.gentoo.org/doc/ja/index.xml">(日本語訳)</uri>で見ることができます。
</p>
</body>
</section>
</chapter>
</guide>
