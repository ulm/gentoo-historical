<?xml version='1.0' encoding='UTF-8'?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fi/guide-localization.xml,v 1.4 2005/02/24 18:41:24 flammie Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/fi/guide-localization.xml" lang="fi">
<title>Gentoon paikallisasetusopas</title>
<author title="Tekijä">
  Alexander Holler
</author>
<author title="Kääntäjä-toimittaja">
  <mail link="slucy@uchicago.edu">Steven Lucy</mail>
</author>
<author title="Toimittaja">
  <mail link="bennyc@gentoo.org">Benny Chuang</mail>
</author>
<author title="Toimittaja">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Toimittaja">
  <mail link="dertobi123@gentoo.org">Tobias Scherbaum</mail>
</author>
<author title="Vastuullinen kääntäjä ja toimittaja">
  <mail link="flammie@gentoo.org">Flammie Pirinen</mail>
</author>
<abstract>
Tässä oppaassa kerrotaan kuinka Gentoon voi asettaa Suomalaisia standardeja
vastaaviin paikallisasetuksiin ja ohjelmat saa suomenkielisiksi (tai mille
tahansa muullekin kielelle ja maalle). Tämä on käännetty saksalaisen
alkuperäisen dokumentin englanninkielisestä käännöksestä. Mukana myös
tieto siitä, miten eurot saa toimimaan valuuttasymbolina.
</abstract>

<version>1.13</version>
<date>2005-02-05</date>

<chapter>
<title>Aikavyöhyke</title>
<section>
<body>

<p>
Jotta aika toimisi oikein, tiedosto <path>/etc/localtime</path> pitää linkittää
oikeaan aikavyöhykedataan. Hakemiston
<path>/usr/share/zoneinfo/</path> alta pitäisi löytyä jokseenkin sopiva
suurkaupunki samalta aikavyöhykkeeltä.
</p>

<pre caption="Aikavyöhykkeen asettaminen">
# <i>ln -sf /usr/share/zoneinfo/Europe/Helsinki /etc/localtime</i>
# <i>date</i>
la helmikuun  5. 18:14:29 EET 2005
</pre>

<note>
Varmista, että aikavyöhykelyhenne on oikea (EEST kesäaikaan ja EET talviaikaan
Itä-Euroopan kesäaikavaihteluvyöhykkeellä).
</note>

<note>
Ympäristömuuttujan <c>TZ</c> voi asettaa shellin rc-tiedostossa (esim.
<path>.bash_profile</path> bashissa) miksi tahansa hakemistopoluksi hakemiston
<path>/usr/share/zoneinfo</path> jälkeen.  Tässä tapauksessa siis vaikkapa
<c>TZ="Europe/Helsinki"</c>.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Järjestelmän kello</title>
<section>
<body>

<p>
Useimmissa Gentoo Linux -järjestelmissä järjestelmän kello asetetaan
UTC-vyöhykeaikaan (tai GMT-vyöhykeaikaan, Greenwichin mediaaniajaksi),
ja tämän jälkeen järjestelmä käyttää aikavyöhyketietoa laskeakseen
paikallisajan. Jos kuitenkin järjestelmäkello on jossain muussa kuin
UTC-vyöhykeajassa, täytyy muuttaa muuttujan <c>CLOCK</c> arvoa tiedostossa
<path>/etc/rc.conf</path>.
</p>

<pre caption="paikallinen tai GMT-aika">
<codenote>suositellaan:</codenote>
CLOCK="UTC"
<codenote>tai:</codenote>
CLOCK="local"
</pre>

</body>
</section>
</chapter>

<chapter>

<title>Locale-järjestelmä</title>
<section>
<title>Mitä localet ovat</title>
<body>

<p>
Locale on paikallisasetusto, joka sisältää tietoa maa- ja kielikohtaisista
asetuksista. Localet ovat osa järjestelmäkirjastoa, ja löytyvät useimmissa
järjestelmissä hakemistosta <path>/usr/share/locale</path>. Localen nimi
on yleensä muotoa
<c>ab_CD</c>, missä
<c>ab</c> on kaksi- kolmikirjaiminen kielitunnus (määritelty standardissa
ISO-639), ja
<c>CD</c> maan koodi (määritelty standardissa ISO-3199). Suomeksi aiheeseen
liittyvää asiaa on laajalti Kotimaisten kielten tutkimuskeskuksen <uri
link="http://www.kotoistus.fi">kotoistus-projektin</uri>
(kotoistus yrittänee olla yleiskielinen muoto engl. localizationista)
sivuilla.
</p>

</body>
</section>
<section>
<title>Ympäristömuuttujat localeille</title>
<body>

<p>
Localetietoja säilytetään ympäristömuuttujissa. Nämä tyypillisesti
asetetaan tiedostossa <path>/etc/env.d/02locale</path>
(järjestelmänlaajuisille asetuksille) ja
<path>~/.bashrc</path> (käyttäjäkohtaisille asetuksille).
Allaolevaan taulukkoon on kerätty muuttujia, joilla muutetaan eri
paikallisasetuksia. Taulukossa ylhäällä ovat ne, jotka ovat voimakkaimpia
asetuksia ja yliajavat alempana olevat. Kaikkien muuttujien arvoiksi asetetaan
localen nimi muodossa <c>ab_CD</c>, joka kuvattiin aiempana.
</p>

<table>
<tr>
  <th>Muuttuja</th>
  <th>Selvitys</th>
</tr>
<tr>
  <ti>LC_ALL</ti>
  <ti>
    Määrittelee kaikki paikallisasetukset kerralla. Tällä asetuksella myös
    ylikirjoiteaan kaikki muut mahdolliset asetukset.
  </ti>
</tr>
<tr>
  <ti>LC_COLLATE</ti>
  <ti>
    Määrittelee aakkostusjärjestyksen eri tilanteisiin. Huomaa, että suomalainen
    aakkostusjärjestys ei erottele kirjaintason mukaan, ja lisäksi käsitellään
    w=v, š=s, ja aksentilliset merkit kuin ne olisivat ilman aksenttia.
  </ti>
</tr>
<tr>
  <ti>LC_CTYPE</ti>
  <ti>
    Määrittelee merkkien ominaisuusjärjestelmän. Tämä vaikuttaa siihen, mitkä
    merkit ohjelmat käsittelevät aakkosmerkkeinä, mitkä numeroina ja mitkä
    erikoisemerkkeinä. Tämä saattaa myös määritellä käytettävän
    merkistökoodauksen. Suomessahan aakkosia ovat latinalaiset merkit a—ö
    ja monet aksentilliset latinalaiset aakkoset, numeroita ovat 0—9.
  </ti>
</tr>
<tr>
  <ti>LC_MESSAGES</ti>
  <ti>
    Määrittelee viestipohjaisesti kotoistettujen ohjelmien viestiarkiston.
    Viestipohjaista kotoistusmekaniikkaa käyttävät valtaosa mm. Gnu-pohjaisista
    ohjelmista, lisätietoa tästä jäljempänä.
  </ti>
</tr>
<tr>
  <ti>LC_MONETARY</ti>
  <ti>
    Määrittelee valuuttayksiköt ja raha-arvojen tulostustavan. Suomessahan
    valuuttasymboli on €, ja se tulostetaan numeron ja välilyönnin jälkeen:
    123 €.
  </ti>
</tr>
<tr>
  <ti>LC_NUMERIC</ti>
  <ti>
    Määrittelee ei-raha-arvo-numeroiden tulostustavan. Tämä vaikuttaa
    tuhat- ja desimaalierottimiin, kuten suomessa satakaksikymmentäkolmetuhatta
    neljäsataaviisikymmentäkuusi ja seitsemänsataakahdeksankymmentäyhdeksän
    tuhannesosaa voidaan kirjoittaa 123 456,789.
  </ti>
</tr>
<tr>
  <ti>LC_TIME</ti>
  <ti>
    Määrittelee päivämäärien ja kellonaikojen tulostustavan, suomessa
    oletusarvo ajalle ja päivämäärälle on nyt muotoa
    la helmikuun  5. 18:14:29 EET 2005, mutta tämä on muuttumassa tuleviin
    glibc-versioihin.
  </ti>
</tr>
<tr>
  <ti>LC_PAPER</ti>
  <ti>Määrittelee paperikoot. Suomalainen oletus on A4.</ti>
</tr>
<tr>
  <ti>LANG</ti>
  <ti>
    Määrittelee kaikki asetukset kerralla. Tätä asetusta voi tarkentaa
    ylläolevilla LC_*-arvoilla, jotka ylikirjoittavat tämän asetuksen
    tapauskohtaisesti.
  </ti>
</tr>
</table>

<p>
Yleisimmin käyttäjät asettanevat vain
LANG-muuttujan ja ehkäpä LC_CTYPE-muuttujan omiin asetuksiinsa
shellin käynnistystietoihin muokkaamalla:
 </p>

<pre caption="Paikallisasetuksen asettaminen">
export LANG="fi_FI@euro"
</pre>

<note>
Lisäämällä <c>@euro</c>n saa käyttöönsä euron symbolin (&#8364;)
valuuttamerkkinä.
</note>

<p>
Viestipohjaisesti kotoistetut sovellukset saadaan toimimaan vasta kääntämällä
ne <c>nls</c>-flägi (engl. Native Language Support) päällä. Useimmat näistä
ohjelmista tarvitsevat myös gettext-kirjaston lukeakseen kotoistetut viesti.
Tietenkin Portage hoitaa gettextin asennuksen tarvittaessa automaattisesti.
</p>

</body>
</section>
<section>
<title>Uusien localejen luominen</title>
<body>

<p>
Jos tarvitaan localea, joka ei ole saatavilla valmiiksi, pitää käyttää
<c>localedef</c>iä sen luomisessa:
</p>

<pre caption="Uuden localen luonti localedefillä">
# <i>localedef -c -i fi_FI -f UTF-8 fi_FI.UTF-8</i>
</pre>

<p>
Kun locale on luotu, sen voi asettaa LANG-muuttujaan.
</p>

<pre caption="LANG-muuttujan asettaminen">
# <i>export LANG="fi_FI.UTF-8"</i>
</pre>

</body>
</section>
<section>
<title>Userlocales USE-asetus</title>
<body>

<p>
Tyypillisessä järjestelmässä tarvinnee vain yhtä kahta localea. Aiemmin
niistä käännettiin jokaisessa <c>glibc</c>:n asennuksessa kaikki mahdolliset.
Nykyisin voi aktivoida <c>userlocales</c> USE-asetuksen ja määritellä
tarvittavat localet tiedostoon <path>/etc/locales.build</path>.
</p>

<pre caption="Aktivoi userlocales-asetus vain glibc:lle">
echo "sys-libs/glibc userlocales" >> /etc/portage/package.use
</pre>

<p>
Seuraavaksi määritellään käytettävät paikallisasetustot:
</p>

<pre caption="/etc/locales.buildin muokkaus">
fi_FI/ISO-8859-1
fi_FI@euro/ISO-8859-15
fi_FI.UTF-8/UTF-8
sv_FI/ISO-8859-1
sv_FI@euro/ISO-8859-15
sv_FI.UTF-8/UTF-8
en_GB/ISO-8859-1
en_GB.UTF-8/UTF-8
</pre>

<p>
Seuraavaksi uudelleenkäännetään <c>glibc</c>. Tämän voi toki tehdä
tuonnempanakin, kunhan seuraava päivitys tulee.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Näppäimistöasettelu konsolille</title>
<section>
<body>

<p>
Näppäimistöasettelua konsoliympäristössä määrittelee <c>KEYMAP</c>-muuttuja
tiedostossa <path>/etc/rc.conf</path>. Käytettävät arvot löytyvät hakemistoista
<path>/usr/share/keymaps/<c>{arch}</c>/</path>.
<path>i386</path>-arkkitehtuurissa on vielä alihakemistoja asettelujen
mukaan lisääkin (<path>qwerty/</path>, <path>azerty/</path>, jne.).
Monille kielille on useita valintoja, joista kannattaa kokeilla parasta.
Tyypillisin suomelle käytettävä asetus lienee fi-latin9.
</p>

<pre caption="Konsolin näppäinasettelun valinta">
KEYMAP="fi"
KEYMAP="fi-latin1"
KEYMAP="fi-latin9-nodeadkeys"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Näppäinasettelun valinta X-palvelimelle</title>
<section>
<body>

<p>
X:n näppäinasettelu määritellään tiedostossa <path>/etc/X11/XF86Config</path>
asetuksella <c>XkbLayout</c>.
</p>

<pre caption="X:n näppäinkartan asettaminen">
 Section "InputDevice"
     Identifier  "Keyboard1"
     ...
     Option "XkbLayout"    "fi, us"
     # Option "XkbVariant"  "nodeadkeys"
     ...
</pre>

</body>
</section>
</chapter>

<chapter>
<title>KDE</title>
<section>
<body>

<p>
KDE:lle pitää asentaa <c>kde-i18n</c>-paketti sopivalla
LINGUAS-ympäristömuuttujalla ryyditettynä:</p>

<pre caption="Suomennetun kde:n asennus">
# <i>LINGUAS="fi" emerge kde-i18n</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Euron symboli konsoliympäristöön</title>
<section>
<body>

<p>
Konsolin käyttöön euron saa kun asettaa <c>CONSOLEFONT</c>-muuttujan
tiedostossa <path>/etc/rc.conf</path> sellaiseksi, jossa on euron symboli.
Vaihtoehdot ovat hakemistossa
<path>/usr/share/consolefonts/</path> (pääte <c>.psfu.gz</c> jätetään
asetuksesta pois). Fontissa <c>lat9w-16</c> on euron symboli.
</p>

<pre caption="Konsolifontin asettaminen">
CONSOLEFONT="lat9w-16"
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Euron symboli X:ään</title>
<section>
<title>Useimmille ohjelmille</title>
<body>

<p>
Euron saanti X-ympäristöön on hieman hankalampaa. Ensin pitää muuttaa
<c>fixed</c>- ja <c>variable</c>-fonttimääritelmiä tiedostossa
<path>/usr/X11R6/lib/X11/fonts/misc/fonts.alias</path>
<c>iso8859-15</c>-loppuisiksi <c>iso8859-1</c>:n sijaan.
</p>

<pre caption="X:n oletusfonttien asettaminen">
fixed        -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable     -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>

<p>
Jotkin sovellukset käyttävät omia fonttejaan, ja niille pitää erikseen kertoa
fontti josta euro löytyy. Käyttäjäkohtaisesti tämän voi asettaa tiedostossa
<path>.Xdefaults</path> (järjestelmän ylläpitäjä voi kopioida tämän hakemistoon
<path>/etc/skel/</path> uusia käyttäjiä varten). Järjestelmäkohtaisesti asetus
tehdään sovelluksille hakemistoon
<path>/usr/X11R6/lib/X11/app-defaults/</path> (otetaan vaikka xterm). Näissä
tiedostoissa voi muokata näppärästi valmista riviä sen sijaan että joutuisi
keksimään uusia. Xtermin fonttiahan muutettaisiin näin:
</p>

<pre caption="Xtermin fontin muuttaminen">
<codenote>(kotihakemistossa)</codenote>
# <i>echo 'XTerm*font: fixed' >> .Xresources </i>
# <i>xrdb -merge .Xresources</i>
</pre>

</body>
</section>
<section>
<title>Euron symboli (X)Emacsiin</title>
<body>

<p>
Euron saa käyttöön (X)Emacsiin lisäämällä seuraavaa
<path>.Xdefaults</path>iin:
</p>

<pre caption="Emacsin fontin muuttaminen">
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
</pre>

<p>
XEmacsille (muttei tavan Emacsille), täytyy säätää vielä hieman lisää.
Tiedostoon <path>/home/user/.xemacs/init.el</path>, lisätään:
</p>

<pre caption="Fontin asettaminen XEmacsille">
(define-key global-map '(EuroSign) '[&#8364;])
</pre>

<note>
Merkki, joka yllä on hakasuluissa, pitäisi olla euron symboli.
</note>

</body>
</section>
<section>
<title>Kieliasetus OpenOfficelle</title>
<body>

<note>
Mukautettu kieliasetus ei ole saatavissa openoffice-binin ebuildissa. Siinä
oletuskielenä on ENUS (englanti).
</note>

<p>
Huomaa, että tämäkin paketti nykyisin käyttää LINGUAS-ympäristömuuttujaa
kotoistusasetuksissa. Vanhempi ympäristöasetus LANGUAGE=ENUS|FINN <e>ei</e>
enää toimi.
Oletusarvoisesti OpenOfficen kieli on amerikanenglanti. Tämän voi muuttaa
komentoriviltä.
</p>

<pre caption="Openofficen paikalliskielisen version asennus emergellä">
# <i>LINGUAS="fi" emerge openoffice</i>
</pre>

</body>
</section>
</chapter>

</guide>
