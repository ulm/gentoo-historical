<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fi/handbook/hb-portage-files.xml,v 1.2 2004/12/26 15:48:28 flammie Exp $ -->

<sections>

<version>1.5</version>
<date>2004-12-26</date>

<section>
<title>Portagen käyttämät tiedostot</title>
<subsection>
<title>Asetukset</title>
<body>

<p>
Portagen oletusasetukset ovat tiedostossa
<path>/etc/make.globals</path>. Katsellessasi sitä huomannet, että Portagen
kaikki asetukset määrittellään muuttujina. Portagen käyttämät muuttujat
eritellään myöhempänä merkityksineen.
</p>

<p>
Koska jotkin asetukset vaihtelevat arkkitehtuureittain, Portagessa on myös
eräs oletusasetusto profiilissa, johon symbolinen linkki
<path>/etc/make.profile</path> osoittaa. Portagen asetukset ovat tiedostoissa
<path>make.defaults</path> profiilihakemiston ja yliprofiilien hakemistojen
varrella. Profiileista lisää tuonnempana,
silloin myös kerromme mikä hakemisto <path>/etc/make.profile</path>
oikein on.
</p>

<p>
Jos aioit muuttaa asetuksia, <e>älä</e> koskaan muokkaa tiedostoja
<path>/etc/make.globals</path> tai <path>make.defaults</path>.
Tiedosto <path>/etc/make.conf</path> on oikeampi ratkaisu, ja sillä
on myös korkeampi arvo päällekkäisten asetusten ratkonnassa. Samasta paikasta
löytyy myös tiedosto <path>/etc/make.conf.example</path>, joka nimensä
mukaisesti sisältää esimerkkejä. Portage ei itse käytä tätä tiedostoa; siinä
on vain esimerkkejä luettavaksi.
</p>

<p>
Portagen asetuksia voi muuttaa myös saman nimisillä ympäristömuuttujilla, mutta
tällaista tapaa ei suositella.
</p>

</body>
</subsection>
<subsection>
<title>Profiilikohtainen tieto</title>
<body>

<p>
Törmäsimme jo aiempana hakemistoon <path>/etc/make.profile</path> directory.
Tarkkaanottaenhan tämä tosin ei ole hakemisto, vaan symbolinen linkki
profiilihakemistoon, joka oletusarvoisesti on jossakin hakemistossa
<path>/usr/portage/profiles</path>, mutta on toki mahdollista luoda myös oma
profiili ja linkittää siihen. Portage käyttää tämän profiilin osoittamaa
hakemistoa.
</p>

<p>
Profiilissa on arkkitehtuurikohtaista tietoa Portagelle. Tähän lukeutuvat
luettelo paketeista, jotka kuuluvat profiilin ydinjärjesetelmään, luettelo
paketeista, jotka eivät toimi tällä alustalla (tai ovat muutoin estettyjä),
ja niin edelleen.
</p>

</body>
</subsection>
<subsection>
<title>Ohjelmakohtaiset asetukset</title>
<body>

<p>
Kun jonkin ohjelman asentamiseksi pitää muuttaa Portagen käytöstä, on parasta
muokata hakemiston <path>/etc/portage</path> tiedostoja. <e>Suositellaan
erittäin vahvasti</e>, että käytät hakemiston <path>/etc/portage</path>
tiedostoja, <e>etkä käytä</e> ympäristömuuttujia asetusten ylikirjoittamisessa.
</p>

<p>
Hakemistoon <path>/etc/portage</path> voi tehdä ainakin seuraavia tiedostoja:
</p>

<ul>
  <li>
    <path>package.mask</path>iin luetellaan paketit, joita Portagen ei haluta
    asentavan ollenkaan
  </li>
  <li>
    <path>package.unmask</path>iin luetellaan paketit, jotka Portagen
    halutaan asentavan, vaikka Gentoon kehittäjät ovat tämän tarkoituksellisesti
    estäneet
  </li>
  <li>
    <path>package.keywords</path>:iin luetellaan paketit, jotka
    Portegen halutaan asentavan, vaikka pakettia ei ole merkitty sopivaksi
    käytetylle alustalle tai järjestelmälle (vielä)
  </li>
  <li>
    <path>package.use</path>:iin luetellaan USE-asetukset pakettikohtaisesti,
    sikäli kun ne järjestelmänlaajuisista USE-asetuksista poikkeavat.
  </li>
</ul>

<p>
Lisää tietoa hakemistosta <path>/etc/portage</path> ja täysi ajantasainen
luettelo sen tiedostomahdollisuuksista on Portagen man-sivuilla:
</p>

<pre caption="Portagen man-sivun katselu">
$ <i>man portage</i>
</pre>

</body>
</subsection>
<subsection>
<title>Portagen hakemistojen ja tiedostojen sijaintien muuttaminen</title>
<body>

<p>
Edellisen kappaleen asetustiedostoja ei voida tallentaa muualle:
Portage etsii niitä aina vain samoista paikoista. On kuitenkin olemassa
muita hakemistoja ja sijainteja, joita Portage käyttää erinäisiin tarkoituksiin:
buildaushakemisto, lähdekoodivarasto, ohjelmistohakemisto, ...
</p>

<p>
Kaikille näille on tunnetut oletussijainnit, mutta niitä voi mukauttaa maun
mukaan asetustiedostossa <path>/etc/make.conf</path>. Loppukappale erittelee
Portagen erityiset hakemistot, ja miten niiden sijaintia pystytään muuttamaan.
</p>

<p>
Tämä dokumentti ei ole kuitenkaan täysimittainen referenssi, jos haluat
sellaista, katsele Portagen ja <path>make.conf</path>in man-sivuja:
</p>

<pre caption="Portagen ja make.confin man-sivujen tarkastelu">
$ <i>man portage</i>
$ <i>man make.conf</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Tiedostojen säilytys</title>
<subsection>
<title>Portagepuu</title>
<body>

<p>
Portagepuun oletushakemisto on <path>/usr/portage</path>. Tämän kertoo
PORTDIR-muuttuja. Jos Portagepuuta siirretään muualle (muuttujaa muokkaamalla).
pitää symbolinen linkki <path>/etc/make.profile</path> päivittää vastaavasti.
</p>

<p>
Jos PORTDIR-muttujaa muutetaan, seuraaviakin kannattanee tarkistaa, jotta
ne varmasti ovat selvillä muutoksesta. Tämä johtuu Portagen muuttujien
käsittelystä: PKGDIR, DISTDIR ja RPMDIR.
</p>

</body>
</subsection>
<subsection>
<title>Esikäännetyt binäärit</title>
<body>

<p>
Vaikkei Portagen esikäännettyjen binäärien tuki ole oletusarvoisesti päällä,
se on toki saatavilla. Kun Portagea käsketään käyttämään esikäännettyjä
paketteja, se etsii niitä hakemistosta <path>/usr/portage/packages</path>.
Tätä voidaan muuttaa muuttujalla PKGDIR.
</p>

</body>
</subsection>
<subsection>
<title>Lähdekoodit</title>
<body>

<p>
Ohjelmien lähdekoodeja säilytetään hakemistossa
<path>/usr/portage/distfiles</path> oletusarvoisesti. Tätä voidaan muuttaa
muuttujalla DISTDIR.
</p>

</body>
</subsection>
<subsection>
<title>RPM-tiedostot</title>
<body>

<p>
Vaikkei Portage käytä RPM-tiedostoja, se voi luoda niitä
<c>ebuild</c>-komennon avulla (ks. <uri
link="?part=3&amp;chap=6">Ebuild-sovellus</uri>).
Oletussijainti Portagen RPM:ille on
<path>/usr/portage/rpm</path> ja sitä voi muuttaa muuttujalla RPMDIR.
</p>

</body>
</subsection>
</section>
<section>
<title>Ohjelmistojen buildaus</title>
<subsection>
<title>Portagen väliaikaistiedostot</title>
<body>

<p>
Portagen väliaikaistiedostoja säilytetään hakemistossa <path>/var/tmp</path>
oletusarvoisesti. Tätä voidaan muuttaa muuttujalla PORTAGE_TMPDIR.

</p>

<p>
Jos muutat PORTAGE_TMPDIR-muuttujaa, saattaa pitää tarkistaa myös seuraavia,
jotta ne huomaisivat PORTAGE_TMPDIRin muutoksen. Tämä johtuu tavasta,
jolla Portage käsittelee muuttujia: BUILD_PREFIX.
</p>

</body>
</subsection>
<subsection>
<title>Buildaus-hakemisto</title>
<body>

<p>
Portage luo pakettikohtaiset build-hakemistot jokaiselle emergen
asennuskomennolle hakemiston <path>/var/tmp/portage</path> alle.
Tätä voidaan muuttaa muuttujalla BUILD_PREFIX.
</p>

</body>
</subsection>
<subsection>
<title>Käytettävän tiedostojärjestelmä sijainti</title>
<body>

<p>
Oletusarvoisesti Portage asentaa kaiken nykyiseen tiedostojärjestelmään
(<path>/</path>). Tätä voidaan muuttaa muuttujalla ROOT, ja vain
ympäristömuuttujana. Sen pääasiallinen tarkoitus on uusien otosten
luominen.
</p>

</body>
</subsection>
</section>
<section>
<title>Lokiominaisuudet</title>
<subsection>
<title>Ebuildien loggaus</title>
<body>

<p>
Portage luo ebuild-kohtaisesti lokitiedostoja, mutta vain jos
PORT_LOGDIR-muuttuja on asetettu siten, että se osoittaa paikkaan,
johon Portage (portage-käyttäjätunnus) voi kirjoittaa. Oletusarvoisesti
tämä muuttuja on tyhjä, eli kytketty pois päältä.
</p>

</body>
</subsection>
</section>
</sections>
