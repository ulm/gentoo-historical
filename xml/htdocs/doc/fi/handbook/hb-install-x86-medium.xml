<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fi/handbook/Attic/hb-install-x86-medium.xml,v 1.16 2006/03/05 09:49:00 flammie Exp $ -->

<sections>

<version>2.7</version>
<date>2005-11-24</date>

<section>
<title>Laitteistovaatimukset</title>
<subsection>
<title>Johdanto</title>
<body>

<p>
Ennen aloittamista on hyvä listata Gentoon asentamiseen tarvittavat 
laitteistot.
</p>

</body>
</subsection>
<subsection>
<title>Laitteisto</title>
<body>

<table>
<tr>
  <th>CPU</th>
  <ti>i486 tai parempi</ti>
</tr>
<tr>
  <th>RAM-muisti</th>
  <ti>64 megatavua</ti>
</tr>
<tr>
  <th>Levytila</th>
  <ti>1.5 gigatavua (poislukien swapin)</ti>
</tr>
<tr>
  <th>Swap</th>
  <ti>vähintään 256 megatavua</ti>
</tr>
</table>

</body>
</subsection>
</section>
<!-- Arkkitehtuureille yhteinen copypasteosio -->
<!-- ALKAA -->
<section>

<title>Gentoo asennus-CD:t</title>
<subsection>
<title>Johdanto</title>
<body>

<p>
<e>Gentoo asennus-CD:t</e> ovat käynnistettäviä CD:itä ja sisältävät
riittävän rakennetun Gentoo-ympäristön.
Tällaista CD:tä käyttäen voit käynnistää
tietokoneesi Linux-järjestelmään suoraan CD:ltä.
Käynnistyksen aikana laitteisto tunnistetaan ja sopivat ajurit
ladataan. Näitä CD:itä ylläpitävät Gentoon kehittäjät.
</p>

<p>
Voit käynnistää koneesi miltä tahansa näistä asennus-CD:istä sellaiseen tilaan,
jossa voit asettaa verkon, muokata osiointia ja
aloittaa Gentoon asennuksen Internetistä. Tällä hetkellä tarjolla on kahta
erilaista asennus-CD:tä, jotka ovat yhtäläisen helppoja Gentoon asentamiseen,
kunhan vain suoritetaan verkkopohjaista asennusta tuoreimmilla paketeilla.
</p>

<impo>
Gentoon voi asentaa ilman asennuksenaikausta Internet-yhteyttä vain 
käyttämällä asennusohjeita, jotka
on annettu <uri link="2006.0/index.xml">Gentoon 2006.0 käsikirjoissa</uri>.
</impo>

<p>
Tarjolla olevat asennus-CD:t ovat:
</p>

<ul>
  <li>
    Gentoon <e>Minimal</e> asennus-CD on pieni, käynnistettävä CD, jonka ainoa
    tarkoitus on olla käynnistysjärjestelmänä, ja valmistaa verkkoyhteys
    Gentoon asennusta varten.
  </li>
  <li>
    Gentoon <e>Installer</e> asennin-CD on käynnistettävä CD, joka sisältää
    kaiken mitä Gentoon asentamiseen tarvitsee. Siinä on myös graafinen
    käyttöympäristö sekä graafinen ja konsolipohjainen asennin. Lisäksi
    CD:llä on asennusohjeet.
  </li>
</ul>

<p>
Alla on lueteltuina asennus-CD:iden edut ja haitat helpottamaan valintaa.
</p>

</body>
</subsection>
<subsection>
<title>Gentoon Minimal asennus-CD</title>
<body>

<p>
Minimal asennus-CD on tiedostossa <c>install-x86-minimal-2006.0.iso</c> ja
kooltaan vain 58 megatavua. Tällä voi asentaa Gentoon, mutta vain jos
Internet-yhteys on asennuksen aikana käytettävissä.

</p>

<table>
<tr>
  <th>Minimal asennus-CD</th>
  <th>Hyödyt ja haitat</th>
</tr>
<tr>
  <th>+</th>
  <ti>Pienin lataus</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Ei sisällä stage3:a, Portagen otosta, GRP-paketteja eikä siten ole sopiva
    verkottomaan asennukseen.
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>Gentoon Universal asennus-CD</title>
<body>

<p>
Installer asennin-CD on tiedostossa <c>livecd-i686-installer-2006.0.iso</c>
ja on 679 megatavun CD:n kokoinen. Tällä asennin-CD:llä voi asentaa
Gentoon, myös ilman toimivaa Internet-yhteyttä, jos tarvitsee Gentoota
sellaiseen koneeseen.
</p>

<table>
<tr>
  <th>Universal asennus-CD</th>
  <th>Hyödyt ja haitat</th>
</tr>
<tr>
  <th>+</th>
  <ti>
    Sisältää kaiken tarvittavan. Et edes tarvitse nopeaa verkkoyhteyttä
    asennettaessa.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>Valtava määrä ladattavaa.</ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>Muut CD:t</title>
<body>

<p>
Joillakin peilipalvelimilla on myös <e>Packages CD</e> -nimisiä tiedostoja.
Tällä CD:llä ei ole asennus-CD:tä, mutta sitä voi käyttää apuna verkottomassa
asennuksessa. Se sisältää valmiit käännetyt paketit (ns. GRP-paketit),
joista voi helposti asentaa ohjelmia (kuten OpenOffice.orgin, KDE:n,
Gnomen jne.) heti Gentoon asennuksen jälkeen.
</p>

<p>
Jos aiot käyttää Packages CD:tä, valitse samaa aliarkkitehtuuria oleva
versio kuin stage3-paketissakin.
</p>

</body>
</subsection>
<subsection>
<title>Stage3-paketti</title>
<body>

<p>
Stage3-paketti on pakattu arkistotiedosto, joka sisältää hyvin minimalistisen
Gentoo-käyttöjärjestelmän. Tällä pystytään asentamaan täysimittainen Gentoo
tämän oppaan mukaan. Varhemmat versiot Gentoon käsikirjasta kertoivat myös
asennuksen stage1- ja stage2-paketeista, mutta nykyisin suositeltavaa on vain
stage3:n käyttö. Jos haluat välttämättä käyttää stage1- tai stage2-paketteja,
lisätietoa aiheesta on <uri link="/doc/fi/faq.xml#stage12">VUKK:n kysymyksessä
”Miten asennan stage1- tai stage2-paketista?”</uri>.
</p>

<p>
Stage3-paketit on ladattavissa hakemistosta
<path>releases/x86/2006.0/stages/</path> miltä tahansa palvelimelta 
<uri link="/main/en/mirrors.xml">Gentoon peilipalvelinluettelossa</uri>, eikä
niitä ole asennus-CD:llä.
</p>

</body>
</subsection>
</section>
<section>
<title>Lataa, polta ja käynnistä asennus-CD</title>
<subsection>
<title>Asennus-CD:n lataus ja poltto</title>
<body>

<p>
Olet valinnut Gentoo asennus-CD:n asennusta varten. Aloita lataamalla ja
polttamalla valitun asennus-CD:n.
</p>

<p>
Asennus-CD:t (ja Packages CD tarvittaessa) ovat ladattavissa
<uri link="/main/en/mirrors.xml">peilipalvelilmiltamme</uri>.
Ne löytyvät hakemistosta <path>releases/x86/2006.0/livecd</path>.
</p>

<p>
Hakemistossa on niin kutsuttuja ISOja. Ne sisältävät CD:n otoksen
jonka voi polttaa CD-R-levylle.
</p>

<p>
Jos et ole varma lataamasi tiedoston ehjyydestä, voit tarkistaa sen
MD5-tarkastussumman ja verrata sitä annettuun tarkastussummaan (kuten
<path>install-x86-minimal-2006.0.iso.md5</path>). 
Tarkastussummat tarkastetaan
komennolla <c>md5sum</c> Linux/Unix-järjestelmissä ja ohjelmalla <uri
link="http://www.etree.org/md5com.html">md5sum</uri> Windowsissa.
</p>

<p>
Toinen tapa ladattujen tiedostojen oikeellisuuden tarkastamiseen on
GnuPG:n käyttäminen antamamme kryptografisen allekirjoituksen tarkastamiseen
(löytyy tiedostosta jonka tarkenne on <path>.asc</path>). Lataa allekirjoitustiedost ja hae julkinen avain:
</p>

<pre caption="Julkisen avaimen hankinta">
$ <i>gpg --keyserver subkeys.pgp.net --recv-keys 17072058</i>
</pre>

<p>
Varmistetaan allekirjoitus:
</p>

<pre caption="Kryptografisen allekirjoituksen varmistaminen">
$ <i>gpg --verify &lt;allekirjoitustiedosto&gt; &lt;.iso-tiedosto&gt;</i>
</pre>

<p>
ISOja poltettaessa tulee käyttää raakapoltto-asetuksia. Tämän toteutus vaihtelee
suuresti ohjelmakohtaisesti. Tarkastelemme tässä cdrecordia ja k3b:tä,
annetut esimerkit vastaavat ohjelmien englanninkielisiä versioita. Lisää
tietoja polttamisesta voit etsiä <uri link="/doc/fi/faq.xml">Gentoo
VUKK:sta</uri>.
</p>

<ul>
  <li>
    Cdrecordilla käytä komentoa <c>cdrecord dev=/dev/hdc
    &lt;ladattu .iso-tiedosto&gt;</c> (korvaa
    <path>/dev/hdc</path> CD-RW-asemasi laitetiedostopolulla). Aseta viimeiseksi
    komentojonoparametriksi vielä ISO-tiedoston polku.
  </li>
  <li>
    K3B:llä valitse <c>Tools</c> &gt; <c>CD</c> &gt; <c>Burn Image</c>.
    Etsi ISO-tiedosto valikosta Image to Burn. Lopulta napsauta
    <c>Start</c>.
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>Asennus-CD:n käynnistys</title>
<body>

<impo>
Lue koko kappale ennen
jatkamista, koska sinulla ei aina ole aikaa lukea toimiessasi.
</impo>

<p>
Asennus-CD:n polttamisen jälkeen on aika käynnistää ne.
Poista kaikki CD:t asemista ja uudelleenkäynnistä järjestelmä BIOS-asetuksiin.
Useimmilla koneilla tämä tehdään painamalla DEL-, F1-, tai ESC-painiketta
käynnistymisen aikana. Muuta BIOS-asetusten käynnistysjärjestystä siten, että
CD-ROM tulee ennen kovalevyä. Tämä asetus löytyy usein valikosta CMOS Setup.
Jollei tätä asetusta tehdä, järjestelmä käynnistyy kovalevyltä jättäen CD:n
huomioimatta.</p>

<p>
Seuraavaksi aseta asennus-CD CD-asemaan (eikä esim. diskettiasemaan, nih) ja
uudelleenkäynnistä.
Esiin pitäisi tulla käynnistysruutu. Voit
nyt aloittaa tavan käynnistysprosessin oletusasetuksilla painamalla enteriä
tai käyttää asennus-CD:n mukailtuja käynnistysasetuksia antamalla ytimen
nimen sekä asetukset ja painamalla enteriä.
</p>

<p>
Asennus-CD:llä on mukana useita ytimiä.
Oletusarvoinen on nimeltään <c>gentoo</c>. Muut ovat eri laitteistolle ja
-nofb-variantit ilman framebuffer-tukea.
</p>

<p>
Alla lyhyt katsaus tarjolla oleviin ytimiin:
</p>

<table>
<tr>
  <th>Ydin</th>
  <th>Kuvaus</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>2.6-oletusydin moniprosessorituella</ti>
</tr>
<tr>
  <ti>gentoo-nofb</ti>
  <ti><c>gentoo</c>, mutta ilman framebuffer-tukea</ti>
</tr>
<tr>
  <ti>smp-nofb</ti>
  <ti><c>smp</c>, mutta ilman framebuffer-tukea</ti>
</tr>
<tr>
  <ti>memtest86</ti>
  <ti>RAM-muistin testaamiseen</ti>
</tr>
</table>

<p>
Voit myös antaa ytimelle asetuksia. Ne vastaavat toiminnallisuuksia joita
voit käynnistää tai sulkea haluamallasi tavalla. Alla taulukko joka selvittää
kaikki ytimen asetukset, sen saa myös esille käynnistyksessä painamalla F2:a.
</p>

<pre caption="Asetukset, joita voidaan antaa käytettävälle kernelille">
- agpgart       loads agpgart (use if you have graphic problems,lockups)
- acpi=on       loads support for ACPI firmware
- ide=nodma     force disabling of DMA for malfunctioning IDE devices
- doscsi        scan for scsi devices (breaks some ethernet cards)
- dopcmcia      starts pcmcia service for PCMCIA cdroms
- nofirewire    disables firewire modules in initrd (for firewire cdroms,etc)
- nokeymap      disables keymap selection for non-us keyboard layouts
- docache       cache the entire runtime portion of cd in RAM, allows you
                to umount /mnt/cdrom to mount another cdrom.
- nodetect      causes hwsetup/kudzu and hotplug not to run
- nousb         disables usb module load from initrd, disables hotplug
- nodhcp        dhcp does not automatically start if nic detected
- nohotplug     disables loading hotplug service
- noapic        disable apic (try if having hardware problems ,nics,scsi,etc)
- noevms        disable loading of EVMS2 modules
- nolvm2        disable loading of LVM2 modules
- hdx=stroke    (smp/smp-nofb kernel only) Allows you to partition the whole
                harddrive even if your BIOS can't handle large harddrive
- noload=module1,[module2,[...]]
                disable loading of specific kernel modules
</pre>

<p>
Seuraavaksi käynnistä CD:si, valitse ydin (ellet aio käyttää oletusasetusta,
<c>gentoo</c>-ydintä) ja käynnistysasetukset.
Esimerkiksi <c>gentoo</c>-ytimen <c>dopcmcia</c>-asetuksilla käynnistäisit 
näin:
</p>

<pre caption="Asennus-CD:n käynnistys">
boot: <i>gentoo dopcmcia</i>
</pre>

<p>
Seuraavaksi eteesi tulee uusi käynnistysruutu ja edistymispalkki 
(progress bar).
Jos asennat Gentoota järjestelmästä, jossa on jokin muu kuin amerikkalainen
näppäimistö (todennäköisesti suomalainen), muista painaa Alt-F1 päästäksesi
monisanaiseen käynnistystilaan ja seurata ohjeita.
Jollei mitään tehdä kymmenessä sekunnissa, käyttöön otetaan amerikkalainen
näppäinasettelu.
Käynnistysprosessin loputtua olet Live Gentoo Linuxissa pääkäyttäjänä.
Komentorivillä pitäisi olla pääkäyttäjän tunniste #. Voit myös vaihtaa muille
konsoleille painamalla Alt-F2:a, Alt-F3:a ja Alt-F4:ää. Takaisin
aloituskonsolille pääset Alt-F1:llä.
</p>

<p>
Ja jatka matkaasi <uri link="#doc_chap3_sect7">Muun laitteiston
asettamiseen</uri>.
</p>

</body>
</subsection>
<subsection id="hardware">
<title>Muun laitteiston asettaminen</title>
<body>

<p>
Asennus-CD yrittää käynnistyessän tunnistaa kaiken laitteiston ja ladata
sopivat ydinmoduulit. Valtaosassa tapauksia se toimii erittäin hyvin. Joissain
tapauksissa kuitenkin (SPARCin asennus-CD:issä ei edes ole tunnistusta), jotkin
tarvittavat moduulit voivat jäädä lataamatta. Jos PCI-tunnistus ei huomannut
jotain laitteistoa sinun täytyy ladata tarvitut moduulit käsin.
</p>

<p>
Seuraavassa esimerkissä yritämme ladata <c>8139too</c>-moduulin (tuen
erääntyyppisille verkkokorteille):
</p>

<pre caption="Ytimen moduulin lataaminen">
# <i>modprobe 8139too</i>
</pre>

</body>
</subsection>
<subsection>
<title>Valinnainen: Kovalevyn suorituskyvyn hienosäätö</title>
<body>

<p>
Jos olet tehokäyttäjä, halunnet hienosäätää IDE-kovalevyjen suorituskykyä
<c>hdparm</c>-komennolla. Komentoparametreillä <c>-tT</c> voit testata
levysi suorituskykyä (suorita se useaan kertaan varmistuaksesi
oikeellisuudesta).</p>

<pre caption="Kovalevyn suorituskyvyn testaus">
# <i>hdparm -tT /dev/hda</i>
</pre>

<p>
Säätämiseen voit käyttää mitä tahansa annetuista esimerkeistä (tai
koettaa itse omiasi). Näissä on käytetty <path>/dev/hda</path>-laitetta
esimerkkinä, korvaa se omallasi:
</p>

<pre caption="Kovalevyn suorituskyvyn säätäminen">
<comment>Aktivoi DMA:</comment>
# <i>hdparm -d 1 /dev/hda</i>
<comment>Aktivoi DMA ja turvalliset suorituskykyä parantavat asetukset:</comment>
# <i>hdparm -d 1 -A 1 -m 16 -u 1 -a 64 /dev/hda</i>
</pre>

</body>
</subsection>
<subsection id="useraccounts">
<title>Valinnainen: Käyttäjätunnusten luonti</title>
<body>

<p>
Jos muut ihmiset tulevat käyttämään asennusympäristöä tai aiot irkata
<c>irssi</c>llä käyttämättä pääkäyttäjän tunnuksia (turvallisuussyistä),
sinun tulee luoda tarvittavat käyttäjätunnukset ja vaihtaa pääkäyttäjän
salasanaa
</p>

<p>
Pääkäyttäjän salasanan vaihtoon käytetään <c>passwd</c>-komentoa:
</p>

<pre caption="Pääkäyttäjän salasanan muuttaminen">
# <i>passwd</i>
New password: <comment>(Syötä salasana)</comment>
Re-enter password: <comment>(Syötä salasana toistamiseen)</comment>
</pre>

<p>
Uuden käyttäjätunnuksen luominen tapahtuu syöttämällä käyttäjän tiedot ja
salasanan.
Käytämme tässä komentoja <c>useradd</c> ja <c>passwd</c>.
Seuraavassa esimerkissä teemme käyttäjän pekka.
</p>

<pre caption="Käyttäjätunnuksen tekeminen">
# <i>useradd -m -G users pekka</i>
# <i>passwd pekka</i>
New password: <comment>(Syötä pekan salasana)</comment>
Re-enter password: <comment>(syötä pekan salasana toistamiseen)</comment>
</pre>

<p>
Voit vaihtaa käyttäjätunnusta komennolla <c>su</c>:
</p>

<pre caption="Käyttäjätunnuksen vaihto">
# <i>su - pekka</i>
</pre>

</body>
</subsection>
<subsection>
<title>Valinnainen: Dokumentoinnin katselu asennettaessa</title>
<body>

<p>
Jos haluat katsella Gentoon käskikirjaa (CD:ltä tai verkosta) asennuksen
aikana, varmista että olet tehnyt käyttäjätunnuksen (kts. <uri
link="#useraccounts">Valinnainen: Käyttäjätunnukset</uri>).
Painamalla <c>Alt-F2</c> pääset uudelle terminaalille ja kirjautumaan sisään.
</p>

<p>
Jos haluat katsella CD:llä olevaa dokumentaatiota, voit käyttää siihen
<c>links</c>:a:
</p>

<pre caption="CD:llä olevan dokumentaation selaaminen">
# <i>links /mnt/cdrom/docs/html/index.html</i>
</pre>

<p>
On kuitenkin suositellumpaa käyttää verkossa olevaa versiota Gentoon
käsikirjasta, sillä se on ajantasaisempi kuin CD:n versio, ja suomennoskin
löytyy hieman varmemmin. Voit katsella tätäkin <c>links</c>illä, mutta vasta
kun olet suorittanut <e>Verkon asettamisen</e>
(muutoin Internet-yhteytesi ei tietenkään toimi jotta pääsisit
hakemaan dokumentit):
</p>

<pre caption="Verkkodokumentaation katselu">
# <i>links http://www.gentoo.org/doc/en/handbook/handbook-x86.xml</i>
</pre>

<p>
Takaisin vanhalle terminaalille pääsee painamalla <c>Alt-F1</c>.
</p>

</body>
</subsection>
<subsection>
<title>Valinnainen: SSH-palvelun käynnistys</title>
<body>

<p>
Jos haluat muiden pääsevän käsiksi tietokoneeseesi Gentoon asennuksen
aikana (ehkäpä koska haluat heidän auttavan sinua asennuksessa tai
tekevän sen puolestasi), sinun tulee luoda heille käyttäjätunnujset tai jopa
antaa pääkäyttäjän salasanat
(<e>vain</e> silloin <e>kun</e> voit <b>täysin luottaa</b> heihin).
</p>

<p>
SSH käynnistetään seuraavasti:
</p>

<pre caption="SSH:n käynnistäminen">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
Voidaksesi käyttää sshd:tä sinulla täytyy olla toimivat verkkoasetukset,
jatka kappaleeseen <uri link="?part=1&amp;chap=3">Verkon asettaminen</uri>.
</p>

</body>
</subsection>
</section>
</sections>
