<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/fi/handbook/Attic/hb-install-x86-medium.xml,v 1.1 2004/08/02 16:01:59 swift Exp $ -->

<sections>
<section>
<title>Laitteistovaatimukset</title>
<subsection>
<title>Johdanto</title>
<body>

<p>
Ennen aloittamista on hyvä listata Gentoon asentamiseen tarvittavat laitteistot.
</p>

</body>
</subsection>
<subsection>
<title>X86-alusta</title>
<body>

<ul>
<li>
  yksi gigatavu kovalevytilaa
</li>
<li>
  valmiiksikäännettyjen pakettien kanssa, 300 megatavua <!--käyttö-->muistia
  (rammia
  ja swappia yhteensä)
</li>
<li>
  486 tai parempi ja vähintään 64 megatavua RAM-muistia
</li>
</ul>

</body>
</subsection>
</section>
<section>
<title>Valinnan teko</title>
<subsection>
<title>Johdanto</title>
<body>

<p>
Jos olet vieläkin kiinnostunut Gentoosta, nyt on aika valita käytettävä
asennusväline. Kaikki asennusvälineet ovat erilaisia, mutta lopputulos on
todennäköisesti sama: toiminnallinen Gentoo-järjestelmän perusta.
</p>

<p>
Täällä kuvaillut asennusvälineet ovat:
</p>

<ul>
<li>Gentoon Minimal LiveCD</li>
<li>Gentoon Universal LiveCD</li>
</ul>

<p>
Molemmilla keinolla on hyöty- ja haittapuolensa. Listaamme ne täällä että
sinulla olisi kaikki tieto järkevään päätöksentekoon, mutta ennen jatkaisemista
tutustumme kolmen stagen asennusprosessiin.
</p>

</body>
</subsection>
<subsection>
<title>Kolme stagea</title>
<body>

<p>
Gentoo asennetaan käyttämällä yhtä kolmesta <e>stage</e>-tarpaketeista.
Valittava paketti riippuu halutusta itse tehtävän kääntämisen määrästä.
<e>Stage1</e>:n tarpaketilla tehdään bootstrappaus ja käännetään koko
järjestelmä alusta lähtien. <e>Stage2</e>:n tarpaketilla rakennetaan
koko järjestelmä bootstrapatusta puoliksikäännetystä tilasta.
<e>Stage3</e>:n tarpaketissa on jo Gentoon perusjärjestelmä valmiiksi
käännettynä. Kuten myöhemmin huomataan, Gentoon voi myös asentaa kääntämättä
mitään (paitsi ytimen ja joitain ehdollisia paketteja). Jos haluat tehdä näin,
käytä <e>stage3</e>-tarpakettia.
</p>

<p>
Mikä paketti pitäisi valita?
</p>

<p>
Aloittamalla <e>stage1</e>:stä pystyt täysin päättämään optimoinnin ja
vaihtoehtoiset kääntämistoiminnallisuudet jotka liittyvät järjestelmään. Tämä
tekee <e>stage1</e>:stä täydellisen tehokäyttäjille, jotka tietävät mitä
tekevät. Se on myös loistava tapa oppia lisää Gentoo Linuxin toiminnasta.
</p>

<p>
<e>Stage1</e>-asennuksen suoritukseen tarvitaan toimiva Internet-yhteys.
</p>

<table>
<tr>
  <th>Stage1</th>
  <th>Hyödyt ja haitat</th>
</tr>
<tr>
  <th>+</th>
  <ti>
    Mahdollistaa optimointiasetusten ja kääntämisen asetusten täysimittaisen
    virittelyn.
  </ti>
</tr>
<tr>
  <th>+</th>
  <ti>Sopii tehokäyttäjille jotka tietävät mitä tekevät.</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Mahdollistaa tehokkaan Gentoo Linuxin toiminnan oppimisen.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Kestää pitkään ennen kuin asennus on valmis</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Todennäköisesti ajanhaaskausta jollet aio hienosäätää asetuksia.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Ei sovi verkottomaan asennukseen</ti>
</tr>
</table>

<p>
<e>Stage2</e>:ssa voit ohittaa bootstrappauksen ja käyttää asettamiamme
oletusarvoja sopivasta stage2-tarpaketista.
</p>

<p>
<e>Stage2</e>-asennuksen suoritukseen tarvitaan toimiva Internet-yhteys.
</p>


<table>
<tr>
  <th>Stage2</th>
  <th>Hyödyt ja haitat</th>
</tr>
<tr>
  <th>+</th>
  <ti>Et tarvitse bootstrappaamista.</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Nopeampi aloitus kuin stage1:n kanssa.</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Voit vielä vaikuttaa asetuksiisi.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Et voi hienosäätää yhtä tarkasti kuin stage1:ssä.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Tämä ei ole nopein tapa asentaa Gentoo.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Sinun täytyy käyttää meidän valitsemiamme bootstrap-asetuksia.</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Ei sovi verkottomaan asennukseen</ti>
</tr>

</table>

<p>
Käyttämällä <e>stage3</e>:a asennat Gentoon nopeiten, mutta samalla tyydyt
niihin optimointiasetuksiin, jotka me olemme valinneet (jotka kylläkin ovat
melko tehokkaita ja tarkkaan harkittuja, vakaita mutta laadukkaita asetuksia).
<e>Stage3</e>:a käytetään myös asennettaessa Gentoo esikäännetyistä paketeista
tai asennettaessa Gentoo ilman verkkoyhteyttä.
</p>

<table>
<tr>
  <th>Stage3</th>
  <th>Hyödyt ja haitat</th>
</tr>
<tr>
  <th>+</th>
  <ti>Nopein tapa Gentoon asentamiseen</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Sopii verkottomaan asentamiseen</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Et voi säätää järjestelmän perustaa, se on valmiiksirakennettu</ti>
</tr>
<tr>
  <th>-</th>
  <ti>Et voi kehua käyttäneesi stage1:ä tai stage2:a</ti>
</tr>
</table>

<p>
Jos päätät myöhemmin vaihtaa optimointiasetuksia
asennuksen jälkeen, voit siltikin uudelleenkääntää koko järjestelmäsi
uusilla asetuksilla.
</p>

<p>
Tässä saatavilla olevat asennusvälineet.
</p>

</body>
</subsection>
<subsection>
<title>Gentoo LiveCD:t</title>
<body>

<p>
<e>Gentoo LiveCD:t</e> ovat käynnistettäviä CD:itä ja sisältävät
riittävän rakennetun Gentoo-ympäristön. Tällaista CD:tä käyttäen voit käynnistää
tietokoneesi Linux-järjestelmään suoraan CD:ltä.
Käynnistyksen aikana laitteisto tunnistetaan ja sopivat ajurit
ladataan. Näitä CD:itä ylläpitävät Gentoon kehittäjät.
</p>

<p>
Voit käynnistää koneesi miltä tahansa näistä LiveCD:istä sellaiseen tilaan,
jossa voit asettaa verkon, muokata osiointia ja
aloittaa Gentoon asennuksen Internetistä. Jotkin LiveCD:t myös sisältävät
kaiken tarpeellisen lähdekoodin Gentoon asentamiseen ilman verkkoa.
</p>

<p>
Mitä LiveCD:t sitten pitävät sisällään?
</p>

</body>
</subsection>
<subsection>
<title>Gentoon Minimal LiveCD</title>
<body>

<p>
Pienikokoinen, vain välttämättömän sisältävä, käynnistettävä CD vain
järjestelmän käynnistystä, verkon asettamista ja Gentoon asennusta varten.
Tämä ei sisällä yhtään stagea (tai, joskus harvoin yhden stage1-tiedoston),
lähdekoodia tai esikäännettyjä paketteja. Tämä LiveCD
löytyy kokonaan <path>universal</path>-alihakemistosta ja on nimeltään
<c>install-x86-minimal-2004.1.iso</c>.
</p>

<table>
<tr>
  <th>Minimal LiveCD</th>
  <th>Hyödyt ja haitat</th>
</tr>
<tr>
  <th>+</th>
  <ti>Pienin lataus</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Sopii kaikille alustatyypin koneille</ti>
</tr>
<tr>
  <th>+</th>
  <ti>
    Voit tehdä stage1-, stage2- tai stage3-asennuksen hakemalla sopivan
    tarpaketin verkosta.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    Ei sisällä stageja, portagen kuvaa, GRP-paketteja eikä siten ole sopiva
    verkottomaan asennukseen
  </ti>
</tr>
</table>

</body>
</subsection>
<subsection>
<title>Gentoon Universal LiveCD</title>
<body>

<p>
Gentoon Universal LiveCD on käynnistettävä CD Gentoon verkottomaan asennukseen.
Se sisältää stage1:n ja useita stage3-tarpaketteja (jotka on optimoitu eri
aliarkkitehtuureille). Esimerkiksi x86-muoto tästä CD:stä löytyy
<path>universal</path>-alihakemistosta ja on nimeltään
<c>install-x86-universal-2004.1.iso</c>.
</p>

<p>
Jos tarkastelet lähemmin <path>livecd</path>-hakemistoa, huomaat, että
joillekin alustoille on <e>Gentoo Package CD:itä</e>. Tämä CD
(joka ei ole käynnistettävä) sisältää vain esikäännetyt paketit Gentoon
onnistuneen asennuksen jälkeiseen asennukseen. Gentoon asennukseen tarvitset
vain Universal LiveCD:n, mutta jos haluat OpenOffice.orgin, Mozillan, KDE:n,
Gnomen jne. kääntämättä niitä erikseen tarvitset myös Packages CD:n.
Esimerkiksi Athlon-XP:n (x86:n aliarkkitehtuuri) Packages CD on alihakemistossa
<path>athlon-xp</path> ja nimeltään <c>packages-athlon-xp-2004.1.iso</c>.
</p>

<table>
<tr>
  <th>Universal LiveCD ja Packages CD</th>
  <th>Hyödyt ja haitat</th>
</tr>
<tr>
  <th>+</th>
  <ti>Packages CD on optimoitu alustallesi ja aliarkkitehtuurillesi.</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Packages CD sisältää esikäännetyt paketit nopeaa asennusta varten.</ti>
</tr>
<tr>
  <th>+</th>
  <ti>
    Sisältää kaiken tarvittavan. Et edes tarvitse nopeaa verkkoyhteyttä
    asennettaessa.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>Valtava määrä ladattavaa.</ti>
</tr>
</table>

</body>
</subsection>
</section>
<section>
<title>Lataa, polta ja käynnistä LiveCD</title>
<subsection>
<title>LiveCD:n lataus ja poltto</title>
<body>

<p>
Olet valinnut Gentoo LiveCD:n asennusta varten. Aloitamme lataamalla ja
polttamalla valitun LiveCD:n.
Mainitsimme aiemmin useista LiveCD:istä, mutta missä ne sijaitsevatkaan?
</p>

<p>
LiveCD:t (ja Package CD tarvittaessa) ovat ladattavissa
<uri link="/main/en/mirrors.xml">peilipalvelilmiltamme</uri>.
Ne löytyvät hakemistosta <path>releases/x86/2004.1/livecd</path>.
</p>

<warn>
Packages CD ei ole LiveCD vaikka se sennimisessä hakemistossa onkin.
Packages CD:llä et voi käynnistää tietokonettasi.
</warn>

<p>
Hakemistossa on niin kutsuttuja ISOja. Ne sisältävät CD:n kuvan
jonka voi polttaa CD-R-levylle.
</p>

<p>
Jos et ole varma lataamasi tiedoston ehjyydestä, voit tarkistaa sen
MD5-tarkastussumman ja verrata sitä annettuun tarkastussummaan (kuten
<path>install-x86-minimal-2004.1.iso.md5</path>). Tarkastussummat tarkastetaan
komennolla <c>md5sum</c> Linux/Unix-järjestelmissä ja ohjelmalla <uri
link="http://www.md5summer.org">md5summer</uri> Windowsissa.
</p>

<p>
ISOja poltettaessa tulee käyttää raakapoltto-asetuksia. Tämän toteutus vaihtelee
suuresti ohjelmakohtaisesti. Tarkastelemme tässä cdrecordia ja k3b:tä,
annetut esimerkit vastaavat ohjelmien englanninkielisiä versioita. Lisää
tietoja polttamisesta voit etsiä <uri link="/doc/en/faq.xml">Gentoo
FAQ:sta</uri>.
</p>

<ul>
  <li>
    Cdrecordilla käytä komentoa <c>cdrecord dev=/dev/hdc</c> (korvaa
    <path>/dev/hdc</path> CD-RW-asemasi laitetiedostopolulla). Aseta viimeiseksi
    komentojonoparametriksi vielä ISO-tiedoston polku.
  </li>
  <li>
    K3B:llä valitse <c>Tools</c> &gt; <c>CD</c> &gt; <c>Burn Image</c>.
    Etsi ISO-tiedosto valikosta Image to Burn. Lopulta napsauta
    <c>Start</c>.
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>LiveCD:iden käynnistys</title>
<body>

<impo>
Lue koko kappale ennen
jatkamista, koska sinulla ei aina ole aikaa lukea toimiessasi.
</impo>

<p>
Asennus-CD:iden polttamisen jälkeen on aika käynnistää ne.
Poista kaikki CD:t asemista ja uudelleenkäynnistä järjestelmä BIOS-asetuksiin.
Useimmilla koneilla tämä tehdään painamalla DEL-, F1-, tai ESC-painiketta
käynnistymisen aikana. Muuta BIOS-asetusten käynnistysjärjestystä siten, että
CD-ROM tulee ennen kovalevyä. Tämä asetus löytyy usein valikosta CMOS Setup.
Jollei tätä asetusta tehdä, järjestelmä käynnistyy kovalevyltä jättäen CD:n
huomioimatta.</p>

<p>
Seuraavaksi aseta asennus-CD CD-asemaan (eikä esim. diskettiasemaan, nih) ja
uudelleenkäynnistä.
Esiin pitäisi tulla tyylikäs käynnistysruutu Gentoo Linuxin logolla. Voit
nyt aloittaa tavan käynnistysprosessin oletusasetuksilla painamalla enteriä
tai käyttää LiveCD:n mukailtuja käynnistysasetuksia antamalla ytimen
nimen sekä asetukset ja painamalla enteriä.
</p>

<p>
Ytimen nimi ja asetukset siis? LiveCD:llä on mukana useita ytimiä.
Oletusarvoinen on nimeltään <c>gentoo</c>. Muut ovat <c>smp</c>
monisuorittimisille järjestelmille ja <c>-nofb</c> versiot jotka poistavat
framebufferin käytöstä.
</p>

<p>
Alla lyhyt katsaus tarjolla oleviin ytimiin:
</p>

<table>
<tr>
  <th>Ydin</th>
  <th>Kuvaus</th>
</tr>
<tr>
  <ti>gentoo</ti>
  <ti>Oletusydin framebuffer-tuella</ti>
</tr>
<tr>
  <ti>smp</ti>
  <ti>Ydin moniprosessorituella</ti>
</tr>
<tr>
  <ti>gentoo-nofb</ti>
  <ti><c>gentoo</c>, mutta ilman framebuffer-tukea</ti>
</tr>
<tr>
  <ti>smp-nofb</ti>
  <ti><c>smp</c>, mutta ilman framebuffer-tukea</ti>
</tr>
<tr>
  <ti>memtest86</ti>
  <ti>RAM-muistin testaamiseen</ti>
</tr>
</table>

<p>
Voit myös antaa ytimelle asetuksia. Ne vastaavat toiminnallisuuksia joita
voit käynnistää tai sulkea haluamallasi tavalla. Alla taulukko joka selvittää
kaikki ytimen asetukset, sen saa myös esille käynnistyksessä painamalla F2:a.
</p>

<table>
<tr>
  <th>Ytimen asetus</th>
  <th>Kuvaus</th>
</tr>
<tr>
  <ti>acpi</ti>
  <ti>Kytke ACPI-tuki päälle</ti>
</tr>
<tr>
  <ti>doataraid</ti>
  <ti>Kytke ATA RAID-laitteiden tuki päälle</ti>
</tr>
<tr>
  <ti>dofirewire</ti>
  <ti>Kytke Firewire-laitteiden tuki päälle</ti>
</tr>
<tr>
  <ti>dopcmcia</ti>
  <ti>Kytke PCMCIA-tuki päälle</ti>
</tr>
<tr>
  <ti>doscsi</ti>
  <ti>Kytke SCSI-tuki päälle</ti>
</tr>
<tr>
  <ti>noapm</ti>
  <ti>Kytke APM-tuki pois päältä</ti>
</tr>
<tr>
  <ti>nodetect</ti>
  <ti>Kytke laitteiden tunnistus(kudzu tai hotplug) pois päältä</ti>
</tr>
<tr>
  <ti>nodhcp</ti>
  <ti>Älä käytä DHCP:tä IP-osoitteen hakuun</ti>
</tr>
<tr>
  <ti>noevms</ti>
  <ti>Kytke EVMS-tuki pois päältä</ti>
</tr>
<tr>
  <ti>nohotplug</ti>
  <ti>Kytke hotplug (ytimen laitelatausohjelma) pois päältä</ti>
</tr>
<tr>
  <ti>nousb</ti>
  <ti>Kytke USB-tuki pois päältä</ti>
</tr>
<tr>
  <ti>ide=nodma</ti>
  <ti>Kytke DMA-tuki pois päältä IDE-laitteilta</ti>
</tr>
</table>

<p>
Seuraavaksi käynnistä CD:si, valitse ydin (ellet aio käyttää oletusasetusta,
<c>gentoo</c>-ydintä) ja käynnistysasetukset.
Esimerkiksi <c>gentoo</c>-ytimen <c>dopcmcia</c>-asetuksilla käynnistäisit näin:
</p>

<pre caption="LiveCD:n käynnistys">
boot: <i>gentoo dopcmcia</i>
</pre>

<p>
Seuraavaksi eteesi tulee uusi käynnistysruutu ja edistyspalkki (progress bar)
Käynnistysprosessin loputtua olet Live Gentoo Linuxissa pääkäyttäjänä.
Komentorivillä pitäisi olla pääkäyttäjän tunniste #. Voit myös vaihtaa muille
konsoleille painamalla Alt-F2:a, Alt-F3:a ja Alt-F4:ää. Takaisin
aloituskonsolille pääset Alt-F1:llä.
</p>

<p>
Jos asennat Gentoota järjestelmästä jossa on jokin muu kuin amerikkalainen
näppäimistö (todennäköisesti suomalainen), muista antaa komento
<c>dokeymap</c> ytimelle ladattavaksi.
</p>

<p>
Ja jatka matkaasi <uri link="#doc_chap3_sect7">Muun laitteiston
asettamiseen</uri>.
</p>

</body>
</subsection>
<subsection id="hardware">
<title>Muun laitteiston asettaminen</title>
<body>

<p>
LiveCD yrittää käynnistyessän tunnistaa kaiken laitteiston ja ladata
sopivat ydinmoduulit. Valtaosassa tapauksia se toimii erittäin hyvin. Joissain
tapauksissa kuitenkin (SPARCin LiveCD:issä ei edes ole tunnistusta), jotkin
tarvittavat moduulit voivat jäädä lataamatta. Jos PCI-tunnistus ei huomannut
jotain laittestoa sinun täytyy ladata tarvitut moduulit käsin.
</p>

<p>
Seuraavassa esimerkissä yritämme ladata <c>8139too</c>-moduulin (tuen
erääntyyppisille verkkokorteille):
</p>

<pre caption="Ytimen moduulin lataaminen">
# <i>modprobe 8139too</i>
</pre>

</body>
</subsection>
<subsection>
<title>Valinnainen: Kovalevyn suorituskyvyn hienosäätö</title>
<body>

<p>
Jos olet tehokäyttäjä, halunnet hienosäätää IDE-kovalevyjen suorituskykyä
<c>hdparm</c>-komennolla. Komentoparametreillä <c>-tT</c> voit testata
levysi suorituskykyä (suorita se useaan kertaan varmistuaksesi
oikeellisuudesta).</p>

<pre caption="Kovalevyn suorituskyvyn testaus">
# <i>hdparm -tT /dev/hda</i>
</pre>

<p>
Säätämiseen voit käyttää mitä tahansa annetuista esimerkeistä (tai
koettaa itse omiasi). Näissä on käytetty <path>/dev/hda</path>-laitetta
esimerkkinä, korvaa se omallasi:
</p>

<pre caption="Kovalevyn suorituskyvyn säätäminen">
<comment>Aktivoi DMA:</comment>                                       # <i>hdparm -d 1 /dev/hda</i>
<comment>Aktivoi DMA ja turvalliset suorituskykyä parantavat asetukset:</comment>  # <i>hdparm -d 1 -A 1 -m 16 -u 1 -a 64 /dev/hda</i>
</pre>

</body>
</subsection>
<subsection>
<title>Valinnainen: Käyttäjätunnusten luonti</title>
<body>

<p>
Jos muut ihmiset tulevat käyttämään asennusympäristöä tai aiot irkata
<c>irssi</c>llä käyttämättä pääkäyttäjän tunnuksia (turvallisuussyistä),
sinun tulee luoda tarvittavat käyttäjätunnukset ja vaihtaa pääkäyttäjän
salasanaa
</p>

<p>
Pääkäyttäjän salasanan vaihtoon käytetään <c>passwd</c>-komentoa:
</p>

<pre caption="Pääkäyttäjän salasanan muuttaminen">
# <i>passwd</i>
New password: <comment>(Enter your new password)</comment>
Re-enter password: <comment>(Re-enter your password)</comment>
</pre>

<p>
Uuden käyttäjätunnuksen luominen tapahtuu syöttämällä käyttäjän tiedot ja
salasanan.
Käytämme tässä komentoja <c>useradd</c> ja <c>passwd</c>.
Seuraavassa esimerkissä teemme käyttäjän pekka.
</p>

<pre caption="Käyttäjätunnuksen tekeminen">
# <i>useradd pekka</i>
# <i>passwd pekka</i>
New password: <comment>(Enter pekka's password)</comment>
Re-enter password: <comment>(Re-enter pekka's password)</comment>
</pre>

<p>
Voit vaihtaa käyttäjätunnusta komennolla <c>su</c>:
</p>

<pre caption="Käyttäjätunnuksen vaihto">
# <i>su pekka -</i>
</pre>

</body>
</subsection>
<subsection>
<title>Valinnainen: SSH-palvelun käynnistys</title>
<body>

<p>
Jos haluat muiden pääsevän käsiksi tietokoneeseesi Gentoon asennuksen
aikana (ehkäpä koska haluat heidän auttavan sinua asennuksessa tai
tekevän sen puolestasi) sinun tulee luoda heille käyttäjätunnujset tai jopa
antaa pääkäyttäjän salasanat
(<e>vain</e> silloin <e>kun</e> voit <b>täysin luottaa</b> heihin).
</p>

<p>
SSH käynnistetään seuraavasti:
</p>

<pre caption="SSH:n käynnistäminen">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
Voidaksesi käyttää sshd:tä sinulla täytyy olla toimivat verkkoasetukset,
jatka kappaleeseen <uri link="?part=1&amp;chap=3">Verkon asettaminen</uri>.
</p>

</body>
</subsection>
</section>
</sections>
