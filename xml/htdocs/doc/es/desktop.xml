<?xml version='1.0' encoding="ISO-8859-1"?>
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/desktop-es.html">
<title>Guía de Configuración de Escritorio de Gentoo Linux</title>
<author title="Editor"><mail link="g2boojum@gentoo.org">Grant Goodyear</mail></author>
<author title="Traductor"><mail link="gentoo@kapcoweb.com">Leonardo Boshell</mail></author>

<abstract>
   Esta guía le enseña a configurar Gentoo Linux para que sea un sistema
   de escritorio completo. Específicamente, exploraremos la instalación y
   configuración de X, KDE, OSS y alsa (sonido), postfix (correo
   electrónico), cups (impresión), y samba (interoperabilidad
   unix/windows).
</abstract>

<version>0.26</version>
<date>17 May 2002</date>

<chapter>
<title>Preparaciones</title>
<section>
<body>
<p>
Aunque sobra decirlo, lo primero que necesita es tener instalado Gentoo
Linux (<uri>http://www.gentoo.org/doc/build.html</uri>). Habiendo
terminado ese agradable proceso, es necesario también que descargue el
árbol <e>Portage</e>. Es muy buena idea que lea la Guía de Usuario de
Portage (<uri>http://www.gentoo.org/doc/portage-user.html</uri>), pero si
se encuentra corto de tiempo, sólo necesita escribir:
</p>
<pre># <i>emerge rsync</i></pre>
<p>Una pequeña nota sobre los paquetes que he decidido discutir aquí.
Gentoo Linux posee una considerable riqueza de administradores de
ventanas, agentes transportadores de correo, etc. que pueden ser
instalados con facilidad. Los paquetes específicos que he elegido cubrir
no son los preferidos por Gentoo Linux, simplemente son paquetes que son
del agrado del autor  o él conoce cómo configurar. En otras palabras, son
paquetes del escritorio del mismo autor.</p>
</body>
</section>
</chapter>

<chapter>
<title>X y KDE</title>

<section>
<title>Instalación</title>
<body>
<p>
Habiendo instalado Gentoo Linux y actualizado Portage, mi primera tarea
generalmente es instalar X y KDE. X toma toda una vida compilando, y KDE
toma incluso más, así que recomiendo altamente hacer esto justo antes de
ir a dormir.
</p>
<p>
Siempre es útil usar el parámetro <c>--pretend</c> antes de realizar un
<c>emerge</c> para ver qué dependencias serán instaladas, y en nuestro
caso son bastantes.
</p>
<pre>
# <i>emerge --pretend kde-base/kde</i>

These are the packages that I would merge, in order.

Calculating dependencies............... done!
[ebuild N  ] x11-base/xfree-4.2.0-r5 to /
[ebuild N  ] media-libs/lcms-1.06 to /
[ebuild N  ] media-libs/jpeg-6b-r2 to /
[ebuild N  ] media-libs/libmng-1.0.1 to /
[ebuild N  ] media-libs/libpng-1.0.12 to /
[ebuild N  ] x11-libs/qt-2.3.1 to /
[ebuild N  ] dev-libs/libxml2-2.4.13 to /
[ebuild N  ] dev-libs/libxslt-1.0.10 to /
[ebuild N  ] dev-lang/tcl-8.3.3 to /
[ebuild N  ] dev-lang/tk-8.3.3 to /
[ebuild N  ] dev-lang/python-2.2-r4 to /
[ebuild N  ] media-libs/tiff-3.5.7 to /
[ebuild N  ] net-print/cups-1.1.13 to /
[ebuild N  ] app-text/sgml-common-0.6.1 to /
[ebuild N  ] net-nds/portmap-5b-r6 to /
[ebuild N  ] app-admin/fam-oss-2.6.4-r1 to /
[ebuild N  ] media-libs/audiofile-0.2.3 to /
[ebuild N  ] media-sound/alsa-driver-0.5.12a to /
[ebuild N  ] media-libs/alsa-lib-0.5.10b to /
[ebuild N  ] kde-base/kdelibs-2.2.2-r2 to /
[ebuild N  ] kde-base/kdegames-2.2.2 to /
[ebuild N  ] kde-base/kdenetwork-2.2.2 to /
[ebuild N  ] dev-libs/popt-1.5 to /
[ebuild N  ] app-arch/rpm-3.0.6-r1 to /
[ebuild N  ] kde-base/kdeadmin-2.2.2 to /
[ebuild N  ] kde-base/kdeartwork-2.2.2 to /
[ebuild N  ] dev-libs/pilot-link-0.9.6-r3 to /
[ebuild N  ] kde-base/kdepim-2.2.2 to /
[ebuild N  ] kde-base/kdetoys-2.2.2 to /
[ebuild N  ] kde-base/kdeutils-2.2.2 to /
[ebuild N  ] dev-lang/nasm-0.98-r3 to /
[ebuild N  ] media-sound/esound-0.2.23 to /
[ebuild N  ] media-libs/libsdl-1.2.3-r1 to /
[ebuild N  ] x11-libs/gtk+-1.2.10-r4 to /
[ebuild N  ] media-video/xanim-2.80.1-r1 to /
[ebuild N  ] x11-libs/openmotif-2.1.30-r1 to /
[ebuild N  ] media-libs/libogg-1.0_rc3 to /
[ebuild N  ] media-libs/libvorbis-1.0_rc3 to /
[ebuild N  ] media-sound/cdparanoia-3.9.8 to /
[ebuild N  ] kde-base/kdemultimedia-2.2.2 to /
[ebuild N  ] kde-base/kdebase-2.2.2-r2 to /
[ebuild N  ] kde-base/kdeaddons-2.2.2-r1 to /
[ebuild N  ] media-gfx/sane-backends-1.0.5-r1 to /
[ebuild N  ] dev-util/dialog-0.7 to /
[ebuild N  ] net-libs/libwww-5.3.2-r1 to /
[ebuild N  ] app-text/tetex-1.0.7-r7 to /
[ebuild N  ] kde-base/kdegraphics-2.2.2 to /
[ebuild N  ] kde-base/kde-2.2.2-r1 to /

<comment>Probablemente las dependencias que usted observe sean diferentes</comment>

# <i>emerge kde-base/kde</i>
</pre>
<note>
A partir de portage-1.8.7 el comando <c>emerge</c> puede ser utilizado
para incorporar paquetes sin necesidad de especificar la categoría. De
este modo, KDE pudo ser instalado simplemente mediante <c>emerge kde</c>.
</note>
<note>
Si planea usar CUPS para la impresión entonces probablemente quiera
asegurarse de tener el valor "cups" entre sus variables USE en
<path>/etc/make.conf</path> antes de incorporar kde-base/kdebase.
</note>
<p>¡Tenga una buena siesta!</p>
<note>Si tiene un CD binario de Gentoo Linux, puede instalar los
paquetes directamente desde el CD.</note>
<pre caption="Instalación de paquetes binarios desde el CD">
# <c>export PKGDIR=/mnt/cdrom/gentoo/packages</c>
<comment>Normalmente Portage espera que los paquetes estén ubicados en
/usr/portage/packages </comment>
# <c>emerge --usepkg /mnt/cdrom/gentoo/packages/All/kdebase-x.y.z.tbz2</c>
<comment>El parámetro <c>--usepkg</c> se asegura de que se utilicen
paquetes binarios para satisfacer las dependencias (si están
disponibles).</comment> </pre>
</body>
</section>

<section>
<title>Configuración</title>
<body>
<p>
Me gusta utilizar el programa de consola <c>xf86config</c> para la
configuración de X, aunque el archivo <path>/etc/X11/XF86Config</path> que
genera no es muy elegante -- vea <uri link="http://www-105.ibm.com/developerworks/education.nsf/linux-onlinecourse-bytitle/3100FF4795B3F31F86256AF70056FDB3?OpenDocument">
este tutorial</uri> para consultar una configuración alternativa de X
más detallada.
Antes de que comience, necesitará conocer las proporciones de
actualización horizontales y verticales de su monitor (mi viewsonic G773
tiene Horizontal: 30-69 KHz, Vertical: 55-90 KHz), el tipo y cantidad de
ram (en KB) de su tarjeta de video (una tarjeta GeForce de 32768 KB , en
mi caso), y el tipo y dispositivo de su ratón (yo tengo un intellimouse
conectado al puerto ps/2 <path>/dev/psaux</path>).
</p>
<pre># <c>/usr/X11R6/bin/xf86config</c></pre>
<p>
Debido a que tengo un ratón de tres botones, elijo no habilitar la
emulación de 3 botones. No agrego ninguna opción adicional XKB al teclado
porque no sé lo que hace ninguna de ellas. Tendrá que adivinar a la hora
de decidir la resolución de pantalla y profundidad de píxeles que desea.
En mi caso particular me gusta 1280x1024 a 24bpp en mi viewsonic, pero eso
es únicamente porque no trabaja a resoluciones más altas. Si usted no ha
practicado todo este proceso nunca, no se sorprenda si termina ejecutando
<c>xf86config</c> varias veces.</p>

<note>Si no conoce las proporciones de actualización de su monitor,
intente haciendo una búsqueda en google,
<uri>http://www.google.com/</uri>, sobre el número de modelo y fabricante
de su monitor. Las proporciones de actualización generalmente se incluyen
como parte de las especificaciones del monitor.</note>

<p>Si usted es un veterano en la configuración de X, puede que esté
acostumbrado a crear un enlace simbólico desde el dispositivo de su mouse
hacia <path>/dev/mouse</path>. Tales enlaces simbólicos solían ser
problemáticos con devfs, ya que tenían la tendencía a desaparecer después
de un nuevo arranque del sistema. Ahora Gentoo Linux maneja correctamente
los enlaces simbólicos en <path>/dev</path>. Simplemente cree el enlace
simbólico <path>/dev/mouse</path> usando <c>ln -s</c> y éste <e>será</e>
preservado entre cada sesión.
</p>

<pre># <i>startx</i></pre>
<p>Si ha configurado X apropiadamente, al ejecutar <c>startx</c> debe
aparecer un administrador de ventanas increíblemente feo (twm, para ser
específico). Si X aparece, entonces estamos listos. Pulse
<c>&lt;ctrl&gt;&lt;alt&gt;&lt;backspace&gt;</c> para interrumpir el servidor
X.</p>

<p>Si tiene un ratón con rueda, puede que quiera editar el archivo
XF86Config manualmente:</p>
<pre>
# <i>cp /etc/X11/XF86Config /etc/X11/XF86Config.antiguo</i>
# <i>nano -w /etc/X11/XF86Config</i></pre>
<pre caption="Sección Pointer de XF86Config">
Section "InputDevice"

# Identificador y controlador

    Identifier	"Mouse1"
    Driver	"mouse"
    <i>Option "Protocol"    "IMPS/2" </i>
    Option "Device"      "/dev/psaux"
    <i>Option "ZAxisMapping"	"4 5"</i>

</pre>
<p>Debido a que tengo un intellimouse, cambié el "Protocol" de "PS/2" a
"IMPS/2". Para conseguir que la rueda produzca el efecto de desplazamiento
solo se necesita agregar la línea 'Option "ZAxisMapping" "4 5"', en donde
'4' y '5' corresponden al movimiento de la rueda hacia arriba y hacia
abajo.
</p>
<note>Netscape 4.x no realizará desplazamientos con la rueda por defecto;
tendrá que crear un archivo .Xdefaults primero. Vea
<uri>http://www-sop.inria.fr/koala/colas/mouse-wheel-scroll/</uri> para
consultar las instrucciones. Mejor aun, use <c>konqueror</c>,
<c>opera</c>, <c>mozilla</c>, <c>galeon</c>, o algún otro navegador de
verdad.</note>

<p>Ejecute <c>startx</c> de nuevo únicamente para asegurarse de que X aun
sigue apareciendo sin problemas. Si usted resulta tener una tarjeta
NVIDIA, ahora puede ser un buen momento para instalar los controladores de
aceleración de NVIDIA.</p>
<pre caption="Sólo para dueños de tarjetas NVIDIA">
# <c>emerge media-video/nvidia-kernel media-video/nvidia-glx</c>
# <c>nano -w /etc/X11/XF86Config</c>
# <c>echo NVdriver >> /etc/modules.autoload</c>
</pre>
<pre caption="Habilitando GLX en /etc/X11/XF86Config">
Section "Module"

# Esta línea carga el módulo GLX
#    Load       "glx" <comment>(Remueva el comentario de esta línea)</comment>
</pre>
<pre caption="Decirle a X que use el controlador nvidia en /etc/X11/XF86Config">
Section "Device"
    Identifier  "NVIDIA GeForce"
    #Driver      "nv"
    Driver      "nvidia"
    #VideoRam    32768
    # Inserte líneas de Reloj aquí si es apropiado
EndSection
</pre>
<p>Ejecute <c>startx</c> una vez más para asegurarse de que X aun aparece
sin problemas (esta vez con la pantalla de arranque de NVIDIA, si tiene
instalados los controladores correspondientes).  Asumiendo que lo hace,
interrumpa X y procederemos a iniciar un administrador de ventanas de
verdad esta vez.  Gracias a Achim, Danarmak y Verwilst, empaquetadores de
KDE en Gentoo, el ebuild de KDE configura el entorno KDE muy bien por sí
mismo. El administrador de despliegue KDM debe trabajar bien con tan solo
iniciarlo.</p>
<pre># <i>kdm</i></pre>
<p>Usted ahora debe ser capaz de iniciar una sesión y ver a KDE trabajando
en completo orden. Por supuesto el sonido no debe estar funcionando aun,
así que se perderá del molesto sonido de inicio de KDE, pero eso lo
arreglaremos en un momento. Abra una consola, escriba <c>ls /usr/bin</c>
(o cualquier otra cosa que inunde la ventana de la consola), y vea si la
rueda del mouse le permite desplazar la venta de consola hacia arriba y
abajo. ¡De veras debe funcionar!</p>

<p>Todo lo que nos hace falta es asegurarnos de que X arranque cuando
inicie el sistema Gentoo. Edite el archivo <path>/etc/rc.conf</path> de
modo que
<e>DISPLAYMANAGER="kdm"</e>.  
</p>
<pre>
# <i>nano -w /etc/rc.conf</i>
</pre>
<pre caption="/etc/rc.conf -- estableciendo DISPLAYMANAGER">
# ¿ Qué administrador de despliegue usa ?  [ xdm | gdm | kdm ]

DISPLAYMANAGER=kdm
</pre>
<p>
Ahora solo debemos asegurarnos de que el script de arranque <e>xdm</e> sea
leído cuando se inicie el sistema.
</p>
<pre>
# <i>rc-update add xdm default</i>
</pre>
<p>¡Reinicie, y observe si X aparece!</p>
<impo>El comando <c>rc-update</c>  es la versión mejorada en Gentoo Linux
del venerable comando <c>chkconfig</c> para administrar scripts de
arranque. Escriba <c>rc-update</c> sin argumentos para consultar una lista
de opciones.
</impo>

</body>
</section>
</chapter>

<chapter>
<title>Sonido</title>
<section>
<title>Alsa</title>
<body>

<p>Gentoo Linux soporta el sistema Alsa para el uso de sonido utilizando
el kernel por defecto. Alsa puede ejecutarse con o sin <e>devfs</e>. Una
nota: si ha instalado un nuevo paquete
<path>sys-kernel/linux-sources</path>, asegúrese de que su kernel Linux
tenga el soporte de sonido habilitado.</p>

<pre>
# <i>emerge media-sound/alsa-driver</i>
<comment>los módulos Alsa serán instalados ahora</comment>
# <i>depmod -a</i>
</pre>
<p>
Voy a asumir que usted tiene habilitado <e>devfs</e>; si no es así
entonces por favor consulte el FAQ de Gentoo:
<uri>http://www.gentoo.org/doc/faq.html</uri>.
</p>
<pre>
# <i>nano -w /etc/modules.autoload</i>
</pre>
<pre caption="modules.autoload con módulos Alsa">
# Indique los módulos a ser cargados, con argumentos, uno por línea
# Las siguientes líneas serán llamadas con "modprobe"
  
snd-emu10k1
snd-pcm-oss

</pre>
<p>
Usted querrá reemplazar <e>snd-emu10k1</e> con la tarjeta de sonido
apropiada para su sistema. Eche un vistazo en <path>/lib/modules/[versión
del kernel]/misc/</path> para consultar la lista de módulos. Si desea
tener compatibilidad con OSS, es una muy buena idea asegurarse de que la
línea <e>snd-pcm-oss</e> se encuentre allí también.
</p>
<warn>Haga lo que haga, no agrege módulos del kernel al archivo
<path>/etc/modules.conf</path> (si existe). El archivo
<path>/etc/modules.conf</path> es generado automáticamente, de modo que
los cambios que contenga serán perdidos.
</warn>
<p>Ahora configuramos los alias de <e>kerneld</e>.</p>
<pre>
# <i>nano -w /etc/modules.d/aliases</i>
# <i>update-modules</i>
</pre>
<pre caption="final de /etc/modules.d/aliases con las adiciones de Alsa">
<i># Alsa</i>
<i>alias snd-card-0 snd-emu10k1</i>
<i>alias snd-card-1 snd-emu10k1</i>
<i>alias snd-card-2 snd-emu10k1</i>
<i>alias snd-card-3 snd-emu10k1</i>
<i>alias snd-card-4 snd-emu10k1</i>
<i>alias snd-card-5 snd-emu10k1</i>
<i>alias snd-card-6 snd-emu10k1</i>
<i>alias snd-card-7 snd-emu10k1</i>
</pre>
<p>
De nuevo, usted querrá reemplazar <e>snd-card-emu10k1</e> con su tarjeta
de sonido.
</p>
<p>
También debería verificar que <path>/etc/devfsd.conf</path> tenga
registrados correctamente los dispositivos alsa y los permisos.</p>
<pre>
# <i>nano -w /etc/devfsd.conf</i>
</pre>
<pre caption="final de devfsd.conf file con las adiciones de Alsa">
# Todo lo relacionado con ALSA/OSS
# Comente/modifique esto si desea cambiar los permisos de los dispositivos
# de audio
LOOKUP          snd          MODLOAD ACTION snd
REGISTER        sound/.*     PERMISSIONS root.audio 660
REGISTER        snd/.*       PERMISSIONS root.audio 660
</pre>
<note>Note que devfsd.conf establece los permisos de
<path>/dev/sound</path> para que sean <c>root.audio</c>. Por lo tanto,
para que usuarios diferentes a root utilicen el audio, éstos deben ser
parte del grupo <c>audio</c>.
</note>
<p>
Reinicie, o simplemente cargue los módulos de sonido que colocó en
<path>/etc/modules.autoload</path> con <c>modprobe</c>, y todo lo
referente al sonido debería ser correctamente preparado. Sin embargo, aun
no escuchará sonido alguno, porque alsa mantiane todos los canales de
sonido en silencio por defecto.
</p>
<pre>
# <i>emerge media-sound/alsa-utils</i>
# <i>/etc/init.d/alsasound start</i>
# <i>amixer</i>

Group 'Input Gain',0
  Capabilities: volume mute jointly-mute
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 15
  Front-Left: 11 [73%] [mute] [---]
  Front-Right: 11 [73%] [mute] [---]
Group 'Master Mono',0
  Capabilities: volume mute capture exclusive-capture
  Capture exclusive group: 1
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 31
  Front-Left: 23 [74%] [mute] [---]
  Front-Right: 23 [74%] [mute] [---]
Group 'Headphone',0
  Capabilities: volume mute jointly-mute
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 31
  Front-Left: 0 [0%] [mute] [---]
  Front-Right: 0 [0%] [mute] [---]
Group 'Master',0
  Capabilities: volume mute jointly-mute capture exclusive-capture
  Capture exclusive group: 1
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 63
  Front-Left: 50 [79%] [mute] [---]
  Front-Right: 50 [79%] [mute] [---]
<comment>[recortado para brevedad]</comment>

# <i>amixer set Master 100 unmute</i>
# <i>amixer set PCM 100 unmute</i>
# <i>aplay /usr/kde/2/share/sounds/pop.wav</i> <comment>(pop.wav es parte de KDE)</comment>
</pre>
<p>
Luego de instalar las utilidades de alsa, usamos <c>amixer</c> para
habilitar los canales de sonido Master y PCM y establecer su volumen al
100%. Podemos chequear si el sonido trabaja correctamente mediante el
comando <c>aplay</c> (alsa play). Si escucha una especie de golpe,
entonces el sonido está trabajando. Luego, ajuste las preferencias de
volumen a su gusto; el programa <c>alsamixer</c> basado en ncurses es
un buen mecanismo para configurarlo todo "apenas bien".
</p>
<pre caption="únicamente para usuarios de rc6+">
# <i>rc-update add alsa default</i>
</pre>
<note>Para usuarios de versiones anteriores a rc6, el ebuild de alsa-utils
agrega automáticamente el script de arranque <e>alsa</e> a los niveles de
ejecución 3, 4 y 5.</note>
<p>
Cuando renicie el sistema, el script de arranque <e>alsa</e> guardará y
recuperará apropiadamente sus preferencias de volumen.
</p>
</body>
</section>
<section>
<title>Módulos de Sonido del Kernel Estándar</title>
<body>
<p>Para configurar el sonido mediante el kernel estándar, es necesario que
recompile el kernel si no compiló su módulo de sonido a la hora de
instalar Gentoo. Si decide compilar el controlador de sonido como un
módulo (no compilándolo directamente en el kernel), entonces necesita
agregar el nombre del módulo (sin la extensión .o) al archivo
<path>/etc/modules.autoload</path>. Reinicie su equipo si ha compilado el
módulo de sonido en el kernel, o simplemente realice <c>modprobe
nombre_del_driver</c> si compiló el controlador de sonido como módulo. Con un
poco de suerte, el controlador de sonido apropiado será cargado ahora. Aunque
para producir sonido se requieren otros cuantos pasos.</p>
<pre caption="únicamente para usuarios que no usen devfs">
# <i>cd /dev</i>
# <i>/usr/sbin/MAKEDEV audio</i>
</pre>
<pre>
# <i>cat /usr/kde/2/share/sounds/pop.wav &gt; /dev/dsp</i>
# <i>emerge media-sound/sox</i>
# <i>play /usr/kde/2/share/sounds/pop.wav</i>
</pre>
<p>
Si al ejecutar el <e>cat</e> del archivo .wav hacia <path>/dev/dsp</path>
se produce cualquier sonido, entonces es probable que el sonido esté
trabajando. Al incorporar el paquete sox, es posible usar el comando
<c>play</c> para reproducir archivos .wav (y, en contraste al uso de
<c>cat</c>, el archivo .wav de hecho debería sonar bien cuando se usa
<c>play</c>).  </p>
<!-- 
found that when running <e>devfs</e> the /dev/MAKEDEV script
would be missing.  Help? Well, you shouldn't need to run MAKEDEV if you're
using devfs (maybe to get /dev/dsp created?), but if you need it, its real home is in /usr/sbin (/dev/MAKEDEV is
a symlink.  I changed the text to reflect this. [drobbins]
-->
</body>
</section>
<section>
<title>Sonido y KDE</title>
<body>
<p>
KDE tiene algunas utilidades de sonido interesantes, incluyendo el
mezclador de sonido de KDE <c>kmix</c>.  
</p>
<pre>
# <i>emerge search kdemultimedia</i>
[ Results for search key : kdemultimedia ]
[ Applications found : 1 ]

*   kde-base/kdemultimedia
      Latest version Available:  2.2.2
      Latest version Installed:  2.2.2
      Description:  ${DESCRIPTION}Multimedia
# <i>kmix</i>
</pre>
<note>Si kmix no puede encontrar un mezclador, probablemente piense que
usted no tiene soporte para sonido. Finalice su sesión y elimine
<path>~/.kde/share/config/kmixrc</path> y
<path>~/.kde/share/config/kmix:*</path>, luego inicie su sesión de nuevo.
Esta vez kmix debe encontrar el mezclador de sonido correctamente.
</note>
</body>
</section>
</chapter>

<chapter>
<title>Correo</title>
<section>
<title>Postfix -- Instalación y Configuración</title>
<body>
<p>
Personalmente me gusta el sistema de correo <c>postfix</c> ya que emula
<c>sendmail</c> sin la considerable pesadilla de tener que configurar
<c>sendmail</c>. Mientras estamos en el asunto, aprovecharemos para
instalar también <c>mutt</c>, un cliente de correo, de modo que podamos
probar nuestra configuración de <c>postfix</c>.
</p>
<pre>
# <i>emerge --pretend net-mail/postfix net-mail/mutt</i>

These are the packages that I would merge, in order.
 
Calculating dependencies... done!
[ebuild N  ] dev-libs/libpcre-3.4-r1 to /
[ebuild N  ] net-mail/mailbase-0.00-r1 to /
[ebuild N  ] net-mail/postfix-20010228.2 to /
[ebuild N  ] net-mail/mutt-1.3.22.1 to /

# <i>emerge net-mail/postfix net-mail/mutt</i>
</pre>
<p>
Si tiene pensado usar su servidor de correo solo para enviar mensajes,
entonces postfix ya se encuentra configurado para usted. De otro modo,
usted querrá editar el archivo <path>/etc/postfix/main.cf</path>. El
archivo <path>main.cf</path> se encuentra razonablemente bien documentado,
y los valores por defecto son razonables para una máquina independiente.
Si su estación de trabajo se encuentra directamente en conexión con
Internet (es decir, tiene su propia dirección IP no-privada y nombre DNS)
entonces el único cambio que probablemente tenga que hacer es habilitar
postfix para recibir correo.
</p>
<pre caption="activando la recepción de correo en main.cf">
# RECEPCION DE CORREO

# El parámetro inet_interfaces especifica las direcciones de interfaz de
# red que este sistema de correo utiliza para recibir correo. Por defecto,
# el software hace uso de todas las interfaces del equipo. El parámetro
# también controla la entrega de correo a usuario@[direccion.ip].
#
#inet_interfaces = all
#inet_interfaces = $myhostname
#inet_interfaces = $myhostname, localhost
<i>inet_interfaces = $myhostname, localhost</i>
<i>mydestination = $myhostname, localhost.$mydomain</i>
</pre>


</body>
</section>
<section>
<title>Prueba de Postfix (con Mutt)</title>
<body>
<p>
Veamos si funciona.
</p>
<pre>
# <i>postfix check</i>
<!--
postfix-script: warning: creating missing Postfix pid directory
postfix-script: warning: creating missing Postfix incoming directory
postfix-script: warning: creating missing Postfix active directory
postfix-script: warning: creating missing Postfix bounce directory
postfix-script: warning: creating missing Postfix defer directory
postfix-script: warning: creating missing Postfix deferred directory
postfix-script: warning: creating missing Postfix flush directory
postfix-script: warning: creating missing Postfix saved directory
postfix-script: warning: creating missing Postfix corrupt directory
postfix-script: warning: creating missing Postfix public directory
postfix-script: warning: creating missing Postfix private directory
-->
# <i>newaliases</i>
# <i>postfix start</i>
postfix-script: starting the Postfix mail system
# <i>mutt -x root</i>
/root/.maildir does not exist. Create it? ([y]/n): <comment>[responda y]</comment>
To:  &lt;root&gt;
Subject: Prueba
(Finalice un mensaje con un `.' solo en una línea)
esta es una prueba
.

# <i>mutt</i>
<comment>[Debería ver su mensaje]</comment>
</pre>
<p>
Mediante el uso de <c>postfix check</c> nos aseguramos de que
<path>main.cf</path> sea procesado correctamente y que un número de
directorios importantes sean creados. Ejecutando <c>newaliases</c> se
establecen los alias de correo del sistema, y luego <c>postfix start</c>
inicia el agente de correo. Después usé <c>mutt</c> (en modo <c>mailx</c>,
o el clásico <c>mail</c>) para enviarme un mensaje a mí mismo en el equipo
local. A lo largo del camino <c>mutt</c> crea el directorio de cola de
correo del usuario (root, en este caso), <path>~/.maildir</path>. Al
ejecutar <c>mutt</c> en modo interactivo completo me mostró entonces mi
mensaje, así que al menos el envío y la entrega local están trabajando.
Luego envié un mensaje a una de mis direcciones de correo electrónico
no-locales (no mostrado) y me aseguré de que el correo haya llegado
realmente.
</p>
<warn>Si envía correo a alguna cuenta externa desde una máquina en una red
privada usando el archivo <path>main.cf</path> por defecto, es posible que
nunca lo vea. Varios servidores de correo rechazan automáticamente los
mensajes provenientes de una fuente que no puede ser ubicada mediante
reversión de DNS.</warn>
<p>
Asumiendo que todo está funcionando bien, es momento de configurar postfix
para que arranque con el inicio del sistema.
</p>
<pre>
# <i>postfix stop</i>
postfix-script: starting the Postfix mail system
# <i>rc-update add postfix default</i>
 * postfix added to runlevel default...
 * Caching service dependencies...          [ ok ] 
 * rc-update complete.
# <i>/etc/init.d/postfix start</i>
Starting postfix......     [  ok  ]
</pre>
<impo>Puede que algunos usuarios veteranos de <c>sendmail</c> o
<c>postfix</c> se sientan más cómodos almacenando el correo en
<path>/var/spool/mail</path> en lugar de sus directorios de usuario, y con
que su correo se almacene en formato <e>mbox</e> en lugar del formato
<e>maildir</e>. No es del todo complicado reconfigurar <c>postfix</c> y
<c>mutt</c> para usar el formato del sistema de buzones de correo estándar
de unix (<e>mbox</e>) en su lugar. Edite <path>/etc/postfix/main.cf</path>
y allí comente <i>home_mailbox</i> y remueva el símbolo de comentario en
<i>mail_spool_directory = /var/spool/mail</i>. Cree el directorio de cola
de correo con <c>mkdir -p /var/spool/mail</c> y reinicie <c>postfix</c>.
Eso se encargará del agente de correo, para <c>mutt</c> simplemente tiene
que editar <path>/etc/mutt/Muttrc</path> para usar <e>mbox</e> con <i>set
mbox_type = mbox</i> y el directorio <path>/var/spool/mail</path> con
<i>set spoolfile=/var/spool/mail</i>.
</impo>
<p>
Si prefiere un cliente de correo con interfaz gráfica, instalaremos un
servidor de correo basado en web, Squirrelmail, más adelante en esta guía.
Alternativamente, Daniel Robbins recomienda altamente una combinación de
IMAP (el cual instalaremos más adelante como prerequisito de Squirrelmail)
y el cliente de KDE <c>kmail</c>. El programa kmail es parte de
<path>kde-base/kdenetwork</path>: </p>
<pre>
 # <i>emerge --search kdenetwork</i>
[ Results for search key : kdenetwork ]
[ Applications found : 1 ]

*  kde-base/kdenetwork
      Latest version Available:  2.2.2
      Latest version Installed:  2.2.2
      Description:  ${DESCRIPTION}Network
</pre>
<p>
Más adelante instalaremos también el programa <e>Evolution</e> de Ximian
como nuestro software para Administración de Información Personal de
preferencia, completo con soporte para Palm Pilots. Este programa puede,
también, servir como un excelente cliente de correo.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Impresión</title>
<section>
<title>Impresión simple -- PDQ</title>
<body>
<p>
Para sistemas simples en donde no se necesita soporte para <c>samba</c>,
el sistema de impresión PDQ es agradable y sencillo.
</p>
<pre>
# <i>emerge net-print/pdq</i>
# <i>xpdq</i>
</pre>
<p>
Simplemente pulse sobre <path>Printer/Add printer</path> y agregue su
impresora. Si su tipo de impresora no se encuentra listada, visite
<uri>http://www.linuxprinting.org</uri>, y podrá generar los archivos
requeridos desde su sitio web. Usted querrá pulsar sobre "Driver options"
para continuar y completar la configuración de la impresora en
<c>xpdq</c>. Cualquier impresora configurada mediante la ejecución de
<c>xpdq</c> como root estará disponible a todos los usuarios. ¡Eso es todo
lo que requiere!
</p>
</body>
</section>
<section>
<title>Impresión más refinada -- CUPS</title>
<body>
<p>
CUPS es un sistema de cola de impresión mucho mayor que es completamente
apropiado para su uso como servidor de impresión de gran escala.
Afortunadamente es bastante fácil de configurar, ya que la mayor parte de
su configuración puede ser establecida usando el servidor web incorporado
de CUPS. Aunque CUPS es nominalmente un sistema de cola de impresión tipo
System V (lo que quiere decir que usa la serie de comandos <c>lp</c>),
emula también todos los comandos <c>lpr</c>.
</p>
<pre>
# emerge --pretend net-print/gimp-print-cups
These are the packages that I would merge, in order.
 
Calculating dependencies.. done!
[ebuild N  ] net-print/cups-1.1.10-r6 to /
[binary N  ] net-print/gimp-print-cups-4.1.1 to /
# emerge gimp-print-cups
# rc-update add cupsd default
 * cupsd added to runlevel default...
 * Caching service dependencies...         [ ok ] 
 * rc-update complete.
# /etc/init.d/cupsd start
Starting Common Unix Printing System...... [  ok  ]
# konqueror localhost:631
</pre>
<p>
El paquete <c>gimp-print-cups</c> es un conjunto de controladores de
impresión para cups, lo cual es útil ya que el paquete cups mismo incluye
drivers únicamente para impresoras HP y Epson. Al incorporar
<c>gimp-print-cups</c> se instala cups como una dependencia. Una vez cups
es instalado, agregamos sus scripts de arranque al nivel de ejecución por
defecto usando <c>rc-update</c>, y luego activamos el demonio de cups
iniciando el script de arranque.
</p>
<p>
La configuración de cups solamente requiere usar un navegador web para
conectarse al servidor web que cups ejecuta en la red del equipo local
sobre el puerto 631. [Note que debido a que el servidor web de cups está
configurado para aceptar peticiones solo en localhost y <e>no</e> en
cualquiera de las interfaces ethX, éste es razonablemente seguro. Por
supuesto, eso significa también que es difícil administrar cups
remotamente en cualquier forma agradable (el comando de consola
<c>lpadmin</c> podría ser una opción, pero es también una considerable
pesadilla). Por fortuna, el servidor web de cups se renderiza bastante
bien en <c>lynx</c>, de modo que puede ser administrado desde una ventana
de terminal.] Una vez se conecte a la interfaz web, pulse (o realice su
equivalente si usa <c>lynx</c>) sobre "Do Administrative Tasks". Se le
preguntará por un nombre de cuenta y contraseña; usted puede usar "root"
(y la contraseña de root), o proveer un nombre de usuario y contraseña de
algún usuario que haga parte del grupo "lp". De nuevo, ya que el servidor
web existe solo en localhost, no debe preocuparse porque esa información
sea transmitida en Internet. Para agregar una impresora pulse sobre "Add
Printer", y siga las instrucciones. Puede obtenerse ayuda pulsando sobre
"Help", y consultando el Manual del Administrador de Software. Si
encuentra que usted carece del controlador de impresión apropiado, puede
crear uno dirigiéndose al asombroso sitio
<uri>http://www.linuxprinting.org</uri>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Samba</title>
<section>
<body>
<p>
Samba es un sobresaliente paquete que le permite a su equipo linux
compartir archivos e impresoras con equipos MS Windows. Para conocer más
información, lea los artículos sobre Samba escritos por Daniel
Robbins en <uri>http://www.ibm.com/developerworks</uri>.
</p>
<pre>
# <i>emerge net-fs/samba</i>
# <i>rc-update add samba default</i>
# <i>cd /etc/samba</i>
# <i>cp smb.conf.example smb.conf</i>
# <i>nano -w smb.conf</i>
</pre>
<pre caption="smb.conf -- grupo de trabajo">
# workgroup = Nombre-de-Dominio-NT o Nombre-de-Grupo-de-Trabajo, ejemplo: REDHAT4
   workgroup = MIGRUPO
   <comment>[ajuste este valor para que coincida con su grupo de trabajo]</comment>
</pre>
<pre caption="smb.conf -- impresión con cups">
# No debe ser necesario especificar el tipo de sistema de impresión a
# menos que no sea estándar. Algunos sistemas de impresión soportados
# actualmente incluyen:
# bsd, sysv, plp, lprng, aix, hpux, qnx
;   printing = bsd
    printing = cups
</pre>
<pre caption="smb.conf -- encriptación">
# Puede que usted quiera usar encriptación de contraseñas. Por favor lea
# ENCRYPTION.txt, Win95.txt y WinNT.txt en la documentación de Samba.
# No habilite esta opción a menos que haya leído esos documentos
encrypt passwords = yes
</pre>
<p>
Personalmente tengo unas necesidades bastante básicas del software Samba.
Tan sólo quiero tener la capacidad de compartir archivos entre mis equipos
linux y windows, y quiero usar mi equipo linux como servidor de impresión
(usando <c>cups</c>). Luego de la instalación, me basta con hacer algunas
ediciones pequeñas del archivo <path>/etc/samba/smb.conf</path>.
Específicamente, la variable <e>workgroup</e> necesita coincidir con el
grupo de trabajo de la red windows (usualmente uso "OLYMPUS", pero
"WORKGROUP" es el valor por defecto en windows, si no recuerdo mal),
<e>printing</e> necesita ser <e>cups</e> en lugar de <e>bsd</e>, y la
línea <e>encrypt passwords = yes</e> necesita dejar de ser un comentario.
Las máquinas windows usan contraseñas encriptadas por defecto, de modo que
ese último cambio es esencial a menos que quiera jugar con el registro de
windows de todos sus equipos windows <comment>[no recomendado]</comment>.
Desafortunadamente, windows usa un método de encriptación diferente para
las contraseñas que el de Linux, así que debe mantener un archivo de
contraseñas aparte para samba.
</p>
<pre>
# <i>smbpasswd -a usuario</i> <comment>[Reemplace "usuario" con su nombre de usuario]</comment>
New SMB password:
Retype new SMB password:
Added user usuario.
</pre>
<note>
Antes de agregar un usuario en la lista de contraseñas de samba, ese
usuario debe estar listado antes en <path>/etc/passwd</path>.
</note>
<p>
Para cada usuario a quien quiera otorgarle la capacidad de usar samba
desde una máquina windows, necesita ejecutar el comando <c>smbpasswd</c>.
Samba almacena las contraseñas en
<path>/etc/samba/private/smbpasswd</path>, el cual será creado para usted
la primera vez que ejecuta el comando <c>smbpasswd</c>.
</p>
<pre>
# <i>/etc/init.d/samba start</i>
Starting samba...        [  ok  ]
</pre>
<p>
Inicie samba y deberá ser capaz de conectarse a su equipo Gentoo Linux
desde cualquiera de sus equipos windows y ver el directorio principal del
usuario bajo el que se conectó, así como las impresoras que ha
configurado. Si no puede conectarse, eche un vistazo a 
<path>/usr/share/doc/samba-2.2.3a/full_docs/textdocs/DIAGNOSIS.txt.gz</path>
para consultar información adicional.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Apache y el webmail Squirrelmail</title>
<section>
<title>Apache con SSL y PHP</title>
<body>
<p>Asumiendo que usted tiene una dirección IP estática (o que usted usa un
servicio como dyndns con su dirección IP dinámica), entonces puede que
usted quiera disponer de una manera efectiva de revisar su correo
electrónico cuando esté fuera de la ciudad. La solución que yo he elegido
es configurar un servidor de webmail, Squirrelmail, que pueda accesar
remotamente usando cualquier navegador web.</p>
<p>El primer paso es instalar un servidor web. La mayor parte del mundo
usa Apache; nosotros también. Instalaremos también PHP (PHP4, de hecho) al
mismo tiempo, ya que Squirrelmail es un programa en PHP. Los números de
versión mostrados en el siguiente listado de código pueden ser diferentes
al momento que usted lea esto. Por favor ajústelos acordemente. ¡No se
limite a copiar y pegar estos comandos en su terminal!</p>
<pre>
# <i>emerge net-www/apache dev-lang/php net-www/mod_ssl</i>
# <i>ebuild /var/db/pkg/dev-lang/php-4.1.2-r7/php-4.1.2-r7.ebuild config</i>
# <i>ebuild /var/db/pkg/net-www/mod_ssl-2.8.8/mod_ssl-2.8.8.ebuild config</i>
# <i>nano -w /etc/apache/conf/apache.conf</i>
</pre>
<impo>Usted querrá asegurarse de instalar mod_ssl si desea que Apache
tenga soporte SSL. ¡Si desea revisar su correo electrónico remotamente sin
enviar su contraseña por Internet sin encriptación alguna, entonces usted
<e>querrá</e> SSL!</impo>
<p>Debería echarle un buen vistazo al archivo
<path>/etc/apache/conf/apache.conf</path>, ya que Apache es bastante
personalizable. Por defecto, la ruta de documentos raíz de Apache (en
donde comienza a buscar por archivos html cuando usted se conecta a 
http://www.nombre-de-servidor.foo o http://localhost) es
<path>/home/httpd/htdocs</path>; siéntase libre de reubicarla si lo desea.</p>
<pre caption="/etc/apache/conf/apache.conf">
# NO agregue un slash al final de la ruta del directorio.
#
DocumentRoot "/home/httpd/htdocs" <comment>(edite esta línea si lo desea)</comment>

</pre>
<pre>
# <i>rc-update add apache default</i>
 * apache added to runlevel default...
 * Caching service dependencies...               [ ok ]
 * rc-update complete.
# <i>nano -w /etc/conf.d/apache</i>
</pre>
<p>Use <c>rc-update</c> para agregar Apache al nivel de ejecución por
defecto, y luego edite <path>/etc/conf.d/apache</path> para agregar las
siguientes líneas de modo que Apache cargue automáticamente los módulos
SSL y PHP al inicio.</p>
<pre caption="/etc/conf.d/apache">
APACHE_OPTS="-D SSL -D PHP4"
</pre>
<pre>
# <i>/etc/init.d/apache start</i>
 * Starting Apache...                            [ OK ]
# <i>lynx localhost</i>
</pre>
<p>Puede revisar para asegurarse de que su servidor web Apache está
funcionando, usando cualquier navegador para conectarse a localhost. Para
asegurarde de que está trabajando el soporte SSL, utilice un navegador
para conectarse a <uri>http<comment>s</comment>://localhost</uri>. El
prefijo <c>https</c> le dice al navegador que realice una conexión
<e>segura</e> al servidor usando SSL. Algunos navegadores gráficos tienen
un ícono en forma de candado en alguna parte para indicar que la conexión
es segura.</p>
<note>Cuando establezca una conexión segura con su servidor, muy
posiblemente recibirá una advertencia de que el certificado de seguridad
del sitio no ha sido reconocido. El ebuild de mod_ssl instala un
certificado de seguridad auto-firmado, el cual se pretende que sea usado
para realizar pruebas únicamente. Vea el manual de <c>mod_ssl</c>:
<uri>http://localhost/doc/mod_ssl-2.8.8/html</uri>. Para uso personal, un
certificado auto-firmado es aceptable.</note>
<p>Ahora necesitamos asegurarnos de que PHP esté trabajando
correctamente. El primer paso es crear un archivo PHP sencillo y colocarlo
bajo el directorio DocumentRoot de Apache.</p>
<pre>
# <i>echo "&lt;? phpinfo(); ?&gt;" > /home/httpd/htdocs/test.php</i>
# <i>lynx http://localhost/test.php</i>
</pre>
<pre caption="Apache + PHP trabajando">
                                                           phpinfo() (p1 of 26)
                                  PHP Logo
 
                             PHP Version 4.0.6
 
     System Linux my.server.edu 2.4.10 #1 Tue Oct 9 16:33:50 Local
           time zone must be set--see zic manuali686 i686 unknown
                           Build Date Oct 16 2001
</pre>
<p>Si ve algo como esto, entonces Apache está procesando código PHP
exitosamente.</p>
<warn>Si observa el resultado completo previamente descrito, encontrará
que el script <path>test.php</path> entrega <e>bastante</e> información
sobre su sistema. Usted debería deshacerse de él tan pronto sepa que php
trabaja correctamente. (O puede hacer lo que yo hice, y simplemente <c>mv
test.php test.phps</c>.  Apache desplegará <path>test.phps</path> como
código fuente PHP en lugar de ejecutar el script.)</warn>
</body>
</section>
<section>
<title>Courier IMAP</title>
<body>
<p>Squirrelmail es una aplicación PHP, pero depende de un servidor IMAP
como el pegamento entre el servidor web y el correo electrónico. Ya que
Gentoo Linux usa carpetas de correo Maildir por defecto, Courier IMAP es
una buena opción.</p>
<pre>
# <i>emerge net-mail/courier-imap</i>
# <i>rc-update add courier-imap default</i>
 * courier-imap added to runlevel default...
 * Caching service dependencies...                        [ ok ]
 * rc-update complete.
# <i>nano -w /etc/courier-imap/authdaemonrc</i>
# <i>/etc/init.d/courier-imap start</i>
# <i>telnet localhost 143</i>
Trying 127.0.0.1...
Connected to localhost.localdomain.
Escape character is '^]'.
* OK Courier-IMAP ready. Copyright 1998-2001 Double Precision, Inc.  
See COPYING for distribution information.
1 LOGIN usuario passwd <comment>(&lt;-- reemplace "usuario" con su nombre
                        de usuario y "passwd" con su contraseña)</comment>
1 OK LOGIN OK
<comment>(Pulse &lt;ctrl&gt;-"]" y escriba "quit" para salir)</comment>
</pre>
<pre caption="Correcta autorización en /etc/courier-imap/authdaemonrc">
##NAME: authmodulelist:0
#
# Los módulos de autenticación que están enlazados a authdaemond. La lista
# por defecto se encuentra instalada. Usted puede deshabilitar
# selectivamente los módulos simplemente removiéndolos de la siguiente
# lista. Los módulos disponibles que puede usar son: authcustom authcram
# authuserdb authpam

#authmodulelist="authcustom authcram authuserdb authpam"
authmodulelist="authpam"
</pre>
<impo>Courier IMAP usualmente define directamente el nombre del directorio
de entrada de correo tipo Maildir del usuario que es usado en su script rc
de arranque, <path>/usr/lib/courier-imap/imapd.rc</path>, al valor
<path>$HOME/Maildir</path>. Sin embargo Gentoo linux usa $HOME/.maildir en
su lugar, así que el ebuild de courier-imap modifica el script
<path>imapd.rc</path> para usar <e>$MAILDIR</e>, el cual obtiene del
script de arranque de Gentoo <path>/etc/init.d/courier-imap</path>. Si
decide usar una casilla de correo de usuario diferente a
<path>.maildir</path>, tendrá que modificar la entrada
<e>MAILDIR=.maildir</e> en el script de arranque de courier-imap.</impo>
<p>
Si quiere que Courier IMAP tenga soporte para SSL, solo necesita crear el
certificado SSL de IMAP (y decirle a courier-imap en dónde encontrarlo),
</p>
<pre>
# <i>/usr/sbin/mkimapdcert</i> 
</pre>
<p>y entonces iniciar imap-ssl.</p>
<pre>
# <i>rc-update add courier-imap-ssl default</i>
# <i>/etc/init.d/courier-imap-ssl start</i>
</pre>
<p>Puede verificar que imap esté trabajando usando cualquier cliente de
correo habilitado para IMAP, tal como netscape, kmail o mutt.</p>
<pre>
# <i>mutt -f imap://localhost</i>
</pre>
</body>
</section>
<section>
<title>Squirrelmail</title>
<body>
<p>Por fortuna, la instalación y configuración de Squirrelmail, una vez
todos los componentes están en su lugar, es bastante directa.</p>
<pre>
# <i>emerge net-mail/squirrelmail</i>
# <i>cd /home/httpd/htdocs</i>
# <i>cd squirrelmail</i>
# <i>./configure</i>
</pre>
<note>Si su DocumentRoot para Apache no es
<path>/home/httpd/htdocs</path>, entonces querrá editar el ebuild
<path>net-mail/squirrelmail</path> para que apunte hacia el lugar
apropiado.</note>
<p>Para que squirrelmail funcione correctamente, necesita asegurarse de
que todos los archivos tengan como dueño al usuario bajo el que se
ejecuta Apache (el ebuild de squirrelmail asume que ese usuario es
"apache").  Use <c>./configure</c> para seleccionar la opción
<e>2</e>.</p>
<pre caption="Configuración de Squirrelmail -- Parámetros
del servidor">
SquirrelMail Configuration : Read: config.php
---------------------------------------------------------
Server Settings
1.  Domain               : my.server.edu
2.  IMAP Server          : localhost
3.  IMAP Port            : 143
4.  Use Sendmail/SMTP    : SMTP
6.    SMTP Server        : localhost
7.    SMTP Port          : 25
8.    Authenticated SMTP : false
9.  Server               : courier
10. Invert Time          : false
11. Delimiter            : detect
 
R   Return to Main Menu
C.  Turn color off
S   Save data
Q   Quit
 
Command >>
</pre>
<p>Asegúrese de que <e>Server</e> está definido como <e>courier</e>.
Regrese al menú principal y seleccione la opción <e>4</e>, Opciones
Generales.</p>
<pre caption="Configuración de Squirrelmail -- Opciones generales">
SquirrelMail Configuration : Read: config.php
---------------------------------------------------------
General Options
1.  Default Charset        : iso-8859-1
2.  Data Directory         : ../data/
3.  Attachment Directory   : /tmp/
4.  Default Left Size      : 150
5.  Usernames in Lowercase : false
 
R   Return to Main Menu
C.  Turn color off
S   Save data
Q   Quit
 
Command >>
</pre>
<p>Yo uso el directorio de datos del paquete, aunque sería más seguro usar
alguno por fuera de la ruta de documentos de Apache. También uso
<path>/tmp</path> como mi directorio para almacenar archivos adjuntos.</p>

<p>Antes de usar squirrelmail, primero debemos modificar el archivo de
configuración de PHP, <path>/etc/php4/php.ini</path>, para activar el
registro de variables y luego reiniciar apache:</p>
<pre>
# <i>nano -w /etc/php4/php.ini</i>
# <i>/etc/init.d/apache restart</i>
</pre>
<pre caption="Editando /etc/php4/php.ini">
; Usted debe hacer lo posible por escribir sus scripts de modo que no
; requieran que register_globals está activado; Usar variables de
; formularios como globales puede guiarlo muy fácilmente a posibles
; problemas de seguridad, si el código no es muy bien estudiado.
;register_globals = Off
<comment>register_globals = On</comment>
</pre>

<p>Ahora puede dirigirse a <uri>https://localhost/squirrelmail/</uri>, ¡y
debería funcionar!</p>
<pre>
# <i>lynx https://localhost/squirrelmail/</i>
</pre>
<pre caption="Página de inicio de sesión de Squirrelmail">
                                           SquirrelMail - Login
                               [sm_logo.jpg]
 
                      SquirrelMail version 1.2.0 [rc2]
                    By the SquirrelMail Development Team
 
                             SquirrelMail Login
 
       Name: ____________________
   Password: ____________________
 
                                   Login
</pre>
<p>(Realmente no sugiero usar lynx con Squirrelmail, ¡pero bien podría
hacerlo!)</p>
</body>
</section>
</chapter>

<chapter>
<title>Administración de Información Personal</title>
<section>
<title>Evolution con soporte para Palm</title>
<body>
<p>Evolution es una herramienta de Administración de Información Personal
excepcionalmente agradable. El primer paso es incorporar evolution. Si en
realidad tiene pensado usar evolution con un Palm pilot, asegúrese de que
el valor "pda" esté presente entre sus variables USE en
<path>/etc/make.conf</path> antes de incorporar evolution.  </p>
<pre>
# <i>emerge --pretend net-mail/evolution</i>

These are the packages that I would merge, in order.

Calculating dependencies................................ done!
[ebuild N  ] app-text/ghostscript-6.50-r2 to /
[ebuild N  ] app-text/tetex-1.0.7-r4 to /
[ebuild   U] media-libs/freetype-2.0.5-r1 to /
[ebuild N  ] gnome-base/ORBit-0.5.12-r1 to /
[ebuild N  ] media-libs/giflib-4.1.0-r3 to /
[ebuild N  ] media-libs/imlib-1.9.10-r1 to /
[ebuild N  ] gnome-base/gnome-libs-1.4.1.2-r2 to /
[ebuild N  ] dev-libs/libxml-1.8.16 to /
[ebuild N  ] gnome-base/libglade-0.17-r3 to /
[ebuild N  ] media-libs/gdk-pixbuf-0.14.0 to /
[ebuild N  ] gnome-base/gnome-print-0.34 to /
[ebuild N  ] dev-libs/popt-1.5 to /
[ebuild N  ] dev-util/intltool-0.12 to /
[ebuild N  ] gnome-base/oaf-0.6.7 to /
[ebuild N  ] gnome-base/bonobo-1.0.17 to /
[ebuild N  ] dev-libs/libunicode-0.4-r1 to /
[ebuild N  ] dev-util/guile-1.5.4 to /
[ebuild N  ] gnome-base/gconf-1.0.7-r2 to /
[ebuild N  ] gnome-base/gnome-vfs-1.0.3 to /
[ebuild N  ] gnome-extra/gal-0.18.1 to /
[ebuild N  ] gnome-base/control-center-1.4.0.1-r3 to /
[ebuild N  ] dev-libs/pilot-link-0.9.6-r3 to /
[ebuild N  ] app-text/scrollkeeper-0.2 to /
[ebuild N  ] gnome-base/gnome-core-1.4.0.4-r3 to /
[ebuild N  ] gnome-extra/gnome-pilot-0.1.64 to /
[ebuild N  ] gnome-base/libghttp-1.0.9-r1 to /
[ebuild N  ] gnome-extra/gtkhtml-1.0.0 to /
[ebuild N  ] gnome-extra/bonobo-conf-0.14 to /
[ebuild N  ] app-arch/zip-2.3-r1 to /
[ebuild N  ] app-arch/unzip-5.42 to /
[ebuild N  ] net-www/mozilla-0.9.6-r4 to /
[ebuild N  ] net-mail/evolution-1.0-r2 to /

# <i>emerge net-mail/evolution</i> 
</pre>
<p>
Desafortunadamente, la instalación de evolution toma un poco más de
toda una vida (¡note que <c>mozilla</c> es una dependencia!); sírvase
varios galones de café/té mientras espera.
</p>
<p>
Durante la instalación de <c>evolution</c>, las herramientas necesarias
para el soporte de Palm pilot debieron instalarse también. Para asegurarse
de que usuarios comunes puedan sincronizar un pilot, necesitamos hacer un
par de cambios a los permisos del puerto serial. Asumiré que su equipo
Palm se conecta al primer puerto serial (/dev/ttyS0, o /dev/tts/0 en
notación "devfs").
</p>
<pre>
# <i>groupadd serial</i>
# <i>chown root.serial /dev/tts/0</i>
# <i>chmod g+rw /dev/tts/0</i>
# <i>ls -l /dev/tts/0</i>
crw-rw----    1 root     serial     4,  64 Dec 31  1969 /dev/tts/0
# <i>ln -s /dev/tts/0 /dev/pilot</i>
# <i>nano -w /etc/group</i> <comment>(agregue los usuarios apropiados al grupo serial)</comment>
</pre>
<p>
Hemos agregado un grupo llamado "serial" al sistema, y ahora usted debería
agregar cualquier usuario que necesite usar el puerto serial (cualquier
usuario de Palm pilot) al grupo serial. Le hemos asignado permisos "rw" al
grupo serial en <path>/dev/tts/0</path>, y para futuras referencias hemos
creado un enlace simbólico <path>/dev/pilot</path> a
<path>/dev/tts/0</path>. Gracias a cambios recientes en la forma como
devfs es manejado bajo Gentoo, estos cambios persistirán luego de un
reinicio del sistema.
</p>
<note>
Usuarios de versiones previas a rc6-r13 bien pueden actualizar
<path>sys-apps/baselayout</path> y <path>sys-apps/devfsd</path> (y
resolver las diferencias entre los archivos "._cfg*" bajo
<path>/etc</path> que resulten), o simplemente agregar los permisos
apropiados y el enlace simbólico en <path>/etc/devfsd.conf</path>.
</note>
<p>
Los usuarios querrán usar la opción del menú <path>tools/Pilot
settings</path> en evolution para configurar el software Gnome pilot. No
olvide configurar "Pilot Conduits" así como "Pilot Link" en el Centro de
Control Gnome.
</p>
</body>
</section>
</chapter>
</guide>
