<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link = "/doc/es/printing-howto.xml"> 
<title>Gentoo Printing Guide</title> 
<author title="Author"><mail link="davisjp@muc.edu">John P. Davis</mail></author>
<author title="Copyeditor"><mail link="sunflare@gentoo.org">Phil Bordelon</mail></author>
<author title="Traductor"><mail link="ferdy@ferdyx.org">Fernando J. Pereda Garcimartín</mail></author>
<author title="Editor"><mail link="bass@gentoo.org">José Alberto Suárez López</mail></author>

<abstract>Una guía extensa para imprimir en Gentoo Linux, Este documento cubre tanto la impresión local como remota</abstract>

<version>1.0.2</version>
<date>8 Agosto 2002</date>

<chapter>
<title>Impresión local usando CUPS</title>
<section>
        <title>Instalación usando CUPS</title>
<body>
 
<p>Configurar la impresora en Gentoo Linux es relativamente sencillo, dado que todos los paquetes que se necesitan se encuentran en el
portage desde el 8 de Agosto de 2002. Todo lo que hay que hacer es configurar la y asegurarnos de que interpreta el Postcript correctamente. El 
primer paso es instalar el software necesario.</p>

<note>Estos pasos asumen que estamos configurando la impresión en GNOME2. Esto debería funcionar en KDE, dado que CUPS es independiente del
entorno. TODO: guía para configurar la impresión en KDE. </note>

<pre> 
# <i>emerge net-print/cups</i>  
# <i>emerge gnome-base/gnome-print</i> 
# <i>emerge gnome-base/libgnomeprint</i> 
# <i>emerge media-gfx/gimp-print</i> 
# <i>emerge net-print/gimp-print-cups</i> 
</pre> 

<p>Como estos paquetes se instalan con sus dependencias, ahora es el momento de configurar la impresora.</p>

        <note>Este documento trata mayoritariamente con las impresoras Hewlett Packard por USB, pero configurar una impresora por el puerto paralelo no es muy diferente
        a hacerlo por USB. Las impresoras que no son HP no están cubiertas por ahora, así que encontrar los drivers e instalarlos no será un proceso idéntico al siguiente.</note>

<p>A no ser que tenga el soporte para impresoras USB en el kernel, habrá que compilarlo. Necesita soporte para el USB core (núcleo USB) y para USB printer support (soporte para impresoras USB) habilitados
como módulos o nativos. Yo prefiero tenerlos como módulos porque puedo hacer un <c>lsmod</c> y ver qué soporte está en ese momento activo, pero esto es solo
una preferencia personal.</p>

	<impo>Si usted está usando una impresora por el puerto paralelo, asegúrese de que habilita el soporte para el puerto paralelo en el kernel en
        lugar de las opciones USB</impo>
 
        <note>Si usted no está seguro de cómo compilar el kernel, el Linux Kernel-HOWTO se puede encontrar <uri link="http://insflug.org/COMOs/Kernel-Como/Kernel-Como.html">aqui</uri>. </note>

<p>Ahora que las opciones del kernel está instaladas, es el momento de ver si la impresora es detectada apropiadamente. Una vez todo ha reiniciado, cargue los módulos de impresión. </p>

        <note>Si usted tiene USB compilado en el kernel,  no tiene que cargar los módulos de USB. Si está usando una impresora por puerto paralelo, sustituya los módulos de USB por los del puerto paralelo.</note>
<pre>
# <i>insmod usbcore</i>
# <i>insmod printer</i>
</pre>
  
<p>Una vez los módulos se han cargado correctamente, enchufe la impresora y compruebe <path>/var/log/messages</path> para ver si fue detectada. </p>

<pre>
# <i>tail /var/log/messages</i>
</pre>

<p>Debería ver algo como lo siguiente: </p>

<pre>
<i>hub.c: USB new device connect on bus2/2, assigned device number 2 </i>
<i>printer.c: usblp0: USB bidirectional printer dev 2 if 0 alt 1 proto 2 vid 0x03F0 pid 0x1104 </i>
</pre>

	
        <note>Si está usando una impresora por el puerto paralelo, asegúrese de que está enchufada antes de que inicié el sistema. Una vez el sistema se inició, ejecute <c>dmesg</c> y compruebe si se detectó su impresora.</note>

<p>Antes de configurar la impresora usando CUPS, es posible comprobarla usando <c>cat</c>. </p>

<pre>
# <i>touch prueba.txt</i>
# <i>echo "¡Hola Mundo!" > prueba.txt</i>
# <i>cat prueba.txt > /dev/usb/lp0 </i>

<comment>Para las impresoras por puerto paralelo:</comment>
# <i>cat prueba.txt > /dev/lp0 </i>
</pre>

</body>
</section>

<section> 
        <title>Configuración del fichero PPD</title>
<body>
<p>Ahora es el momento de configurar la impresora y CUPS. Si está usando una HP Inkjet, es necesario instalar el paquete <c>hpijs</c>.
Este driver maneja todo lo necesario sobre la interpretación Postcript para que la HP funcione. Si está usando una impresora no-HP, es posible que necesite hacerse con los drivers. </p>

<note>El driver <c>hpijs</c> es solo para las impresoras HP Inkjet. Si está usando una impresora HP Laserjet, el soporte para la misma debería estár disponible a través del sistema de impresión de GNOME.
Si usted no está usando una HP Inkjet, sáltese hasta la parte de configuración.</note>

<pre>
# <i>emerge net-print/hpijs</i>
</pre>
        
        <impo>La documentación para el driver <c>hpijs</c> está en <path>/usr/share/doc/hpijs-1.1</path>. Es <c>altamente</c> recomendado el leerla. </impo>
 
<p> Para que su impresora interprete Postcript correctamente, CUPS necesita un fichero PPD (Printer Postcript Definition, Definición de Impresora Postcript). La manera más sencilla de generar un PPD es a través de foomatic.
Los scripts de configuración foomatic están disponibles <uri link="http://www.linuxprinting.org/download/foomatic">aquí</uri>. Hay un ebuild en desarrollo para Gentoo, pero aún no está en el árbol de Portage.
Una vez que foomatic está instalado y configurado, ejecute los siguientes comandos para configurar su impresora, después mueva el fichero PPD a donde debería estar. Este ejemplo usa el driver hpijs para una impresora HP. </p>

<note>Para el <c>printer ID</c>, foomatic espera un ID que se encuentra en su base de datos (<path>/usr/share/foomatic/db/source/printer</path>).
Debe encontrar su <c>printer ID</c> y usar ese nombre. Recuerde que se distinguen mayúsculas y minúsculas. </note>

<pre>
# <i>foomatic-configure -s cups -p printer ID -c print_device -n queue name -d hpijs </i>
# <i>mv /etc/foomatic/your.new.ppd /etc/cups/ppd </i>
</pre>

	<impo>Si usted no usa una impresora HP, será capaz de usar el script foomatic para generar sus ficheros PPD. Por favor, consulte la <uri link="http://www.linuxprinting.org/foomatic/USAGE">documentación de foomatic</uri>
        y <uri link="http://www.linuxprinting.org">Linuxprinting.org</uri> para más información.</impo>

</body>
</section>

<section>
        <title>Configuración de CUPS</title>
<body>
<p>Dado que la impresora ya está configurada, ahora CUPS tiene que ser configurado para que maneje la cola de impresión. Se puede acceder a CUPS con un navegador web en el puerto 631 de la máquina que tiene la impresora</p>

	<impo>CUPS tiene un fichero de configuración del demonio que debería, pero no tiene porque, ser modificado. Usted quizá quiera echarle un vistazo, este se encuentra en <path>/etc/cups/cupsd.conf</path>.</impo>

<pre>
# <i>rc-update add cupsd default</i>
# <i>/etc/init.d/cupsd start</i>
</pre>

<p>El demonio de CUPS ahora debería estar corriendo, así que abra su navegador favorito y vaya a <uri link="http://localhost:631">aquí</uri>. </p>
<p>Habrá accedido a la la página de configuración de CUPS.
Pulse en la pestaña de <c>administration</c> (administración) en la parte superior de la página, e introduzca el password de root, o el nombre de cualquier usuario que esté en el grupo <c>lp</c>.
Una vez se haya autenticado, pulse en <c>Add Printer</c> (Añadir Impresora) debajo de la sección <c>printers</c> (impresoras). Introduzca el nombre necesario, descripción y localización de la impresora.
Usted debe hacer coincidir el nombre de la impresora con el que especificó en <c>queue</c> (cola) en foomatic. Ahora necesita seleccionar el dispositivo al que está conectada su impresora.
Selecciónelo y continúe. En la siguiente página escoja su impresora de la lista.</p>

<p>¡Ya está configurado! Pulse en el nombre de su impresora, e intente imprimir una página de prueba. ¡Eureka, la configuración de su impresora está completa !</p>

<note>Si por algua razón su impresora no funcionara, vaya al directorio donde CUPS guarda sus logs, y busque en el fichero <c>error_log</c>. </note>

</body>
</section>
</chapter>

<chapter>
        <title>Configuración de la impresión con CUPS en GIMP, OpenOffice.org1.0 y Abiword.</title>
<section>
        <title>GIMP</title>
<body>
<p>Lo primero, configuremos el GIMP, solo porque es divertido, y vale la pena. Abra el GIMP, y cargue un dibujo, o simplemente uno blanco, no importa lo que sea porque lo que estamos buscando es el menú <c>File</c> (Fichero).
Haga click con el botón derecho y vaya a <c>File/Print</c> El diálogo de impresión debería aparecer, y cuando lo haga, pulse en nueva impresora.
Si su impresora no aparece, escriba el nombre de su impresora, y seleccione el tipo. Ya está, acaba de configurar su impresora para el GIMP. Juegue con las opciones y diviértase.</p>
</body>
</section>

<section>
	<title>OpenOffice.org1.0</title>
<body>
<p>Imprimir con OpenOffice.org1.0 no es mucho más dificil. Vaya a <path>OpenOffice.org1.0/program</path>, y ejecute <c>spadmin</c>.
Haga una nueva impresora, y cuando se le presente la pantalla de <c>Choose a Driver</c> (Escoja un Driver), pulse en <c>import</c> (importar) y navegue hasta donde se encuentra su fichero PPD, en nuestro caso estará en <path>/etc/cups/ppd</path>.
Use los comandos de impresión por defecto, configurela como impresora por defecto y ¡ya está! Arranque OpenOfice.org1.0 y vaya a la pantalla de impresión y seleccione su impresora. Imprima una página de prueba.</p>
</body>
</section>

<section>
	<title>Abiword</title>
<body>

        <warn>Abiword provoca una violación de segmento con CUPS-1.1.15-r2. Se recomienda volver a la versión .14 que no existe tal problema.</warn>

<p>TODO: añadir soporte para Abiword.</p>
</body>
</section>

<section>
<body>
<p>La impresión local está completada, ahora vamos a añadir la impresión por red</p>
</body>
</section>

</chapter>

<chapter>
        <title>Impresión en red usando CUPS y SAMBA</title>
<section>
        <title>Imprimir a una impresora windows desde una máquina Linux</title>
<body>
<p>Lo primero es que SAMBA tiene que estar instalado para las dos opciones de impresión en red.</p>

<pre>
# <i>emerge net-fs/samba</i>
</pre>

<note>Para más información sobre SAMBA, el COMO oficial se encuentra aquí <uri link="">aquí</uri> </note>


<p>Lo primero, usamos <c>foomatic</c> para generar el fichero PPD para la impresora remota. No se olvide de comprobar si su impresora está soportada por Linux o no en <uri link="http://www.linuxprinting.org/printer_list.cgi">linuxprinting.org</uri>.
Ahora le diremos a <c>foomatic</c> donde está y qué impresora es, luego moveremos el fichero PPD a su sitio. </p>

<pre>
# <i>foomatic-configure -s cups -p printer ID -c smb://usuario:contraseña@servidor/recurso -n queue name -d hpijs </i>
# <i>mv /etc/foomatic/su.nuevo.ppd /etc/cups/ppd </i>
</pre>
                              
<p>Ahora, con su navegador favorito vaya <uri link="http://localhost:631">aquí</uri> para acceder a la configuración de CUPS.
Esto hará que CUPS apunte a la a la impresora en la máquina Windows. </p>
</body>
</section>

<section>                                                                
        <title>Usar Linux como un servidor de impresión compatible con Windows</title>
<body>

<p>Linux es capaz de ser un buen servidor de impresión, en realidad, es capaz de ser un buen servidor para todo. Lo primero que hay que hacer es editar el <path>/etc/samba/smb.conf</path>
para ajustar sus opciones. El <c>smb.conf</c> contiene todas las opciones que harán que su máquina Linux parezca un servidor Windows NT a cualquier otra máquina Windows.
He incluido un útil ejemplo de como debería ser configurado el <c>smb.conf</c>. Edítelo para que se encaje a su entorno de red. </p>

<pre>
[global]

      workgroup = YOUR_WORKGROUP
      server string = Gentoo Linux Server
      encrypt passwords = True
      security = user
      smb passwd file = /etc/samba/private/smbpasswd
      log file = /var/log/samba/log.%m
      socket options = IPTOS_LOWDELAY TCP_NODELAY
      domain master = Yes
      local master = Yes
      preferred master = Yes
      os level = 65
      dns proxy = No
      name resolve order = lmhosts host bcast
      bind interfaces only = True
      interfaces = eth0
      hosts deny = ALL
      hosts allow = 192.168.1.4 127.0.0.1 (list of allow hosts here) 
      debug level = 1
      create mask = 0644
      directory mask = 0755
      level2 oplocks = True
      read raw = no
      write cache size = 262144

[printers]
      comment = All Printer
      path = /var/spool/samba
      browseable = no 

</pre>

<p>Ahora que SAMBA está configurado, reinicie samba, vaya a su máquina Windows e instale una impresora en red.</p>
</body>
</section>
</chapter>
</guide>
