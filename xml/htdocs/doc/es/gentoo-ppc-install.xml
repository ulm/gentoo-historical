<?xml version='1.0' encoding="ISO-8859-1"?>
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/es/gentoo-ppc-install.xml">
<title>Instrucciones de Instalación de Gentoo Linux/PPC 1.2</title>
<author title="Gentoo PPC Developer"><mail link="gerk@gentoo.org">Mark Guertin</mail></author>
<author title="Gentoo PPC Developer"><mail link="daybird@gentoo.org"> David Chamberlain</mail></author>
<author title="Chief Architect"><mail link="drobbins@gentoo.org">Daniel Robbins</mail></author>                              
<author title="Author">Chris Houser</author>                                                                                 
<author title="Author"><mail link="jerry@gentoo.org">Jerry Alexandratos</mail></author>                                      
<author title="Ghost"><mail link="g2boojum@gentoo.org">Grant Goodyear</mail></author> 
<author title="Contributor, Maintainer"><mail link="rajiv@gentoo.org">Rajiv Manglani</mail></author>
<author title="Contributor"><mail link="zhen@gentoo.org">John P. Davis</mail></author>
<author title="Traductor"><mail link="jstypo@imagencolor.com.ve">John Christian Stoddart</mail></author>

<abstract>Estas instrucciones constituyen una guía a través del proceso de instalación de Gentoo
Linux/PPC 1.2.  El proceso de instalación de Gentoo Linux soporta varios métodos de instalación, dependiendo de qué tanta cantidad del sistema uno desee construir uno mismo manualmente, partiendo desde el inicio o 'scratch'.</abstract>

<version>1.5.2</version>
<date>08 December 2002</date>

<chapter>
<title>Acerca de la Instalación</title>
<section>
<body>

<p>Este nuevo CD arrancará cualquier Mac del tipo New World.  Los Mac estilo Old World requerirán una partición funcional de MacOS y el uso del archivo Gentoo Installer.sit disponible en el ISO. Adicionalmente estan disponibles los drivers del kernel para la mayor parte del hardware de Apple, así como las herramientas que permitan configurar su red y establecer conexiones salientes <c>ssh</c> y bajar archivos.
</p>

<p>Para instalar del CD se requiere al menos un procesador PowerPC 603 o mejor en un sistema con bus PCI o más nuevo (en este momento no estan soportadas la máquinas NuBus) e idealmente al menos 128 megabytes de RAM.  Se puede instalar con menos RAM, pero el proceso es muy lento y podría no concluir. Para comenzar el proceso de instalación, obtenga una imagen ISO de <uri>http://www.ibiblio.org/gentoo/releases/build/</uri>. Si busca Gentoo 1.4, encontrará "tarballs" e imágenes genéricas para PPC y versiones optimizadas para G4.
</p>

<p>Ahora pasemos revista rápidamente al proceso de instalación. Crearemos particiones, crearemos los sistemas de archivo y escogeremos extraer un "tarball" por etapa, bien sea stage1, stage2 o stage3. Si escogemos iniciar nuestra instalación desde un stage1 o stage2, debemos llevar a cabo una serie de pasos para que nuestro sistema llegue a la última etapa, la stage3. Una vez allí, podemos configurarlo (modificando los archivos de configuración, instalar un sistema de arranque, etc) y iniciarlo para tener un sistema Gentoo Linux plenamente funcional. Dependiendo de la etapa que se elija para iniciar el proceso de construcción, la siguiente tabla resume los pasos de la instalación:
</p>

<p>
<table>
<tr><th>tarball etapa o stage</th><th>pasos requeridos para la instalación</th></tr>
<tr><ti>1</ti><ti>particionamiento disco/creación sistema de archivos, emerge rsync, bootstrap, emerge system, emerge ppc-sources, configuración final</ti></tr>
<tr><ti>2</ti><ti>particionamiento disco/creación sistema de archivos, emerge rsync, emerge system, emerge linux sources, configuración final</ti></tr>
<tr><ti>3</ti><ti>particionamiento disco/creación sistema de archivos, emerge rsync (opcional), configuración final</ti></tr>
</table>
</p>

</body>
</section>
</chapter>

<chapter>
<title>Arranque</title>
<section>
<body>

<p>Una vez escogido el CD a usar, inicie la máquina pulsando fijamente la tecla 'C' al arrancar o inicie el instalador OldWorld e inicie BootX. Aparecerán varias líneas de texto y al final un prompt o línea de comando <c>boot:</c> al final de la pantalla. Pulse enter e inmediatamente Linux cargará del CD.</p>

<p>Luego aparece un listado de comandos disponibles del CD, incluyendo el editor <c>nano</c> (un clon de pico) e instrucciones para configurar la red. Ahora seleccione mapa apropiado para su teclado y seguirá el proceso de autodetección PCI que resulta en la carga automática de los módulos del kernel para los dispositivos PCI, SCSI e interfaces de ethernet más comunes.  Después pulse enter e ingresará al ambiente mínimo de arranque del CD. Ahora tendrá un prompt de usuario root "<c>#</c>") en la cónsola, pudiendo abrir otras si lo desea, pulsando ctrl+alt-f2, ctrl+alt-f3 (en los powerbooks/ibooks use fn+ctrl+alt+f2) y luego enter.</p>

</body>
</section>
</chapter>

<chapter>
<title>Cargando módulos del kernel</title>
<section>
<body>

<p>Estamos casi listos para comenzar a instalar Gentoo Linux. El kernel Gentoo PPC del ISO ya incluye los drivers que requerirá en la mayoría de los Mac standard y si hiciese falta algunos adicionales hemos incluido unos cuantos más. Para ver una lista de módulos incluidos revise el directorio <c>/lib/modules/*/kernel/drivers/*</c>. Para cargar un módulo determinado, escriba:</p>

<pre>
# <i>modprobe módulo</i>
	<comment>(reemplace módulo con el que requiera)</comment>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Configure e instale la red</title>
<section>
<body>

<p>Los CDs de arranque más recientes le permitirán configurar la red, permitiéndole usar  <c>ssh</c>, <c>scp</c> o <c>wget</c> si fuese requerido aún antes de comenzar el proceso de instalación. Aunque no lo necesite ahora, debe configurar su red. Una vez preparada, el Portage podrá usarlo dentro del ambiente enjaulado ("chroot"), requerido para la instalación de Gentoo Linux.</p>
</body>
</section>

<section>
<title>DHCP</title>
<body>

<p>Con DHCP la configuración de red es sencilla. Si su ISP no usa DHCP, continue a la sección Configuración estática, más adelante.
</p>

<pre caption="Configuración de redes con DHCP">
# <i>dhcpcd eth0</i>
</pre>

<note>
Algunos ISP piden un nombre para su máquina. Para cumplir este requisito, agregue <c>-h mimaquina</c> al comando anterior.
</note>

<p>Si recibe advertencias <i>dhcpConfig</i>, no se preocupe, probablemente sean cosméticos. Continue en la sección Comprobando la red, más adelante.</p>
</body>
</section>
<section>

<title>Configuración estática</title>
<body>
<p>
Debemos configurar apenas lo suficiente para bajar las fuentes para construir el sistema y el interfaz localhost requerido. Escriba los siguientes comandos, reemplazando $IFACE con su interfaz a la red (normalmente <c>eth0</c>), $IPNUM con su dirección IP, $BCAST con su dirección broadcast y $NMASK con su máscara de red.  Para el comando <c>route</c>, sustituya $GTWAY con su gateway.
</p>
<pre>
# <i>/sbin/ifconfig $IFACE $IPNUM broadcast $BCAST netmask $NMASK</i>
# <i>/sbin/route add -net default gw $GTWAY netmask 0.0.0.0 metric 1</i>
</pre>

<p>Ahora crearemos el archivo <path>/etc/resolv.conf</path> para que funcione la resolución de nombres (el acto de encontrar sitios Web/FTP por nombre, en vez de por dirección IP).</p>

<note>Al momento, el único editor instalado por defecto es <c>nano</c>, pequeño y sencillo de usar. Use <c>nano</c> con la opción <c>-w</c> para desactivar la partición de líneas largas (line wrapping).
</note>

<p>Aquí hay una plantilla para crear su archivo <path>/etc/resolv.conf</path>:
</p>
<pre caption="Plantilla /etc/resolv.conf">
domain mydomain.com
nameserver 10.0.0.1
nameserver 10.0.0.2
</pre>

<p>Reemplace las direcciones <c>10.0.0.1</c> y <c>10.0.0.2</c> con las direcciones IP de su servidor DNS primario y secundario respectivamente.</p>
</body>
</section>

<section>
<title>Comprobando la red</title>
<body>
<p>Ahora que su red está configurada, el comando <c>/sbin/ifconfig -a</c> mostrará (ojalá!) que su interfaz de red está funcionando (busque las palabras clave <e>UP</e> y <e>RUNNING</e> en la salida de este comando).
</p>

<pre caption="/sbin/ifconfig for a working network card">
eth0      Link encap:Ethernet  HWaddr 00:50:BA:8F:61:7A
          inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::50:ba8f:617a/10 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:1498792 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1284980 errors:0 dropped:0 overruns:0 carrier:0
          collisions:1984 txqueuelen:100
          RX bytes:485691215 (463.1 Mb)  TX bytes:123951388 (118.2 Mb)
          Interrupt:11
</pre>

<!--
<note>
If you have a static ppp link, you can !!! do this...!!!
</note>
-->

</body>
</section>
<section>
<title>La red funciona!</title>
<body>
<p>La red debe estar configurada y funcionando. Deberá poder usar los comandos <c>ssh</c>, <c>scp</c> y <c>wget</c> para conectarse con otras máquinas en su red local o la internet.</p>
</body>
</section>
</chapter>

<chapter>
<title>Configurando particiones</title>
<section>
<body>

<p>Ya que el kernel pueder ver nuestro interfaz de red y controladores de disco, debemos configurar las particiones para Gentoo Linux.</p>

<p>***He aquí un resumen rápido del particionamiento standard de Gentoo Linux. Crearemos al menos tres particiones: una para el swap, una para la raíz (almacenará casi todo el Gentoo Linux) y una partición especial de arranque. La partición de arranque está diseñada para almacenar la información para el gestor de arranque YABOOT. Usuarios de máquinas OldWorld no requieren esta partición ya que arrancan en MacOS y se usa el BootX para inicializar el kernel de linux y los init scripts.
</p>

<p>Ahora acerca de sistema de archivo.  Actualmente existen cuatro opciones:
XFS, ext2, ext3 (journaling) and ReiserFS. El ext2 es el más probado y auténtico sistema de archivo de Linux, pero carece de "metadata journaling". El ext3 es una versión nueva del ext2 con "metadata journaling" y escritura ordenada de los datos, por ello proporcionando "data journaling" también. Cualquiera de estos sistema está recomendado para usar con GentooPPC. Los sistemas ReiserFS y XFS son ambos más recientes y de alto desempeño pero de naturaleza más experimental, por lo que no los recomendamos.
</p>

<note>Ahora debe crear sus particiones usando mac-fdisk, <c>mac-fdisk /dev/hdx</c> (donde x corresponde a la letra de su disco, a, b, c - en caso de discos scsi, utilice /dev/sdx). Debe crear al menos una partición de arranque (<c>b</c> en mac-fdisk) (usuarios de máquinas New World sólamente), una partición para swap (usualmente unas 2* el ram de su máquina, aunque recomendamos al menos 512MB si planea compilar paquetes de software grandes) y una partición para la raíz.  <c>?</c> al prompt de mac-fdisk le dará una lista de opciones.

</note>

<p>Una vez creadas las particiones con <c>mac-fdisk</c>, debemos inicializarlas con los sistemas de archivos que darán cabida a nuestros datos. Inicialize el swap de la siguiente manera:</p>

<pre>
# <i>mkswap /dev/hda3</i>
</pre>

<p>Puede usar el comando <c>mke2fs</c> para crear sistemas de archivo ext2:</p>

<pre>
# <i>mke2fs /dev/hda4</i>
</pre>

<p>Si desea escoger ext3, puede hacerlo usando el comando <c>mke2fs -j</c>:</p>

<pre>
# <i>mke2fs -j /dev/hda4</i>
</pre>

<warn>Una vez más, no recomendamos el uso de ReiserFS o XFS en estos momentos. Mientras que estos sistema de archivo han trabajado bien para muchos, la corrupción ha sido un problema común en conjunto con los kernel de la serie 2.4.x.</warn>

<note>Puede averiguar más información acerca del uso de ext3 bajo Linux 2.4 en <uri>http://www.zip.com.au/~akpm/linux/ext3/ext3-usage.html</uri>.</note>
</body>
</section>
</chapter>

<chapter>
<title>Montar particiones</title>
<section>
<body>
<p>
Ahora activaremos nuestra partición swap, ya que nos podrá hacer falta la memoria virtual que ésta nos brinda luego:
</p>

<pre>
# <i>swapon /dev/hda3</i>
</pre>

<p>Luego crearemos el punto de montaje <path>/mnt/gentoo</path> y montaremos nuestro sistema de archivos allí.
</p>

<pre>
# <i>mkdir /mnt/gentoo</i>
# <i>mount /dev/hda4 /mnt/gentoo</i>
</pre>

<p>Si estás configurando Gentoo Linux con particiones separadas para <path>/usr</path> o <path>/var</path>, éstas se montarían en <path>/mnt/gentoo/usr</path> y <path>/mnt/gentoo/var</path>, respectivamente.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Montando el CD-ROM</title>
<section>
<body>
<p>Aunque hayamos arrancado del CD-ROM, el propio CD-ROM no está montado bajo nuestro mínimo ambiente de arranque del CD. Hará falta montarlo para tener acceso al tarball contenido en el CD-ROM. Para montarlo escriba:
</p>

<pre>
# <i>mount /dev/cdroms/cdrom0 /mnt/cdrom -o ro -t iso9660</i>
</pre>

<p>Con el CD-ROM montado, podemos ver los archivos <c>stage???.tbz2</c> escribiendo <c>ls /mnt/cdrom/build</c>.</p>

<note>Si no logra montar el CD-ROM, es posible bajar los tarballs stage1/2/3 del sitio ibiblio 
con <c>wget http://www.ibiblio.org/pub/Linux/distributions/gentoo/releases/build/1.2/stage1-ppc-1.2.tbz2</c></note>
</body>
</section>
</chapter>

<chapter>
    <title>Descomprima el "stage" que desea usar</title>
<section>
<body>

<p>Ahora podemos descomprimir el tarball escogido a <path>/mnt/gentoo</path> y luego haremos <c>chroot</c> a la nueva imagen de instalación Gentoo Linux.
</p>

<impo>Asegúrese de usar la opción <c>p</c> con el comando <c>tar</c> ya que de no hacerlo ciertos archivos podrían tener los permisos incorrectos.</impo>

<impo>Si escogió el método de instalación "desde cero, construyendo todo", deberá usar la imagen <path>stage1-ppc-1.2.tbz2</path> image, aunque también puede escoger imágenes stage2 o stage3. Estas le permitirán ahorrar tiempo a expensas de la configurabilidad (hemos escogido de antemano las optimizaciones del compilador y las variables USE.) La imagen stage3 ahora incluye también una imagen del árbol Portage, eliminando la necesidad de hacer un <c>emerge rsync</c> más adelante.
</impo>

<pre>
# <i>cd /mnt/gentoo</i>
# <i>tar -xvjpf /mnt/cdrom/build/stage?-*.tbz2</i>
# <i>mount -o bind /proc /mnt/gentoo/proc</i>
# <i>cp /etc/resolv.conf /mnt/gentoo/etc/resolv.conf</i>
</pre>

<pre>
# <i>chroot /mnt/gentoo /bin/bash</i>
# <i>env-update</i>
&gt;&gt;&gt; Regenerating /etc/ld.so.cache...
# <i>source /etc/profile</i>
#
</pre>

<p>Al ejecutar estos comandos estará "dentro" del ambiente Linux nuevo.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Rsync</title>
<section>
<body>
<p>Ahora debemos correr <c>emerge rsync</c> que nos conectará a rsync.gentoo.org y bajará la versión más reciente del árbol Portage:</p>

<pre>
# <i>emerge rsync</i>
</pre>

<p>El árbol Portage será bajado, pesa unos 10 Mb.</p>

<impo>La dirección del servidor rsync, por los momentos es rsync://rsync.gentoo.org/gentoo-portage. Si tiene problemas de acceso, asegúrese que está usando ésta dirección comprobando la variable SYNC en su archivo /etc/make.conf.
</impo>

<note>El comando rsync puede ser configurado para hacer uso de un proxy HTTP si su máquina está detrás de un cortafuego colocando <i>RSYNC_PROXY="hostname:port"</i> en <i>/etc/make.conf</i> o configurándolo como una variable de su ambiente.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Progresando del stage1 al stage2</title>
<section>
<body>

<impo>Si ha empezado con un tarball stage2 o stage3, entonces ya hemos hecho el "bootstrap". No hay razón para hacerlo de nuevo, a no ser que decida hacer <c>emerge rsync</c> para tener un sistema Gentoo Linux al-minuto. La mayor parte de los que usan un tarball stage2 o stage3 <i>no</i> querrán repetir el "bootstrap", ya que puede tardar más de una hora, hasta con máquinas muy rápidas.</impo>

<p>Al tener una copia funcional del árbol Portage, los que eligieron instalar desde stage1 deben hacer el "bootstrap" de su sistema Gentoo Linux de la siguiente manera.  Primero modifique el archivo <path>/etc/make.conf</path>. En este archivo debe configurar su variable <c>USE</c>, que define la funcionalidad opcional que desea incorporar a los paquetes que va a instalar, normalmente el valor por defecto, (<e>vacío</e> o sin configurar) funcionará bien. Debe configurar valores apropiados para su sistema en las variables <c>CHOST</c>, <c>CFLAGS</c> y <c>CXXFLAGS</c> (ejemplos comentados pueden encontrarse más adelante). Si es necesario puede colocar la información del proxy aquí, si se encuentra detrás de un cortafuego.</p>

<pre>
# <i>nano -w /etc/make.conf</i> <comment>(Ajuste esta configuración)</comment>
</pre>

<note>
Aquellos que requieren modificar sustancialmente el proceso de construcción deben examinar el archivo <path>/etc/make.globals</path>, que contiene los valores por defecto Gentoo defaults que no deben ser modificados. Si los valores por defecto no son suficientes, deben incorporarse valores nuevos en <path>/etc/make.conf</path>, ya que lo especificado en <path>make.conf</path> <comment>toma precedencia</comment> sobre las configuraciones del archivo <path>make.globals</path>. Si está interesado en modificar la variable USE, revise el archivo <path>/etc/make.profile/make.defaults</path>. Si requiere desactivar alguna configuración de la variable USE, agregue <c>USE="-foo"</c> en <path>/etc/make.conf</path> (para desactivar <c>foo</c>).
</note>

<p>Ahora podemos comenzar el proceso del "bootstrap" que durará 1-4 horas, dependiendo de qué tan rápido es el equipo. Durante este lapso la imagen que extrajimos se preparará para la compilación del resto del sistema. El conjunto del compilador GNU será construido al igual que la librería GNU C. Esta construcción consume mucho tiempo y constituye el grueso del proceso de "bootstrap":</p>

<pre>
# <i>cd /usr/portage</i>
# <i>scripts/bootstrap.sh</i>
</pre>

<p>y empezará el proceso.</p>

<note>Portage usa <c>/var/tmp</c> por defecto durante el proceso de construir los paquetes, a veces usando varios cientos de megabytes de almacenamiento temporal. Si desea cambiar éste directorio de almacenamiento temporal, configure un nuevo PORTAGE_TMPDIR <e>antes</e> de iniciar el proceso de "bootstrap" así:
</note>

<pre>
# <i>export PORTAGE_TMPDIR="/otherdir/tmp"</i>
</pre>

<p>El script <c>bootstrap.sh</c> construirá <c>binutils</c>, <c>gcc</c>, <c>gettext</c>,
y <c>glibc</c>, reconstruyendo <c>binutils</c>, <c>gcc</c> y <c>gettext</c> después de construir a <c>glibc</c>. No hace falta recalcar que este proceso toma su tiempo. Echese una agradable siesta. Una vez que concluya este proceso su sistema estará en la etapa "stage2".
</p>
</body>
</section>
</chapter>

<chapter>
<title>Progresar del stage2 al stage3</title>
<section>
<body>

<p>Una vez concluido el bootstrap y encontrándose en el stage2 (repetimos que estos pasos no son necesarios si ha hecho uso del tarball stage3) es hora de construir o instalar el resto del sistema base, así:</p>

<pre>
# <i>export CONFIG_PROTECT=""</i>
# <i>emerge --pretend system</i>
	<comment>[lista los paquetes a instalar]</comment>
# <i>emerge system</i>
</pre>

<note>El comando <c>export CONFIG_PROTECT=""</c> asegura que los scripts nuevos instalados en <path>/etc</path> sobre-escribirán los viejos (almacenados en <path>sys-apps/baselayout</path>), saltando el nuevo sistema de manejo de archivos de configuración de Portage. Escriba <c>emerge --help config</c> para mayores detalles.</note>

<p>La conclusión de la construcción del sistema base tomará su tiempo. Su recompensa es que estará altamente optimizada para su máquina. Lo malo es que tendrá que encontrar una manera de mantenerse ocupado por un buen rato. El autor sugiere jugar "Star Wars - Super Bombad Racing" para el PS2. Cuando termine el <c>emerge system</c>, tendrá un sistema Gentoo Linux en stage3.</p>

</body>
</section>
</chapter>

<chapter>
<title>Pasos finales: la zona horaria</title>
<section>
<body>

<p>Ahora debe tener un sistema en stage3 listo para su configuración final. Empezaremos este proceso configurando la zona horaria. Al hacer esto antes del construir el kernel aseguramos que los usuarios obtengan una salida razonable al ejecutar <c>uname -a</c>.</p>

<p>Busque su zona horaria (o GMT si usa Greenwich Mean Time) en <path>/usr/share/zoneinfo</path> y haga un enlace simbólico escribiendo:
</p>

<pre>
# <i>ln -sf /usr/share/zoneinfo/path/to/timezonefile /etc/localtime</i>
</pre>
</body>
</section>
</chapter>

<chapter>
<title>Pasos finales: kernel y system logger</title>
<section>
<body>
<p>Ahora requiere hacer un emerge para obtener las fuentes del kernel para ppc escribiendo <c>emerge sys-kernel/ppc-sources</c>.
</p>

<p>Al tener instalado el árbol de fuentes para el kernel, ha llegado la hora de compilar nuestro propio kernel:</p>

<pre>
# <i>cd /usr/src/linux</i>
# <i>make menuconfig</i>
# <i>make dep &amp;&amp; make clean vmlinux modules modules_install</i>
# <i>cp vmlinux System.map /boot</i>
</pre>

<note>Advertimos que solamente deben usarse las fuentes <c>sys-kernel/ppc-sources</c> para compilar kernels en máquinas PowerPC.</note>

<warn>Para que su kernel funcione correctamente, hay que asegurarse de compilar varias opciones <i>en el kernel mismo y no como módulos</i>. Debe habilitar <i>"Code maturity level options --> Prompt for development and/or incomplete code/drivers"</i> para poder optar por algunas de estas selecciones. Bajo la sección "File systems", asegúrese de habilitar <i>Device File System</i> (note que <e>no hace falta</e> habilitar la opción "/dev/pts file system support"). También hará falta tener el <i>Virtual Memory File system</i>. Bajo <i>Macintosh Device Drivers</i> asegúrese de inhabilitar el default de <i>Support for ADB raw keycodes</i> al igual que debe <e>inhabilitar</e> la opción <i>Enhanced RTC</i> (en "Character devices") ya que no es un ATM que colabore amigablemente con el PPC. En cambio, <e>habilite</e> <i>Support for /dev/rtc</i> en "General setup". Siempre es buena idea dejar habilitado el soporte de ext2 aunque no lo esté usando.
</warn>

<impo>
Si tiene un quemador de CDs IDE y/o DVD, habrá que usar la emulación de dispositivos SCSI en el kernel: habilitando "ATA/IDE/MFM/RLL support" ---> "IDE, ATA and ATAPI Block devices" ---> "SCSI emulation support" (usualmente lo compilo como módulo), y luego bajo "SCSI support" habilite "SCSI support", "SCSI CD-ROM support" y "SCSI generic support" (de nuevo, los compilo como módulos). Si escoje usar módulos debe <c>echo -e "ide-scsi\nsg\nsr_mod" >> /etc/modules.autoload</c> para que carguen automáticamente al arrancar. Además, debe agregar esta línea a su archivo /etc/yaboot.conf: <c>append="hdc=ide-scsi"</c>.
</impo>

<p>Su kernel nuevo (y los módulos) ahora están instalados. Ahora debe seleccionar cuál logger desea instalar. Ofrecemos el sysklogd, que es el conjunto de daemons tradicionales para logear.  También tenemos a metalog. Los conocedores de la materia tienden a alejarse del sysklogd (por cuestiones de desempeño) hacia el metalog. Si tiene dudas, quizás quiera probar con metalog, ya que es bastante popular. Para hacer emerge de su logger, escriba <e>una</e> de las siguientes líneas:
</p>

<pre>
# <i>emerge app-admin/sysklogd</i>
# <i>rc-update add sysklogd default</i>
<comment>o</comment>
# <i>emerge app-admin/metalog</i>
# <i>rc-update add metalog default</i>
</pre>

<warn>
Si ha hecho uso del tarball stage3, no necesita instalar un logger porque el tarball ya incluye el sysklogd. Si prefiere usar metalog, debe primero remover sysklogd. Al concluir la instalación, evite iniciar sysklogd al arrancar escribiendo: <c>rc-update del sysklogd default</c> y luego <c>emerge unmerge sysklogd</c> para removerlo. Probablemente tendrá que borrar manualmente los archivos de configuración de sysklogd en <path>/etc</path> (busque <c>cfgpro</c> en el archivo al unmerge). Para instalar metalog, escriba <c>emerge metalog</c>, y luego <c>rc-update add metalog default</c>.
</warn>

<impo>
Metalog escribe a disco en bloques, así que los mensajes no son grabados en seguida. Si está tratando de resolver problemas con un daemon, este comportamiento que mejora el desempeño no es de mucha ayuda. Cuando su sistema Gentoo Linux esté corriendo, puede enviar una señal USR1 a metalog para desactivar este comportamiento (significando que <i>tail -f <path>/var/log/everything/current</path></i> ocurrirá en tiempo real, como esperamos) y una señal USR2 para activar este comportamiento de nuevo.
</impo>

<p>Ahora puede opcionalmente, escoger un paquete cron que quiera utilizar. Ofrecemos dcron, fcron y vcron. Si no sabe cuál utilizar, escoja vcron. Se pueden instalar de la siguiente manera:</p>

<pre>
# <i>emerge sys-apps/dcron</i>
# <i>crontab /etc/crontab</i>
<comment>o</comment>
# <i>emerge sys-apps/fcron</i>
# <i>crontab /etc/crontab</i>
<comment>o</comment>
# <i>emerge sys-apps/vcron</i>
# <i>crontab /etc/crontab</i>
</pre>

<p>Para mayor información acerca de cómo funciona cron bajo Gentoo Linux, vea <uri link="http://lists.gentoo.org/pipermail/gentoo-announce/2002-April/000151.html">este anuncio</uri>.</p>
</body>
</section>
</chapter>

<chapter>
<title>Pasos finales: instalación de paquetes adicionales</title>
<section>
<body>
<p>
Si usted es usuario de un laptop y desea usar sus ranuras pcmcia en su primer arranque, asegúrese de instalar el paquete pcmcia-cs.
</p>
<pre>
# <i>emerge sys-apps/pcmcia-cs</i>
</pre>
</body>
</section>
</chapter>

<chapter>
<title>Pasos finales: /etc/fstab</title>
<section>
<body>
<p>Su sistema Gentoo Linux está casi listo para ser usado. Ahora sólo quedan por configurar algunos importantes archivos del sistema e instalar el cargador YABOOT. El primer archivo a configurar es el <path>/etc/fstab</path>. Recuerde especificar los sistemas de archivos <c>ext2</c> o <c>ext3</c> según sea apropiado.</p>

<p>Use algo como el <path>/etc/fstab</path> listado a continuación. Por supuesto, debe reemplazar "ROOT" y "SWAP" con los dispositivos que de hecho está usando (tales como <c>hda2</c>, etc.). Nóotese que los usuarios de máquinas NewWorld _no requieren_ agregar la partición bootstrap a este archivo.</p>
<pre>
<comment>
# /etc/fstab: información estática de sistemas de archivo.
#
# noatime desactiva atimes para mejorar el desempeño (atimes normalmente no se
# necesita; notail aumenta el desempeño de ReiserFS (a costa de la eficiencia
# en el almacenamiento). El no usar la opción noatime es seguro y si lo desea
# también cambiar entre notail y tail libremente.
# &lt;fs&gt;           &lt;mountpoint&gt;   &lt;type&gt;   &lt;opts&gt;          &lt;dump/pass&gt;
</comment>
/dev/ROOT           /           ext3	 noatime         0 1
/dev/SWAP           none        swap	 sw              0 0
/dev/cdroms/cdrom0  /mnt/cdrom  iso9660	 noauto,ro       0 0
proc                /proc       proc	 defaults        0 0
</pre>
</body>
</section>


<section>
<title>Pasos finales: Seleccionar la contraseña para root</title>
<body>
<p>Antes que se le olvide, configure la contraseña para el usuario root escribiendo:</p>

<pre>
# <i>passwd</i>
</pre>
</body>
</section>

<section>
<title>Pasos finales: /etc/hostname</title>
<body>
<p>Edite este archivo para que contenga el nombre de su dominio plenamente calificado (FQDN o fully qualified domain name) en una sola línea, así <c>mymachine.mydomain.com</c>.
</p>
</body>
</section>

<section>
<title>Pasos finales: /etc/hosts</title>
<body>
<p>Este archivo contiene una lista de direcciones IP y nombres de hosts asociados. Lo usa el sistema para resolver las direcciones IP de las máquinas que no estén en su servidor DNS. Esta es una plantilla para este archivo:
</p><pre>
127.0.0.1      localhost
<comment># la siguiente linea contiene el IP de su red local y el nombre de la maquina asociada</comment>
192.168.1.1    mymachine.mydomain.com	mymachine
</pre>
</body>
</section>

<section>
<title>Configuración final de la red</title>
<body>
<p>
Agregue los nombres de cualquier módulo que requiere para el funcionamiento de su sistema al archivo <path>/etc/modules.autoload</path> (se pueden agregar cualquier opción necesario en la misma línea). Cuando arranque Gentoo Linux, éstos módulos serán automáticamente cargados. De particular importancia está su tarjeta de interfaz de red, si lo ha compilado como módulo:
</p>
<pre caption="/etc/modules.autoload">
sungem
</pre>
<p>Edite el script <path>/etc/conf.d/net</path> para configurar la red para su primer arranque:
</p>
<pre>
# <i>nano -w /etc/conf.d/net</i>
# <i>rc-update add net.eth0 default</i>
</pre>

<p>
Si tiene múltiples tarjetas de red, debe crear los scripts <path>net.eth<comment>x</comment></path> adicionales para cada uno, donde (<comment>x</comment> = 1, 2, ...):
</p>
<pre caption="Multiple network interfaces">
# <i>cd /etc/init.d</i>
# <i>cp net.eth0 net.eth<comment>x</comment></i>
# <i>rc-update add net.eth<comment>x</comment> default</i>
</pre>

<p>
Si tiene una tarjeta pcmcia instalada, revise el archivo /etc/init.d/pcmcia para verificar que la configuración esté correcta y agregue:

<pre>
depend() {
	need pcmcia
}
</pre>

arriba en su archivo <path>/etc/init.d/net.eth<comment>x</comment></path>, para que los drivers pcmcia sean cargados automáticamente al iniciar la red.
</p>
</body>
</section>


<section>
<title>Pasos finales: configurar ajustes básicos (incluyendo el mapa del teclado)</title>
<body>
<pre caption="basic configuration">
# <i>nano -w /etc/rc.conf</i>
</pre>

<p>
Siga las direcciones en el archivo para configurar los ajustes básicos. Los usuarios querrán asegurar que el <c>CLOCK</c> esté correctamente configurado. Usuarios del teclado internacional querrán configurar la variable <c>KEYMAP</c> (revise en <path>/usr/share/keymaps</path> para ver las distintas posibilidades).
</p>
</body>
</section>
</chapter>

<chapter>
<title>Configuración de YABOOT</title>
<section>
<body>
<p>
La principal diferencia con las versiones x86 de Linux es el gestor de arranque, yaboot (a no ser que haga falta usar BootX - ver arriba). Se parece a lilo: la configuración está definida en el archivo <path>/etc/yaboot.conf</path> - aquí está el mio:</p>
<pre>
## /etc/yaboot.conf
##
## run: "man yaboot.conf" for details. Do not make changes until you have!!
## see also: /usr/share/doc/yaboot/examples for example configurations.
##
## For a dual-boot menu, add one or more of:
## bsd=/dev/hdaX, macos=/dev/hdaY, macosx=/dev/hdaZ

## our bootstrap partition:
boot=/dev/hda9

##hd: is open firmware speak for hda
device=hd:
partition=11

root=/dev/hda11
delay=5
defaultos=macosx
timeout=30
install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot

#################
## This section can be duplicated if you have more than one kernel or set of
## boot options
#################
image=/boot/vmlinux
	label=Linux
	sysmap=/boot/System.map
	read-only
##################

macos=/dev/hda13
macosx=/dev/hda12
enablecdboot
enableofboot
</pre>

<p>Una vez que esté listo el <path>yaboot.conf</path>, corra <c>mkofboot -v</c> para instalar la configuración en la partición bootstrap partition. No se olvide de hacer ésto! Si todo va bien y tiene las mismas opciones que yo, su re-inicio le ofrecerá un sencillo menú con cinco opciones. Si luego actualiza su configuración yaboot, sólo se requiere correr <c>ybin</c> para actualizar la partición bootstrap, ya que el mkofboot es para la  configuración inicial solamente.
</p>

<note>
El gestor yaboot tiene algunas posibilidades de configurar a la hora de arranque, revise el sitio <uri>http://penguinppc.org/projects/yaboot</uri> para mayor información.
</note>
</body>
</section>
</chapter>

<chapter>
<title>Ha completado la instalación!</title>
<section>
<body>
<p>En este momento Gentoo Linux está instalado. El único paso que queda es salir del chroot shell, desmontar con seguridad sus particiones y re-iniciar el sistema:</p>
<pre>
# <i>exit</i>
<codenote>Este comando le hace salir del chroot shell; también puede escribir <c>^D</c></codenote>
# <i>cd / </i>
# <i>umount /mnt/gentoo/proc</i>
# <i>umount /mnt/gentoo</i>
# <i>reboot</i>
</pre>

<note>
Al re-iniciar su máquina, es buena idea ejecutar el comando <c>update-modules</c> para crear el archivo <path>/etc/modules.conf</path>. En vez de modificar este archivo directamente, recomendamos hacer los cambios a los archivos en <path>/etc/modules.d</path>.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Extras</title>
<section>
<body>

<p>Posiblemente querrá agregar estas líneas al archivo <path>/etc/sysctl.conf</path> para habilitar la emulación de un ratón de múltiples botones en cada arranque. Los valores de las teclas se obtienen con el comando <c>showkey</c>. He aquí un ejemplo usando las teclas F11 y F12.
<pre>
# Habilitar emulación de botones múltiples
dev.mac_hid.mouse_button_emulation = 1
# Configurar el segundo botón como la tecla 87 - F11
dev.mac_hid.mouse_button2_keycode = 87
# Configurar el tercer botón como la tecla 88 - F12
dev.mac_hid.mouse_button3_keycode = 88
</pre>
</p>
</body>
</section>

<section>
<title>Estadísticas de uso con Gentoo-Stats</title>
<body>
<p>El programa de estadísticas de uso de Gentoo Linux fue iniciado en un intento de darle a los developers una forma de averiguar información acerca de la base de usuarios. Recoge información acerca del uso de Gentoo Linux para ayudarnos a establecer prioridades en el desarrollo. Su instalación es completamente opcional y apreciamos grandemente el que lo decida a instalar. Las estadísticas que se han compilado hasta la fecha puede examinarse en <uri>http://stats.gentoo.org/</uri>.</p>

<p>El servidor gentoo-stats server le asignará un número de identificación único a su sistema, lo cual asegura que su máquina se cuente una sola vez. Este número no se usará para identificar individualmente a su máquina ni será comparado con una dirección IP u otra información de naturaleza personal. Se han tomado todas las precauciones para asegurar su privacidad en el desarrollo de este sistema. Los siguientes datos son los que por los momentos monitoreamos a través del programa "gentoo-stats" program:</p>
<ul>
<li>paquetes instalados y sus versiones</li>
<li>información acerca del CPU: velocidad (MHz), fabricante, modelo, flags del CPU (tales como el "altivec")</li>
<li>información acerca de la memoria (total RAM físico disponible, total swap disponible)</li>
<li>tarjetas PCI y chips controladores de interfaz de red</li>
<li>tel perfil Gentoo Linux que usa su máquina (a dónde apunta el vínculo /etc/make.profile).</li>
</ul>

<p>Estamos conscientes que la publicación de información sensible es una amenaza a la mayoría de los usuarios de Gentoo Linux (así como para los developers).</p>

<ul>
<li>A no ser que modifique el programa gentoo-stats, éste nunca transmitirá información sensible tal como contraseñas, datos de configuración, película preferida ...</li>
<li>La transmisión de su dirección de correo electrónico es opcional y desactivado por defecto.</li>
<li>La dirección IP desde donde origina la transmisión de estos datos nunca será registrado de manera que lo podamos identificarlo a usted. No existen pares de "dirección IP/número del sistema".</li>
</ul>

<p>La instalación es sencilla - corra el siguiente comando:</p>

<pre caption="Instalando gentoo-stats">
# <c>emerge gentoo-stats</c>   <codenote>Instala gentoo-stats</codenote>
# <c>gentoo-stats --new</c>    <codenote>Obtiene un nuevo número de sistema</codenote>
</pre>

<p>El segundo comando solicita un nuevo número de identificación de sistema y lo ingresa en <path>/etc/gentoo-stats/gentoo-stats.conf</path> automáticamente. Puede examinar este archivo para ver algunas opciones de configuración adicionales.</p>

<p>Después de esto, el programa debe correrse regularmente (gentoo-stats no tiene que correrse como root). Agregue esta línea a su <path>crontab</path>:</p>

<pre caption="Actualizando gentoo-stats con cron">
<c>0 0 * * 0,4 /usr/sbin/gentoo-stats --update > /dev/null</c>
</pre>

<p>El programa <c>gentoo-stats</c> es un script perl sencillo que puede ser examinado con su pager o editor preferido: <path>/usr/sbin/gentoo-stats</path>.</p>

</body>
</section>

<section>
<title>A dónde vamos desde aquí</title>
<body>
<p>Si tiene alguna pregunta o le interesa involucrarse con el desarrollo de Gentoo Linux, considere unirse a nuestras listas de correo gentoo-user y gentoo-dev (hay un vínculo para suscribirse al hacer "click" en nuestra <uri link="http://www.gentoo.org/">página principal</uri>). También hay una útil <uri link="/doc/es/desktop.xml">Guía de configuración de su escritorio</uri> que le ayudará a continuar configurando su sistema Gentoo Linux nuevo además hay otro vínculo a la <uri link="/doc/es/portage-user.xml">Guía del usuario del sistema Portage</uri> que le ayudará a familiarizarse con el sistema Portage. Disfrute y bienvenido a Gentoo Linux!</p>

<p>El <uri link="/doc/es/gentoo-ppc-faq.xml">Gentoo Linux/PowerPC FAQ</uri> cubre preguntas frecuentes y sus respuestas acerca de Gentoo Linux/PPC. Tal vez el más genérico <uri link="/doc/es/faq.xml">Gentoo Linux FAQ</uri> pueda ayudarlo a comenzar, aunque esté dirigida hacia instalaciones x86. <uri link="http://forums.gentoo.org/viewforum.php?f=24">Gentoo on PPC</uri> (on forums.gentoo.org) es un bulletin-board abierto para discusión de todos los asuntos relacionados al PowerPC. También existe usualmente una discusión alegre en IRC. Unase a nosotros en <i>#gentoo-ppc</i> en <i>irc.freenode.net</i>.</p>

<p>Gracias y que se divierta con Gentoo!</p>

</body>
</section>
</chapter>
</guide>
