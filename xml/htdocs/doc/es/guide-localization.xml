<?xml version='1.0' encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/guide-localization.xml,v 1.11 2007/10/06 16:02:58 chiguire Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/es/guide-localization.xml" lang="es">
<title>Configurando localización en Gentoo Linux</title>

<author title="Autor">
 Alexander Holler
</author>
<author title="Traductor/Editor">
  <mail link="slucy@uchicago.edu">Steven Lucy</mail>
</author>
<author title="Editor">
  <mail link="bennyc@gentoo.org">Benny Chuang</mail>
</author>
<author title="Editor">
  <mail link="pylon@gentoo.org">Lars Weiler</mail>
</author>
<author title="Editor">
  <mail link="dertobi123@gentoo.org">Tobias Scherbaum</mail>
</author>
<author title="Editor">
  <mail link="flammie@gentoo.org">Flammie Pirinen</mail>
</author>
<author title="Traductor">
  <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Traductor">
  <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
</author>
<author title="Traductor">
  <mail link="yoswink@gentoo.org">José Luis Rivero</mail>
</author>
<author title="Traductor">
  <mail link="edulix@iespana.es">Eduardo Robles Elvira</mail>
</author>
<author title="Traductor">
  <mail link="ertomas@gmail.com">Tomás Cayuelas Ruiz</mail>
</author>

<abstract>
Este documento explica qué pasos se ha de seguir para transformar un
sistema Gentoo Linux a un idioma distinto al inglés. También explica
cómo llegar a mostrar el símbolo del Euro.
</abstract>

<version>1.36</version>
<date>2007-10-04</date>

<!--
<chapter>
<title>Prefacio</title>
<section>
<body>

<p>
Como soy español, explicaré cómo activar mi idioma, que es el
castellano. Si quiere usar otro idioma, sólo ha de cambiar el código
del idioma <e>es</e> con el que corresponda a su país, p.e. <e>fr</e>
para el francés o <e>de</e> para el alemán. 
</p>

</body>
</section>
</chapter>
-->

<chapter>
<title>Zona horaria</title>
<section>
<body>

<p>
De manera de mantener la hora apropiadamente, debemos seleccionar la
zona horaria para que el sistema pueda conocer su ubicación. Busque la
zona horaria en <path>/usr/share/zoneinfo</path>. Ajuste la zona
horaria en <path>/etc/conf.d/clock</path>. Por favor evite las zonas
horarias <path>/usr/share/zoneinfo/Etc/GMT*</path> ya que sus nombres
no indica las zonas esperadas. Por ejemplo, <path>GMT-8</path> es, de
hecho, GMT+8.
</p>

<pre caption="Estableciendo la zona horaria">
# <i>ls /usr/share/zoneinfo</i>
<comment>(Vamos a usar como ejemplo a Madrid)</comment>
# <i>nano -w /etc/conf.d/clock</i>
TIMEZONE="Europe/Madrid"

#<i>date</i>
Wed Mar  8 00:46:05 CET 2006
</pre>

<note>
Asegúrese que el indicador de zona horaria de tres letras (en este
caso "CET") sea el correcto para su área.
</note>

<note>
Puede personalizar el valor de la variable de entorno <c>TZ</c> al
texto que sigue <path>/usr/share/zoneinfo</path> en el archivo rc de
su shell (<path>.bash_profile</path> en el caso de bash). En este caso
<c>TZ="Europe/Madrid"</c>.
</note>
</body>
</section>
</chapter>

<chapter>
<title>El reloj del sistema</title>
<section>
<body>

<p>
En la mayoría de las instalaciones de Gentoo Linux installations, el
reloj del sistema está puesto a la hora UTC (o GMT, Greenwich Mean
Time) y luego se ajusta tomando en cuenta la zona horaria para
establecer la hora actual, local. Si por alguna razón requiere que la
hora del reloj del sistema no sea UTC habrá que
modificar <path>/etc/conf.d/clock</path> para cambiar el valor
de <c>CLOCK</c> de <c>UTC</c> a <c>local</c>
</p>

<pre caption="reloj local vs. GMT">
<comment>(recomendado:)</comment>
CLOCK="UTC"
<comment>(o:)</comment>
CLOCK="local"
</pre>
</body>
</section>
</chapter>

<chapter>
<title>Locales del Sistema</title>
<section>
<title>¿Qué son las locales?</title>
<body>

<p>
Las locales son un conjunto de datos que muchos programas utilizan
para determinar los ajustes específicos de país e idioma. Las locales
y sus datos forman parte de la biblioteca del sistema y se encuentran
en <path>/usr/share/locale</path> en la mayoría de los sistemas. Una
locale generalmente tiene el nombre de forma <c>ab_CD</c> donde
<c>ab</c> representa las dos (o tres) letras del su código del idioma
(según la ISO-639) y <c>CD</c> representa las dos letras del su código
del país (según la ISO-3166). Las variantes suelen agregarse a las
locales, por ejemplo <c>en_GB.utf8</c> or <c>de_DE@euro</c>. Por favor
explore la <uri link="http://en.wikipedia.org/wiki/Locale">página de
Wikipedia</uri> (en inglés) para más información acerca de las locales
y otros artículos relacionados.
</p>
</body>
</section>

<section>
<title>Variables de entorno para las Locales</title>
<body>

<p>
Los ajustes de las locales se almacenan en las variables de
entorno. Éstos se ajustan normalmente dentro
de <path>/etc/env.d/02locale</path> (para ajustar todo el sistema)
y <path>~/.bashrc</path> (para ajustar un usuario especifico)
fichero. Las variables que controlan diferentes aspectos de las
locales se muestran en la tabla de abajo, esas con la precedencia más
alta (ej. eliminan acciones de otras de más abajo) son las que están
más arriba de la tabla. Todas las variables toman un nombre de una
local como
<c>ab_CD</c> formato ya comentado arriba.
</p>

<table>
<tr>
  <th>Nombre de la Variable</th>
  <th>Explicación</th>
</tr>
<tr>
  <ti>LC_ALL</ti>
  <ti>
   Define todas las locales inmediatamente. Éste es el nivel superior
   para las locales y sobreescribirá cualquier otro ajuste.
  </ti>
</tr>
<tr>
  <ti>LC_COLLATE</ti>
  <ti>
   Define el orden alfabético la cadena. Esto afecta, por (ej. la
   salida ordenada del listado de un directorio).
  </ti>
</tr>
<tr>
  <ti>LC_CTYPE</ti>
  <ti>
   Define el carácter que maneja las propiedades del
   sistema. Determina qué caracteres se consideran parte del alfabeto,
   numérico, etc. ... Tambien determina si el juego de caracteres
   usado, es aplicable.
  </ti>
</tr>
<tr>
  <ti>LC_MESSAGES</ti>
  <ti>
   Las localizaciones de los programas para aplicaciones que usan el
   mensaje de localización basado en esquemas (la mayoría de los
   programas GNU, vea los capítulos siguientes para una información
   mas exacta sobre lo que hacen, y como conseguir los programas).
  </ti>
</tr>
<tr>
  <ti>LC_MONETARY</ti>
  <ti>
    Define las unidades monetarias y el formato de los actuales
    valores numericos.
  </ti>
</tr>
<tr>
<ti>LC_NUMERIC</ti>
 <ti>
   Define el formato de los valores numericos que no son
   monetarios. Afecta a cosas, como el separador para los miles y el
   separador decimal.
</ti>
</tr>
<tr>
  <ti>LC_PAPER</ti>
  <ti>Define el tamaño por defecto del papel</ti>
</tr>
<tr>
  <ti>LANG</ti>
  <ti>
   Define todos los ajustes de las locales inmediatamente. Este ajuste
   se puede ver sobreescrita si se usan ajustes individuales del tipo
   LC_* o incluso por LC_ALL.
  </ti>
</tr>
</table>

<note>
Aunque la mayoría de los programas trabajan con LC_ALL solamente,
alguno de ellos podría tener un mal funcionamiento, si LC_ALL es
elegida y LANG no.  Si usted quiere estar seguro, elija <e>ambas</e>.
</note>

<p>
La mayoría de los usuarios solo eligen la variable LANG, y quizás la
variable LC_CTYPE a nivel de usuario agregando definiciones al
interprete de comandos para el lanzamiento de archivos que definen
manualmente la variable de entorno desde la linea de comandos:
</p>

<pre caption="Configurar las locales en ~/.bashrc">
export LANG="es_ES@euro"
</pre>

<note>
Añada <c>@euro</c> a sus locales si quiere usar el símbolo del Euro
(€)
</note>

<p>
También es posible establecer el locale a nivel de sistema para todos
los usuarios y programas:
</p>

<pre caption="Estableciendo el locale por defecto en /etc/env.d/02locale">
LC_ALL="es_ES@euro"
LANG="es_ES@euro"
</pre>

<p>
Es práctica común usar solamente las locales por usuario y dejar los
valores por defecto sin configurar. En este caso el locale del sistema
queda establecido en un valor especial <c>"C"</c>, el cual, por
razones históricas equivale al locale para el idioma inglés.
</p>

<p>
Para que los programas puedan trabajar con la localizacion que usted
eligió, usted probablemente necesitará compilar los programas con la
opción <c>nls</c> (soporte para lenguaje nativo, "Native Language
Support"), indicado en sus USE. La mayoría de los programas usan nls
pero también necesitan la librería gettext para extraer y utilizar
mensajes localizados. Por supuesto, el Portage de Gentoo lo instalará
automáticamente cuando se requiera.
</p>

<p>
Una vez establecido el locale adecuado, asegúrese de actualizar las
variables de entorno para que el sistema esté al tanto de los cambios:
</p>

<pre caption="Actualizando el entorno">
<comment>(Para el locale por por defecto del sistema:)</comment>
# <i>env-update &amp;&amp; source /etc/profile</i>

<comment>(Para un locales específico de usuario:)</comment>
$ <i>source ~/.bashrc</i>
</pre>

<p>
Después de esto, reinicie el servidor X
pulsando <c>Ctrl-Alt-Backspace</c>, haga log out y luego login como el
usuario.
</p>

<p>
Ahora, verifique que los cambios han surtido efecto:
</p>

<pre caption="Verifique los cambios del entorno">
$ <i>env | grep -i LC_</i>
</pre>
  	
<p>
Hay tambien localizaciones adicionales para la variable llamada
LINGUAS, que afecta a los ficheros de localizacion que se instalan con
los programas basados en gettext, y decide la localizacion que se
tiene que usar para algunos programas especificos, por ejemplo:
<c>kde-base/kde-i18n</c> and <c>app-office/openoffice</c>. Dicha variable
se especifica dentro del fichero <path>/etc/make.conf</path>:
</p>

<pre caption="Ajustando LINGUAS en /etc/make.conf">
# <i>nano -w /etc/make.conf</i>
<comment>(Añada la variable LINGUAS. Para nosotros, 
usaremos el Castellano:)</comment>
LINGUAS="es"
</pre>
</body>
</section>

<section>
<title>Generando localizaciones específicas</title>
<body>

<p>
Si utiliza una localización que no esté disponible por defecto, debe
usar <c>localedef</c> para generar su propia localización. Por
ejemplo:
</p>

<pre caption="Generando una localización con localedef">
# <i>localedef -c -i es_ES -f ISO-8859-15 es_ES.ISO-8859-15</i>
</pre>

<p>
Luego de generar la localización, podrá exportar su variable de
entorno LANG tal como lo desee.
</p>

<pre caption="Exportando la varible de entorno LANG">
# <i>export LANG="es_ES.ISO-8859-15"</i>
</pre>

<p>
Asegúrese de actualizar el entorno luego del cambio:
</p>

<pre caption="Actualizando el entorno">
# <i>env-update &amp;&amp; source /etc/profile</i>
</pre>

<p>
Después de esto debe reiniciar el servidor X
pulsando <c>Ctrl-Alt-Backspace</c>, hacer log out y luego login como
usuario.
</p>
</body>
</section>

<section>
<title>Generando los locales para glibc</title>
<body>

<p>
Probablemente utilize uno, tal vez dos localizaciones en su
sistema. Hasta ahora, la compilación de <c>glibc</c> genera un
conjunto completo de todas las localizaciones disponibles. Puede
especificar los locales que va a necesitar en el
archivo <path>/etc/locale.gen</path>.
</p>

<pre caption="Añadiendo locales a /etc/locale.gen">
en_GB ISO-8859-1
en_GB.UTF-8 UTF-8
es_ES ISO-8859-15
es_ES@euro ISO-8859-15
es_ES.UTF-8 UTF-8
</pre>

<p>
El paso siguiente es ejecutar <c>locale-gen</c>, el cual generará
todos los locales especificados en el
archivo <path>/etc/locale.gen</path>.
</p>

<note>
<c>locale-gen</c> está disponible en el <c>glibc-2.3.6-r4</c> y más
reciente. Si tiene una versión más antigua de glibc, debería
actualizarlo ya.
</note>

<p>
Puede verificar que los locales seleccionados están disponibles
ejecutando el comando <c>locale -a</c>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Distribución del teclado para la consola</title>
<section>
<body>

<p>
La distribución del teclado para la consola se configura con la
variable <c>KEYMAP</c>, en el
archivo <path>/etc/conf.d/keymaps</path>. Los valores válidos podrán
encontrarse en <path> /usr/share/keymaps/ <c>{arch}</c> /
</path>. El subdirectorio <path>i386</path> está divido por distribución de
teclas (<path>qwerty/</path>, <path>azerty/</path>, etc.). Algunos idiomas
tienen múltiples opciones, por lo que tal vez desee experimentar para decidir
cuál le sirve mejor.
</p>

<p>
El castellano requiere el uso de "teclas muertas", así que es
preferible no desactivarlas. Esto le librará de tener que pulsar la
barra espaciadora tras escribir caracteres como ~.
</p>

<pre caption="Establecer el mapa de teclado para la consola">
KEYMAP="es"
KEYMAP="es euro2"
</pre>
</body>
</section>
</chapter>

<chapter>
<title>Distribución del teclado en el servidor X</title>
<section>
<body>

<p>
La distribución del teclado a ser usado bajo el servidor X está
pautado en <path>/etc/X11/xorg.conf</path> por la
opción <c>XkbLayout</c> .
</p>

<pre caption="Configurando el mapa del teclado para X">
Section "InputDevice"
    Identifier  "Keyboard1"
    ...
    Option "XkbLayout"    "es"
    # Option "XkbModel"     "pc105"    <comment>## para teclados internacionales.</comment>
    # Option "XkbVariant"  "nodeadkeys" <comment>## usado para xterm</comment>
    ...
</pre>

<p>
Si tiene un teclado internacional, debería configurar la
opción <c>XkbModel</c> a <c>pc102</c> o <c>pc105</c>, ya que esto
permitirá reconocer las teclas adicionales específica al teclado.
</p>

<p>
Las teclas muertas permitirán pulsar teclas que no se verán en
seguida, pero que podrán ser combinadas con otra letra para producir
un caracter como é, è, á, à, etc. El configurar la
opción <c>XkbVariant</c> a <c>nodeadkeys</c> permite ingresar estos
caracteres a los terminales X.
</p>

<p>
Si desea cambiar entre varios mapas de teclado (por ejemplo entre
inglés y ruso), lo único que tiene que hacer es agregar unas pocas
líneas al archivo <path>xorg.conf</path> para especificar las
distribuciones deseadas y el comando de intercambio.
that specify the desired layouts and the shortcut
command.
</p>
  	
<pre caption="Cambiando entre distribuciones de teclado">
  	  Section "InputDevice"
  	      Identifier  "Keyboard1"
      ... 	      ...
  	      Option "XkbLayout"    "us,ru"
  	      Option "XkbOptions"   "grp:alt_shift_toggle,grp_led:scroll"
</pre>

<p>
Acá <c>XkbOptions</c> permite pasar de un teclado a otro sencillamente
pulsando <c>Alt-Shift</c>. Esto también prenderá o apagará la luz
Scroll Lock, gracias a la opción <c>grp_led:scroll</c>, constituyendo
un práctico indicador visual señalando cuál distribución está en uso.
</p>
</body>
</section>
</chapter>

<chapter>
<title>KDE</title>
<section>
<body>

<p>
Para KDE se debe instalar el
paquete <c>kde-base/kde-i18n</c>. Referente a
Kde-i18n <uri link="#variables">variable LINGUAS</uri> descrita
anteriormente.
</p>
</body>
</section>
</chapter>

<chapter>
<title>El símbolo Euro en la consola</title>
<section>
<body>

<p>
Para obtener el símbolo del Euro en la consola, hará falta configurar
la variable <c>CONSOLEFONT</c> en el
archivo <path>/etc/conf.d/consolefont</path> a uno de los archivos
bajo <path>/usr/share/consolefonts/</path> (sin incluir
el <c>.psfu.gz</c>). El archivo <c>lat9w-16</c> tiene el símbolo del
Euro.
</p>

<pre caption="Configurar la fuente de la consola">
CONSOLEFONT="lat9w-16"
</pre>

<p>
Debe verificar que <c>CONSOLEFONT</c> está en el nivel de ejecución
boot:
</p>

<pre caption="Verifique que está en el nivel de ejecución apropiado">
# <i>rc-update -v show | grep -i consolefont</i>
</pre>

<p>
Si no se muestra un nivel de ejecución para <c>CONSOLEFONT</c>,
agréguelo al nivel adecuado:
</p>

<pre caption="Agregando consolefont al nivel de ejecución boot">
# <i>rc-update add consolefont boot</i>
</pre>
</body>
</section>
</chapter>

<chapter>
<title>El símbolo del Euro en X</title>
<section>
<title>Para la mayoría de las aplicaciones</title>
<body>

<p>
Obteniendo el símbolo del Euro bajo X es algo más difícil. Lo primero es
cambiar las definiciones de <c>fixed</c> y <c>variable</c> en
<path>/usr/X11R6/lib/X11/fonts/misc/fonts.alias</path> para que terminen en
<c>iso8859-15</c> en vez de <c>iso8859-1</c> .
</p>

<pre caption="Configurando las fuentes por defecto de X">
fixed        -misc-fixed-medium-r-semicondensed--13-120-75-75-c-60-iso8859-15
variable     -*-helvetica-bold-r-normal-*-*-120-*-*-*-*-iso8859-15
</pre>

<p>
Algunas aplicaciones usan sus propias fuentes y habrá que decirle a
cada una que hagan uso de fuentes con el símbolo del Euro. Puede hacer
esto por usuario en <path>.Xdefaults</path> (puede copiar este archivo
a <path>/etc/skel/</path> para que pueda ser aprovechado por los
nuevos usuarios) o a nivel global para cualquier aplicación con un
archivo de recursos en <path>/usr/X11R6/lib/X11/app-defaults/</path>
(como xterm).  En estos archivos generalmente hay que cambiar una
línea preexistente en vez de agregar líneas. Para cambiar nuestra
fuente en xterm haríamos:
</p>

<pre caption="Cambiando la fuente de xterm">
<comment>(en su directorioin your home directory)</comment>
# <i>echo 'XTerm*font: fixed' >> .Xresources</i>
# <i>xrdb -merge .Xresources</i>
</pre>
</body>
</section>

<section>
<title>El símbolo del Euro en (X)Emacs</title>
<body>

<p>
Para usar el símbolo del Euro en (X)Emacs, agregue lo siguiente al
archivo
<path>.Xdefaults</path> :
</p>

<pre caption="Cambiando la fuente de emacs">
Emacs.default.attributeFont: -*-courier-medium-r-*-*-*-120-*-*-*-*-iso8859-15
</pre>

<p>
Para XEmacs (no el Emacs original), hay que hacer un poco más. En
<path>/home/user/.xemacs/init.el</path>
, agregue:
</p>

<pre caption="Cambiando la fuente de xemacs">
(define-key global-map '(EuroSign) '[€])
</pre>

<note>
El símbolo entre corchetes [] es el del Euro.
</note>
</body>
</section>

<section>
<title>OpenOffice.Org</title>
<body>

<p>
Los ebuilds actuales de los ebuilds <c>app-office/openoffice</c>
y <c>app-office/openoffice-bin</c> soportan
la <uri link="#variables">variable LINGUAS</uri> para seleccionar la
instalación de lenguajes. Para ver el estado de las traducciones de
los mensajes del GUI, guionización, corrección ortográfica y demás
localizaciones en su idioma, por favor refiérase a
la <uri link="http://l10n.openoffice.org/languages.html">página web de
localizaciones de OpenOffice.Org</uri>.
</p>

<p>
Por favor haga cuenta que este paquete ahora utiliza la variable de entorno
LINGUAS para especificar la localización. El sistema con la variable antigua
LANGUAGE=ENUS|PORT ya <e>no</e> funciona. El lenguaje por defecto es "US
English". Si desea cambiar el lenguaje por defecto de OpenOffice, revise el
mismo ebuild para obtener el código de idioma apropiado.
</p>
</body>
</section>
</chapter>
</guide>
