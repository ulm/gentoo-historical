<?xml version='1.0' encoding='UTF-8'?>

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/xorg-config.xml,v 1.16 2009/01/27 13:20:51 chiguire Exp $ -->

<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/es/xorg-config.xml" lang="es">

<title>Guía de configuración del Servidor X</title>

<author title="Autor">
  <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Editor">
  <mail link="nightmorph"/>
</author>
<author title="Traductor">
   <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Traductor">
   <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
</author>
<author title="Traductor">
  <mail link="yoswink@gentoo.org">José Luis Rivero</mail>
</author>
<author title="Traductor">
  <mail link="enrique@barbeito.org">Enrique Barbeito García</mail>
</author>

<abstract>
Xorg es el servidor de ventanas X que permite a los usuarios disponer
de un entorno gráfico a su alcance inmediato. Está guía de 
configuración explica qué es Xorg, cómo instalarlo y cuáles son las
distintas opciones de configuración.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.19</version>
<date>2009-01-26</date>

<chapter>
<title>¿Qué es el Servidor de Ventanas X?</title>
<section>
<title>Entorno Gráfico vs Línea de Comandos</title>
<body>

<p>
La usuario medio puede tener miedo al pensar que va a tener que introducir
comandos. ¿Por qué no iba a ser capaz de comenzar su camino a través de la 
libertad que proporciona Gentoo (y Linux en general)? Bien, *gran sonrisa*,
por supuesto que eres capaz de esto :-) Linux ofrece una amplia variedad de
llamativos interfaces de usuarios y entornos los cuales pueden ser 
instalados sobre su instalación actual.  
</p>

<p>
Esta es una de las mayores sorpresas que se llevan los nuevos usuarios: un
interfaz gráfico de usuario no es nada más que una aplicación ejecutándose
sobre tu sistema. <e>No</e> es parte del núcleo de Linux o de nada interno
al sistema. Es una potente herramienta que activa completamente las 
habilidades gráficas de tu sistema.
</p>

<p>
Puesto que los estándares son importantes, un estándar para dibujar y mover 
ventanas en una pantalla, interactuando con el usuario a través del ratón, el 
teclado y otros aspectos básicos también importantes han sido creados y 
denominados <e>Sistema de Ventanas X (X Window System)</e>, abreviado
normalmente como <e>X11</e> o solamente <e>X</e>. Es utilizado en Unix, Linux
y Sistemas operativos basados en Unix a lo largo de todo el mundo.
</p>

<p>
La aplicación que proporciona a los usuarios de Linux la posibilidad de 
ejecutar interfaces gráficos de usuario y que utiliza el estándar X11 es 
Xorg-X11, una bifurcación del proyecto XFree86. XFree86 ha decidido utilizar
una licencia que puede no ser compatible con la licencia GPL, por tanto, se
recomienda el empleo de Xorg. El árbol oficial de Portage no proporcionará
el paquete de XFree86 nunca más.
</p>
</body>
</section>

<section>
<title>El proyecto X.org</title>
<body>

<p>
El proyecto <uri link="http://www.x.org">X.org</uri> creó y mantiene una 
implementación de código abierto, libre y redistribuible del sistema X11.
Es una infraestructura de escritorio basada en X11 de código abierto. 
</p>

<p>
Xorg proporciona una interfaz entre tu hardware y el software gráfico que
quieras ejecutar. Además, Xorg esta completamente preparado para
el trabajo en red, esto significa que usted es capaz de ejecutar una 
aplicación en un sistema mientras la esta viendo en otro sistema diferente.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Instalando Xorg</title>
<section>
<body>

<p>
Antes de instalar Xorg hay que configurar dos importantes variables en el
fichero <path>/etc/make.conf</path>.
</p>

<p>
La primera de ellas es <c>VIDEO_CARDS</c>. Se usa para establecer los
controladores de vídeo que tiene pensado utilizar. Su configuración normalmente
se basa en el tipo y marca de la tarjeta que tenga. Las configuraciones más
comunes son <c>nvidia</c> para tarjetas nVIDIA y <c>fglrx</c> para tarjetas ATI
Radeon. Estos son los controladores propietarios de nVIDIA y ATI,
respectivamente. Si le gustaría emplear las versiones de código abierto,
utilice <c>nv</c> en vez de <c>nvidia</c> para configurar la variable pero
tenga en cuenta que el uso de este controlador implica no disponer de una
aceleración 3D completa. Los controladores libres <c>radeon</c> y
<c>radeonhd</c> soportan aceleración 3D en las tarjetas Radeon más antiguas
pero para las más nuevas todavía no funcionan del todo. <c>VIDEO_CARDS</c>
puede contener más de un controlador; en este caso, cada uno de ellos debe
estar separado con espacios.
</p>

<p>
La segunda variable es <c>INPUT_DEVICES</c> y se utiliza para determinar qué
controladores han de ser creados para los dispositivos de entrada. En la
mayoría de los casos, con configurarla con <c>keyboard mouse</c> debería
funcionar correctamente.
</p>

<p>
Ahora debería decidir qué controladores utilizará y agregar la configuración
necesaria al fichero <path>/etc/make.conf</path>:
</p>

<pre caption="Entradas de ejemplo en make.conf">
<comment>(Para el soporte de ratón y teclado)</comment>
INPUT_DEVICES="keyboard mouse"
<comment>(Para tarjetas nVIDIA)</comment>
VIDEO_CARDS="nvidia"
<comment>(O para tarjetas ATI Radeon)</comment>
VIDEO_CARDS="fglrx"
</pre>

<p>
Puede encontrar más instrucciones de cómo configurar tarjetas nVIDIA y ATI en
la <uri link="/doc/es/nvidia-guide.xml">Guía nVidia Gentoo Linux</uri> y en el
<uri link="/doc/es/ati-faq.xml">PUF (Preguntas de Uso Frecuente/FAQ) de ATI en
Gentoo Linux</uri>. Si no sabe qué controladores debe escoger, diríjase a estas
guías para más información.
</p>

<note>
Si las configuraciones mencionadas anteriormente no le funcionan, debería
ejecutar <c>emerge -pv xorg-server</c>. Compruebe todas las opciones
disponibles y elija aquella que se ajuste a su sistema. El ejemplo es válido
para la arquitectura amd64 y <c>xorg-server-1.2</c>.
</note>

<pre caption="Mostrar todos los controladores/opciones disponibles">
# <i>emerge -pv xorg-server</i>

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R   ] x11-base/xorg-server-1.2.0-r3  USE="dri nptl xorg (-3dfx) -debug
-dmx -ipv6 -kdrive -minimal -sdl -xprint" INPUT_DEVICES="keyboard mouse -acecad
-aiptek -calcomp -citron -digitaledge -dmc -dynapro -elo2300 -elographics -evdev
-fpit -hyperpen -jamstudio -joystick -magellan -microtouch -mutouch -palmax
-penmount -spaceorb -summa -synaptics -tek4957 -ur98 -vmmouse -void -wacom"
VIDEO_CARDS="nvidia -apm -ark -chips -cirrus -cyrix -dummy -epson -fbdev -fglrx
-glint -i128 (-i740) -i810 (-impact) (-imstt) -mach64 -mga -neomagic (-newport)
(-nsc) -nv -r128 -radeon -rendition -s3 -s3virge -savage -siliconmotion -sis
-sisusb (-sunbw2) (-suncg14) (-suncg3) (-suncg6) (-sunffb) (-sunleo) (-suntcx)
-tdfx -tga -trident -tseng -v4l -vesa -vga -via -vmware -voodoo" 0 kB
</pre>

<p>
Una vez establecidas las variables necesarias, ya puede instalar el paquete
Xorg.
</p>

<pre caption="Instalando Xorg">
# <i>emerge xorg-x11</i>
</pre>

<p>
Cuando la instalación haya finalizado, quizá necesite reinicializar algunas
variables de entorno antes de continuar. Simplemente ejecute <c>env-update</c> 
seguido de <c>source /etc/profile</c> y ya está configurado.
</p>

<pre caption="Reinicializando las variables de entorno">
# <i>env-update</i>
# <i>source /etc/profile</i>
</pre>
</body>
</section>
</chapter>

<chapter>
<title>Configurando Xorg</title>
<section>
<title>El archivo xorg.conf</title>
<body>

<p>
El archivo de configuración de Xorg se llama <path>xorg.conf</path> y se
encuentra en <path>/etc/X11</path>. El paquete xorg-x11 proporciona un
ejemplo de configuración en <path>/etc/X11/xorg.conf.example</path> el 
cual puede utilizarse para crear su propia configuración. Está muy comentado,
pero si necesita más información respecto a la sintaxis, no dude en leer
la página del manual (man).
</p>

<pre caption="Leyendo la página del manual sobre xorg.conf">
# <i>man 5 xorg.conf</i>
</pre>

<p>
Feliz lectura para aquellos que lo vayan a hacer. Estamos seguros de que no
será así, con lo cual seguiremos con la explicación sobre como podemos crear
el archivo automáticamente.
</p>

</body>
</section>
<section>
<title>Manera predeterminada: Generación automática de xorg.conf</title>
<body>

<p>
El propio Xorg es capaz de adivinar la mayoría de parámetros. En la mayoría
de los casos, sólo necesitara cambiar algunas líneas para conseguir la
resolución que quiere y marchando. Si está interesado en un mayor
conocimiento, asegúrese de consultar los recursos que se encuentran al final
de este capítulo. Pero primero, permítanos generar un (esperemos que
funcione) archivo de configuración Xorg. 
</p>

<pre caption="Generando un archivo xorg.conf">
# <i>Xorg -configure</i>
</pre>

<p>
Asegúrese de leer las últimas lineas que aparecen en su pantalla cuando Xorg
ha terminado de probar su hardware. Si le informa de que ha fallado en algún
punto, forzosamente tendrá que editar manualmente el archivo 
<path>xorg.conf</path>. Asumiremos que no ha fallado, le debería informar que
ha generado <path>/root/xorg.conf.new</path> listo para que lo pruebe. Entonces,
vamos a probarlo :)
</p>

<pre caption="Probando el archivo xorg.conf.new">
# <i>X -config /root/xorg.conf.new</i>
</pre>

<p>
Si todo va bien, debería ver un patrón de trama sencillo blanco y negro.
Verifique si el ratón funciona correctamente y si la resolución se ve bien. Si
obtuvo errores en "/dev/mouse" pruebe a cambiar su dispositivo de ratón por
<c>/dev/input/mice</c> en la sección "InputDevice" de <path>xorg.conf</path>.
Tal vez no pueda deducir la resolución exacta, pero al menos podrá ver si ésta
es muy baja. Puede salir cuando quiera, pulsando Ctrl-Alt-Backspace.
</p>
</body>
</section>

<section>
<title>Alternativa: Generación Semi-Automática de xorg.conf</title>
<body>

<p>
Xorg proporciona una herramienta llamada <c>xorgconfig</c> la cual le
preguntará por información relativa a su sistema (tarjeta gráfica, teclado,
...). Basándose en los datos que ha suministrado, creará un archivo
<path>xorg.conf</path>.
</p>

<pre caption="Generación semi-automática de xorg.conf">
# <i>xorgconfig</i>
</pre>

<p>
Otra herramienta, también proporcionada por Xorg, es <c>xorgcfg</c>, el cual 
primero intenta ejecutar <c>Xorg -configure</c> y arrancar el servidor X 
para las pruebas finales.
</p>
  	 
<pre caption="Using xorgcfg">
# <i>xorgcfg</i>
<comment>(En caso de que fallen las X o la configuración, pruebe:)</comment>
 # <i>xorgcfg -textmode</i>
</pre>

</body>
</section>

<section>
<title>Copiando xorg.conf</title>
<body>

<p>
Ahora, copiemos <path>xorg.conf.new</path> a
<path>/etc/X11/xorg.conf</path> para que no tengamos que ejecutar
contínuamente <c>X -config</c> -- el escribir solamente <c>X</c> o
<c>startx</c> es mucho más fácil :)
</p>

<pre caption="Copiando xorg.conf">
# <i>cp /root/xorg.conf.new /etc/X11/xorg.conf</i>
</pre>
</body>
</section>

<section id="using_startx">
<title>Ejecutar startx</title>
<body>

<p>
Ahora intente <c>startx</c> para iniciar su servidor X. <c>startx</c>
es un guión que ejecuta una <e>sesión X</e>, en otras palabras, inicia
el servidor X y algunas aplicaciones gráficas. Decide qué aplicaciones
debe correr mediante la siguiente lógica:
</p>

<ul>
  <li>
    Si existe un archivo de nombre <path>.xinitrc</path> en el
    directorio hogar, ejecutará los comandos allí contenidos.
  </li>
  <li>
    Sino, leerá el contenido de la variable de entorno XSESSION y
    ejecutará una de las sesiones disponibles en
    <path>/etc/X11/Sessions/</path> (puede modificar el contenido de
    XSESSION en <path>/etc/rc.conf</path> para que funcione como valor
    por defecto para todos los usuarios del sistema).
  </li>
<li>
    Si fallan las opciones anteriores, utilizará un gestor gráfico
    sencillo, usualmente <c>twm</c>.
  </li>
</ul>

<pre caption="Iniciando X">
# <i>startx</i>
</pre>

<p>
Si ve un feo, odioso, repulsivo y deformado gestor de ventanas, ese es
<c>twm</c>. Para terminar la sesión twm, escriba <c>exit</c> o Ctrl-D
en los xterms disponibles. También puede matar la sesión X usando la
combinación de teclas Ctrl-Alt-Backspace. Esto obligará una salida
algo vergonzosa -- tal vez algo que no siempre quiera hacer, pero que,
sin embargo, no duele :)
</p>
</body>
</section>
</chapter>

<chapter>
<title>Ajustando el archivo xorg.conf</title>
<section>
<title>Configurando su resolución</title>
<body>

<p>
Si nota que la resolución de la pantalla no es correcta, necesitará comprobar
dos secciones en su configuración. Primero de todo, tiene la sección
<e>Screen</e> la cual tiene una lista de resoluciones, si existe, que su 
servidor X puede soportar. De forma predeterminada, esta sección no contiene
ninguna lista de resoluciones. Si es este el caso, Xorg estima las resoluciones 
basándose en la información de la segunda sección, <e>Monitor</e>.
</p>

<p>
Lo que sucede es lo siguiente: Xorg comprueba la configuración de 
<c>HorizSync</c> y <c>VertRefresh</c> en la sección <e>Monitor</e> para
calcular las resoluciones válidas. Por ahora, deje estas configuraciones como 
están. Solamente cuando los cambios en la sección <e>Screen</e> (serán 
descritos en un minuto) no funcionen, entonces necesitará revisar las 
especificaciones de su monitor y rellenar con los valores corrector.  Además, 
también puede utilizar una herramienta que encuentra las
especificaciones de su monitor, llamada <c>sys-apps/ddcxinfo-knoppix</c>.
</p>

<warn>
<b>No</b> cambie los valores de estas dos variable relacionadas con el monitor
sin haber consultado las especificaciones técnicas de su monitor. Una 
configuración incorrecta conduce a errores de falta de sincronización en el 
mejor de los casos y ha quemar pantallas en el peor.
</warn>

<p>
Ahora vamos a cambiar las resoluciones. En el siguiente ejemplo desde
<path>/etc/X11/xorg.conf</path> añadimos líneas de resolución (<c>Modes</c>)
y la profundidad predeterminada (<c>DefaultDepth</c> ) para que su servidor
de X comience con 24 bits y 1024x768. No importan los textos entrecomillados
-- son ejemplos y la mayoría serán diferentes de las configuraciones de su
sistema.
</p>

<pre caption="Modificar la sección Screen en /etc/X11/xorg.conf">
Section "Screen"
  Identifier  "Default Screen"
  Device    "S3 Inc. ProSavage KN133 [Twister K]"
  Monitor   "Generic Monitor"
  <i>DefaultDepth  24</i>
  <comment># Omitimos parte del texto para mejorar la legibilidad</comment>
  SubSection "Display"
    Depth   24
    <i>Modes   "1024x768"</i>
  EndSubSection
EndSection
</pre>

<p>
Ejecute X (<c>startx</c>) para descubrir si utiliza la resolución que quiere.
</p>
</body>
</section>

<section>
<title>Configurando su teclado</title>
<body>

<p>
Para configurar X para que utilice un teclado internacional, buscamos la
sección <e>InputDevice</e> que establece los parámetros del teclado y
añadimos la opción <c>XkbLayout</c> para que apunte a la disposición de
teclado que quiera. Como ejemplo, mostramos cómo aplicar la disposición de
teclado en español. (Si quiere el teclado en otro idioma, sustituya el código
de letras del país por el del suyo propio).
</p>

<pre caption="Modificar la disposición del teclado">
Section "InputDevice"
  Identifier  "Generic Keyboard"
  Driver    "keyboard"
  Option    "CoreKeyboard"
  Option    "XkbRules"  "xorg"
  Option    "XkbModel"  "pc105"
  <i>Option    "XkbLayout" "es"</i>
EndSection
</pre>
</body>
</section>

<section>
<title>Configurando su Ratón</title>
<body>

<p>
Si su ratón no funciona, primero necesitará encontrar si está detectado
por el kernel. Los ratones están recogidos en <path>/dev/input/mouse0</path>
(o <path>/dev/input/mice</path> si quiere utilizar varios ratones). En algunos
casos se usa <path>/dev/psaux</path>. En cualquier caso puede comprobar los
dispositivos que representan su ratón revisando la salida de estos archivos 
cuando mueva el ratón. Probablemente verá algo de basura en su pantalla. Para
terminar la sesión presione <c>Ctrl-C</c>.
</p>

<pre caption="Comprobando los archivos de dispositivo">
# <i>cat /dev/input/mouse0</i>
<comment>(No olvide presionar Ctrl-C para concluir)</comment>
</pre>

<p>
Si su ratón no es detectado, compruebe que todos los módulos necesarios 
están cargados.
</p>

<p>
Si su ratón es detectado, rellene con el dispositivo en la sección
<e>InputDevice</e> apropiada. En el siguiente ejemplo verá que también
podemos configurar otras dos opciones: <c>Protocol</c> (la cual muestra el
protocolo a emplear - la mayoría de los usuarios utilizarán PS/2 o IMPS/2) y
<c>ZAxisMapping</c> (la cual permite que se utilice la rueda del ratón (si es
posible).
</p>

<pre caption="Modificar las configuraciones del ratón en Xorg">
Section "InputDevice"
  Identifier  "TouchPad Mouse"
  Driver    "mouse"
  Option    "CorePointer"
  <i>Option    "Device"    "/dev/input/mouse0"</i>
  <i>Option    "Protocol"    "IMPS/2"</i>
  <i>Option    "ZAxisMapping"    "4 5"</i>
EndSection
</pre>

<p>
Ejecute <c>startx</c> y sea feliz con el resultado. Felicidades, ahora
(esperemos) tiene Xorg funcionando en su sistema. El siguiente paso es
desinstalar este horrible y ligero gestor de ventanas y utilizar  uno con
mayores funcionalidades (o incluso un entorno de escritorio) como pueda ser
KDE o GNOME, pero eso ya no forma parte de esta guía :)
</p>

</body>
</section>
</chapter>

<chapter>
<title>Recursos</title>
<section>
<title>Creando y retocando xorg.conf</title>
<body>

<p>
Primero de todo, <c>man xorg.conf</c> proporciona una rápida y completa 
referencia sobre la sintaxis utilizada por el archivo de configuración. 
Asegúrese de tenerlo abierto en un terminal cerca cuando edite el archivo de 
configuración.
</p>

<p>
Asegúrese también de mirar el fichero <path>/etc/X11/xorg.conf.example</path>.
Le puede interesar copiarlo y utilizarlo como base para escribir su propio
fichero <path>xorg.conf</path>.
</p>

<p>
Puede examinar las <uri link="http://www.x.org/wiki/FAQ">FAQ</uri> de X.org que
se proporcionan en su sitio web, además del resto de documentación.
</p>

<p>
Hay también muchos recursos en línea sobre edición de <path>xorg.conf</path>.
Nosotros solamente listamos aquí unos pocos, asegúrese de buscar en  <uri
link="http://www.google.com">Google</uri> para encontrar más :)
Como<path>xorg.conf</path> y <path>XF86Config</path> (el archivo de
configuración del proyecto XFree86) utilizan la misma sintaxis para la
mayoría de opciones de configuración y hay más información disponible sobre
<path>XF86Config</path>, incluiremos también esos recursos.
</p>

<ul>
  <li>
    <uri link="http://tldp.org/HOWTO/XFree-Local-multi-user-HOWTO/">The XFree
    Local Multi-User HOWTO</uri>
  </li>
  <li>
    <uri
    link="http://www-106.ibm.com/developerworks/edu/os-dw-linuxxwin-i.html">An
    Introduction to XFree 4.x</uri> by Chris Houser
  </li>
</ul>

</body>
</section>
<section>
<title>Otros recursos</title>
<body>

<p>
Puede encontrar más información sobre cómo instalar y configurar distintos
entornos de escritorio y aplicaciones gráficas en la sección de <uri
link="/doc/es/?catid=desktop">Recursos de Documentación de Gentoo</uri> de
nuestra documentación.
</p>

</body>
</section>
</chapter>
</guide>
