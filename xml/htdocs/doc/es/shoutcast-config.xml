<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/shoutcast-config.xml,v 1.4 2010/06/10 19:35:40 chiguire Exp $ -->

<guide lang="es">
<title>Streaming de radio con SHOUTcast</title>

<author title="Autor">
  <mail link="chriswhite@gentoo.org">Chris White</mail>
</author>
<author title="Editor">
  <mail link="fox2mike@gentoo.org">Shyam Mani</mail>
</author>
<author title="Traductor">
  <mail link="nimiux"/>
</author>

<abstract>
Esta guía indica los pasos necesarios para configurar un servidor de
emisión de radio con el servidor SHOUTcast y SHOUTcast Trans.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->


<license/>

<version>1.5</version>
<date>2006-11-02</date>

<chapter>
<title>Poniendo en marcha el servidor SHOUTcast</title>
<section>
<title>Instalando los archivos</title>
<body>

<p>
Podemos encontrar el servidor SHOUTcast en
media-sound/SHOUTcast-server-bin. Puede instalarlo con el siguiente
comando:
</p>

<pre caption="Haciendo emerge de SHOUTcast">
# <i>emerge shoutcast-server-bin</i>
</pre>

<p>
SHOUTcast Server será entonces instalado. El siguiente paso es
configurar su nuevo servidor SHOUTcast.
</p>

</body>
</section>
<section>
<title>Configurando el servidor SHOUTcast</title>
<body>

<p>
Ahora que el servidor SHOUTcast está instalado, debe ser
configurado. El fichero de configuración puede encontrarse en
<path>/etc/shoutcast/sc_serv.conf</path>. Comencemos con la
configuración. Asegúrese de que es root y abra el fichero de
configuración con su editor favorito. He elegido vi para este
ejemplo. Ahora abriré el fichero con vi:
</p>

<pre caption="Abriendo el fichero de configuración">
# <i>vi /etc/shoutcast/sc_serv.conf</i>
</pre>

<p>
Esto abrirá el fichero de configuración del servidor SHOUTcast para su
lectura. Aquí encontrará el fichero de configuración con las
diferentes opciones que puede ajustar. Echemos un vistazo a cómo
ajustar estas opciones en particular.
</p>

</body>
</section>
<section>
<title>Opciones obligatorias</title>
<body>

<pre caption="Ajustando el límite de usuarios">
<comment>; MaxUser.  The maximum number of simultaneous listeners allowed.
; Compute a reasonable value for your available upstream bandwidth (i.e. if
; you have 256kbps upload DSL, and want to broadcast at 24kbps, you would
; choose 256kbps/24kbps=10 maximum listeners.)  Setting this value higher
; only wastes RAM and screws up your broadcast when more people connect
; than you can support.</comment>
MaxUser=10
</pre>

<p>
Aquí es donde se indica el máximo número de usuarios. Como muestra la
descripción de arriba, no tiene sentido ajustarlo a 100 usuarios en
una línea de 256kbps de subida (este es el valor que he usado y mi
ancho de banda de subida es aproximadamente éste). Si está usando el
servidor SHOUTcast en una LAN, probablemente pueda ajustar este valor
MUCHO más alto (a los mencionados 100). Por favor, recuerde no abusar
de su ancho de banda, cualquiera que éste sea. El ancho de banda es un
valor de alto precio para los ISPs y algunos pueden limitar su cuenta,
penalizarle con altos pagos, o ambos.
</p>

<pre caption="Ajustando la contraseña">
<comment>; Password.  While SHOUTcast never asks a listener for a password, a
; password is required to broadcast through the server, and to perform
; administration via the web interface to this server.  This server should
; consist of only letters and numbers, and is the same server your broadcaster
; will need to enter in the SHOUTcast Source Plug-in for Winamp.  THIS VALUE
; CANNOT BE BLANK.</comment>
Password=una_contraseña_difícil_de_averiguar</pre>

<p>
Aquí es donde se ajusta la contraseña. La contraseña en sí está en
texto claro. Por razones de seguridad, recomiendo ENCARECIDAMENTE que
no se usen contraseñas que son usadas para acceder a componentes
críticos del sistema u otra información sensible. Cree su contraseña
de la forma más aleatoria posible, con una combinación de letras y
números. Esta clave será la que SHOUTcast Trans (o cualquier otro
proveedor de contenidos) emplee para conectarse y ofrecer los
contenidos en la emisión.
</p>

<pre caption="Ajustando el puerto de escucha">
<comment>; PortBase. This is the port number your server will run on.  The
; value, and the value + 1 must be available.  If you get a fatal error when
; the DNAS is setting up a socket on startup, make sure nothing else on the
; machine is running on the same port (telnet localhost port number -- if you
; get connection refused then you're clear to use that port).  Ports less than 1024
; may require root privileges on *nix machines.  The default port is 8000.</comment>
PortBase=8000
</pre>

<p>
Este valor indica el puerto al que los usuarios se tendrán que
conectar en su servidor SHOUTcast. El puerto por defecto es el 8000,
ya que es el que la mayoría de los servidores capaces de ofrecer mp3
apuntan por defecto (Audacious, winamp, etc.). Como se indica en la
descripción, si desea usar un puerto inferior al 1024 necesitará
acceso como root. Sin embargo, recomiendo no usar un puerto menor que
el 1024 para el servidor SHOUTcast.
</p>

<pre caption="Ajustando el registro">
<comment>; LogFile: file to use for logging. Can be '/dev/null' or 'none'
; or empty to turn off logging. The default is ./sc_serv.log
; on *nix systems or sc_serv_dir\sc_serv.log on win32.
; Note: on win32 systems if no path is specified the location is
; in the same directory as the executable, on *nix systems it is in the
; current directory.</comment>
LogFile=/var/log/SHOUTcast.log
</pre>

<p>
Este parámetro indica la localización del fichero de registro del
servidor SHOUTcast. En el ebuild, éste viene ajustado a
<path>/dev/null</path>, por lo que tendrá que cambiarlo para obtener
los mensajes del servidor. Lo he ajustado a la ubicación básica
<path>/var/log</path>. Puede hacer que apunte al lugar que desee.
</p>

<pre caption="Activando las estadísticas en tiempo real">
<comment>; RealTime displays a status line that is updated every second
; with the latest information on the current stream (*nix and win32
; console systems only)</comment>
RealTime=0
</pre>

<p>
Este parámetro muestra información acerca de la canción actual en
stdout una vez por segundo. Viene desactivada por defecto en el
ebuild, de esta forma, el demonio SHOUTcast corre de la manera más
silenciosa posible. Ajústelo a 1 si quiere esta información cada
segundo. Sin embargo, le recomiendo que use la página de estado en su
lugar.
</p>

<pre caption="Activando el registro en tiempo real">
<comment>; ScreenLog controls whether logging is printed to the screen or not
; on *nix and win32 console systems. It is useful to disable this when
; running servers in background without their own terminals. Default is 1</comment>
ScreenLog=0
</pre>

<p>
Este parámetro está desactivado por defecto en el ebuild para hacer
que el demonio se ejecute de la forma más silenciosa posible. Si se
activa, se registrará cualquier evento (conexiones, desconexiones,
etc.) en stdout en el momento en que suceda. Sin embargo y debido a
que los ficheros de registro hacen lo mismo, recomiendo usarlos en su
lugar.
</p>

<pre caption="Ajustando el último número de canciones reproducidas">
<comment>; ShowLastSongs specifies how many songs to list in the /played.html
; page.  The default is 10.  Acceptable entries are 1 to 20.</comment>
ShowLastSongs=10
</pre>

<p>
Tal y como indica, este valor, le permite indicar cuántas canciones de
las recientemente reproducidas se mostrarán en /played.html. Si pone
más de 20, deberá probablemente considerar usar más café.
</p>

<pre caption="Ajustando el registro de modificación del sistema de ficheros">
<comment>; TchLog decides whether or not the DNAS log file should track yp
; directory touches.  Adds and removes still appear regardless of
; this setting.
; Default is yes
; TchLog=yes</comment>
</pre>

<p>
Este ajuste activa o desactiva el registro de las modificaciones en el
directorio realizadas por el DNAS (Distributed Network Audio Server),
o de más brevemente: SHOUTcast. Está recomendado para aquellos que
desean tener una mayor seguridad en el registro. Los usuarios básicos
o domésticos probablemente no lo necesiten.
</p>

<pre caption="Activando el registro de peticiones http">
<comment>; WebLog decides whether or not hits to http:// on this DNAS will
; be logged.  Most people leave this off because the DSP plug-in
; uses http:// calls to update titles and get the listener count,
; which takes up a lot of log space eventually.  If you want to
; see people making hits on your admin.cgi or index pages, turn
; this back on.  Note that this setting does NOT affect XML stats
; counters for hits to http:// pages.
; Default is no.
; WebLog=no</comment>
</pre>

<p>
Este parámetro especifica si quiere registrar o no las peticiones al
servidor HTTP que ofrece SHOUTcast. De nuevo, está recomendad para los
que deseen una mayor seguridad en el registro, pero no está
recomendado para usuarios casuales o domésticos.
</p>

<pre caption="Activando del registro W3C">
<comment>; W3CEnable turns on W3C Logging.  W3C logs contain httpd-like accounts
; of every track played for every listener, including byte counts those listeners
; took.  This data can be parsed with tools like Analog and WebTrends, or given
; to third parties like Arbitron and Measurecast for their reporting systems.
; Default is Yes (enabled).</comment>
W3CEnable=Yes

<comment>; W3CLog describes the name of the log file for W3C logging.  Default log file is
; sc_w3c.log, in the same directory wherever the DNAS gets started from.</comment>
W3CLog=/dev/null
</pre>

<p>
La primera opción activa el registro W3C. Este tipo de registros
pueden ser analizados por los programas indicados (Analog, WebTrends,
etc.). Está especialmente recomendado para los que quieran tener una
mayor profundidad en sus estadísticas. La segunda opción especifica
donde almacenar el registro W3C. Está ajustado a
<path>/dev/null</path> por el ebuild.
</p>

</body>
</section>
<section>
<title>Configuración de la red</title>
<body>

<pre caption="Ajustando la dirección IP fuente">
<comment>; SrcIP, the interface to listen for source connections on (or to make relay
; connections on if relaying). Can and usually will be ANY or 127.0.0.1
; (Making it 127.0.0.1 will keep other machines from being able to
; broadcast using your SHOUTcast Server )</comment>
SrcIP=ANY
</pre>

<p>
La variable SrcIP indica la IP desde la cual el contenido se
emite. Puede ser de otro servidor (retransmisión), del servidor local
(normal) u otra IP que soporte su interfaz. Ajustándola a servidor
local (localhost) se impide que otro servidor use su servidor
SHOUTcast como fuente de su emisión. El valor por defecto es ANY, este
valor causará que su servidor SHOUTcast ofrezca contenidos desde
cualquier IP. Por cuestiones de seguridad, es mejor ajustarlo a algo
específico.
</p>

<pre caption="Ajustando la IP destino">
<comment>; DestIP, IP to listen for clients on (and to contact yp.SHOUTcast.com)
; can and usually will be be ANY. If your machine has multiple IP addresses,
; set this to the one you want it to be accessed by.</comment>
DestIP=ANY
</pre>

<p>
Este parámetro determina la IP de su interfaz a la cual permitirá que
sus usuarios se conecten. Puede ser el servidor local (si es un
antisocial y desea emitir únicamente para su máquina), una dirección
IP privada (por ejemplo 192.168.0.101, para dar servicio en una red
local), o su dirección IP externa (por ejemplo, 209.204.249.201, para
emitir en una WAN, no en una LAN). En la mayoría de los casos puede
conectarse a su propia emisión usando 127.0.0.1 en lugar de lo que se
muestra. ANY le permite a su servidor SHOUTcast, escuchar en todas las
direcciones IP en todos los interfaces disponibles.
</p>

<pre caption="Ajustando el puerto para proxy/yp.SHOUTcast.com">
<comment>; Yport, port to connect to yp.SHOUTcast.com on. For people behind caching
; web proxies, change this to the alternate port (666 is what it might be,
; check www.SHOUTcast.com if you have problems). Otherwise, leave this at 80.
; We're actively working on re-opening port 666, but as of release the only
; working port is port 80.</comment>
Yport=80
</pre>

<p>
Esta variable tiene dos funciones. En primer lugar, es el puerto que
se usa para conectar a yp.SHOUTcast.com. La página yp.SHOUTcast.com es
la usada por nullsoft para los servidores públicos, de forma que los
usuarios sepan en que puertos se está escuchando. Los usuarios pueden
buscar su estación emisora en esta página. El segundo uso que se le da
a esta variable es para proxies web. Ajústela al puerto que usa para
las conexiones a través de un proxy, igualmente ajuste DestIP a su
proxy para realizar la emisión.
</p>

<pre caption="Ajustando el DNS inverso">
<comment>; NameLookups.  Specify 1 to perform reverse DNS on connections.
; This option may increase the time it takes to connect to your
; server if your DNS server is slow.  Default is 0 (off).</comment>
NameLookups=0
</pre>

<p>
Esta opción especifica si se desean realizar búsquedas DNS inversas o
no en los clientes. Esto tomará una dirección IP e intentará encontrar
el correspondiente nombre del servidor. Se usa para que los registros
de actividad sean más detallados.
</p>

<pre caption="Ajustando la retransmisión">
<comment>; RelayPort and RelayServer specify that you want to be a relay server.
; Relay servers act as clients to another server, and rebroadcast.
; Set RelayPort to 0, RelayServer to empty, or just leave these commented
; out to disable relay mode.
; RelayPort=8000
; RelayServer=192.168.1.58</comment>
</pre>

<p>
Estas opciones especifican si su servidor está actuando como un
servidor de retransmisión. Los servidores de retransmisión se usan a
menudo para tomar una conexión de bajo ancho de banda que sólo puede
emitir a un cliente, y usar su mayor ancho de banda para servir a más
clientes. RelayPort especifica el puerto y la dirección IP del
servidor SHOUTcast del que desea hacer retransmisión. Comente estas
opciones si no tiene planes de usar su servidor para retransmitir.
</p>

</body>
</section>
<section>
<title>Configuración del servidor</title>
<body>

<pre caption="Ajustando la contraseña del administrador">
<comment>; AdminPassword.  This password (if specified) changes the
; behavior of Password to be a broadcast-only password, and
; limits HTTP administration tasks to the password specified
; here.  The broadcaster, with the password above, can still
; log in and view connected users, but only the AdminPassword
; will grant the right to kick, ban, and specify reserve hosts.
; The default is undefined (Password allows control for both
; source and admin)
; AdminPassword=adminpass</comment>
</pre>

<p>
Ajustando esta variable, se creará un perfil de emisor y otro de
administrador. El emisor puede entrar en el servidor con una clave y
ver las conexiones activas. Sin embargo, si esta persona quiere echar,
prohibir o administrar conexiones del servidor, deberán entrar con la
contraseña del admnistrador. Esta opción crea roles más específicos en
su servidor. Esto es lo recomendado para instancias en las que el
administrador no es la misma persona que el emisor.
</p>

<pre caption="Ajustando la desconexión automática de los usuarios">
<comment>; AutoDumpUsers controls whether listeners are disconnected if the source
; stream disconnects. The default is 0.</comment>
AutoDumpUsers=0
</pre>

<p>
Aquí se especifica si los usuarios son echados o no si se desconecta
de la emisión por cualquier razón. Está ajustado a 0, de tal forma que
los clientes agotarán el tiempo o continuarán intentando guardar la
emisión. Use esta opción si espera interrupciones breves en cualquier
momento.
</p>

<pre caption="Ajustando el tiempo de inactividad de la fuente">
<comment>; AutoDumpSourceTime specifies how long, in seconds, the source stream is
; allowed to be idle before the server disconnects it. 0 will let the source
; stream idle indefinitely before disconnecting. The default is 30.</comment>
AutoDumpSourceTime=30
</pre>

<p>
Esta opción especifica cuando el servidor SHOUTcast debe terminar de
esperar por una fuente (principalmente un servidor de retransmisión)
para ofrecer contenidos de esta fuente. Cualquier valor entre 30 y 60
deber ser razonable para esta opción.
</p>

<pre caption="Ajustando el directorio de contenidos">
<comment>; ContentDir specifies the directory location on disk of where to stream
; on-demand content from. Subdirectories are supported as of DNAS 1.8.2.
; Default is ./content/, meaning a directory named content in the same directory
; as where sc_serv was invoked from.</comment>
ContentDir=/opt/SHOUTcast/content/
</pre>

<p>
La opción ContentDir especifica dónde se encuentra el contenido que
será demandado por los usuarios. Por ejemplo si desea anunciar una
emisión a los empleados, podría usarlo para este propósito. El ebuild
del servidor SHOUTcast lo ajusta a <path>/opt/SHOUTcast/content</path>
por defecto. Para usar esto, copie un archivo mp3 en el directorio de
contenidos y apunte su navegador a
<c>http://example.com:[port]/content/mp3name.pls</c>. El servidor
SHOUTcast Server creará automáticamente una lista de reproducción
compatible para este mp3 y lo ofrecerá como una emisión bajo
demanda. Use esto como alternativa a SHOUTcast Trans emitir sus
contenidos.
</p>

<pre caption="Ajustando el fichero de introducción">
<comment>; IntroFile can specify a mp3 file that will be streamed to listeners right
; when they connect before they hear the live stream.
; Note that the intro file MUST be the same sample rate/channels as the
; live stream in order for this to work properly. Although bit rate CAN
; vary, you can use '%d' to specify the bit rate in the filename
; (i.e. C:\intro%d.mp3 would be C:\intro64.mp3 if you are casting at 64kbps).
; The default is no IntroFile
; IntroFile=c:\intro%d.mp3</comment>
</pre>

<p>
Esto le permite configurar un fichero de introducción. Cada vez que un
usuario se conecta, se escuchará la reproducción de este fichero. Tal
y como se indica, la relación de bits en la emisión y en la canción de
introducción deben coincidir, o de lo contrario, las cosas podrían ir
mal. Puede, sin embargo, poner algo como intro128.mp3 e intro64.mp3, y
se reproducirá intro128.mp3 a los usuarios que se conecten a su
emisión de 128kbps e intro64.mp3 a los que se conecten a 64kbps.
</p>

<pre caption="Ajustando un fichero de respaldo">
<comment>; BackupFile can specify a mp3 file that will be streamed to listeners over
; and over again when the source stream disconnects. AutoDumpUsers must be
; 0 to use this feature. When the source stream reconnects, the listeners
; are rejoined into the live broadcast.
; Note that the backup file MUST be the same sample rate/channels as the
; live stream in order for this to work properly. Although bit rate CAN
; vary, you can use '%d' to specify the bit rate in the filename
; (i.e. C:\backup%d.mp3 would be C:\backup32.mp3 if you are casting at 32kbps).
; The default is no BackupFile
; BackupFile=C:\intro%d.mp3</comment>
</pre>

<p>
Es igual que arriba, pero el fichero se reproducirá cuando la emisión
termine, en lugar de cuando el usuario se desconecta. Ésto sólo
funciona si la variable AutoDumpUsers esta definida como 0.
</p>

<pre caption="Ajustando u formato de título">
<comment>; TitleFormat specifies a format string for what title is sent to the listener.
; For example, a string of 'Justin Radio' forces the title 'Justin Radio' even
; when the source changes the title. You can use up to one '%s' in the string
; which lets you contain the title from the source. For example, if your
; TitleFormat is 'Justin Radio: %s', and the source plug-in's title is
; 'Billy plays the blues', then the net title is
; 'Justin Radio: Billy plays the blues'. Note: only works on non-relay servers.
; The default is no format string.</comment>
TitleFormat=Chris Gentoo Beats: %s
</pre>

<p>
Esto ajusta un título no variable para su servidor Shoutcast. Use esto
si el nombre de su emisión es distinto del nombre de su servidor. Esto
no funciona con servidores configurados como retransmisores.
</p>

<pre caption="Ajustando un formato de URL">
<comment>; URLFormat specifies a format string for what URL is sent to the listener.
; Behaves like TitleFormat (see above).
; The default is no format string.
; URLFormat=http://www.server.com/redirect.cgi?url=%s</comment>
</pre>

<p>
Funciona igual que TitleFormat excepto que el URL listado es usado en
lugar del URL de la emisión.
</p>

<pre caption="Ajustando el estado público de una emisión">
<comment>; PublicServer can be always, never, or default (the default, heh)
; Any setting other than default will override the public status
; of the source plug-in or of a SHOUTcast Server that is being relayed.</comment>
PublicServer=default
</pre>

<p>
Aquí se especifica si quiere que su servidor sea listado como un servidor
público incluso si el plug-in de su servidor de retransmisión o fuente está
listado como tal.
</p>

<pre caption="Permitiendo la retransmisión">
<comment>; AllowRelay determines whether or not other SHOUTcast Servers will be
; permitted to relay this server.  The default is Yes.</comment>
AllowRelay=Yes
</pre>

<p>
AllowRelay determina si se permite a otros servidores hacer
retransmisiones de su contenido. Si cree que no va hacer
retransmisiones ajústelo a No.
</p>

<pre caption="Permitiendo retransmisiones para mostrar públicamente la fuente">
<comment>; AllowPublicRelay, when set to No, will tell any relaying servers not
; to list the server in the SHOUTcast directory (non-public), provided
; the relaying server's Public flag is set to default.  The default is
; Yes.</comment>
AllowPublicRelay=Yes
</pre>

<p>
AllowPublicRelay especifica si su servidor va a ser listado o no en el
directorio SHOUTcastpublic si el servidor del que está realizando
retransmisión está ya listado. Dese cuenta de que PublicServer puede
anular el efecto de este ajuste.
</p>

<pre caption="Ajustando MetaInterval">
<comment>; MetaInterval specifies how often, in bytes, meta data sent.
; You should really leave this at the default of 32768, but the option is
; provided anyway.</comment>
MetaInterval=32768
</pre>

<p>
Simplemente déjelo como está.
</p>

</body>
</section>
<section>
<title>Configuración del acceso</title>
<body>

<pre caption="Estableciendo el tiempo máximo para el oyente">
<comment>; ListenerTimer is a value in minutes of maximum permitted time for
; a connected listener.  If someone is connected for longer than this
; amount of time, in minutes, they are disconnected.  When undefined,
; there is no limit defined.  Default is undefined.
; ListenerTimer=600</comment>
</pre>

<p>
No estoy seguro de porqué necesitaría este ajuste. Básicamente, si un
usuario está activo durante demasiados minutos se procede a su
desconexión. El único caso que se me ocurre es expulsar a los usuarios
ociosos o personas que crea que deberían estar haciendo otras cosas en
lugar de escuchar su emisión. El valor se indica en minutos.
</p>

<pre caption="Ajustando el fichero de prohibiciones">
<comment>; BanFile is the text file sc_serv reads and writes to/from
; for the list of clients prohibited to connect to this
; server.  It's automatically generated via the web
; interface.
; BanFile=sc_serv.ban</comment>
</pre>

<p>
Este es el nombre del fichero que contiene la lista de clientes a los
que no está permitido el acceso a su servidor. El nombre por defecto
es sc_serv.ban, sin embargo puede usar el cualquier nombre que quiera
en este ajuste.
</p>

<pre caption="Ajustando la lista ">
<comment>; RipFile is the text file sc_serv reads and writes to/from
; for the list of client IP addresses which are *ALWAYS* permitted
; to connect to this server (useful for relay servers).
; This file is automatically generated via the web
; interface.  Note that if your server is FULL, and someone
; from a Reserved IP connects, the DNAS will force the person
; listening for the longest time off to make room for the new
; connection.
; RipFile=sc_serv.rip</comment>
</pre>

<p>
Tan desalentador como suena, Rip realmente significa "Reserved IP" (IP
Reservada). Úselo para que sus amigos y otras personas que considere
más importantes que otros usuarios. Si actualmente está emitiendo al
mayor número posible de usuarios y uno de sus miembros "rip" intenta
conectarse, el servidor echará a la persona que más tiempo lleve
escuchando la emisión.
</p>

<pre caption="Ajuste si únicamente quiere que los usuarios Rip accedan a su servidor">
<comment>; RipOnly, when set to Yes, will only allow IP addresses listed in the Reserved
; IP list to connect and relay.  All other connections for listening will be denied.
; This is really only useful for servers whose sole purpose is to provide the
; primary feed to all public relays.  Setting this value to Yes also forces the
; server into Private mode, since listing this server in the directory would
; be pointless.  Default is No.
; RipOnly=No</comment>
</pre>

<p>
Esto permite que únicamente los miembros Rip se conecten a su
servidor. SHOUTcast. Puede usarlo para emisiones de radio privadas o
para hacer que ciertos retransmisores puedan acceder a su servidor.
</p>

</body>
</section>
<section>
<title>Configuración masiva</title>
<body>

<pre caption="Ajustando las variables Unique">
<comment>; Unique: assigns a variable name for use in any configuration item which points to a
; file.  Useful for servers running lots of SHOUTcast Servers that have similar
; configuration parameters, excepting log file names, ban file names, etc.  Any
; parameter that takes a pathname can include the character $, which will
; substitute $ for the variable assigned here.  Keep in mind that the unique
; variable can only be used after it is defined, so don't try to use a unique
; variable substitution in a path before you define it.  For example, you
; could set:
; Unique=my_server
; and then define Log=/usr/local/SHOUTcast/$.log in an included configuration
; file.  Default is Unique=$, so that by default any file with $ in the name
; won't substitute anything at all.</comment>
</pre>

<p>
Básicamente, si está corriendo muchos servidores SHOUTcast, sería una
verdadera molestia cambiar todos los registros, prohibiciones, etc. a
algo único para cada configuración. En lugar de esto, puede ajustar
Unique al algún valor y el símbolo $ será reemplazado al valor que se
haya ajustado en Unique. Por ejemplo, si un fichero contiene
Unique=Jazz y otro contiene Unique=Rock, entonces Log=/var/log/$.log
produciría /var/log/Jazz.log en un fichero de configuración y
/var/log/Rock.log en el otro fichero. Así es más simple cuando se
trabaja con muchos servidores SHOUTcast con configuraciones similares.
</p>

<pre caption="Ajustando variables comunes de configuración">
<comment>; Include: instructs the sc_serv to read from the named configuration file,
; *at the point of insertion of the Include statement*, and process as though
; the included file was part of itself.  Note that all configuration parameters
; in the DNAS configuration file are processed first to last, so if an item is defined
; twice in a configuration, the last item to process will be the one that takes
; effect.  For this reason, it's usually a good idea to use the Includes first
; in a configuration file.
; example:
; Include=/usr/local/SHOUTcast/common.conf
; Default is not applicable.</comment>
</pre>

<p>
Si está corriendo varios servidores SHOUTcast y desea usar variables
de configuración comunes sin tener que ajustarlas en cada fichero de
configuración, puede ajustarlo para que apunte a un fichero que
contine los ajustes que son comunes a varias configuraciones.
</p>

</body>
</section>
<section>
<title>Optimizando la configuración</title>
<body>

<pre caption="Ajuste el número de CPUs utilizadas">
<comment>; CpuCount is used to explicitly limit the DNAS to dominating a finite
; amount of processors in multiprocessor systems.  By default,
; SHOUTcast creates one thread for every processor it detects in the
; host system, and assigns listeners equally across all the threads.
; In the event SHOUTcast doesn't correctly determine the number of
; CPUs in your host, or if you for whatever reason want to force
; the DNAS to not use other processors, you can say so here.
; Default behavior is to use as many processors as the DNAS detects on
; your system.
; CpuCount=1</comment>
</pre>

<p>
En sistemas con múltiples CPUs, use este ajuste para forzar al
servidor SHOUTcast para que use un número CpuCount de procesadores. El
valor por defecto es asignar un hilo de ejecución a cada procesador, y
tener oyentes en todos los hilos. Si lo ajusta a un valor inferior al
número total de procesadores, hará que los procesadores libres se
dediquen a otras tareas.
</p>

<pre caption="Ajustando el hueco de envío de datos">
<comment>; Sleep defines the granularity of the client threads for sending data.
; DNAS 1.7.0, per client thread, will send up to 1,024 bytes of data
; per socket (or less depending on the window available), and then
; sleep for the provided duration before repeating the whole process.
; Note that making this value smaller will vastly increase CPU usage on
; your machine.  Increasing reduces CPU, but increasing this value too far
; will cause skips.  The value which seems most optimal for 128kbps
; streaming is 833 (833 microseconds per client poll) on our test labs.
; We wouldn't recommend setting it any lower than 100, or any higher than
; 1,024.  If you have a slower machine, set this number lower to fix
; skips.
; Default value is 833.
; Sleep=833</comment>
</pre>

<p>
El servidor SHOUTcast usará el valor Sleep para determinar el hueco
entre cada envío de datos. A mayor valor, mayor hueco, al menor valor
menor hueco y por lo tanto el servidor SHOUTcast usará más tiempo de
CPU. En sistemas lentos, tal y como se indica, podría querer bajar
este valor de modo que el servidor SHOUTcast envíe los datos más y más
frecuentemente a los usuarios. Lo mejor es dejarlo como está.
</p>

<pre caption="Ajustando la salida XML">
<comment>; CleanXML strips some whitespace and line feeds from XML output which
; confuses some (poorly written) XML parsers.  If you get XML rendering errors,
; try turning this on.  Default is No (off).
; CleanXML=No</comment>
</pre>

<p>
Probablemente no tenga que preocuparse demasiado de este ajuste, a
menos que use analizadores XML propios para crear estadísticas de su
servidor. Si el analizador XML no puede manejar espacios en blanco y
avances de línea en XML, ajuste este valor a Yes, y debería funcionar.
</p>

</body>
</section>
<section>
<title>Conclusiones de la configuración</title>
<body>

<p>
Su servidor SHOUTcast debería estar configurado ahora. Para empresas
que usan SHOUTcast, le recomiendo activar el registro WC3, ya que
puede ser analizado fácilmente y usador para crear sus propias
estadísticas. Debería también activar la variable
AdministratorPassword. Probablemente desee activar alguna otra opción
de configuración si está creando varios servidores SHOUTcast.
</p>

<p>
Con la configuración ya realizada, nos centraremos ahora en hacer que
SHOUTcast esté arriba y funcionando. Comenzaremos con una simple
emisión para un comienzo suave, luego trabajaremos con SHOUTcast Trans
(ya que hay algún otro elemento implicado).
</p>

</body>
</section>
</chapter>

<chapter>
<title>Comenzando con el servidor SHOUTcast</title>
<section>
<title>Ajustando la emisión bajo demanda</title>
<body>

<p>
La emisión bajo demanda, tal como se describe en el capítulo de
configuración, establece automáticamente listas de música con los
archivos mp3 a servir en el directorio de contenido. El ebuild del
servidor SHOUTcast establece el directorio para todos los mp3 a servir
en <path>/opt/SHOUTcast/content</path>. Comencemos creando una
instancia sencilla de emisión bajo demanda de mp3.
</p>

<p>
En primer lugar, necesitaremos obtener contenido mp3 de algún lugar y
ponerlo en el directorio de contenidos. Tomaremos como ejemplo el
fichero ejemplo.mp3 de un directorio /Mp3 que acabamos de crear.
</p>

<pre caption="Copiando un mp3 al directorio de contenidos">
# <i>cp ejemplo.mp3 /opt/SHOUTcast/content/</i>
# <i>cd /opt/SHOUTcast/content/</i>
# <i>ls</i>
ejemplo.mp3
</pre>

<p>
Ahora el fichero ya está copiado. Necesitamos arrancar ahora nuestro
servidor SHOUTcast para que el fichero pueda ser accedido.
</p>

<pre caption="Starting up the SHOUTcast Server">
# <i>/etc/init.d/shoutcast start</i>
 * Starting Shoutcast Server...
*******************************************************************************
** SHOUTcast Distributed Network Audio Server
** Copyright (C) 1998-2004 Nullsoft, Inc.  All Rights Reserved.
** Use "sc_serv filename.ini" to specify an ini file.
*******************************************************************************
                                                                         [ ok ]
</pre>

<p>
El pequeño letrero es para asegurarse de que ningún paso termina mal
(esto es, nos aseguramos de que el servidor ha arrancado
correctamente). ¡Su servidor SHOUTcast está ahora funcionado! Debido a
la naturaleza del contenido bajo demanda, únicamente se podrá acceder
desde un navegador Web. MPlayer o cualquier otra herramienta no será
capaz de conectar a la emisión. Yo uso kmplayer para acceder a la
emisión directamente desde mi navegador. Puede ver el resultado en la
siguiente imagen.
</p>

<figure caption="Contenido bajo demanda" short="OnDemandContent"
link="/images/docs/shoutcast-OnDemandContent.jpg" />

<p>
Algunas personas tienen configurado Audacious para que maneje sus
tipos mime, de modo que su navegador puede lanzar Audacious para
reproducir el contenido de la emisión. Ahora que puede emitir
contenidos bajo demanda, trabajaremos con SHOUTcast Trans para crear
un auténtico servidor de emisiones de radio.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Ajustando SHOUTcast Trans</title>
<section>
<title>Introducción a SHOUTcast Trans</title>
<body>

<p>
SHOUTcast Trans es el nombre corto de SHOUTcast Trans(coder), y es
capaz de transcodificar ficheros mp3 a mayor o menor relación de
bits. SHOUTcast Trans trabaja emitiendo los mp3 de una lista de
reproducción especificada en el fichero de configuración. Comenzaremos
ajustando la configuración de SHOUTcast Trans, de forma que podamos
tener una buena estación de radio. Abriremos el fichero de
configuración de SHOUTcast Trans, que está localizado en
<path>/etc/shoutcast/sc_trans.conf</path>.
</p>

<pre caption="Abriendo el fichero de configuración de SHOUTcast Trans">
<comment>(En primer lugar instale SHOUTcast Trans)</comment>
# <i>emerge shoutcast-trans-bin</i>
<comment>(A continuación abra el fichero de configuración de SHOUTcast Trans)</comment>
# <i>vi /etc/shoutcast/sc_trans.conf</i>
</pre>

<p>
Ahora que tenemos el fichero de configuración de SHOUTcast Trans
abierto, empezaremos a configurar la emisión fuente.
</p>

</body>
</section>
<section>
<title>Configurando SHOUTcast Trans</title>
<body>

<pre caption="Ajustando la lista de reproducción">
<comment>; PlaylistFile (required EVEN IF RELAYING) - play list file (to create, use
; find /path/to/mp3/directory -type f -name "*.mp3" &gt; playlist_filename.lst</comment>
PlaylistFile=/opt/SHOUTcast/playlists/playlist.lst
</pre>

<p>
Este ajuste le indica a SHOUTcast dónde encontrar los contenidos de la
emisión. Este ajuste requiere que exista el fichero, por lo que,
adelante, cree una lista de reproducción. Crearé una auténtica de mi
directorio /Mp3 al que me refiero anteriormente.
</p>

<pre caption="Creando la lista de reproducción">
# <i>find /Mp3 -type f -name "*.mp3" &gt; /opt/SHOUTcast/playlists/playlist.lst</i>
</pre>

<p>
Ahora que la lista de reproducción está creada, apuntamos al fichero
de configuración y SHOUTcast Trans sabrá que ficheros debe emitir.
</p>

<pre caption="Ajustando la dirección IP y el puerto">
<comment>; Serverip/ServerPort are the target server to send to</comment>
Serverip=127.0.0.1
ServerPort=8000
</pre>

<p>
Este ajuste indica dónde enviar el contenido de la emisión. En esta
guía será la dirección IP y puerto del servidor SHOUTcast que se
definió anteriormente (DestIP y PortBase).
</p>

<pre caption="Ajustando la contraseña del servidor SHOUTcast">
<comment>; Password is the password on the sc_serv you're sending to.</comment>
Password=password_you_setup_in_sc_serv.conf
</pre>

<p>
Es la misma contraseña que se usó en la configuración del servidor
SHOUTcast.
</p>

<pre caption="Ajustando la información de su emisión">
<comment>; StreamTitle/URL/Genre define the data that appears on the directory and in the
; stream info.</comment>
StreamTitle=Chris Gentoo Beats
StreamURL=http://www.gentoo.org
Genre=JPOP Electronica And More!
</pre>

<p>
Aquí se ajusta el título de su emisión (por ejemplo Radio Uno), el URL
(es decir http://www.radio-uno.com), y el género (por ejemplo
Electrónica Trance Tribal).
</p>

<pre caption="Ajustando el fichero de registro">
<comment>; Logfile optionally denotes a text file to log sc_Trans to.  a kill -HUP
; will force a close and re-open of this file (but will also cease logging to
; the console)</comment>
LogFile=/var/log/sc_Trans.log
</pre>

<p>
Esto apuntará al fichero de registro de SHOUTcast Trans. Todo el
registro irá aquí.
</p>

<pre caption="Ajustando el barajeo de canciones">
<comment>; Shuffle the play list</comment>
Shuffle=1
</pre>

<p>
Decida si quiere que su lista de reproducción reproduzca de forma
aleatoria las canciones de su lista en cada momento. La mayoría
ajustan este valor a 1. Si va a aceptar peticiones de canciones
ajústelo a 0 y le explicaré cómo hacerlo más adelante.
</p>

<pre caption="Ajustando la emisión">
<comment>; Bitrate/SampleRate/Channels recommended values:
; 8kbps 8000/11025/1
; 16kbps 16000/11025/1
; 24kbps 24000/22050/1
; 32kbps 32000/22050/1
; 64kbps mono 64000/44100/1
; 64kbps stereo 64000/22050/2
; 96kbps stereo 96000/44100/2
; 128kbps stereo 128000/44100/2</comment>
Bitrate=128000
SampleRate=44100
Channels=2
<comment>; Quality is from 1-10. 1 is best, 10 is fastest.</comment>
Quality=1
</pre>

<p>
Bitrate ajusta la relación de bits de su emisión. Puede tomar valores
desde 8000 (8kbps) a 128000 (128kbps). SampleRate ajusta la relación
de muestreo de la emisión. Puede tomar cualquier valor entre 11025
(11025kHz) y 44100 (44100kHz). Channels ajusta el número de canales de
su emisión. Puede tomar el valor 1 (mono) ó 2 (estéreo). Quality
ajusta la calidad de la emisión. Esto de alguna manera es controlado
por Bitrate/SampleRate/Channels. Aquí es donde tendrá que lidiar con
la compresión de la emisión. El valor 1 le ofrece la mejor calidad, 10
le ofrece la mayor velocidad. ¡Tenga en mente la capacidad de su
conexión cuando ajuste estos valores! Use la guía para hacerse una
idea de las características que tiene que tener su mp3 cuando sea
emisión.
</p>

<pre caption="Configurando desvanecimientos cruzados">
<comment>; Mode=0 for none, 1 for 100/100->100/0, 2 for 0/100->100/0</comment>
CrossfadeMode=1
<comment>; Length is ms.</comment>
CrossfadeLength=8000
</pre>

<p>
Esto ajusta la atenuación entre las canciones (en inglés: cross fading
o atenuación cruzada). Ajustándolo a 0 desactivará esta
característica. Si lo ajusta a 1, la canción 1 se atenuará y la
canción 2 se intensificará. Si lo ajusta a 2, la canción 1 se
intensificará y la canción 2 se atenuará. La longitud
(CrossfadeLength) indica la duración de la atenuación.
</p>

<pre caption="Activando el uso de ID3">
UseID3=1
</pre>

<p>
Aquí se decide si se quiere usar las etiquetas ID3 para información
sobre el mp3.
</p>

<pre caption="Ajustando el estado público del servidor">
<comment>; Public determines whether or not this station will show up in the directory</comment>
Public=0
</pre>

<p>
Aquí se indica si las emisiones deben ser listadas públicamente cuando
se retransmite a un servidor. ¡Recuerde que PublicServer en el fichero
sc_serv.conf hará que se ignore esta opción!
</p>

<pre caption="Ajustando la interacción del usuario">
<comment>; Put stuff here for user interaction (AOL IM, ICQ, IRC)</comment>
AIM=AIMHandle
ICQ=
IRC=SHOUTcast
</pre>

<p>
Esta variable indica su información de contacto (el DJ). Puede indicar
canales AIM o ICQ para petición de canciones o cualquier otra
cosa. Igualmente puede indicar su propio canal IRC de forma que pueda
interactuar con varios usuarios a la vez.
</p>

</body>
</section>
<section>
<title>Conclusiones sobre la configuración de SHOUTcast Trans</title>
<body>

<p>
¡Su SHOUTcast Trans ahora está preparado para emitir a su servidor
SHOUTcast! Comenzaremos con la emisión de sus mp3.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Comenzando con SHOUTcast Trans</title>
<section>
<title>Arrancando SHOUTcast Trans</title>
<body>

<p>
Debido a que uso SHOUTcast Trans con el servidor SHOUTcast, tiendo a
arrancar SHOUTcast Trans, que automáticamente arranca SHOUTcast (más
fácil). Por lo que arrancaremos SHOUTcast Trans.
</p>

<pre caption="Iniciando el SHOUTcast Trans y servidor SHOUTcast">
# <i>/etc/init.d/shoutcast_trans start</i>
 * Starting Shoutcast Server...
*******************************************************************************
** SHOUTcast Distributed Network Audio Server
** Copyright (C) 1998-2004 Nullsoft, Inc.  All Rights Reserved.
** Use "sc_serv filename.ini" to specify an ini file.
*******************************************************************************
                                                  [ ok ]
* Starting Shoutcast Trans...                     [ ok ]
</pre>

</body>
</section>
<section>
<title>Escuchado la emisión SHOUTcast Trans</title>
<body>

<p>
Ahora que tiene arrancado SHOUTcast Trans, comenzaremos a escuchar nuestra
emisión. Yo uso MPlayer en este ejemplo para reproducir el stream.
</p>

<pre caption="Escuchado su emisión">
# <i>mplayer -cache 1024 http://127.0.0.1:8000/</i>
...
Playing http://127.0.0.1:8000/.
Connecting to server 127.0.0.1[127.0.0.1]:8000 ...
Name   : Chris Gentoo Beats
Genre  : JPOP Electronica And More!
Website: http://www.gentoo.org
Public : no
Bitrate: 128kbit/s
Cache size set to 1024 KBytes
Connected to server: 127.0.0.1
Cache fill:  9.38% (98304 bytes)    Audio file detected.
==========================================================================
Opening audio decoder: [mp3lib] MPEG layer-2, layer-3
MP3lib: init layer2 and 3 finished, tables done
mpg123: Can't rewind stream by 156 bits!
AUDIO: 44100 Hz, 2 ch, 16 bit (0x10), ratio: 16000->176400 (128.0 kbit)
Selected audio codec: [mp3] afm:mp3lib (mp3lib MPEG layer-2, layer-3)
==========================================================================
Checking audio filter chain for 44100Hz/2ch/16bit -> 44100Hz/2ch/16bit...
AF_pre: af format: 2 bps, 2 ch, 44100 hz, little endian signed int
AF_pre: 44100Hz 2ch Signed 16-bit (Little-Endian)
AO: [oss] 44100Hz 2ch Signed 16-bit (Little-Endian) (2 bps)
Building audio filter chain for 44100Hz/2ch/16bit -> 44100Hz/2ch/16bit...
Video: no video
Starting playback...
</pre>

<p>
Se ha recortado algo la salida. La variable -cache se ha usado para
pasar por alto mis ajustes de búfer. Y ¡voilà! ¡ahora está escuchado
su emisión! En el próximo capítulo le mostraremos cómo hacer algo más
con su servidor SHOUTcast.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Uso avanzado de SHOUTcast</title>
<section>
<title>Uso empresarial</title>
<body>

<p>
Las empresas pueden usar SHOUTcast de varias formas:
</p>

<ol>
  <li>
    Use emisores de contenido bajo demanda para hacer más interesantes
    sus anuncios diarios.
  </li>
  <li>
    Tenga disponibles sus anuncios públicos en el momento en que
    ocurren, haga ver a sus clientes lo que sucede en su empresa ¡al
    momento! Entonces archívelos como contenido bajo demanda para
    futuras referencias.
  </li>
  <li>
    Haga entrevistas con medios emitidos y archívelos como contenido
    bajo demanda.
  </li>
</ol>

<p>
Hay más posibilidades de uso del servidor SHOUTcast para las
empresas. ¡Use emisiones en directo para sustituir al viejo y aburrido
texto!
</p>

</body>
</section>
<section>
<title>Haciendo de DJ con SHOUTcast</title>
<body>

<p>
El servidor SHOUTcast es uno de los más populares para los DJs nuevos
y también para los veteranos. Para los que están empezando hay muchas
formas de mejorar la experiencia del usuario con su servidor
SHOUTcast. Tener una canción de introducción es muy importante. Le da
al usuario una idea de lo que ofrece su estación. ¡Asegúrese de
incluirla! Publique su servidor en yp.SHOUTcast.com (descrito en la
sección de configuración del servidor de SHOUTcast) de forma que todo
el mundo sepa quién es. Una de las cosas más importantes es ser capaz
de oir las peticiones de sus usuarios. Para activar esta opción en
primer lugar desactive Shuffle en sc_Trans.conf. Tenga preparadas,
digamos, 10 canciones más o menos. Comience entonces a aceptar
peticiones. Cuando alguien pida una canción, simplemente añádala al
final de su lista de reproducción, y use este guión para controlar lo
que SHOUTcast Trans hace con su lista de reproducción.
</p>

<pre caption="djcontrol">
<comment>#!/bin/bash</comment>

case "$1" in
  "reload")
    kill -s USR1 `cat /var/run/SHOUTcast_Trans.pid`
    ;;
  "next")
    kill -s WINCH `cat /var/run/SHOUTcast_Trans.pid`
    ;;
  *)
    echo "Comando inválido"
    ;;
esac
</pre>

<p>
Cuando añada la canción a su lista de reproducción, le tendrá que
indicar a SHOUTcast Trans que ésta ha cambiado con la nueva petición.
</p>

<pre caption="Recargando la lista de reproducción">
# <i>djcontrol reload</i>
</pre>

<p>
Debería ahora hacer llegar a los usuarios que la petición de canciones
está abierta. O, si lo prefiere, puede saltar canciones de la lista.
</p>

<pre caption="Saltando canciones de la lista">
# <i>djcontrol next</i>
</pre>

<p>
Tenga cuidado en no saltar demasiado, ya que no hay control
previo. Una vez que alcance la canción, la petición
comienza. Normalmente espero a tener cinco peticiones más o menos
antes de atenderlas. De esta forma no vuelve a comenzar. Si se queda
sin peticiones y espera que en breve no las atenderá, entonces
simplemente copie la siguiente sección de su lista de reproducción
sobre las peticiones y recargue la lista de nuevo. Una vez que la
canción actual termine, volverá a la nueva lista de reproducción.
</p>

</body>
</section>
<section>
<title>Conclusión</title>
<body>

<p>
Con esto termina el tutorial del servidor SHOUTcast y SHOUTcast
Trans. Espero que saque partido de esta información y por favor,
¡envíeme un correo con cualquier comentario o sugerencia sobre esta
página! ¡Disfrute de su nuevo servidor SHOUTcast!
</p>

</body>
</section>
</chapter>
</guide>
