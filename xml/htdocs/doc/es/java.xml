<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/java.xml,v 1.14 2007/02/04 21:22:19 chiguire Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/es/java.xml" lang="es">

<title>Guía Java Gentoo</title>

<author title="Autor">
 <mail link="nichoj@gentoo.org">Joshua Nichols</mail>
</author>
<author title="Autor">
  <mail link="karltk@gentoo.org">Karl Trygve Kalleberg</mail>
</author>
<author title="Editor">
  <mail link="nightmorph@gentoo.org">Joshua Saddler</mail>
</author>
<author title="Traductor">
  <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Traductor">
  <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
</author>
<author title="Traductor">
  <mail link="pablo.leira@pitagoral.com">Pablo Pita Leira</mail>
</author>
<author title="Traductor">
  <mail link="anpereir@gentoo.org">Andrés Pereira</mail>
</author>

<abstract>
Esta guía le dará a conocer Java y le explicará cómo usar Java con
Gentoo Linux.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>0.14</version>
<date>2007-01-23</date>

<chapter>
<title>¿Qué es Java?</title>
<section>
<title>Resumen</title>
<body>

<p>
Java es un lenguaje de programación desarrollado por ingenieros de Sun
Microsystems. Es un lenguaje orientado a objetos y diseñado para la
ejecución en múltiples plataformas sin requerir la recompilación del
código fuente para cada plataforma. Aunque Java puede ser compilado
como un programa nativo, se le puede atribuir una buena parte de su
popularidad a su portabilidad y otras características como la
recolección de basura. Para hacer posible la independencia de plataforma,
el compilador de Java compila el código Java a una representación intermedia
denominada "bytecode Java" el cual se ejecuta en un JRE (Java Runtime
Environment, Entorno de Ejecución Java) y no directamente en el Sistema
Operativo.
</p>

<p>
Para poder ejecutar "bytecode" Java, hace falta tener instalado un
entorno de ejecución Java o JRE (por Java Runtime Environment). El JRE
proporciona unas librerías básicas, una máquina virtual Java para la
plataforma instalada y plugins para los navegadores, entre otras
cosas. Un kit de desarrollo Java o JDK (por Java Development Kit)
agrega herramientas para programación, como un compilador para
bytecode y un depurador ("debugger").
</p>
</body>
</section>
</chapter>

<chapter>
<title>Antes de comenzar</title>
<section>
<title>Instalaciones existentes</title>
<body>

<p>
Para las instalaciones existentes, aunque no haya instalado algo de
Java antes, asegúrese de seguir (por ahora solo en inglés) la <uri
link="/proj/en/java/java-upgrade.xml">Guía de Actualización
Java</uri>.
</p>
</body>
</section>

<section>
<title>Instalaciones nuevas</title>
<body>

<p>
Las instalaciones nuevas no requieren preparación previa.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Installando una máquina virtual</title>
<section>
<title>Las opciones</title>
<body>

<p>
Gentoo proporciona numerosos entornos para ejecución (JREs) y entornos
para el desarrollo (JDKs). Entre las opciones actuales tenemos:
</p>

<table>
<tr>
  <th>Origen</th>
  <th>JDK</th>
  <th>JRE</th>
</tr>
<tr>
  <ti>Kit Java Blackdown</ti>
  <ti>dev-java/backdown-jdk</ti>
  <ti>dev-java/blackdown-jre</ti>
</tr>
<tr>
  <ti>Kit Java Sun</ti>
  <ti>dev-java/sun-jdk</ti>
  <ti>dev-java/sun-jre-bin</ti>
</tr>
<tr>
  <ti>Kit Java IBM</ti>
  <ti>dev-java/ibm-jdk-bin</ti>
  <ti>dev-java/ibm-jre-bin</ti>
</tr>
<tr>
  <ti>Kit Java Compaq para Alpha/Linux/GNU</ti>
  <ti>dev-java/compaq-jdk</ti>
  <ti>dev-java/compaq-jre</ti>
</tr>
<tr>
  <ti>Kit de desarrollo J2SE de BEA WebLogic</ti>
  <ti>dev-java/jrockit-jdk-bin</ti>
</tr>
</table>

<!--
TODO: list free implmentations?
note about not drop-in replacemenets
kaffe/sablevm/gcj/jamvm
-->

<p>
Como opción por defecto usamos la dupla Blackdown JRE/JDK, ya que es
libre (gratuita) y está disponible sin el fastidio de registrarse.
registro.
</p>

<p>
Los JRE y JDK de Sun, IBM y BEA son generalmente más veloces, pero
obtenerlos es un poco más trabajoso, pues uno está obligado a leer y
aceptar sus licencias antes de descargar (adicionalmente, IBM requiere
registrarse).
</p>
</body>
</section>

<section>
<title>Instalar un JRE/JDK</title>
<body>

<p>
Para instalar el JDK predeterminado de su perfil, puede ejecutar
<c>emerge virtual/jdk</c>. O para instalar el JRE predeterminado de
su perfil ejecute <c>emerge virtual/jre</c>.
</p>

<p>
En eventos recientes, Sun ha cambiado la licencia de sus JDK y JRE a
unos términos muchos más amistosos para las distribuciones Linux. Como
resultado, los lanzamientos de Sun a partir de la versión 1.5 son
libremente descargables, sin molestias adicionales.
</p>

<note>
Un JDK incluye también un JRE, así que si instala un JDK no debería
tener que instalar un JRE.
</note>
</body>
</section>

<section>
<title>Instalando máquinas virtuales con restricciones de descarga</title>
<body>

<p>
Como mencionamos anteriormente, algunos JDK y JRE requieren que uno
salte varios aros antes de poder instalar. Sencillamente haga emerge a
estos paquetes de la manera acostumbrada. Los ebuilds le indicarán a
dónde ir y qué descargar.
</p>

<p>
Debe descargar el(los) fichero(s) indicado(s) a
<path>/usr/portage/distfiles</path>. Una vez allí, vuelva a ejecutar
el comando emerge y los JRE/JDK empezarán a ser instalados.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Configurar su máquina virtual</title>
<section>
<title>Introducción</title>
<body>

<p>
Gentoo permite tener instalados múltiples JDKs y JREs sin que esto
cause conflictos.
</p>

<p>
Si tiene acceso como superusuario, puede usar la herramienta
<c>java-config</c> puede establecer la configuración por defecto del
sistema. Los usuarios también pueden usar <c>java-config</c> para
establecer su configuración personal.
</p>

<note>
También puede usar <e>eselect</e> para cambiar la máquina virtual del
sistema y del usuario. Vea <c>eselect java-vm help</c>.
</note>
</body>
</section>

<section>
<title>Establecer una máquina virtual predeterminada</title>
<body>

<p>
El comando <c>java-config --list-available-vms</c> producirá una lista
de los JREs y JDKs instalados en el sistema. A continuación se muestra
un ejemplo de la salida de ese comando:
</p>

<pre caption="Listar las máquinas virtuales disponibles">
# <i>java-config --list-available-vms</i>
The following VMs are available for generation-2:
1)      Blackdown JDK 1.4.2.03 [blackdown-jdk-1.4.2]
2)      Blackdown JRE 1.4.2.03 [blackdown-jre-1.4.2]
3)      Blackdown 32bit JRE 1.4.2.03 [emul-linux-x86-java-1.4.2]
4)      Sun 32bit JRE 1.5.0.08 [emul-linux-x86-java-1.5]
5)      Kaffe 1.1.7 [kaffe]
*)      Sun JDK 1.5.0.08 [sun-jdk-1.5]
</pre>

<p>
El asterico <e>*</e> indica que ésta es la máquina virtual activa (la
del sistema o la del usuario cuando está configurada). El nombre entre
corchetes (<e>[]</e>) es el alias, o identificador para esa máquina
virtual (MV). Puede usarse el alias o el número identificador con el
comando <c>java-config --set-system-vm</c>. A continuación, un ejemplo
de cómo establecer la MV del sistema:
</p>

<pre caption="Establecer la MV del sistema">
<comment>(Mediante alias (opción preferida))</comment>
# <i>java-config --set-system-vm blackdown-jdk-1.4</i>
Now using blackdown-jdk-1.4 as your generation-2 system JVM
<comment>(Mediante el número identificador)</comment>
# <i>java-config --set-system-vm 6</i>
Now using sun-jdk-1.5 as your generation-2 system JVM
</pre>

<p>
Como usuario normal puede utilizar <c>java-config --set-user-vm</c>.
</p>

<note>
Ya no tiene que regenerar el perfil con <c>source</c> activar las
actualizaciones hechas a la MV del sistema o del usuario.
</note>
</body>
</section>

<section id="preferred-vm">
<title>MV de preferencia</title>
<body>

<p>
Cuando esté instalando paquetes de Java, la MV puede y será cambiada
si fuese necesario.
</p>

<p>
Debido a la amplia variedad de MVs disponibles, no tenemos los
recursos para probar y verificar que todos los paquetes funcionen con
todas ellas. Así que para asegurar que todo paquete instale sin
problemas, hemos definido una lista de <e>MVs
predeterminadas/soportadas</e> por arquitectura. Puede encontrarlas en
<path>/usr/share/java-config/config/jdk-defaults.conf</path>.  Cuando
esté instalando un paquete Java y este detecte una de las máquinas
virtuales en aquel fichero, usará automáticamente dicha MV en vez de
la MV del sistema.
</p>

<p>
El cambio de MV al momento de instalar paquetes también es necesario
cuando, por ejemplo, su MV del sistema está configurada como una MV
1.4 y el paquete que está instalado necesita una MV 1.5. Al instalar
el paquete se usará la MV 1.5 preferida dejando intacta su elección de
la máquina virtual del sistema.
</p>

<p>
Por supuesto, en Gentoo todo se trata acerca de elegir, así que puede
hacer caso omiso de las opciones predeterminadas en
<path>/etc/java-config-2/build/jdk.conf</path> y tener control total
sobre cuál MV será usada. Algunos ejemplos:
</p>

<pre caption="Ejemplo de /etc/java-config-2/build/jdk.conf">
<comment>(Siempre quiero usar sun-jdk, es decir, sun-jdk-1.4 para 1.4, sun-jdk-1.5 para 1.5, etc)</comment>
*=sun-jdk
</pre>

<pre caption="Ejemplo de /etc/java-config-2/build/jdk.conf">
<comment>(Use siempre sun-jdk-1.5 donde sea posible, excepto cuando se requiera explícitamente de una MV 1.4 ó 1.3)</comment>
*=sun-jdk-1.5
</pre>

<pre caption="Ejemplo de /etc/java-config-2/build/jdk.conf">
<comment># Para 1.3 prefiero sun-jdk 1.4, pero cuando no esté disponible, use ibm-jdk-bin.
# Para 1.4, use blackdown-jdk, y para 1.5, use sun-jdk</comment>
1.3=sun-jdk-1.4 ibm-jdk-bin
1.4=blackdown-jdk
1.5=sun-jdk
</pre>

<warn>
No es obligatorio editar este fichero. Si cambia estas opciones para
usar una MV no soportada, es posible que rompa algo. Los fallos
reportados que mencionen el uso de una MV no soportada tendrán baja
prioridad si no se informan con MV soportadas.
</warn>
</body>
</section>
</chapter>

<chapter>
<title>Compiladores</title>
<section>
<body>

<p>
El compilador estándar Java usado es javac, el cual viene en cada
JDK. Aparte de configurar la MV utilizada en tiempo de compilación,
también es posible configurar qué compilador se usará. Esencialmente,
puede definir una lista de preferencias para especificar qué
compilador será usado en
<path>/etc/java-config-2/build/compilers.conf</path>.
</p>

<pre caption="/etc/java-config-2/build/compilers.conf">
# If the ebuild supports it
# it will check the COMPILERS var front to back and
# use the first compiler that is installed

COMPILERS="ecj-3.1 jikes javac"
</pre>

<p>
Algunos compiladores no ofrecen soporte a todos los posibles argumentos de
-target y -source. Por lo tanto, cada compilador en la lista es chequeado
para ver si soporta el -source/-target deseado. javac funcionará en todos
los casos, así que si no se encuentra un compilador adecuado, éste será
usado en cambio.
</p>

<p>
A continuación se proporcionan más detalles sobre cada compilador:
</p>

<table>
<tr>
  <th>Nombre</th>
  <th>Alias</th>
  <th>Paquete</th>
  <th>Descripción</th>
</tr>
<tr>
  <ti>javac</ti>
  <ti>javac</ti>
  <ti>N/D</ti>
  <ti>
    Este es el compilador por defecto que será usado y viene en cada JDK.
  </ti>
</tr>
<tr>
  <ti>jikes</ti>
  <ti>jikes</ti>
  <ti>dev-java/jikes</ti>
  <ti>
    Jikes fue desarrollado originalmente por IBM. Anecdóticamente es,
    en general, más rápido que javac. Observe, sin embargo, que es más
    pedante y fallará en ciertos casos donde javac no tiene
    problemas. Todavía no soporta la sintáxis de Java 1.5.
  </ti>
</tr>
<tr>
  <ti>Compilador Eclipse para Java</ti>
  <ti>ecj-3.1</ti>
  <ti>=dev-java/eclipse-ecj-3.1*</ti>
  <ti>
    ECJ es el compilador usado por el kit de desarrollo de software Eclipse.
    Es pleno de características y además muy rápido. Ofrece soporte a la
    sintáxis de Java 1.5.
  </ti>
</tr>
</table>
</body>
</section>
</chapter>

<chapter>
<title>Establecer el CLASSPATH predeterminado</title>
<section>
<body>

<warn>
Las opciones explicadas en esta sección deben ser consideradas como
obsoletas y probablemente serán eliminadas en el futuro. Recomendamos
encarecidamente no usarlas, porque sus proyectos o aplicaciones Java
deberían manejar sus propios "classpaths". Si elige especificar un
CLASSPATH predeterminado, algunas aplicaciones podrían comportarse de
modo inesperado ya que las clases que no se suponen ahí, lo estarán en
el "classpath".
</warn>

<p>
<c>java-config</c> también puede ser usado para establecer el CLASSPATH
predeterminado del sistema, así como, el CLASSPATH predeterminado para un
usuario específico.
</p>

<p>
Primero, querrá listar las bibliotecas Java disponibles instaladas en
su sistema y que puede querer colocar en su CLASSPATH. A continuación
un ejemplo de la salida del comando:
</p>

<pre caption="Listar las clases">
# <i>java-config --list-available-packages</i>
[xerces-2] The next generation of high performance, fully compliant XML parsers in the Apache Xerces family (/usr/share/xerces-2/package.env)
[junit] Simple framework to write repeatable tests (/usr/share/junit/package.env)
[bsh] BeanShell: A small embeddable Java source interpreter (/usr/share/bsh/package.env)
[bcel] The Byte Code Engineering Library: analyze, create, manipulate Java class files (/usr/share/bcel/package.env)
[log4j] A low-overhead robust logging package for Java (/usr/share/log4j/package.env)
...
</pre>

<p>
Nuevamente, los nombres entre corchetes (<e>[]</e>) son los
identificadores a pasar como argumentos a <c>java-config
--set-system-classpath</c>. A continuación un ejemplo:
</p>

<pre caption="Establecer el classpath">
# <i>java-config --set-system-classpath log4j,xerces-2</i>
</pre>

<note>
El directorio actual (<path>.</path>) no será parte del classpath del
sistema pues debería ser agregado en el perfil de ingreso de su
sistema.
</note>

<p>
Tendrá que actualizar su entorno ya sea reingresando o regenerando el
fichero <path>/etc/profile</path>.
</p>

<p>
Para los usuarios, <c>java-config --set-user-classpath</c> creará
<path>~/.gentoo/java-env-classpath</path>, el cual debería regenerar desde
su perfil del shell.
</p>

<pre caption="Regenerar el classpath específico de un usuario">
<i>if [[ -f "${HOME}/.gentoo/java-env-classpath" ]]; then
       source ${HOME}/.gentoo/java-env-classpath
fi</i>
</pre>

<p>
Si realmente quiere un classpath predeterminado para el sistema o el
usuario, puede agregar algo como lo siguiente a su perfil del
shell, aunque le aconsejamos no hacerlo.
</p>

<pre caption="Establecer el classpath">
# <i>export CLASSPATH="${CLASSPATH}:$(java-config --classpath log4j,xerces-2)"</i>
</pre>
</body>
</section>
</chapter>

<chapter>
<title>Plugins Java para los navegadores</title>
<section>
<title>Instalando un plug-in</title>
<body>

<p>
Puede instalar un plug-in Java para el navegador haciendo emerge a una
máquina virtual Java con el parámetro USE <c>nsplugin</c> activado.
</p>

<note>
<c>nsplugin</c> no está disponible para todas las
arquitecturas. Revise si el soporte para la arquitectura deseada está
disponible antes de intentar instalar una MV ejecutando <c>emerge -pv
&lt;java-vm&gt;</c>.
</note>

<p>
Portage permitirá la instalación de múltiples versiones de plug-ins
Java plug-ins, aunque solo uno será usado por el navegador. Puede
revisar la lista de plug-ins disponibles con:
</p>

<pre caption="Visualizando los plug-ins disponibles">
# <i>eselect java-nsplugin list</i>
   [1]   sun-jre-bin-1.5
   [2]   blackdown-jre-1.4.2
</pre>

<p>
En este ejemplo, el plug-in del navegador seleccionado es
<c>sun-jre-bin</c>.
</p>

<pre caption="Seleccionando un plug-in">
# <i>eselect java-nsplugin set sun-jre-bin-1.5</i>
</pre>

<p>
Verifique que el plug-in correcto ha sido seleccionado:
</p>

<pre caption="Verificando el plug-in correcto">
# <i>eselect java-nsplugin list</i>
   [1]   sun-jre-bin-1.5  current
   [2]   blackdown-jre-1.4.2
</pre>

<p>
El sitio java.com proporciona un enlace para <uri
link="http://java.com/en/download/installed.jsp">verificar el plug-in
instalado</uri>. Además, si está usando un navegador basado en
Mozilla, puede verificar el plug-in Java escribiendo
<c>about:plugins</c> en la línea para direcciones.
</p>
</body>
</section>

<section>
<title>Plug-ins en sistemas con múltiples librerías</title>
<body>

<p>
Si está usando un sistema multilib con librerías de 64 y 32 bits (por
ejemplo, en un AMD64), puede tener instalados ambos plug-ins Java, de
64 y de 32 bits.
</p>

<p>
Para usar un plug-in de 32 bits, debe instalar
<c>emul-linux-x86-java</c> activando el parámetro USE <c>nsplugin</c>.
</p>

<pre caption="Instalando un plug-in de 32 bits">
# <i>echo "app-emulation/emul-linux-x86-java nsplugin" >> /etc/portage/package.use</i>
# <i>emerge emul-linux-x86-java</i>
</pre>

<p>
Luego revise cuales plug-ins estan disponibles:
</p>

<pre caption="Viendo cuales plug-ins estan disponibles">
# <i>eselect java-nsplugin list</i>
Available 32-bit Java browser plugins
  [1]  plug-in for your plug-in for your  emul-linux-x86-java-1.4.2
  [2]   emul-linux-x86-java-1.5
Available 64-bit Java browser plugins
  [1]   blackdown-jdk-1.4.2
  [2]   blackdown-jre-1.4.2
</pre>

<p>
Puede seleccionar un plug-in de 32 bits para un navegador de 32 bits
(por ejemplo, <c>firefox-bin</c>) y puede seleccionar un plug-in de 64
bits para el navegador de 64 bits (por ejemplo, <c>konqueror</c>).
</p>

<pre caption="Seleccionando los plug-ins">
# <i>eselect java-nsplugin set 32bit emul-linux-x86-java-1.4.2</i>
# <i>eselect java-nsplugin set 64bit blackdown-jdk-1.4.2</i>
</pre>

<p>
Verifique que los plug-ins correctos han sido seleccionados:
</p>

<pre caption="Verificando los plug-ins correctos">
# <i>eselect java-nsplugin list</i>
Available 32-bit Java browser plugins
  [1]   emul-linux-x86-java-1.4.2  current
  [2]   emul-linux-x86-java-1.5
Available 64-bit Java browser plugins
  [1]   blackdown-jdk-1.4.2  current
  [2]   blackdown-jre-1.4.2
</pre>
</body>
</section>
</chapter>

<chapter>
<title>Parámetros USE para usar con Java</title>
<section>
<title>Configurar los parámetros USE</title>
<body>

<p>
Para más información acerca de los parámetros USE, puede consultarse el
capítulo acerca de <uri
link="/doc/es/handbook/handbook-x86.xml?part=2&amp;chap=2">Parámetros
USE</uri> del Manual Gentoo.
</p>
</body>
</section>

<section>
<title>Los parámetros USE</title>
<body>

<ul>
  <li>
   El parámetro <b>java</b> agrega soporte para Java en una variedad de
   programas.
  </li>
  <li>
    El parámetro <b>nsplugin</b> agrega soporte para los navegadores estilo
    Mozilla (incluyendo Firefox). Necesitará esto para visualizar applets Java
    en su navegador estilo Mozilla.
  </li>
  <li>
    El parámetro <b>source</b> instalará un fichero zip del código fuente del
    paquete. Esto es típicamente usado para proporcionar el código fuente del
    paquete a su IDE.
  </li>
  <li>
    El parámetro <b>doc</b> típicamente instalará la documentación de la API,
    generada por javadoc.
  </li>
</ul>
</body>
</section>
</chapter>

<chapter>
<title>Recursos Adicionales</title>
<section>
<title>Recursos fuera de línea</title>
<body>

<ul>
  <li>Página del manual de java-config</li>
  <li><c>java-config --help</c></li>
</ul>
</body>
</section>

<section>
<title>Recursos en línea</title>
<body>

<ul>
  <li>La <uri link="http://www.gentoo.org/proj/en/java/">página</uri> del proyecto Gentoo Java</li>
  <li>
    Los archivos de las listas de correo
    <uri link="http://news.gmane.org/gmane.linux.gentoo.java">gentoo-java</uri>
    <uri link="http://news.gmane.org/gmane.linux.gentoo.user">gentoo-user</uri>,
    y <uri link="http://news.gmane.org/gmane.linux.gentoo.devel">gentoo-dev</uri>
  </li>
  <li>Los canales IRC #gentoo y #gentoo-java en irc.freenode.net</li>
  <li>
    El <uri link="http://en.wikipedia.org/wiki/Java_programming_language">artículo de Wikipedia acerca de Java</uri>
  </li>
</ul>
</body>
</section>
</chapter>
</guide>
