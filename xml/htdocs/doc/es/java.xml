<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/java.xml,v 1.13 2006/07/23 17:29:13 yoswink Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/es/java.xml" lang="es">

<title>Guía Java Gentoo</title>

<author title="Autor">
  <mail link="karltk@gentoo.org">Karl Trygve Kalleberg</mail>
</author>
<author title="Autor">
  <mail link="nichoj@gentoo.org">Joshua Nichols</mail>
</author>
<author title="Editor">
  <mail link="nightmorph@gentoo.org">Joshua Saddler</mail>
</author>
<author title="Traductor">
  <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Traductor">
  <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
</author>
<author title="Traductor">
  <mail link="pablo.leira@pitagoral.com">Pablo Pita Leira</mail>
</author>
<author title="Traductor">
  <mail link="anpereir@gentoo.org">Andrés Pereira</mail>
</author>


<abstract>
Esta guía le dará a conocer Java y le explicará cómo usar Java con Gentoo Linux.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>0.4</version>
<date>2006-06-24</date>

<chapter>
<title>¿Qué es Java?</title>
<section>
<title>Resumen</title>
<body>

<p>
Java es un lenguaje de programación desarrollado por ingenieros de Sun
Microsystems. Es un lenguaje orientado a objetos y diseñado para la
ejecución en múltiples plataformas sin requerir la recompilación del
código fuente para cada plataforma. Aunque Java puede ser compilado
como un programa nativo, se le puede atribuir una buena parte de su
popularidad a su portabilidad y otras características como la
recolección de basura. Para hacer posible la independencia de plataforma,
el compilador de Java compila el código Java a una representación intermedia
denominada "bytecode Java" el cual se ejecuta en un JRE (Java Runtime
Environment, Entorno de Ejecución Java) y no directamente en el Sistema
Operativo.
</p>

<p>
Para poder ejecutar "bytecode" Java, hace falta tener instalado un
entorno de ejecución Java o JRE (por Java Runtime Environment). El JRE
proporciona unas librerías básicas, una máquina virtual Java para la
plataforma instalada y plugins para los navegadores, entre otras
cosas. Un kit de desarrollo Java o JDK (por Java Development Kit)
agrega herramientas para programación, como un compilador para
bytecode y un depurador ("debugger").
</p>

</body>
</section>
</chapter>

<chapter>
<title>Instalar un JRE/JDK</title>
<section>
<title>Las opciones</title>
<body>

<p>
Gentoo proporciona numerosos JDKs y JREs. Entre las alternativas actuales
tenemos:
</p>

<table>
<tr>
  <th>Fabricante</th>
  <th>JDK</th>
  <th>JRE</th>
</tr>
<tr>
  <ti>Kit Java de Blackdown</ti>
  <ti>dev-java/backdown-jdk</ti>
  <ti>dev-java/blackdown-jre</ti>
</tr>
<tr>
  <ti>Kit Java de Sun</ti>
  <ti>dev-java/sun-jdk</ti>
  <ti>dev-java/sun-jre-bin</ti>
</tr>
<tr>
  <ti>Kit Java de IBM</ti>
  <ti>dev-java/ibm-jdk-bin</ti>
  <ti>dev-java/ibm-jre-bin</ti>
</tr>
<tr>
  <ti>Kit Java de Compaq para Alpha/Linux/GNU</ti>
  <ti>dev-java/compaq-jdk</ti>
  <ti>dev-java/compaq-jre</ti>
</tr>
<tr>
  <ti>Kit de desarrollo J2SE de BEA WebLogic</ti>
  <ti>dev-java/jrockit-jdk-bin</ti>
</tr>
</table>

<!--
TODO: list free implmentations?
note about not drop-in replacemenets
kaffe/sablevm/gcj/jamvm
-->

<p>
De forma predeterminada usamos la pareja Blackdown JRE/JDK,  ya que su
desarrollo es libre y está disponible sin tener que llevar a cabo algún tipo de
registro.
</p>

<p>
Los kits de Sun e IBM son generalmente más rápidos, pero obtenerlos es un poco
más problemático, pues uno está en la obligación de leer y aceptar sus licencias
antes de descargarlos (adicionalmente, IBM requiere registrarse).
</p>

<p>
Nuestros ebuilds para los JRE/JDK de Sun e IBM le informarán cómo descargar los
ficheros adecuados.
</p>

</body>
</section>

<section>
<title>Instalar los JRE/JDKs</title>
<body>

<p>
Para instalar el JDK predeterminado de su perfil, ejecute
<c>emerge virtual/jdk</c>. O para instalar el JRE predeterminado de
su perfil ejecute <c>emerge virtual/jre</c>.
</p>

<note>
El JDK también incluye un JRE, así que si instala un JDK no debería tener que
instalar un JRE.
</note>

</body>
</section>

<section>
<title>Instalar los JRE/JDKs de Sun/IBM</title>
<body>

<p>
Si ejecuta  <c>emerge dev-java/sun-jdk</c> o <c>emerge dev-java/ibm-jdk-bin</c>,
será advertido que debe bajar los ficheros usted mismo. Esto tiene que ver con
las restricciones de la licencia del JRE/JDK de Sun (licencia "clickwrap" en
línea) y con los requisitos de registro del JRE/JDK de IBM.
</p>

<p>
Debe descargar el(los) fichero(s) indicado(s) a
<path>/usr/portage/distfiles</path>. Una vez que esté(n) allí, puede volver a
ejecutar el comando emerge y los JRE/JDK empezarán a ser instalados.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configurar su JRE/JDK</title>
<section>
<title>Introducción</title>
<body>

<p>
Gentoo tiene la capacidad de tener instalados múltiples JDKs y JREs sin causar
conflictos.
</p>

<p>
Si tiene acceso al superusuario , usando la herramienta <c>java-config</c>
puede establecer la configuración predeterminada del sistema. Los
usuarios también pueden usar <c>java-config</c> para establecer su
configuración personal predeterminada.
</p>

<note>
También puede usar <e>eselect</e> para cambiar la máquina virtual del sistema y
del usuario. Vea <c>eselect java-vm help</c>.
</note>

</body>
</section>

<section>
<title>Establecer el JRE/JDK predeterminado</title>
<body>

<p>
El comando <c>java-config --list-available-vms</c> le entregará una lista con
los JREs y JDKs instalados en el sistema. A continuación se muestra un ejemplo
de la salida de ese comando:
</p>

<pre caption="Listar las máquinas virtuales disponibles">
# <i>java-config --list-available-vms</i>
1) Blackdown JDK 1.3.1 [blackdown-jdk-1.3] (/etc/env.d/java/20blackdown-jdk-1.3)
2) Blackdown JDK 1.4.2.02 [blackdown-jdk-1.4] (/etc/env.d/java/20blackdown-jdk-1.4)
3) Blackdown JRE 1.4.2.02 [blackdown-jre-1.4] (/etc/env.d/java/20blackdown-jre-1.4)
4) IBM JDK 1.4.2 [ibm-jdk-bin-1.4] (/etc/env.d/java/20ibm-jdk-bin-1.4)
5) IBM JRE 1.4.2 [ibm-jre-bin-1.4] (/etc/env.d/java/20ibm-jre-bin-1.4)
6) WebLogic JRockit 1.4.2.05 [jrockit-jdk-bin-1.4] (/etc/env.d/java/20jrockit-jdk-bin-1.4)
7) WebLogic JRockit 1.5.0.03 [jrockit-jdk-bin-1.5] (/etc/env.d/java/20jrockit-jdk-bin-1.5)
8) Sun JDK 1.3.1.13 [sun-jdk-1.3] (/etc/env.d/java/20sun-jdk-1.3)
9) Sun JDK 1.4.2.09 [sun-jdk-1.4] (/etc/env.d/java/20sun-jdk-1.4)
*) Sun JDK 1.5.0.04 [sun-jdk-1.5] (/etc/env.d/java/20sun-jdk-1.5)
11) Sun JRE 1.4.2.09 [sun-jre-bin-1.4] (/etc/env.d/java/20sun-jre-bin-1.4)
12) Sun JRE 1.5.0.04 [sun-jre-bin-1.5] (/etc/env.d/java/20sun-jre-bin-1.5)
</pre>

<p>
El asterico <e>*</e> indica que ésta es la máquina virtual activa (la del
sistema o la del usuario cuando está configurada). El nombre entre corchetes
(<e>[]</e>) es el alias o identificador para esa máquina virtual (MV) en
particular. Puede usar el alias o el número identificador con el comando
<c>java-config --set-system-vm</c>. A continuación se muestra un ejemplo
sobre cómo establecer la MV del sistema:
</p>

<pre caption="Establecer la MV del sistema">
<comment>(Mediante un alias (opción preferida))</comment>
# <i>java-config --set-system-vm blackdown-jdk-1.4</i>
<comment>(Mediante un número identificador)</comment>
# <i>java-config --set-system-vm 2</i>
</pre>

<p>
Como usuario normal puede utilizar <c>java-config --set-user-vm</c>.
</p>

<note>
Ya no tiene que regenerar el perfil mediante <c>source</c> para que tomen
efecto las actualizaciones hechas a la MV del sistema o del usuario.
</note>

</body>
</section>
<section id="preferred-vm">
<title>MV de preferencia</title>
<body>

<p>
Cuando esté instalando paquetes de Java, la MV puede y será cambiada de ser
necesario.
</p>

<p>
Debido a la amplia variedad de MVs disponibles, no tenemos los recursos para
probar y verificar que todos los paquetes funcionen con todas ellas. Así que
para asegurar que todo paquete se instale sin problemas, hemos definido una
lista de <e>MVs predeterminadas/soportadas</e> por arquitectura. Puede
encontrarlas en <path>/usr/share/java-config/config/jdk-defaults.conf</path>.
Cuando esté instalando un paquete Java y este detecte una de las máquinas
virtuales en aquel fichero, usará automáticamente dicha MV en vez de la
MV del sistema.
</p>

<p>
El cambio de MV al momento de instalar paquetes también es necesario cuando,
por ejemplo, su MV del sistema está configurada como una MV 1.4 y el paquete
que está instalado necesita de una MV 1.5. Al instalar el paquete se usará la
MV 1.5 preferida dejando intacta su elección de la máquina virtual del sistema.
</p>

<p>
Por supuesto, en Gentoo todo se trata acerca de elegir, así que puede hacer
caso omiso de las opciones predeterminadas en
<path>/etc/java-config-2/build/jdk.conf</path> y tener control total sobre
cuál MV será usada. Algunos ejemplos:
</p>

<pre caption="Ejemplo de /etc/java-config-2/build/jdk.conf">
<comment>(Siempre quiero usar sun-jdk, es decir, sun-jdk-1.4 para 1.4, sun-jdk-1.5 para 1.5, etc)</comment>
*=sun-jdk
</pre>

<pre caption="Ejemplo de /etc/java-config-2/build/jdk.conf">
<comment>(Use siempre sun-jdk-1.5 donde sea posible, excepto cuando se requiera explícitamente de una MV 1.4 o 1.3)</comment>
*=sun-jdk-1.5
</pre>

<pre caption="Ejemplo de /etc/java-config-2/build/jdk.conf">
<comment># Para 1.3 prefiero sun-jdk 1.4, pero cuando no esté disponible, use ibm-jdk-bin.
# Para 1.4, use blackdown-jdk, y para 1.5, use sun-jdk</comment>
1.3=sun-jdk-1.4 ibm-jdk-bin
1.4=blackdown-jdk
1.5=sun-jdk
</pre>

<warn>
No tiene necesariamente que editar este fichero. Si cambia estas opciones para
usar una MV no soportada, es posible que rompa algunas cosas. Los bugs
reportados que mencionen el uso de una MV no soportada tendrán baja prioridad
si no se informan con MV soportadas.
</warn>

</body>
</section>
</chapter>

<chapter>
<title>Compiladores</title>
<section>
<body>

<p>
El compilador estándar Java usado es javac, el cual viene en cada JDK. Aparte
de configurar la MV utilizada en tiempo de compilación, también es posible
configurar qué compilador se usará. Esencialmente, Ud. define una lista de
su preferencia para especificar qué compilador será usado en
<path>/etc/java-config-2/build/compilers.conf</path>.
</p>

<pre caption="/etc/java-config-2/build/compilers.conf">
# If the ebuild supports it
# it will check the COMPILERS var front to back and
# use the first compiler that is installed

COMPILERS="ecj-3.1 jikes javac"
</pre>

<p>
Algunos compiladores no ofrecen soporte a todos los posibles argumentos de
-target y -source. Por lo tanto, cada compilador en la lista es chequeado
para ver si soporta el -source/-target deseado. javac funcionará en todos
los casos, así que si no se encuentra un compilador adecuado, éste será
usado en cambio.
</p>

<p>
A continuación se proporcionan más detalles sobre cada compilador:
</p>

<table>
<tr>
  <th>Nombre</th>
  <th>Alias</th>
  <th>Paquete</th>
  <th>Descripción</th>
</tr>
<tr>
  <ti>javac</ti>
  <ti>javac</ti>
  <ti>N/D</ti>
  <ti>
    Este es el compilador por defecto que será usado y viene en cada JDK.
  </ti>
</tr>
<tr>
  <ti>jikes</ti>
  <ti>jikes</ti>
  <ti>dev-java/jikes</ti>
  <ti>
    Jikes fue desarrollado originalmente por IBM. Anecdóticamente es,
    en general, más rápido que javac. Observe, sin embargo, que es más
    pedante y fallará en ciertos casos donde java no tiene problemas. Tampoco
    soporta todavía la sintáxis de Java 1.5.
  </ti>
</tr>
<tr>
  <ti>Compilador Eclipse para Java</ti>
  <ti>ecj-3.1</ti>
  <ti>=dev-java/eclipse-ecj-3.1*</ti>
  <ti>
    ECJ es el compilador usado por el kit de desarrollo de software Eclipse.
    Está plagado de características y es muy rápido. Ofrece soporte a la
    sintáxis de Java 1.5.
  </ti>
</tr>
</table>

</body>
</section>
</chapter>

<chapter>
<title>Establecer el CLASSPATH predeterminado</title>
<section>
<body>

<warn>
Las opciones que se explican en esta sección deben ser consideradas como
obsoletas y probablemente serán eliminadas en el futuro. Recomendamos
encarecidamente no usarlas, porque sus proyectos o aplicaciones Java deberían
gestionar sus propios "classpaths". Si elige especificar el CLASSPATH
predeterminado, algunas aplicaciones puede que se comporten de modo inesperado
porque las clases que no se suponen que estén ahí, lo estarán en el
"classpath".
</warn>

<p>
<c>java-config</c> también puede ser usado para establecer el CLASSPATH
predeterminado del sistema, así como, el CLASSPATH predeterminado para un
usuario específico.
</p>

<p>
Primero, tendrá que listar las bibliotecas Java disponibles que estén
instaladas en su sistema y que puede querer colocar en su CLASSPATH.
A continuación se muestra un ejemplo de la salida del comando:
</p>

<pre caption="Listar las clases">
# <i>java-config --list-available-packages</i>
[xerces-2] The next generation of high performance, fully compliant XML parsers in the Apache Xerces family (/usr/share/xerces-2/package.env)
[junit] Simple framework to write repeatable tests (/usr/share/junit/package.env)
[bsh] BeanShell: A small embeddable Java source interpreter (/usr/share/bsh/package.env)
[bcel] The Byte Code Engineering Library: analyze, create, manipulate Java class files (/usr/share/bcel/package.env)
[log4j] A low-overhead robust logging package for Java (/usr/share/log4j/package.env)
...
</pre>

<p>
Nuevamente, los nombres entre corchetes (<e>[]</e>) son los identificadores
que tiene que pasar como argumentos a <c>java-config --set-system-classpath</c>.
A continuación un ejemplo:
</p>

<pre caption="Establecer el classpath">
# <i>java-config --set-system-classpath log4j,xerces-2</i>
</pre>

<note>
El directorio actual (<path>.</path>) no será parte del classpath del sistema
pues debería ser agregado en el perfil de ingreso de su sistema.
</note>

<p>
Tendrá que actualizar su entorno ya sea reingresando o regenerado el fichero
<path>/etc/profile</path>.
</p>

<p>
Para los usuarios, <c>java-config --set-user-classpath</c> creará
<path>~/.gentoo/java-env-classpath</path>, el cual debería regenerar desde
su perfil del shell.
</p>

<pre caption="Regenerar el classpath específico de un usuario">
<i>if [[ -f "${HOME}/.gentoo/java-env-classpath" ]]; then
       source ${HOME}/.gentoo/java-env-classpath
fi</i>
</pre>

<p>
Si realmente quiere un classpath predeterminado para el sistema o el usuario,
puede agregar algo como lo siguiente a su perfil del shell. Pero no le
aconsejamos hacer esto.
</p>

<pre caption="Establecer el classpath">
# <i>export CLASSPATH="${CLASSPATH}:$(java-config --classpath log4j,xerces-2)"</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Parámetros USE para usar con Java</title>
<section>
<title>Configurar los parámetros USE</title>
<body>

<p>
Para más información acerca de los parámetros USE, puede consultarse el
capítulo acerca de <uri
link="/doc/es/handbook/handbook-x86.xml?part=2&amp;chap=2">Parámetros
USE</uri> del Manual Gentoo.
</p>

</body>
</section>
<section>
<title>Los parámetros USE</title>
<body>

<ul>
  <li>
   El parámetro <b>java</b> agrega soporte para Java en una variedad de
   programas.
  </li>
  <li>
    El parámetro <b>nsplugin</b> agrega soporte para los navegadores estilo
    Mozilla (incluyendo Firefox). Necesitará esto para visualizar applets Java
    en su navegador estilo Mozilla.
  </li>
  <li>
    El parámetro <b>doc</b> típicamente instalará la documentación de la API,
    generada por javadoc.
  </li>
  <li>
    El parámetro <b>source</b> instalará un fichero zip del código fuente del
    paquete. Esto es típicamente usado para proporcionar el código fuente del
    paquete a su IDE.
  </li>
</ul>

</body>
</section>
</chapter>

<chapter>
<title>Recursos Adicionales</title>
<section>
<title>Recursos fuera de línea</title>
<body>

<ul>
  <li>Página del manual de java-config</li>
  <li><c>java-config --help</c></li>
</ul>

</body>
</section>

<section>
<title>Recursos en línea</title>
<body>

<ul>
  <li>La <uri link="/proj/en/java/">página</uri> del proyecto Gentoo Java</li>
  <li>
    Los archivos de las listas de correo
    <uri link="http://news.gmane.org/gmane.linux.gentoo.java">gentoo-java</uri>
    <uri link="http://news.gmane.org/gmane.linux.gentoo.user">gentoo-user</uri>,
    y <uri link="http://news.gmane.org/gmane.linux.gentoo.devel">gentoo-dev</uri>
  </li>
  <li>Los canales IRC #gentoo y #gentoo-java en irc.freenode.net</li>
  <li>
    El <uri link="http://en.wikipedia.org/wiki/Java_programming_language">artículo de Wikipedia acerca de Java</uri>
  </li>
</ul>

</body>
</section>
</chapter>
</guide>
