<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/java.xml,v 1.2 2004/11/27 16:55:21 chiguire Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/doc/es/java.xml">
<title>Guía Java Gentoo</title>
<author title="Autor y Editor">
  <mail link="karltk@gentoo.org">Karl Trygve Kalleberg</mail>
</author>
<author title="Traductor">
  <mail link="pablo.leira@pitagoral.com">Pablo Pita Leira</mail>
</author>
<author title="Editor-Es">
  <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Editor-Es Adjunto">
  <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
</author>

<abstract>
Guía Java para Usuarios y Desarrolladores de Gentoo 
</abstract>

<version>0.1.4</version>
<date>2004-11-21</date>

<chapter>
<title>Instalando un JDK/JRE</title>
<section>
<title>Descripción</title>
<body>
<p>
Gentoo provee numerosos JDKs y JREs. Por defecto usamos el Blackdown
JDK/JRE, porque es libre (como la cerveza), sin requisitos de
registro.
</p>

<note>
Cuando kaffe esté en condiciones de reemplazar los JRE/JDK actuales, 
probablemente sea nuestro JDK/JRE por defecto.
</note>

<p>
Normalmente, los JDK/JRE de Sun e IBM son más rápidas, pero
obtenerlas requiere algo más de trabajo, pues tienes que registrarte y 
aceptar la licencia antes de bajarlos (además IBM requiere que se 
registre).
</p>

<p>
Nuestros ebuilds para los JDK/JRE de Sun e IBM le indicarán donde
dirigirse para bajar los ficheros.
</p>
</body>
</section>

<section>
<title>Instalando las JDK/JREs de Sun/IBM</title>
<body>
<p>
Si escribe <c>emerge dev-java/sun-jdk-1.3.1</c> o <c>emerge
dev-java/ibm-jdk-1.3.1</c>, se le indicará que debe bajar 
los ficheros usted mismo. Esto tiene que ver con las restricciones de
la licencia del JDK/JRE de Sun (licencia clickwrap en línea) y con los
requisitos de registro del JDK/JRE de IBM.
</p>

<note>
También hay una versión dev-java/sun-jdk-1.4.0, pero no todos los paquetes 
funcionan bien con Java 1.4, así que estaría a solas al usar el JDK
1.4.0.
</note>

<p>
Debe bajar los fichero(s) indicado(s) a
<path>/usr/portage/distfiles</path>. Una vez hecho esto, vuelva a
ejecutar el comando emerge y el JDK/JRE se instalará adecuadamente en
<path>/opt</path>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Configurando el JDK/JRE</title>
<section>
<title>Introducción</title>
<body>
<p>
En Gentoo se puede instalar múltiples JDKs y JREs sin que hayan
conflictos entre ellas.
</p>

<p>
Si tiene acceso a root, usando la herramienta <c>java-config</c>,
puede establecer la configuración por defecto del sistema. Los
usuarios también pueden usar <c>java-config</c> para establecer su
configuración personal por defecto, distinta a la configuración por
defecto del sistema.
</p>
</body>
</section>

<section>
<title>Estableciendo el JDK/JRE por defecto</title>
<body>
<p>
El comando <c>java-config --list-available-vms</c> lista
los JREs y JDKs disponibles en el sistema, así:
</p>

<pre>
[%1 ~] java-config --list-available-vms
[blackdown-jdk-1.3.1] Blackdown JDK 1.3.1 (/etc/env.d/java/20blackdown-jdk-1.3.1)
[blackdown-jre-1.3.1] Blackdown JRE 1.3.1 (/etc/env.d/java/20blackdown-jre-1.3.1)
[ibm-jdk-1.3.0] IBM JDK 1.3.0 (/etc/env.d/java/20ibm-jdk-1.3.0)
[ibm-jdk-1.3.1] IBM JDK 1.3.1 (/etc/env.d/java/20ibm-jdk-1.3.1)
[ibm-jre-1.3.1] IBM JRE 1.3.1 (/etc/env.d/java/20ibm-jre-1.3.1)
[sun-jdk-1.4.0] Sun JDK 1.4.0 (/etc/env.d/java/20sun-jdk-1.4.0)
</pre>

<p>
El nombre dentro de corchetes <path>"[]"</path> es un alias o ID para
esa máquina virtual (VM) particular. Pase ese ID como argumento a
<c>java-config --set-system-vm</c>, así:
</p>

<pre>
[#1 ~] java-config --set-system-vm=ibm-jdk-1.3.1
Now using IBM JDK 1.3.1 (/etc/env.d/java/20ibm-jdk-1.3.1)
</pre>

<note>
Debe ser el usuario root para establecer --set-system-vm.
</note>

<p>
Una vez que haya ejecutado <c>java-config --set-system-vm</c> con una
ID de una VM en particular, debe regenerar el /etc/profile.env, así:
</p>

<pre>
[#1 ~] env-update
</pre>

<p>
Después de esto, o vuelve a hacer login, o ejecutar <c>source
/etc/profile</c> en su entorno.
</p>

<p>
Como usuario normal, puede usar <c>java-config --set-user-vm</c> para
<path>$HOME/.gentoo/java-env</path> con todas las variables de entorno
requeridas. Normalmente deberá hacerle source a este fichero desde el
guión de inicialización de su shell (en mi caso,
<path>$HOME/.zshenv</path>).
</p>
</body>
</section>

<section>
<title>Establecer un CLASSPATH por defecto</title>
<body>
<p>
<c>java-config</c> también puede usarse para establecer el
CLASSPATH por defecto del sistema, y por supuesto, para hacer lo mismo
para el usuario.
</p>

<p>
Lo primero es ver la lista de librerías java que interesaría poner en
su CLASSPATH, así:
</p>

<pre>
[%1 ~] java-config --list-available-packages
[ant] No description (/usr/share/ant/classpath.env)
[java-gnome] No description (/usr/share/java-gnome/classpath.env)
[java-gtk] No description (/usr/share/java-gtk/classpath.env)
[log4j] "" (/usr/share/log4j/package.env)
</pre>

<note>
Ninguno de estos paquetes tiene una descripción adecuada. Esto es
algo que se implementará en un futuro no muy lejano.
</note>

<p>
Otra vez, los nombres en corchetes <path>"[]"</path> son los IDs que
tienes que pasar a <c>java-config --set-system-classpath</c>, así:
</p>

<pre>
java-config --set-system-classpath=log4j,java-gtk,java-gnome
</pre>

<note>
El directorio actual (.) no será parte del classpath del sistema, así
que debemos agregarlo al guión de inicialización del usuario root.
</note>

<p>
De nuevo, debe ejecutar <c>env-update</c> para actualizar el entorno del
sistema, y quizás quiera volver a hacer login o correr source
<path>/etc/profile</path>.
</p>

<p>
Para los usuarios, <c>java-config --set-user-classpath</c> creará
<path>$HOME/.gentoo/java-env-classpath</path>, el cual será incluido
automáticamente por <path>$HOME/.gentoo/java-env</path>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Recursos Adicionales</title>
<section>
<title>Recursos fuera de línea</title>
<body>

<ul>
<li><c>man java-config</c></li>
<li><c>java-config --help</c></li>
<li>El propio guión <path>/usr/bin/java-config</path></li>
</ul>
</body>
</section>

<section>
<title>Recursos en línea</title>
<body>

<ul>
<li>Los archivos de las listas de correo <uri link="http://news.gmane.org/gmane.linux.gentoo.devel">gentoo-dev</uri>, <uri link="http://news.gmane.org/gmane.linux.gentoo.user">gentoo-user </uri></li>
<li>#gentoo y #gentoo-java on irc.freenode.net</li>
</ul>
</body>
</section>
</chapter>
</guide>
