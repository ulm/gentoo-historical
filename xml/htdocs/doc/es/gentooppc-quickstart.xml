<?xml version='1.0' encoding='iso-8859-15'?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="/doc/es/gentooppc-quickstart.xml">
<title>Guía Rápida de Gentoo Linux PPC</title>
<author><mail link="daybird@gentoo.org">David Chamberlain</mail></author>
<author title="Traductor"><mail link="pdmp@interhoster.com">Pedro Del Medico P.</mail></author>
<author title="Editor-es"><mail link="bass@gentoo.org">José Alberto Suárez López</mail></author>

<abstract>Esta guía está dirigida a aquellos usuarios familiarizados con Gentoo Linux.
Se destacarán las mayores diferencias de las que usted tiene que estar pendiente, entre la 
versión para PPC y la versión para x86. Si no está familiarizado con Gentoo Linux, 
debe leer enteramente la Guía de Instalación de Gentoo Linux.
</abstract>

<version>1.0.2</version>
<date>18 November 2002</date>

<chapter>
<title>  Pre-Instalación</title>
<section>
<body>
<warn>Este documento no esta al día, en su lugar siga la <uri link="http://www.gentoo.org/doc/es/gentoo-ppc-install.xml">Guía de Instalación de Gentoo Linux para PPC</uri></warn>
<p>Si solamente instalará Linux en esta PC, está listo para comenzar.  Si quiere OS9 
(Clásico Sistema Operativo de Mac) y/o OSX (Nueva implementación del OS9 el cual combina 
el poder y estabilidad de UNIX con la elegancia y versatilidad de Macintosh), tendrá que 
configurar primero su disco desde el entorno Mac. 
Podrá encontrar una excelente guía aquí: <uri>http://people.debian.org/~branden/ibook.html</uri>.  
También consulte aquí: <uri>http://www.oreillynet.com/pub/a/mac/2002/03/29/ibook_linux.html</uri>.</p>
<p>Una diferencia importante entre estos procedimientos: no necesitará accesar el 
Microcódigo Abierto (Open Firmware) para arrancar el instalador - estará arrancando desde el CD 
una vez que las particiones de su Mac esten configuradas e instaladas</p>
<p>
No se enfrasque realizando muchas particiones - cuando mire el disco duro a 
través de mac-fdisk, se dará cuenta que Apple ya posee por lo memos 8 particiones al 
comienzo del disco duro para sus controladores, y necesitará una partición extra para 
un sector maestro de arranque (MBR) fictício que usaremos. Desde que uso Linux, he sospechado 
que un gran número de particiones en mi disco duro han provocado que el OSX sea mas 
bien inestable. Aún así, algo a ser considerado, es hacer particiones HFS ("Estandard Apple") 
más cortas, de manera tal que pueda intercambiar confortablemente archivos entre Linux 
y Mac - es el formato que ambos pueden leer (borrar archivos el particiones HFS ha provocado 
pocos errores de pánico en el núcleo; y después de remover estas particiones compartidas, 
OSX no ha vuelto a fallar).</p>
<note>
Muchos usuarios de OSX parecen estar de acuerdo en tener particiones separadas para OS9 
("Clásico"), aún cuando puede instalarlo en la misma partición donde reside OSX.</note>
</body>
</section></chapter>

<chapter>
<title>  Usando el CD de Instalación</title>
<section>
<body>

<p>
Usted puede descargar la imágen ISO para su CD de Instalación desde <uri>http://ftp.sunsite.dk/projects/gentooppc/build</uri>. 
Si lo graba como un CD maestro, podrá arrancar su Mac.  Con el CD en la unidad, encienda su 
Mac al tiempo de presiona la tecla [C].  Alternativamente, presione la tecla [Option] para 
obtener el menú de arranque y seleccione la opción CD. Viejos Macs requeriran de combinaciones 
arcanas de las teclas [C], [D], [Shift], [Option] etc.  Si posee una de estas, experimente. 
También puede revisar este <uri link="http://www.info.apple.com/support/manuals.html">manual</uri>.
</p>

<note>Si posee un viejo Mac que no use Microcódigo Abierto (Open
Firmware), ó uno que use 
una vieja versión de OF (muchas máquinas previas al "Azul y Blanco" G3), deberá implementar 
<uri link="http://master.penguinppc.org/~benh">BootX</uri> para arrancar el CD (incluido como 
archivo StuffIt en la imágen de arranque de GentooPPC).  Este debe ser instalado y configurado 
primeramente en MacOS.  Vea <uri link="http://penguinppc.org/projects/bootx">estos documentos</uri> 
para algunas (ligeras) instrucciones.  Necesitará copiar el archivo de ramdisk  "initrd" y  el 
archivo (vmlinux) del núcleo desde la carpeta "boot" en el cd hasta la carpeta de sistema de 
su Mac, y apuntar BootX contra esas carpetas. Asegúrese de leer bien el archivo ReadMe incluido 
con BootX - este le explicará todo lo que necesita saber.
</note>
<p>
Mientras esté conectado en el sitio ftp, vea si existe una versión de <path>build-ppc.tar.bz2</path> 
más reciente que la que tiene en la imágen del CD.  Siendo así, descarguela, pues probablemente 
tenga algo en ella que pueda interesarle.
</p>

<p>
Si ha arrancado exitosamente desde el CD, tendrá la oportunidad de escoger su forma de arranque.
Note que todos los Macs fabricadas en los últimos cuatro años son
llamados máquinas del "Nuevo-Mundo" 
y pueden usar el modo de arranque convencional.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Configurando</title>
<section>
<body>
<p>
Al contrario que los CD de arranque para x86, la versión para PPC casi ciertamente activará todos 
los dispositivos necesarios sin la necesidad de probar cada módulo. Observará instrucciones de 
la activación de la red - sí, no hay necesidad de chequear por manejadores de tarjetas de red. 
Si ifconfig no trabaja de una vez, usted puede indagar en el directorio /lib/modules para ver 
si encuentra algún manejador que pueda descargar, pero es casi seguro que no pueda efectuar la 
instalación de esta manera.</p>
<p>
Por otra parte, existen algunos útiles manejadores en el directorio /lib/modules - en particular, 
Firewire.  Si quiere puede utilizar el manejador Firewire (ó su PowerBook en modo Target Disk :-) 
durante la instalación - por ejemplo, para cargar un nuevo archivo de construcción - pruebe:</p> 
<pre>
# modprobe ieee1394
<codenote>creo que actualmente está compilado dentro del núcleo</codenote>
# modprobe ohci1394
# modprobe sbp2
</pre>

<p>Esto debe adjuntar su disco duro como periférico scsi emulado - chequee con 
<c>dmesg</c> para ver como es mostrado.  Si esto no funciona, trate descargando 
y recargandolo un par de veces para chequear - el soporte de FireWire aunque es 
antíguo, su implementación ha sido incompleta, irónicamente del lado de PPC.</p>

<note>No, no he probado Target Disk con Linux - es tan sólo una idea...</note>

<p>Una vez que tenga configurada la red, está listo para particionar, usando <c>mac-fdisk</c>. 
Es muy directo - use "p" después del número de particiones para seleccionar los 
bloques de comienzo y fin por defecto. Investigue las guías mencionadas arriba, 
y no olvide hacer la partición especial de arranque usando el comando "b" - esta 
es nuestra versión del Sector Maestro de Arranque (MBR) (de hecho no es necesaria si 
tiene que usar BootX en vez de Yaboot). 
Si hace de esta la primera partición (non-driver), el Mac tratará de arrancar desde 
ella primeramente; pero note que no necesita hacerlo de esta manera. Una vez que 
termine la instalación, puede arrancar dentro de Open FirmWare (Cmd-Option-O-F) y 
emitir algunos oscuros comandos de Forth para decirle a la máquina desde cual 
partición vá a arrancar: <c>setenv boot-device hd:9,\\:tbxi</c>.  
Obviamente tendrá que intercambiar entre el número de partición más apropiado de las 
9 presentadas aquí.</p>
<note>Estando consciente por tener demasiadas particiones, mantengo /boot en la 
partición raíz. Ningún problema se ha presentado hasta el momento. Y OSX no se ha 
quejado desde que quite mi partición HFS compartida.
</note>
<note>Con toda esa gran cantidad de particiones Apple, es muy buena idea anotar 
aparte, los nombres y números de todas esas importantes particiones.</note>
</body>
</section></chapter>

<chapter>
<title>Instalación</title>
<section>
<body>
<p>
Puede seguir ahora, mucha de la guía estandard de instalación de Gentoo/Linux. 
Asegúrese de que su conexión a Internet funcione (ej: ponga una entrada en 
<path>/etc/resolv.conf)</path>; prepare su sistema de archivos Linux y montelos. 
Descomprima los archivos fuente en <path>/mnt/gentoo</path> - note que si quiere 
obtener una fuente actualizada ahora, wget está disponible, monte proc, copie el 
archivo <path>/etc/resolv.conf</path> y active <c>chroot</c>.</p>
<p>
Ahora puede ejecutar <c>emerge rsync</c>, pero primero compruebe <path>/etc/make.conf</path> - 
coloque SYNC en rsync://rsync.gentoo.org/gentoo-portage. Está listo para preparar 
el sistema de arranque (bootstrap) y el systema de emerge (emerge system).</p>
<note>Recomiendo altamente tener a mano todas las fuentes antes de comenzar: antes de 
realizar el bootstrap, usted debe cargar <c>emerge --fetchonly</c> baselayout, gcc, glibc,
binutils y gettext. Antes de <c>emerge system</c>, <c>emerge --fetchonly system</c>.
</note>
<impo>Muchos Macs no tienen el botón para expulsar el CD, y la tecla [eject] en el 
teclado no funcionará en Linux (hasta que la configure luego). La imagen de arranque 
le permitirá efectuar el comando <c>eject -r</c> para sacar el CD.  Una vez que haya 
arrancado y copiado ó descomprimido todo lo que necesita a su partición Linux, ya no 
necesita el CD. Si quiere usar otro CD, quizás para algún archivo fuente actualizado 
ó para usar fuentes de programas ("distfiles") descargados desde una conexión más rápida, 
sencillamente desmonte el CD de arranque (si lo tiene montado), tipee <c>eject -r</c>, 
e inserte el otro CD.  Una vez que pueda emerger programas, ejecute <c>emerge eject</c> 
para estar seguro que que posee este comando habilitado. Vea las instrucciones en la guía 
principal de instalación de como redirigir en Portage los archivos de distribución (distfiles) 
desde el CD.</impo>
<note>Asegúrese que <path>/etc/make.conf</path> tenga la configuración correcta para PPC.
Este probablemente debería tener un enlace a <path>/usr/portage/profiles/default-ppc</path>.</note>
</body>
</section></chapter>

<chapter>
<title>Configurando su sistema</title>
<section>
<body>
<p>
La mayor diferencia que observará frente a la instalación de Gentoo Linux en una plataforma x86 
es el sistema de arranque, Yaboot (a menos que necesite BootX - ver arriba).
Es muy parecido a lilo: la configuración va en <path>/etc/yaboot.conf</path> - aquí está el 
mío:</p>
<pre>
## /etc/yaboot.conf
##
## ejecute: "man yaboot.conf" para detalles. No haga cambios hasta que los necesite!!
## ver también: /usr/share/doc/yaboot/examples para ejemplos de configuraciones.
##
## Para menú de arranque dual, agregue una ó más de:
## bsd=/dev/hdaX, macos=/dev/hdaY, macosx=/dev/hdaZ

## nuestra partición de arranque:
boot=/dev/hda9

##hd: es el FirmWare para hda
device=hd:
partition=11

root=/dev/hda11
delay=5
defaultos=macosx
timeout=30
install=/usr/lib/yaboot/yaboot
magicboot=/usr/lib/yaboot/ofboot

#################
## Esta sección puede ser duplicada si tiene más de un núcleo ó secciones
## de opciones de arranque
#################
image=/boot/vmlinux
	label=Linux
	read-only
##################

macos=/dev/hda13
macosx=/dev/hda12
enablecdboot
enableofboot
</pre>

<p>Una vez que <path>yaboot.conf</path> ha sido configurado a su gusto, debe ejecutar 
<c>mkofboot -v</c> para instalar dicha configuración en la partición de arranque.  
No olvide esto! Si todo vá bien, y si tiene las mismas opciones mías, su próxima 
arrancada le mostrará un menú simple de cinco entradas. Si después actualiza la 
configuración de su archivo de Yaboot, solamente necesitará ejecutar <c>ybin</c> 
para actualizar su partición de arranque - mkofboot se usa solamente para la 
configuración inicial.
</p>

<note>
Yaboot posee algúna funcionalidad para configuraciones al momento del arranque, de 
manera que es bueno que haga una consulta en <uri>http://penguinppc.org/projects/yaboot</uri> 
para más información.
</note>

<p>Tanto para configurar como para compilar su núcleo, la configuración por omisión 
que obtiene con las fuentes de gentoo PPC, poseerá las partes más importantes ya 
preestablecidas. Existen usualmente muy pocos manejadores alternativos para los 
dispositivos Mac, y los necesarios estaran casi siempre preseleccionados. Aún así, 
utilice la opción de ayuda 'help' en <c>make menuconfig</c> si tiene dudas. 
Note que tendrá problemas costruyendo la bzImage. Ajustese a <c>make vmlinux</c> 
mientras no sepa que está haciendo. En otras palabras, después de configurar el núcleo, 
haga esto:</p>
<pre>
# make dep; make clean; make vmlinux; make modules; make modules_install
<codenote>la imágen del núcleo se encontrará en el directorio /usr/src/linux</codenote>
# cp vmlinux /boot
# cp System.map /boot
</pre>
<impo>Para instalar la versión de las fuentes del núcleo para PPC
tendrá que ejecutar: 
emerge <i>sys-kernel/ppc-sources</i>.
Actualmente es el único paquete del núcleo para PPC - el cual al contrario de la 
versión para plataformas x86 posee un parche para XFS.</impo>
<note>Si quiere saber quien es Ben, vaya a  <uri>http://penguinppc.org/~benh</uri>
ó <uri>http://ppckernel.org</uri>.  El es que mantiene el núcleo para PPC, y muchos 
usuarios de Linux PPC usan las fuentes desde su árbol de archivos, y no del de kernel.org.
</note>

<p>Otra peculiaridad con PPC es su dificultad en configurar XFree.
Primero, si quiere 
efectuar síntesis directa de imagenes con una tarjeta de video, trate de cargar el módulo 
del núcleo apropiado antes que nada. Segundo, recientemente he tenido suerte ejecutando 
<c>XFree86 --configure</c>; y ahora tenemos un ebuild solamente para el Xautoconfig de PPC 
(<c>emerge x11-misc/Xautoconfig</c>).  Aún así, lo que uno piensa que el programa de 
configuración deba trabajar, quizás no es así. A propósito, su mouse USB probablemente 
sea <path>/dev/input/mice</path>. Si no conoce que periféricos (ej: tarjeta de video) posee, 
trate de localizarlas a través de pci-utils, y luego ejecute el comando  <c>lspci</c>.  
Este podría mostrarle detalles relevantes.</p>

<note>
"Option" "UseFBdev" es su amigo :-)
</note>

<p>Configurar <i>sonido</i> para Linux en Mac es también todo un arte, pero se puede realizar.  
Cargue los módulos en <path>kernel/drivers/sound</path> (<i>soundcore</i> y <i>dmasound_pmac</i>), 
instale un mezclador (ej. aumix), juegue con este un rato. Note que en KDE, necesitará decirle 
al servidor de sonido que use OSS (Open Sound System) con solamente 8-bit. Si quiere probar con
Alsa, el controlador adecuado es <i>snd-card-awacs</i>, pero aún así
necesitara soundcore (núcleo) 
y snd (alsa) cargados primero. Para usar Alsa en KDE, también cargue los módulos compatible de 
alsa-oss (snd-pcm, snd-pcm-plugin, snd-pcm-oss, snd-mixer-oss) y digale al servidor de sonido 
de Alsa que use OSS, no Alsa (sí, realmente). Esto aplica para Alsa 0.5 y podría cambiar se 
actualice a Alsa 0.9.</p>
<note>Si usted compila dmasound dentro del núcleo, no podrá descargarlo de memoria para probar 
Alsa (compilelo como módulo).</note>


<p>Si quiere accesar sus particiones hfs+ chequee las herramientas <i>hfsplus</i> mencionadas 
en el sitio web penguinppc, y el componente kde <i>kio-mac</i> - Aún no las he probado, pero se 
supone que deben permitirle leer sus particiones Mac con Konqueror. Pronto tendremos los ebuilds.
</p>

<p>Otra poderosa herramienta para Linux PPC es <i>MOL</i> (Mac on Linux).  Si posee algúna 
partición con OS9 ó menor, usted podría correr ese sistema a velocidad nativa <i>dentro</i> 
de Linux.  La configuración podría ser un poco truculenta, pero el resultado es increible. 
Para instalar, sencillamente typee <c>emerge mol</c>.  Ahora podrá correr Photoshop ó ver 
animaciones en Flash y Shockwave en la web, sin necesidad de rearrancar su sistema :-).
</p>

<p>Bueno, eso es todo.  Todo funciona muy bien ahora, pero mientras más personas lo 
prueben, mejor será. Si quiere probar manualmente un ebuild para arquitectura independiente, 
chequee en <path>/usr/portage/media-sound/mpg123/mpg123r-r1.ebuild</path>.  Note también 
que cualquier ebuild que descargue archivos binarios, pueda estar roto, a menos que el autor 
haya incluido archivos binarios alternos para PPC.  (ver nuevos ebuilds <path>xanim</path>)
</p>
<note>Un consejo rápido: la cónsola Linux no se auto posiciona bien en la pantalla de mi 
iMac (DV400/2000):  <c>fbset -move right</c> arregló el problema.
</note>
</body>
</section>
</chapter>

<chapter>
<title>Solución de Problemas con BootX</title>
<section>
<body>
<p>Algunas notas seleccionadas de la lista de correo:</p>
<ul>
<li>Si obtiene errores tratando de arrancar desde BootX, apague las extensiones y/o memoria virtual 
cuando arranque MacOS</li>
<li>Instalación con BootX (cortesia de Gerk):
<ol>
<li> Descomprima el archivo BootX_1.2.2.sit desde el CD a un sitio
conocido de su disco duro.</li>
<li> Copie el archivo vmlinux desde la carpeta /boot del CD de Gentoo hacia la carpeta Linux Kernels 
ubicada dentro de la carpeta de BootX que acaba de descomprimir en el disco duro</li>
<li> Copie el archivo initrd.img desde la carpeta /boot del CD de Gentoo en la carpeta de BootX</li>
<li> Haga doble click en BootX App</li>
<li> Haga Click en el botón 'options' y luego seleccione el archivo initrd.img que acaba de copiar como su ramdisk</li>
<li> Haga Click en ok</li>
<li> Coloque el tamaño de ramdisk en 24000</li>
<li> Agregue el siguiente texto en la ventana de argumentos del núcleo: rw</li>
<li> Haga Click en el botón Linux e inicie la instalación (opcionalmente seleccione: save prefs)</li>
</ol></li>
<li>Si la imagen initrd de ramdisk continua montandose como solo-lectura (read-only), puede re-montarla 
de escritura-lectura (read-write) así:
<c>#mount /dev/root / -o remount,rw</c></li>
<li>Muchos comandos en el initrd son enlaces hacia busybox.  Si le sale el error "command not found", 
el enlace se ha perdido - sencillamente re-monte como rw (si es necesario) y construya el enlace usted mismo.</li>
<li>El sitio web de SUSE mostrado más abajo, puede ser especialmente útil para problemas relacionados con BootX</li>
</ul>

</body>
</section>
</chapter>

<chapter>
<title>  Recursos</title>
<section>
<body>

<ul>
<li>
Instalando Debian en una iBook: 
	<ol>
	<li><uri>http://people.debian.org/~branden/ibook.html</uri></li>
 	<li><uri>http://www.oreillynet.com/pub/a/mac/2002/03/29/ibook_linux.html</uri></li>
	</ol>
</li>

<li>
Mucha, pero mucha y muy buena información en <uri
link="http://tuxppc.org/">tuxppc</uri> (incluye un muy útil <uri link="http://forums.tuxppc.org/">foro</uri>)
</li>

<li>
<uri link="http://penguinppc.org/">penguinppc</uri>
</li>

<li>
<uri link="http://sdb.suse.de/sdb/en/html/keylist.PPC.html">SUSE Linux Knowledgebase</uri>
Artículos acerca de PPC (útiles para resolver problemas).
</li>

<li>Lista de <uri link="http://www.debian.org/ports/powerpc/inst/install">dispositivos soportados</uri> 
en Debian para PPC.  GentooPPC podría soportar las mismas máquinas, en la práctica, probablemente 
nos tome un cierto tiempo poner juntos un disco de arranque que trabaje para cualquier persona.
</li>

<li>
<uri link="http://lists.debian.org/debian-powerpc/">Archivos de la Lista de correo</uri> Para usuarios de PPC Debian.
</li>

<li>
Linux en PowerPC <uri link="http://lppcfom.sourceforge.net/">FAQ-O-Matic</uri> (desactualizada,
pero aún útil, especialmente para máquinas viejas).
</li>

<li>
<uri link="http://ppckernel.org/">ppckernel</uri>
</li>

<li>
<uri link="http://www.maconlinux.net/">Mac-on-Linux</uri>
</li>

<li>
<uri link="http://www.gentoo.org/doc/build-es.html">Guía de Instalación de Gentoo Linux en x86</uri>
</li>

<li>
<uri link="http://www.netneurotic.net/mac/openfirmware.html">Guía Open Firmware 
</uri>
</li>

<li>
<uri link="http://www.info.apple.com/support/manuals.html">Manuales para Apple</uri>
</li>

</ul>

</body>
</section>
</chapter>

</guide>

