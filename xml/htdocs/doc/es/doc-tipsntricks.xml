<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/Attic/doc-tipsntricks.xml,v 1.7 2004/12/20 14:04:27 chiguire Exp $ -->

<guide link="/doc/es/doc-tipsntricks.xml">
<title>Desarrollo de documentación. Trucos y consejos</title>
<author title="Author">
    <mail link="swift@gentoo.org">Sven Vermeulen</mail>
</author>
<author title="Editor">
    <mail link="neysx@gentoo.org">Xavier Neys</mail>
</author>
<author title="Editor-Es">
    <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Editor Adjunto Es">
    <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
</author>
<author title="Traductora">
    <mail link="thenewkrispowa@hotmail.com">Cristina Aguilar</mail>
</author>
<author title="Traductor">
    <mail link="yoswink@gmail.com">José Luis Rivero</mail>
</author>


<abstract>
Algunos trucos y consejos hacen más fácil (o más miserable) la vida a los 
desarrolladores de documentación de Gentoo. 
</abstract>

<license/>

<version>0.12</version>
<date>2004-12-20</date>

<chapter>
<title>Instalando su entorno local</title>
<section>
<title>Entorno local para contribuidores</title>
<body>

<p>
Cree un directorio con el único propósito de albergar el desarrollo de 
documentación. Como ejemplo, tomaremos <path>~/work/gentoo/doc</path>. 
Dentro de este directorio, cree un subdirectorio en el que mantendrá 
(actualizada) la documentación en inglés (por ejemplo, <path>en/</path>).
</p>

<p>
Descargue el tarball con la documentación en inglés más reciente:
</p>

<pre caption="Descargando la documentación en inglés">
# <i>wget http://www.gentoo.org/dyn/doc-snapshots/docs-latest-en.tar.bz2</i>
</pre>

<p>
Descomprima la documentación en el directorio <path>en/</path>. Ahora tendrá 
una imagen actualizada de la documentación en inglés. Cada vez que quiera 
actualizar su imagen, puede descargar el tarball de nuevo, pero también puede 
navegar por el documento y añadir <path>?passthru=1</path> a la URL. 
Por ejemplo:
</p>

<pre caption="Actualizando un documento en inglés">
# <i>wget http://www.gentoo.org/doc/en/alsa-guide.xml?passthru=1 -O alsa-guide.xml</i>
</pre>

<p>
En caso de que usted desee ayudar a traducir documentos, cree un directorio 
para su idioma en el que conservará las, en ese momento, actuales traducciones:
</p>

<pre caption="Descargando la imagen de su idioma">
# <i>mkdir </i><comment>${LANG}</comment>
# <i>cd </i><comment>${LANG}</comment>
# <i>wget http://www.gentoo.org/dyn/doc-snapshots/docs-latest-</i><comment>${LANG}</comment><i>.tar.bz2</i>
# <i>tar xvjf docs-latest-*.tar.bz2</i>
</pre>

<p>
Cuando actualice un documento, copie siempre primero su documento desde  
<path>${LANG}/</path>, al directorio raíz (<path>~/work/gentoo/doc</path>)
después ajuste la versión copiada. Necesita conservar el original para crear 
un parche:
</p>

<pre caption="Creando un parche para una actualización">
# <i>diff -uNt </i><comment>${LANG}</comment><i>/alsa-guide.xml alsa-guide.xml</i> > alsa-guide.diff
</pre>

</body>
</section>
<section>
<title>Repositorio CVS en línea</title>
<body>

<p>
Usted puede consultar su <uri link="/cgi-bin/viewcvs.cgi">repositorio CVS 
en línea</uri>  para observar las diferencias entre versiones individuales. 
El repositorio principal en inglés está <uri 
link="/cgi-bin/viewcvs.cgi/en/?root=doc&amp;sortby=date">totalmente 
disponible.</uri> Además, el repositorio CVS se actualiza cada hora.
</p>

</body>
</section>
<section>
<title>Repositorio local para desarrolladores</title>
<body>

<p>
Cree un directorio de trabajo destinado a Gentoo; por ejemplo 
<path>~/work/gentoo/doc</path>. Después cree un subdirectorio llamado  
<path>cvs/</path> en el que pondrá la imagen del CVS:
</p>

<pre caption="Obteniendo la imagen del CVS">
# <i>mkdir cvs; cd cvs/</i>
# <i>export CVSROOT=</i><comment>&lt;tu apodo&gt;</comment><i>@cvs.gentoo.org:/var/cvsroot</i>
# <i>cvs co doc</i>
</pre>

<p>
Para actualizar la imagen del CVS, ejecute <c>cvs update -dP</c> 
en el directorio <path>cvs/doc</path>.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Probando la Guía XML</title>
<section>
<title>Entorno de pruebas</title>
<body>

<p>
Cree primero un directorio <path>test/</path> en el cual pondrá 
<path>guide.dtd</path>, <path>main.css</path> y algunas imágenes:
</p>

<pre caption="Creando el entorno de desarrollo">
# <i>mkdir test</i>
# <i>cd test</i>
# <i>mkdir dtd css images</i>
# <i>wget -P dtd/ http://www.gentoo.org/dtd/guide.dtd</i>
# <i>wget -P dtd/ http://www.gentoo.org/dtd/book.dtd</i>
# <i>wget -P css/ http://www.gentoo.org/css/main.css</i>
# <i>wget -P images/ http://www.gentoo.org/images/gbot-s.gif \
  http://www.gentoo.org/images/gridtest.gif \
  http://www.gentoo.org/images/gtop-s.jpg \
  http://www.gentoo.org/images/line.gif \
  http://www.gentoo.org/images/netraverse-gentoo.gif</i>
</pre>

<p>
Ahora descargue una versión especial de <path>guide.xsl</path> disponible en 
<uri link="http://dev.gentoo.org/~swift/local/guide.xsl">el sitio web SwifT
</uri>. Esta versión está adaptada para transformar la Guía XML en HTML en 
sistemas locales.
</p>

<pre caption="Descargando guide.xsl">
# <i>wget http://dev.gentoo.org/~swift/local/guide.xsl</i>
</pre>

<p>
Finalmente, edite <path>/etc/xml/catalog</path> y añada la siguiente línea:
</p>

<pre caption="/etc/xml/catalog addendum">
&lt;rewriteURI uriStartString="/dtd" rewritePrefix="<i>/ruta/al/dirdtd</i>"/&gt;
</pre>

<p>
Por supuesto, sustituya <c>/ruta/al/dirdtd</c> por la ruta de la localización 
donde ha descargado los archivos <path>guide.dtd</path> y 
<path>book.dtd</path>.
</p>

</body>
</section>
<section>
<title>Probando una Guía de Gentoo</title>
<body>

<p>
Para probar una Guía de Gentoo, primero compruebe si usa correctamente XML:
</p>

<pre caption="Usando xmllint para verificar guías">
# <i>xmllint --valid --noout alsa-guide.xml</i>
</pre>

<p>
Si <c>xmllint</c> finaliza sin mostrar nada, entonces el archivo no tiene 
errores (o al menos los que conciernen a etiquetas XML). A continuación, 
necesitará convertirlo a HTML. <c>xsltproc</c> es la herramienta que se 
necesita para ello:
</p>

<pre caption="Convirtiendo a HTML">
# <i>xsltproc --novalid test/guide.xsl alsa-guide.xml &gt; test/alsa-guide.html</i>
</pre>

<p>
Si no se muestran errores, debería poder abrir en su navegador el archivo 
<uri>file:///home/user/work/gentoo/doc/test/alsa-guide.html</uri> para ver el 
documento resultante. Si no, ajuste su guía hasta que funcione.
</p>

</body>
</section>
<section>
<title>Probando el Handbook de Gentoo</title>
<body>

<p>
<!-- Ojo que esto es para el nuevo formato de handbook -->
El Handbook de Gentoo se divide en capítulos. Para abrir un capítulo concreto, 
debe utilizar tanto el archivo <path>handbook-x86.xml</path>, como el archivo 
<path>hb-</path> requerido (como <path>hb-install-about.xml</path>). Entonces 
deberá pasar a <c>xsltproc</c> los mismos parámetros que ha empleado cuando 
navegaba por el manual en línea, nombrándolos <c>part</c> y <c>chap.</c> 
Por ejemplo, para validar <path>hb-install-about.xml</path>:
</p>

<pre caption="Validando hb-install-about.xml">
# <i>xmllint --valid --noout handbook-x86.xml</i>
# <i>xmllint --valid --noout hb-install-about.xml</i>
# <i>xsltproc --stringparam part 1 --stringparam chap 1 test/guide.xsl handbook-x86.xml &gt; test/hb-install-about.html</i>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Utilizando una configuración con axkit</title>
<section>
<body>

<p>
Algunos desarrolladores de documentación prefieren utilizar una configuración 
con axkit similar a la empleada en  <uri>http://www.gentoo.org</uri>. Aquí hay 
algunas pistas para ayudarle a elaborar una configuración similar.
</p>

<warn>
Parece que axkit es muy sensible a las versiones de los paquetes que usa, 
especialmente libxml2. La configuración descrita abajo se sabe que funciona. 
Cualquier otra combinación de paquetes podría fallar.
</warn>

<p>
Primero, instale los paquetes requeridos:
</p>

<pre caption="emergiendo las versiones específicas de los paquetes requeridos">
<comment>(Compruebe si los paquetes están disponibles en portage)</comment>
# <i>emerge -vp =libxml2-2.5.8 =libxslt-1.0.33 =AxKit-1.6.1 =XML-XPath-1.13 \
 =XML-LibXML-1.54-r1 =XML-LibXSLT-1.53 =XML-Parser-2.31-r1 =apache-1.3.29-r1</i>

These are the packages that I would merge, in order:

Calculating dependencies ...done!
[ebuild   R   ] dev-libs/libxml2-2.5.8  -ipv6 +python +readline  0 kB 
[ebuild   R   ] dev-libs/libxslt-1.0.33  +python  0 kB 
[ebuild   R   ] dev-perl/AxKit-1.6.1  +gnome  0 kB 
[ebuild   R   ] dev-perl/XML-XPath-1.13   0 kB 
[ebuild   R   ] dev-perl/XML-LibXML-1.54-r1   0 kB 
[ebuild   R   ] dev-perl/XML-LibXSLT-1.53   0 kB 
[ebuild   R   ] dev-perl/XML-Parser-2.31-r1   0 kB
[ebuild   R   ] net-www/apache-1.3.29-r1  +pam  0 kB

<comment>(Instalando paquetes)</comment>
# <i>emerge -v =libxml2-2.5.8 =libxslt-1.0.33 =AxKit-1.6.1 =XML-XPath-1.13 \
 =XML-LibXML-1.54-r1 =XML-LibXSLT-1.53 =XML-Parser-2.31-r1 =apache-1.3.29-r1</i>
</pre>

<p>
Entonces, edite los siguientes archivos de configuración:
</p>

<pre caption="/etc/apache/conf/commonapache.conf">
<comment>(Dentro)</comment>
&lt;IfModule mod_dir.c&gt;
  <comment>(Añada index.xml a la lista)</comment>
  DirectoryIndex index.xml index.html index.php index.php3 index.shtml index.cgi index.pl index.htm Default.htm default.htm
&lt;/IfModule&gt;

<comment>(Añada las siguientes líneas)</comment>
&lt;IfDefine PERL&gt;
  LoadModule perl_module extramodules/libperl.so
#  AddModule mod_perl.c
  PerlModule AxKit
  SetHandler perl-script
  PerlHandler Apache::AxKit::StyleChooser::PathInfo AxKit
  AddHandler axkit .xml .xsp
  AxAddPlugin Apache::AxKit::StyleChooser::QueryString
  AxAddXSPTaglib AxKit::XSP::Util
  AxAddXSPTaglib AxKit::XSP::IfParam
  AxAddXSPTaglib AxKit::XSP::Param
  AxAddStyleMap application/x-xsp Apache::AxKit::Language::XSP
  AxAddStyleMap text/xsl Apache::AxKit::Language::LibXSLT
  &lt;AxStyleName "#default"&gt;
    AxAddProcessor text/xsl /xsl/guide.xsl
  &lt;/AxStyleName&gt;
  &lt;AxStyleName printable&gt;
    AxAddProcessor text/xsl /xsl/guide-print.xsl
  &lt;/AxStyleName&gt;
&lt;/IfDefine&gt;

<comment>(Dentro)</comment>
&lt;IfModule mod_alias.c&gt;
    Alias /icons/ /var/www/localhost/icons/
<comment>(Descomente la siguiente línea)</comment>
    #Alias /doc /usr/share/doc
</pre>

<pre caption="/etc/conf.d/apache">
<comment>(Añada -D PERL a la lista de opciones)</comment>
APACHE_OPTS="-D PERL"
</pre>
  

<p>
Después, copie los archivos de documentación incluyendo los DTDs y  las hojas 
de estilo a <path>/var/www/localhost/htdocs/</path>.Necesita los directorios 
<path>css/</path>, <path>doc/</path>, <path>dtd/</path>, <path>images/</path> 
y <path>xsl/</path>. Los desarrolladores de Gentoo pueden copiar desde los 
enlaces simbólicos a su copia de CVS local. Otros contribuidores necesitarán 
descargar los archivos de nuestro interfaz <uri
link="http://www.gentoo.org/cgi-bin/viewcvs.cgi/xml/htdocs/?root=gentoo">viewCVS</uri>.
</p>

<p>
Todo lo que queda por hacer es arrancar el servidor apache con:
</p>

<pre caption="Ejecutando apache">
# <i>/etc/init.d/apache start</i>
# <comment>(Añádalo a su nivel de ejecución si quiere que comience automáticamente al arrancar el sistema)</comment>
# <i>rc-update add apache default</i>
</pre>

<p>
Abra ahora en su navegador <uri>http://your_server/doc/en/</uri> o simplemente 
<uri>http://localhost/doc/en/</uri> si ha instalado axkit en su ordenador. 
Puede comprobar <path>/var/log/apache/access_log</path> para accesos y 
<path>/var/log/apache/error_log</path> para errores.
</p>

<note>
Los usuarios de Mozilla podrían necesitar poner <c>keyword.enabled</c> a false 
en su página <uri>about:config</uri> cuando estén usando localhost.
</note>

</body>
</section>
</chapter>


<chapter>
<title>Preguntas de uso frequente</title>
<section>
<title>¿Como convierto un archivo a UTF-8?</title>
<body>
        
<p>
Hay unas cuantas herramientas para ayudarle. Una popular es
<c>app-text/recode</c>. Otra es <c>iconv</c>, que forma parte 
de <c>sys-libs/glibc</c>.
</p>
 
 <p>
El empleo de recode es bastante sencillo. Le indicas que codificación está 
utilizando el documento actual y a que codificación quieres convertir el 
documento.
</p>
 
 <p>
Por ejemplo, para convertir un documento de ISO-8859-15 (tambíen llamada 
Latin-9) a UTF-8, puede usar:
 </p>
 
<pre caption="Recodificacndo un archivo">
<comment>(l9 = ISO-8859-15, u8 = UTF-8)</comment>
$ <i>recode l9..u8 file.xml</i>
</pre>
 
 </body>
 </section>
 </chapter>
         

<chapter>
<title>Errores peligrosos o comunes</title>
<section>
<title>Olvidarse de todos los aspectos de arquitectura del Manual de Gentoo (Handbook)</title>
<body>
  	 
<p>
Los archivos en <path>[gentoo]/xml/htdocs/doc/en/handbook</path> que no 
terminen con el sufijo &quot;-&lt;arch&gt;.xml&quot; son leidos por <e>todos</e> los manuales (handbooks),
lo cual significa que cualquier cosa que contenga será multi-arquitectura
</p>
  	 
  <p>
Si necesita hacer modificaciones que afecten a una arquitectura en particular y teme
necesitar situarlas en ese archivo, puede preguntar como solucionarlo en 
<c>gentoo-doc@gentoo.org</c>. A veces existe la manera sin ser demasiado compleja
para usuarios de otras arquitecturas.
</p>
  	 
 </body>
 </section>
 <section>
 <title>No saltar de versión/fecha</title>
 <body>
  	 
<p>
De acuerdo con la política, <e>debe</e> saltar (avanzar) de versión/fecha 
cuando se produzcan cambios. Aunque la versión es menos importante 
(SwifT te matará si se te olvida) la fecha indica a nuestros usuarios cuando
el documento ha sido actualizado por última vez.
</p>
  	 
 </body>
 </section>
 </chapter>

</guide>
