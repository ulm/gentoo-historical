<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/gentoo-upgrading.xml,v 1.1 2005/04/12 20:12:03 chiguire Exp $ -->

<guide link="/doc/es/gentoo-upgrading.xml" lang="es">
<title>Guía de actualización de Gentoo</title>

<author title="Autor">
  <mail link="greg_g@gentoo.org">Gregorio Guidi</mail>
</author>
<author title="Editor Es">
    <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Editor Es">
    <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
 </author>
<author title="Editor Es">
    <mail link="yoswink@gentoo.org">José Luis Rivero</mail>
 </author>
<author title="Traductor">
  <mail link="enrique@barbeito.org">Enrique Barbeito García</mail>
</author>

<abstract>
Este documento explica cómo las nuevas versiones de Gentoo afectan a instalaciones existentes.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.0 -->
<license/>

<version>2.11</version>
<date>2005-03-29</date>

<chapter>
<title>Gentoo y las actualizaciones</title>
<section>
<title>Filosofía</title>
<body>

<p>
Aquí en la tierra de Gentoo, el concepto de actualización es muy distinto
comparado al resto del mundo Linux. Probablemente ya sepa que nosotros no nos
familiarizamos con el modo "clásico" de actualizar software: esperar una nueva
versión, descargarla, grabarla, ponerla en el CDROM y luego seguir las
instrucciones de actualización.
</p>

<p>
Ya conoce (siendo un usuario de Gentoo después de todo) que este proceso es
extremadamente frustrante para aquellos usuarios avanzados que quieren tener su
sistema siempre a la última. Seguramente incluso usuarios avanzados de otras
distribuciones tengan la misma sensación, dada la popularidad y expansión de
herramientas como apt o apt-rpm que hacen posible disponer de actualizaciones
de forma rápida y frecuente. Sin embargo, ninguna distribución es más adecuada
que Gentoo para satisfacer a este tipo de usuarios exigentes. Desde el
principio Gentoo fue diseñada en torno al concepto de actualizaciones rápidas y
graduales.
</p>

<p>
Lo ideal sería que instale una sola vez y no preocuparse de futuras versiones:
solo seguir las instrucciones de la <uri
link="/doc/es/handbook/handbook-x86.xml?part=2&amp;chap=1">Introducción al
sistema Portage</uri> del <uri link="/doc/es/handbook/">Manual Gentoo</uri> que
explica cómo mantener su sistema al día. Aunque esa es la forma con la que
normalmente funcionan las cosas, a veces los cambios se hacen en los paquetes
base del sistema los cuales requieren de una actualización manual.
</p>

</body>
</section>
<section>
<title>Versiones y perfiles</title>
<body>

<p>
Una pregunta que se repite sobre el proceso de publicación de versiones de
Gentoo es: "¿Por qué aparecen nuevas versiones con frecuencia si no están
pensadas para ofrecer a sus usuarios la actualización del software?". Hay
varias razones:
</p>

<ul>
  <li>
    Una nueva versión supone nuevos LiveCDs con errores arreglados y nuevas
    funcionalidades.
  </li>
  <li>
    Una nueva versión proporciona un conjunto actualizado de paquetes GRP, por
    lo que aquellos usuarios que elijan "el modo rápido" de instalación (stage3
    + paquetes precompilados) terminarán con un sistema que no está pasado de
    moda.
  </li>
  <li>
    Por último, una nueva versión puede, de cuando en cuando, implementar
    algunas funcionalidades que no eran compatibles en versiones anteriores.
  </li>
</ul>

<p>
Cuando una versión incluye nuevas funcionalidades anteriormente incompatibles o
proporciona una serie de paquetes y configuraciones críticas que modifican
intensamente el comportamiento del sistema, decimos que dicha versión ofrece
un nuevo <e>perfil</e>.
</p>

<p>
Un <e>profile</e> es una serie de ficheros de configuración almacenados en un
subdirectorio dentro de <path>/usr/portage/profiles</path>. Éstos definen cosas
como, por ejemplo, los ebuilds que están considerados como paquetes
<e>system</e>, los parámetros USE por defecto, el mapeo por defecto de los
los paquetes virtuales y la arquitectura en la que se ejecuta el sistema.
</p>

<p>
El perfil en uso se determina por el enlace simbólico
<path>/etc/make.profile</path> el cual apunta a un subdirectorio dentro de
<path>/usr/portage/profiles</path> en donde se almacenan todos los perfiles.
Por ejemplo, el perfil por defecto de la versión 2005.0 para x86 se puede
encontrar en <path>/usr/portage/profiles/default-linux/x86/2005.0</path>.
Los ficheros del directorio precedente son también parte del perfil (y, por lo
tanto, están compartidos por subperfiles diferentes). Ésta es la razón por la
que los llamamos <e>perfiles en cascada</e>
</p>

<p>
Los perfiles anticuados se guardan en <path>/usr/portage/profiles</path> junto
con los actuales pero marcados como obsoletos. Cuando eso sucede, se añade un
fichero llamado <path>deprecated</path> dentro del directorio del perfil
obsoleto. El contenido de este fichero es el nombre del perfil al cual debería
actualizarse; portage emplea esta información para avisarle automáticamente
cuando tenga que actualizar a un nuevo perfil.
</p>

<p>
Hay varias razones por la que se puede crear un perfil nuevo: la publicación de
nuevas versiones de paquetes principales (como <c>baselayout</c>, <c>gcc</c>, o
<c>glibc</c>) que son incompatibles con versiones previas, un cambio en los
parámetros USE por defecto o en la relación entre los paquetes virtuales y los
paquetes utilizados, o tal vez un cambio en la configuración principal del
sistema (como, por ejemplo, definir udev para que sea por defecto el gestor de
<path>/dev</path> en vez de devfs).
</p>
</body>
</section>
</chapter>

<chapter>
<title>Mantenerse al día con nuevas versiones</title>
<section>
<title>Versiones sin cambios de perfil</title>
<body>

<p>
Si se anuncia una nueva versión de Gentoo que no incluya un nuevo perfil, puede
entonces fingir lo ocurrido y como si nunca hubiera pasado :).
</p>

<p>
Si actualiza sus paquetes instalados
<uri link="/doc/es/handbook/handbook-x86.xml?part=2&amp;chap=1">como se explica
en el Manual Gentoo</uri>, su sistema quedará exactamente igual que si hubiera
reinstalado utilizando una nueva versión.
</p>
</body>
</section>

<section>
<title>Versiones con cambios de perfil</title>
<body>

<p>
Si una nueva versión (como por ejemplo 2005.0) añade un perfil nuevo, tiene la
posibilidad de migrar a este nuevo perfil.
</p>

<p>
Por supuesto, no está obligado a hacerlo; puede continuar utilizando el antiguo
perfil y actualizar sólo sus paquetes
<uri link="/doc/es/handbook/handbook-x86.xml?part=2&amp;chap=1">como se explica
en el Manual Gentoo</uri>.
</p>

<p>
Sin embargo, Gentoo recomienda encarecidamente la actualización del perfil si
éste llegara a quedarse obsoleto. Cuando ésto ocurre, significa que los
desarrolladores de Gentoo no planean soportarlo más. Con la tabla de debajo,
puede comprobar rápidamente qué perfiles están soportados actualmente.
</p>

<p>
Si decide migrar al nuevo perfil, tendrá que realizar la actualización de forma
manual. El modo de actualizar puede variar significativamente entre una versión
y otra; depende del nivel de importancia de las modificaciones introducidas en
el nuevo perfil.
</p>

<p>
En el más simple de los casos, sólo tendrá que cambiar el enlace simbólico
<path>/etc/make.profile</path>. En el peor de los casos, puede que tenga que
recompilar su sistema desde cero mientras hace un afinado baile vudú. La
migración normalmente está cubierta en las notas de cada nueva versión. También
puede encontrar <uri link="#instructions">instrucciones</uri> al final de esta
guía.
</p>
</body>
</section>

<section>
<title>Perfiles soportados</title>
<body>

<p>
Los siguientes perfiles están soportados oficialmente por desarrolladores de
Gentoo:
</p>

<table>
<tr>
  <th>Arquitectura</th>
  <th>Perfiles más recientes</th>
  <th>Otros perfiles soportados</th>
</tr>
<tr>
  <th>alpha</th>
  <ti>2005.0, 2005.0/2.4</ti>
  <ti>2004.3</ti>
</tr>
<tr>
  <th>arm</th>
  <ti>2005.0</ti>
  <ti>2004.3</ti>
</tr>
<tr>
  <th>amd64</th>
  <ti>2005.0, 2005.0/no-multilib</ti>
  <ti>2004.3</ti>
</tr>
<tr>
  <th>hppa</th>
  <ti>2005.0, 2005.0/2.4</ti>
  <ti>2004.3, 2004.2</ti>
</tr>
<tr>
  <th>ia64</th>
  <ti>2005.0</ti>
  <ti></ti>
</tr>
<tr>
  <th>ppc</th>
  <ti>2005.0</ti>
  <ti>2004.3, 2004.0</ti>
</tr>
<tr>
  <th>mips</th>
  <ti>2005.0</ti>
  <ti>2004.2</ti>
</tr>
<tr>
  <th>s390</th>
  <ti>2005.0</ti>
  <ti>2004.3</ti>
</tr>
<tr>
  <th>sparc</th>
  <ti>2005.0</ti>
  <ti>2004.3, 2004.0</ti>
</tr>
<tr>
  <th>x86</th>
  <ti>2005.0, 2005.0/2.4</ti>
  <ti>2004.3, 2004.2, 2004.0</ti>
</tr>
</table>
</body>
</section>
</chapter>

<chapter id="instructions">
<title>Instrucciones para actualización de perfil</title>
<section>
<title>Actualizar a 2005.0</title>
<body>

<p>
Con la llegada de la versión 2005.0, varias arquitecturas han decidido definir
perfiles adicionales. Asegúrese de leer la descripción de dichos perfiles antes
de decidir migrar a uno de ellos. Ahora la mayoría de arquitecturas también
utilizan por defecto la rama 2.6 del kernel cuando era la 2.4 la que se escogía
anteriormente.
</p>

<p>
Algunas arquitecturas necesitan unas cuantas acciones más para llevar a cabo el
cambio de un perfil a otro. Si es ese el caso, las guías paso-a-paso están
enlazadas desde la siguiente tabla.
</p>

<table>
<tr>
  <th>Perfil</th>
  <th>Descripción</th>
  <th>Guía de actualización específica</th>
</tr>
<tr>
  <ti>default-linux/alpha/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para Alpha con kernels 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/alpha/2005.0/2.4</ti>
  <ti>Perfil 2005.0 por defecto para Alpha con kernels 2.4</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/amd64/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para AMD64 con kernels 2.6</ti>
  <ti>
    <uri
    link="/proj/en/base/amd64/howtos/index.xml?part=1&amp;chap=1#doc_chap1">Actualizar a
    2005.0 (en inglés)</uri>
  </ti>
</tr>
<tr>
  <ti>default-linux/amd64/2005.0/no-multilib</ti>
  <ti>Perfil 2005.0 para AMD64 e instalaciones con multilib desactivado</ti>
  <ti>
    <uri link="/proj/en/base/amd64/howtos/index.xml?part=1&amp;chap=1#doc_chap5">Actualizar a
    2005.0 (en inglés)</uri>
  </ti>
</tr>
<tr>
  <ti>default-linux/arm/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para ARM con kernels 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/hppa/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para HPPA con kernels 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/hppa/2005.0/2.4</ti>
  <ti>Perfil 2005.0 para HPPA con kernels 2.4</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para MIPS</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/cobalt/2005.0</ti>
  <ti>Perfil 2005.0 para Cobalt MIPS</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/mips64/n32/2005.0</ti>
  <ti>Perfil 2005.0 para plataformas MIPS con soporte n32</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/mips64/ip28/2005.0</ti>
  <ti>Perfil 2005.0 específico para Indigo2 Impact 64-bit</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/mips/mips64/2005.0</ti>
  <ti>Perfil 2005.0 para MIPS 64-bit</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/ppc/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para PPC con kernels 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/ppc64/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para PPC64 con kernels 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/s390/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para S390</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/sparc/sparc32/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para Sparc 32-bit</ti>
  <ti></ti>
</tr>
<!-- http://dev.gentoo.org/~dsd/kernel-2.6.htm 
     No subprofiles for sparc
<tr>
  <ti>default-linux/sparc/sparc32/2005.0/2.6</ti>
  <ti>Sparc 32-bit 2005.0 profile for 2.6 kernels</ti>
  <ti></ti>
</tr>
-->
<tr>
  <ti>default-linux/sparc/sparc64/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para Sparc 64-bit</ti>
  <ti></ti>
</tr>
<!-- http://dev.gentoo.org/~dsd/kernel-2.6.htm
     No subprofiles for sparc
<tr>
  <ti>default-linux/sparc/sparc64/2005.0/2.6</ti>
  <ti>Sparc 64-bit 2005.0 profile for 2.6 kernels</ti>
  <ti></ti>
</tr>
-->
<tr>
  <ti>default-linux/x86/2005.0</ti>
  <ti>Perfil 2005.0 por defecto para x86 con kernels 2.6</ti>
  <ti></ti>
</tr>
<tr>
  <ti>default-linux/x86/2005.0/2.4</ti>
  <ti>Perfil 2005.0 para x86 con kernels 2.4</ti>
  <ti></ti>
</tr>
</table>

<p>
Para cambiar al perfil seleccionado, apunte el enlace simbólico
<path>/etc/make.profile</path> a la nueva ubicación. ¡Asegúrese de que su
Portage está actualizado antes de cambiar su perfil!
</p>

<pre caption="Cambiar a un perfil 2005.0">
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/</i>&lt;selected profile&gt;<i> /etc/make.profile</i>
</pre>

<p>
Si está ejecutando un sistema Linux 2.4 y quiere migrar a un kernel 2.6,
asegúrese de leer nuestra <uri link="/doc/es/migration-to-2.6.xml">Guía Gentoo
de migración al kernel Linux 2.6</uri>.
</p>
</body>
</section>

<section>
<title>Actualizar a 2004.3</title>
<body>

<p>
Con la introducción de los perfiles 2004.3, los usuarios no van a ver enormes
modificaciones en sus sistemas (vea los detalles más abajo). Sin embargo, los
desarrolladores de Gentoo decidieron desplazar este nuevo perfil y deshacerse
de un número considerable de otros viejos para acelerar la adopción de los
<e>perfiles en cascada</e>, que no son más que los perfiles que siguen la nueva
distribución del directorio <path>/usr/portage/profiles</path>; por ejemplo
<path>/usr/portage/profiles/default-linux/x86/2004.3</path> (soportado por
Portage 2.0.51 o superior).
</p>

<p>
Para cambiar al perfil 2004.3, apunte el enlace simbólico
<path>/etc/make.profile</path> a la nueva ubicación:
</p>

<warn>
¡¡No se olvide de actualizar Portage <e>antes</e> de cambiar su perfil!!
</warn>

<pre caption="Actualizar el enlace simbólico /etc/make.profile">
<comment>sustituya &lt;arch&gt; por su arquitectura</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-linux/&lt;arch&gt;/2004.3 /etc/make.profile</i>
</pre>

<p>
<b>Para todas las arquitecturas</b> - Como se dijo antes, no hay grandes cambios en
este perfil. Sin embargo, debería observar que <c>sys-apps/slocate</c> y
<c>net-misc/dhcpcd</c> ya no se consideran paquetes del sistema. Ésto significa
que si ejecuta <c>emerge --depclean</c>, Portage intentará eliminarlos de su
sistema. Si necesita alguno de estos paquetes, añádalos al fichero
<path>/var/lib/portage/world</path> después de cambiar el perfil, o instálelos
manualmente con emerge.
</p>

<p>
<b>Para ppc</b> - Ahora es <c>sys-fs/udev</c> el que se emplea por defecto en
las nuevas instalaciones, en vez de <c>sys-fs/devfs</c>. Aunque esto no tiene
efecto en los sistemas ya instalados.
</p>
</body>
</section>

<section>
<title>Actualizar a 2004.2</title>
<body>

<p>
Para cambiar al perfil 2004.2, apunte el enlace simbólico
<path>/etc/make.profile</path> a la nueva ubicación:
</p>

<warn>
¡¡No se olvide de actualizar Portage <e>antes</e> de cambiar su perfil!!
</warn>

<pre caption="Actualizar el enlace simbólico /etc/make.profile">
<comment>sustituya &lt;arch&gt; por su arquitectura</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-linux/&lt;arch&gt;/2004.2 /etc/make.profile</i>
</pre>

<p>
<b>Para x86</b> - Este perfil cambia la implementación X11 de
<c>x11-base/xfree</c> a <c>x11-base/xorg-x11</c>. Este cambio únicamente toca
el valor <e>por defecto</e> y es sólo significativo para aquellos que todavía
no tienen instalado un servidor X. Si ya tiene uno, ésto no le afectará lo más
mínimo; es libre de cambiar de un servidor X a otro de la misma manera que
antes.
</p>

<p>
<b>Para amd64</b> - No hay cambios esenciales desde perfiles anteriores, por lo
que no se necesitan realizar acciones específicas.
</p>
</body>
</section>

<section>
<title>Actualizar a 2004.0</title>
<body>

<p>
Para cambiar al perfil 2004.0, apunte el enlace simbólico
<path>/etc/make.profile</path> a la nueva ubicación:
</p>

<pre caption="Actualizar el enlace simbólico /etc/make.profile">
<comment>sustituya &lt;arch&gt; por su arquitectura</comment>
# <i>rm /etc/make.profile</i>
# <i>ln -s ../usr/portage/profiles/default-&lt;arch&gt;-2004.0 /etc/make.profile</i>
</pre>

<p>
<b>Para todas las arquitecturas</b> - No hay cambios esenciales desde perfiles
anteriores, por lo que no se necesitan realizar acciones específicas.
</p>
</body>
</section>

<section>
<title>Actualizar a 1.4 desde perfiles más viejos que éste</title>
<body>

<p>
Las instrucciones para esta actualización son bastante enrevesadas, puede
encontrarlas <uri link="/doc/es/new-upgrade-to-gentoo-1.4.xml">aquí</uri>.
</p>
</body>
</section>
</chapter>
</guide>
