<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/handbook/hb-portage-files.xml,v 1.5 2006/05/23 14:57:17 chiguire Exp $ -->

<sections>

<version>1.7</version>
<date>2005-06-27</date>

<section>
<title>Ficheros de Portage</title>
<subsection>
<title>Directivas de configuración</title>
<body>

<p>
Portage viene con una configuración predefinida guardada en 
<path>/etc/make.globals</path>. Cuando le eche un vistazo, comprobará que
toda la configuración de Portage se realiza a través de variables. A qué 
variables atiende Portage y que significan se describe un poco después.
</p>

<p>
Como muchas directivas de configuración varían de unas arquitecturas a otras,
Portage también posee algunos archivos de configuración que son parte de 
perfil. Su perfil está apuntado por el enlace simbólico 
<path>/etc/make.profile</path>; las configuraciones de Portage se realizan en 
los archivos <path>make.defaults</path> de su perfil y de todos los perfiles 
padres. Explicaremos algo más sobre perfiles y el directorio 
<path>/etc/make.profile</path> más adelante.
</p>

<p>
Si está pensando en cambiar una variable de configuración, <e>no</e> modifique
<path>/etc/make.globals</path> o <path>make.defaults</path>.  En lugar de
eso utilice <path>/etc/make.conf</path> el cual tiene preferencia sobre los 
archivos anteriores. También encontrará un archivo 
<path>/etc/make.conf.example</path>. Este archivo es meramente un ejemplo
y Portage no lo tendrá en cuenta.
</p>

<p>
También puede definir una variable de configuración para Portage como una
variable de entorno, pero no es recomendable.
</p>

</body>
</subsection>
<subsection>
<title>Información específica del perfil</title>
<body>

<p>
Ya hemos hablado del directorio <path>/etc/make.profile</path>. Bien, 
exactamente no es un directorio pero es un enlace simbólico a un perfil,
por defecto uno perteneciente a <path>/usr/portage/profiles</path> 
también puede crear un perfil en cualquier otro lado y apuntarlo.
El perfil al cual apunta el enlace simbólico será el que tenga en cuenta
su sistema.
</p>

<p>
Un perfil contiene información específica para Portage sobre cada 
arquitectura, tal como una lista de paquetes que pertenecen al 
sistema correspondiente con ese perfil, una lista de paquetes que no 
funcionan (o están enmascarados) para ese perfil, etc.
</p>

</body>
</subsection>
<subsection>
<title>Configuración específica para usuarios</title>
<body>

<p>
Cuando necesite sobreescribir una característica de Portage relativa a la 
instalación de software, necesitará editar los archivos contenidos en 
<path>/etc/portage</path>.¡ Se <e>recomienda encarecidamente</e> que
utilice los archivos pertenecientes a <path>/etc/portage</path> y está  
<e>desaconsejada</e> la sobreescritura de estas características
con variables de entorno.!
</p>

<p>
Dentro de <path>/etc/portage</path> puede crear los siguientes archivos:
</p>

<ul>
  <li>
    <path>package.mask</path> el cual especifica los paquetes que nunca 
    quiere que Portage instale en su sistema.
  </li>
  <li>
    <path>package.unmask</path> especifica los paquetes que quiere instalar
    a pesar de haber sido desaconsejados por los desarrolladores.
  </li>
  <li>
    <path>package.keywords</path> especifica los paquetes que quiere instalar
    a pesar de no haber sido considerados adecuados para su sistema o 
    arquitectura (todavía).
  </li>
  <li>
    <path>package.use</path> especifica la lista de variables USE que quiere 
    utilizar para unos determinados paquetes sin tener que configurar el sistema por
    completo para que use esas variables USE.
  </li>
</ul>

<p>
Más información sobre el directorio <path>/etc/portage</path> y una lista
completa de posibles archivos que puede crear se pueden encontrar en la 
página del man:
</p>

<pre caption="Leyendo la página del manual sobre Portage">
$ <i>man portage</i>
</pre>

</body>
</subsection>
<subsection>
<title>Cambiando el fichero de Portage y el lugar del directorio</title>
<body>

<p>
Los archivos de configuración mencionados anteriormente  no pueden ser 
guardados en ningún otro sitio, Portage siempre los buscará en esos lugares
exactos. Sin embargo, Portage utiliza otras muchos lugares para varios 
propósitos: el directorio de compilación, el lugar donde guardar el código 
fuente, la localización del árbol de Portage, ...
</p>

<p>
Todos estos propósitos tienen unas direcciones predeterminadas muy claras pero
puede cambiarlas por las que más le gusten indicándolo en 
<path>/etc/make.conf</path>. El resto de este capítulo explica los lugares destinados
a un propósito especial que utiliza Portage y como puede ser modificado su 
emplazamiento en el sistema de ficheros.
</p>

<p>
Este documento no pretende ser utilizado como referencia. Si necesita una 
cobertura 100%, por favor consulte las páginas del man relativas a  Portage y 
<path>make.conf</path>:
</p>

<pre caption="Leyendo las páginas del manual sobre Portage y make.conf">
$ <i>man portage</i>
$ <i>man make.conf</i>
</pre>

</body>
</subsection>
</section>
<section>
<title>Guardando ficheros</title>
<subsection>
<title>El árbol Portage</title>
<body>

<p>
La ubicación predeterminada del árbol de Portage es <path>/usr/portage</path>. 
Esta definida por la variable PORTDIR. Cuando guarde el árbol de Portage en 
cualquier otro lugar (modificando esta variable), no olvide cambiar el enlace 
simbólico <path>/etc/make.profile</path> de acuerdo con su cambio.
</p>

<p>
Si modifica la variable PORTDIR, seguramente quiera cambiar las siguientes 
variables ya que  no tienen constancia del cambio de PORTDIR. Esto es
debido a cómo Portage maneja las variables: PKGDIR, DISTDIR, RPMDIR.
</p>

</body>
</subsection>
<subsection>
<title>Binarios Pre-compilados</title>
<body>

<p>
Aunque Portage no utilice binarios pre-compilados por defecto, tiene un 
buen soporte para ellos. Cuando a Portage se le indica que trabaje con paquetes
pre-compilados, los buscará en <path>/usr/portage/packages</path>. 
Esta ubicación está definida por la variable PKGDIR. 
</p>

</body>
</subsection>
<subsection>
<title>Código Fuente</title>
<body>

<p>
El código fuente de las aplicaciones se guarda por defecto en <path>/usr/portage/distfiles</path>.
Esta ubicación viene definida por la variable DISTDIR.
</p>

</body>
</subsection>
<subsection>
<title>Archivos RPM</title>
<body>

<p>
Aunque Portage no puede utilizar archivos RPM, es capaz de generarlos utilizando
el comando <c>ebuild</c> (vea <uri link="?part=3&amp;chap=6">La aplicación 
Ebuild </uri>). La ubicación predeterminada para estos archivos RPM es 
<path>/usr/portage/rpm</path> y está definida por la variable RPMDIR.
</p>

</body>
</subsection>
<subsection>
<title>Base de datos de Portage</title>
<body>
  	 
<p>
Portage guarda el estado del sistema (que paquetes están instalados, qué 
archivos pertenecen a cada paquete, ...) en <path>/var/db/pkg</path>. 
¡<e>No</e> se deben modificar estos archivos manualmente! Podría romper el 
conocimiento que tiene Portage sobre el sistema.
</p>
  	 
</body>
</subsection>
<subsection>
<title>Caché de Portage</title>
<body>
  	 
<p>
La caché de Portage (con modificaciones temporales, paquetes virtuales, árbol
de dependencias, ...) se guarda en <path>/var/cache/edb</path>. Esta ubicación
es una verdadera caché: se puede limpiar si no se está ejecutando ninguna 
aplicación que tenga relación con Portage en este momento.
</p>
  	 
</body>
</subsection>
</section>
<section>
<title>Compilando aplicaciones</title>
<subsection>
<title>Ficheros temporales de Portage</title>
<body>

<p>
Los ficheros temporales de portage se guardan por defecto en 
<path>/var/tmp</path>. Esta ubicación se define en la variable
PORTAGE_TMPDIR.
</p>

<p>
Si modifica la variable PORTAGE_TMPDIR, necesitará cambiar las siguientes
variables ya que no tendrán constancia del cambio. Esto es debido a cómo
Portage maneja la variable: BUILD_PREFIX.
</p>

</body>
</subsection>
<subsection>
<title>Directorio de compilación</title>
<body>

<p>
Portage crea directorios de compilación específicos para cada paquete que 
se emerge dentro de <path>/var/tmp/portage</path>. Esta ubicación viene 
definida por la variable BUILD_PREFIX.
</p>

</body>
</subsection>
<subsection>
<title>Ubicación del sistema de ficheros</title>
<body>

<p>
Por defecto, Portage instala todas los archivos en el sistema de ficheros
activo (<path>/</path>), pero puede cambiarse esta configuración a través
de la variable de entorno ROOT. Esto es útil cuando quiera crear nuevas 
imágenes compiladas.
</p>

</body>
</subsection>
</section>
<section>
<title>Características de registro de acciones (log)</title>
<subsection>
<title>Registro de acciones de Ebuilds</title>
<body>

<p>
Portage puede crear un registro por ebuild, pero solamente cuando la variable
PORT_LOGDIR esté configurada y apuntando a una dirección con permisos de 
escritura para Portage (usuario Portage). De manera predeterminada está
variable está desactivada.
</p>

</body>
</subsection>
</section>
</sections>
