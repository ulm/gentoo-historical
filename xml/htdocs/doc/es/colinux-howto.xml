<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/doc/es/Attic/colinux-howto.xml,v 1.4 2006/04/06 00:39:22 yoswink Exp $ -->

<guide link="/doc/es/colinux-howto.xml" lang="es">
<title>Cómo configurar coLinux para que corra Gentoo</title>
<author title="Autor">
  IWBCMAN
</author>
<author title="Autor">
  janlaur
</author>
<author title="Editor">
  <mail link="joshua@sungentoo.homeunix.com">Joshua Preston</mail>
</author>
<author title="Editor">
  <mail link="avenj@gentoo.org">Jon Portnoy</mail>
</author>
<author title="Editor Es">
  <mail link="bass@gentoo.org">José Alberto Suárez López</mail>
</author>
<author title="Editor Es">
    <mail link="chiguire@gentoo.org">John Christian Stoddart</mail>
 </author>
<author title="Editor Es">
    <mail link="yoswink@gentoo.org">José Luis Rivero</mail>
 </author>
<author title="Traductor">
    <mail link="nmiyasato@datafull.com">Nicolás Miyasato</mail>
</author>

<abstract>
Este COMO provee instrucciones para una configuración sencilla
de coLinux para que tu máquina en Windows permita correr Linux 
como si fuera un hilo.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.4</version>
<date>2005-07-26</date>

<chapter>
<title>Introducción</title>
<section>
<title>¿Qué es coLinux?</title>
<body>

<p>
coLinux es un programa "demonio" de Windows. El objetivo es correr el núcleo de
Linux como un hilo nativo de Windows, y por lo tanto, correr Linux nativamente
sobre Windows.
</p>

<p>
El punto débil sea probablemente el rendimiento. El rendimiento de las
aplicaciones que corren en XWindow es malo, pero usable. Por otro lado, los 
programas "comunes" corren tan rápido como en un Linux real.
</p>

<warn>
coLinux todavía se encuentra en estado alfa. Funciona y lo hace bastante bien, 
pero hay ciertas cosas que todavía no soporta.
</warn>

<p>
Este COMO toma como base a dos excelentes COMOs del 
<uri link="http://forums.gentoo.org">foro de Gentoo</uri>, hechos por 
IWBCMAN y janlaur. Las referencias a esas discusiones se encuentran a
continuación.
</p>

<ul>
  <li><uri link="http://forums.gentoo.org/viewtopic.php?t=162420">Por IWBCMAN</uri></li>
  <li><uri link="http://forums.gentoo.org/viewtopic.php?t=163154">Por janlaur</uri></li>
</ul>

</body>
</section>
</chapter>
<chapter>
<title>Instalación</title>
<section>
<title>Obteniendo el coLinux</title>
<body>

<warn>
Para utilizar coLinux tienes que estar utilizando Windows 2000, 2003 o 
XP (Home/Professional).
</warn>

<p>
Solamente tienes que bajar la última versión desde 
<uri link="http://colinux.org/snapshots/">coLinux.org</uri>.
</p>

<note>
Para este COMO fue usado el archivo coLinux-20040417.exe.
En las versiones más recientes se encuentran corregidos bastantes errores, 
por lo que es recomendable usarlas.
</note>

<p>
El archivo .EXE es un programa instalador que puede bajar una distribución
básica desde Sourceforge (Gentoo/Debian/Fedora).
</p>

<p>
Ejecuta el archivo .EXE y deja los valores por defecto, excepto la distribución 
a bajar, que en tu caso será Gentoo.
</p>

<p>
La imagen será bajada en tu directorio de instalación y será llamado
<path>gentoo-i586-ext3-2g-deluxe.bz2</path>.
</p>

<p>
Este archivo virtual representa una partición que contiene una instalación 
"stage3" de Gentoo. En realidad, es más que una simple instalación del tipo 
stage3, ya que incluye XFree86, XFCE4, Firefox, Gaim y XChat. La partición 
virtual tiene un formato ext3.
</p>

<ul>
  <li>
    Descomprime este archivo a cualquier disco de Windows que pueda almacenar 
    un archivo de 2 gigabytes.
  </li>
  <li>La ruta del archivo no debe de contener ningún espacio.</li>
  <li>Si quieres, puedes borrar el archivo .bz2 luego de descomprimirlo.</li>
</ul>

<p>
Probablemente necesitarás el Winrar para Windows para descomprimirlo. 
Échale un vistazo a <uri link="http://wiki.colinux.org/cgi-bin/NiceTools">la 
página de Nice Tools de coLinux</uri> para encontrar las herramientas 
necesarias para descomprimir los archivos de la imagen y para crear 
particiones virtuales de intercambio (virtual swap partitions).
</p>

</body>
</section>
</chapter>
<chapter>
<title>Configuración</title>
<section>
<title>Modificando el archivo de configuración</title>
<body>

<p>
Solamente existe un archivo de configuración; se encuentra en el 
directorio de instalación y se llama <path>default.colinux.xml</path>.
Abrelo con tu editor favorito y edítalo de manera que se vea así:
</p>

<pre caption="default.colinux.xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;colinux&gt;
    <comment>&lt;!-- tu ruta puede ser diferente. --&gt;</comment>
    &lt;block_device index="0" path="\DosDevices\e:\gentoo-i586-ext3-2g-deluxe" enabled="true"&gt;&lt;/block_device&gt;
    &lt;bootparams&gt;root=/dev/cobd0&lt;/bootparams&gt;
    &lt;image path="vmlinux"&gt;&lt;/image&gt;
    <comment>&lt;!-- ajusta el tamaño a tus necesidades --&gt;</comment>
    &lt;memory size="256"&gt;&lt;/memory&gt;
    <comment>&lt;!-- ¡Asegúrate que name= sea exactamente igual al nombre de tu dispositivo TAP en tus conexiones de red.!--&gt;</comment>
    &lt;network index="0" type="tap" name="TAP"&gt;&lt;/network&gt;
&lt;/colinux&gt;
</pre>

<p>
Cambia la ruta a donde se haya descomprimido la imagen y configura la 
cantidad de memoria que quieres dedicar a coLinux.
</p>

</body>
</section>
<section>
<title>Configurando la red</title>
<body>

<p>
Tendrías que ser capaz de iniciar coLinux haciendo un doble-click sobre
el archivo colinux-daemon.exe, pero ya que la mayoría de las personas desean
tener soporte de red, primero vamos a configurar eso. Para empezar, necesitas
instalar el adaptador de red virtual.
</p>

<ul>
  <li>
    Del panel de control selecciona "Agregar Hardware" Select y luego haz
    click en "Siguiente"</li>
  <li>
    Haz click en "Si ya he conectado el nuevo hardware" y luego haz click en
    "Siguiente"
  </li>
  <li>
    En la siguiente ventana muévete hasta el fondo de la lista y selecciona 
    "Agregar un nuevo dispositivo de hardware" y luego haz click en "Siguiente"
  </li> 
  <li>
    Selecciona "Instalar el hardware que manualmente he seleccionado una lista"
    y luego haz click en "Siguiente"
  </li>
  <li>Selecciona "Dispositivos de red" y luego haz click en "Siguiente"</li>
  <li>
    Haz click en "Tengo un disco" y luego debes ir al lugar en donde
    descomprimiste coLinux. Entra en el directorio "netdriver". Tendría que
    aparecer un archivo.
  </li>
  <li>Selecciónalo y luego haz click en "Abrir"</li>
</ul>

<p>
¡Ahora tienes que configurar el adaptador de red virtual! Puedes hacerlo
como lo haces con los otros adaptadores que tienes en tu sistema.
</p>

<ul>
  <li>Tienes que ir hasta "Panel de control->Conexiones de red"</li>
  <li>
    Haz click en tu conexión de internet, y luego haz un CTRL+click sobre tu
    nuevo TAP de conexión de red.
  </li>
  <li>Presiona el botón derecho del mouse y elige "Conexiones puente".</li>
</ul>

<p>
Windows tendría que crear un puente de red. Si todavía tienes una conexión
activa a Internet en Windows, entonces probablemente funcione.
</p>

</body>
</section>
<section>
<title>Iniciando</title>
<body>

<p>
Ahora ya estás listo para abrir colinux-daemon.exe y ver la magia:
haz iniciado una instalación básica de Gentoo, con programas como XFree86,
XFCE4, Gaim, kernel-2.4.26 y otras cosas básicas a tu disposición.
</p>

<p>
Una vez dentro, querrás hacer un par de cosas primero:
</p>

<ul>
  <li>Entra como root sin contraseña y configura la contraseña para el root</li>
  <li>Verifica que la red esté en funcionamiento</li>
  <li>
    Ejecuta ssh, y entra mediante Putty a tu propia máquina. (Usa cygwin como tu
    tipo de terminal)
  </li>
</ul>

<p>
También querrás actualizar tu sistema, así que hagámoslo:
</p>

<pre caption="Terminando la configuración">
# <i>emerge --sync</i>
# <i>env-update &amp;&amp; source /etc/profile</i>
<comment>(Si prefieres usar vnc)</comment>
# <i>emerge tightvnc</i>
</pre>

<p>
Ahora necesitas configurar las X. Puedes simplemente copiar el 
<path>/etc/X11/XF86Config</path> de tu instalación Linux a
tu coLinux.
</p>

<note>
Solamente puedes usar los drivers que te provee el servidor X (o sea no
hay nvidia-glx/kernel) y además parece que solamente soporta una profundidad
de 16, así que tendrás que editar ese archivo que haz copiado para estas
limitaciones. Recuerda que no tienes acceso directo al hardware de video de 
Windows, así que tendrás que realizar la copia de este archivo o crearlo
manualmente. También podrías simplemente iniciar la máquina con Knoppix y dejar
que este te genere el archivo <path>XF86Config</path>.
</note>

<p>
Cuando eso esté terminado, crea el archivo <path>~/.vnc/xstartup</path>:
</p>

<pre caption="Ejemplo de ~/.vnc/xstartup">
startxfce4 &amp;
</pre>

<p>
Ahora simplemente corre el vncserver con tus opciones. Se te preguntará una
contraseña, escribe una y recuérdala.
</p>

<pre caption="Ejecutando el vncserver">
$ <i>vncserver -geometry "1024x768" -depth 16</i>
</pre>

<p>
Ahora lo único que necesitas hacer es bajar el VNC para Windows, correr
vncviewer, darle la dirección de IP de tu adaptador de red virtual (por ejemplo 
192.168.0.X:1) y tu contraseña. Si todo funciona bien, el escritorio del
XFCE4 tendría que aparecer en el vncviewer - ¡Diviértete!
</p>

</body>
</section>
</chapter>
<chapter>
<title>Temas avanzados</title>
<section>
<title>Agregando una partición de intercambio</title>
<body>

<p>
Baja el archivo de intercambio de <uri
link="http://gniarf.nerim.net/colinux/swap/">aquí</uri> 
(el nombre del archivo indica el tamaño). Descomprímelo en donde tengas lugar
y luego agrega la siguiente línea a tu <path>default.colinux.xml</path>:
</p>

<pre caption="Agregando un unidad de intercambio">
    <comment>&lt;-- index="1" significa que será mapeado a /dev/cobd1 --&gt;</comment>
    &lt;block_device index="1" path="\DosDevices\e:\swap-file" enabled="true"&gt;&lt;/block_device&gt;
</pre>

<p>
Ahora reinicia coLinux y ejecuta <c>mkswap</c>:
</p>

<pre caption="Configurando tu partición de intercambio">
# <i>mkswap /dev/cobd1</i>
</pre>

<p>
También necesitarás modificar el archivo <path>/etc/fstab</path>, agrega la
siguiente línea:
</p>

<pre caption="Agrega a /etc/fstab">
/dev/cobd1    none    swap    sw    0 0
</pre>

<p>
¡Y ahora habilita la partición de intercambio sin reiniciar!
</p>

<pre caption="Habilitando la partición de intercambio">
# <i>swapon -a</i>
</pre>

</body>
</section>
<section>
<title>Accediendo a tus particiones existentes de Linux con coLinux</title>
<body>

<p>
El sitio de coLinux provee un documento que lo cubre <uri 
link="http://wiki.colinux.org/cgi-bin/GettingStarted">básicamente</uri>.
Luego de leerlo, terminarás haciendo lo siguiente:
</p>

<pre caption="Un nuevo default.colinux.xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;colinux&gt;
    &lt;block_device index="0" path="\DosDevices\e:\gentoo-i586-ext3-2g-deluxe" enabled="true"&gt;&lt;/block_device&gt;
    &lt;block_device index="1" path="\DosDevices\e:\swap-file" enabled="true"&gt;&lt;/block_device&gt;
    <comment>&lt;!-- La ruta puede diferir basado en la configuración de tu disco, etc --&gt;</comment>
    &lt;block_device index="2" path="\Device\Harddisk0\Partition5" enabled="true"&gt;&lt;/block_device&gt; 
    &lt;bootparams&gt;root=/dev/cobd0&lt;/bootparams&gt;
    &lt;image path="vmlinux"&gt;&lt;/image&gt;
    &lt;memory size="256"&gt;&lt;/memory&gt;
    &lt;network index="0" type="tap" name="TAP"&gt;&lt;/network&gt;
&lt;/colinux&gt;
</pre>


<p>
Reinicia coLinux para que los cambios sean tomados en cuenta. Tendrías que
tener acceso a "\Device\Harddisk0\Partition5" desde el dispositivo /dev/cobd5
de coLinux.
</p>

<pre caption="Montando">
# <i>mount /dev/cobd2 /mnt/linux</i>
</pre>

<impo>
Recuerda que esto solamente funcionará con particiones que Windows no esté
usando. Si Windows lo está usando, tendrás que acceder a ellos con smbfs.
</impo>

</body>
</section>
</chapter>
<chapter>
<title>Preguntas y Respuestas</title>
<section>
<title>¿Qué parámetros USE debo usar?</title>
<body>

<p>
Los mismos que tu sistema nativo.
</p>

</body>
</section>
<section>
<title>¿Podré compartir mi conexión de dial-up?</title>
<body>

<p>
Se usa el compartimiento de conexiones de Internet para conectar la red de
Linux a la red exterior, así que tendrías que ser capaz de puentear la 
conexión TAP a tu conexión PPP.
</p>

</body>
</section>
<section>
<title>¿El núcleo de Linux puede todavía acceder al hardware?</title>
<body>

<p>
coLinux realiza una emulación de cada tipo de hardware que se requiera. Haz 
emulado el acceso a disco, a la red, etc. Lo que todavía no tiene soporte es
USB, acceso directo al video y acceso a la placa de sonido. Las buena noticia es
que actualmente coLinux está trabajando para hacer que el USB funcione
(excluyendo los teclados y ratones USB).
</p>

</body>
</section>
<section>
<title>¿Existen alternativas a coLinux?</title>
<body>

<p>
¡Si!
</p>

<ul>
<li><uri link="http://www.vmware.com/">VMWare</uri></li>
<li><uri link="http://bochs.sourceforge.net/">Bochs</uri></li>
</ul>

</body>
</section>
<section>
<title>¿Puede coLinux trabajar con el núcleo 2.6?</title>
<body>

<p>
Por el momento no. coLinux usa un núcleo basado en el 2.4 y a este se
le han aplicado parches para permitir el uso de dispositivos emulados
así como recursos compartidos con windows.
</p>

</body>
</section>
<section>
<title>¿Porqué no funciona X?</title>
<body>

<p>
No hay soporte nativo de X. Tienes que usar vnc o Cygwin-X11.
Sigue las instrucciones de este COMO.
</p>

</body>
</section>
</chapter>
<chapter>
<title>Conclusión</title>
<section>
<body>

<p>
Se abre un ábanico de posibilidades con coLinux. Puedes correr
Apache, Samba, DHCP, mail, distcc, NFS, <e>cualquier</e> servidor sobre
coLinux. Con la excepción del soporte a dispositivos y el acceso a disco, uno
no podría saber si se está corriendo Linux sobre Windows, lo cual es
realmente asombroso.
</p>

</body>
</section>
</chapter>
</guide>
