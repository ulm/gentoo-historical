<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="dev_reference.xml" lang="en">

  <title>Developer reference: Internal structure and organization of Ada packages.</title>
  <author title="Author">
	  <mail link="george@gentoo.org">George Shapovalov</mail>
  </author>

  <abstract>
	This is a guide to internal workings of the gnat and gnatbuild eclasses and eselect-gnat module,
	as well as an authoritative reference to packaging principles of Ada libs and other 
	related packages. 
  </abstract>

  <version>1.0</version>
  <date>28 Sep 2007</date>

  <chapter>
	  <title>Overview</title>

	  <section>
		  <title>Introduction</title>
		  <body>
			  <p>
				  Before you start on the internals of the Ada packages you may want to
				  go through the <uri link="ada_ug.xml">user guide</uri> in case you are not familiar with
				  how to activate the chosen gnat profile and where to look for the important files.
			  </p>
			  <p>
				  Ada related packages can be divided into three important categories:
			  </p>
			  <dl>
				  <dt>Compilers and packages that directly extend them.</dt>
				  <dd>
					  Currently two closely related "brands" are supported: 
					  <c>gnat-gcc</c> released by FSF and <c>gnat-gpl</c>, the
					  AdaCore version. The primary example of the "extending" package would
					  be asis, as it is closely tied to a particular version of compiler
					  and installs directly to the same locations where the specs and libs
					  of the corresponding gnat go.  The packages in this category should use the 
					  <c>gnatbuild.eclass</c>.
				  </dd>
				  <dt>Ada libraries</dt>
				  <dd>
					  These are built for every installed gnat and profile-dependent files are
					  installed to profile specific dirs, similarly to those of gnat, however they
					  go in a "library place". This is handled automatically by gnat.eclass, inner 
					  workings of which are discussed <uri link="#doc_chap2">below</uri>.
				  </dd>
				  <dt>Executables/other programs</dt>
				  <dd>The stuff that is to be executed directly or otherwise is not supposed to be linked
					  against. The prominent examples would be gps, c2ada, etc. These require no special 
					  treatment and can be built in a regular way with any active compiler or can 
					  depend on a particular variant.
				  </dd>
			  </dl>
			  <p>
				  The profiles are switched vie eselect-gnat module, the usual way. Its internal workings
				  are also discussed in the <uri link="#doc_chap1">chapter</uri> describing 
				  <c>gnatbuild.eclass</c>.
			  </p>
		  </body>
	  </section>
  </chapter>

  <chapter>
	  <title>gnatbuild.eclass and eselect-gnat</title>

	  <section>
		  <title>Introduction</title>
		  <body>
			  <p>To be completed. </p>
		  </body>
	  </section>
  </chapter>
</guide>

<!-- vim: set tabstop=2: -->
<!-- vim: set shiftwidth=2: -->
