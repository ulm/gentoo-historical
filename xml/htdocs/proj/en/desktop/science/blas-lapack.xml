<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<guide link="blas-lapack.xml">
<title>
	Using multiple versions of BLAS and LAPACK with Gentoo/Linux
</title>
<author title="Scientific Gentoo Project">
	<mail link="sci@gentoo.org">Scientific Gentoo Project</mail>
</author>
<author>
	<mail link="kugelfang@gentoo.org">Danny van Dyk</mail>
</author>

<abstract>
This Guide intends to explain the usage of different implementations
of the BLAS and LAPACK libraries that are available via portage as
implemented with regard to BUG #30453.
</abstract>

<license/>

<version>BUG-PENDING</version>
<date>3 Jan 2005</date>

<chapter>
<title>BLAS</title>
	<section>
		<title>Providing BLAS Implementations</title>
		<body>
		<p>
			The Gentoo portage tree contains many ebuilds that depend on the BLAS-Library. As
			there are more than one implementation of BLAS, the Gentoo Scientific Project reorganised
			all the BLAS packages to provide <c>virtual/blas</c>. <e>All</e> ebuilds should depend
			on this virtual package, unless it is explicitly known to break with different BLAS
			implementations.
		</p>
		<p>
			To work with Gentoo's BLAS Configuration Tool (<c>sci-libs/blas-config</c>), every
			ebuild that installs a BLAS Implementation must fulfill following requirements:
		</p>
		<ol>
			<li>The ebuild must install the actual libraries to <c>/usr/$(get_libdir)/blas/${PN}</c>.</li>
			<li>The ebuild must <c>PROVIDE="virtual/blas"</c>.</li>
			<li>The ebuild must install its configuration script to <c>/usr/$(get_libdir)/blas/</c>.
					Their names should resemble the originating packages. If the ebuild provides more than
					one implementation of BLAS (e.g. <c>sci-libs/blas-atlas</c>), each implementation
					requires a configurations script on its own.</li>
		</ol>
		<p>
			Each configuration script to be used by <c>sci-libs/blas-config</c> requires at least one
			function, <c>setup()</c> that will be called by <c>blas-config</c> directly. Further, it can
			set environment variables that shall be used to compile and/or link against the particular
			library.
		</p>
		<p>
			The function <c>setup()</c> creates symbolic links for the chosen BLAS implementation's libraries
			in <c>/usr/$(get_libdir)/</c>. The following symbolic links are available:
		</p>
		<ul>
			<li>libblas.so[.0] - Shared object for FORTRAN applications</li>
			<li>libblas.a - Static library for FORTRAN applications</li>
			<li>libcblas.so[.0] - Shared object for C/C++ applications</li>
			<li>libblas.a - Static library for C/C++ applications</li>
		</ul>
		<p>
			Currently the portage tree contains the following BLAS implementations that:
		</p>
		<ul>
			<li>sci-libs/acml</li>
			<li>sci-libs/blas-atlas</li>
			<li>sci-libs/blas-reference</li>
		</ul>
		</body>
	</section>
</chapter>
</guide>
