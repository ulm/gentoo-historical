<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/desktop/gnome/howtos/gnome-2.22-upgrade.xml,v 1.3 2008/04/02 20:34:40 dang Exp $ -->

<guide link="/proj/en/desktop/gnome/howtos/gnome-2.22-upgrade.xml">

<title>Gnome 2.22 Upgrade Guide</title>
<author title="Author">
  <mail link="remi@gentoo.org">RÃ©mi Cardona</mail>
</author>

<abstract>
This is a guide for upgrading from GNOME 2.20.x to GNOME 2.22.x.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.0</version>
<date>2008-03-30</date>

<chapter>
<title>Changes</title>
<section>
<title>Seahorse key manager</title>
<body>

<p>
Starting with 2.22, Seahorse (app-crypt/seahorse) is the blessed key and
password manager, replacing the old and tired Gnome Keyring Manager
(gnome-extra/gnome-keyring-manager). It handles both GPG and SSH keys, and can
be also used to manage the passwords saved in your Gnome keyring.
</p>

</body>
</section>
<section>
<title>PAM and Gnome Keyring integration</title>
<body>

<p>
Starting with Gnome 2.20, Gnome Keyring (gnome-base/gnome-keyring) started
providing a PAM module (pam_gnome_keyring.so) to automatically unlock your
keyring as you log in to your session, thereby saving you the trouble from
typing two passwords.
</p>

<p>
In Gnome 2.22, this feature is now even more easily configured, thanks to
sys-auth/pambase that sports a shiny gnome use flag. With this flag enabled,
the pam configuration files in /etc/pam.d/ will automatically have
pam_keyring.so inserted in the right places. Just remember to use "etc-update"
or "dispatch-conf" after installing pambase to update those files.
</p>

</body>
</section>
<section>
<title>GDM 2.20 and 2.22</title>
<body>

<p>
For a few years, there have been various people kicking around the idea to
rewrite GDM for a lot of different reasons (maintainability, new features,
customizations, ...). That rewrite started last summer, and the GDM team
decided that 2.22 would be based on that new code.
</p>

<p>
Unfortunately, that code still is not ready for production use (at the time of
writing, it is in an alpha stage) so the Gnome release managers decided not to
include GDM 2.22 for Gnome 2.22, but to ship GDM 2.20 instead. Ubuntu and
Mandriva are both going to be using GDM 2.20 for their Spring 2008 releases, we
also decided to include that version in portage.
</p>

<p>
During the Gnome 2.23/2.24 testing cycle, we will probably package the new GDM
if we feel that the featureset is consistent with the old version and that
migration does not come with too high a price.
</p>

</body>
</section>
<section>
<title>Other changes</title>
<body>

<p>
Please see the <uri link="http://www.gnome.org/start/2.22/notes/en/">GNOME 2.22
Release Notes</uri> for what else new is in this major release of GNOME.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Known Issues</title>
<section>
<title>Gnome no longer available as a session option in GDM</title>
<body>

<note>
This section should only concern users of the Gnome overlay. Users who have been using Gnome 2.22 from Portage should be fine.
</note>

<p>
GDM uses the files available in /usr/share/xsessions/* to figure out which desktop environment options the user will be able to select from the "Sessions" menu.
</p>

<p>
In Gnome 2.20, the file /usr/share/xsessions/gnome.desktop was installed by GDM, which causes a lot of headaches. For instance, if you want to use another login manager (such as KDM or Entrance) capable of reading .desktop files but still use a Gnome session, you would have to install GDM even if you never used it.
</p>

<p>
In Gnome 2.22, that small issue was fixed and the gnome.desktop file is now installed by gnome-base/gnome-session (which is the actual program launched by the login manager to start Gnome).
</p>

<p>
The problem is that Portage can sometimes fail to handle file collisions properly (file collisions happen when to packages install the same files) and may delete the gnome.desktop file altogether. To fix the issue, just remerge gnome-base/gnome-session.
</p>
</body>
</section>
</chapter>
</guide>
