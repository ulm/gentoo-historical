<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/desktop/gnome/howtos/gnome-2.22-upgrade.xml,v 1.11 2008/04/03 01:59:08 leio Exp $ -->

<guide link="/proj/en/desktop/gnome/howtos/gnome-2.22-upgrade.xml">

<title>Gnome 2.22 Upgrade Guide</title>
<author title="Author">
  <mail link="remi@gentoo.org">RÃ©mi Cardona</mail>
</author>
<author title="Author">
  <mail link="leio@gentoo.org">Mart Raudsepp</mail>
</author>

<abstract>
This is a guide for upgrading from GNOME 2.20.x to GNOME 2.22.x.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.1</version>
<date>2008-04-03</date>

<chapter>
<title>Changes</title>
<section>
<title>Seahorse key manager</title>
<body>

<p>
Starting with 2.22, Seahorse (<c>app-crypt/seahorse</c>) is the official key and
password manager, replacing GNOME Keyring Manager
(<c>gnome-extra/gnome-keyring-manager</c>). It handles both GPG and SSH keys,
and can also be used to manage the passwords saved in your GNOME keyring.
</p>

<p>
If you are happy with Seahorse after completing the GNOME upgrade, you may
consider uninstalling <c>gnome-keyring-manager</c>.
</p>

</body>
</section>
<section>
<title>PAM and GNOME Keyring integration</title>
<body>

<p>
Starting with GNOME 2.20, GNOME Keyring (<c>gnome-base/gnome-keyring</c>)
started providing a PAM module (pam_gnome_keyring.so) to automatically unlock
your keyring as you log in to your session, thereby saving you the trouble from
typing two passwords.
</p>

<p>
In GNOME 2.22, this feature is now even more easily configurable, thanks to
<c>sys-auth/pambase</c> that has a <c>gnome</c> USE flag. With this flag
enabled, the pam configuration files in /etc/pam.d/ will automatically have
pam_keyring.so inserted in the right places. Just remember to use
<c>dispatch-conf</c> or your similar tool of choice after installing pambase
to update those files.
</p>

</body>
</section>
<section>
<title>Other changes</title>
<body>

<p>
Please see the <uri link="http://library.gnome.org/misc/release-notes/2.22/">GNOME 2.22
Release Notes</uri> for what else new is in this major release of GNOME.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Troubleshooting</title>
<section>
<title>Blocked packages</title>
<body>

<p>
With GNOME 2.22 a few packages were split into two, to allow other applications
to use the previously internal libraries. For example the playlist parser
library found in totem is now split out of it into <c>dev-libs/totem-pl-parser</c>,
so that rhythmbox can depend on it without depending on the whole of totem.
</p>
<p>
All this results in blockers having to be in place between the packages to
avoid file collissions. To workaround it, simply follow the appropriate
instructions in the
<uri link="http://www.gentoo.org/doc/en/handbook/handbook-x86.xml?full=1#blocked">handbook</uri>
as instructed by portage. In particular, temporarily unmerge the conflicting
package and continue as normal, getting the unmerged package back soon via
the meta package or other GNOME parts depending on it.
</p>

</body>
</section>
<section>
<title>GNOME no longer available as a session option in GDM</title>
<body>

<p>
GDM uses the files available in /usr/share/xsessions/* to determine which
desktop environments the user has installed and will be able to select from
the "Sessions" menu.
</p>

<p>
The appropriate file for GNOME is now provided by <c>gnome-base/gnome-session-2.22</c>
instead of <c>gnome-base/gdm</c>, and due to this there are appropriate package
blockers in place to avoid file collissions leading to this session file
getting lost. The only thing that can go bad is that <c>gnome-session</c> does not
get upgraded to 2.22 after it was uninstalled to resolve the gdm upgrade
blocker. The symptom would be the lack of a GNOME choice in the GDM
"Sessions" menu, in which case please check that you have <c>gnome-session-2.22.0</c>
or newer installed. Note that this problem can not happen to <c>gnome-base/gnome</c>
meta package users, as it will pull in the appropriate <c>gnome-session</c> package
again.
</p>
</body>
</section>
</chapter>
</guide>
