<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/desktop/x/x11/libxcb-1.4-upgrade-guide.xml,v 1.1 2009/09/12 12:55:48 remi Exp $ -->

<guide link="/proj/en/desktop/x/x11/libxcb-1.4-upgrade-guide.xml" lang="en">
<title>Gentoo libxcb 1.4 Upgrade Guide</title>

<author title="Author">
  <mail link="remi" />
</author>

<abstract>
This guide shows how to upgrade from libxcb 1.1.90.2 and earlier to libxcb 1.4.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>
<version>0.1</version>
<date>2009-09-12</date>

<chapter>
<title>Upgrading to libxcb 1.4</title>
<section>
<body>

<pre caption="Updating xcb packages">
# <i>emerge -1 x11-proto/xcb-proto x11-libs/libxcb</i>
# <i>emerge -1 x11-proto/xproto x11-proto/xextproto x11-libs/libX11 x11-libs/libXext</i>
</pre>

<p>
run <c>/usr/portage/x11-libs/libxcb/files/xcb-rebuilder.sh</c> to fix .la
files. If the tool reports broken packages, please read on. If not, lucky you,
your system is ready to go :)
</p>

<p>
run the following one liner to rebuild a simple, yet effective, subset of
potentially broken packages. Do not worry, packages you don't have installed
will not be installed.
</p>

<pre caption="Rebuilding essential packages first">
# <i>emerge --oneshot --nodeps \
$(for i in x11-proto/ x11-libs/libxcb x11-libs/libX11 x11-libs/libXext \
           x11-libs/libX x11-libs/xcb-util x11-libs/cairo \
           x11-libs/pango x11-libs/gtk+ gnome-base/libgnomeui \
           x11-libs/qt-gui; do \
    qlist -IC $i; \
done) -pv</i>
</pre>

<p>
use revdep-rebuild (from app-portage/gentoolkit) to finish fixing the rest of
your system.
</p>

<pre caption="Rebuilding the remaining broken packages">
# <i>revdep-rebuild -L libxcb-xlib.so.0</i>
</pre>

</body>
</section>
</chapter>
</guide>
