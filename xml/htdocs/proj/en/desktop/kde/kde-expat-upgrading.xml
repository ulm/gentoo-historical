<?xml version="1.0" encoding="UTF-8"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/desktop/kde/Attic/kde-expat-upgrading.xml,v 1.2 2007/09/06 14:50:40 keytoaster Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/~keytoaster/kde-expat-upgrading.xml" lang="en">
<title>Upgrading to KDE 3.5.7: Frequently Asked Questions</title>

<author title="Author">
  <mail link="keytoaster@gentoo.org">Tobias Heinlein</mail>
</author>
<author title="Contributor">
  <mail link="dertobi123@gentoo.org">Tobias Scherbaum</mail>
</author>
<abstract>
This document tries to answer some frequently asked questions on issues that
occur when upgrading to the newest stable version of KDE.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.1</version>
<date>2007-08-14</date>

<chapter>
<title>Introduction</title>
<section>
<body>

<p>
For most architectures supported by Gentoo the current versions of the GNOME
and KDE desktop environments went into the stable branch a few days ago.
</p>

<p>
Together with this update to GNOME 2.18.2 and KDE 3.5.7, new versions of the
<c>expat</c> and <c>curl</c> libraries were stabilised as well. The now stable
versions 2.0.1 of <c>expat</c> and 7.16.4 of <c>curl</c> are not compatible
with the previous stable versions. This is why a major part of the packages
installed on a Gentoo desktop system need to be re-installed to link them
against the new versions of the libraries. To keep the affort needed as low as
possible, Gentoo's KDE and GNOME herds, as well as the architecture teams,
stabilised <c>expat</c>, <c>curl</c> and the said desktop environments in one
go.
</p>

<p>
When you are updating your system it might happen that some package updates
fail, because older applications or libraries are still linked against
older, no longer available versions of <c>expat</c> and <c>curl</c>. The most
common error up to now occurs in the configure phase, <c>checking for
XML::Parser... configure: error: XML::Parser perl module is required for
intltool</c>. In this case the fix was to re-install <c>XML-Parser</c>
manually.
</p>

<p>
Generally we recommend using the <c>revdep-rebuild -X</c> command (available in
the <c>app-portage/gentoolkit</c> package) instead of the usual world update
via <c>emerge</c> for the upcoming update of the desktop environments.<br />
This makes sure that all packages depending on older versions of <c>expat</c>
and <c>curl</c> are updated. If further issues occur, especially related to
<c>intltool</c>, install <c>XML-Parser</c> and <c>gettext</c> again, followed
by an update of the system via <c>revdep-rebuild -X</c> and a world update.
</p>

</body>
</section>
</chapter>

<chapter>
<title>Short FAQ</title>
<section>
<title>Q: But why don't the developers fix the expat bug??? They are all slackers!</title>
<body>

<p>
A: We can't fix <e>your</e> system and rebuild everything to link against the
new versions. That's up to you.
</p>

<p>
Also, there is a warning in the expat ebuild:
</p>

<pre caption="Snippet of the expat ebuild">
ewarn "Please note that the soname of the library changed!"
ewarn "If you are upgrading from a previous version you need"
ewarn "to fix dynamic linking inconsistencies by executing:"
ewarn "revdep-rebuild --library libexpat.so.0"
</pre>

<p>
For more information see <uri
link="http://forums.gentoo.org/viewtopic-t-575655.html">the Gentoo
forums</uri>.
</p>

</body>
</section>
<section>
<title>Q: &lt;kde-base/kdesktop-3.5.6-r1 is blocking kde-base/kdebase-kioslaves-3.5.7-r1</title>
<body>

<p>
A: This simply means that recent versions of <c>kde-base/kdebase-kioslaves</c>
don't work with older versions of <c>kde-base/kdesktop</c>. This can be solved
by updating <c>kdesktop</c> first (<c>emerge -u kdesktop</c>) or by unmerging
it and then updating <c>kdebase-kioslaves</c> (<c>emerge -C kdesktop
&amp;&amp; emerge -u kdebase-kioslaves</c>). <b>These instructions apply to
similiar blockages.</b>
</p>

</body>
</section>
<section>
<title>Q: kde-base/ksync is blocking kde-base/kdelibs-3.5.7-r2</title>
<body>

<p>
A: <c>kdelibs-3.5.7-r2</c> now provides the functionality of <c>ksync</c>. There
is no need to have <c>ksync</c> installed any longer. Just unmerge it
(<c>emerge -C ksync</c>).
</p>

<!--

Update of QT fails!
Q: Emerging qt on my machine fails with the following error message:

/usr/lib/gcc/x86_64-pc-linux-gnu/4.2.0/../../../../x86_64-pc-linux-gnu/bin/ld:
.obj/release-shared/qiodevice.o: relocation R_X86_64_PC32 against
`QList<QByteArray>::clear()' can not be used when making a shared object;
recompile with -fPIC

A: Don't use gcc-4.2.0 yet unless you have a very good reason to.

-->

</body>
</section>
</chapter>
</guide>
