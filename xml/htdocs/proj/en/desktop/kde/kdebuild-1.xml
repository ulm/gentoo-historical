<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/desktop/kde/Attic/kdebuild-1.xml,v 1.2 2008/04/16 17:38:37 philantrop Exp $ -->

<guide link="/proj/en/desktop/kde/kdebuild-1.xml">
<title>Gentoo KDE kdebuild-1 EAPI Guide</title>

<author title="Author">
  <mail link="philantrop"/>
</author>

<abstract>
This guide provides the information needed to understand and use the Gentoo KDE
project's kdebuild-1 EAPI.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.0</version>
<date>2008-04-16</date>

<chapter>
<title>Introduction</title>
<section>
<title>A short history of kdebuild-1</title>
<body>

<p>
The Gentoo KDE project has provided an official overlay with KDE4 live ebuilds
("kde" in layman/playman) and some of their dependencies for quite some time.
</p>
<p>
The team's progress has been impaired by the absence of features like 
standardised live ebuilds as per <uri link="http://www.gentoo.org/proj/en/glep/glep-0054.html">GLEP 54</uri>, USE dependencies and package 
dependency labels.
</p>
<p>
Thus, the idea arose to create a new, stable EAPI for use in the overlay for
live ebuilds as those would benefit the most from those features. 
</p>
<p>
Unfortunately, Portage doesn't support any of those features yet and so the
team decided to use <uri link="http://paludis.pioto.org">Paludis</uri>.
</p>
<p>
After some discussion with Ciaran McCreesh we came up with kdebuild-1.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Features of kdebuild-1</title>
<section>
<body>

<p>
The kdeuild-1 EAPI is based upon EAPI 1 with some notable additions and
changes. This chapter outlines those differences and gives a short reasoning
for them.
</p>
<p>
For detailed information you should refer to <uri link="http://dev.gentoo.org/~philantrop/pms.pdf">PMS (pdf)</uri>.
</p>

</body>
</section>
<section>
<title>New features</title>
<body>
<table>
<tr>
  <th>Feature</th>
  <th>References</th>
  <th>PMS chapter</th>
</tr>
<tr>
  <ti>"-scm" version support</ti>
  <ti><uri link="http://www.gentoo.org/proj/en/glep/glep-0054.html">GLEP 54</uri></ti>
  <ti>2.2 Version Specifications</ti>
</tr>
<tr>
  <ti>".kdebuild-1" filename suffix</ti>
  <ti><uri link="http://www.gentoo.org/proj/en/glep/glep-0055.html">GLEP 55</uri></ti>
  <ti>3.3 Package Directories</ti>
</tr>
<tr>
  <ti>USE dependencies</ti>
  <ti><uri link="https://bugs.gentoo.org/2272">Bug 2272</uri></ti>
  <ti>9.2.5 Package Dependency Specifications</ti>
</tr>
<tr>
  <ti>Ranged dependencies</ti>
  <ti></ti>
  <ti>9.2.5 Package Dependency Specifications</ti>
</tr>
<tr>
  <ti>:* and := slot dependency operators</ti>
  <ti></ti>
  <ti>9.2.5 Package Dependency Specifications</ti>
</tr>
<tr>
  <ti>SRC_URI arrows</ti>
  <ti><uri link="https://bugs.gentoo.org/177863">Bug 177863</uri></ti>
  <ti>9.2.8 SRC_URI</ti>
</tr>
<tr>
  <ti>SRC_URI labels</ti>
  <ti><uri link="https://bugs.gentoo.org/201499">Bug 201499</uri></ti>
  <ti>9.2.8 SRC_URI</ti>
</tr>
<tr>
  <ti>Mandatory src_test</ti>
  <ti></ti>
  <ti>10.1.4 src_test</ti>
</tr>
<tr>
  <ti>No implicit mkdir for doins</ti>
  <ti></ti>
  <ti></ti>
</tr>
<tr>
  <ti>dohtml, dohard and dosed are banned</ti>
  <ti></ti>
  <ti>11.3.3 Ebuild-specific Commands</ti>
</tr>
<tr>
  <ti>Old-style virtuals are banned</ti>
  <ti></ti>
  <ti>8.3 Optional Ebuild-defined Variables</ti>
</tr>
<tr>
  <ti>pkg_info can be used on uninstalled packages</ti>
  <ti></ti>
  <ti>10.1.11 pkg_info</ti>
</tr>
<tr>
  <ti>PDEPEND "suggested" label</ti>
  <ti></ti>
  <ti>9.2.6 Package Dependency Labels</ti>
</tr>
</table>
</body>
</section>
</chapter>

<chapter>
<title>Current use of kdebuild-1</title>
<section>
<body>
<p>
kdebuild-1 is currently being used for for live ebuilds (${PV}=-scm) in the KDE
overlays only, so that users of other PMs will be able to use the rest of the 
overlay as before. That's exactly what the kdebuild-1 EAPI was designed 
to allow for.
</p>
<p>
For users of the KDE overlay's live ebuilds the new EAPI currently means they
will have to use Paludis. As other package managers might be interested in the
features of kdebuild-1, too, it's optionally included in PMS.
</p>
<p>
For the KDE team using kdebuild-1 means we will be able to use exciting new 
features and make our lifes easier.
</p>
<p>
For Gentoo as a whole this means there's plenty of opportunity to try new 
stuff and learn from the experiences.
</p>
</body>
</section>
</chapter>
</guide>
