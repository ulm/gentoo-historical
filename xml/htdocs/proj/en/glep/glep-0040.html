<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/peps/pep-0001.html for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Docutils 0.3.9: http://docutils.sourceforge.net/" />
  <title>GLEP 40 -- Standardizing "arch" keywording across all archs.</title>
  <link rel="stylesheet" href="tools/glep.css" type="text/css" />
</head>
<body bgcolor="white">
<table class="navigation" cellpadding="0" cellspacing="0"
       width="100%" border="0">
<tr><td class="navicon" width="150" height="35">
<a href="http://www.gentoo.org/" title="Gentoo Linux Home Page">
<img src="http://www.gentoo.org/images/gentoo-new.gif" alt="[Gentoo]"
 border="0" width="150" height="35" /></a></td>
<td class="textlinks" align="left">
[<b><a href="http://www.gentoo.org/">Gentoo Linux Home</a></b>]
[<b><a href="http://www.gentoo.org/proj/en/glep">GLEP Index</a></b>]
[<b><a href="./glep-0040.txt">GLEP Source</a></b>]
</td></tr></table>
<table class="rfc2822 docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">GLEP:</th><td class="field-body">40</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Standardizing &quot;arch&quot; keywording across all archs.</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.2</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference" href="http://www.gentoo.org/cgi-bin/viewcvs/xml/htdocs/proj/en/glep/glep-0040.txt?cvsroot=gentoo">2005/09/15 21:02:11</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Grant Goodyear &lt;g2boojum&#32;&#97;t&#32;gentoo.org&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Approved</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference" href="http://www.python.org/peps/glep-0012.html">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">3-Sep-2005</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">6-Sep-2005 15-Sep-2005</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first"><a name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#status" id="id10" name="id10">Status</a></li>
<li><a class="reference" href="#credits" id="id11" name="id11">Credits</a></li>
<li><a class="reference" href="#abstract" id="id12" name="id12">Abstract</a></li>
<li><a class="reference" href="#motivation" id="id13" name="id13">Motivation</a></li>
<li><a class="reference" href="#specification" id="id14" name="id14">Specification</a><ul>
<li><a class="reference" href="#stabling-guidelines-for-all-archs" id="id15" name="id15">Stabling guidelines for all archs</a></li>
<li><a class="reference" href="#x86-arch-team" id="id16" name="id16">x86 arch team</a></li>
</ul>
</li>
<li><a class="reference" href="#rationale" id="id17" name="id17">Rationale</a></li>
<li><a class="reference" href="#implementation" id="id18" name="id18">Implementation</a></li>
<li><a class="reference" href="#alternative-ideas" id="id19" name="id19">Alternative Ideas</a></li>
<li><a class="reference" href="#backwards-compatibility" id="id20" name="id20">Backwards Compatibility</a></li>
<li><a class="reference" href="#id1" id="id21" name="id21">References</a></li>
<li><a class="reference" href="#copyright" id="id22" name="id22">Copyright</a></li>
</ul>
</div>
<div class="section" id="status">
<h1><a class="toc-backref" href="#id10" name="status">Status</a></h1>
<p>Approved by the Gentoo Council on 15 September 2005.</p>
</div>
<div class="section" id="credits">
<h1><a class="toc-backref" href="#id11" name="credits">Credits</a></h1>
<p>This GLEP originated from a rather contentious <a class="reference" href="http://tinyurl.com/bp859">discussion</a> <a class="footnote-reference" href="#id2" id="id3" name="id3">[1]</a> on gentoo-dev
about combining the x86 and amd64 keywords.  This GLEP attempts to get at the
heart of that discontent.  The proposed stable-keyword guidelines have been
lifted verbatim from <a class="reference" href="http://dev.gentoo.org/~plasmaroo/devmanual">The Doc</a> <a class="footnote-reference" href="#id4" id="id5" name="id5">[2]</a>.</p>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id12" name="abstract">Abstract</a></h1>
<p>It is time for x86 to no longer be an exception to the standard
keywording guidelines.  Thus, an x86 arch team should be responsible 
for moving packages from ~x86 to x86.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id13" name="motivation">Motivation</a></h1>
<p>The original, informal x86 keywording policy, where almost any x86 dev (which
were the vast majority of devs) who used a package could mark it stable, arose
from a time when there were relatively few Gentoo devs.  Adding packages to
the tree was the principal concern, as opposed to maintaining existing
packages. QA considerations have since modified that policy slightly, and now
it is the package maintainers who should mark an x86 package stable.  Of
course, that policy presumes that package maintainers are generally x86 devs,
which is slowly becoming less and less true.</p>
<p>This policy for x86 is quite different from how every other arch marks
packages stable.  For the non-x86 archs, each arch has a specific &quot;arch team&quot;
which is responsible for moving packages from <tt class="docutils literal"><span class="pre">~arch</span></tt> to <tt class="docutils literal"><span class="pre">arch</span></tt>, although
vapier notes that &quot;arch teams generally defer to maintainers (and rightly so)
as to <em>when</em> newer versions should go stable.&quot;  This approach has worked quite
well for the non-x86 archs, and this GLEP asserts that the same approach would
benefit x86 as well.</p>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id14" name="specification">Specification</a></h1>
<div class="section" id="stabling-guidelines-for-all-archs">
<h2><a class="toc-backref" href="#id15" name="stabling-guidelines-for-all-archs">Stabling guidelines for all archs</a></h2>
<p>For a package to move to stable, the following guidelines must be met:</p>
<ul class="simple">
<li>The package has spent a reasonable amount of time in <tt class="docutils literal"><span class="pre">~arch</span></tt> first.
Thirty days is the usual figure, although this is clearly only a guideline.
For critical packages, a much longer duration is expected.  For small
packages which have only minor changes between versions, a shorter period
is sometimes appropriate.</li>
<li>The package must not have any non-<tt class="docutils literal"><span class="pre">arch</span></tt> dependencies.</li>
<li>The package must not have any severe outstanding bugs or issues.</li>
<li>The package must be widely tested.</li>
<li>If the package is a library, it should be known not to break any package
which depends upon it.</li>
<li>The relevant <tt class="docutils literal"><span class="pre">arch</span></tt> team must agree to it.</li>
</ul>
</div>
<div class="section" id="x86-arch-team">
<h2><a class="toc-backref" href="#id16" name="x86-arch-team">x86 arch team</a></h2>
<p>A robust x86 arch team needs to be created.  The <a class="reference" href="mailto:x86&#64;gentoo.org">x86&#64;gentoo.org</a> alias already
exists, and it merely needs to be used.  This team, with the aid of potential
non-dev <tt class="docutils literal"><span class="pre">arch</span> <span class="pre">testers</span></tt>, has the responsibility of stabling all x86 packages.
Current x86 devs who wish to mark their own packages stable must therefore
either be members of or make individual arrangements with the x86 arch team.</p>
</div>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id17" name="rationale">Rationale</a></h1>
<p>There will be a considerable one-time cost involved in establishing a robust
x86 arch team--a good number of bodies (the amd64 atch team has 19 active devs
and 12 active non-dev arch testers) need to be recruited to be part of the
new arch team, and convincing devs that it is in their best interests to work
in a new fashion is likely to be even harder.  Certainly the benefit of
consistency between the various archs is obvious, but is it worth the cost
involved?  Here are the arguments for enduring the pain involved:</p>
<ul class="simple">
<li>Over time, x86 is likely to become a minority arch as 64-bit systems
become the norm.  The implicit assumptions that underly the current
system (that most devs, users, and package maintainers use x86)
will become increasingly less valid.</li>
<li>Markedly improved QA for x86.  Assuming that the author's own  is
behavior is representative, most x86 devs run <tt class="docutils literal"><span class="pre">~x86</span></tt> systems. 
Thus, the assumption that devs are good <tt class="docutils literal"><span class="pre">x86</span></tt> testers is not really
valid.  One obvious consequence is that packages tend to languish in
<tt class="docutils literal"><span class="pre">~x86</span></tt> for a very long time, since x86 devs running <tt class="docutils literal"><span class="pre">~x86</span></tt> have little
cause to notice that a package has not been marked stable.  The much larger
effect, though, is that it is rare for <tt class="docutils literal"><span class="pre">x86</span></tt> packages to be stabled in
the context of a full <tt class="docutils literal"><span class="pre">x86</span></tt> tree, so the big picture of a stable
<em>system</em>, not just a stable package, is lost.  This approach of stabling
in the context of a full stable <tt class="docutils literal"><span class="pre">arch</span></tt> tree, it has been <a class="reference" href="http://thread.gmane.org/gmane.linux.gentoo.devel/30369">argued</a> <a class="footnote-reference" href="#id6" id="id7" name="id7">[3]</a>, is
the fundamental reason why the non-x86 archs have notably better QA
than does the x86 arch.</li>
</ul>
</div>
<div class="section" id="implementation">
<h1><a class="toc-backref" href="#id18" name="implementation">Implementation</a></h1>
<p>Creation of a robust x86 team is already underway.  The more vital step 
is the official change in policy, along with a sustained effort to get
existing x86 devs to go along with it.</p>
</div>
<div class="section" id="alternative-ideas">
<h1><a class="toc-backref" href="#id19" name="alternative-ideas">Alternative Ideas</a></h1>
<p><a class="reference" href="http://thread.gmane.org/gmane.linux.gentoo.devel/31060">Stuart</a> <a class="footnote-reference" href="#id8" id="id9" name="id9">[4]</a> has suggested the creation of a new arch keyword: &quot;[-]maint&quot;, which 
would exist in tandem with the normal arch keywords, thereby making the
package maintainer's intention explicit.  Ciaranm has responded that by
definition a package in <tt class="docutils literal"><span class="pre">~arch</span></tt> is a candidate for <tt class="docutils literal"><span class="pre">arch</span></tt>, so a package's
mere presence in the tree (without being in <tt class="docutils literal"><span class="pre">package.mask</span></tt>) should indicate
the package maintainer's intention.  There was a fair bit of discussion about
whether the idea should be a &quot;maint&quot; keyword, or named something else, or an
entirely different variable, etcetera, but the basic gist didn't change much.</p>
<p>Jstubbs notes that it could be a very good idea if all non-arch devs worked in
overlays, but that new portage (gensync) support would be needed to make it
truly viable.  Stuart pointed out that php5 support was handled just that way.
One author's view is that this approach would make the &quot;package in <tt class="docutils literal"><span class="pre">~arch</span></tt>
means that it's a de-facto candidate for <tt class="docutils literal"><span class="pre">arch</span></tt>&quot; interpretation even more 
valid.</p>
<p>Ciaranm and weeve have noted that it is occasionally necessary for arch teams
to override a package maintainer when it comes to stabling a package.  Stuart
has asserted that in those cases the arch team should be willing to take on
the support burden for that package.</p>
</div>
<div class="section" id="backwards-compatibility">
<h1><a class="toc-backref" href="#id20" name="backwards-compatibility">Backwards Compatibility</a></h1>
<p>Not really an issue here.</p>
</div>
<div class="section" id="id1">
<h1><a class="toc-backref" href="#id21" name="id1">References</a></h1>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3" name="id2">[1]</a></td><td><a class="reference" href="http://tinyurl.com/bp859">http://tinyurl.com/bp859</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5" name="id4">[2]</a></td><td><a class="reference" href="http://dev.gentoo.org/~plasmaroo/devmanual">http://dev.gentoo.org/~plasmaroo/devmanual</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7" name="id6">[3]</a></td><td><a class="reference" href="http://thread.gmane.org/gmane.linux.gentoo.devel/30369">http://thread.gmane.org/gmane.linux.gentoo.devel/30369</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9" name="id8">[4]</a></td><td><a class="reference" href="http://thread.gmane.org/gmane.linux.gentoo.devel/31060">http://thread.gmane.org/gmane.linux.gentoo.devel/31060</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id22" name="copyright">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
</div>

</div>
<div class="footer">
<hr class="footer" />
<a class="reference" href="glep-0040.txt">View document source</a>.
Generated on: 2005-09-15 21:03 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>

