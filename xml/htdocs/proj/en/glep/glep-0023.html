<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/peps/pep-0001.html for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Docutils 0.3.0: http://docutils.sourceforge.net/" />
  <title>GLEP 23 -- Portage handling of ACCEPT_LICENSE</title>
  <link rel="stylesheet" href="tools/glep.css" type="text/css" />
</head>
<body bgcolor="white">
<table class="navigation" cellpadding="0" cellspacing="0"
       width="100%" border="0">
<tr><td class="navicon" width="150" height="35">
<a href="http://www.gentoo.org/" title="Gentoo Linux Home Page">
<img src="http://www.gentoo.org/images/gentoo-new.gif" alt="[Gentoo]"
 border="0" width="150" height="35" /></a></td>
<td class="textlinks" align="left">
[<b><a href="http://www.gentoo.org/">Gentoo Linux Home</a></b>]
[<b><a href="http://www.gentoo.org/proj/en/glep">GLEP Index</a></b>]
[<b><a href="http://www.gentoo.org/proj/en/glep/glep-0023.txt">GLEP Source</a></b>]
</td></tr></table>
<div class="document">
<table class="rfc2822 field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">GLEP:</th><td class="field-body">23</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Portage handling of ACCEPT_LICENSE</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.1</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference" href="http://www.gentoo.org/cgi-bin/viewcvs.cgi/xml/htdocs/proj/en/glep/glep-0023.txt?cvsroot=gentoo">2004/03/08 17:26:04</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Jason Stubbs &lt;jstubbs&#32;&#97;t&#32;gentoo.org&gt;,</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference" href="glep-0002.html">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">9-Mar-2004</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">8-Mar-2004</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title"><a name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#abstract" id="id5" name="id5">Abstract</a></li>
<li><a class="reference" href="#motivation" id="id6" name="id6">Motivation</a></li>
<li><a class="reference" href="#specification" id="id7" name="id7">Specification</a><ul>
<li><a class="reference" href="#ebuild-license-variable" id="id8" name="id8">Ebuild LICENSE Variable</a></li>
<li><a class="reference" href="#license-groups" id="id9" name="id9">License Groups</a></li>
<li><a class="reference" href="#accept-license" id="id10" name="id10">ACCEPT_LICENSE</a></li>
<li><a class="reference" href="#emerge-behaviour" id="id11" name="id11">Emerge Behaviour</a></li>
</ul>
</li>
<li><a class="reference" href="#rationale" id="id12" name="id12">Rationale</a></li>
<li><a class="reference" href="#reference-implementation" id="id13" name="id13">Reference Implementation</a></li>
<li><a class="reference" href="#backwards-compatibility" id="id14" name="id14">Backwards Compatibility</a></li>
<li><a class="reference" href="#references" id="id15" name="id15">References</a></li>
<li><a class="reference" href="#copyright" id="id16" name="id16">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id5" name="abstract">Abstract</a></h1>
<p>Currently, every ebuild in the portage tree is required to have a valid 
LICENSE entry.  However, the syntax of this entry is not officially 
defined and the entry itself is only used when outputting package 
details.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id6" name="motivation">Motivation</a></h1>
<p>Many users wish to regulate the software they install with regards to 
licenses for various reasons <a class="footnote-reference" href="#id3" id="id1" name="id1">[1]</a>.  Some want a system free of any 
software that is not OSI-approved; others are simply curious as to what 
licenses they are implicitly accepting.</p>
<p>Furthermore, some software requires that a user interactively accept its 
license for its author's to consider it legally binding.  This is 
currently implemented using <tt class="literal"><span class="pre">eutils.eclass</span></tt>.</p>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id7" name="specification">Specification</a></h1>
<div class="section" id="ebuild-license-variable">
<h2><a class="toc-backref" href="#id8" name="ebuild-license-variable">Ebuild LICENSE Variable</a></h2>
<p>Most ebuilds are for software which is released under a single license.  
In these cases, the current LICENSE variable can remain as is.  For 
example:</p>
<pre class="literal-block">
LICENSE=&quot;single-license&quot;
</pre>
<p>However, there are several ebuilds for software which is released under 
several licenses, of which the user must accept one, some or all <a class="footnote-reference" href="#id4" id="id2" name="id2">[2]</a>.  
To complicate this, some ebuilds include optional components which fall 
under a different license.</p>
<p>To accomodate these cases, LICENSE syntax should accomodate all 
functionality offered by a DEPEND string.  To keep things simple, this 
GLEP proposes that the syntax be identical.  For example:</p>
<pre class="literal-block">
LICENSE=&quot;mandatory-license \
    ( || choosable-licence1 chooseable-license-2 ) \
    useflag? ( optional-component-license )&quot;
</pre>
</div>
<div class="section" id="license-groups">
<h2><a class="toc-backref" href="#id9" name="license-groups">License Groups</a></h2>
<p>Almost all users are willing to install any software that is 
OSI-approved.  Other users are willing to install any software and 
implicitly accept its license.  To this end, portage will also need to 
handle grouping of licenses.</p>
<p>At a minimum, there needs to be the groups <tt class="literal"><span class="pre">OSI-APPROVED</span></tt> and 
<tt class="literal"><span class="pre">NON-INTERACTIVE</span></tt>.  <tt class="literal"><span class="pre">NON-INTERACTIVE</span></tt> licenses are those that don't 
require interactive acceptance for it to be considered legally binding.  
This is the current behaviour of portage.</p>
</div>
<div class="section" id="accept-license">
<h2><a class="toc-backref" href="#id10" name="accept-license">ACCEPT_LICENSE</a></h2>
<p>This GLEP proposes that a user be able to explicitly accept or decline 
licenses by editing a new variable <tt class="literal"><span class="pre">ACCEPT_LICENSE</span></tt> in 
<tt class="literal"><span class="pre">/etc/make.conf</span></tt>.  Again, to keep things simple, the syntax should be 
similar to that of other incrementals.  For example:</p>
<pre class="literal-block">
ACCEPT_LICENSE=&quot;-* accepted-license -declined-license&quot;
</pre>
<p>As an extension, <tt class="literal"><span class="pre">ACCEPT_LICENSE</span></tt> must also support <a class="reference" href="#license-groups">license groups</a>.  
This GLEP proposes that the license group be prepended by the special 
character &quot;<tt class="literal"><span class="pre">&#64;</span></tt>&quot;.  For example:</p>
<pre class="literal-block">
ACCEPT_LICENSE=&quot;-* &#64;OSI-APPROVED&quot;
</pre>
</div>
<div class="section" id="emerge-behaviour">
<h2><a class="toc-backref" href="#id11" name="emerge-behaviour">Emerge Behaviour</a></h2>
<p>At a minimum, emerge must handle unaccepted licenses the same way that 
it handles blockers.  That is, with the --pretend flag the 
not-yet-accepted license should be listed in the output.  Without the 
--pretend flag, emerge should stop before any software is installed.</p>
<p>This GLEP proposes that, unlike blockers, dependencies for software 
should be checked regardless of license acceptance.  Doing so will allow 
the user to review all necessary licenses before initiating an actual 
emerge.</p>
<p>It is also proposed that the --ask option will display an unaccepted 
license and ask for acceptance, but not update any configuration files 
at this stage.  Finally, the --verbose option should also list the 
licenses accepted for each package.</p>
</div>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id12" name="rationale">Rationale</a></h1>
<p>An implementation of this proposal should make it easy for users wishing 
to regulate their software without affecting those that don't.</p>
</div>
<div class="section" id="reference-implementation">
<h1><a class="toc-backref" href="#id13" name="reference-implementation">Reference Implementation</a></h1>
<p>TODO</p>
</div>
<div class="section" id="backwards-compatibility">
<h1><a class="toc-backref" href="#id14" name="backwards-compatibility">Backwards Compatibility</a></h1>
<p>There should be no change to the user experience without the user 
explicitly choosing to do so.  This mandates that the 
configuration variable be named <tt class="literal"><span class="pre">ACCEPT_LICENSE</span></tt> as some users may 
already have it set due to ebuilds using <tt class="literal"><span class="pre">eutil.eclass</span></tt>'s 
implementation.  It also mandates that the default <tt class="literal"><span class="pre">ACCEPT_LICENSE</span></tt> be 
set to <tt class="literal"><span class="pre">&#64;NON-INTERACTIVE</span></tt>.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id15" name="references">References</a></h1>
<table class="footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1" name="id3">[1]</a></td><td>Gentoo Linux Bug 17367
(<a class="reference" href="http://bugs.gentoo.org/show_bug.cgi?id=17367">http://bugs.gentoo.org/show_bug.cgi?id=17367</a>)</td></tr>
</tbody>
</table>
<table class="footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2" name="id4">[2]</a></td><td>Gentoo Linux Bug 34146 
(<a class="reference" href="http://bugs.gentoo.org/show_bug.cgi?id=34146">http://bugs.gentoo.org/show_bug.cgi?id=34146</a>)</td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id16" name="copyright">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
</div>
</div>

<hr class="footer"/>
<div class="footer">
<a class="reference" href="glep-0023.txt">View document source</a>.
Generated on: 2004-03-08 17:26 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.
</div>
</body>
</html>

