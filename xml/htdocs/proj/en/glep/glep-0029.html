<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/peps/pep-0001.html for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Docutils 0.3.3: http://docutils.sourceforge.net/" />
  <title>GLEP 29 -- USE flag groups</title>
  <link rel="stylesheet" href="tools/glep.css" type="text/css" />
</head>
<body bgcolor="white">
<table class="navigation" cellpadding="0" cellspacing="0"
       width="100%" border="0">
<tr><td class="navicon" width="150" height="35">
<a href="http://www.gentoo.org/" title="Gentoo Linux Home Page">
<img src="http://www.gentoo.org/images/gentoo-new.gif" alt="[Gentoo]"
 border="0" width="150" height="35" /></a></td>
<td class="textlinks" align="left">
[<b><a href="http://www.gentoo.org/">Gentoo Linux Home</a></b>]
[<b><a href="http://www.gentoo.org/proj/en/glep">GLEP Index</a></b>]
[<b><a href="./glep-0029.txt">GLEP Source</a></b>]
</td></tr></table>
<div class="document">
<table class="rfc2822 field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">GLEP:</th><td class="field-body">29</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">USE flag groups</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.1</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Ciaran McCreesh &lt;ciaranm&#32;&#97;t&#32;gentoo.org&gt;</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference" href="http://www.gentoo.org/cgi-bin/viewcvs/xml/htdocs/proj/en/glep/glep-0029.txt?cvsroot=gentoo">2004/08/22 01:59:24</a></td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference" href="glep-0012.html">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">19-August-2004</td>
</tr>
<tr class="field"><th class="field-name">Post-Date:</th><td class="field-body">21-August-2004</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title first"><a name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#abstract" id="id3" name="id3">Abstract</a></li>
<li><a class="reference" href="#motivation" id="id4" name="id4">Motivation</a></li>
<li><a class="reference" href="#specification" id="id5" name="id5">Specification</a><ul>
<li><a class="reference" href="#group-specification" id="id6" name="id6">Group Specification</a></li>
<li><a class="reference" href="#group-descriptions" id="id7" name="id7">Group Descriptions</a></li>
<li><a class="reference" href="#using-groups" id="id8" name="id8">Using Groups</a></li>
<li><a class="reference" href="#additional-issues" id="id9" name="id9">Additional Issues</a></li>
<li><a class="reference" href="#adding-new-groups" id="id10" name="id10">Adding New Groups</a></li>
</ul>
</li>
<li><a class="reference" href="#rationale" id="id11" name="id11">Rationale</a></li>
<li><a class="reference" href="#reference-implementation" id="id12" name="id12">Reference Implementation</a></li>
<li><a class="reference" href="#backwards-compatability" id="id13" name="id13">Backwards Compatability</a></li>
<li><a class="reference" href="#references" id="id14" name="id14">References</a></li>
<li><a class="reference" href="#copyright" id="id15" name="id15">Copyright</a></li>
</ul>
</div>
<p>BIG FAT DISCLAIMER: EARLY DRAFT, SEND COMMENTS TO ciaranm. EVERYTHING IN
HERE IS OPEN TO DISCUSSION. THE WRITING STYLE SUCKS. MAY CAUSE CANCER IN
PUPPIES.</p>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id3" name="abstract">Abstract</a></h1>
<p>Currently, USE flags must be selected on a one-by-one basis, making it
time-consuming to set up make.conf appropriately for a machine's role.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id4" name="motivation">Motivation</a></h1>
<p>USE flags allow the user to have software built in a manner which is
relevant for their system's role. For example, a desktop user will
probably want to enable optional X support in packages, whereas a server
user will not. However, with several hundred USE flags available, it can
be time consuming to set up make.conf appropriately.</p>
<p>This GLEP proposes a mechanism for grouping USE flags to simplify
selection.</p>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id5" name="specification">Specification</a></h1>
<div class="section" id="group-specification">
<h2><a class="toc-backref" href="#id6" name="group-specification">Group Specification</a></h2>
<p>A group shall consist of one or more USE flags. These groups are defined
in <tt class="literal"><span class="pre">${PORTDIR}/profiles/use.groups</span></tt>. It is proposed that uppercase names
only are used for groups to keep them visually distinct from normal USE
flags. The file format is similar to the existing use.* files:</p>
<pre class="literal-block">
SOME_GROUP flag1 flag2 flag3
OTHER_GROUP flag2 flag4
</pre>
<p>Groups may recursively include other groups. For consistency with GLEP 23
[1], it is proposed that group names are prefixed with an 'at' symbol (&#64;):</p>
<pre class="literal-block">
GROUP1 flag1
GROUP2 flag2 flag3 &#64;GROUP1
GROUP3 flag4
GROUP4 &#64;GROUP2 &#64;GROUP3 flag5
</pre>
<p>Users may create their own groups using <tt class="literal"><span class="pre">/etc/portage/use.groups</span></tt>. This
file overrides the profile settings in the case of duplicates.</p>
</div>
<div class="section" id="group-descriptions">
<h2><a class="toc-backref" href="#id7" name="group-descriptions">Group Descriptions</a></h2>
<p>Groups shall have a textual description associated with them in the same
way as USE flags. The file <tt class="literal"><span class="pre">${PORTDIR}/profiles/use.groups.desc</span></tt>
contains these:</p>
<pre class="literal-block">
DESKTOP Flags which are appropriate for most desktop systems
RECOMMENDED Flags which should be enabled on almost all systems
</pre>
</div>
<div class="section" id="using-groups">
<h2><a class="toc-backref" href="#id8" name="using-groups">Using Groups</a></h2>
<p>Groups may be used in <tt class="literal"><span class="pre">/etc/make.conf</span></tt>, <tt class="literal"><span class="pre">/etc/portage/package.use</span></tt> and
other places where USE flags are normally specified. Again, the &#64; symbol
is used. For example, a <tt class="literal"><span class="pre">make.conf</span></tt> for a desktop system might resemble:</p>
<pre class="literal-block">
USE=&quot;&#64;DESKTOP &#64;KDE perl alsa dvd&quot;
</pre>
</div>
<div class="section" id="additional-issues">
<h2><a class="toc-backref" href="#id9" name="additional-issues">Additional Issues</a></h2>
<p>Groups should <em>not</em> generally contain negative USE flags, as this would
lead to confusion. Groups are intended to specify what will be enabled for
a given role, not what will be turned off. For example, if the &#64;KDE group
disabled Gnome-related USE flags, and a user used <tt class="literal"><span class="pre">USE=&quot;&#64;GNOME</span> <span class="pre">&#64;KDE&quot;</span></tt> to
specify that they wanted both Gnome <em>and</em> KDE to be used where applicable,
chaos would ensue. However, for the sake of consistency, -flags should be
supported even if their use is strongly discouraged.</p>
<p>It is proposed that <tt class="literal"><span class="pre">-&#64;GROUP</span></tt> syntax should <em>not</em> be supported. Instead,
users wishing to turn most things off could use the <tt class="literal"><span class="pre">-*</span></tt> USE syntax
along with a group (for example, &#64;RECOMMENDED) which turned on flags (for
example, pam and readline) which should usually be used.</p>
</div>
<div class="section" id="adding-new-groups">
<h2><a class="toc-backref" href="#id10" name="adding-new-groups">Adding New Groups</a></h2>
<p>The actual groups to be created is beyond the scope of this GLEP, and any
group names contained herein should be treated as examples only. Creation
of new groups and changing a group's flags should be discussed on the
gentoo-dev mailing list as per existing policy for new global USE flags.</p>
</div>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id11" name="rationale">Rationale</a></h1>
<p>USE groups will simplify selecting an appropriate set of USE flags for a
system.</p>
</div>
<div class="section" id="reference-implementation">
<h1><a class="toc-backref" href="#id12" name="reference-implementation">Reference Implementation</a></h1>
<p>TODO</p>
</div>
<div class="section" id="backwards-compatability">
<h1><a class="toc-backref" href="#id13" name="backwards-compatability">Backwards Compatability</a></h1>
<p>The user will not need to make any changes to keep their current setup.
Users who are not running a portage version which supports groups can
carry on using current syntax with no side-effects.</p>
<p>Some tools which work with make.conf and / or USE flags (for example,
<tt class="literal"><span class="pre">ufed</span></tt>) will need to be updated to understand the new group syntax.</p>
<p>There is currently a dymanic list of USE flags available on the Gentoo
website [2]. For consistency, a similar list will be needed for USE
groups.</p>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id14" name="references">References</a></h1>
<table class="footnote" frame="void" id="id1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a name="id1">[1]</a></td><td>GLEP 23: Portage handling of ACCEPT_LICENSE
(<a class="reference" href="http://www.gentoo.org/proj/en/glep/glep-0023.html">http://www.gentoo.org/proj/en/glep/glep-0023.html</a>)</td></tr>
</tbody>
</table>
<table class="footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a name="id2">[2]</a></td><td><a class="reference" href="http://www.gentoo.org/dyn/use-index.xml">http://www.gentoo.org/dyn/use-index.xml</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id15" name="copyright">Copyright</a></h1>
<p>This document has been placed in the public domain.</p>
<blockquote>
vim: set tw=74 :</blockquote>
</div>
</div>

<hr class="footer" />
<div class="footer">
<a class="reference" href="glep-0029.txt">View document source</a>.
Generated on: 2004-08-22 01:47 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.
</div>
</body>
</html>

