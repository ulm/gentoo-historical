<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!--
This HTML is auto-generated.  DO NOT EDIT THIS FILE!  If you are writing a new
PEP, see http://www.python.org/peps/pep-0001.html for instructions and links
to templates.  DO NOT USE THIS HTML FILE AS YOUR TEMPLATE!
-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Docutils 0.3.0: http://docutils.sourceforge.net/" />
  <title>GLEP 19 -- Gentoo Stable Portage Tree</title>
  <link rel="stylesheet" href="tools/glep.css" type="text/css" />
</head>
<body bgcolor="white">
<table class="navigation" cellpadding="0" cellspacing="0"
       width="100%" border="0">
<tr><td class="navicon" width="150" height="35">
<a href="http://www.gentoo.org/" title="Gentoo Linux Home Page">
<img src="http://www.gentoo.org/images/gentoo-new.gif" alt="[Gentoo]"
 border="0" width="150" height="35" /></a></td>
<td class="textlinks" align="left">
[<b><a href="http://www.gentoo.org/">Gentoo Linux Home</a></b>]
[<b><a href="http://www.gentoo.org/proj/en/glep">GLEP Index</a></b>]
[<b><a href="http://www.gentoo.org/proj/en/glep/glep-0019.txt">GLEP Source</a></b>]
</td></tr></table>
<div class="document">
<table class="rfc2822 field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">GLEP:</th><td class="field-body">19</td>
</tr>
<tr class="field"><th class="field-name">Title:</th><td class="field-body">Gentoo Stable Portage Tree</td>
</tr>
<tr class="field"><th class="field-name">Version:</th><td class="field-body">1.3</td>
</tr>
<tr class="field"><th class="field-name">Last-Modified:</th><td class="field-body"><a class="reference" href="http://www.gentoo.org/cgi-bin/viewcvs.cgi/xml/htdocs/proj/en/glep/glep-0019.txt?cvsroot=gentoo">2004/01/30 02:27:28</a></td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Kurt Lieber &lt;klieber&#32;&#97;t&#32;gentoo.org&gt;</td>
</tr>
<tr class="field"><th class="field-name">Status:</th><td class="field-body">Draft</td>
</tr>
<tr class="field"><th class="field-name">Type:</th><td class="field-body">Standards Track</td>
</tr>
<tr class="field"><th class="field-name">Content-Type:</th><td class="field-body"><a class="reference" href="glep-0002.html">text/x-rst</a></td>
</tr>
<tr class="field"><th class="field-name">Created:</th><td class="field-body">26-Jan-2004</td>
</tr>
<tr class="field"><th class="field-name">Post-History:</th><td class="field-body">29-Jan-2004</td>
</tr>
</tbody>
</table>
<hr />
<div class="contents topic" id="contents">
<p class="topic-title"><a name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#abstract" id="id2" name="id2">Abstract</a></li>
<li><a class="reference" href="#motivation" id="id3" name="id3">Motivation</a></li>
<li><a class="reference" href="#specification" id="id4" name="id4">Specification</a></li>
<li><a class="reference" href="#rationale" id="id5" name="id5">Rationale</a></li>
<li><a class="reference" href="#implementation" id="id6" name="id6">Implementation</a></li>
<li><a class="reference" href="#backwards-compatibility" id="id7" name="id7">Backwards Compatibility</a></li>
<li><a class="reference" href="#copyright" id="id8" name="id8">Copyright</a></li>
</ul>
</div>
<div class="section" id="abstract">
<h1><a class="toc-backref" href="#id2" name="abstract">Abstract</a></h1>
<p>This GLEP is intended to propose a series of changes to the Portage tree that
are necessary to facilitate the use of Gentoo in areas where stability and
predictability are of paramount importance, including servers in enterprise
environments, mission critical workstations and other such installations.</p>
<p>The proposed solution involves creating a separate tree in Portage that is
updated far less often than the regular tree.  Outside of periodic updates,
this tree would only be updated with critical bugfixes and security patches.</p>
</div>
<div class="section" id="motivation">
<h1><a class="toc-backref" href="#id3" name="motivation">Motivation</a></h1>
<p>Enterprise customers typically value stability and a predictable upgrade path
over having the latest packages or features available to them.  Historically,
Gentoo Linux has been unable to provide such an environment due to the dynamic
nature of the Portage tree.</p>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id4" name="specification">Specification</a></h1>
<p>The Gentoo Infrastructure team will need to provide an additional Portage tree
on our rsync mirroring system.  This new tree will house the ebuilds
associated with the stable tree.  It also impacts all Gentoo developers
responsible for creating and updating ebuilds as they will be expected to
integrate the tagging of ebuilds for the stable tree into their normal
development process, both for the quarterly release cycles as well as
off-cycle bug and security fixes.</p>
<p>The Gentoo Documentation team will also be affected as they will be
responsible for updating installation documents to take these new features
into account.</p>
</div>
<div class="section" id="rationale">
<h1><a class="toc-backref" href="#id5" name="rationale">Rationale</a></h1>
<p>A basic outline of various ways of adding a &quot;stable&quot; tree to Portage was
discussed in the gentoo managers meeting on 26-Jan-04.  Consensus seemed to be
reached that such a solution was needed and that branching the gentoo-x86
repository was the appropriate way to accomplish this.  The largest area of
disagreement surrounded how specific ebuilds should be targeted for inclusion
in the stable tree.</p>
<p>One suggested solution was a simple branch of the CVS tree and having
developers work in two separate branches; one for the stable tree and
another for the traditional tree.  However, it was felt this would prove too
cumbersome in practice.</p>
<p>Another suggestion was to have a small group of dedicated gentoo-server
developers responsible for generating the contents of the stable tree, which
would provide more control and quality assurance over the ebuilds added to the
stable tree.  While this might prove effective for a small number of ebuilds,
it is quite likely that this model would not scale enough to allow for a large
number of ebuilds in the stable tree and, over time, the project would become
resource constrained and unable to meed future deadlines.</p>
<p>The suggestion that seemed to get the most traction was the creation of a new
&quot;stable&quot; keyword which would be added to appropriate ebuilds.  The use of
&quot;stable&quot; would signify ebuilds that are ready for production in the stable
tree while &quot;~stable&quot; would be reserved for ebuilds which may be appropriate
for the stable tree, but may require further testing before being deemed
&quot;ready for production&quot;. Off-cycle bug fixes and/or security updates may be
examples of ebuilds that require the ~server tag.</p>
</div>
<div class="section" id="implementation">
<h1><a class="toc-backref" href="#id6" name="implementation">Implementation</a></h1>
<p>While a 'stable' keyword was originally proposed, after further review, it was
determined this offered no way to allow arch-specific stable ebuilds.  As
such, this GLEP proposes the use of 'stable:&lt;arch&gt;' and '~stable:&lt;arch&gt;'
(stable:x86, stable:ppc, etc.)</p>
<p>A new, stable tree will be created by scanning for the 'stable:&lt;arch&gt;' and
'~stable:&lt;arch&gt;' keywords in the ebuilds and pulling those ebuilds and
associated files into a separate branch of CVS.  The stable tree should have
the following features:</p>
<ul class="simple">
<li>Updated quarterly.  Frozen during other times except for security/bug fixes</li>
<li>All ebuilds should remain in the tree for a minimum of one year.  This
allows users to upgrade as infrequently as once per year without risking
the stable portage tree leaving them behind without an upgrade path.</li>
</ul>
<p>As mentioned above, the &quot;stable&quot; tree will be updated quarterly, ideally in
unison with the release schedule of the main Gentoo branch.  This tree will be
untouched outside of this update schedule except in the following cases:</p>
<ul class="simple">
<li>Security fixes and patches which result in a GLSA</li>
<li>Bug fixes for bugs ranked as 'maj' or above (may be overridden at the
discretion of the package maintainer.)</li>
</ul>
<p>In both cases, the maintainer of the package will be responsible for ensuring
these patches are properly committed to the stable tree out of cycle.</p>
</div>
<div class="section" id="backwards-compatibility">
<h1><a class="toc-backref" href="#id7" name="backwards-compatibility">Backwards Compatibility</a></h1>
<p>All features proposed here are new additions to existing processes and
features.  There should be no impact on existing features and functionality.</p>
</div>
<div class="section" id="copyright">
<h1><a class="toc-backref" href="#id8" name="copyright">Copyright</a></h1>
<p>This document is licensed under the Creative Commons - Attribution / Share
Alike license. (<a class="reference" href="http://creativecommons.org/licenses/by-sa/1.0">http://creativecommons.org/licenses/by-sa/1.0</a>)</p>
</div>
</div>

<hr class="footer"/>
<div class="footer">
<a class="reference" href="glep-0019.txt">View document source</a>.
Generated on: 2004-01-30 02:25 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.
</div>
</body>
</html>

