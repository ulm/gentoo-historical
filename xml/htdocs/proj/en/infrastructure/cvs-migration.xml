<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/infrastructure/cvs-migration.xml,v 1.3 2006/05/02 20:56:07 antarus Exp $ -->

<guide link="/proj/en/infrastructure/cvs-migration.xml" lang="en" disclaimer="draft">
<title>CVS Migration Tracking Page</title>

<author title="Author">
  <mail link="antarus@gentoo.org">Alec Warner</mail>
</author>

<abstract>
This page was created to track progress regarding the migration of Gentoo's
CVS repositories to another versioning control system.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.0</version>
<date>2006-04-30</date>
<chapter>
<title>CVS Migration</title>
<section>
<title>Reasons for Migration</title>
<body>
<ul>
    <li>CVS does not support branching in a sane manner.</li>
    <li>CVS commits are not atomic.</li>
    <li>CVS has a lot of overhead when working with a remote checkout.</li>
</ul>
</body>
</section>

<section>
<title>Milestones for success</title>
<body>
<ul>
    <li>Selecting VCS for testing (COMPLETE).  VCS's for selection include Mercurial, SVN, and GIT.
	If you have other ideas for VCS that you think may be useful and can handle a project as large
	as Gentoo's gentoo-x86 module, please contact <mail link="antarus@gentoo.org">Alec Warner</mail></li>
    <li>Migrate gentoo-x86 to each VCS.  For status of this item, please see the table below.</li>
    <li>Create a set of generic stress tests for each VCS. (INCOMPLETE)</li>
    <li>Run stress tests on each VCS and record results. (INCOMPLETE)</li>
    <li>Analyze test results and choose a VCS that meets the needs of Gentoo.  Attempt a migration to
	this VCS with as many test users as possible</li>
    <li>From the above test, gauge hardware requirements and make a funding request to the Gentoo Foundation</li>
    <li>While waiting on funding approval, port Gentoo tools that rely on CVS to the new VCS.  These tools are
	listed below ( but not limited to the below ).
	<ol>
	    <li>Repoman</li>
	    <li>echangelog</li>
	    <li>CVS->rsync tools on master mirror</li>
	    <li>Developer documentation ( devrel docs )</li>
	</ol></li>
    <li>Once the hardware is set up, place an old migrated snapshot on it for testing.  Let developers get used
	to doing work on the new VCS system without breaking anything mission critical.</li>
    <li>Re-Analyze the hardware requirements and determine if the current hardware is sufficient.  Attempt to
	improve on and optimize configuration of VCS for users and performance.</li>
    <li>Test the above changes over a test period of 1 month</li>
    <li>Plan a final migration of gentoo-x86 from CVS to the chosen CVS</li>
</ul>
</body>
</section>
<section>
<title>Version Control Systems under consideration</title>
<body>
<table>
	<tr>
	    <th>System</th>
	    <th>Pros</th>
	    <th>Cons</th>
	    <th>Migration</th>
	    <th>Full Checkout</th>
	    <th>Space Considerations</th>
	    <th>Bandwidth Usage</th>
	    <th>Others?</th>
	</tr>
	<tr>
	    <ti>Subversion</ti>
	    <ti>Atomic Commits,
		Merging, Tagging, Branching is a copy operation,
		Versioned Metadata, Directory Versioning, Annotation</ti>
	    <ti>Twice the disk space</ti>
	    <ti>Migration Complete (cvs2svn)</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
	<tr>
	    <ti>GIT</ti>
	    <ti>Annotation;
		Two, interchangeable, on-disk formats are used: 
		An efficient, packed format that saves space and network bandwidth
		An unpacked format, optimized for fast writes and incremental work</ti>
	    <ti></ti>
	    <ti>Migration Pending; Spyderous is working on creating a proper Author Map</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
	<tr>
	    <ti>Mercurial</ti>
	    <ti>Atomic Commits, Annotation</ti>
	    <ti></ti>
	    <ti>Migration in Progress (dostrow)</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
	<tr>
	    <ti>CVS (Stats on the current usage)</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti>Migration Unnecessary</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
</table>
</body>
</section>
</chapter>
</guide>
