<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/infrastructure/cvs-migration.xml,v 1.6 2006/06/27 01:11:49 antarus Exp $ -->

<guide link="/proj/en/infrastructure/cvs-migration.xml" lang="en" disclaimer="draft">
<title>CVS Migration Tracking Page</title>

<author title="Author">
  <mail link="antarus@gentoo.org">Alec Warner</mail>
</author>

<abstract>
This page was created to track progress regarding the migration of Gentoo's
CVS repositories to another versioning control system.  This is being done in
conjuction with a Google Summer of Code project.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.0</version>
<date>2006-04-30</date>
<chapter>
<title>CVS Migration</title>
<section>
<title>Reasons for Migration</title>
<body>
<ul>
    <li>CVS does not support branching in a sane manner.</li>
    <li>CVS commits are not atomic.</li>
    <li>CVS has a lot of overhead when working with a remote checkout.</li>
</ul>
</body>
</section>

<section>
<title>Milestones for success</title>
<body>

<table>
    <tr>
        <th>Task</th>
        <th>Status</th>
        <th>Due Date</th>
        <th>Date of Completion</th>
        <th>Notes</th>
    </tr>
    <tr>
        <ti>Select VCS systems for testing.</ti>
        <ti>We have selected Mercurial, Subversion, GIT, and our control, CVS.</ti>
        <ti>May 22nd, 2006</ti>
        <ti>May 22nd, 2006</ti>
        <ti>Other VCS systems may be added provided a repository snapshot is provided by June 19th 2006.</ti>
    </tr>
    <tr>
        <ti>Convert gentoo-x86 to each VCS System.</ti>
        <ti>Subversion is done, GIT is still converting on two machines, Mercurial has been dropped for the time being.</ti>
        <ti>June 5th, 2006</ti>
        <ti>Pending Completion</ti>
        <ti>GIT is currently at 2005-06-15 out of 2006-04-01, Expected completed by Friday 
June 30th.  Mercurial has been dropped for the moment.  It still has quite a bit to 
concert and I am unsure if it is worth it to even test.  However if I can get a repo 
during the test period I will re-add it.</ti>
    </tr>
    <tr>
        <ti>Design a set of stress tests and analysis tools for Version Control Systems.</ti>
        <ti>In Progress</ti>
        <ti>June 12th, 2006</ti>
        <ti>Completed June 19th, 2006</ti>
        <ti>I was hoping to have a design prior to starting, but work commitments 
forced me to accelerate my project a bit.  This phase was moreso me scratching things 
out on a napkin ;)</ti>
    </tr>
    <tr>
        <ti>Implement a set of stress tests and analysis tools for Version Control Systems.</ti>
        <ti>In Progress</ti>
        <ti>June 19th, 2006</ti>
        <ti>June 30th(?)</ti>
        <ti>The statistical gathering code is basically done; it harvests stats from 
/proc and /sys in an attempt to gain some data on the status of the system.  The code 
to run the actual tests is still being worked on.</ti>
    </tr>
    <tr>
        <ti>Run the stress tests on each VCS system in order to generate useful a data set.</ti>
        <ti>Not yet started</ti>
        <ti>July 24th, 2006</ti>
        <ti>Pending Completion</ti>
        <ti>This has been pushed back a week, due to the testing scripts not being 
ready.  I also have a bit more time to test due to the fact that mercurial will not be
heavily tested (or not at all depending on whether I can conjure up a converted 
repository)</ti>
    </tr>
    <tr>
        <ti>Analyze the data and present this to the Gentoo Community.  Attempt to 
have the community choose a VCS system.  In the event that the community takes too 
long in determining their future VCS system; discuss with Lance and pick a VCS to 
continue the project with.</ti>
        <ti>Not yet started</ti>
        <ti>Aug 1st, 2006</ti>
        <ti>Pending Completion</ti>
        <ti></ti>
    </tr>
    <tr>
        <ti>Compose a Migration Plan to migrate to the new VCS System.</ti>
        <ti>Not yet started</ti>
        <ti>Aug 1st, 2006</ti>
        <ti>Pending Completion</ti>
        <ti>I will keep this scheduled as August 1st, since it should be a rather VCS 
independent plan.  The difficulty lies in suggesting hardware requirements and setup 
time for the new system.</ti>
    </tr>
    <tr>
        <ti>Update and author developer documentation related to the VCS system.  This will 
include updating any tools that are focussed on VCS systems such as echangelog, repoman, 
and the cvs->rsync scripts.</ti>
        <ti>Not yet started</ti>
        <ti>Aug 8th, 2006</ti>
        <ti>Pending Completion</ti>
        <ti>Genstef has provided svn support in echangelog.  I told him I'd have a 
patch in a bit for git as well.</ti>
    </tr>
    <tr>
        <ti>Set up test environment and give developers a change to use the new VCS 
when it is not live.  This is also a chance to make sure all tools work properly.</ti>
        <ti>Not yet started</ti>
        <ti>Aug 15th, 2006</ti>
        <ti>Pending Completion</ti>
        <ti></ti>
    </tr>
    <tr>
        <ti>Test in the testing environment for up to one month, ensure sufficient 
hardware requirements and also ensure that real world data matches data collected 
during the data mining.</ti>
        <ti>Not yet started</ti>
        <ti>Sept 15th, 2006</ti>
        <ti>Pending Completion</ti>
        <ti></ti>
    </tr>
    <tr>
        <ti>Set up the live system and migrate to it.</ti>
        <ti>Not yet started</ti>
        <ti>Oct 2nd, 2006</ti>
        <ti>Pending Completion</ti>
        <ti></ti>
    </tr>
</table>
</body>
</section>
<section>
<title>Version Control Systems under consideration</title>
<body>
<table>
	<tr>
	    <th>System</th>
	    <th>Pros</th>
	    <th>Cons</th>
	    <th>Migration</th>
	    <th>Full Checkout</th>
	    <th>Space Considerations</th>
	    <th>Bandwidth Usage</th>
	    <th>Others?</th>
	</tr>
	<tr>
	    <ti>Subversion</ti>
	    <ti>Atomic Commits,
		Merging, Tagging, Branching is a copy operation,
		Versioned Metadata, Directory Versioning, Annotation</ti>
	    <ti>Twice the disk space</ti>
	    <ti>Migration Complete (cvs2svn) (<uri link="http://dev.gentoo.org/~antarus/stats">conversion stats</uri>)</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
	<tr>
	    <ti>GIT</ti>
	    <ti>Annotation;
		Two, interchangeable, on-disk formats are used: 
		An efficient, packed format that saves space and network bandwidth
		An unpacked format, optimized for fast writes and incremental work</ti>
	    <ti></ti>
	    <ti>Migration Pending; Spyderous is working on creating a proper Author Map, Antarus has two machines performing a conversion.</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
	<tr>
	    <ti>Mercurial</ti>
	    <ti>Atomic Commits, Annotation</ti>
	    <ti></ti>
	    <ti>Migration plan dropped due to time constraints</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
	<tr>
	    <ti>CVS (Stats on the current usage)</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti>Migration Unnecessary</ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	    <ti></ti>
	</tr>
</table>
</body>
</section>
</chapter>
</guide>
