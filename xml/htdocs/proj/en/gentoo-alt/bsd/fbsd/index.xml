<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet href="/xsl/project.xsl" type="text/xsl"?>
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/gentoo-alt/bsd/fbsd/index.xml,v 1.31 2007/05/24 14:09:16 welp Exp $ -->

<!DOCTYPE project SYSTEM "/dtd/project.dtd">
<project>
<name>fbsd</name>
<longname>Gentoo/FreeBSD</longname>

<date>2006-05-02</date>

<author title="Author">Otavio Rodolfo Piske</author>
<author title="Author">
  <mail link="flameeyes@gentoo.org">Diego Petten√≤</mail>
</author>

<description>FreeBSD-based Gentoo system</description>

<longdescription>

<p>
Gentoo/FreeBSD (or Gentoo/FBSD, or G/FBSD) is an effort to create a complete
<uri link="http://www.freebsd.org/">FreeBSD</uri>-based Gentoo system, sharing
the complete administration facilities of Gentoo with the reliability of the
FreeBSD kernel and userland.
</p>
<p>
An experimental, yet incomplete release have been done, and it's possible
to install Gentoo/FreeBSD following the <uri link="/doc/en/gentoo-freebsd.xml">
install guide</uri>.
</p>
<p>
This project is still in its infancy. If you are interested in working on it,
please send an email to the <mail link="bsd@gentoo.org">Gentoo/*BSD</mail>
team.
</p>

</longdescription>

<dev role="lead">UberLord</dev>
<dev role="lead" description="Deputy lead">drizzt</dev>
<dev role="member">The_Paya</dev>
<dev role="member" description="GNOME portability">steev</dev>
<dev role="member">welp</dev>
<dev role="member">beandog</dev>

<resource link="/doc/en/gentoo-freebsd.xml">
  Gentoo/FreeBSD installation guide
</resource>
	
<extrachapter> <!-- Mini FAQ -->
<title>Mini FAQ</title>

<section>
<body>

<p>
<b>1. Is Gentoo/FreeBSD just a portage on top of FreeBSD system?</b><br />
No, Gentoo/FreeBSD aims to provide a complete FreeBSD-based system using Gentoo
design principles. This means that it's going to use the Gentoo init system,
administration utilities and toolchain support.
</p>

<p>
<b>2. Which toolchain is being used to build the system?</b><br />
Gentoo toolchain is being used. This means that GCC can be chosen between the
currently available versions in portage (3.3, 3.4, 4.0 and 4.1), and the same
goes with binutils, for which the needed patch form FreeBSD has already been
forwardported (and applied upstream for 2.17 series).
</p>

<p>
<b>3. Is Stack Smashing Protection supported?</b><br />
Yes, as we use Gentoo toolchain we also have GCC patched with Propolice, and
since 2 May 2006 the base system is patched to support SSP by default. The
implementation is not yet perfect as there are things that needs to be cleaned
up, but it works.
</p>

</body>
</section>

</extrachapter>

<extrachapter> <!-- Introduction -->
<title>Building a Gentoo/FreeBSD crosscompiler</title>

<section> <!-- Introduction -->
<title>Introduction</title>

<body>

<p>
Complementing the <uri link="http://www.gentoo.org/doc/en/cross-compiling-distcc.xml">DistCC Cross-compiling Guide</uri>,
this document will explain how to build a Gentoo/FreeBSD crosscompiler, as for
now it's not yet entirely automated.
</p>

<p>
The instruction here given works for building crosscompilers to Gentoo/FreeBSD,
as they use the ebuilds currently in portage. They might not work entirely for
generic vanilla FreeBSD as there are a few things that changes (like SSP support)
but you should be okay if you don't enable them.
</p>

<p>
Please if you find a problem with these when building a generic FreeBSD cross
compiler don't open a bug report unless you also have a patch, as there're not
enough people working on Gentoo/FreeBSD to support vanilla FreeBSD building.
</p>

</body>
</section>

<section> <!-- Prerequisites and crossdev -->
<title>Prerequisites and crossdev</title>

<body>

<p>
Before going to use crossdev you need to install some prerequisites that are
needed to complete the building of a stage4 compiler (C++ compiler). These are
needed because <c>crossdev</c> does not merge them before the rest.
</p>

<p>
The first package you need is <c>virtual/pmake</c>, or directly
<c>sys-devel/pmake</c>, that provides a BSD-compatible <c>make</c> command,
needed to build headers and the base library for Gentoo/FreeBSD.
</p>

<p>
The second package is a complement to the above <c>pmake</c>. Although it ships
with some files <path>.mk</path> (that contains BSD makefile templates used to
build applications using BSD style), they are too barebone to actually build
FreeBSD software, so you need to install the file set from FreeBSD. The ebuild
is <c>sys-freebsd/freebsd-mk-defs</c> and it's crosscompile aware: when building
on a non-FreeBSD system it installs in <path>/usr/share/mk/freebsd</path> and
uses GNU syntaxes.
</p>

<p>
The third package is <c>sys-apps/mtree</c>, that provides the BSD <c>mtree</c> command,
needed to build Gentoo/FreeBSD headers.
</p>

<note>
You might have <c>sys-freebsd/freebsd-mk-defs</c> masked by keyword, please
refer to the arch team of your architecture for its keywording.
</note>

<p>
Then you just need to use <c>sys-devel/crossdev</c> to build the crosscompiler
you want. Please note that the version specified in CHOST has to be the same
as the one used for <c>freebsd-lib</c>:
</p>

<pre caption="Building a crosscompiler for Gentoo/FreeBSD 6.1">
# <i>crossdev -s4 --gcc 3.4.6-r1 --libc '6.1*' --target i686-gentoo-freebsd6.1 --with-headers</i>
</pre>

<p>
The version of GCC should always be the last for the 3.4.x series, GCC 4 is
untested, the version of libc has to be accorded ot the version of FreeBSD you
want to build for, while the <c>--with-headers</c> option to crossdev forces
it to build the headers before <c>gcc</c> itself.
</p>

</body>
</section>
</extrachapter>

</project>

<!-- kate: space-indent on; indent-width 2; replace-tabs on; indent-mode normal; -->
