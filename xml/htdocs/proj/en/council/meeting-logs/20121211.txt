20:59 -!- grobian changed the topic of #gentoo-council to: Meeting now |  http://www.gentoo.org/proj/en/council/utctolocal.html?time=2000 | http://www.gentoo.org/proj/en/council/ | agenda: http://dev.gentoo.org/~grobian/agenda-20121211.txt
21:00 <@  grobian> yay, ceremony is about to begin
21:00 *** Chainsaw reports in for a meeting
21:00 <@  grobian> Betelgeuse: Chainsaw: ulm: dberkholz: WilliamH: scarabeus: ping
21:00 <+dberkholz> yo
21:00 <@ Chainsaw> grobian: Good evening. I am present.
21:01 <@  grobian> cool, prompt responses :)
21:01 <@      ulm> I'm here
21:01 < promethea> ok
21:01 <+dberkholz> now that i've added 3 different reminders, hoping i won't miss any by accident.
21:01 <@ Chainsaw> dberkholz: The system works!
21:01 <@  grobian> ohw man, what time is it for you?
21:01 <@  grobian> luchtime?
21:01 <+dberkholz> it's 2pm, just tend to get lost in my work
21:01 -!- sera [~quassel@gentoo/developer/sera] has joined #gentoo-council
21:02 <@ Chainsaw> dberkholz: Yes, when you're in the zone... I know how it is. Three reminders sounds about right.
21:03 -!- kmacleod [~ken@mail.trafficware.com] has joined #gentoo-council
21:04 <@ Chainsaw> Do we have numbers for WilliamH & scarabeus please?
21:05 <@  grobian> Betelgeuse: scarabeus: WilliamH: re-ping
21:05 <+dberkholz> while we're waiting, who's going to fosdem?
21:05 <@ Chainsaw> Oh, and Betelgeuse.
21:05 <@ Chainsaw> When is that again? Feb?
21:05 <+dberkholz> yeah first weekend in feb.
21:05 <+dberkholz> just so happens redmonk's running a conf in london right beforehand too. if you like good beer.
21:06 <@  grobian> ok, I guess we need to poke some people by phone
21:08 <@ Chainsaw> dberkholz: "Industrial analysts"?
21:08 <@      ulm> grobian: you're doing that?
21:09 <@  grobian> ulm, I'm searching numbers
21:09 <@  grobian> can use some help
21:09 <@      ulm> I can text Betelgeuse
21:09 <+dberkholz> Chainsaw: well, industry analyst. analyzing an industry. in this case that of software development infrastructure.
21:09 <@  grobian> think I just found scarabeus' number
21:10 <+dberkholz> Chainsaw: think gartner or forrester but not 5 years behind.
21:10 <@ Chainsaw> dberkholz: Ah, quite. Just not sure if it's my crowd or not.
21:11 <+dberkholz> Chainsaw: check out talks from our fall conf in the US, monktoberfest, here: http://redmonk.com/tv/
21:12 <@      ulm> I've texted WilliamH
21:12 <@  grobian> oh, cool
21:12 <@  grobian> I managed to do scarabeus
21:12 <@  grobian> I'll give it about 5 mins
21:12 <@      ulm> o.k. Betelgeuse has replied
21:13 <@Betelgeus> sorry everyone
21:13 *** WilliamH is here
21:13 <@  grobian> nice
21:13 <@      ulm> good :)
21:13 <@ Chainsaw> No worries. I was fairly sure neither of you would want to miss out on a good controversial subject.
21:13 -!- blueness [~hnsctq40@gentoo/developer/blueness] has joined #gentoo-council
21:13 <@ Chainsaw> Evening blueness.
21:13 <@  grobian> hehe
21:13 <  WilliamH> heh
21:13 <  blueness> plop!
21:13 <@Betelgeus> Should the Gentoo calendar gain notifications?
21:14 <@Betelgeus> Granted it could be annoying for some
21:14 <  blueness> afternoon Chainsaw
21:14 <@Betelgeus> dberkholz: I will be in Fosdem
21:14 <@Betelgeus> dberkholz: trip is already booked
21:14 <  WilliamH> I've been here just distracted by researching a personal matter.
21:15 <@ Chainsaw> Shall we make a start then?
21:15 <@  grobian> I think so yes
21:15 <@  grobian> ok
21:15 <@  grobian> agenda is online :)
21:15 <@ Chainsaw> The handling of separate /usr support.
21:15 <@  grobian> start with topic no 1?
21:16 <@  grobian> Chainsaw: grab the mic
21:16 <@ Chainsaw> So last month, I asked for a delay on deciding so that eudev had a chance to materialise.
21:16 <@ Chainsaw> It was called udev-ng at the time, and it has been through a little publicity stunt that udev upstream organised for us.
21:16 <@ Chainsaw> As promised last meeting, there is an ebuild in the tree that you can look at.
21:17 <@ Chainsaw> There's a bug tracker and there's a plan.
21:17 <@ Chainsaw> I feel that udev upstream can no longer hold us hostage, and that we have multiple choices now.
21:18 <@ Chainsaw> This way, even a newer udev can be moved towards stable and I have my exit strategy.
21:18 <  WilliamH> The other side is moving forward also.
21:18 *** WilliamH waits, I didn't mean to interrupt
21:18 <@ Chainsaw> I am happy with our original stance on separate /usr support, in that it has to work. I think both udev & eudev can now do that.
21:19 <@ Chainsaw> With & without an initrd. Especially the latter is important to me.
21:20 <@ Chainsaw> So, I don't think we actually need to change anything here. Except I will now drop any concerns I had with udev.
21:20 *** Chainsaw passes the microphone to WilliamH 
21:21 <  WilliamH> I still want to look into the gen_usr_ldscript issue and why we are splitting up where we install libraries.
21:21 <@  grobian> isn't that sort of separate from this issue?
21:21 <@ Chainsaw> WilliamH: I remain a firm disbeliever of the /usr merge.
21:22 <  WilliamH> We are forcing shared libraries to /lib* but not moving static libraries along with them.
21:22 <@ Chainsaw> grobian: But agreed, that is wholly separate of the separate /usr matter and of the udev stabilisation.
21:22 *** WilliamH isn't talking about the /usr merge.
21:22 <@ Chainsaw> WilliamH: It really sounds like you are.
21:22 <      ryao> So... Chainsaw asked me to add a comment of mine here. With regard to separate /usr, we should mandate that rules that depend on /usr go into /usr instead of /, which can be handled inside the ebuild.
21:22 <  WilliamH> Chainsaw: give me a second.
21:23 <     _AxS_> grobian: gen_usr_ldscript is separate from this issue, but it is the key motivator for why WilliamH tabled the issue last meething
21:23 <  WilliamH> I'm going to refer to an actual ebuild, let me get the info
21:23 <      ryao> That would make it possible to support a separate /usr in both sys-fs/eudev and sys-fs/eudev. The simplest way would be to have a udev-post-umount script that would do `udevadm trigger` after the /usr mount. That is all that we need to make it work.
21:23 <@  grobian> ryao, _AxS_: I'd like to focus on the udev/eudev topic for now
21:24 <  WilliamH> util-linux-2.22.ebuild.
21:24 <      ryao> s:sys-fs/eudev and sys-fs/eudev:sys-fs/eudev and sys-fs/udev:
21:24 <      ryao> That ignores the fact that sys-fs/udev is installing into /usr, although sys-fs/eudev does not do that.
21:24 <  WilliamH> Lines 103-104. That moves the shared libraries to /lib* but leaves the static libraries in /usr/lib*
21:25 <  WilliamH> Shouldn't we just use --libdir= when we configure the package and move all of the libraries to / if that's what we are going to do?
21:25 <@  grobian> WilliamH: yeah, that's because of this bug that;s referenced from the func about the linker searching and doing static linking first or something
21:26 <      ryao> Bug #4411
21:26 < willikins> ryao: https://bugs.gentoo.org/4411 "sys-devel/gcc uses static libs in /usr/lib before it will use a dynamic lib in /lib"; Gentoo Linux, Core system; RESO, FIXE; drobbins:toolchain
21:26 <  WilliamH> grobian: but why did we split up the libs to begin with and not use --libdir= on the configure call?
21:26 <@  grobian> WilliamH: I'm willing to discuss that, but I'd like to split that off from here
21:27 <@  grobian> we can talk about it in the open floor
21:27 <@ Chainsaw> grobian: Can we do that as AOB?
21:27 <  WilliamH> aob?
21:27 <@ Chainsaw> WilliamH: Any Other Business
21:27 <  WilliamH> oh
21:27 <  WilliamH> ok. :)
21:27 <@  grobian> although I think this is excellent material for more than just council peeps to contribute to (i.e. mailing list)
21:28 <@  grobian> ok, so do we agree on that this is it for this topci then?
21:29 <@  grobian> good., meeting chairs then
21:29 <@  grobian> who wants
21:29 <@  grobian> we have this nice list
21:29 <@ Chainsaw> Full of empty places.
21:29 <@  grobian> why don't you all do a bid for a date
21:29 <@      ulm> I could do feb or march
21:29 <@ Chainsaw> Happy to do January 8.
21:30 <+dberkholz> i'd like to see people do 2 or 3 in a row
21:30 <@  grobian> if you reload frequently, you should see change
21:30 <@  grobian> dberkholz: +1
21:30 <@ Chainsaw> Jan & Feb for me then.
21:30 <@  grobian> ulm can you do april?
21:30 <@      ulm> just looking
21:31 <@      ulm> yeah, should be fine. March 12 and April 9 for me then
21:31 <@  grobian> Chainsaw: feel free to assign someone to do the summary stuff, or whatever
21:31 <@  grobian> ok, then we have two slots left
21:31 <@  grobian> shall we give them to scarabeus? :P
21:32 <+dberkholz> unfortunately may-june will likely suck with my travel schedule or i would offer.
21:32 <@ Chainsaw> All in favour of assigning scarabeus to the two remaining slots, say aye.
21:32 <@  grobian> haha
21:32 <@  grobian> WilliamH: ?
21:32 <@  grobian> Betelgeuse: ?
21:32 *** WilliamH would offer but I just  got some news that may affect things for me by that time frame.
21:33 <@  grobian> alternative: we'll leave them open, for later meetings to decide
21:33 <@Betelgeus> grobian: I can take the rest of slots
21:33 <@  grobian> ok
21:33 <@  grobian> splendid
21:33 <  WilliamH> I'll still be here I'm sure but I don't know about having time to chair then.
21:33 <@  grobian> that's all set then
21:33 <@  grobian> cool
21:33 <@  grobian> open bugs
21:33 <@  grobian> ulm, is bug 383467 sufficiently closed for you?
21:33 < willikins> grobian: https://bugs.gentoo.org/383467 "Council webpage lacks results for 2010 and 2011 elections"; Website www.gentoo.org, Projects; CONF; hwoarang:jmbsvicetto
21:34 <@      ulm> master ballots for 2011 and 2012 are still missing
21:35 <@  grobian> can you update the bug, please
21:35 <@      ulm> yeah, will do
21:35 <@  grobian> ok, cool
21:35 <@  grobian> then we're ready for open floor
21:36 <@  grobian> anyone who wants to grab the mic?
21:36 *** Chainsaw passes the mic to WilliamH 
21:36 <  WilliamH> I just wanted to talk about the use of gen_usr_ldscript vs --libdir=
21:36 *** grobian plugs the chord into the amplifier
21:36 <@  grobian> yeah
21:37 <  WilliamH> I don't know why we split libs up and install static libs in /usr/lib then force shared libs to /lib.
21:37 <@  grobian> I think its partly legacy
21:37 <@  grobian> not all build-systems understand that
21:37 <  WilliamH> If we are going to support separate /usr, shouldn't we just use --libdir= and be done with it?
21:37 <@  grobian> I'd say not
21:38 <  WilliamH> I don't know of any build systems that separate shared vs static libs.
21:38 <@  grobian> because gen_usr_ldscript can be a noop, while --libdir would require some argument like $(get_libdir_for_usr_merge)
21:38 <  WilliamH> No, I'm not talking about the  /usr merge.
21:38 <@  grobian> which means, we already have it in place now, with almost zero cost
21:38 <@  grobian> instead of having to change each ebuild
21:38 <     _AxS_> grobian: i think his point would be that anything necessary for when /usr is unmounted gets a libdir=/lib for all items (.so, .a, .la, etc)
21:39 <@  grobian> yeah, but you only want those libs there that you need
21:39 <  WilliamH> or
21:39 <@  grobian> like for curses
21:39 <  WilliamH> maybe a use flag, sep-usr
21:39 <  WilliamH> busybox has a use flag like that.
21:39 <@  grobian> in Prefix I solved it with a special variable
21:40 <@  grobian> new installs have gen_usr_ldscript as noop
21:40 <  WilliamH> Actually it is solved in gen_usr_ldscript already in prefix.
21:40 <  WilliamH> It uses the prefix use flag to test
21:40 <  WilliamH> hang on
21:41 <@  grobian> I think it is more important to decide on the direction than the implementation here
21:41 <  WilliamH> give me a second to look, that's how it was when I looked last.
21:41 <@  grobian> I'd prefer to keep gen_usr_ldscript
21:41 <     _AxS_> might it be pertintent to know why gen_usr_ldscript and/or the status-quo is so undesirable?
21:41 <     _AxS_> from a technical perspective?
21:41 <@  grobian> WilliamH: http://overlays.gentoo.org/proj/alt/browser/trunk/prefix-overlay/eclass/toolchain-funcs.eclass#L623
21:42 <  WilliamH> grobian: look at toolchain-funcs.eclass, the case statement starting on line 621.
21:42 <@  grobian> _AxS_: I don't understand
21:42 <@  grobian> WilliamH: the one in gx86 is random/wrong
21:42 <@  grobian> look at the version prefix people use
21:42 <@  grobian> the link above
21:44 <     _AxS_> grobian: WilliamH is significantly opposed to the current resolution for bug 4411 (usage of gen_usr_ldscript to manage shared libs in / with static libs etc in /usr) , i was wondering if it would be pertinent to this forum to mention the technical reasons why this method is so undesireable and needs to change
21:44 < willikins> _AxS_: https://bugs.gentoo.org/4411 "sys-devel/gcc uses static libs in /usr/lib before it will use a dynamic lib in /lib"; Gentoo Linux, Core system; RESO, FIXE; drobbins:toolchain
21:44 <@  grobian> _AxS_: linking statically iso shared?
21:45 <@  grobian> that sounds obvious to me, but is that what you're asking?
21:45 <     _AxS_> grobian: i think you answered why we need gen_usr_ldscript.  I want to know why we need to get rid of it, in favour of say using --libdir=/lib instead
21:46 <@  grobian> _AxS_: I'd say people see it as the reason /lib is necessary, and hence want to remove it
21:46 <     _AxS_> are there any other technical reasons for it being bad?
21:46 <@  grobian> I don't  think it's bad at all
21:46 <     _AxS_> WilliamH: ?  your motivations?
21:46 <  WilliamH> grobian: so what's wrong with how g-x86 does this?
21:46 <@  grobian> well, it's odd of course ;)
21:47 <@  grobian> WilliamH: it's not being used in practice (the prefix bits)
21:47 <@  grobian> _AxS_: I think for systems that have /lib, gen_usr_ldscript currently does what it should do, in the tree, so it's good as it is
21:48 <  WilliamH> Bug 4411 was caused hit because we started splitting things, I'm just trying to figure out why we started splitting things to begin with.
21:48 < willikins> WilliamH: https://bugs.gentoo.org/4411 "sys-devel/gcc uses static libs in /usr/lib before it will use a dynamic lib in /lib"; Gentoo Linux, Core system; RESO, FIXE; drobbins:toolchain
21:48 <@  grobian> _AxS_: in that sense, killing it just for the sake that what it does looks weird looks wrong to me
21:48 <  WilliamH> I don't know why we started splitting up where libs go to begin with.
21:49 <@  grobian> WilliamH: if you want to run a binary (/bin/bash) from your / mounted partition that needs a shared library, it needs to be on that / mounted partition too
21:49 <@  grobian> so, libcurses is in /lib
21:49 <  WilliamH> Right, but shouldn't we also put the static library there too?
21:49 <@  grobian> no, because we'll never need it
21:49 <  WilliamH> libncurses.a in /lib as well?
21:49 <@      ulm> WilliamH: it's not needed at runtime
21:49 <@      ulm> so no reason to keep it in /
21:50 <@  grobian> you're not going to compile ever when you're in the crisis of not being able to mount your /usr
21:50 <@  grobian> and / was space-constrained
21:50 <  WilliamH> Wouldn't it be worth writing a patch to autotools to support separate library directories then?
21:50 <@  grobian> so you're not going to put any more in there than you need
21:50 <@  grobian> WilliamH: hard to define what is necessary in /lib and what not
21:50 <@  grobian> depends on what you install in /bin
21:51 <@  grobian> if you are happy with busybox (which is one big statically linked blob), you don't need much in /lib
21:51 <  WilliamH> I mean make it support something like --static-libdir= --shared-libdir= ...
21:52 <  WilliamH> Autotools only supports one libdir. should it support two, one for shared and one for static libs?
21:52 <@  grobian> the thing is, the static lib is only interesting for certain people these days
21:52 <@  grobian> I guess autotools upstream would say you just build twice, once shared, once static
21:52 <@  grobian> (works fine for binary distros)
21:53 -!- Philantrop [Philantrop@exherbo/developer/philantrop] has joined #gentoo-council
21:55 <  WilliamH> grobian: Do you know if anyone has proposed separate libdirs to them though?
21:55 <  WilliamH> I think autotools builds both library types in the same pass doesn't it?
21:56 <@  grobian> WilliamH: no, but given how long UNIX systems are doing this ....
21:56 <@  grobian> really depends on the build-system
21:56 <@  grobian> libtool knows that it can repackage the objects in an archive, or link them in a shared object
21:56 <     _AxS_> WilliamH: autotools is very dependent on just one libdir -- other installation types are fairly easy to change the install location of, libraries is not one of them.
21:57 <@  grobian> some upstreams first build the archive, then tell the linker to create a shared object
21:57 <@  grobian> other makefiles only support one of the two, so you have to call it twice with a different target, and reuse the coincidentally still available built objects
21:58 <     _AxS_> still, what would doing this at configure time rather than install/pkg_postinst time gain us?
21:59 <@  grobian> I guess in effect it gains us nothing, because we're just doing the work in another way
21:59 <@  grobian> and we shove more stuff in /lib
21:59 < scarabeus> ah fuck
21:59 < scarabeus> i thought the meeting starts now
22:00 <@  grobian> lol
22:00 <     _AxS_> scarabeus: :)  did you want to chair some meetings in 2013?
22:00 <     _AxS_> you might have to bump someone...
22:01 <@  grobian> WilliamH: _AxS_: shall we close the meeting?
22:01 < scarabeus> grobian: also seems it was not mine number :P (i have only one since i bought phone so that one aint workign)
22:01 <  WilliamH> go ahead and close it for now.
22:01 <@  grobian> I used the one you emailed
22:01 <  WilliamH> I may bring up gen_usr_ldscript on -dev.
22:01 <@  grobian> ok, meeting closed, thanks all
22:01 <@  grobian> WilliamH: good
22:01 <@      ulm> grobian: thank you for chairing
22:01 -!- grobian changed the topic of #gentoo-council to: Next meeting: 2013-01-08 20:00 UTC | http://www.gentoo.org/proj/en/council/utctolocal.html?time=2000 | http://www.gentoo.org/proj/en/council/
