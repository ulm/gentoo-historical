<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/java/Attic/tiger-faq.xml,v 1.21 2006/06/27 21:26:28 nichoj Exp $ -->

<guide link="/proj/en/java/tiger-faq.xml" lang="en">
<title>Gentoo Java 1.5 FAQ</title>

<author title="Author">
  <mail link="nichoj@gentoo.org">Joshua Nichols</mail>
</author>

<author title="Author">
  <mail link="karltk@gentoo.org">Karl Trygve Kalleberg</mail>
</author>

<abstract>
This FAQ covers issues related to Java 1.5 support on Gentoo.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>1.0</version>
<date>2006-04-23</date>

<chapter>
<title>Why has Java 1.5 been hard-masked for so long?</title>
<section>
<body>

<p>
  Java 1.5 is still hard masked because there are a number of issues which 
  make it unsafe to use a 1.5 JDK as your system VM.
</p>

<p>
  The first issue with Java 1.5 is backwards compatibility. If 
  you compile packages with a 1.5 JDK, the default behavior is that 
  the compiled classes can only be used in a 1.5 or above VM.
</p>

<p>
  The Java team is working on a solution to this which will compile classes for the lowest possible VM, as is detailed below.
</p>

<p>
  The other significant issue is that there are packages which are not 
  compatible with JDK 1.5, as they currently exist in the portage tree. For 
  example, several abstract classes and interfaces now have new abstract 
  methods in 1.5. This means that packages would need to be patched to 
  override these abstract methods. Failing that, you could also try using 
  1.4 to compile the offending package.  However, due to the backwards 
  compatibility problem mentioned above, you wouldn't be able to use 
  external libraries, because they were compiled only for 1.5.
</p>

</body>
</section>
</chapter>


<chapter>
<title>What work is being done to unmask Java 1.5?</title>
<section>
<body>
  <p>
    The good news is that work is that support for 1.5 is extremely close. The system to support 1.5 is currently in package.mask.
  </p>

  <p>
      To begin using it, you will need to add the appropriate entries to
      <c>/etc/portage/package.unmask</c>, and then follow the <uri
      link="java-upgrade.xml">upgrade
      guide</uri>.
  </p>

<pre caption="/etc/portage/package.unmask">
# Masked for testing changes to Java
>=dev-java/java-config-1.3
dev-java/java-config-wrapper
>dev-java/javatoolkit-0.1.0
>=dev-java/ant-core-1.6.5-r13
>=dev-java/ant-tasks-1.6.5-r2
>=dev-java/jikes-1.22-r12
>=dev-java/eclipse-ecj-3.1-r13
=dev-java/blackdown-jdk-1.3.1-r23
=dev-java/blackdown-jdk-1.4.1-r12
=dev-java/blackdown-jdk-1.4.2.03-r12
=dev-java/blackdown-jre-1.3.1-r20
=dev-java/blackdown-jre-1.4.1-r12
=dev-java/blackdown-jre-1.4.2.03-r11
=dev-java/ibm-jdk-bin-1.4.2.04-r10
=dev-java/ibm-jdk-bin-1.5.0-r11
=dev-java/ibm-jre-bin-1.4.2.05
=dev-java/jrockit-jdk-bin-1.4.2.10
=dev-java/jrockit-jdk-bin-1.5.0.06
=dev-java/kaffe-1.1.7
=dev-java/sun-jdk-1.4.2.12
=dev-java/sun-jdk-1.5.0.07
=dev-java/sun-jre-bin-1.4.2.12
=dev-java/sun-jre-bin-1.5.0.07
</pre>

  <p>
    The Java documentation has been updated for the usage of this new system,
	and is available at:
  </p>

    <ul>
      <li><uri link="/doc/java-user.xml">User Guide</uri></li>
      <li><uri link="java-devel.tml">Developer Guide</uri></li>
    </ul>
  <p>
    Additional material can be found at the following, under the 
    'Migration' section:
  </p>

  <ul>
    <li><uri link="https://projects.gentooexperimental.org/expj/">The ExpJ Wiki</uri></li>
  </ul>

  <p>
    <mail link="java@gentoo.org">We</mail> would really appreciate 
    any comments/suggestions/fixes/patches for this overlay.
  </p>

</body>
</section>
</chapter>
</guide>
