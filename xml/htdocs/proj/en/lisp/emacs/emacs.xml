<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/lisp/emacs/emacs.xml,v 1.9 2007/05/20 18:22:16 opfer Exp $ -->

<guide link="/doc/en/guide.xml" lang="en">
<title>GNU Emacs on Gentoo</title>

<author title="Author">
  <mail link="ulm@gentoo.org">Ulrich MÃ¼ller</mail>
</author>
<author title="Author">
  <mail link="opfer@gentoo.org">Christian Faulhammer</mail>
</author>

<abstract>
This document describes how GNU Emacs and associated packages are made
available in Gentoo.  These guidelines also describe the philosophy
how the packages are maintained.
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>0.2</version>
<date>2007-05-20</date>

<chapter>
<title>Introduction</title>
<section>
<title>What is Emacs?</title>
<body>

<p> 
<uri link="http://www.gnu.org/software/emacs/">Emacs</uri> is the
extensible, customizable, self-documenting real-time display editor.
</p>

</body>
</section>
</chapter>

<chapter id="available_versions">
<title>The editor itself</title>
<section>
<title>Available versions</title>
<body>
<p>
Currently the following Emacs versions are available:
</p>
<table>
<tr>
  <th>Package</th>
  <th>Version</th>
  <th>Type</th>
  <th>SLOT</th>
  <th>eselect name</th>
  <th>blocking depend</th>
</tr>
<tr>
<ti>emacs</ti>
  <ti>18.59-r4</ti>
  <ti>released</ti>
  <ti>18</ti>
  <ti>emacs-18</ti>
  <ti></ti>
</tr>
<tr>
  <ti>emacs</ti>
  <ti>21.4-r12</ti>
  <ti>released</ti>
  <ti>21</ti>
  <ti>emacs-21</ti>
  <ti></ti>
</tr>
<tr>
  <ti>emacs-cvs</ti>
  <ti>22.0.98</ti>
  <ti>pre-release</ti>
  <ti>22</ti>
  <ti>emacs-22</ti>
  <ti>!=emacs-22*</ti>
</tr>
<tr>
  <ti>emacs-cvs</ti>
  <ti>22.0.99</ti>
  <ti>pre-release</ti>
  <ti>22</ti>
  <ti>emacs-22</ti>
  <ti>!=emacs-22*</ti>
</tr>
<tr>
  <ti>emacs-cvs</ti>
  <ti>22.0.9999-r10</ti>
  <ti>CVS (22_BASE branch)</ti>
  <ti>22</ti>
  <ti>emacs-22</ti>
  <ti>!=emacs-22*</ti>
</tr>
<tr>
  <ti>emacs</ti>
  <ti>(22.1)</ti>
  <ti>not yet released</ti>
  <ti>22</ti>
  <ti>emacs-22</ti>
  <ti>!=emacs-cvs-22.0*</ti>
</tr>
<tr>
  <ti>emacs-cvs</ti>
  <ti>22.1.50</ti>
  <ti>CVS (trunk)</ti>
  <ti>22</ti>
  <ti>emacs-22-cvs</ti>
  <ti></ti>
</tr>
<tr>
  <ti>emacs-cvs</ti>
  <ti>23.0.0-r6</ti>
  <ti>CVS (unicode-2 branch)</ti>
  <ti>23</ti>
  <ti>emacs-23</ti>
  <ti></ti>
</tr>
</table>

<p>
Revisions not included in above list are obsolete and will be removed
as soon as the newer revisions are keyworded appropriately.
</p>
</body>
</section>

<section>
<title>USE flags</title>
<body>
<p>
Emacs has many USE flags, most are easy to understand what they are
good for, others have some hidden "features" one should know about.
</p>
<table>
<tr>
  <th>Flag</th>
  <th>Description</th>
  <th>Notes</th>
</tr>
<tr>
  <ti>alsa</ti>
  <ti>Determine if ALSA should be used</ti>
  <ti>Emacs autodetects ALSA.  That test is patched out if the flag
  is not set.  This is for cases where ALSA is installed but the user
  does not wish support for it in Emacs.</ti>
</tr>
<tr>
  <ti>gif</ti>
  <ti>Support for GIF images.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>gtk</ti>
  <ti>USE the Gimp ToolKit as windowing toolkit (menu bar etc.)</ti>
  <ti>When this toolkit is activated along with alternative ones (see
  other USE flags), GTK is chosen.  This is in sync with upstream's whises.</ti>
</tr>
<tr>
  <ti>gzip-el</ti>
  <ti>Zip up all el files.</ti>
  <ti>The zip binary is autodetected.  So even when this USE flag is
  disabled but the binary is found, all el files will be compressed.
  The ebuild takes care by confusing the configure script.</ti>
</tr>
<tr>
  <ti>hesiod</ti>
  <ti>Use the hesiod name service system.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>jpeg</ti>
  <ti>Support for JPEG images.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>leim</ti>
  <ti>Extended methods for input encodings.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>lesstif</ti>
  <ti>A windowing toolkit.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>motif</ti>
  <ti>A windowing toolkit</ti>
  <ti></ti>
</tr>
<tr>
  <ti>nls</ti>
  <ti>This makes use of gettext, an easy way to provide translations
  of strings.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>nosendmail</ti>
  <ti>Don't pull in an mail transfer agent (MTA).</ti>
  <ti></ti>
</tr>
<tr>
  <ti>png</ti>
  <ti>Support for PNG images.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>sound</ti>
  <ti>Control the availability of sound support</ti>
  <ti></ti>
</tr>
<tr>
  <ti>source</ti>
  <ti>Install the C source files and make them available in the
  internal documentation system.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>spell</ti>
  <ti>Control the spell checking abilities.</ti>
  <ti>Emacs 22 and higher autodetect aspell in favor of ispell, so no
  actions needed.</ti>
</tr>
<tr>
  <ti>tiff</ti>
  <ti>Support for tiff images.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>toolkit-scroll-bars</ti>
  <ti>Instead of the internal scroll bars, the ones from the
  windowing toolkit are used.</ti>
  <ti>You will lose some functionality (split windows by clicking on
  the scroll bar for example).</ti>
</tr>
<tr>
  <ti>X</ti>
  <ti>Let Emacs use an X session if available.  Text mode can always
  be forced.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>Xaw3d</ti>
  <ti>A windowing toolkit.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>xft</ti>
  <ti>Choose an alternative font renderer.</ti>
  <ti></ti>
</tr>
<tr>
  <ti>xpm</ti>
  <ti>Support for xpm images.</ti>
  <ti>If disabled, all logos, icons etc. in Emacs are displayed in grayscale.</ti>
</tr>
</table>
</body>
</section>
</chapter>

<chapter>
<title>Packages</title>
<section id="location">
<title>Locations of files</title>
<body>
<p>
The following files are installed in different locations or under a
different name:
</p>

<ul>
  <li>Emacs executable: <path>/usr/bin/emacs-<e>suffix</e></path>,
      where <e>suffix</e> is normally equal to the Emacs major version</li>
  <li>Auxiliary programs (e.g., <path>ctags</path>):
      <path>/usr/bin/ctags-emacs-<e>suffix</e></path></li>
  <li>Man pages are named accordingly</li>
  <li>Info files of Emacs are installed in directory
      <path>/usr/share/info/emacs-<e>suffix</e>/</path></li>
</ul>

<p>
The programs are symlinked to their original names by the Emacs
<uri link="#eselect">eselect module</uri>.
</p>
</body>
</section>

<section>
<title>The site-lisp directory</title>
<body>
<p>
The regular location for Emacs lisp packages in Gentoo is
<path>/usr/share/emacs/site-lisp/<e>package</e>/</path>.
</p>

<p>
All site initialization for Gentoo-installed packages is added to
<path>/usr/share/emacs/site-lisp/site-gentoo.el</path>;
site-start.el is no longer managed by Gentoo. You are responsible for
all maintenance of site-start.el if there is such a file.
</p>

<p>
In order for this site initialization to be loaded for all users
automatically, as was done previously, you can add a line like this:
</p>
<p>
<c>(load "/usr/share/emacs/site-lisp/site-gentoo" nil t)</c>
</p>
<p>
to <path>/usr/share/emacs/site-lisp/site-start.el</path>.
Alternatively, that line can be added by individual users to their
initialization files, or for greater flexibility, users can select
which of the package-specific initialization files in
<path>/usr/share/emacs/site-lisp</path> to load.
</p>

</body>
</section>

<section id="eselect">
<title>Emacs eselect module</title>
<body>
<p>
Having several Emacs versions simultaneously installed on a system,
needs some caution by maintainers.  Usual pitfalls are file collisions
and installations of one slot using data from another.  As
described <uri link="#location">earlier</uri>, the executables are
suffixed with their corresponding version number.  All data files go
to similar directories, also distinguished by a version suffix.
</p>
<p>
To be independent of the installed version, the eselect module
from <path>app-admin/eselect-emacs</path> guarantees
that <path>/usr/bin/emacs</path> always points to the Emacs you want.
All ebuilds for the editor check if the symlink is set, and change it
to the highest available in the case where it does not exist.
</p>
</body>
</section>

<section>
<title>Provided virtuals</title>
<body>
<dl>
<dt>virtual/emacs</dt>
<dd>To be done</dd>
<dt>virtual/flim</dt>
<dd>To be done</dd>
<dt>virtual/gnus</dt>
<dd>To be done</dd>
</dl>
</body>
</section>

<section>
<title>Where Emacs team is upstream</title>
<body>
<note>To be done</note>
</body>
</section>
</chapter>
</guide>
