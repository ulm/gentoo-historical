<?xml version='1.0' encoding="utf-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/en/hardened/selinux/Attic/hb-selinux-faq.xml,v 1.4 2006/09/07 10:37:46 neysx Exp $ -->

<sections>
<version>1.3</version>
<date>2006-05-01</date>

<section><title>SELinux features</title>
<subsection><title>Does SELinux enforce resource limits?</title>
<body>
<p>
  No, resource limits are outside the scope of an access control system.  If you
  are looking for this type of support, GRSecurity and RSBAC are better choices.
</p>
</body></subsection>
</section>

<section><title>SELinux and other hardened projects</title>
<subsection><title>Can I use SELinux and GRSecurity (and PaX)?</title>
<body>
<p>
  Yes, SELinux can be used with GRSecurity and/or PaX with no problems; however,
  it is suggested that GRACL should not be used, since it would be redundant
  to SELinux's access control.
</p>
</body></subsection>
<subsection><title>Can I use SELinux and the hardened compiler (PIE-SSP)?</title>
<body>
<p>
  Yes.  It is also suggested that PaX be used to take full advantage
  of the PIE features of the compiler.
</p>
</body></subsection>
<subsection><title>Can I use SELinux and RSBAC?</title>
<body>
<p>
  Unknown.  Please report your results if you try this combination.
</p>
</body></subsection>
</section>

<section><title>SELinux and filesystems</title>
<subsection><title>Can I use SELinux with my primary filesystems?</title>
<body>
<p>
  SELinux can be used with ext2, ext3, JFS, and XFS.  Reiserfs (Reiser3) has
  extended attributes, but the support was never complete, and has been broken
  since 2.6.14.  Reiser4 is not supported.
</p>
</body></subsection>
<subsection><title>Can I use SELinux with my ancillary filesystems?</title>
<body>
<p>
  Yes, SELinux can mount ancillary filesystems, such as vfat and iso9660
  filesystems, with an important caveat.  All files in each filesystem will
  have the same SELinux type, since the filesystems do not support extended
  attributes.  Tmpfs is the only ancillary filesystem with complete extended
  attribute support, which allows it to behave like a primary filesystem.
</p>
</body></subsection>
<subsection><title>Can I use SELinux with my network filesystems?</title>
<body>
<p>
  Yes, SELinux can mount network filesystems, such as NFS and CIFS
  filesystems, with an important caveat.  All files in each filesystem will
  have the same SELinux type, since the filesystems do not support extended
  attributes.  In the future, hopefully network filesystems will begin to
  support extended attributes, then they will work like a primary filesystem.
</p>
</body></subsection>
</section>

<section><title>Portage error messages</title>
<subsection><title>I get a missing SELinux module error when using emerge:</title>
<body>
<pre caption="Portage message">
!!! SELinux module not found. Please verify that it was installed.
</pre>
<p>
  This indicates that the portage SELinux module is missing or damaged.
  Also python may have been upgraded to a new version which requires
  python-selinux to be recompiled.  Remerge dev-python/python-selinux.
  If packages have been merged under this condition, they must be relabed
  after fixing this condition.  If the packages needing to be remerged cannot
  be determined, a full relabel may be required.
</p>
</body></subsection>
</section>

<section><title>SELinux kernel error messages</title>
<subsection><title>I get a register_security error message when booting:</title>
<body>
<pre caption="Kernel message">
There is already a security framework initialized, register_security failed.
Failure registering capabilities with the kernel
selinux_register_security:  Registering secondary module capability
Capability LSM initialized
</pre>
<p>
  This means that the Capability LSM module couldn't register as the primary
  module, since SELinux is the primary module.  The third message means that it
  registers with SELinux as a secondary module.  This is normal.
</p>
</body></subsection>
</section>

<section><title>Setfiles error messages</title>
<subsection><title>When I try to relabel, it fails with invalid contexts:</title><body>
<pre caption="Invalid contexts example">
# make relabel
/usr/sbin/setfiles file_contexts/file_contexts `mount | awk '/(ext[23]| xfs).*rw/{print $3}'`
/usr/sbin/setfiles:  read 559 specifications
/usr/sbin/setfiles:  invalid context system_u:object_r:default_t on line number 39
/usr/sbin/setfiles:  invalid context system_u:object_r:urandom_device_t on line number 120
/usr/sbin/setfiles:  invalid context system_u:object_r:fonts_t on line number 377
/usr/sbin/setfiles:  invalid context system_u:object_r:fonts_t on line number 378
/usr/sbin/setfiles:  invalid context system_u:object_r:krb5_conf_t on line number 445
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 478
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 479
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 492
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 493
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 494
Exiting after 10 errors.
make: *** [relabel] Error 1
</pre>
<p>
  First ensure that /selinux is mounted.  If selinuxfs is not mounted, setfiles
  cannot validate any contexts, causing it to believe all contexts are
  invalid.  If /selinux is mounted, then most likely there is new policy that
  has not yet been loaded; therefore, the contexts have not yet become valid.
</p>
</body></subsection>
</section>


<!-- always keep this one as the bottom FAQ :) -->
<!-- comment out since the demo machine is down for an indefinite period of time
<section><title>Gentoo SELinux Demonstration Machine</title>
<subsection><body>
<p>
  This machine is not running user-mode linux, or in a chroot, it has SELinux
  mandatory access control.  No, you cannot install psybnc or an irc bot on the
  machine, unless you break the SELinux security and gain higher priviledge.
</p>
</body></subsection>
</section>
-->
<!-- dont put anything below here, this demo machine faq should be the last one -->
</sections>
