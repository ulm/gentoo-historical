<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/ja/hardened/selinux/Attic/hb-install-x86-medium.xml,v 1.1 2005/03/11 17:52:04 idani Exp $ -->

<!-- Translator: 小林弘樹  -->
<!-- Original revision: 1.2 -->

<sections>
<section>
<title>ハードウェア要件</title>
<subsection>
<title>はじめに</title>
<body>

<p>
始める前に、まず最初にGentooをうまくインストールするために必要なハードウェア要件は、何であるかを示します。
</p>

</body>
</subsection>
<subsection>
<title>x86アーキテクチャ</title>
<body>

<ul>
<li>
  1 Gb以上の空きディスク容量
</li>
<li>
  300 Mb以上のメモリ(RAM + swap)
</li>
<li>
  486+プロセッサと64 Mbのメモリ
</li>
</ul>

</body>
</subsection>
</section>
<section>
<title>選んでください</title>
<subsection>
<title>はじめに</title>
<body>

<p>
まだGentooを試してみることに興味がありますか？
よろしい、それでは使用したいインストールメディアを選びましょう。
そう、あなたは選択をするのです。
それらは全て同じではありませんが、結果はいつも同じ、Gentooベースのシステムとなります。
</p>

<p>
私たちが説明するインストールメディアは以下の通りです。
</p>

<ul>
<li>GentooのSELinux Minimal LiveCD</li>
<!--
<li>Gentoo's SELinux Universal LiveCD</li>
-->
</ul>

<p>
それぞれの単一のメディアには利点と欠点があります。
正当な決定をするためのすべての情報をあなたに与えるために、それぞれのメディアの賛否両論を記載します。
ですが、続ける前に、3つのstageを使ったインストールについて説明しましょう。
</p>

</body>
</subsection>
<subsection>
<title>3つのstage</title>
<body>

<p>
Gentoo Linuxは3つの<e>stage</e>と呼ばれるtarballファイルの内の1つを使用することによってインストールできます。
どれを選ぶかは、システムをどれくらい自分でコンパイルしたいかによります。
<e>stage1</e> tarballは、ブートストラップして、全てのシステムを何もないところからビルドしたい時に使われます。
<e>stage2</e> tarballは、ブートストラップされた&quot;準コンパイル済み&quot;状態から全てのシステムをビルドする時に使われます。
<e>stage3</e> tarballは、すでにビルドされた基本的なGentoo Linuxシステムを既に含みます。
後で説明するように、(カーネルやいくつかの自由選択のパッケージを除いて)何もコンパイルすることなくGentooをインストールすることもできます。
もしこれを行いたいなら、<e>stage3</e> tarballを使用しなければなりません。
</p>

<p>
ではどのstageを選択しますか？
</p>

<p>
<e>stage1</e>から始めると、最適化設定と構築時に組み込み可能な機能を、全面的に制御することができます。
それらは、あなたのシステムで初期段階から有効となります。
何をしているか把握できるパワーユーザには、<e>stage1</e>でのインストールが適しているでしょう。
Gentoo Linuxの内部動作についてより詳しく知りたい人にも、とても良いインストール方法です。
</p>

<p>
<e>stage1</e>でのインストールは、稼働中のインターネット接続がある時にのみ行うことができます。
</p>

<table>
<tr>
  <th>Stage1</th>
  <th>長所と短所</th>
</tr>
<tr>
  <th>+</th>
  <ti>
    最適化設定と構築時に組み込み可能な機能を、全面的に制御することができ、それらは、あなたのシステムで初期段階から有効となります
  </ti>
</tr>
<tr>
  <th>+</th>
  <ti>何をしているかを把握できるパワーユーザに適しています</ti>
</tr>
<tr>
  <th>+</th>
  <ti>Gentooの内部動作についてより詳しく学ぶことができます</ti>
</tr>
<tr>
  <th>-</th>
  <ti>インストールを完了するまでに長い時間がかかります</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    設定を微調整するつもりがないなら、おそらく時間の無駄です
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    ネットワーク無しのインストールには適しません
  </ti>
</tr>
</table>

<p>
<e>stage2</e>でのインストールは、ブートストラップの工程を飛ばすことができます。
私たちが<e>stage2</e>用に選定した最適化設定で満足できるなら最適です。
</p>

<p>
<e>stage2</e>でのインストールは、稼働中のインターネット接続がある時にのみ行うことができます。
</p>

<table>
<tr>
  <th>Stage2</th>
  <th>長所と短所</th>
</tr>
<tr>
  <th>+</th>
  <ti>ブートストラップ工程が必要ありません</ti>
</tr>
<tr>
  <th>+</th>
  <ti>stage1で始めるよりもインストールの所要時間は短いです</ti>
</tr>
<tr>
  <th>+</th>
  <ti>設定をまだ微調整できます</ti>
</tr>
<tr>
  <th>-</th>
  <ti>stage1よりは微調整できません</ti>
</tr>
<tr>
  <th>-</th>
  <ti>それでも、Gentooをインストールする最速の方法ではありません</ti>
</tr>
<tr>
  <th>-</th>
  <ti>私たちが選定したブートストラップ工程用の最適化設定を受け入れなければなりません</ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    ネットワーク無しのインストールには適しません
  </ti>
</tr>
</table>

<p>
<e>stage3</e>を選択すると、Gentoo Linuxの最速インストールが可能になりますが、システムの基本的な部分は、私たちが選定した最適化設定で構築されたものになります(それは、はっきり言って良い設定であり、安定性を維持しながら性能を向上させるために注意深く選ばれたものです)。
<e>stage3</e>は、構築済みパッケージを使用して Gentooをインストールしたい場合や、ネットワーク接続なしでインストールしたい場合にも必要です。
</p>

<table>
<tr>
  <th>Stage3</th>
  <th>長所と短所</th>
</tr>
<tr>
  <th>+</th>
  <ti>Gentooのベースシステムを構築するには最速の方法です</ti>
</tr>
<tr>
  <th>+</th>
  <ti>ネットワーク無しのインストールに適しています</ti>
</tr>
<tr>
  <th>-</th>
  <ti>システムの基本的な部分を微調整できません。既に構築済みです</ti>
</tr>
<tr>
  <th>-</th>
  <ti>stage1やstage2を使用したことを自慢することができません</ti>
</tr>
</table>

<p>
Gentooをインストールした後に別の最適化設定を使いたくなった場合、新しい最適化設定でシステム全体を再コンパイルできますが、その方法を知りたいと思うかもしれませんね。
</p>

<p>
では利用可能なストールメディアを見ていきましょう。
</p>

</body>
</subsection>
<subsection>
<title>GentooのLiveCD</title>
<body>

<p>
<e>GentooのLiveCD</e>は、それだけで自立したGentoo環境を含むブート可能CDです。
そのCDからLinuxを起動できます。
ブート中にハードウェアが検知され、適切なドライバがロードされます。
これらのLiveCDは、Gentoo開発者によってメンテナンスされています。
</p>

<p>
すべてのLiveCDはブートし、ネットワークをセットアップし、パーティションを初期化し、そして、インターネットからGentooインストールを開始することができます。
ですが、いくつかのLiveCDは動作中のネットワーク設定を行うことなくGentooをインストールすることができるように、全ての必要なソースコードも含んでいます。
</p>

<p>
これらのLiveCDは何を含んでいるのでしょうか？
</p>

</body>
</subsection>
<subsection>
<title>GentooのMinimal LiveCD</title>
<body>

<p>
これは、システムをブートして、ネットワークを準備し、Gentooインストールを続行することが唯一の目的である、小さくて、まじめなブータブルCDです。
これはどんなstage(もしくは、いくらかの場合、単独のstage1ファイル)、ソースコード、または構築済みパッケージも含みません。
<!-- For example the x86 variant of this 
LiveCD can be found in the <path>universal</path> subdirectory and is called
<c>selinux-x86-2004.2.iso</c>. -->
</p>

<table>
<tr>
  <th>SELinux Minimal LiveCD</th>
  <th>長所と短所</th>
</tr>
<tr>
  <th>+</th>
  <ti>最小なのでダウンロードに時間がかからない</ti>
</tr>
<tr>
  <th>+</th>
  <ti>全てのアーキテクチャに適している</ti>
</tr>
<tr>
  <th>+</th>
  <ti>
    ネットワークからstage tarballを取得することによって、stage1、stage2、stage3のどれでも実行できます
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>
    stageファイル、Portageスナップショット、構築済みパッケージを一つも含まないので、ネットワークなしでインストールするには適していません
  </ti>
</tr>
</table>

</body>
</subsection>
<!--
<subsection>
<title>Gentoo's Universal LiveCD</title>
<body>

<p>
Gentoo's Universal LiveCD is a bootable CD suitable to install Gentoo without
networking. It contains a stage1 and several stage3 tarballs (optimized for the
individual subarchitectures). For example the x86 variant of this CD is called
<c>install-x86-universal-2004.2.iso</c> and can be found in the
<path>universal</path> subdirectory.
</p>

<p>
If you take a closer look into <path>releases/x86/2004.2</path> you will see
that we also provide <e>Gentoo Package CDs</e> (in the <path>packagecd/</path>)
directory. This CD (which isn't bootable) only contains precompiled packages 
and can be used to install software after a succesfull Gentoo Installation. To 
install Gentoo, you only need the Universal LiveCD, but if you want 
OpenOffice.org, Mozilla, KDE, GNOME etc. without having to compile every 
single one of them, you need the Packages CD too. For example the i686
(a subarchitecture of x86) Packages CD is called <c>packages-i686-2004.2.iso</c>
and can be found in the appropriate subdirectory (i686).
</p>

<p>
You only need the Packages CD if you want to perform a stage3 with GRP
installation.
</p>

<table>
<tr>
  <th>Universal LiveCD with Packages CD</th>
  <th>Pros and Cons</th>
</tr>
<tr>
  <th>+</th>
  <ti>Packages CD is optimized to your subarchitecture</ti>
</tr>
<tr>
  <th>+</th>
  <ti>
    Packages CD provides precompiled packages for fast Gentoo installations
  </ti>
</tr>
<tr>
  <th>+</th>
  <ti>
    Contains everything you need. You can even install without a network
    connection.
  </ti>
</tr>
<tr>
  <th>-</th>
  <ti>Huge download</ti>
</tr>
</table>

</body>
</subsection>
-->
</section>
<section>
<title>Gentoo LiveCDをダウンロードして、CDに焼き、ブートする</title>
<subsection>
<title>LiveCDをダウンロードしてCDに焼く</title>
<body>

<p>
使用するGentoo LiveCDを選択します。
まず選んだLiveCDをダウンロードしてCDに焼くことから開始します。
何種類かのLiveCDについて既にお話しましたが、それらはどこにあるのでしょうか?
</p>

<p>
<uri link="/main/en/mirrors.xml">ミラーサイト</uri><uri link="/main/ja/mirrors.xml">(日本語訳)</uri>の中の一つから好きなLiveCD(と、望むなら同様にパッケージCD)をダウンロードできます。
LiveCDは<path>experimental/x86/hardened/livecd</path>ディレクトリにあります。
</p>

<impo>
インストールにはSELinux LiveCDを使用しなければなりません。
</impo>

<p>
そのディレクトリ内には、いわゆるISOファイルがあります。CD-Rに焼くことができる完全なCDイメージです。
</p>
<p>
ダウンロードしたファイルが壊れているかどうか心配な場合は、ダウンロードしたファイルのMD5チェックサムをチェックし、私たちが提供するもの(<path>livecd-x86-selinux.iso.md5</path>のようなファイル)と比較します。
Linux/Unixの<c>md5sum</c>ツールか、Windows用の<uri link="http://www.etree.org/md5com.html">md5sum</uri>でMD5チェックサムをチェックできます。
</p>

<p>
ダウンロードしたISOファイルをCDに焼くために、ロー(raw)モードを選んでください。
その方法は、使用するライタプログラム毎にまったく異なります。
ここでは<c>cdrecord</c>と<c>K3B</c>についてお話します。
より詳細な情報は、<uri link="/doc/en/faq.xml#isoburning">Gentoo FAQ</uri><uri link="/doc/ja/faq.xml#isoburning">(日本語訳)</uri>にあります。
</p>

<ul>
  <li>
    cdrecordを用いる場合、単に<c>cdrecord dev=/dev/hdc</c>として、ISOファイルのパスを続けて入力します。:) (<path>/dev/hdc</path>をあなたのCD-RWドライブのデバイスパスに置き換えてください)
  </li>
  <li>
     K3Bを用いる場合、メニューの<c>Tools</c> &gt; <c>CD</c> &gt; <c>Burn Image</c>を選択してください。
     次に'Image to Burn'エリアにISOファイルを選びます。最後に<c>Start</c>ボタンを押します。
  </li>
</ul>

</body>
</subsection>
<subsection>
<title>LiveCDからのブート</title>
<body>

<impo>
後の祭りにならないように、作業を始める前にこのサブセクション全部を読んでください。
</impo>

<p>
インストールCDが焼きあがったら、それをブートしましょう。
CDドライブから全てのCDを取り出し、システムをリブートしてBIOSに入ります。
入る方法はBIOSの種類毎に異なり、通常はDELかF1かESCキーを押します。
ハードディスクより前にCD-ROMからブートが試行されるように、BIOSでブート順を変更してください。
この設定は、だいたい"CMOS Setup"にあります。
こうしないと、CD-ROMが無視されてハードディスクからリブートされてしまうでしょう。
</p>

<p>
では、CD-ROMドライブにインストールCDを入れて(そんなの当たり前だけど)、リブートしてください。
Gentoo Linuxのロゴが入った派手なブートスクリーンが現れるはずです。
このスクリーンでは、デフォルトのブートオプションでブートプロセスを開始するためにEnterキーを押すか、ブートオプションを続けてカーネルを指定することによって、カスタムブートオプションでLiveCDをブートします。
</p>

<p>
カーネルを指定するって？
その通り、私たちは何種類かのカーネルをLiveCDに収めています。
デフォルトは<c>gentoo</c>です。他には、マルチCPUシステムサポートを有効にする<c>smp</c>や、フレームバッファを無効にした<c>-nofb</c>があります。
</p>

<p>
Gentoo Linuxを2.4カーネルでインストールしたいのなら<c>gentoo</c>か<c>gentoo-nofb</c>を、2.6カーネルでインストールしたいのなら<c>smp</c>か<c>smp-nofb</c>を選択することが推奨されています。
そうしなければ、互換性の問題に直面することでしょう。
</p>

<p>
利用可能なカーネルの概要を以下に示します。
</p>

<table>
<tr>
  <th>カーネル</th>
  <th>説明</th>
</tr>
<tr>
  <ti>permissive</ti>
  <ti>permissiveモードでのSELinux(デフォルト)</ti>
</tr>
<tr>
  <ti>enforcing</ti>
  <ti>enforcingモードでのSELinux</ti></tr>
<tr>
  <ti>seoff</ti>
  <ti>SELinux無効</ti></tr>
<tr>
  <ti>permissive-nofb</ti>
  <ti>permissiveモードでのSELinux、フレームバッファ無効</ti></tr>
<tr>
  <ti>enforcing-nofb</ti>
  <ti>enforcingモードでのSELinux、フレームバッファ無効</ti></tr>
<tr>
  <ti>seoff-nofb</ti>
  <ti>SELinux無効、フレームバッファ無効</ti></tr>
</table>

<p>
カーネルオプションも指定できます。
それらは、好きなように有効(無効)にできるオプション設定です。
以下のリストはブートスクリーンでF2キーを押したときに表示されるものと同じものです。
</p>

<pre caption="カーネルに渡すことができるオプション">
- agpgart       agpgartモジュールを読み込みます(グラフィックの問題、ロックアップなどがあるなら使用してください)
- doscsi        SCSIデバイスをスキャンします(動かなくなるイーサネットカードもあります)
- nodetect      hwsetup/kudzuとhotplugを実行しないようになります
- dofirewire    initrdでfirewireモジュールをmodprobeします(firewire接続のCD-ROMドライブなどを使用する場合向け)
- nousb         initrdでのusbモジュールのロードとhotplugを無効にします
- nodhcp        ネットワークカードが検出されてもDHCPを自動起動しません
- doataraid     initrdからIDE RAIDモジュールを読み込みます
- dopcmcia      pcmciaサービスを起動します
- noapm         apmモジュールの読み込みを無効にします
- noraid        evmsモジュールの読み込みを無効にします
- nohotplug     hotplugサービスの読み込みを無効にします
- ide=nodma     うまく作動しないIDEデバイスのためにDMAを強制的に無効にします
- docache       実行時に必要なCDの一部をメモリ上に全てキャッシュし、umount /mnt/cdromをして、別のCD-ROMをマウントできるようにします
- dokeymap      非USキーボード配置用のキーマップ選択を有効にします
- noapic        APICを無効にします(ネットワークカード、SCSIカードのようなハードウェアの問題があるなら、試してください)
- hdx=stroke    (smp/smp-nofbカーネルのみに有効)BIOSが大きなハードディスクを扱えなくてもハードディスク全部をパーティションで区切ることができます
</pre>

<p>
では、CDをブートしましょう。(デフォルトの<c>permissive</c>カーネルでは嬉しくないなら)カーネルとブートオプションを選択してください。
例として、カーネルパラメータに<c>dopcmcia</c>を指定して<c>permissive</c>カーネルをブートする方法を示します。
</p>

<pre caption="LiveCDのブート">
boot: <i>permissive dopcmcia</i>
</pre>

<p>
その後、別のブートスクリーンやプログレスバーに出迎えられます。
ブートプロセスが完了すると、スーパーユーザの&quot;root&quot;ユーザとして&quot;Live&quot; Gentoo Linuxに自動的にログインされます。コンソール上にrootユーザのプロンプト(&quot;#&quot;)が表示されるはずです。そしてAlt-F2やAlt-F3や Alt-F4を押すことによって別のコンソールに切り替えることもできます。
最初のコンソールに戻るにはAlt-F1を押します。
</p>

<p>
非USキーボードのシステムにGentooをインストールしているなら、<c>dokeymap</c>ブートオプションを付けてLiveCDを起動するようにしてください。
</p>

<p>
では、<uri link="#hardware">追加のハードウェア設定</uri>に進んでください。
</p>

</body>
</subsection>
<subsection id="hardware">
<title>追加のハードウェア設定</title>
<body>

<p>
Live CDがブートするときに、全てのハードウェアデバイスを検出し、そのハードウェアをサポートする適切なカーネルモジュールをロードしようとします。
それは、大抵の場合、とてもうまく機能します。
しかし、ときには(SPARC LiveCDは自動検出さえしません)、必要とするカーネルモジュールを自動でロードしないかもしれません。
PCI自動検出機能がシステムのハードウェアの一部を見逃してしまったら、手動で適切なカーネルモジュールをロードしなければなりません。
</p>

<p>
次の例では(ネットワークインターフェースのある種類をサポートする)<c>8139too</c>モジュールをロードしてみています。
</p>

<pre caption="カーネルモジュールのロード">
# <i>modprobe 8139too</i>
</pre>

</body>
</subsection>
<subsection>
<title>自由選択: ハードディスク性能の調整</title>
<body>

<p>
あなたが上級者なら、IDEハードディスクの性能を<c>hdparm</c>コマンドを使用して調整したいかもしれません。
以下のように<c>-tT</c>オプションを付けてディスクの性能をテストできます。(より正確な結果を得るためにそれを数回実行します)
</p>

<pre caption="ディスク性能のテスト">
# <i>hdparm -tT /dev/hda</i>
</pre>

<p>
調整するには、ディスクに<path>/dev/hda</path>(あなたのディスクで置き換えてください)を使用した以下の例(もしくは、あなた自身の経験)を使用します。
</p>

<pre caption="ハードディスク性能の調整">
<comment>DMAを有効にする:</comment>                             # <i>hdparm -d 1 /dev/hda</i>
<comment>DMAを有効にする + 安全な性能強化オプション:</comment>  # <i>hdparm -d 1 -A 1 -m 16 -u 1 -a 64 /dev/hda</i>
</pre>

</body>
</subsection>
<subsection id="useraccounts">
<title>自由選択: ユーザアカウント</title>
<body>

<p>
インストール用の環境にあなた以外の人にアクセス権を与える予定があるか、(セキュリティ上の理由により)root権限なしで<c>irssi</c>を使ってチャットしたいなら、必要なユーザアカウントを作成し、rootパスワードを変更する必要があります。
</p>

<p>
rootパスワードを変更するには、以下のように<c>passwd</c>ユーティリティを使用してください。
</p>

<pre caption="rootパスワードの変更">
# <i>passwd</i>
New password: <comment>(新しいパスワードを入力)</comment>
Re-enter password: <comment>(パスワードの再入力)</comment>
</pre>

<p>
ユーザアカウントを作成するには、最初にユーザを作成して、次にパスワードを設定します。
この作業には<c>useradd</c>コマンドと<c>passwd</c>コマンドを使用します。
次の例では、&quot;john&quot;というユーザを作成します。
</p>

<pre caption="ユーザアカウントの作成">
# <i>useradd john</i>
# <i>passwd john</i>
New password: <comment>(johnのパスワードを入力)</comment>
Re-enter password: <comment>(johnのパスワードを再入力)</comment>
</pre>

<p>
以下のようにして、<c>su</c>コマンドを使用してrootユーザから新しく作成したユーザにユーザIDを変更できます。
</p>

<pre caption="ユーザIDを変更">
# <i>su john -</i>
</pre>

</body>
</subsection>
<subsection>
<title>自由選択: インストール中にドキュメントを表示する</title>
<body>

<p>
インストールしている間にGentooハンドブック(CDからかオンラインからかのどちらか)を表示したい場合、ユーザアカウントを作成してあるかを確認してください(<uri link="#useraccounts">自由選択: ユーザアカウント</uri>を参照)。
その後、新しい端末に移るために<c>Alt-F2</c>を押して、そこでログインしてください。
</p>

<p>
CDにある文書を表示したいなら、以下のように<c>links2</c>コマンドをすぐに実行できます。
</p>

<pre caption="CD上のドキュメントの表示">
# <i>links2 /mnt/cdrom/docs/html/index.html</i>
</pre>

<p>
しかし、オンラインのGentooハンドブックは、CDで提供されるものよりも新しいので、そちらを使用する方が好まれます。
<e>ネットワーク設定</e>の章を完全に終了した後なら(そうしないと、文書を表示するためにインターネットに接続できないでしょう)、以下のように同様に<c>links2</c>を使用して表示できます。
</p>

<pre caption="オンラインドキュメントの表示">
# <i>links2 http://www.gentoo.org/doc/en/handbook/handbook-x86.xml</i>
</pre>

<p>
<c>Alt-F1</c>を押すことで、もとの端末に戻ることができます。
</p>

</body>
</subsection>
<subsection>
<title>自由選択: SSHデーモンの起動</title>
<body>

<p>
Gentooをインストールしている間に、他のユーザに(おそらくそのユーザは、Gentooをインストールする手伝いをするか、あなたのためにそれと同様のことをするという理由で)コンピュータへアクセスすることを許可したいなら、ユーザアカウントを作成し、(そのユーザを<e>完全に信用</e>できる場合<e>だけ</e>)おそらくrootパスワードを与える必要もあります。
</p>

<p>
SSHデーモンを起動するには、以下のコマンドを実行してください。
</p>

<pre caption="SSHデーモンの起動">
# <i>/etc/init.d/sshd start</i>
</pre>

<p>
sshdを使用できるようにするためには、まずネットワークをセットアップする必要があります。
<uri link="?part=1&amp;chap=3">ネットワーク設定</uri>の章に進んでください。
</p>

</body>
</subsection>
</section>
</sections>
