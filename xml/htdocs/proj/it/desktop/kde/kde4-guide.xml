<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/it/desktop/kde/Attic/kde4-guide.xml,v 1.1 2009/11/17 23:02:46 scen Exp $ -->

<guide link="/proj/it/desktop/kde/kde4-guide.xml" lang="it">
<title>Guida a KDE per Gentoo</title>

<author title="Autore">
  <mail link="tampakrap"/>
</author>
<author title="Autore">
  <mail link="scarabeus"/>
</author>
<author title="Autore">
  <mail link="jmbsvicetto"/>
</author>
<author title="Autore">
  <mail link="cryos"/>
</author>
<author title="Redazione">
  <mail link="keytoaster"/>
</author>
<author title="Redazione">
  <mail link="nightmorph"/>
</author>
<author title="Traduzione">
  <mail link="scen"/>
</author>

<abstract>
Questa guida spiega come installare e configurare KDE usando le ebuild
disponibili nell'albero di Portage. Verranno usati inoltre alcuni strumenti
provenienti dall'overlay git del team KDE (kde-testing).
</abstract>

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->
<license/>

<version>0.7</version>
<date>2009-11-16</date>

<chapter>
<title>KDE 3</title>
<section>
<title>Introduzione</title>
<body>

<p>
KDE 3 non viene più mantenuto dagli sviluppatori del progetto KDE, e la versione
3.5.10 rimane il loro ultimo rilascio. Inoltre, la maggior parte delle
applicazioni per KDE3 non sono più mantenute, in quanto sono già state
convertite per KDE4, o la loro conversione è in fase di esecuzione. Il team KDE
di Gentoo fornisce entrambi le ebuild di KDE 3 e KDE 4 per l'installazione base
di KDE e per diverse applicazioni correlate, e supporta una completa
installazione desktop fianco a fianco delle due versioni, incluse varie
applicazioni KDE. Si consiglia all'utente di installare ed usare un desktop KDE4
completo, e usare solamente le applicazioni KDE 3 di cui si ritiene la versione
per KDE4 non ancora soddisfacente per le proprie esigenze (o a causa di
caratteristiche mancanti, crash casuali, ecc.).
</p>

<warn>
Tenere ben presente che siccome KDE 3 non viene più mantenuto dal progetto
KDE stesso, è possibile e probabile che i bug report riguardanti le
applicazioni KDE 3 non vengano corretti, ma piuttosto chiusi come WONTFIX /
CANTFIX / UPSTREAM, oppure tenuti aperti per un lungo periodo di tempo fino a
quando non verrà fornita una correzione (patch).
</warn>

</body>
</section>
<section>
<title>Rimozione di KDE 3</title>
<body>

<p>
Attualmente KDE 3.5.10 è mascherato per tutte le architetture in quanto verrà
rimosso da Portage.
</p>

<p>
Il team KDE sta effettuando un repulisti delle varie applicazioni per KDE 3
rimuovendole dall'albero di Portage, poichè risultano vecchie, malfunzionanti e
non mantenute, e rimuovendo il supporto ad arts (con l'essenziale aiuto dei
team Media/Video). Quando questa operazione sarà conclusa, verrà rimosso il
supporto il supporto ad arts anche dai pacchetti base di KDE.
</p>

<p>
Sebbene non sia raccomandabile usare KDE 3 a causa delle sue problematiche di
sicurezza e malfunzionamenti, se proprio si <e>deve</e> installarlo, lo si
potrà trovare all'interno dell'<uri
link="http://git.overlays.gentoo.org/gitweb/?p=proj/kde-sunset.git;a=summary">
overlay kde-sunset</uri>.
</p>

<note>
Questo overlay è completamente non supportato da Gentoo. Non è mantenuto dal
team KDE, pertanto <b>non</b> segnalare nessuna problematica agli sviluppatori
Gentoo, su bugzilla, ecc.
</note>

</body>
</section>
</chapter>

<chapter>
<title>KDE 4</title>
<section>
<title>Introduzione</title>
<body>

<p>
KDE 4 è la versione corrente di KDE supportata dagli sviluppatori dell'omonimo
progetto. La versione di KDE 4 attualmente disponibile in Portage è la 4.3.1
(questa versione è considerata stabile dal progetto KDE). In aggiunta, gli
sviluppatori di KDE foniscono degli <uri
link="ftp://ftp.kde.org/pub/kde/unstable">snapshot</uri>
("fotografie", ndt) settimanali e i sorgenti più recenti tramite un <uri
link="http://websvn.kde.org">repository SVN</uri>. Il team KDE di Gentoo
fornisce le ebuild per gli snapshot e per i più recenti sorgenti del repository
SVN (quest'ultima tipologia di ebuild viene definita "live", ndt) attraverso
l'overlay <c>kde-testing</c>. Per poter utilizzare tutte queste alternative,
l'utente deve avere installazioni multiple parallele di KDE, tramite l'uso della
flag USE <c>kdeprefix</c>.
</p>

<p>
È possibile scegliere la versione di KDE ritenuta più appropriata alle proprie
esigenze:
</p>
<table>
  <tr>
    <ti>
      <uri link="#kde_portage">KDE tramite Portage (attualmente 4.3.1)</uri>
    </ti>
  </tr>
  <tr>
    <ti>
      <uri link="#snapshots">snapshot KDE (attualmente 4.3.X)</uri>
    </ti>
  </tr>
  <tr>
    <ti>
      <uri link="#live">ebuild KDE "live"</uri> (sorgenti da repository SVN,
      ndt)
    </ti>
  </tr>
</table>

</body>
</section>
<section>
<title>La flag USE kdeprefix</title>
<body>

<warn>
La flag USE <c>kdeprefix</c> è attualmente mascherata. Essa <b>non è
supportata</b> e non dovrebbe essere usata per nessun motivo dagli utenti, che
la potranno utilizzare solamente a proprio rischio e pericolo. Nei paragrafi
successivi verranno elencate le ragioni che hanno portato al mascheramento di
tale flag USE.
</warn>

<p>
La flag USE <c>kdeprefix</c> permette agli utenti di scegliere tra
un'installazione conforme alle specifiche FHS ("Filesystem Hierarchy Standard"
ovvero "Standard per la Gerarchia del Filesystem", ndt) (<c>-kdeprefix</c>) o
un'installazione "slotted" (ovvero con la possibilità di "affiancare" più
versioni nello stesso sistema, ndt) all'interno di una directory di KDE con un
prefisso (<c>+kdeprefix</c>).
</p>

<p>
Se <c>kdeprefix</c> è disabilitato (scelta predefinita) KDE verrà installato
nella posizione conforme ad FHS, ovvero <path>/usr</path>. Ciò comporta che
tutti i file verranno posizionati all'interno di <path>/usr</path>. Questa è la
modalità preferibile per la maggior parte degli utenti. L'inconveniente
dell'installazione conforme ad FHS è che non sarà possbile avere più di una
versione minore di KDE fianco a fianco (modalità precedente), es. KDE 4.3 e KDE
4.4.
</p>

<warn>
Non viene dato supporto nel caso si mescoli un'installazione KDE con
<c>+kdeprefix</c> e una con <c>-kdeprefix</c>, e tale pratica non è inoltre
raccomandabile. Se si vuole veramente la modalità kdeprefix nel proprio sistema,
bisognerà smascherarla ed abilitarla globalmente in <path>/etc/make.conf</path>
</warn>

<p>
Se <c>kdeprefix</c> è abilitato allora KDE verrà installato in
<path>/usr/kde/${SLOT}</path>, che permetterà di installare, per esempio, KDE
4.3, la versione live, ecc. in <path>/usr/kde/4.3</path>,
<path>/usr/kde/live</path>, e così via.

</p>

<warn>
Se si desidera passare dalla modalità <c>kdeprefix</c> a quella
<c>-kdeprefix</c> (o viceversa) è consigliabile rimuovere tutti i pacchetti KDE
e poi reinstallarli con la flag modificata. Se ciò non viene fatto, le
installazioni di KDE potrebbero avere problemi nel trovare determinate
librerie/plugin. Per ulteriori dettagli controllare la sezione <uri
link="#cleanup">Pulizia di KDE</uri>
</warn>

<p>
Recentemente <c>kdeprefix</c> è stato mascherato come impostazione predefinita,
in quanto generava molti problemi, ad esempio collisioni tra i medesimi
pacchetti quando c'erano due o più installazioni di KDE, o strani comportamenti
perfino quando una sola installazione KDE <c>+kdeprefix</c> era presente nel
sistema.
</p>

<p>
Esempi illustri di pacchetti aventi problemi come quelli appena elencati sono
<c>pykde4</c> e <c>amarok</c>. Fin da quando il team KDE di Gentoo aveva deciso
di procedere alla stabilizzazione di KDE 4, queste problematiche avevano bisogno
di essere preventivamente corrette. Siccome risultava difficile sistemarle, si è
deciso invece di mascherare la flag use. <b>Se si è veramente coscienti di
quello che si sta facendo</b> e si è sicuri di volere la flag USE
<c>kdeprefix</c> smascherata ed abilitata nel proprio sistema, aggiungere
kdeprefix globalmente in <path>/etc/make.conf</path> e smascherarla seguendo le
istruzioni successive.
</p>

<pre caption="Smascherare la flag use kdeprefix">
# <i>mkdir -p /etc/portage/profile</i>
# <i>echo "-kdeprefix" >> /etc/portage/profile/use.mask</i>
</pre>

</body>
</section>
<section id="kde_portage">
<title>Installare KDE 4.3.1 (da Portage)</title>
<body>


<note>
Per ridurre al minimo gli inconvenienti si raccomanda di partire con un
ambiente pulito. Leggere la sezione <uri link="#cleanup">Pulizia di KDE</uri>
per ulteriori informazioni.
</note>

<p>
L'installazione può essere eseguita sia usando i meta pacchetti sia usando i
"set" (insiemi di pacchetti, ndt).
</p>

<pre caption="Installazione di KDE usando i meta pacchetti">
# <i>emerge -av kde-meta:4.3</i> <comment>(contiene tutti i moduli di KDE)</comment>
# <i>emerge -av kdebase-meta:4.3 kdegames-meta:4.3</i> <comment>(installazione dei soli moduli prescelti)</comment>
</pre>

<p>
Per l'installazione tramite i "set" passare alla sezione <uri
link="#sets">Utilizzo dei Set</uri>.
</p>

</body>
</section>
<section id="snapshots">
<title>Installare gli snapshot di KDE 4.3.X (dall'overlay kde-testing)</title>
<body>

<warn>
Gli snapshot di KDE sono <b>versioni sperimentali</b>. Usarli a proprio rischio
e pericolo.
</warn>

<p>
Il progetto KDE fornisce <uri link="ftp://ftp.kde.org/pub/kde/unstable">snapshot
settimanali</uri> prelevati dal <uri
link="http://websvn.kde.org/trunk/">ramo principale (trunk) del repository
SVN</uri>. Attualmente KDE fornisce gli snapshot per la seria 4.3.X, e dopo il
rilascio della versione 4.4 cominceranno con la 4.4.60. I rilasci Beta e le
"Release Candidate" ("Candidate per il Rilascio", ndt) di KDE seguono il
seguente modello di snapshot:
</p>

<table>
<tr>
 <th>Versione Snaphot</th>
 <th>Versione KDE</th>
</tr>
<tr>
 <ti>4.X.85</ti>
 <ti>KDE 4.X Beta 1</ti>
</tr>
<tr>
 <ti>4.X.90</ti>
 <ti>KDE 4.X Beta 2</ti>
</tr>
<tr>
 <ti>4.X.95</ti>
 <ti>KDE 4.X Release Candidate</ti>
</tr>
</table>

<note>
Per ridurre al minimo gli inconvenienti si raccomanda di partire con un
ambiente pulito. Leggere la sezione <uri link="#cleanup">Pulizia di KDE</uri>
per ulteriori informazioni.
</note>

<note>
È necessario l'utilizzo di portage-2.2_rc*, pertanto aggiungere la voce
<c>~sys-apps/portage-2.2</c> al proprio file
<path>/etc/portage/package.unmask[/*]</path>.
</note>

<p>
Gli snapshot sono disponibili solamente tramite l'overlay <c>kde-testing</c>,
perciò come prima cosa bisognerà aggiungerlo al proprio sistema:
</p>

<pre caption="Installare l'overlay kde-testing tramite layman">
# <i>layman -f -a kde-testing</i>
<comment>Per maggiori informazioni riguardanti gli overlay, si prega di leggere
la <uri link="/proj/it/overlays/userguide.xml">Guida per gli Utenti agli Overlay
Gentoo</uri></comment>
</pre>

<p>
Se si è abituati ad utilizzare i repository git, non si vuole utilizzare layman
e si desidera effettuare la sincronizzazione manualmente in modo autonomo, si
può installare direttamente il repository:
</p>

<pre caption="Installare direttamente l'overlay kde-testing">
# <i>mkdir /&lt;repo-base-dir&gt;</i>
# <i>cd /&lt;repo-base-dir&gt;</i>
# <i>git clone git://git.overlays.gentoo.org/proj/kde.git</i>
</pre>

<p>
Gli utenti con sistemi stabili, per poter proseguire, devono aggiungere le
keyword necessarie per i pacchetti (per permettere l'installazione delle
versioni instabili, ndt). L'overlay <c>kde-testing</c> fornisce un file
package.keywords, che dovrà essere collegato in modo simbolico alla propria
directory package.keywords:
</p>

<pre caption="Creare il collegamento simbolico del file kde-4.3.keywords">
# <i>cd /etc/portage/package.keywords</i>
# <i>ln -s /percorso/all/overlay/kde-testing/Documentation/package.keywords/kde-4.4.keywords .</i>
<comment>Sostituire /percorso/all/overlay/ con la directory contenente l'overlay,
solitamente /usr/local/portage/layman/kde-testing, ndt</comment>
</pre>

<p>
L'installazione può essere eseguita sia usando i meta pacchetti sia usando i
"set" (insiemi di pacchetti, ndt).
</p>

<pre caption="Installazione degli snapshot di KDE usando i meta pacchetti">
# <i>emerge -av kde-meta:4.4</i> <comment>(contiene tutti i moduli di KDE)</comment>
# <i>emerge -av kdebase-meta:4.4 kdegames-meta:4.4</i> <comment>(installazione dei soli moduli prescelti)</comment>
</pre>

<pre caption="Installazion degli snapshot di KDE snapshot usando i set">
# <i>emerge -av @kde-4.3</i> <comment>(contiene tutti i moduli di KDE)</comment>
# <i>emerge -av @kdebase-4.3 @kdegames-4.3</i> <comment>(installazione dei soli moduli prescelti)</comment>
<comment>Per ulteriori informazioni vedere la sezione <uri link="#sets">Utilizzo dei Set</uri>.</comment>
</pre>

</body>
</section>
<section id="live">
<title>Installare le ebuild "live" di KDE (dall'overlay kde-testing)</title>
<body>

<warn>
Le ebuild "live" di KDE sono <b>versioni estremamente sperimentali</b>. Usarle a
proprio rischio e pericolo.
</warn>

<p>
KDE è Open Source, con tutto il suo codice disponibile alla consultazione
attraverso l'interfaccia <uri link="http://websvn.kde.org">KDE Websvn</uri> e al
checkout pubblico attraverso un account anonimo (anonsvn). Gentoo, in quanto
distribuzione basata su sorgenti, ha l'abilità di fornire ebuild "live" che
effettuano il checkout del codice sia dal ramo ("branch") più recente che da
quello principale (trunk). Attualmente, vengono forniti gli ebuild 4.3.9999 dal
ramo 4.3.
</p>

<table>
<tr>
 <th>Versione Ebuild</th>
 <th>Versione KDE</th>
</tr>
<tr>
 <ti>4.3.9999</ti>
 <ti>KDE 4.3.Branch</ti>
</tr>
<tr>
 <ti>9999</ti>
 <ti>KDE 4 Trunk (attualmente 4.4)</ti>
</tr>
</table>

<note>
Per ridurre al minimo gli inconvenienti si raccomanda di partire con un
ambiente pulito. Leggere la sezione <uri link="#cleanup">Pulizia di KDE</uri>
per ulteriori informazioni.
</note>

<note>
È necessario l'utilizzo di portage-2.2_rc*, pertanto aggiungere la voce
<c>~sys-apps/portage-2.2</c> al proprio file
<path>/etc/portage/package.unmask</path>.
</note>

<p>
Le ebuild "live" sono disponibili solamente tramite l'overlay
<c>kde-testing</c>, perciò come prima cosa bisognerà installarlo nel proprio
sistema:
</p>

<pre caption="Installare l'overlay kde-testing">
# <i>layman -f -a kde-testing</i>
<comment>Per maggiori informazioni riguardanti gli overlay, si prega di leggere
la <uri link="/proj/it/overlays/userguide.xml">Guida per gli Utenti agli Overlay
Gentoo</uri></comment>
</pre>

<p>
Gli utenti con sistemi stabili, per poter proseguire, devono aggiungere le
keyword necessarie per i pacchetti (per permettere l'installazione delle
versioni instabili, ndt). L'overlay <c>kde-testing</c> fornisce un file
package.keywords, che dovrà essere collegato in modo simbolico alla propria
directory package.keywords:
</p>

<pre caption="Creare il collegamento simbolico del file kde-4.X.9999.keywords o
kde-live">
# <i>cd /etc/portage/package.keywords</i>
# <i>ln -s /percorso/all/overlay/kde-testing/Documentation/package.keywords/kde-4.3.9999.keywords .</i><comment>(per il ramo (Branch) 4.3 )</comment>
# <i>ln -s /percorso/all/overlay/kde-testing/Documentation/package.keywords/kde-live.keywords .</i><comment>(per il ramo (Trunk) KDE 4.4)</comment>
<comment>Sostituire /percorso/all/overlay/ con la directory contenente l'overlay,
solitamente /usr/local/portage/layman/kde-testing, ndt</comment>
</pre>

<p>
L'installazione può essere eseguita sia usando i meta pacchetti sia usando i
"set" (insiemi di pacchetti, ndt).
</p>

<pre caption="Installazione delle ebuild live di KDE usando i meta pacchetti">
<comment>(Per il ramo (Branch) KDE 4.3)</comment>
# <i>emerge -av kde-meta:4.3</i> <comment>(contiene tutti i moduli di KDE)</comment>
# <i>emerge -av kdebase-meta:4.3 kdegames-meta:4.3</i> <comment>(installazione dei soli moduli prescelti)</comment>
<comment>(Per il ramo (Trunk) KDE 4.4)</comment>
# <i>emerge -av kde-meta:live</i> <comment>(contiene tutti i moduli di KDE)</comment>
# <i>emerge -av kdebase-meta:live kdegames-meta:live</i> <comment>(installazione dei soli moduli prescelti)</comment>
</pre>

<pre caption="Installazione delle ebuild live di KDE usando i set">
<comment>(Per il ramo (Branch) KDE 4.3)</comment>
# <i>emerge -av @kde-4.3</i> <comment>(contiene tutti i moduli di KDE)</comment>
# <i>emerge -av @kdebase-4.3 @kdegames-4.3</i> <comment>(installazione dei soli moduli prescelti)</comment>
<comment>(Per il ramo (Trunk) KDE 4.4)</comment>
# <i>emerge -av @kde-live</i> <comment>(contiene tutti i moduli di KDE)</comment>
# <i>emerge -av @kdebase-live @kdegames-live</i> <comment>(installazione dei soli moduli prescelti)</comment>
<comment>Per ulteriori informazioni vedere la sezione <uri link="#sets">Utilizzo dei Set</uri>.</comment>
</pre>

</body>
</section>
<section>
<title>Installazione delle applicazioni KDE 4</title>
<body>

<p>
Nell'overlay kde-testing è possibile trovare le ebuild live delle applicazioni
KDE 4. Sono disponibili nello slot :4 ma <b>non possono</b> essere installate
in paralello alle versioni normali. L'utente è libero di usare sia le
applicazioni KDE 4 nella versione "live" con KDE 4 installato tramite Portage,
sia di usare le applicazioni KDE 4 disponibili in Portage con la versione "live"
di KDE.
</p>

<note>
Inoltre è disponibile nell'overlay kde-testing un set con le applicazioni KDE 4
"live", @kde-extras-live e un set con le applicazioni Qt "live",
@qt-extras-live, nell'overlay qting-edge.
</note>

</body>
</section>
</chapter>

<chapter>
<title>Informazioni aggiuntive riguardo Installazioni/Rimozioni</title>
<section id="sets">
<title>Utilizzo dei Set</title>
<body>

<warn>
Portage 2.2_rcX è correntemente mascherato. Pertanto se si vogliono utilizzare
i set si prega di smascherare <c>~sys-apps/portage-2.2</c>.
</warn>

<p>
Una delle nuove caratteristiche fornite da Portage 2.2 sono i set.
</p>

<p>
I set permettono al team KDE di fornire un sostituto completo ai pacchetti
monolitici, con il bonus aggiuntivo della possibilità da parte degli utenti di
scegliere la rimozione dei pacchetti indesiderati dai set predefiniti. Ci sono
ancora alcune discussioni in atto prima che i set vengano inseriti nell'albero
di Portage. È possibile prelevare i set dalla dalla <uri
link="http://git.overlays.gentoo.org/gitweb/?p=proj/kde.git;a=tree;f=sets">
directory sets</uri> dell'overlay <c>kde-testing</c>, o scaricare un <uri
link="http://git.overlays.gentoo.org/gitweb/?p=proj/kde.git;a=snapshot;h=5b2fc54fa5d1c8aeddaeb05f044bf28754bb18be;sf=tbz2">
archivio tar.bz2</uri> e inserire quelli che si preferiscono in
<path>/etc/portage/sets</path> (è possibile consultare la lista dei set forniti
dal team KDE nell'overlay usando il primo collegamento).
</p>

<note>
Se si sta usando l'overlay kde-testing è possibile usare direttamente i set,
invece che copiarli in <path>/etc/portage/sets</path>.
</note>

<p>
Tra l'altro ci sono i set per ogni pacchetto KDE - @kdeaccessibility, @kdeadmin,
@kdeartwork, @kdebase, @kdeedu, @kdegames, @kdegraphics, @kdemultimedia,
@kdenetwork, @kdepim, @kdesdk, @kdetoys, e @kdeutils. C'è anche un set di set
(l'equivalente del vecchio pacchetto kde-meta) @kde, e lo stesso per specifica
versione, ovvero @kde-3.5 e @kde-4x, un set per le dipendenze di KDE @kdedeps,
un set per i pacchetti opzionali @kdeoptional e un set per i pacchetti suddivisi
("split", ndt) di qt @qt-split.
</p>

<p>
L'utente può installare un sistema kde completo eseguendo <c>emerge -av
@kde</c>. Gli equivalenti con la versione specifica sono molto utili per
disinstallare una vecchia versione, es. <c>emerge -C @kde-3.5</c>, o per
reinstallare tutti i pacchetti appartenenti ad una versione specifica, es.
<c>emerge -av1 @kde-4x</c>. Alcune caratteristiche avanzate, come la rimozione
di pacchetti indesiderati da un set, verranno supportate nei rilasci futuri di
Portage; è possibile ottenere maggiori informazioni leggendo il <uri
link="http://planet.gentoo.org/developers/genone/2008/09/29/more_extensions_to_package_set_support">
blog di Marius Mauch's (genone)</uri>. Parte di questo codice è stato già
rilasciato in portage-2.2_rc12, pertanto è possibile reinstallare tutti i
pacchetti installati di un set con il comando <c>emerge -av
@&lt;set&gt;/@installed</c> o avere un set
<path>/etc/portage/sets/kdebase-unwanted</path> e successivamente eseguire
<c>emerge -av @kdebase-@kdebase-unwanted</c>.
</p>

<p>
Si consiglia vivamente di installare il set <c>kdebase</c> in modo da ottenere
una sessione completa di KDE4. Nell'esempio seguente verranno installati i set
<c>kdebase</c> e <c>kdegames</c>.
</p>

<pre caption="Installare KDE">
# <i>emerge @kdebase @kdegames</i>
</pre>

<note>
Se si vuole controllare la lista dei set a disposizione di Portage, eseguire il
seguente comando: <c>emerge --list-sets</c>
</note>

<note>
Tutte le ebuild per le versioni di KDE maggiori o uguali a 4.1 richiedono
<c>sys-apps/portage-2.1.6</c> o versioni successive, in quanto da tale versione
in poi sono state implementate in modo completo le nuove specifiche EAPI 2 usate
in queste ebuild (per usare i set, invece, è richiesto
<c>sys-apps/portage-2.2_rc12</c> o versioni successive).
</note>

</body>
</section>
<section id="cleanup">
<title>Pulizia di KDE</title>
<body>

<p>
Per ridurre al minimo gli inconvenienti la miglior cosa è iniziare con un
ambiente pulito. È raccomandato nei seguenti casi:
</p>

<ul>
  <li>
    Quando si sta migrando da un'installazione <c>+kdeprefix</c> ad una
    <c>-kdeprefix</c> (e viceversa)
  </li>
  <li>
    Ritorno ad una versione precedente ("downgrade", ndt) di KDE (es. da
    versioni snapshots/ebuild live a una versione di Portage)
 </li>
 <li>Aggiornamento completo da KDE 3 a KDE 4 (e viceversa)</li>
 <li>Migrazione da un vecchio overlay</li>
</ul>

<p>
Due possibili modalità di rimozione di vecchie installazioni di KDE sono:
</p>

<pre caption="Commandi di unmerge">
# <i>emerge -C @kde-4.X @kdebase-4.X @kde-3.5</i> (usando i tipici set)
# <i>emerge -C $(qfile -C -q -e /usr/kde/%PREFIX%)</i> <comment>(sostituire %PREFIX% con la propria versione di KDE, es. 3.5, 4)</comment>
</pre>

<pre caption="Commandi di unmerge (applicabili solamente se si sta migrando da un vecchio overlay)">
# <i>cd /percorso/all/overlay/</i>
# <i>emerge -C $(find ./ -name \*.ebuild |sed -e "s:\.ebuild$::" -e "s:./::" |awk -F'/' '{print "="$1"/"$3}')</i>
</pre>

<p>
Il passaggio finale sarà quello di rimuovere il vecchio overlay in modo da non
creare conflitti con le ebuild di KDE. Inoltre si dovranno rimuovere anche i
vecchi file relativi agli unmask e keyword dei pacchetti.
</p>

<note>
Non dimenticarsi di eseguire <c>emerge --depclean</c> in modo da disinstallare
tutte le dipendenze inutilizzate.
</note>

</body>
</section>
<section>
<title>Ricostruire il database delle applicazioni</title>
<body>

<p>
Per ricostruire il database delle applicazioni KDE eseguire:
</p>

<pre caption="comando kbuildsycoca">
# <i>kbuildsycoca4 --noincremental</i>
</pre>

</body>
</section>
<section>
<title>Localizzazione/Internazionalizzazione</title>
<body>

<p>
Con il nuovo KDE ci sono nuovi sforzi di traduzione nella Localizzazione
piuttosto che nell'Internazionalizzazione. Questo può causare un po' di
confusione, ma non c'è da preoccuparsi: l'unica cosa che cambia è il nome.
</p>

<pre caption="Ottenere le traduzioni">
<comment>Per KDE 4 e KOffice 2:</comment>
# <i>emerge kde-l10n</i>
# <i>emerge koffice-l10n</i>
</pre>

</body>
</section>
<section>
<title>Migrare le configurazioni da 3.5 a 4.X</title>
<body>

<p>
KDE memorizza i propri file di configurazione, come impostazione predefinita,
nella directory <path>~/.kde</path>. Nelle ebuild di Gentoo tale comportamento,
in KDE 4.x, è stato modificato per permettere una migliore integrazione tra KDE
3.5 e 4.X quando si utilizza lo stesso account utente. Se si esporta la
variabile $KDEHOME questa modalità verrà aggirata, pertanto sì raccomanda
caldamente di non farlo: $KDEHOME farà sì che KDE 3.5 e 4.X usino la stessa
directory di configurazione, cosa che normalmente non è desiderabile accada.
</p>

<p>
KDE 3.5 usa <path>~/.kde</path> e la modalità predefinita FSH
(<c>-kdeprefix</c>) di KDE 4.x usa <e>~/.kde4</e>.
</p>

<p>
Le impostazioni non vengono migrate in modo predefinito. Se si vuol provare a
migrare le proprie impostazioni bisogna copiare la vecchia directory di
configurazione nella nuova posizione, prima di effettuare la procedura di
login. Per esempio:
</p>

<pre caption="Copiare la directory di configurazione">
$ <i>cp -r ~/.kde ~/.kde4</i>
</pre>

<p>
Se questa operazione ha successo, allora le proprio impostazioni verranno
migrate in modo completo. In caso contrario, è possibile effettuare il logout e
rimuovere la nuova directory di configurazione e partire con una pulita.
</p>

<impo>
Migrare ad una versione precedente, da 3.5 a 4.x, non è supportato.
</impo>

</body>
</section>
</chapter>
<chapter>
<title>Suggerimenti e Risoluzione dei problemi</title>
<section>
<title>Plasmoidi</title>
<body>

<p>
I plasmoidi sono dei nuovi oggetti plasma che possono migliorare la propria
esperienza desktop. Molti plasmoidi sono disponibili nella categoria kde-misc/.
Se il proprio plasmoide preferito risulta mancante, aprire un bug report e
qualcuno creerà sicuramente l'ebuild. Se si desidera installarli tutti, c'è un
set chiamato @plasmoids che contiene tutti i plasmoidi attualmente disponibili.
</p>

<note>
Molti plasmoidi sono disponibili nell'overlay kde-testing.
</note>

</body>
</section>
<section>
<title>x11-themes/plasma-themes</title>
<body>

<p>
Questa ebuild contiene diversi temi per plasma. La procedura per richiedere temi
addizionali è uguale a quella per i plasmoidi.
</p>

</body>
</section>
<section>
<title>x11-themes/gtk-engines-qt</title>
<body>

<p>
Questa ebuild è da utilizzare se si vuole che le proprie applicazioni GTK usino
un tema simile alle applicazioni Qt/KDE. La configurazione può essere trovata in
Impostazioni di Sistema->Aspetto->Stili e caratteri GTK.
</p>

</body>
</section>
<section>
<title>x11-themes/gtk-engines-qtcurve</title>
<body>

<p>
Questo è un altro tentativo di rendere identico l'aspetto delle applicazioni
GTK/Qt 3/Qt 4. Bisogna inoltre installare <c>x11-themes/qtcurve-qt4</c> per far
sì che funzioni con le applicazioni Qt 4/KDE 4.
</p>

</body>
</section>
<section>
<title>Akonadi si lamenta riguardo alla configurazione di MySQL</title>
<body>

<p>
Cominciare controllando i permessi in <path>/usr/share/config</path> e
<path>/usr/share/kde4</path>. Se sono 700 ("rwx------", ndt), bisognerà
aggiornarli ricorsivamente a 755 ("rwxr-xr-x", ndt).
</p>

<pre caption="Aggiornare i permessi di /usr/share/config">
# <i>chmod -R 755 /usr/share/{config,kde4}</i>
</pre>

<p>
Se ciò non risolve l'errore, bisogna aprire la configurazione di akonadi e
modificare la configurazione predefinita di mysql. Se non è in esecuzione
l'icona del vassoio ("tray", ndt), eseguire <c>akonaditray</c>, selezionare
"Configurazione Server Akonadi", attivare "Usare il server MySQL interno", e
premere il pulsante test. Se si vuole usare il server mysql e non l'eseguibile
integrato, è necessario assicurarsi che mysql sia in esecuzione.
</p>

</body>
</section>
<section>
<title>KDM non si avvia</title>
<body>

<p>
Cominciare controllando i permessi in /usr/share/config. Se sono 700
("rwx------", ndt), bisognerà aggiornarli ricorsivamente a 755 ("rwxr-xr-x",
ndt). Controllare la sezione precedente. Se ciò non risolve l'errore,
controllare il seguente avvertimento nell'ebuild di kdm:
</p>

<pre caption="avvertimento di kdm">
Se quando riavvii xdm, kdm non riesce ad avviarsi restituendo messaggi del tipo
gentoo kdm[2116]: X server startup timeout, terminating" in /var/log/messages,
decommentare la riga ServerTimeout in "grep kdmrc /var/db/pkg/kde-base/kdm-4.3.1/CONTENTS | cut -f2 -d " ""
e assicurarsi di incrementare il valore di timeout - con 60 dovrebbe funzionare
</pre>

<p>
Inoltre assicurarsi che i seguenti servizi siano avviati:
</p>

<pre caption="controllare ed avviare i servizi">
# <i>/etc/init.d/dbus status</i>
# <i>/etc/init.d/hald status</i>
# <i>/etc/init.d/consolekit status</i>
</pre>

<p>
Se non sono avviati, abilitarli sostituendo <c>status</c> con <c>start</c>, e
usare il comando <c>rc-update add dbus default</c> (sostituire "dbus" con il
nome del relativo servizio, ndt) per ciascuno di essi per aggiungerli al
runlevel default.
</p>

<p>
Infine, KDM potrebbe non avviarsi correttamente a causa di errori in
<path>/etc/X11/xorg.conf</path>. Controllare i propri log:
<path>/var/log/Xorg.0.log</path> e <path>/var/log/kdm.log</path> e correggere
conseguentemente <path>xorg.conf</path>. Per ulteriore aiuto è possibile
trovare i membri del team KDE di Gentoo su IRC (canale #gentoo-kde su Freenode).
</p>

</body>
</section>
<section>
<title>L'applet della batteria o le notifiche di solid non mostrano le
informazioni pertinenti</title>
<body>

<p>
Per fare in modo che l'applet della batteria o altre notifiche di solid possano
mostrare le informazioni pertinenti, bisogna che dbus e hald siano in
esecuzione.
</p>

<pre caption="controllare ed avviare dbus e hald">
# <i>/etc/init.d/dbus status</i>
# <i>/etc/init.d/hald status</i>
# <i>/etc/init.d/dbus start</i>
# <i>/etc/init.d/hald start</i>
</pre>

</body>
</section>
</chapter>
</guide>
