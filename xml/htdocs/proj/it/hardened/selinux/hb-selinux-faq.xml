<?xml version='1.0' encoding="utf-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/it/hardened/selinux/Attic/hb-selinux-faq.xml,v 1.1 2007/08/21 07:00:07 scen Exp $ -->

<sections>
<version>1.3</version>
<date>2006-05-01</date>

<section>
<title>Caratteristiche di SELinux</title>
<subsection>
<title>SELinux rinforza le limitazioni sulle risorse?</title>
<body>

<p>
No, i limiti sulle risorse sono all'esterno della visibilità del sistema di
controllo degli accessi. Se si è alla ricerca di un controllo di questo tipo,
GRSecurity e RSBAC sono scelte migliori.
</p>

</body>
</subsection>
</section>

<section>
<title>SELinux e gli altri progetti "hardened"</title>
<subsection>
<title>E' possibile utilizzare SELinux con GRSecurity (e PaX)?</title>
<body>

<p>
Si, SELinux può convivere con GRSecurity e/o PaX senza nessun problema;
comunque, non è consigliabile utilizzare GRACL, in quanto sarebbe ridondante con
il controllo degli accessi di SELinux.
</p>

</body>
</subsection>
<subsection>
<title>E' possibile utilizzare SELinux con il compilatore sicuro
(PIE-SSP)?</title>
<body>

<p>
Si. E' anche consigliabile che venga utilizzato PaX per ottenere il massimo
vantaggio dalle caratteristiche PIE del compilatore.
</p>

</body>
</subsection>
<subsection>
<title>E' possibile utilizzare SELinux con RSBAC?</title>
<body>

<p>
Non esistono casi certificati. Si prega di rendere noti eventuali risultati di
queste combinazioni.
</p>

</body>
</subsection>
</section>

<section>
<title>SELinux e i filesystem</title>
<subsection>
<title>E' possibile utilizzare SELinux con i principali filesystem?</title>
<body>

<p>
SELinux supporta ext2, ext3, JFS e XFS. Reiserfs (Reiser3) gestisce gli
attributi estesi, ma il supporto completo non è mai stato ultimato, ed è stato
bacato fino al kernel 2.6.14. Reiser4 non è supportato.
</p>

</body>
</subsection>
<subsection>
<title>E' possibile utilizzare SELinux con filesystem ausiliari?</title>
<body>

<p>
Sì, SELinux è in grado di montare filesystem ausiliari, come per esempio vfat
e iso9660, con un importante avvertimento: tutti i file in ogni filesystem
avranno lo stesso tipo di SELinux, dal momento che i filesystem non supportano
gli attributi estesi. Tmpfs è l'unico filesystem dipendente dotato di supporto
esteso completo, cosa che gli permette di comportarsi come un filesystem
primario.
</p>

</body>
</subsection>
<subsection>
<title>E' possibile utilizzare SELinux con i filesystem di rete?</title>
<body>

<p>
Si, SELinux è in grado di montare filesystem di rete, come NFS e CIFS, con un
importante avvertimento: tutti i file in ogni filesystem avranno lo stesso tipo
di SELinux, dal momento che i filesystem non supportano gli attributi estesi. In
futuro, si spera che i filesystem di rete comincino a supportare gli attributi
estesi, e quindi potranno lavorare come filesystem primari.
</p>

</body>
</subsection>
</section>

<section>
<title>Messaggi di errore di portage</title>
<subsection>
<title>Utilizzando emerge viene restituito un messaggio di errore riguardante la
mancanza il modulo di SELinux del tipo:</title>
<body>

<pre caption="Portage message">
!!! SELinux module not found. Please verify that it was installed.
</pre>

<p>
Questo messaggio indica che il modulo SELinux non è presente o risulta
danneggiato. Potrebbe essere anche accaduto che python sia stato aggiornato ad
una nuova versione che richiede che venga ricompilato python-selinux. Effettuare
nuovamente l'emerge di dev-python/python-selinux. Per i pacchetti installati in
questa condizione, occorre etichettarli nuovamente dopo aver corretto l'errore.
Se i pacchetti che hanno bisogno di essere reinstallati non possono essere
determinati, si rende necessaria una ri-etichettatura dell'intero filesystem.
</p>

</body>
</subsection>
</section>

<section>
<title>Messaggi di errore del kernel riguardanti SELinux</title>
<subsection>
<title>Durante l'avvio appare un messaggio di errore
"register_security":</title>
<body>

<pre caption="Messaggio del kernel">
There is already a security framework initialized, register_security failed.
Failure registering capabilities with the kernel
selinux_register_security:  Registering secondary module capability
Capability LSM initialized
</pre>

<p>
Questo messaggio indica che il modulo "Capability LSM" non può venire registrato
come modulo primario, dal momento che risulta essere SELinux il primario. Il
terzo messaggio indica che verrà registrato come modulo secondario di SELinux.
E' assolutamente normale.
</p>

</body>
</subsection>
</section>

<section>
<title>Messaggi di errore di Setfiles</title>
<subsection>
<title>Quando viene ripetuta l'etichettatura, il processo fallisce per contesto
invalido:</title>
<body>

<pre caption="Esempio di contesto invalido">
# make relabel
/usr/sbin/setfiles file_contexts/file_contexts `mount | awk '/(ext[23]| xfs).*rw/{print $3}'`
/usr/sbin/setfiles:  read 559 specifications
/usr/sbin/setfiles:  invalid context system_u:object_r:default_t on line number 39
/usr/sbin/setfiles:  invalid context system_u:object_r:urandom_device_t on line number 120
/usr/sbin/setfiles:  invalid context system_u:object_r:fonts_t on line number 377
/usr/sbin/setfiles:  invalid context system_u:object_r:fonts_t on line number 378
/usr/sbin/setfiles:  invalid context system_u:object_r:krb5_conf_t on line number 445
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 478
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 479
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 492
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 493
/usr/sbin/setfiles:  invalid context system_u:object_r:system_cron_spool_t on line number 494
Exiting after 10 errors.
make: *** [relabel] Error 1
</pre>

<p>
Anzitutto occorre assicurarsi che /selinux sia montato: in caso contrario,
setfiles non può convalidare nessun contesto, portando SELinux a credere che
nessun contesto sia valido. Se /selinux è montato, molto probabilmente è
presente una nuova politica che non è ancora stata caricata; di conseguenza, non
è ancora stato marcato valido nessun contesto.
</p>

</body>
</subsection>
</section>


<!-- always keep this one as the bottom FAQ :) -->
<!-- comment out since the demo machine is down for an indefinite period of time
<section><title>Gentoo SELinux Demonstration Machine</title>
<subsection><body>
<p>
  This machine is not running user-mode linux, or in a chroot, it has SELinux
  mandatory access control.  No, you cannot install psybnc or an irc bot on the
  machine, unless you break the SELinux security and gain higher priviledge.
</p>
</body></subsection>
</section>
-->
<!-- dont put anything below here, this demo machine faq should be the last one -->

</sections>