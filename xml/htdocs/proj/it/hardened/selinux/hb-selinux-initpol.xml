<?xml version='1.0' encoding="UTF-8"?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/it/hardened/selinux/Attic/hb-selinux-initpol.xml,v 1.1 2007/08/21 06:51:50 scen Exp $ -->

<sections>
<version>1.3</version>
<date>2004-11-16</date>

<section>
<title>Verificare le politiche disponibili</title>
<subsection>
<title>Politiche gestite (2006.1+)</title>
<body>

<p>
Per effettuare le seguenti operazioni occorre appartenere al ruolo
<c>sysadm_r</c>.
</p>

<p>
Una politica binaria dovrebbe essere disponibile nella cartella
/etc/selinux/{strict,targeted}/policy. Nel caso in cui non sia presente, occorre
installare una politica.
</p>

<pre caption="Installare una politica">
# <i>semodule -n -B</i>
</pre>

</body>
</subsection>
<subsection>
<title>Politiche non gestite (pre 2006.1+)</title>
<body>

<p>
Per effettuare le seguenti operazioni occorre appartenere al ruolo
<c>sysadm_r</c>.
</p>

<p>
Una versione binaria appropriata delle politiche dovrebbe essere disponibile
nella cartella /etc/security/selinux. Per esempio, le politiche versione 17
dovrebbero trovarsi in <c>/etc/security/selinux/policy.17</c>. Nel caso in cui
non sia presente, anzitutto Ã¨ necessario correggere il <uri
link="?part=4&amp;chap=1#doc_chap6_sect3">Makefile</uri> della politica; a
questo punto occorre compilare ed installare la politica.
</p>

<pre caption="Installare una politica">
# <i>cd /etc/security/selinux/src/policy</i>
# <i>make clean</i>
# <i>make install</i>
</pre>

</body>
</subsection>
</section>

<section>
<title>Assicurarsi che Init possa caricare la politica</title>
<subsection>
<body>

<p>
L'ultimo controllo necessario consiste nell'assicurarsi che init sia in grado di
caricare la politica. Eseguire <c>ldd</c> su init, e se viene restituito un
valore differente da libselinux, emergere nuovamente sysvinit.
</p>

<pre caption="">
# <i>ldd /sbin/init</i>
  linux-gate.so.1 =>  (0xffffe000)
  <comment>libselinux.so.1 => /lib/libselinux.so.1 (0x40025000)</comment>
  libc.so.6 => /lib/libc.so.6 (0x40035000)
  /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
</pre>

<p>
A questo punto occorre riavviare per fare in modo che init ottenga il contesto
corretto e carichi la politica.
</p>

</body>
</subsection>
</section>

</sections>