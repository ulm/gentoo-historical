<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/it/base/embedded/handbook/intro.xml,v 1.1 2008/04/06 15:57:55 scen Exp $ -->

<sections>

<abstract>
Un'introduzione al mondo embedded, ai cross-compilatori e ai draghi.
</abstract>

<version>0.1</version>
<date>2007-08-12</date>

<section>
<title>Preludio</title>
<body>

<p>
Il cross development, sviluppare cioè su una piattaforma per eseguire ciò che è
stato generato su di un'altra, è solitamente considerata un'arte oscura, che
richiede molte ricerche, fatta di tentativi ed errori, alla cui base c'è la
perseveranza. Gli intrepidi sviluppatori devono affrontare la carenza di
documentazione e la mancanza di toolkit open source maturi e completi per lo
sviluppo multi piattaforma. Il lavoro portato avanti dal <uri
link="/proj/en/base/embedded/">Progetto Gentoo Embedded</uri>, dal <mail
link="toolchain@gentoo.org">Gruppo Gentoo Toolchain</mail> e da altri
partecipanti ha prodotto e continua a migliorare un ambiente di sviluppo basato
su Gentoo che semplifica notevolmente il cross sviluppo.
</p>

</body>
</section>
<section>
<title>La Toolchain</title>
<body>

<p>
Il termine "toolchain" si riferisce all'insieme dei pacchetti usati per creare
un sistema (i "tool", ossia gli strumenti, che sono usati nella catena, "chain",
di eventi composta dal prendere dati input e generare dati in output ). E' una
definizione imprecisa se si guarda a quali pacchetti nello specifico sono
considerati parte della toolchain, ma al fine di mantenere le cose semplici,
verranno considerati tutti e solo i componenti necessari a compilare del codice
in qualcosa di divertente e utilizzabile.
</p>

<p>
La toolchain è composta dai seguenti elementi:
</p>

<ul>
  <li>
    <c>binutils</c> - Strumenti essenziali per la manipolazione di binari
    (include l'assembler ed il linker)
  </li>
  <li>
    <c>gcc</c> - La Collezione di Compilatori GNU (il compilatore C e C++)
  </li>
  <li>
    <c>glibc</c> o <c>uclibc</c> o <c>newlib</c> - La libreria C di sistema
  </li>
  <li>
    <c>linux-headers</c> - Gli header del Kernel necessari alla libreria C di
    sistema
  </li>
  <li><c>gdb</c> - Il debugger GNU</li>
</ul>

<p>
Tutti i sistemi Gentoo correttamente configurati hanno installata una toolchain
come parte del sistema base. Tale toolchain è configurata per generare binari
per la medesima piattaforma dove è installata.
</p>

<p>
Per generare binari su un sistema e far sì che essi possano essere eseguiti su
una diversa piattaforma, si avrà bisogno di una toolchain speciale - una
cosiddetta <e>cross toolchain</e> - specifica per la piattaforma di
destinazione. Gentoo mette a disposizione per questo scopo un semplice ma
potente strumento chiamato <c>crossdev</c>. Crossdev può generare e installare
sul sistema un numero arbitrario di cross toolchain, purché supportate dal GCC.
Dal momento che Gentoo installa tutti i file delle toolchain in directory
specifiche per ogni architettura, tali toolchain non interferiranno con quella
nativa di sistema.
</p>

</body>
</section>
<section>
<title>Variabili d'Ambiente</title>
<body>

<p>
Alcune variabili d'ambiente usate dalla toolchain di Gentoo e da Portage possono
confondere sviluppatori non esperti di cross development. La seguente tabella
illustra alcune variabili e fornisce dei valori tipo, basati sugli esempi di
cross development presentati in questa guida.
</p>

<table>
<tr>
  <th>Variabile</th>
  <th>Significato quando si genera una Cross-Toolchain</th>
  <th>Significato quando si generano dei "Cross Binari"</th>
</tr>
<tr>
  <th>CBUILD</th>
  <ti>Piattaforma su cui si sta generando la Toolchain</ti>
  <ti>Piattaforma su cui si stanno generando i binari</ti>
</tr>
<tr>
  <th>CHOST</th>
  <ti>Piattaforma su cui la cross-toolchain sarà eseguita</ti>
  <ti>Piattaforma su cui la cross-toolchain sarà eseguita</ti>
</tr>
<tr>
  <th>CTARGET</th>
  <ti>Piattaforma per cui la cross-toolchain sta generando i binari</ti>
  <ti>Non ha senso per i "cross-binari" -- non impostare</ti>
</tr>
<tr>
  <th>ROOT</th>
  <ti colspan="2">
    Percorso alla root virtuale (<path>/</path>) dove si andrà a installare
  </ti>
</tr>
<tr>
  <th>PORTAGE_CONFIGROOT</th>
  <ti colspan="2">
    Percorso alla root virtuale  (<path>/</path>) dove portage potrà trovare i
    suoi file di configurazione (come <path>/etc/make.conf</path>)
  </ti>
</tr>
</table>

<p>
Se, ad esempio, si avesse un desktop AMD64 con Gentoo e si desiderasse
sviluppare qualcosa per il proprio PDA, architettura ARM, la tabella illustrata
sopra apparirebbe così:
</p>

<table>
<tr>
  <th>Variabile</th>
  <th>Valore per Generare la Cross-Toolchain</th>
  <th>Valore per Generare i "Cross Binari"</th>
</tr>
<tr>
  <th>CBUILD</th>
  <ti><c>x86_64-pc-linux-gnu</c></ti>
  <ti><c>x86_64-pc-linux-gnu</c></ti>
</tr>
<tr>
  <th>CHOST</th>
  <ti><c>x86_64-pc-linux-gnu</c></ti>
  <ti><c>arm-unknown-linux-gnu</c></ti>
</tr>
<tr>
  <th>CTARGET</th>
  <ti><c>arm-unknown-linux-gnu</c></ti>
  <ti><e>non impostato</e></ti>
</tr>
<tr>
  <th>ROOT</th>
  <ti>
    <e>non impostare -- Come impostazione predefinita punta a <path>/</path></e>
  </ti>
  <ti><c>/percorso/dove/verrà/installato</c></ti>
</tr>
<tr>
  <th>PORTAGE_CONFIGROOT</th>
  <ti>
    <e>non impostare -- Come impostazione predefinita punta a <path>/</path></e>
  </ti>
  <ti><c>/percorso/ambiente/portage/per/arm/</c></ti>
</tr>
</table>

</body>
</section>
<section>
<title>Alcuni Utili Strumenti</title>
<body>

<ul>
  <li>
    <c>binutils-config</c> - Gestisce le versioni "slotted" (affiancate, ndT)
    delle binutils
  </li>
  <li>
    <c>gcc-config</c> - Gestisce le versioni "slotted" (affiancate, ndT) del GCC
  </li>
  <li>
    <c>crossdev</c> - Genera ed installa toolchain "slotted" (affiancate, ndT)
    per le piattaforme supportate dal GCC
  </li>
  <li>
    <c>qpkg</c> - Crea pacchetti binari da ebuild cross-compilati nella sysroot
  </li>
</ul>

<p>
Tutti gli strumenti fin qui elencati serviranno, per cui potrebbe esser questo
il momento buono per installarli, se non sono già presenti sul proprio sistema:
</p>

<pre caption="Installare gli strumenti per il cross development">
# <i>emerge --sync</i>
# <i>emerge -av portage-utils crossdev</i>
</pre>

</body>
</section>
</sections>
