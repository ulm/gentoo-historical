<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE sections SYSTEM "/dtd/book.dtd">

<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/it/devrel/handbook/Attic/hb-guide-metadata.xml,v 1.12 2012/11/05 21:31:18 ago Exp $ -->

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/2.5 -->

<!-- This document was last synced to:
     cvs://gentoo/gentoo/xml/htdocs/doc/en/metadata.xml :: R1.4.  -->

<sections>
<version>1.0.9</version>
<date>2012-04-27</date>

<section>
<title>Perché c'è il bisogno di metadata.xml</title>
<subsection>
<body>

<p>
Il file <path>metadata.xml</path> ha lo scopo di fornire informazioni extra
sulle ebuild. il file <c>metadata.xml</c> dovrebbe esistere nella directory di
ogni pacchetto. Un file 'scheletro' può essere trovato come
<c>skel.metadata.xml</c> nel portage tree.
</p>

</body>
</subsection>
</section>

<section>
<title>Struttura di Metadata</title>
<subsection>
<body>

<p>
Un file <path>metadata.xml</path> può contenere un certo numero di tag:
</p>

<table>
<tr>
  <th>tag</th>
  <th>descrizione</th>
</tr>
<tr>
  <ti><brite>&lt;pkgmetadata&gt;</brite></ti>
  <ti>
    Questo è l'elemento principale del file <path>metadata.xml</path> per i
    pacchetti. Non ha attributi. I seguenti tags sono consentiti:
    <brite>&lt;herd&gt;</brite>,
    <brite>&lt;maintainer&gt;</brite>,
    <brite>&lt;longdescription&gt;</brite>,
    <brite>&lt;use&gt;</brite> e 
    <brite>&lt;upstream&gt;</brite>.
    Ci dovrebbe essere almeno un <brite>&lt;herd&gt;</brite> 
    o un <brite>&lt;maintainer&gt;</brite> tag.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;catmetadata&gt;</brite></ti>
  <ti>
    Questo è l'elemento principale del file <path>metadata.xml</path> per le
    categorie, in base a <uri link="/proj/en/glep/glep-0034.html">GLEP 34</uri>.
    Non ha attributi, e contiene un certo numero di tag
    <brite>&lt;longdescription&gt;</brite>, ognuno per ogni lingua differente.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;herd&gt;</brite></ti>
  <ti>
    Se un pacchetto è mantenuto da uno o più herd, il nome può essere
    specificato con il tag <brite>&lt;herd&gt;</brite>.
    Il nome usato in questo tag deve essere lo stesso specificato nel file <uri
    link="http://sources.gentoo.org/viewcvs.py/*checkout*/gentoo/xml/htdocs/proj/en/metastructure/herds/herds.xml?content-type=text/plain&amp;rev=HEAD">herds.xml</uri>.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;maintainer&gt;</brite></ti>
  <ti>
    Oltre che far parte di un herd, un pacchetto può anche essere mantenuto
    direttamente. I responsabili di un pacchetto devono essere specificati con
    il tag <brite>&lt;maintainer&gt;</brite>. Questo tag richiede un sottotag:
    <brite>&lt;email&gt;</brite>. Ha due sottotag opzionali:
    <brite>&lt;name&gt;</brite>, e <brite>&lt;description&gt;</brite>.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;email&gt;</brite></ti>
  <ti>
    Contiene l'indirizzo e-mail del responsabile del pacchetto. E'
    obbligatorio.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;name&gt;</brite></ti>
  <ti>
    Contiene del testo libero con il nome del responsabile del pacchetto. E'
    opzionale.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;description&gt;</brite></ti>
  <ti>
    Questo tag contiene una descrizione dello stato del pacchetto, o per esempio
    una nota indicante che se qualcuno è interessato può farsi carico del
    mantenimento del pacchetto. E' opzionale.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;longdescription&gt;</brite></ti>
  <ti>
    Questo tag contiene una descrizione del pacchetto. Questo per aumentare il
    campo DESCRIPTION nelle ebuild. Questo tag ha due sottotag opzionali:
    <brite>&lt;pkg&gt;</brite> e <brite>&lt;cat&gt;</brite>.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;use&gt;</brite></ti>
  <ti>
    Questo tag contiene le descrizione delle <uri
    link="/doc/it/handbook/handbook-x86.xml?part=2&amp;chap=2">flag USE</uri>.
    Questo tag è opzionale e, se specificato, ha un sottotag richiesto:
    <brite>&lt;flag&gt;</brite>.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;flag&gt;</brite></ti>
  <ti>
    Questo tag contiene una descrizione del modo in cui la flag USE menzionata
    influenza questo pacchetto. È richiesta se il tag <brite>&lt;use&gt;</brite>
    è specificato. Richiede inoltre che la flag USE sia nominata nell'attributo
    <c>name</c>. Questo tag ha due tag opzionali: <brite>&lt;pkg&gt;</brite> e
    <brite>&lt;cat&gt;</brite>.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;upstream&gt;</brite></ti>
  <ti>
    Questo tag contiene informazioni riguardo il progetto/sviluppatori di
    origine ("upstream", NdT).
  </ti>
</tr>
<tr>
  <ti><brite>&lt;maintainer&gt;</brite></ti>
  <ti>
    Nome ed e-mail di un mantenitore "upstream". Tale tag può apparire più di
    una volta.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;name&gt;</brite></ti>
  <ti>
    Il nome di un mantenitore "upstream" dovrebbe contenere un blocco di testo
    con il nome dell'upstream.
    Questo elemento è obbligatori per un mantenitore upstream e deve apparire
    solo una volta.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;email&gt;</brite></ti>
  <ti>L'indirizzo email di un upstream dovrebbe apparire solo una volta.</ti>
</tr>
<tr>
  <ti><brite>&lt;changelog&gt;</brite></ti>
  <ti>
    Dovrebbe contenere un URL dov'è possibile reperire il changelog originale
    del pacchetto. L'URL deve essere indipendente dalla versione e deve puntare
    ad un changelog che viene aggiornato solamente sui nuovi rilasci del
    pacchetto corrispondente. (Ciò implica anche che uno può inserire un link ad
    un changelog aggiornato automaticamente solo un caso di snapshot vcs.)
  </ti>
</tr>
<tr>
  <ti><brite>&lt;doc&gt;</brite></ti>
  <ti>
    Dovrebbe contenere un URL dov'è può essere trovata la locazione della
    documentazione originale. Il link non deve puntare a nessuna documentazione
    di terze parti e deve essere indipendente dalla versione. Se la
    documentazione è disponibile in più di una lingua, può essere usato un
    attributo lang che segue le stesse regole di longdescription.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;bugs-to&gt;</brite></ti>
  <ti>
    Dovrebbe contenere un luogo dove possono essere inseriti, un URL o indirizzo
    e-mail preceduto da mailto:.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;remote-id&gt;</brite></ti>
  <ti>
    Dovrebbe specificare un tipo di indicatore di tracciamento del pacchetto e
    l'identificazione che corrisponde al pacchetto in questione. remote-id
    dovrebbe facilifare l'indicizzazione di informazioni come il proprio ID
    Freshmeat o nome CPAN.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;pkg&gt;</brite></ti>
  <ti>
    Questo tag contiene un nome valido di pacchetto nel formato usato per
    DEPEND.
  </ti>
</tr>
<tr>
  <ti><brite>&lt;cat&gt;</brite></ti>
  <ti>
    Questo tag contiene un nome valido di categoria come definito in
    <path>profiles/categories</path>.
  </ti>
</tr>
</table>

<p>
Ci sono anche degli attributi che possono essere usati con questi tag. Sono
tutti opzionali:
</p>

<table>
<tr>
  <th>attributo</th>
  <th>tag</th>
  <th>descrizione</th>
</tr>
<tr>
  <ti>lang</ti>
  <ti>
    <brite>&lt;description&gt;</brite>,<brite>&lt;longdescription&gt;</brite>,
    <brite>&lt;use&gt;</brite>, <brite>&lt;doc&gt;</brite>
  </ti>
  <ti>
    In ogni caso in cui sia richiesta una descrizione, ci deve essere
    <e>almeno</e> una descrizione in inglese. Se viene fornita una descrizione
    aggiuntiva in un'altra lingua, questo attributo viene utilizzato per
    specificare la lingua utilizzata. Il formato è quello di un codice a due
    caratteri in base alla lingua, come definito nella norma <uri
    link="http://www.w3.org/WAI/ER/IG/ert/iso639.htm#2letter">ISO-639-1</uri>.
  </ti>
</tr>
<tr>
  <ti>restrict</ti>
  <ti>
    <brite>&lt;herd&gt;</brite>, <brite>&lt;maintainer&gt;</brite>,
    <brite>&lt;longdescription&gt;</brite>,   <brite>&lt;flag&gt;</brite>
  </ti>
  <ti>
    L'attributo restrict permette di limitare l'applicazione di alcuni tag a
    determinate versioni del pacchetto. Quando questo attributo è utilizzato,
    deve esistere anche un tag senza questo attributo. Il tag senza l'attributo
    restrict verrà utilizzato come predefinito. Il formato dell'attributo
    restrict è quello della flag DEPEND, eccetto che per "&lt;" e per "&gt;"
    che devono essere specificati da &amp;lt; e &amp;gt;.<br />
    <br/>
    Ad esempio, nel pacchetto <c>sys-libs/db</c>,
    <c>restrict="&gt;=sys-libs/db-3.2.9-r5"</c> nel tag
    <brite>maintainer</brite> mostra che si stanno attualmente mantenendo tutte
    le versioni maggiori della 3.2.9-r5.
  </ti>
</tr>
<tr>
  <ti>name</ti>
  <ti><brite>&lt;flag&gt;</brite></ti>
  <ti>
    Questo attributo è richiesto sul tag <brite>&lt;flag&gt;</brite>. Contiene
    semplicemente la flag USE.
    <br /><br />
    Per esempio, nel pacchetto <c>sys-apps/hal</c>, <c>&lt;flag
    name='acpi'&gt; Enables ACPI&lt;/flag&gt;</c>
  </ti>
</tr>
<tr>
  <ti>status</ti>
  <ti><brite>&lt;maintainer&gt;</brite></ti>
  <ti>
    L'elemento upstream maintainer ha un attributo status, che può essere active
    ("attivo", NdT) o inactive ("inattivo", NdT). Questo attributo non è
    obbligatorio. La sua assenza può essere interpretata come informazione
    sconosciuta. Notare bene: Questo attributo è permesso solamente
    nell'elemento &lt;upstream&gt; &lt;maintainer&gt;!
  </ti>
</tr>
<tr>
  <ti>type</ti>
  <ti><brite>&lt;remote-id&gt;</brite></ti>
  <ti>
    Una stringa di identificazione della sorgente "upstream". Una lista di
    stringhe valide viene tenuta all'interno di metadata.dtd. Gli sviluppatori
    dovrebbero inviare un'e-mail alla mailing list gentoo-dev prima di usare un
    nuovo tipo di valore.
  </ti>
</tr>
</table>

</body>
</subsection>
</section>

<section>
<title>Esempi di Metadata</title>
<subsection>
<title>Primo Esempio</title>
<body>

<p>
Nel primo esempio viene mostrato il <path>metadata.xml</path> di OpenOffice le
cui ebuild sono completamente gestite da un gruppo chiamato <c>openoffice</c>:
</p>

<pre caption="Pacchetto mantenuto da un gruppo">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;!DOCTYPE pkgmetadata SYSTEM "/dtd/metadata.dtd"&gt;
&lt;pkgmetadata&gt;
  &lt;herd&gt;openoffice&lt;/herd&gt;
  &lt;longdescription&gt;
    OpenOffice is the  opensource version of staroffice.
    This ebuild allows you to compile it yourself. Unfortunately this
    compilation can take up to a day depending on the speed of your computer.
    It will however make a snappier openoffice than the binary version.
  &lt;/longdescription&gt;
&lt;/pkgmetadata&gt;
</pre>

<p>
Il gruppo <c>openoffice</c> è definito nel file <path>herds.xml</path> dal
<uri link="/proj/en/metastructure">Gentoo Metastructure Project</uri>:
</p>

<note>
Questo esempio potrà essere sorpassato quando verrà letto. E' solo un'esempio.
</note>

<pre caption="Esempio Gruppo OpenOffice">
&lt;herd&gt;
  &lt;name&gt;openoffice&lt;/name&gt;
  &lt;email&gt;openoffice@gentoo.org&lt;/email&gt;
  &lt;description&gt;Openoffice related packages&lt;/description&gt;
  &lt;maintainer&gt;&lt;email&gt;pauldv@gentoo.org&lt;/email&gt;&lt;/maintainer&gt;
  &lt;maintainer&gt;&lt;email&gt;suka@gentoo.org&lt;/email&gt;&lt;/maintainer&gt;
&lt;/herd&gt;
</pre>

<p>
Se ci si vuole aggiungere (o togliere) da un gruppo, modificare il file
<path>herds.xml</path> che si trova in
<path>[gentoo]/xml/htdocs/proj/en/metastructure/herds</path> nel repository
CVS di Gentoo. Assicurarsi di conoscere l'alias e-mail corrispondente al gruppo
(ad esempio il gruppo "sound" ha <mail
link="sound@gentoo.org">sound@gentoo.org</mail>) e aggiungersi all'alias
(modificando <path>/var/mail/alias/misc/&lt;nome alias&gt;</path> su
dev.gentoo.org).
</p>

</body>
</subsection>
<subsection>
<title>Secondo Esempio</title>
<body>

<p>
Per il secondo esempio, verrà esaminato il file <path>metadata.xml</path> di
<c>app-portage/mirrorselect</c>. Questa ebuild è mantenuta dall'herd
<c>tools-portage</c>, ma ha un mantenitore distinto.
</p>

<pre caption="Pacchetto appartenente ad un Gruppo ma con Mantenitore distinto">
&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd"&gt;
&lt;pkgmetadata&gt;
  &lt;herd&gt;tools-portage&lt;/herd&gt;
  &lt;maintainer&gt;
    &lt;email&gt;johnm@gentoo.org&lt;/email&gt;
    &lt;name&gt;John Mylchreest&lt;/name&gt;
  &lt;/maintainer&gt;
  &lt;longdescription&gt;
    This utility is used to select the fastest mirror (distfiles) and provide a
    nicer front-end for mirror selection (both rsync + distfiles) to a user.
  &lt;/longdescription&gt;
&lt;/pkgmetadata&gt;
</pre>

</body>
</subsection>
<subsection>
<title>Terzo Esempio</title>
<body>

<p>
Per il terzo esempio, verrà descritto il file <path>metadata.xml</path> di
<c>sys-apps/hal</c>. Questa ebuild è mantenuta dall'herd <c>gentopia</c> e
contiene le descrizione delle flag USE.
</p>

<pre caption="Descrizione flag USE">
&lt;?xml version="1.0" encoding="UTF-8"&gt;
&lt;!DOCTYPE pkgmetadata SYSTEM "http://www.gentoo.org/dtd/metadata.dtd"&gt;
&lt;pkgmetadata&gt;
&lt;herd&gt;gentopia&lt;/herd&gt;
&lt;maintainer&gt;
     &lt;email&gt;compnerd@gentoo.org&lt;/email&gt;
&lt;/maintainer&gt;
&lt;maintainer&gt;
     &lt;email&gt;steev@gentoo.org&lt;/email&gt;
&lt;/maintainer&gt;
&lt;use&gt;
     &lt;flag name='acpi'&gt;Enables HAL to attempt to read from
     /proc/acpi/event, if unavailable, HAL will read events from
     &lt;pkg&gt;sys-power/acpid&lt;/pkg&gt;. If you need multiple acpi
     readers, ensure acpid is in your default runlevel along with HAL. This
     will also enable HAL to read Toshia and IBM acpi events which do not
     get sent via /proc/acpi/event&lt;/flag&gt;
     &lt;flag name='crypt'&gt;Allows HAL to mount volumes that are encrypted
     using LUKS. &lt;pkg&gt;sys-fs/cryptsetup-luks&lt;/pkg&gt; which has
     recently been renamed to &lt;pkg&gt;sys-fs/cryptsetup&lt;/pkg&gt; allows
     you to create such encrypted volumes. HAL will be able to handle volumes
     that are removable or fixed.&lt;/flag&gt;
     &lt;flag name='dell'&gt;Builds an installs the Dell addon, which reads data
     from the Dell SM BIOS via &lt;pkg&gt;sys-libs/libsmbios&lt;/pkg&gt;. It
     will read your service tag information and your hardware backlight data as
     well as allow you to modify the backlight settings on a Dell
     laptop.&lt;/flag&gt;
     &lt;flag name='disk-partition'&gt;Allows HAL to use libparted from
     &lt;pkg&gt;sys-apps/parted&lt;/pkg&gt; to read raw partition data from your
     disks and process that data. Future versions of HAL (possibly 0.5.11 and
     higher) will allow you to create, modify, delete and format partitions from
     a GUI interface agnostic of your desktop environment.&lt;/flag&gt;
     &lt;flag name='doc'&gt;Generates documentation that describes HAL's fdi
     format.&lt;/flag&gt;
     &lt;flag name='pcmcia'&gt;Allows HAL to process PCMCIA/CardBus slot data
     which includes inserts and removals and act on these events.&lt;/flag&gt;
     &lt;flag name='selinux'&gt;Installs SELinux policies and links HAL to the
     SELinux libraries.&lt;/flag&gt;
&lt;/use&gt;
&lt;/pkgmetadata&gt;
</pre>

</body>
</subsection>
<subsection>
<title>Quarto Esempio</title>
<body>

<p>
Questo esempio mostra l'uso dell'elemento upstream:
</p>

<pre caption="Descrizione per upstream">
&lt;upstream&gt;
        &lt;maintainer status="inactive"&gt;
                &lt;name&gt;Foo Bar&lt;/name&gt;
                &lt;email&gt;foo@bar.bar&lt;/email&gt;
        &lt;/maintainer&gt;
        &lt;maintainer status="active"&gt;
                &lt;name&gt;Foo Gentoo&lt;/name&gt;
                &lt;email&gt;foo@gentoo.org&lt;/email&gt;
        &lt;/maintainer&gt;
        &lt;changelog&gt;http://foo.bar/changelog.txt&lt;/changelog&gt;
        &lt;doc lang="en"&gt;http://foo.bar/doc/index.html&lt;/doc&gt;
        &lt;doc lang="de"&gt;http://foo.bar/doc/index.de.html&lt;/doc&gt;
        &lt;bugs-to&gt;https://bugs.foo.bar&lt;/bugs-to&gt;
        &lt;remote-id type="freshmeat"&gt;foobar&lt;/remote-id&gt;
        &lt;remote-id type="sourceforge"&gt;foobar&lt;/remote-id&gt;
&lt;/upstream&gt;
</pre>

</body>
</subsection>
</section>
</sections>
