<?xml version='1.0' encoding='UTF-8'?> <!DOCTYPE sections SYSTEM
"/dtd/book.dtd">

<!-- The content of this document is licensed under the CC-BY-SA license -->
<!-- See http://creativecommons.org/licenses/by-sa/1.0 -->

<!-- This document was last synched to:
cvs://gentoo/gentoo/xml/htdocs/doc/en/metadata.xml :: R1.4.  -->

<sections>

<section>
<title>Perchè c'è il bisogno di metadata.xml</title>
<subsection>
<body>

<p>
Il file <c>metadata.xml</c> ha lo scopo di fornire informazioni extra sugli
ebuilds. il file <c>metadata.xml</c> deve esistere nella directory di ogni
pacchetto.  Un file skel può essere trovato come <c>skel.metadata.xml</c> nel
portage tree.
</p>

<note>
Si prega di lanciare <c>xmllint --valid metadata.xml</c> prima di
sottomettere un file <c>metadata.xml</c>. Speriamo di aggiungere presto il
supporto per <c>metadata.xml</c> a repoman.
</note>

</body>
</subsection>
</section>

<section>
<title>Struttura di Metadata</title>
<subsection>
<body>

<p>
Un file <c>metadata.xml</c> può contenere più tag:
</p>

<table> <tr> <th>tag</th> <th>descrizione</th> </tr> <tr> <ti>
<brite>&lt;pkgmetadata&gt;</brite> </ti> <ti> Questo è l'elemento principale del
file metadata.xml per i pacchetti. Non ha attributi. Il subtag che richiede è:
<brite>&lt;herd&gt;</brite>. Successivamente sono consentiti i seguenti tag:
<brite>&lt;email&gt;</brite> per un'indirizzo email generico del gruppo,
<brite>&lt;maintainer&gt;</brite>, e <brite>&lt;longdescription&gt;</brite>.
</ti> </tr> <tr> <ti> <brite>&lt;catmetadata&gt;</brite> </ti> <ti> Qesto è
l'elemento principale del file metadata.xml per le categorie, vedi <uri
link="/proj/en/glep/glep-0034.html">GLEP 34</uri>. Non ha attributi contiene un
certo numero di tag <brite>&lt;longdescription&gt;</brite>, ognuno per una
lingua differente.  </ti> </tr> <tr> <ti> <brite>&lt;herd&gt;</brite> </ti> <ti>
Ci deve essere almeno un subtag herd. Il contenuto di questo tag deve
corrispondere al nome del gruppo così come specificato nel file <uri
link="http://www.gentoo.org/cgi-bin/viewcvs.cgi/misc/herds.xml?rev=HEAD;cvsroot=gentoo;content-type=text/plain">herds.xml</uri>.
Deve essere presente almeno una volta.  </ti> </tr> <tr> <ti>
<brite>&lt;maintainer&gt;</brite> </ti> <ti> Oltre ad essere membro di un
gruppo, un pacchetto deve poter essere mantenuto direttamente.  I responsabili
di un pacchetto devono essere specificati con il tag
<brite>&lt;maintainer&gt;</brite>. Questo tag richiede un subtag:
<brite>&lt;email&gt;</brite>. Ha due subtag opzionali:
<brite>&lt;name&gt;</brite>, e <brite>&lt;description&gt;</brite>.  </ti> </tr>
<tr> <ti><brite>&lt;email&gt;</brite></ti> <ti> Contiene l'indirizzo e-mail del
responsabile del pacchetto. E' obbligatorio.  </ti> </tr> <tr>
<ti><brite>&lt;name&gt;</brite></ti> <ti> Contiene del testo con il nome del
responsabile del pacchetto. E' opzionale.  </ti> </tr> <tr>
<ti><brite>&lt;description&gt;</brite></ti> <ti> Il tag descrizione contiene una
descrizione dello stato del pacchetto, o per esempio una nota che annuncia che
se qualcuno è interessato può farsi carico del mantenimento del pacchetto. E'
opzionale.  </ti> </tr> <tr> <ti><brite>&lt;longdescription&gt;</brite></ti>
<ti> Questo tag contiene una descrizione del pacchetto. Questo per aumentare il
campo DESCRIPTION negli ebuilds.  </ti> </tr> </table>

<p>
Ci sono anche degli attributi che possono essere usati con questi tag.  Sono
tutti opzionali:
</p>

<table> <tr> <th>attribute</th> <th>tags</th> <th>descrizione</th> </tr> <tr>
<ti>lang</ti> <ti> <brite>&lt;description&gt;</brite>,
<brite>&lt;longdescription&gt;</brite> </ti> <ti> In ogni caso in cui una
descrizione è richiesta, ci deve essere <e>almeno</e> una descrizione in
inglese. Se viene fornita una descrizione aggiuntiva in un'altra lingua, questo
attributo viene utilizzato per specificare la lingua utilizzata. Il formato è
quello di un codice a due caratteri in base alla lingua, come definito nella
norma <uri link="http://www.w3.org/WAI/ER/IG/ert/iso639.htm#2letter">ISO-639-1</uri>.</ti> </tr> <tr>
<ti>restrict</ti> <ti> <brite>&lt;herd&gt;</brite>,
<brite>&lt;maintainer&gt;</brite>, <brite>&lt;longdescription&gt;</brite> </ti>
<ti> L'attributo restrict permette di restringere l'applicazione di alcuni tag a
determinate versioni del pacchetto. Quando questo attributo è utilizzato, deve
esistere anche un tag senza questo attributo. Il tag senza l'attributo restrict
verrà utilizzato come default. Il formato dell' attributo restrict è quello del
flag DIPENDENTE, eccetto che per &quot;&lt;&quot; e per &quot;&gt;&quot; deve
essere specificato da &amp;lt; and &amp;gt;.<br /> <br /> Ad esempio nel
pacchetto db <c>restrict="&gt;=sys-libs/db-3.2.9-r5"</c> nel tag mantainer si
vede che stò attualmente mantenendo tutte le versioni maggiori della 3.2.9-r5.
</ti> </tr> </table>

</body>
</subsection>
</section>

<section>
<title>Esempi di Metadata</title>
<subsection>
<title>Primo
Esempio</title>
<body>

<p>
Nel primo esempio viene mostrato il <path>metadata.xml</path> di OpenOffice i
cui ebuild sono completamente gestiti da un gruppo chiamato
<c>openoffice</c>:
</p>

<pre caption="Pacchetto mantenuto da un gruppo"> &lt;?xml version='1.0'
encoding='UTF-8'?&gt; &lt;!DOCTYPE pkgmetadata SYSTEM "/dtd/metadata.dtd"&gt;
&lt;pkgmetadata&gt; &lt;herd&gt;openoffice&lt;/herd&gt; &lt;longdescription&gt;
OpenOffice is the  opensource version of staroffice.  This ebuild allows you to
compile it yourself. Unfortunately this compilation can take up to a day
depending on the speed of your computer. It will however make a snappier
openoffice than the binary version.  &lt;/longdescription&gt;
&lt;/pkgmetadata&gt;
</pre>

<p>
Il gruppo <c>openoffice</c> è definito nel file <path>herds.xml</path> dal
<uri link="/proj/en/metastructure">Gentoo Metastructure Project</uri>:
</p>

<note>
Questo esempio potrà essere sorpassato quando lo leggerete. E' solo
un'esempio.
</note>

<pre caption="OpenOffice Herd Example"> &lt;herd&gt;
&lt;name&gt;openoffice&lt;/name&gt;
&lt;email&gt;openoffice@gentoo.org&lt;/email&gt; &lt;description&gt;openoffice
related packages&lt;/description&gt;
&lt;maintainer&gt;&lt;email&gt;pauldv@gentoo.org&lt;/email&gt;&lt;/maintainer&gt;
&lt;maintainer&gt;&lt;email&gt;brad@gentoo.org&lt;/email&gt;&lt;/maintainer&gt;
&lt;/herd&gt;
</pre>

<p>
Se volete aggiungervi (o togliervi) da un gruppo, modificate il file
<path>herds.xml</path> che si trova in <path>[gentoo]/misc</path> nel
repository CVS di Gentoo. Assicuratevi di conoscere l'alias e-mail a cui
corrisponde il gruppo (ad esempio il gruppo "sound" ha <mail
link="sound@gentoo.org">sound@gentoo.org</mail>) e aggiungetevi all'alias
(modificando <path>/var/mail/alias/misc/&lt;alias name&gt;</path> su
dev.gentoo.org).
</p>

</body>
</subsection>

<subsection>
<title>Secondo Esempio</title>
<body>

<p>
Come secondo esempio vedremo il <path>metadata.xml</path> di
<c>mirrorselect</c>.  Questo ebuild è mantenuto dal gruppo
<c>tools-portage</c>, ma ha un responsabile preciso.
</p>

<pre caption="Herd &amp; individually maintained package"> &lt;?xml
version='1.0' encoding='UTF-8'?&gt; &lt;!DOCTYPE pkgmetadata SYSTEM
"http://www.gentoo.org/dtd/metadata.dtd"&gt; &lt;pkgmetadata&gt;
&lt;herd&gt;tools-portage&lt;/herd&gt; &lt;maintainer&gt;
&lt;email&gt;johnm@gentoo.org&lt;/email&gt; &lt;name&gt;John
Mylchreest&lt;/name&gt; &lt;/maintainer&gt; &lt;longdescription&gt; This utility
is used to select the fastest mirror (distfiles) and provide a nicer front-end
for mirror selection (both rsync + distfiles) to a user.
&lt;/longdescription&gt; &lt;/pkgmetadata&gt;
</pre>
</body>
</subsection>

</section>
</sections>

