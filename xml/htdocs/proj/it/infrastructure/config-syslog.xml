<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/it/infrastructure/Attic/config-syslog.xml,v 1.1 2005/10/26 22:50:26 so Exp $ -->
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">

<guide link="/proj/it/infrastructure/config-syslog.xml" lang="it">
<title>Guida alla Configurazione del Sistema di Logging per i Server di Infrastruttura Gentoo</title>

<author title="Autore">
    <mail link="klieber@gentoo.org">Kurt Lieber</mail>
</author>
<author title="Traduttore">
    <mail link="gianni.costanzi@gmail.com">Gianni Costanzi</mail>
</author>

<abstract>
Questa guida spiega come dovrebbe essere configurato il sistema di logging su
un server di Infrastruttura Gentoo.
</abstract>

<version>1.0</version>
<date>2003-07-18</date>

<chapter>
<title>Configurare sysklogd</title>
<section>
<body>

<p>
Si richiede che sysklogd sia configurato e operativo su tutti i server di
Infrastruttura Gentoo. Seguono degli esempi di impostazioni di configurazione
per sysklogd:
</p>

<pre caption="/etc/syslog.conf">
#  /etc/syslog.conf     Configuration file for syslogd.

#
# First some standard logfiles.  Log by facility.
#

auth,authpriv.*                 /var/log/auth.log
*.*;auth,authpriv.none          -/var/log/syslog
cron.*                         /var/log/cron.log
daemon.*                        -/var/log/daemon.log
local6.*                        /var/log/rsync.log
local4.*                        /var/log/ldap.log
local3.*                        /var/log/xinetd.log
<comment>Ci si assicuri che i servizi come rsyncd, xinetd e altri siano
configurati per l'utilizzo del log localN specificato.</comment>

#
# Logging for the mail system. Split it up so that
# it is easy to write scripts to parse these files.
#
mail.info                       -/var/log/mail.info
mail.warn                       -/var/log/mail.warn
mail.err                        /var/log/mail.err
<comment>Questa sezione dovrebbe essere commentata per i server di posta Gentoo
poiché qmail ed exim offrono i loro meccanismi di logging.</comment>
</pre>

</body>
</section>
</chapter>

<chapter>
<title>Configurare ed eseguire logrotate</title>
<section>
<body>

<p>
Utilizziamo <c>logrotate</c> per agevolare la rotazione dei log.
</p>

<pre caption="/etc/logrotate.conf">
# file di configurazione di logrotate di esempio

/var/log/apache/*.httpd {

        rotate 30
        daily
        postrotate
                /etc/init.d/apache restart
        endscript
}
<comment>La sezione al di sopra dovrebbe essere omessa se il server non sta
eseguendo apache.</comment>
/var/log/*.log  {
        rotate 14
        daily
        postrotate
                /bin/kill -HUP `pidof syslogd`
        endscript
}
</pre>

<pre caption="script logrotate.cron per /etc/cron.daily">
#! /bin/sh

/usr/sbin/logrotate /etc/logrotate.conf
</pre>

<p>
In generale, i file di log dovrebbero essere conservati per un minimo di 2
settimane, più a lungo se lo spazio su disco lo consente.
</p>

</body>
</section>
</chapter>
</guide>
