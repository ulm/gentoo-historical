<?xml version='1.0' encoding="UTF-8"?>
<?xml-stylesheet href="/xsl/guide.xsl" type="text/xsl"?>
<!DOCTYPE guide SYSTEM "/dtd/guide.dtd">
<!-- $Header: /var/cvsroot/gentoo/xml/htdocs/proj/it/infrastructure/cvs-sshkeys.xml,v 1.4 2010/05/04 20:55:00 scen Exp $ -->

<guide lang="it">
<title>Accesso SSH a cvs.gentoo.org</title>

<author title="Autore">
  <mail link="swift"/>
</author>
<author title="Autore">
  <mail link="robbat2"/>
</author>
<author title="Redazione">
  <mail link="nightmorph"/>
</author>
<author title="Traduzione">
  <mail link="magowiz@gmail.com">Marcello Magaldi</mail>
</author>

<abstract>
Questa mini-guida spiega come creare e usare le chiavi ssh, specialmente per il
loro utilizzo con cvs.gentoo.org.
</abstract>

<version>1.2</version>
<date>2010-04-26</date>

<chapter>
<title>Chiavi SSH</title>
<section>
<title>Creare le  chiavi SSH</title>
<body>

<p>
Prima di tutto bisogna avere effettuato fisicamente il login sul proprio
computer. Assicurarsi che nessun altro veda ciò che si digita, perchè si
scriveranno passphrases e cose simili. Pertanto armarsi di spray al peperoncino
e combattere tutte le entità non fidate finchè non si è a casa da soli.
</p>

<p>
Effettuare il login sul proprio computer con l'utente che si ha intenzione di
usare quando si vuole accedere a cvs.gentoo.org. Quindi digitare <c>ssh-keygen
-t dsa</c>:
</p>

<pre caption="Creare chiavi SSH">
$ <i>ssh-keygen -t dsa</i>
Generating public/private dsa key pair.
Enter file in which to save the key (/home/temp/.ssh/id_dsa): <comment>(Premere invio)</comment>
Created directory '/home/temp/.ssh'.
Enter passphrase (empty for no passphrase): <comment>(Inserire la propria passphrase)</comment>
Enter same passphrase again: <comment>(Inserire nuovamente la propria passphrase)</comment>
Your identification has been saved in /home/temp/.ssh/id_dsa.
Your public key has been saved in /home/temp/.ssh/id_dsa.pub.
The key fingerprint is:
85:35:81:a0:87:56:78:a2:da:53:6c:63:32:d1:34:48 temp@Niandra
</pre>

<note>
Assicurarsi di impostare una passphrase robusta sulla propria chiave privata.
Idealmente, questa passphrase dovrebbe essere almeno di 8 caratteri e contenere
un misto di lettere, numeri e simboli.
</note>

<p>
L'operazione è molto semplice! Ora controllare cosa è stato creato:
</p>

<pre caption="File Creati">
# <i>ls ~/.ssh</i>
id_dsa  id_dsa.pub
</pre>

<p>
Probabilmente si avranno più file di questi, ma i due file elencati sopra sono
quelli veramente importanti.
</p>

<p>
Il primo file, <path>id_dsa</path>, è la propria chiave <e>privata</e>. Non
distribuirla a tutte le persone a meno che si voglia avere una discussione
animata con drobbins (no, non lo si desidera).
</p>

<warn>
Se si ha accesso a molti host (<e>fidati!</e>) dai quali si vuole connettersi a
cvs.gentoo.org, si dovranno copiare <path>id_dsa</path> nelle directory
<path>~/.ssh</path> su questi host.
</warn>

<p>
Il secondo file, <path>id_dsa.pub</path>, è la propria chiave <e>pubblica</e>.
Distribuire questo file a tutti gli host che si vuole siano in grado di accedere
attraverso l'autentificazione SSH pubkey. Questo file dovrebbe essere
concatenato a <path>~/.ssh/authorized_keys</path> su questi host remoti.
Aggiungerlo anche al proprio host locale cosìcchè ci si possa connettere anche
ad esso se si possiedono molte macchine
</p>

<pre caption="Aggiungere la chiave SSH alla macchina">
$ <i>cat ~/.ssh/id_dsa.pub >> ~/.ssh/authorized_keys</i>
</pre>

</body>
</section>
<section>
<title>
Installare la propria chiave pubblica su una macchina usando l'autenticazione
LDAP per SSH
</title>
<body>

<note>
Se si è un nuovo sviluppatore, il proprio reclutatore inserirà la vostra chiave
SSH in LDAP, in modo che si possa effettuare il login. Da quel momento in poi
è possibile aggiungere le chiavi SSH da soli usando la seguente procedura.
</note>

<p>
Per gran parte dell'infrastruttura Gentoo, usiamo LDAP per distribuire le
informazioni sull'utente incluse le chiavi pubbliche SSH. Su queste macchine,
<path>~/.ssh/authorized_keys</path> generalmente non dovrebbe contenere la
propria chiave.
</p>

<p>
Invece, si dovrebbe mettere la propria chiave pubblica in LDAP, usando
direttamente <path>perl_ldap</path>, o <path>ldapmodify</path>.
La <uri link="/proj/en/infrastructure/ldap.xml">guida dell'infrastruttura LDAP
</uri> (ndT in inglese) lo descrive più dettagliatamente.
</p>

<pre caption="Aggiungere la chiave SSH con perl_ldap su dev.gentoo.org">
$ <i>perl_ldap -b user -C sshPublicKey "$(cat ~/.ssh/id_dsa.pub)" &lt;username&gt;</i>
</pre>

<warn>
Ogni attributo <path>sshPublicKey</path> deve contenere esattamente una chiave
pubblica. Se si possiedono più chiavi pubbliche, bisogna usare più attributi!
</warn>

</body>
</section>
<section>
<title>Usare keychain</title>
<body>

<p>
Tutte le volte che si vorrà effettuare il login ad un host remoto usando
l'autentificazione a chiave pubblica SSH, sarà richiesto di immettere la propria
passphrase. Anche se a tutti piace scrivere, a lungo andare può risultare
fastidioso. Fortunatamente, c'è <c>keychain</c> che può semplificare questa
operazioni. C'è un documento a riguardo <uri
link="/doc/it/keychain-guide.xml">qui</uri>, ma ne sarà fornita una breve
introduzione.
</p>

<p>
Prima di tutto, installare <c>keychain</c>:
</p>

<pre caption="Installare keychain">
# <i>emerge keychain</i>
</pre>

<p>
Ora keychain caricherà la propria chiave ssh privata quando si effettuerà il
login sulla propria macchina locale. Per far ciò, aggiungere le righe seguenti a
<path>~/.bash_profile</path>. Ancora, questo dovrebbe esser fatto sulla propria
macchina <e>locale</e> dove si lavora al CVS di Gentoo.
</p>

<pre caption="Aggiungere questo a .bash_profile">
keychain ~/.ssh/id_dsa
. .keychain/<comment>hostname</comment>-sh
</pre>

<p>
Assicurarsi di sostituire <c>hostname</c> con il proprio hostname.
</p>

</body>
</section>
</chapter>
</guide>
