<?xml version='1.0' encoding="iso-8859-15"?>

<!DOCTYPE guide SYSTEM "../../../dtd/guide.dtd">

<guide link="/doc/desktop-fr.html">
<title>Guide de configuration d'une machine de bureau avec Gentoo Linux</title>
<author title="Editor"><mail link="g2boojum@gentoo.org">Grant Goodyear</mail></author>
<author title="Traduction"><mail link="julien.perrot@iie.cnam.fr">Julien
Perrot</mail></author>

<abstract>
    Ce guide vous montre comment configurer Gentoo Linux pour une utilisation
    générale. En particulier, nous passerons en revue l'installation et la
    configuration d'X, KDE, OSS et alsa (son), postfix (courrier électronique),
    cups (impression) et samba (interopérabilité unix/windows).
</abstract>

<version>0.26</version>
<date>17 Mai 2002 (traduction le 31 août 2002)</date>

<chapter>
<title>Préliminaires</title>
<section>
<body>
<p>Il va sans dire que vous devez installer Gentoo Linux
(<uri>http://www.gentoo.org/doc/build.html</uri>). Après avoir terminé cette
installation plutôt amusante, vous avez aussi besoin de télécharger
l'arborescence <e>Portage</e>. Vous devriez vraiment lire le Guide de
l'utilisateur de Portage
(<uri>http://www.gentoo.org/doc/portage-user.html</uri>), mais si vous êtes
pressé, il vous suffit de taper :
</p>
<pre># <i>emerge rsync</i></pre>

<p> Une brève remarque sur les paquets choisis dans cette documentation : Gentoo
Linux possède une collection considérable de gestionnaires de fenêtres, d'agents
de transport de courrier (MTA), etc qui peuvent être facilement installés. Les paquets
spécifiques que j'ai choisi de détailler ne sont pas préférés par Gentoo Linux,
ce sont simplement des paquets que l'auteur aime et/ou sait comment configurer.
En d'autres termes, ce sont les paquets qui sont installés sur la
machine de l'auteur.
</p>
</body>
</section>
</chapter>

<chapter>
<title>X et KDE</title>

<section>
<title>Installation</title>
<body>
<p>
Après avoir installé Gentoo Linux et mis à jour Portage, ma première tâche est
généralement d'installer X et KDE. La compilation de X dure indéfiniment, et
celle de KDE dure encore plus longtemps donc je vous recommande chaudement de
lancer cette opération juste avant d'aller au lit.
</p>
<p>
Il est toujours utile d'utiliser le paramètre <c>--pretend</c> avant de faire un
<c>emerge</c> pour voir quelles sont les dépendances qui vont êtres installées,
et dans notre cas elles sont nombreuses.
</p>
<pre>
# <i>emerge --pretend kde-base/kde</i>

These are the packages that I would merge, in order.

Calculating dependencies............... done!
[ebuild N  ] x11-base/xfree-4.2.0-r5 to /
[ebuild N  ] media-libs/lcms-1.06 to /
[ebuild N  ] media-libs/jpeg-6b-r2 to /
[ebuild N  ] media-libs/libmng-1.0.1 to /
[ebuild N  ] media-libs/libpng-1.0.12 to /
[ebuild N  ] x11-libs/qt-2.3.1 to /
[ebuild N  ] dev-libs/libxml2-2.4.13 to /
[ebuild N  ] dev-libs/libxslt-1.0.10 to /
[ebuild N  ] dev-lang/tcl-8.3.3 to /
[ebuild N  ] dev-lang/tk-8.3.3 to /
[ebuild N  ] dev-lang/python-2.2-r4 to /
[ebuild N  ] media-libs/tiff-3.5.7 to /
[ebuild N  ] net-print/cups-1.1.13 to /
[ebuild N  ] app-text/sgml-common-0.6.1 to /
[ebuild N  ] net-nds/portmap-5b-r6 to /
[ebuild N  ] app-admin/fam-oss-2.6.4-r1 to /
[ebuild N  ] media-libs/audiofile-0.2.3 to /
[ebuild N  ] media-sound/alsa-driver-0.5.12a to /
[ebuild N  ] media-libs/alsa-lib-0.5.10b to /
[ebuild N  ] kde-base/kdelibs-2.2.2-r2 to /
[ebuild N  ] kde-base/kdegames-2.2.2 to /
[ebuild N  ] kde-base/kdenetwork-2.2.2 to /
[ebuild N  ] dev-libs/popt-1.5 to /
[ebuild N  ] app-arch/rpm-3.0.6-r1 to /
[ebuild N  ] kde-base/kdeadmin-2.2.2 to /
[ebuild N  ] kde-base/kdeartwork-2.2.2 to /
[ebuild N  ] dev-libs/pilot-link-0.9.6-r3 to /
[ebuild N  ] kde-base/kdepim-2.2.2 to /
[ebuild N  ] kde-base/kdetoys-2.2.2 to /
[ebuild N  ] kde-base/kdeutils-2.2.2 to /
[ebuild N  ] dev-lang/nasm-0.98-r3 to /
[ebuild N  ] media-sound/esound-0.2.23 to /
[ebuild N  ] media-libs/libsdl-1.2.3-r1 to /
[ebuild N  ] x11-libs/gtk+-1.2.10-r4 to /
[ebuild N  ] media-video/xanim-2.80.1-r1 to /
[ebuild N  ] x11-libs/openmotif-2.1.30-r1 to /
[ebuild N  ] media-libs/libogg-1.0_rc3 to /
[ebuild N  ] media-libs/libvorbis-1.0_rc3 to /
[ebuild N  ] media-sound/cdparanoia-3.9.8 to /
[ebuild N  ] kde-base/kdemultimedia-2.2.2 to /
[ebuild N  ] kde-base/kdebase-2.2.2-r2 to /
[ebuild N  ] kde-base/kdeaddons-2.2.2-r1 to /
[ebuild N  ] media-gfx/sane-backends-1.0.5-r1 to /
[ebuild N  ] dev-util/dialog-0.7 to /
[ebuild N  ] net-libs/libwww-5.3.2-r1 to /
[ebuild N  ] app-text/tetex-1.0.7-r7 to /
[ebuild N  ] kde-base/kdegraphics-2.2.2 to /
[ebuild N  ] kde-base/kde-2.2.2-r1 to /

<comment>Vos dépendances seront probablement différentes</comment>

# <i>emerge kde-base/kde</i>
</pre>
<note>
Depuis portage 1.8.7, la commande <c>emerge</c> peut être utilisée pour
installer des paquets sans spécifier la catégorie. Donc, KDE aurait pu être
installé avec simplement <c>emerge kde</c>.
</note>
<note>
Si vous voulez utiliser CUPS pour l'impression alors vous devez vous assurer la
présence de "cups" dans vos variables USE du fichier <path>/etc/make.conf</path>
avant d'installer kde-base/kdebase.
</note>
<p>Bonne nuit !</p>
<note>Si vous avez un CD-ROM Gentoo Linux avec des binaires, alors vous pouvez
directement installer les paquets à partir du CD-ROM
</note>
<pre caption="Installation de paquets binaires à partir du CD-ROM">
# <c>export PKGDIR=/mnt/cdrom/gentoo/packages</c>
<comment>Normalement Portage s'attend à trouver les paquets dans
/usr/portage/packages
</comment>
# <c>emerge --usepkg /mnt/cdrom/gentoo/packages/All/kdebase-x.y.z.tbz2</c>
<comment>Le paramètre <c>--usepkg</c> permet de s'assurer que des paquets
binaires sont utilisés pour les dépendances (si disponible).
</comment>
</pre>
</body>
</section>

<section>
<title>Configuration</title>
<body>
<p>J'aime utiliser le programme en mode console <c>xf86config</c> pour
configurer X bien que le fichier généré <path>/etc/X11/XF86Config</path> ne soit
pas très élégant -- voir <uri link="http://www-105.ibm.com/developerworks/education.nsf/linux-onlinecourse-bytitle/3100FF4795B3F31F86256AF70056FDB3?OpenDocument">
ce tutoriel</uri> pour une configuration alternative et plus poussée de X.
Avant de commencer, vous avez besoin de connaître les fréquences de
rafraichissement horizontale et verticale de votre moniteur (mon écran viewsonic
G773 a en horizontal : 30-69 KHz et en vertical : 55-90 KHz), le type et la
quantité de ram (en Ko) de votre carte vidéo (une carte Geforce 32768 Ko dans
mon cas) et le type et le périphérique de votre souris (une souris intellimouse
branchée sur le port ps/2 <path>/dev/psaux</path>).
</p>
<pre># <c>/usr/X11R6/bin/xf86config</c></pre>
<p>Puisque je possède une souris avec trois boutons, j'ai choisi de ne pas
activer l'émulation 3 boutons. Je n'ajoute pas d'options additionnelles XKB
keyboard parce que je ne sais pas ce qu'elles font. Vous devez choisir une
résolution d'écran et une profondeur de pixel que vous aimez. Je choisis
1280x1024 à 24bpp sur mon viewsonic, tout simplement parce que mon écran ne
fonctionne pas avec des résolutions plus élevées. Si vous ne l'avez jamais fait
avant, ne soyez pas surpris si vous devez lancer <c>xf86config</c> plusieurs
fois.
</p>

<note>Si vous ne connaissez pas les fréquences de rafraichissement de votre
moniteur, essayez d'effectuer une recherche sur google,
<uri>http://www.google.com</uri>, sur le modèle et le fabriquant de votre
moniteur. Les fréquences de rafraichissement font généralement partie des
spécifications de votre moniteur.</note>

<p>Si vous êtes un vétéran de la configuration de X, vous avez peut être
l'habitude de créer un lien symbolique de votre périphérique souris vers
<path>/dev/mouse</path>. De tels liens symboliques se sont révélés
problématiques avec devfs car ils ont tendance à disparaître après un
redémarrage. Gentoo Linux gère maintenant correctement les liens symboliques
dans <path>/dev</path>. Vous pouvez simplement créer le lien symbolic
<path>/dev/mouse</path> avec <c>ln -s</c> et il <e>sera</e> préservé après
redémarrage.
</p>
<pre># <i>startx</i></pre>

<p>Si vous avez configuré X correctement, en lançant <c>startx</c> vous devriez
démarrer un gestionnaire de fenêtres incroyablement laid (twm). Si X démarre,
vous pouvez continuer. Taper <c>&lt;ctrl&gt;&lt;alt&gt;&lt;backspace&gt;</c>
pour tuer le serveur X.</p>

<p>Si vous avez une souris avec une roulette vous devez éditer le fichier
XF86Config à la main : </p>
<pre>
# <i>cp /etc/X11/XF86Config /etc/X11/XF86Config.working</i>
# <i>nano -w /etc/X11/XF86Config</i></pre>
<pre caption="Section Pointer de XF86Config">
Section "InputDevice"

# Identifier and driver

    Identifier	"Mouse1"
    Driver	"mouse"
    <i>Option "Protocol"    "ImPS/2" </i>
    Option "Device"      "/dev/psaux"
    <i>Option "ZAxisMapping"	"4 5"</i>

</pre>
<p>Comme j'ai une intellimouse j'ai changé le "Protocol" de "PS/2" vers
"IMPS/2". Pour pouvoir défiler avec la souris, il suffit d'ajouter la ligne
'Option "ZAxisMapping" "4 5"', avec '4' et '5' correspondant à la roulette vers
le haut et la roulette vers le bas.
</p>
<note>Netscape 4.x n'utilise pas la roulette par défaut ; vous devez d'abord
créer un fichier .Xdefaults. Voir
<uri>http://www-sop.inria.fr/koala/colas/mouse-wheel-scroll/</uri> pour des
instructions. Mieux, utilisez <c>konqueror</c>, <c>opera</c>,
<c>mozilla</c>, <c>galeon</c>, ou un autre vrai navigateur.</note>

<p>Lancer <c>startx</c> encore une fois pour vous assurer que X fonctionne
toujours. Si vous avez une carte NVIDIA, il serait judicieux d'installer les
pilotes accélérés NVIDIA.</p>
<pre caption="Seulement pour les possesseurs de cartes NVIDIA">
# <c>emerge media-video/nvidia-kernel media-video/nvidia-glx</c>
# <c>nano -w /etc/X11/XF86Config</c>
# <c>echo NVdriver >> /etc/modules.autoload</c>
</pre>
<pre caption="Activer GLX dans /etc/X11/XF86Config">
Section "Module"

# This loads the GLX module
#    Load       "glx" <comment>(Décommenter cette ligne)</comment>
</pre>
<pre caption="Indiquer à X d'utiliser le pilote nvidia dans /etc/X11/XF86Config">
Section "Device"
    Identifier  "NVIDIA GeForce"
    #Driver      "nv"
    Driver      "nvidia"
    #VideoRam    32768
    # Insert Clocks lines here if appropriate
EndSection
</pre>
<p>
Lancer <c>startx</c> encore une fois pour vous assurer que X fonctionne toujours
(cette fois avec l'écran d'accueil NVIDIA si vous avez installé les pilotes
nvidia).
En supposant que cela fonctionne, tuer X et nous allons démarrer un vrai
gestionnaire de fenêtres à la place.
Grâce à Achim, Danarmak et Verwilst, les mainteneurs Gentoo des paquets KDE,
l'ebuild KDE configure KDE correctement par lui même. Le gestionnaire
d'affichage KDM devrait fonctionner simplement en le démarrant.</p>
<pre># <i>kdm</i></pre>

<p>Vous devriez être capable de vous logguer et de voir KDE en parfait état de
fonctionnement. Bien sûr le son ne devrait pas fonctionner pour l'instant, donc
vous ratez l'ennuyeux bruit de démarrage KDE, mais nous allons arranger ça dans
un instant. Ouvrez une konsole, tapez <c>ls /usr/bin</c> (ou autre chose qui
fait plus que remplir la fenere konsole), et vérifiez que la roulette de la
souris vous permet de faire défiler la fenêtre vers le haut et vers le bas. Ca
devrait vraiment fonctionner !</p>

<p>Tout ce qu'il reste à faire est de s'assurer que X se lance quand Gentoo
démarre. Editer <path>/etc/rc.conf</path> pour avoir <e>DISPLAYMANAGER="kdm"</e>.
</p>
<pre>
# <i>nano -w /etc/rc.conf</i>
</pre>
<pre caption="/etc/rc.conf -- configurer DISPLAYMANAGER">
# What display manager do you use ?  [ xdm | gdm | kdm ]

DISPLAYMANAGER=kdm
</pre>
<p>
Maintenant vous devez vous assurer que le script de démarrage <e>xdm</e> est lu
pendant le démarrage.
</p>
<pre>
# <i>rc-update add xdm default</i>
</pre>
<p>Redémarrez et vérifiez que X se lance !</p>
<impo>La commande <c>rc-update</c> est la version améliorée de Gentoo Linux de
la vénérable commande <c>chkconfig</c> pour gérer les scripts init. Tapez
<c>rc-update</c> pour obtenir une liste d'options. 
</impo>

</body>
</section>
</chapter>

<chapter>
<title>Son</title>
<section>
<title>Alsa</title>
<body>

<p>Gentoo Linux supporte Alsa pour le son en utilisant le noyau par défaut. Alsa
peut être utilisé avec ou sans <e>devfs</e>. Si vous avez installé un nouveau
paquet <path>sys-kernel/linux-sources</path>, assurez vous que votre noyau Linux
a le support du son activé.</p>
<pre>
# <i>emerge media-sound/alsa-driver</i>
</pre>
<p>Je vais supposer ici que <e>devfs</e> est activé ; si ce n'est pas le cas
alors voir la FAQ Gentoo : <uri>http://www.gentoo.org/doc/faq.html</uri>.
</p>
<p>Maintenant nous définissions les alias <e>kerneld</e>.
</p>
<pre>
# <i>nano -w /etc/modules.d/alsa</i>
</pre>
<pre caption="Vers le haut de /etc/modules.d/alsa">
##
## IMPORTANT:
## You need to customise this section for your specific sound card(s)
## and then run `update-modules' command.
## Read alsa-driver's INSTALL file in /usr/share/doc for more info.
##
##  ALSA portion
<i># Alsa</i>
<i>alias snd-card-0 snd-card-emu10k1</i>
<i>alias snd-card-1 snd-card-emu10k1</i>
<i>alias snd-card-2 snd-card-emu10k1</i>
<i>alias snd-card-3 snd-card-emu10k1</i>
<i>alias snd-card-4 snd-card-emu10k1</i>
<i>alias snd-card-5 snd-card-emu10k1</i>
<i>alias snd-card-6 snd-card-emu10k1</i>
<i>alias snd-card-7 snd-card-emu10k1</i>
</pre>
<p>Vous devez remplacer <e>snd-card-emu10k1</e> avec votre
carte son.
</p>

<p>Vous devez aussi vérifier que les périphériques alsa et les permissions sont
correctes dans <path>/etc/devfsd.conf</path>.
</p>
<pre>
# <i>nano -w /etc/devfsd.conf</i>
# <i>rc-update add alsasound boot</i>
</pre>
<pre caption="milieu de devfsd.conf avec les ajouts Alsa">
# ALSA/OSS stuff
# Comment/change these if you want to change the permissions on
# the audio devices
LOOKUP          snd          MODLOAD ACTION snd
LOOKUP          dsp          MODLOAD
LOOKUP          mixer        MODLOAD
LOOKUP          midi         MODLOAD
REGISTER        sound/.*     PERMISSIONS root.audio 660
REGISTER        snd/.*       PERMISSIONS root.audio 660
</pre>
<note>Remarquez que devfsd.conf définit les permissions de
<path>/dev/sound</path> à <c>root.audio</c>. Donc, pour que les utilisateurs non
root puissent utiliser le son ils doivent faire parti du groupe
<c>audio</c>.</note>
<warn>Remarquez que le script alsasound doit être ajouté au runlevel "boot" et
pas au runlevel "default".</warn>
<p>A ce point la méthode la plus simple est de redémarrer. Vous ne pourrez pas
encore entendre de son pour l'instant parce qu'Alsa règle tous les canaux sons au plus bas par défaut.
</p>
<pre>
# <i>emerge media-sound/alsa-utils</i>
# <i>amixer</i>

Group 'Input Gain',0
  Capabilities: volume mute jointly-mute
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 15
  Front-Left: 11 [73%] [mute] [---]
  Front-Right: 11 [73%] [mute] [---]
Group 'Master Mono',0
  Capabilities: volume mute capture exclusive-capture
  Capture exclusive group: 1
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 31
  Front-Left: 23 [74%] [mute] [---]
  Front-Right: 23 [74%] [mute] [---]
Group 'Headphone',0
  Capabilities: volume mute jointly-mute
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 31
  Front-Left: 0 [0%] [mute] [---]
  Front-Right: 0 [0%] [mute] [---]
Group 'Master',0
  Capabilities: volume mute jointly-mute capture exclusive-capture
  Capture exclusive group: 1
  Channels: Front-Left Front-Right
  Limits: min = 0, max = 63
  Front-Left: 50 [79%] [mute] [---]
  Front-Right: 50 [79%] [mute] [---]
<comment>[chopped for brevity]</comment>

# <i>amixer set Master 100 unmute</i>
# <i>amixer set PCM 100 unmute</i>
# <i>aplay /usr/kde/3/share/sounds/pop.wav</i> <comment>(pop.wav fait partie de KDE)</comment>
</pre>
<p>Après avoir installé les utilitaires alsa nous utilisons <c>amixer</c> pour
régler le volume des canaux sons Master et PCM à 100%. Nous vérifions aussi que
le son fonctionne en utilisant la commande <c>aplay</c> (alsa play). Si vous
entendez un "pop", alors le son fonctionne. Puis, ajustez les paramètres de
volume à votre convenance ; le programme ncurses <c>alsamixer</c> est un bon
moyen pour le faire.
</p>
<p>
Quand vous redémarrez votre système, le script d'init <e>alsa</e> va
correctement sauver et restaurer vos paramètres de volume. 
</p>
</body>
</section>
<section>
<title>Les modules sons du noyau standard</title>
<body>
<p>Pour le son du noyau standard, vous devez recompiler le noyau si vous n'avez
pas compilé votre module son quand vous avez installé Gentoo.
Si vous choisissez de compiler le pilote son comme module (pas compilé
directement dans le noyau), alors vous aurez besoin de rajouter le nom du module
(sans l'extension .o) au fichier <path>/etc/modules.autoload</path>.
Redémarrez la machine si vous avez compilé le module son dans le noyau, ou
simplement lancez <c>modprobe nomdupilote</c> si vous avez compilé le pilote son
comme module. Avec un peu de chance le pilote son approprié devrait être
maintenant chargé. Pour produire vraiment du son, quelques étapes
supplémentaires sont requises.
</p>
<pre caption="les utilisateurs non-devfs seulement">
# <i>cd /dev</i>
# <i>/usr/sbin/MAKEDEV audio</i>
</pre>
<pre>
# <i>cat /usr/kde/2/share/sounds/pop.wav &gt; /dev/dsp</i>
# <i>emerge media-sound/sox</i>
# <i>play /usr/kde/2/share/sounds/pop.wav</i>
</pre>
<p>Si vous entendez un son quelconque avec le 'cat' vers <path>/dev/dsp</path>,
alors le son fonctionne probablement. En installant sox, vous pouvez utiliser la
commande <c>play</c> pour jouer des fichiers .wav (et, contrairement à
<c>cat</c>, le fichier .wav devrait être joué correctement avec <c>play</c>).
</p>
<!-- 
found that when running <e>devfs</e> the /dev/MAKEDEV script
would be missing.  Help? Well, you shouldn't need to run MAKEDEV if you're
using devfs (maybe to get /dev/dsp created?), but if you need it, its real home is in /usr/sbin (/dev/MAKEDEV is
a symlink.  I changed the text to reflect this. [drobbins]
-->
</body>
</section>
<section>
<title>Le son et KDE</title>
<body>
<p>KDE possède certains utilitaires sons sympathiques, incluant le mixer son KDE <c>kmix</c>.
</p>
<pre>
# <i>emerge --search kdemultimedia</i>
[ Results for search key : kdemultimedia ]
[ Applications found : 1 ]

*   kde-base/kdemultimedia
      Latest version Available:  2.2.2
      Latest version Installed:  2.2.2
      Description:  ${DESCRIPTION}Multimedia
# <i>kmix</i>
</pre>
<note>Si kmix ne trouve pas de mixer, alors il doit probablement penser que vous
n'avez pas le support du son. Délogguez vous et supprimer
<path>~/.kde/share/config/kmixrc</path> et
<path>~/.kde/share/config/kmix:*</path> puis relogguez vous encore une fois.
Cette fois il devrait trouver le mixer son correctement.
</note>
</body>
</section>
</chapter>

<chapter>
<title>Mail</title>
<section>
<title>Postfix -- Installation et Configuration</title>
<body>
<p>
J'aprécie énormément <c>postfix</c> pour la gestion des mails, parce qu'il
émule <c>sendmail</c> sans passer pas le cauchemar qu'est la configuration
de <c>sendmail</c>. Tant qu'on y est, on peut aussi installer <c>mutt</c>,
un lecteur de mails, ainsi, on pourra tester notre configuration <c>postfix</c>.
    
</p>
    
<pre>
# <i>emerge --pretend net-mail/postfix net-mail/mutt</i>

These are the packages that I would merge, in order.
 
Calculating dependencies... done!
[ebuild N  ] dev-libs/libpcre-3.4-r1 to /
[ebuild N  ] net-mail/mailbase-0.00-r1 to /
[ebuild N  ] net-mail/postfix-20010228.2 to /
[ebuild N  ] net-mail/mutt-1.3.22.1 to /

# <i>emerge net-mail/postfix net-mail/mutt</i>
</pre>
<p>
Si vous avez seulement l'intentions d'utiliser votre serveur de mail
pour émettre du courrier, alors postfix est déjà configuré pour vous.
Sinon, il vous faudra éditer <path>/etc/postfix/main.cf</path>. La 
configuration du <path>main.cf</path> est assez bien documentée, et les
régalges par defaut sont suffisantes pour une machine personnelle.
Si votre station de travail est connectée directement à l'internet
(i.e. avec sa propre adresse IP non privée et un domaine DNS), alors
le seul changement que vous aurez probablement à faire, est d'autoriser postfix
à recevoir des mails.
</p>
<pre caption="turning on mail reception in main.cf">
# RECEIVING MAIL

# The inet_interfaces parameter specifies the network interface
# addresses that this mail system receives mail on.  By default,
# the software claims all active interfaces on the machine. The
# parameter also controls delivery of mail to user@[ip.address].
#
#inet_interfaces = all
#inet_interfaces = $myhostname
#inet_interfaces = $myhostname, localhost
<i>inet_interfaces = $myhostname, localhost</i>
<i>mydestination = $myhostname, localhost.$mydomain</i>
</pre>


</body>
</section>
<section>
<title>Tester son installation de Postfix (avec Mutt)</title>
<body>
<pre>
# <i>postfix check</i>
<!--
postfix-script: warning: creating missing Postfix pid directory
postfix-script: warning: creating missing Postfix incoming directory
postfix-script: warning: creating missing Postfix active directory
postfix-script: warning: creating missing Postfix bounce directory
postfix-script: warning: creating missing Postfix defer directory
postfix-script: warning: creating missing Postfix deferred directory
postfix-script: warning: creating missing Postfix flush directory
postfix-script: warning: creating missing Postfix saved directory
postfix-script: warning: creating missing Postfix corrupt directory
postfix-script: warning: creating missing Postfix public directory
postfix-script: warning: creating missing Postfix private directory
-->
# <i>newaliases</i>
# <i>postfix start</i>
postfix-script: starting the Postfix mail system
# <i>mutt -x root</i>
/root/.maildir does not exist. Create it? ([y]/n): <comment>[répondez y]</comment>
To:  &lt;root&gt;
Subject: test
(Terminez le message avec une ligne contenant simplement .)
test
.

# <i>mutt</i>
<comment>[Vous devriez voir votre message]</comment>
</pre>
<p>En utilisant <c>postfix check</c> nous nous assurons que <path>main.cf</path>
est analysé correctement et un certain nombre de répertoires importants sont
crées. Lancer <c>newaliases</c> définit les alias du système de courrier et
<c>postfix start</c> démarre l'agent de courrier. J'ai alors utilisé <c>mutt</c>
(en mode <c>mailx</c>, ou l'ancien <c>mail</c>) pour envoyer un message à moi
même sur la machine locale. En même temps <c>mutt</c> crée le répertoire spool
de l'utilisateur (root dans notre cas), <path>~/.maildir</path>. <c>mutt</c>
lancé en mode interactif me montre mon message, donc l'envoi et la réception
locaux fonctionnent. J'ai alors envoyé un email à une de mes adresses
non-locales (non affiché ici) et vérifié que l'email arrive effectivement à
destination.
</p>
<warn>Si vous envoyez un email en utilisant le fichier <path>main.cf</path> par
défaut depuis une machine sur un réseau privé, alors il est possible que vous ne
le receviez jamais. Beaucoup de serveurs de courrier rejetent automatiquement le
courrier provenant d'une source qui ne peut être atteinte par DNS inverse.
</warn>
<p>
En supposant que tout fonctionne, il est temps de configurer postfix pour qu'il
se lance à chaque démarrage.
</p>
<pre>
# <i>postfix stop</i>
postfix-script: starting the Postfix mail system
# <i>rc-update add postfix default</i>
 * postfix added to runlevel default...
 * Caching service dependencies...                        [ ok ] 
 * rc-update complete.
# <i>/etc/init.d/postfix start</i>
Starting postfix......                                    [ ok ]
</pre>

<impo>Les vétérans accros de <c>sendmail</c> ou <c>postfix</c> peuvent être plus
habitués à stocker le courrier dans <path>/var/spool/mail</path> plutôt que dans
les répertoires de l'utilisateur et que le courrier soit stocké au format
<e>mbox</e> plutôt que le format <e>maildir</e>. Ce n'est pas difficile du tout
de reconfigurer <c>postfix</c> et <c>mutt</c> pour utiliser le système unix
mailbox standard (<e>mbox</e>) à la place. Editez
<path>/etc/postfix/main.cf</path> pour commenter <i>home_mailbox</i> et
décommenter <i>mail_spool_directory = /var/spool/mail</i>. Créer le répertoire
de spool courrier avec <c>mkdir -p /var/spool/mail</c> et redémarrez
<c>postfix</c>. Pour <c>mutt</c> vous avez juste besoin d'éditer
<path>/etc/mutt/Muttrc</path> pour utiliser <e>mbox</e> avec <i>set mbox_type =
mbox</i> et le répertoire <path>/var/spool/mail</path> avec <i>set spoolfile=/var/spool/mail</i>.
</impo>

<p>Si vous préférez un client mail avec une interface graphique, nous installons
plus tard dans ce guide Squirrelmail, un webmail. Autrement, Daniel Robbins
recommande chaudement une combinaison de IMAP (que nous installons ci-dessous
comme pré-requis de Squirrelmail) et le client KDE <c>kmail</c>. Le programme
kmail fait parti de <path>kde-base/kdenetwork</path> :
</p>

<pre>
 # <i>emerge --search kdenetwork</i>
[ Results for search key : kdenetwork ]
[ Applications found : 1 ]

*  kde-base/kdenetwork
      Latest version Available:  2.2.2
      Latest version Installed:  2.2.2
      Description:  ${DESCRIPTION}Network
</pre>
<p>
De plus, nous installerons plus tard le programme <e>Evolution</e> de Ximian comme
notre logiciel de PIM (Personal Information Management) avec support du Palm
Pilot. On peut aussi l'utiliser en tant que client mail.
</p>
</body>
</section>
</chapter>

<chapter>
<title>L'impression</title>
<section>
<title>Impression simple -- PDQ</title>
<body>
<p>
Sur des systèmes simples pour lesquels vous n'avez pas besoin du support
<c>samba</c>, le système d'impression PDQ est sympathique et facile.
</p>
<pre>
# <i>emerge net-print/pdq</i>
# <i>xpdq</i>
</pre>
<p>
Cliquez simplement sur <path>Printer/Add printer</path> et ajoutez votre
imprimante. Si votre type d'imprimante n'est pas listé, allez sur
<uri>http://www.linuxprinting.org</uri>, et vous pouvez générer les fichiers
requis à partir de leur site web. Vous devez cliquer sur "Driver options" pour
une configuration plus poussée dans l'imprimante dans <c>xpdq</c>. Toutes les
imprimantes installées en exécutant <c>xpdq</c> en tant que root seront
disponibles pour tous les utilisateurs.
</p>
</body>
</section>
<section>
<title>Impression avec CUPS</title>
<body>
<p>
CUPS est un spooleur d'impression beaucoup plus important qui est totalement
adapté pour un serveur d'impression. Heureusement il est plutôt facile à
installer puisque la plus grande part de la configuration peut être réalisée à
partir du serveur web intégré à CUPS. Bien que CUPS est nominalement un spouleur
d'impression System V (il utilise la série de commandes <c>lp</c>), il émule
aussi toutes les commandes <c>lpr</c>.
</p>
<pre>
# emerge --pretend net-print/gimp-print-cups
These are the packages that I would merge, in order.
 
Calculating dependencies.. done!
[ebuild N  ] net-print/cups-1.1.10-r6 to /
[binary N  ] net-print/gimp-print-cups-4.1.1 to /
# emerge gimp-print-cups
# rc-update add cupsd default
 * cupsd added to runlevel default...
 * Caching service dependencies...                                        [ ok ] 
 * rc-update complete.
# /etc/init.d/cupsd start
Starting Common Unix Printing System...... [  ok  ]
# konqueror localhost:631
</pre>
<p>
le paquet <c>gimp-print-cups</c> est un ensemble de pilotes d'imprimantes pour
cups, qui est utile car le paquet cups lui même n'inclue les pilotes que pour
les imprimantes HP et Epson.
Compiler <c>gimp-print-cups</c> compile cups comme dépendance. Une fois que cups
est construit nous ajoutons ces scripts init au runlevel par défaut en utilisant
<c>rc-update</c>, puis nous activons le démon cups en démarrant le script init. 
</p>
<p>
Configurer cups nécessite simplement un navigateur web pour se connecter au
serveur web que fait tourner cups sur l'hôte local sur le port 631. [Remarquez
que le serveur web cups est configuré pour accepter les requêtes seulement sur
l'hôte local.] Une fois connecté à l'interface web, cliquer (ou l'équivalent si
vous utilisez <c>lynx</c>) sur "Do Administrative Tasks". Un compte et un mot de
passe cups vous seront demandés ; vous pouvez utiliser soit "root" (et le mot de
passe "root"), soit n'importe quel nom d'utilisateur appartenant au groupe "lp".
Encore une fois, comme le serveur web existe seulement sur l'hôte local, vous
n'avez pas à vous soucier des informations qui sont transmises vers le serveur.
Pour ajouter une imprimante cliquer sur "Add Printer" et suivez les
instructions. L'aide peut être obtenue en cliquant sur "Help" puis en lisant le
"Software Administrator's Manual". Si vous pensez qu'il vous manque le pilote
d'imprimante approprié alors vous pouvez en créer un en vous dirigeant sur le
site <uri>http://www.linuxprinting.org</uri>.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Samba</title>
<section>
<body>
<p>
Samba est un paquet remarquable qui permet à votre machine linux de partager des
fichiers et des imprimantes avec les machines MS Windows. Pour plus
d'informations détaillées lire les articles sur Samba par Daniel Robbins sur
<uri>http://www.ibm.com/developerworks</uri>.
</p>
<pre>
# <i>emerge net-fs/samba</i>
# <i>rc-update add samba default</i>
# <i>cd /etc/smb</i>
# <i>cp /etc/smb/smb.conf.example /etc/smb/smb.conf</i>
# <i>nano -w /etc/smb/smb.conf</i>
</pre>
<pre caption="smb.conf -- groupe de travail">
# workgroup = NT-Domain-Name or Workgroup-Name, eg: REDHAT4
   workgroup = MYGROUP <comment>[modifiez pour que cela corresponde à votre
   groupe de travail]</comment>
</pre>
<pre caption="smb.conf -- impression avec cups">
# It should not be necessary to specify the print system type unless
# it is non-standard. Currently supported print systems include:
# bsd, sysv, plp, lprng, aix, hpux, qnx
;   printing = bsd
    printing = cups
</pre>
<pre caption="smb.conf -- encryption">
# You may wish to use password encryption. Please read
# ENCRYPTION.txt, Win95.txt and WinNT.txt in the Samba documentation.
# Do not enable this option unless you have read those documents
  encrypt passwords = yes
</pre>
<p>
J'ai des besoins minimaux avec Samba. Je veux juste être capable de partager des
fichiers entre ma machine Linux et mes machines Windows et je veux utiliser ma
machine Linux comme serveur d'impression (en utilisant <c>cups</c>). Après
l'installation, il suffit de faire quelques modifications dans le fichier
<path>/etc/smb/smb.conf</path>. En particulier, la variable <e>workgroup</e>
doit correspondre au groupe de travail du réseau Windows (J'utilise
habituellement "OLYMPUS", "WORKGROUP" est le groupe par défaut sous Windows),
<e>printing</e> doit être égal à <e>cups</e> à la place de <e>bsd</e>, et la
ligne <e>encrypt passwords = yes</e> doit être décommentée. Les machines Windows
utilisent par défaut des mots de passe encryptés, donc ce dernier changement est
essentiel sauf si vous voulez bidouiller les bases de registres de vos machines
Windows <comment>non recommandé</comment>. Manque de chance, Windows utilise une
méthode d'encryption différente de Linux pour les mots de passe, donc vous devez
maintenir un fichier de mot de passe différent pour samba.
</p>
<pre>
# <i>smbpasswd -a grant</i> <comment>[Remplacez "grant" par votre nom
# d'utilisateur]</comment>
New SMB password:
Retype new SMB password:
startsmbfilepwent_internal: unable to open file /etc/smb/private/smbpasswd. Error was No such file or directory
Added user grant.
</pre>
<note>
Avant d'ajouter un utilisateur à la liste de mots de passe samba, cet
utilisateur doit déjà être présent dans <path>/etc/passwd</path>.
</note>
<p>
Pour chaque utilisateur voulant utiliser Samba depuis une machine Windows vous
devez d'abord exécuter la commande <c>smbpasswd</c>. Samba stocke ses mots de
passe dans <path>/etc/smb/private/smbpasswd</path> qui est créé à la première
exécution de la commande <c>smbpasswd</c>, accompagnée de l'"erreur" ci-dessus.
</p>
<pre>
# <i>/etc/init.d/samba start</i>
Starting samba...        [  ok  ]
</pre>
<p>
Démarrez samba et vous devez être désormais capable de vous connecter à votre
machine Gentoo Linux depuis n'importe laquelle de vos machines Windows et voir
le répertoire personnel de l'utilisateur avec lequel vous vous connectez et
aussi les imprimantes que vous avez installées. Si vous ne pouvez pas vous
connecter, jetez un coup d'oeuil à
<path>/usr/share/doc/samba-2.2.0a/textdocs/DIAGNOSIS.txt.gz</path> pour une aide
additionnelle.
</p>
</body>
</section>
</chapter>

<chapter>
<title>Apache et Squirrelmail webmail</title>
<section>
<title>Apache avec SSL et PHP</title>
<body>
<p>En supposant que vous avez une adresse IP statique (ou que vous utilisez un
service tel que dyndns avec votre adresse IP dynamique), alors vous pourriez
avoir envie d'une façon efficace pour vérifier votre courrier quand vous êtes de
sortie. La solution que j'ai choisie est d'installer un serveur webmail,
Squirrelmail, auquel je peux accéder à distance en utilisant n'importe quel
navigateur web.</p>
<p>La première étape est d'installer un serveur web. La plupart des gens
utilise Apache ; nous allons faire de même. Nous allons aussi installer PHP
(PHP4 en fait) en même temps, puisque Squirrelmail est un programme PHP.</p>
<pre>
# <i>emerge net-www/apache dev-lang/php</i>
# <i>nano -w /etc/httpd/httpd.conf</i>
</pre>
<impo>Si vous voulez qu'Apache ait le support SSL, vous devez vous assurer que
"ssl" est présent parmi vos variables USE. Si vous voulez vérifier votre
courrier à distance sans envoyer votre mot de passe en clair à travers Internet,
alors vous <e>voulez</e> SSL !.</impo>
<p>Vous devriez jeter un coup d'oeil à <path>/etc/httpd/httpd.conf</path>
puisqu'Apache est très configurable. Par défaut la racine du serveur Apache
(l'endroit où le serveur Apache va d'abord chercher les fichiers html quand vous
vous connectez sur http://www.servername.foo ou or http://localhost) est
<path>/usr/local/httpd</path> ; vous êtes libres de déplacer la racine.</p>
<pre caption="/etc/httpd/httpd.conf">
# Do NOT add a slash at the end of the directory path.
#
ServerRoot "/usr/local/httpd" <comment>(Editez cette ligne si vous voulez)</comment>

</pre>
<pre>
# <i>rc-update add httpd default</i>
 * httpd added to runlevel default...
 * Caching service dependencies...               [ ok ]
 * rc-update complete.
# <i>nano -w /etc/rc.conf</i>
</pre>

<p>Utilisez <c>rc-update</c> pour ajouter Apache au runlevel par défaut, puis
éditez <path>/etc/rc.conf</path> pour ajouter les lignes suivantes pour
qu'Apache charge automatiquement les modules SSL et PHP au démarrage.</p>
<pre caption="/etc/rc.conf -- ajoutez à la fin pour SSL et PHP">
#Apache options
HTTPD_OPTS="-D SSL -D PHP4"
</pre>
<pre>
# <i>/etc/init.d/httpd start</i>
 * Starting Apache...                            [ OK ]
# <i>lynx localhost</i>
</pre>
<pre caption="serveur Apache fonctionnel">
      Test Page for the SSL/TLS-aware Apache Installation on Web Site (p1 of 2)
                               Hey, it worked !
                    The SSL/TLS-aware Apache webserver was
                    successfully installed on this website.
</pre>
<p>Vous pouvez vérifier que votre serveur Apache fonctionne en utilisant
n'importe quel navigateur pour se connecter à localhost, et vous devriez voir
les mêmes lignes que ci-dessus. Pour vous assurer que le support SSL est
fonctionnel, utilisez un navigateur pour vous connecter à
<uri>http<comment>s</comment>://localhost</uri>. Le préfixe <c>https</c> indique
au navigateur de créer une connexion <e>sécurisée</e> au serveur en utilisant
SSL. Le résultat est une page qui devrait ressembler à celle ci-dessus, mais les
navigateurs graphiques devraient avoir un icône de cadenas quelquepart indicant
une connexion sécurisée.</p>
<note>Quand vous réalisez une connexion sécurisée à votre serveur, vous allez
sûrement recevoir un avertissement car le certificat de sécurité de votre site
n'est pas reconnu. L'ebuild Apache installe lui-même un certificat de sécurité
auto-signé. Voir le manuel de <c>mod_ssl</c> :
<uri>http://localhost/manual/mod/mod_ssl/ssl_intro.html#ToC5</uri>. Pour une
utilisation personnelle, l'utilisation d'un certificat auto-signé suffit
largement.
</note>
<p>Maintenant nous devons nous assurer que PHP fonctionne correctement. La
première étape est de créer un fichier PHP simple et de le placer dans le
répertoire racine du serveur Apache.</p>
<pre>
# <i>echo "&lt;? phpinfo(); ?&gt;" > /usr/local/httpd/htdocs/test.php</i>
# <i>lynx http://localhost/test.php</i>
</pre>
<pre caption="Apache fonctionnel + PHP">
                                                           phpinfo() (p1 of 26)
                                  PHP Logo
 
                             PHP Version 4.0.6
 
     System Linux my.server.edu 2.4.10 #1 Tue Oct 9 16:33:50 Local
           time zone must be set--see zic manuali686 i686 unknown
                           Build Date Oct 16 2001
</pre>
<p>Si vous apercevez quelque chose comme ci-dessus, alors Apache traite
avec succès du code PHP.</p>
<warn>Si vous regardez la sortie ci-dessus, vous constatez que le script
<path>test.php</path> vous donne <e>beaucoup</e> d'informations à propos de
votre système. Vous devriez probablement vous en débarrasser maintenant que vous
savez que PHP fonctionne. (Ou vous pouvez faire ce que je fais, simplement <c>mv
test.php test.phps</c>. Apache va afficher <path>test.phps</path> comme un
fichier source PHP plutôt que d'exécuter ce script.)</warn>
</body>
</section>
<section>
<title>Courier IMAP</title>
<body>
<p>Squirrelmail est une application PHP, mais elle dépend d'un serveur IMAP pour
faire le lien entre le serveur web et le courrier. Puisque Gentoo Linux utilise
des dossiers au format Maildir, Courier IMAP est un bon choix.</p>
<pre>
# <i>emerge net-mail/courier-imap</i>
# <i>rc-update add courier-imapd default</i>
 * courier-imapd added to runlevel default...
 * Caching service dependencies...                        [ ok ]
 * rc-update complete.
# <i>nano -w /etc/courier-imap/authdaemonrc</i>
# <i>/etc/init.d/courier-imapd start</i>
# <i>telnet localhost 143</i>
Trying 127.0.0.1...
Connected to localhost.localdomain.
Escape character is '^]'.
* OK Courier-IMAP ready. Copyright 1998-2001 Double Precision, Inc.  
See COPYING for distribution information.
1 LOGIN grant passwd <comment>(&lt;-- remplacez "grant" par votre nom
d'utilisateur et "passwd" par votre mot de passe)</comment>
1 OK LOGIN OK
<comment>(Tapez &lt;ctrl&gt;-"]" et tapez "quit" pour sortir)</comment>
</pre>
<pre caption="Autorisation correcteation dans /etc/courier-imap/authdaemonrc">
##NAME: authmodulelist:0
#
# The authentication modules that are linked into authdaemond.  The
# default list is installed.  You may selectively disable modules simply
# by removing them from the following list.  The available modules you
# can use are: authcustom authcram authuserdb authpam

#authmodulelist="authcustom authcram authuserdb authpam"
authmodulelist="authpam"
</pre>
<impo>Courier IMAP écrit en dur le nom du répertoire d'arrivée de type Maildir
de l'utilisateur qui est utilisé dans son script de démarrage rc,
<path>/usr/lib/courier-imap/imapd.rc</path>, qui est <path>$HOME/Maildir</path>.
Gentoo Linux, cependant, utilise $HOME/.maildir à la place, donc l'ebuild
courier-imap modifie le script <path>imapd.rc</path> pour utiliser
<e>$MAILDIR</e>, qui est obtenu depuis le script d'init Gentoo
<path>/etc/init.d/courier-imap</path>. Si vous choisissez d'utiliser une boîte
de réception autre que <path>.maildir</path>, vous aurez besoin de modifier
l'entrée <e>MAILDIR=.maildir</e> dans le script d'init de courier-imap.</impo>
<p>
Si vous voulez utiliser Courier IMAP avec le support SSL, vous devez simplement
créer le certificat IMAP SSL (et indiquer à courier-imap où le trouver),
</p>
<pre>
# <i>/usr/sbin/mkimapdcert</i> 
</pre>
<p>puis démarrez imap-ssl.</p>
<pre>
# <i>rc-update add courier-imapd-ssl default</i>
# <i>/etc/init.d/courier-imapd-ssl start</i>
</pre>
<p>Vous pouvez vérifier qu'imap fonctionne en utilisant n'importe client email
qui supporte l'IMAP, comme netscape, kmail ou mutt.</p>
<pre>
# <i>mutt -f imap://localhost</i>
</pre>
</body>
</section>
<section>
<title>Squirrelmail</title>
<body>
<p>Heureusement, l'installation et la configuration de Squirrelmail, une fois
que tous les composants sont en place, est directe.</p>
<pre>
# <i>emerge net-mail/squirrelmail</i>
# <i>cd /usr/local/httpd/htdocs</i>
# <i>cd squirrelmail</i>
# <i>./configure</i>
</pre>
<note>Si la racine du serveur Apache n'est pas <path>/usr/local/httpd</path>,
vous devez éditer l'ebuild <path>net-mail/squirrelmail</path> pour pointer vers
votre racine.</note>
<p>Pour que Squirrelmail fonctionne correctement, vous devez vous assurer que
tous les fichiers sont la propriété de l'utilisateur sous lequel Apache est
exécuté (l'ebuild squirrelmail suppose que cet utilisateur est "nobody").
Utilisez <c>./configure</c> pour choisir l'option <e>2</e>.</p>
<pre caption="Configuration de Squirrelmail  -- paramètres du serveur">
SquirrelMail Configuration : Read: config.php
---------------------------------------------------------
Server Settings
1.  Domain               : my.server.edu
2.  IMAP Server          : localhost
3.  IMAP Port            : 143
4.  Use Sendmail/SMTP    : SMTP
6.    SMTP Server        : localhost
7.    SMTP Port          : 25
8.    Authenticated SMTP : false
9.  Server               : courier
10. Invert Time          : false
11. Delimiter            : detect
 
R   Return to Main Menu
C.  Turn color off
S   Save data
Q   Quit
 
Command >>
</pre>
<p>Assurez vous que <e>Server</e> est réglé à <e>courier</e>. Retournez au menu
principal et choisissez l'option <e>4</e>, General
Options.</p>
<pre caption="Configuration de SquirrelMail -- Options générales">
SquirrelMail Configuration : Read: config.php
---------------------------------------------------------
General Options
1.  Default Charset        : iso-8859-1
2.  Data Directory         : ../data/
3.  Attachment Directory   : /tmp/
4.  Default Left Size      : 150
5.  Usernames in Lowercase : false
 
R   Return to Main Menu
C.  Turn color off
S   Save data
Q   Quit
 
Command >>
</pre>
<p>J'utilise le répertoire de données dans ce paquet, bien qu'il serait plus sûr
d'utiliser un répertoire en dehors de l'arborescence des documents Apache.
J'utilise aussi <path>/tmp</path> comme répertoire pour stocker les
attachements.</p>

<p>Avant d'utiliser squirrelmail, vous devez d'abord modifier le fichier de
configuration PHP, <path>/etc/php4/php.ini</path>, pour activer les variables de
registre puis redémarrer apache : </p>
<pre>
# <i>nano -w /etc/php4/php.ini</i>
# <i>/etc/init.d/apache restart</i>
</pre>
<pre caption="Edition de /etc/php4/php.ini">
; You should do your best to write your scripts so that they do not require
; register_globals to be on;  Using form variables as globals can easily lead
; to possible security problems, if the code is not very well thought of.
;register_globals = Off
<comment>register_globals = On</comment>
</pre>

<!-- 
<p>Vous devez aussi faire une petite modification à la configuration d'Apache
pour qu'il sache que <path>index.php</path> devrait être exécuté à l'entrée d'un
répertoire contenant un tel fichier.</p>
<pre>
# <i>nano -w /etc/httpd/httpd.conf</i>
# <i>/etc/init.d/httpd restart</i>
 * Stopping apache...              [ ok ] 
 * Starting apache...              [ ok ]
</pre>
<pre caption="/etc/httpd/httpd.conf">
#
# DirectoryIndex: Name of the file or files to use as a pre-written HTML
# directory index.  Separate multiple entries with spaces.
#
&lt;IfModule mod_dir.c&gt;
    DirectoryIndex index.html index.htm <comment>index.php</comment>
&lt;/IfModule&gt;

</pre>
-->
<p>Naviguez sur <uri>https://localhost/squirrelmail/</uri>, et cela devrait
fonctionner !</p>
<pre>
# <i>lynx https://localhost/squirrelmail/</i>
</pre>
<pre caption="Squirrelmail login page">
                                                           SquirrelMail - Login
                               [sm_logo.jpg]
 
                      SquirrelMail version 1.2.0 [rc2]
                    By the SquirrelMail Development Team
 
                             SquirrelMail Login
 
       Name: ____________________
   Password: ____________________
 
                                   Login
</pre>
<p>(Je ne recommande pas d'utiliser lynx avec Squirrelmail mais vous pouvez !)</p>
</body>
</section>
</chapter>

<chapter>
<title>Personal Information Management</title>
<title>Gestion d'Informations personnelles (PIM)</title>
<section>
<title>Evolution avec support du Palm</title>
<body>
<p>Evolution est un outil de PIM fortement sympathique qui peut se synchroniser
avec un Palm Pilot. La première étape est d'installer evolution. Si vous comptez
utiliser evolution avec un Palm Pilot, assurez vous que "pda" est parmi vos
variables USE dans <path>/etc/make.conf</path> avant d'installer evolution.
</p>
<pre>
# <i>emerge --pretend net-mail/evolution</i>

These are the packages that I would merge, in order.

Calculating dependencies................................ done!
[ebuild N  ] app-text/ghostscript-6.50-r2 to /
[ebuild N  ] app-text/tetex-1.0.7-r4 to /
[ebuild   U] media-libs/freetype-2.0.5-r1 to /
[ebuild N  ] gnome-base/ORBit-0.5.12-r1 to /
[ebuild N  ] media-libs/giflib-4.1.0-r3 to /
[ebuild N  ] media-libs/imlib-1.9.10-r1 to /
[ebuild N  ] gnome-base/gnome-libs-1.4.1.2-r2 to /
[ebuild N  ] dev-libs/libxml-1.8.16 to /
[ebuild N  ] gnome-base/libglade-0.17-r3 to /
[ebuild N  ] media-libs/gdk-pixbuf-0.14.0 to /
[ebuild N  ] gnome-base/gnome-print-0.34 to /
[ebuild N  ] dev-libs/popt-1.5 to /
[ebuild N  ] dev-util/intltool-0.12 to /
[ebuild N  ] gnome-base/oaf-0.6.7 to /
[ebuild N  ] gnome-base/bonobo-1.0.17 to /
[ebuild N  ] dev-libs/libunicode-0.4-r1 to /
[ebuild N  ] dev-util/guile-1.5.4 to /
[ebuild N  ] gnome-base/gconf-1.0.7-r2 to /
[ebuild N  ] gnome-base/gnome-vfs-1.0.3 to /
[ebuild N  ] gnome-extra/gal-0.18.1 to /
[ebuild N  ] gnome-base/control-center-1.4.0.1-r3 to /
[ebuild N  ] dev-libs/pilot-link-0.9.6-r3 to /
[ebuild N  ] app-text/scrollkeeper-0.2 to /
[ebuild N  ] gnome-base/gnome-core-1.4.0.4-r3 to /
[ebuild N  ] gnome-extra/gnome-pilot-0.1.64 to /
[ebuild N  ] gnome-base/libghttp-1.0.9-r1 to /
[ebuild N  ] gnome-extra/gtkhtml-1.0.0 to /
[ebuild N  ] gnome-extra/bonobo-conf-0.14 to /
[ebuild N  ] app-arch/zip-2.3-r1 to /
[ebuild N  ] app-arch/unzip-5.42 to /
[ebuild N  ] net-www/mozilla-0.9.6-r4 to /
[ebuild N  ] net-mail/evolution-1.0-r2 to /

# <i>emerge net-mail/evolution</i> 
</pre>
<p>
Manque de chance, la compilation d'evolution dure un temps infini (notez que
<c>mozilla</c> est une dépendance !) ; prévoyez plusieurs litres de café/thé
pendant que vous attendez. 
</p>
<p>
Pendant la construction d'<c>evolution</c> les outils nécessaires Palm Pilot
doivent aussi être construits. Pour vous assurer que les utilisateurs normaux
puissent synchroniser leur Palm Pilot nous devons réaliser quelques changements
sur les permissions du port série. Je suppose que la base de votre Palm se
branche dans le premier port série (/dev/ttyS0 ou /dev/tts/0 dans la notation
"devfs").
</p>
<pre>
# <i>groupadd serial</i>
# <i>chown root.serial /dev/tts/0</i>
# <i>chmod g+rw /dev/tts/0</i>
# <i>ls -l /dev/tts/0</i>
crw-rw----    1 root     serial     4,  64 Dec 31  1969 /dev/tts/0
# <i>ln -s /dev/tts/0 /dev/pilot</i>
# <i>nano -w /etc/group</i> <comment>(ajoutez les utilisateurs appropriés au
# groupe serial)</comment>
</pre>
<p>
Nous avons ajouté un groupe "serial" au système, et vous devez ajouter tous les
utilisateurs qui ont besoin d'utiliser le port série (tous les utilisateurs de
Palm Pilot) au groupe serial. Nous avons donné les permissions "rw" au groupe
serial sur <path>/dev/tts/0</path> et pour une référence future, nous avons fait
un lien symbolique de <path>/dev/pilot</path> vers <path>/dev/tts/0</path>.
Grâce à des changements récents dans le comportement de devfs sur Gentoo, ces
changements seront persistants après redémarrage.
</p>
<note>
Les utilisateurs des versions antérieures à rc6-r13 peuvent soit mettre à jour
<path>sys-apps/baselayout</path> et <path>sys-apps/devfsd</path> (et fusionner
tous les fichiers "._cfg* dans <path>/etc</path> qui en résultent), ou ajoutez
simplement les permissions appropriées et les liens symboliques dans <path>/etc/devfsd.conf</path>.
</note>
<p>
Les utilisateurs peuvent utiliser l'option du menu <path>tools/Pilot
settings</path> dans evolution pour configurer le logiciel Gnome pilot.
N'oubliez pas de configurer "Pilot Conduits" et "Pilot Link" dans le Gnome Control Center.
</p>
</body>
</section>
</chapter>
</guide>
