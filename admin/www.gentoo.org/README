$Header: /var/cvsroot/gentoo/admin/www.gentoo.org/README,v 1.2 2003/01/30 08:47:26 rajiv Exp $

Hi There!

Here are some simple instructions on how to configure and update this site, written by 
Daniel Robbins on 09 Nov 2002. Updated by Rajiv Manglani.

Here is how you would typically go about setting up a gentoo.org Web site from scratch assuming the machine will handle only www.gentoo.org:

1) install apache, AxKit, mod_gzip, keychain
2) add a 'gweb' user with home dir /home/httpd
3) setup gweb ssh pub/priv keys
4) setup gweb .bash_profile to call keychain
5) do this:
$ cd /home/httpd
$ export CVS_RSH=ssh
$ cvs -d:ext:gweb@cvs.gentoo.org:/home/cvsroot co gentoo-src/gentoo-xml
$ cvs -d:ext:gweb@cvs.gentoo.org:/home/cvsroot co gentoo-x86
$ export WEBROOT=/home/httpd/gentoo-src/gentoo-xml/htdocs
$ cd /home/httpd/gentoo-src/gentoo-xml/scripts
$ (run all scripts in this directory to generate dynamic content and sync images to ibiblio)
6) rm your apache.conf and replace it with a symlink to /home/httpd/gentoo-src/gentoo-xml/conf/www.gentoo.org-apache.conf
7) start apache. The site is up and running.
8) cron /home/httpd/gentoo-src/gentoo-xml/scripts/nightly.sh to keep the site continually up-to-date.

If the machine will handle other virtual hosts, see the config files in /home/httpd/gentoo-src/gentoo-xml/conf for instructions.

Here is how to update the site:

$ cd /home/httpd/gentoo-src/gentoo-xml/htdocs
$ cvs -q update -dP
$ cd ../scripts
$ (run scripts as necessary to regenerate portions of the site/sync images to ibiblio)

Best Regards,

Daniel Robbins & Rajiv Manglani
