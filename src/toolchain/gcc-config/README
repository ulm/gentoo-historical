gcc-config 2.0

gcc-config 2.0 is incompatible with previous versions of gcc-config.  A
migration path has not been implemented yet.

configuration directory: /etc/gcc-config
All configuration information is stored in this directory.  The current config
format is as follows, but it is subject to change before release.

The selection file (/etc/gcc-config/selection.conf) lists the currently selected
profiles for each CHOST handled by gcc-config.  It is formatted as follows:
<selections>
	<default_chost>##DEFAULT CHOST##</default_chost>
	<selection>
		<chost>##CHOST##</chost>
		<version>##gcc version being used##</version>
		<profile>##profile name##</profile>
	</selection>
	<selection>
...
	</selection>
...
</selections>

Configuration file (for each installed gcc package) is named /etc/gcc-config/<version>.conf formatted as follows:
<gcc_profiles>
	<version>##version##</version>
	<binpath>##Path containing binaries to execute when using this profile##</binpath>
	<infopath>##Where the info pages are##</infopath>
	<manpath>##Where the man pages are##</manpath>
	<profile>
		<name>##Profile Name##</name>
		<chost>##Default CHOST for this profile##</name>
		<spec>##GCC specs file to use##</spec>
		<ldpath>##Path to add to ld.so.conf##</ldpath>
		<cflags>##additional CFLAGS to prepend to the command line##</cflags>
	</profile>
	<profile>
...
	</profile>
...
</gcc_profiles>

Note that the <chost> in <profile> is only used as a way to tell the user what this profile is used for.
The <chost> set in the <selection> tag determines how the binaries act.  The <default_chost> in the <selections>
tag determines how the binaries 'gcc', 'g++', etc (that is the ones without a prefix) behave.

Example /etc/gcc-config/master.conf:
<selections>
	<default_chost>x86_64-pc-linux-gnu</default_chost>
	<selection>
		<chost>x86_64-pc-linux-gnu</chost>
		<version>x86_64-pc-linux-gnu-3.4.4</version>
		<profile>amd64-vanilla</profile>
	</selection>
	<selection>
		<chost>i686-pc-linux-gnu</chost>
		<version>x86_64-pc-linux-gnu-3.4.4</version>
		<profile>x86-vanilla</profile>
	</selection>
	<selection>
		<chost>pentium4-pc-linux-gnu</chost>
		<version>x86_64-pc-linux-gnu-3.4.4</version>
		<profile>p4-vanilla</profile>
	</selection>
</selections>

Example /etc/gcc-config/x86_64-pc-linux-gnu-3.4.4.conf:
<gcc_profiles>
	<version>x86_64-pc-linux-gnu-3.4.4</version>
	<binpath>/usr/x86_64-pc-linux-gnu/gcc-bin/3.4.4</binpath>
	<infopath>/usr/share/gcc-data/x86_64-pc-linux-gnu/3.4.4/info</infopath>
	<manpath>/usr/share/gcc-data/x86_64-pc-linux-gnu/3.4.4/man</manpath>
	<profile>
		<name>amd64-vanilla</name>
		<spec>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/vanilla.specs</spec>
		<ldpath>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4</ldpath>
		<cflags>-m64</cflags>
	</profile>
	<profile>
		<name>amd64-hardened</name>
		<spec>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/hardened.specs</spec>
		<ldpath>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4</ldpath>
		<cflags>-m64</cflags>
	</profile>
	<profile>
		<name>x86-vanilla</name>
		<spec>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/vanilla.specs</spec>
		<ldpath>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/32</ldpath>
		<cflags>-m32</cflags>
	</profile>
	<profile>
		<name>p4-vanilla</name>
		<spec>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/vanilla.specs</spec>
		<ldpath>/usr/lib/gcc/x86_64-pc-linux-gnu/3.4.4/32</ldpath>
		<cflags>-march=pentium4 -m32</cflags>
	</profile>
</gcc_profiles>
