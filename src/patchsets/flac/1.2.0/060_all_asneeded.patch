diff -ur flac-1.2.0.orig/src/flac/Makefile.am flac-1.2.0/src/flac/Makefile.am
--- flac-1.2.0.orig/src/flac/Makefile.am	2007-07-11 07:13:09.000000000 +0300
+++ flac-1.2.0/src/flac/Makefile.am	2007-08-05 20:36:17.000000000 +0300
@@ -17,8 +17,6 @@
 
 bin_PROGRAMS = flac
 
-AM_CFLAGS = @OGG_CFLAGS@
-
 EXTRA_DIST = \
 	Makefile.lite \
 	flac.dsp \
@@ -46,6 +44,5 @@
 	$(top_builddir)/src/share/replaygain_synthesis/libreplaygain_synthesis.la \
 	$(top_builddir)/src/share/utf8/libutf8.la \
 	$(top_builddir)/src/libFLAC/libFLAC.la \
-	@OGG_LIBS@ \
 	@LIBICONV@ \
 	-lm
Only in flac-1.2.0/src/flac: Makefile.am.orig
diff -ur flac-1.2.0.orig/src/libFLAC/Makefile.am flac-1.2.0/src/libFLAC/Makefile.am
--- flac-1.2.0.orig/src/libFLAC/Makefile.am	2007-07-11 07:13:09.000000000 +0300
+++ flac-1.2.0/src/libFLAC/Makefile.am	2007-08-05 20:36:17.000000000 +0300
@@ -47,22 +47,25 @@
 
 AM_CFLAGS = $(DEBUGCFLAGS) $(CPUCFLAGS) @OGG_CFLAGS@
 
+LOCAL_EXTRA_LIBADD = 
+libFLAC_la_CFLAGS = $(AM_CFLAGS)
+
 if FLaC__NO_ASM
 else
 if FLaC__CPU_IA32
 if FLaC__HAS_NASM
 ARCH_SUBDIRS = ia32
-LOCAL_EXTRA_LIBADD = ia32/libFLAC-asm.la
+LOCAL_EXTRA_LIBADD += ia32/libFLAC-asm.la
 endif
 endif
 if FLaC__CPU_PPC
 ARCH_SUBDIRS = ppc
 if FLaC__HAS_AS__TEMPORARILY_DISABLED
-LOCAL_EXTRA_LIBADD = ppc/as/libFLAC-asm.la
+LOCAL_EXTRA_LIBADD += ppc/as/libFLAC-asm.la
 LOCAL_EXTRA_LDFLAGS = "-Wl,-read_only_relocs,warning"
 else
 if FLaC__HAS_GAS__TEMPORARILY_DISABLED
-LOCAL_EXTRA_LIBADD = ppc/gas/libFLAC-asm.la
+LOCAL_EXTRA_LIBADD += ppc/gas/libFLAC-asm.la
 LOCAL_EXTRA_LDFLAGS = ""
 endif
 endif
@@ -89,11 +92,13 @@
 	libFLAC.m4
 
 if FLaC__HAS_OGG
+libFLAC_la_CFLAGS += $(OGG_FLAGS)
 extra_ogg_sources = \
 	ogg_decoder_aspect.c \
 	ogg_encoder_aspect.c \
 	ogg_helper.c \
 	ogg_mapping.c
+libFLAC_la_LIBADD += $(OGG_LIBS)
 endif
 # see 'http://www.gnu.org/software/libtool/manual.html#Libtool-versioning' for numbering convention
 libFLAC_la_LDFLAGS = -version-info 9:0:1 -lm $(LOCAL_EXTRA_LDFLAGS)
Only in flac-1.2.0/src/libFLAC: Makefile.am.orig
