http://debbugs.gnu.org/cgi/bugreport.cgi?bug=9754
https://bugs.gentoo.org/401199
Fix infinite loop in xg_select() with glib >= 2.31.

--- emacs-23.4-orig/src/xgselect.c
+++ emacs-23.4/src/xgselect.c
@@ -55,6 +55,8 @@ xg_select (max_fds, rfds, wfds, efds, ti
   do {
     if (n_gfds > gfds_size) 
       {
+        if (gfds_size == 0)
+          gfds_size = 128;
         while (n_gfds > gfds_size) 
           gfds_size *= 2;
         xfree (gfds);
