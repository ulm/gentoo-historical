--- src/lib/kdb/kdb_default.c.orig	2008-03-19 21:39:09.000000000 +0100
+++ src/lib/kdb/kdb_default.c	2008-03-19 21:39:29.000000000 +0100
@@ -185,8 +185,7 @@
 		kf) != key->length)) {
 	retval = errno;
 	(void) fclose(kf);
-    }
-    if (fclose(kf) == EOF)
+    } else if (fclose(kf) == EOF)
 	retval = errno;
 #if HAVE_UMASK
     (void) umask(oumask);
