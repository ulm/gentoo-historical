Creating a Gentoo CD
--------------------

   This document will guide you through the process of creating an iso image of
a Gentoo LiveCD.  The LiveCD is a bootable, fully functional Gentoo system,
run off of a CD.  Most often they are used to install Gentoo, but they are
also handy as a rescue CD or demo.

   The LiveCD is essentially a stage 3 build of Gentoo with a few extra
packages for whatever application the CD is to serve.


SETUP
=====
  First you have to install the livecd-ng script that does all the work.

  # emerge livecd-ng

This will install the script as well as a sample profile in
/etc/livecd-ng/basic.  The important files are:

settings
--------
This file contains variables that control the LiveCD creation process.  It is pretty self-explanatory, but here are a couple of the more important variables:

CD_STAGETARBALL: the URL of a stage 3 Gentoo tarball that serves as the base
                 of the CD filesystem
STORAGE_MODULES: modules to auto-detect/copy to the initrd. 
                 *Order is important*
LOOP_SIZE: Size of the compressed file system

stage1-packages
---------------
These are extra packages to emerge into the system.

stage1-experimental
-------------------
If you need to merge any extra packages that are keyword-masked (i.e.,
KEYWORDS="~x86"), then place them in this file.

stage2-packages
---------------
Once, again place extra packages to be merged in this file.  These packages are merged *after* the kernel, though.

motd
----
Standard UNIX "Message of the Day" banner that is displayed right before the
login prompt.

kernel-config-*
--------------
Place the .config file for the CD kernel in here, and specify it in the
settings file.


The last file to configure is ~/.livecd-ng.  It should define the following variables:

CD_DISTDIR=/usr/portage/distfiles # location to get distfiles
CD_PORTDIR=/usr/portage           # portage tree to use for CD
CD_TEMPROOT=/tmp                  # where to build iso (need ~1GB)
CD_STAGELOC=/home/chadh/          # where to download the stage tarball to


CREATION
========

To create the iso file, you simply execute the following command

# <path_to>/livecd-ng fetch build initrd clean cloop isogen umount

livecd-ng --help has more about exactly what the directives do.
